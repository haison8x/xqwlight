var cc=cc||{};cc._tmp=cc._tmp||{},cc._LogInfos={};var _p=window,_p=Object.prototype,_p=null;cc._drawingUtil=null,cc._renderContext=null,cc._supportRender=!1,cc._canvas=null,cc.container=null,cc._gameDiv=null,window.ENABLE_IMAEG_POOL=!0,cc.each=function(t,e,i){if(t)if(t instanceof Array)for(var n=0,s=t.length;n<s&&!1!==e.call(i,t[n],n);n++);else for(n in t)if(!1===e.call(i,t[n],n))break},cc.extend=function(t){var e=2<=arguments.length?Array.prototype.slice.call(arguments,1):[];return cc.each(e,(function(e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})),t},cc.inherits=function(t,e){function i(){}i.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new i,t.prototype.constructor=t},cc.isFunction=function(t){return"function"==typeof t},cc.isNumber=function(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)},cc.isString=function(t){return"string"==typeof t||"[object String]"===Object.prototype.toString.call(t)},cc.isArray=function(t){return Array.isArray(t)||"object"==typeof t&&"[object Array]"===Object.prototype.toString.call(t)},cc.isUndefined=function(t){return void 0===t},cc.isObject=function(t){return"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)},cc.isCrossOrigin=function(t){if(!t)return cc.log("invalid URL"),!1;var e=t.indexOf("://");return-1!==e&&(-1===(e=t.indexOf("/",e+3))?t:t.substring(0,e))!==location.origin},cc.AsyncPool=function(t,e,i,n,s){var r=this;r._finished=!1,r._srcObj=t,r._limit=e,r._pool=[],r._iterator=i,r._iteratorTarget=s,r._onEnd=n,r._onEndTarget=s,r._results=t instanceof Array?[]:{},r._errors=t instanceof Array?[]:{},cc.each(t,(function(t,e){r._pool.push({index:e,value:t})})),r.size=r._pool.length,r.finishedSize=0,r._workingSize=0,r._limit=r._limit||r.size,r.onIterator=function(t,e){r._iterator=t,r._iteratorTarget=e},r.onEnd=function(t,e){r._onEnd=t,r._onEndTarget=e},r._handleItem=function(){var t=this;if(!(0===t._pool.length||t._workingSize>=t._limit)){var e=t._pool.shift(),i=e.value,n=e.index;t._workingSize++,t._iterator.call(t._iteratorTarget,i,n,function(e,i){t._finished||(e?t._errors[this.index]=e:t._results[this.index]=i,t.finishedSize++,t._workingSize--,t.finishedSize===t.size?t.onEnd(0===t._errors.length?null:t._errors,t._results):t._handleItem())}.bind(e),t)}},r.flow=function(){if(0===this._pool.length)this._onEnd&&this._onEnd.call(this._onEndTarget,null,[]);else for(var t=0;t<this._limit;t++)this._handleItem()},r.onEnd=function(t,e){if(r._finished=!0,r._onEnd){var i=r._onEnd,n=r._onEndTarget;r._onEnd=null,r._onEndTarget=null,i.call(n,t,e)}}},cc.async={series:function(t,e,i){return(t=new cc.AsyncPool(t,1,(function(t,e,n){t.call(i,n)}),e,i)).flow(),t},parallel:function(t,e,i){return(t=new cc.AsyncPool(t,0,(function(t,e,n){t.call(i,n)}),e,i)).flow(),t},waterfall:function(t,e,i){var n=[],s=[null],r=new cc.AsyncPool(t,1,(function(e,r,o){n.push((function(e){n=Array.prototype.slice.call(arguments,1),t.length-1===r&&(s=s.concat(n)),o.apply(null,arguments)})),e.apply(i,n)}),(function(t){if(e){if(t)return e.call(i,t);e.apply(i,s)}}));return r.flow(),r},map:function(t,e,i,n){var s=e;return"object"==typeof e&&(i=e.cb,n=e.iteratorTarget,s=e.iterator),(t=new cc.AsyncPool(t,0,s,i,n)).flow(),t},mapLimit:function(t,e,i,n,s){return(t=new cc.AsyncPool(t,e,i,n,s)).flow(),t}},cc.path={normalizeRE:/[^\.\/]+\/\.\.\//,join:function(){for(var t=arguments.length,e="",i=0;i<t;i++)e=(e+(""===e?"":"/")+arguments[i]).replace(/(\/|\\\\)$/,"");return e},extname:function(t){return(t=/(\.[^\.\/\?\\]*)(\?.*)?$/.exec(t))?t[1]:null},mainFileName:function(t){if(t){var e=t.lastIndexOf(".");if(-1!==e)return t.substring(0,e)}return t},basename:function(t,e){var i=t.indexOf("?");return 0<i&&(t=t.substring(0,i)),(i=/(\/|\\\\)([^(\/|\\\\)]+)$/g.exec(t.replace(/(\/|\\\\)$/,"")))?(i=i[2],e&&t.substring(t.length-e.length).toLowerCase()===e.toLowerCase()?i.substring(0,i.length-e.length):i):null},dirname:function(t){return t.replace(/((.*)(\/|\\|\\\\))?(.*?\..*$)?/,"$2")},changeExtname:function(t,e){e=e||"";var i=t.indexOf("?"),n="";return 0<i&&(n=t.substring(i),t=t.substring(0,i)),0>(i=t.lastIndexOf("."))?t+e+n:t.substring(0,i)+e+n},changeBasename:function(t,e,i){if(0===e.indexOf("."))return this.changeExtname(t,e);var n=t.indexOf("?"),s="";return i=i?this.extname(t):"",0<n&&(s=t.substring(n),t=t.substring(0,n)),n=t.lastIndexOf("/"),t.substring(0,0>=n?0:n+1)+e+i+s},_normalize:function(t){var e=t=String(t);do{e=t,t=t.replace(this.normalizeRE,"")}while(e.length!==t.length);return t}},base64ArrayBuffer=function(t){for(var e,i="",n=(s=(t=new Uint8Array(t)).byteLength)%3,s=s-n,r=0;r<s;r+=3)i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(16515072&(e=t[r]<<16|t[r+1]<<8|t[r+2]))>>18]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(258048&e)>>12]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(4032&e)>>6]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e&=63];return 1==n?i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(252&(e=t[s]))>>2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&e)<<4]+"==":2==n&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(64512&(e=t[s]<<8|t[s+1]))>>10]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(1008&e)>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&e)<<2]+"="),i};var imagePool={_pool:Array(10),_MAX:10,_smallImg:"data:image/gif;base64,R0lGODlhAQABAAAAACwAAAAAAQABAAA=",count:0,get:function(){if(0<this.count){this.count--;var t=this._pool[this.count];return this._pool[this.count]=null,t}return new Image},put:function(t){var e=this._pool;t instanceof HTMLImageElement&&this.count<this._MAX&&(t.src=this._smallImg,e[this.count]=t,this.count++)}};if(cc.loader=function(){var t={},e={},i={},n={},s={},r=/^(?:https?|ftp):\/\/\S*$/i;return{resPath:"",audioPath:"",cache:{},getXMLHttpRequest:function(){var t=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP");return t.timeout=1e4,void 0===t.ontimeout&&(t._timeoutId=-1),t},_getArgs4Js:function(t){var e=t[0],i=t[1],n=t[2],s=["",null,null];if(1===t.length)s[1]=e instanceof Array?e:[e];else if(2===t.length)"function"==typeof i?(s[1]=e instanceof Array?e:[e],s[2]=i):(s[0]=e||"",s[1]=i instanceof Array?i:[i]);else{if(3!==t.length)throw Error("arguments error to load js!");s[0]=e||"",s[1]=i instanceof Array?i:[i],s[2]=n}return s},isLoading:function(t){return void 0!==s[t]},loadJs:function(e,i,n){var s=this,r=(a=s._getArgs4Js(arguments))[0],o=a[1],a=a[2];-1<navigator.userAgent.indexOf("Trident/5")?s._loadJs4Dependency(r,o,0,a):cc.async.map(o,(function(e,i,n){if(e=cc.path.join(r,e),t[e])return n(null);s._createScript(e,!1,n)}),a)},loadJsWithImg:function(t,e,i){var n=this._loadJsImg(),s=this._getArgs4Js(arguments);this.loadJs(s[0],s[1],(function(t){if(t)throw Error(t);n.parentNode.removeChild(n),s[2]&&s[2]()}))},_createScript:function(e,i,n){var s=document,r=document.createElement("script");r.async=i,t[e]=!0,cc.game.config.noCache&&"string"==typeof e?this._noCacheRex.test(e)?r.src=e+"&v="+bk.fileVer:r.src=e+"?v="+bk.fileVer:r.src=e,r.addEventListener("load",(function(){r.parentNode.removeChild(r),this.removeEventListener("load",arguments.callee,!1),n()}),!1),r.addEventListener("error",(function(){r.parentNode.removeChild(r),n("Load "+e+" failed!")}),!1),s.body.appendChild(r)},_loadJs4Dependency:function(t,e,i,n){if(i>=e.length)n&&n();else{var s=this;s._createScript(cc.path.join(t,e[i]),!1,(function(r){if(r)return n(r);s._loadJs4Dependency(t,e,i+1,n)}))}},_loadJsImg:function(){var t=document,e=t.getElementById("cocos2d_loadJsImg");if(!e){e=document.createElement("img"),cc._loadingImage&&(e.src=cc._loadingImage),(t=t.getElementById(cc.game.config.id)).style.backgroundColor="transparent",t.parentNode.appendChild(e);var i=getComputedStyle?getComputedStyle(t):t.currentStyle;i||(i={width:t.width,height:t.height}),e.style.left=t.offsetLeft+(parseFloat(i.width)-e.width)/2+"px",e.style.top=t.offsetTop+(parseFloat(i.height)-e.height)/2+"px",e.style.position="absolute"}return e},loadTxt:function(t,e){if(cc._isNodeJs)require("fs").readFile(t,(function(t,i){t?e(t):e(null,i.toString())}));else{var i=this.getXMLHttpRequest(),n="load "+t+" failed!";if(i.open("GET",t,!0),/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent))i.setRequestHeader("Accept-Charset","utf-8"),i.onreadystatechange=function(){4===i.readyState&&(200===i.status||0===i.status?e(null,i.responseText):e({status:i.status,errorMessage:n},null))};else{i.overrideMimeType&&i.overrideMimeType("text/plain; charset=utf-8");var s=function(){i.removeEventListener("load",s),i.removeEventListener("error",r),0<=i._timeoutId?clearTimeout(i._timeoutId):i.removeEventListener("timeout",o),4===i.readyState&&(200===i.status||0===i.status?e(null,i.responseText):e({status:i.status,errorMessage:n},null))},r=function(){i.removeEventListener("load",s),i.removeEventListener("error",r),0<=i._timeoutId?clearTimeout(i._timeoutId):i.removeEventListener("timeout",o),e({status:i.status,errorMessage:n},null)},o=function(){i.removeEventListener("load",s),i.removeEventListener("error",r),0<=i._timeoutId?clearTimeout(i._timeoutId):i.removeEventListener("timeout",o),e({status:i.status,errorMessage:"Request timeout: "+n},null)};i.addEventListener("load",s),i.addEventListener("error",r),void 0===i.ontimeout?i._timeoutId=setTimeout((function(){o()}),i.timeout):i.addEventListener("timeout",o)}i.send(null)}},loadCsb:function(t,e){var i=cc.loader.getXMLHttpRequest(),n="load "+t+" failed!";i.open("GET",t,!0),i.responseType="arraybuffer";var s=function(){i.removeEventListener("load",s),i.removeEventListener("error",r),0<=i._timeoutId?clearTimeout(i._timeoutId):i.removeEventListener("timeout",o);var t=i.response;t&&(window.msg=t),4===i.readyState&&(200===i.status||0===i.status?e(null,i.response):e({status:i.status,errorMessage:n},null))},r=function(){i.removeEventListener("load",s),i.removeEventListener("error",r),0<=i._timeoutId?clearTimeout(i._timeoutId):i.removeEventListener("timeout",o),e({status:i.status,errorMessage:n},null)},o=function(){i.removeEventListener("load",s),i.removeEventListener("error",r),0<=i._timeoutId?clearTimeout(i._timeoutId):i.removeEventListener("timeout",o),e({status:i.status,errorMessage:"Request timeout: "+n},null)};i.addEventListener("load",s),i.addEventListener("error",r),void 0===i.ontimeout?i._timeoutId=setTimeout((function(){o()}),i.timeout):i.addEventListener("timeout",o),i.send(null)},loadJson:function(t,e){this.loadTxt(t,(function(i,n){if(i)e(i);else{try{var s=JSON.parse(n)}catch(e){throw Error("parse json ["+t+"] failed : "+e)}e(null,s)}}))},_checkIsImageURL:function(t){return null!=/(\.png)|(\.jpg)|(\.bmp)|(\.jpeg)|(\.gif)/.exec(t)},loadImg:function(t,e,i,n){var r={isCrossOrigin:!0};if(void 0!==i?r.isCrossOrigin=void 0===e.isCrossOrigin?r.isCrossOrigin:e.isCrossOrigin:void 0!==e&&(i=e),e=this.getRes(t))return i&&i(null,e),null;if(e=s[t])return e.callbacks.push(i),e.img;(n=n||imagePool.get()).crossOrigin=r.isCrossOrigin&&"file://"!==location.origin?"Anonymous":null;var o=function(){this.removeEventListener("load",o,!1),this.removeEventListener("error",c,!1);var e=s[t];if(e){for(var i=e.callbacks,r=0;r<i.length;++r){var a=i[r];a&&a(null,n)}e.img=null,delete s[t]}window.ENABLE_IMAEG_POOL&&cc._renderType===cc.game.RENDER_TYPE_WEBGL&&imagePool.put(n)},a=this,c=function(){if(this.removeEventListener("load",o,!1),this.removeEventListener("error",c,!1),"https:"!==window.location.protocol&&n.crossOrigin&&"anonymous"===n.crossOrigin.toLowerCase())r.isCrossOrigin=!1,a.release(t),cc.loader.loadImg(t,r,i,n);else{var e=s[t];if(e){for(var h=e.callbacks,l=0;l<h.length;++l){var u=h[l];u&&u("load image failed "+t)}e.img=null,delete s[t]}cc._renderType===cc.game.RENDER_TYPE_WEBGL&&imagePool.put(n)}};return s[t]={img:n,callbacks:i?[i]:[]},n.addEventListener("load",o),n.addEventListener("error",c),n.src=t,n},_loadResIterator:function(t,i,n){var s=this,o=null,a=t.type;return a?(a="."+a.toLowerCase(),o=t.src?t.src:t.name+a):(o=t,a=cc.path.extname(o)),(i=s.getRes(o))?n(null,i):(i=null,a&&(i=e[a.toLowerCase()]),i?(a=o,r.test(o)||(a=i.getBasePath?i.getBasePath():s.resPath,a=s.getUrl(a,o)),cc.game.config.noCache&&"string"==typeof a&&(a=s._noCacheRex.test(a)?a+"&v="+bk.fileVer:a+"?v="+bk.fileVer),void i.load(a,o,t,(function(t,e){t?(cc.log(t),s.cache[o]=null,delete s.cache[o],n({status:520,errorMessage:t},null)):(s.cache[o]=e,n(null,e))}))):(cc.error("loader for ["+a+"] not exists!"),n()))},_noCacheRex:/\?/,getUrl:function(t,n){var s=cc.path;if(void 0!==t&&void 0===n){n=t;var r=(r=s.extname(n))?r.toLowerCase():"";t=(r=e[r])&&r.getBasePath?r.getBasePath():this.resPath}if((n=cc.path.join(t||"",n)).match(/[\/(\\\\)]lang[\/(\\\\)]/i)){if(i[n])return i[n];s=s.extname(n)||"",n=i[n]=n.substring(0,n.length-s.length)+"_"+cc.sys.language+s}return n},load:function(t,e,i){var n=this,s=arguments.length;if(0===s)throw Error("arguments error!");return 3===s?"function"==typeof e&&(e="function"==typeof i?{trigger:e,cb:i}:{cb:e,cbTarget:i}):2===s?"function"==typeof e&&(e={cb:e}):1===s&&(e={}),t instanceof Array||(t=[t]),s=new cc.AsyncPool(t,cc.CONCURRENCY_HTTP_REQUEST_COUNT,(function(t,i,s,r){n._loadResIterator(t,i,(function(t){var i=Array.prototype.slice.call(arguments,1);e.trigger&&e.trigger.call(e.triggerTarget,i[0],r.size,r.finishedSize),s(t,i[0])}))}),e.cb,e.cbTarget),s.flow(),s},_handleAliases:function(t,e){var i,s=[];for(i in t){var r=t[i];n[i]=r,s.push(r)}this.load(s,e)},loadAliases:function(t,e){var i=this,n=i.getRes(t);n?i._handleAliases(n.filenames,e):i.load(t,(function(t,n){i._handleAliases(n[0].filenames,e)}))},register:function(t,i){if(t&&i){if("string"==typeof t)return e[t.trim().toLowerCase()]=i;for(var n=0,s=t.length;n<s;n++)e["."+t[n].trim().toLowerCase()]=i}},getRes:function(t){return this.cache[t]||this.cache[n[t]]},_getAliase:function(t){return n[t]},release:function(t){var e=this.cache,i=s[t];i&&(i.img=null,delete s[t]),delete e[t],delete e[n[t]],delete n[t]},releaseAll:function(){var t,e=this.cache;for(t in e)delete e[t];for(t in n)delete n[t]}}}(),cc.formatStr=function(){var t=arguments,e=t.length;if(1>e)return"";var i=t[0],n=!0;"object"==typeof i&&(n=!1);for(var s=1;s<e;++s){var r=t[s];if(n)for(;;){if("number"==typeof r&&i.match(/(%d)|(%s)/)){i=i.replace(/(%d)|(%s)/,r);break}i=i.match(/%s/)?i.replace(/%s/,r):i+"    "+r;break}else i+="    "+r}return i},function(){function t(e,i,n){if(o[i])return null;n=n||"";var s=[],r=e[i];if(!r)throw Error("can not find module ["+i+"]");i=cc.path;for(var a=0,c=r.length;a<c;a++){var h=r[a];if(!o[h]){var l=i.extname(h);l?".js"===l.toLowerCase()&&s.push(i.join(n,h)):(l=t(e,h,n))&&(s=s.concat(l)),o[h]=1}}return s}function e(t){cc._initDebugSetting&&cc._initDebugSetting(t[cc.game.CONFIG_KEY.debugMode]),cc._engineLoaded=!0,c&&c()}function i(i){var n=i[cc.game.CONFIG_KEY.engineDir],s=cc.loader;if(cc.Class)e(i);else{var r=cc.path.join(n,"moduleConfig.json");s.loadJson(r,(function(s,r){if(s)throw Error(s);var o=i.modules||[],a=r.module,c=[];cc.sys.capabilities.opengl&&0>o.indexOf("base4webgl")?o.splice(0,0,"base4webgl"):0>o.indexOf("core")&&o.splice(0,0,"core");for(var h=0,l=o.length;h<l;h++){var u=t(a,o[h],n);u&&(c=c.concat(u))}cc.loader.loadJsWithImg(c,(function(t){if(t)throw t;e(i)}))}))}}function n(){this.removeEventListener("load",n,!1),i(cc.game.config)}var s=document.createElement("canvas"),r=document.createElement("canvas");cc.create3DContext=function(t,e){for(var i=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=null,s=0;s<i.length;++s){try{n=t.getContext(i[s],e)}catch(t){}if(n)break}return n},function(){cc.sys={};var t=cc.sys;t.LANGUAGE_ENGLISH="en",t.LANGUAGE_CHINESE="zh",t.LANGUAGE_FRENCH="fr",t.LANGUAGE_ITALIAN="it",t.LANGUAGE_GERMAN="de",t.LANGUAGE_SPANISH="es",t.LANGUAGE_DUTCH="du",t.LANGUAGE_RUSSIAN="ru",t.LANGUAGE_KOREAN="ko",t.LANGUAGE_JAPANESE="ja",t.LANGUAGE_HUNGARIAN="hu",t.LANGUAGE_PORTUGUESE="pt",t.LANGUAGE_ARABIC="ar",t.LANGUAGE_NORWEGIAN="no",t.LANGUAGE_POLISH="pl",t.LANGUAGE_UNKNOWN="unkonwn",t.OS_IOS="iOS",t.OS_ANDROID="Android",t.OS_WINDOWS="Windows",t.OS_MARMALADE="Marmalade",t.OS_LINUX="Linux",t.OS_BADA="Bada",t.OS_BLACKBERRY="Blackberry",t.OS_OSX="OS X",t.OS_WP8="WP8",t.OS_WINRT="WINRT",t.OS_UNKNOWN="Unknown",t.UNKNOWN=-1,t.WIN32=0,t.LINUX=1,t.MACOS=2,t.ANDROID=3,t.IPHONE=4,t.IPAD=5,t.BLACKBERRY=6,t.NACL=7,t.EMSCRIPTEN=8,t.TIZEN=9,t.WINRT=10,t.WP8=11,t.MOBILE_BROWSER=100,t.DESKTOP_BROWSER=101,t.BROWSER_TYPE_WECHAT="wechat",t.BROWSER_TYPE_ANDROID="androidbrowser",t.BROWSER_TYPE_IE="ie",t.BROWSER_TYPE_QQ_APP="qq",t.BROWSER_TYPE_QQ="qqbrowser",t.BROWSER_TYPE_MOBILE_QQ="mqqbrowser",t.BROWSER_TYPE_UC="ucbrowser",t.BROWSER_TYPE_360="360browser",t.BROWSER_TYPE_BAIDU_APP="baiduboxapp",t.BROWSER_TYPE_BAIDU="baidubrowser",t.BROWSER_TYPE_MAXTHON="maxthon",t.BROWSER_TYPE_OPERA="opera",t.BROWSER_TYPE_OUPENG="oupeng",t.BROWSER_TYPE_MIUI="miuibrowser",t.BROWSER_TYPE_FIREFOX="firefox",t.BROWSER_TYPE_SAFARI="safari",t.BROWSER_TYPE_CHROME="chrome",t.BROWSER_TYPE_LIEBAO="liebao",t.BROWSER_TYPE_QZONE="qzone",t.BROWSER_TYPE_SOUGOU="sogou",t.BROWSER_TYPE_UNKNOWN="unknown",t.isNative=!1;var e=window,i=e.navigator,n=document,o=n.documentElement,a=i.userAgent.toLowerCase();t.isMobile=/mobile|android|iphone|ipad/.test(a),t.platform=t.isMobile?t.MOBILE_BROWSER:t.DESKTOP_BROWSER;var c=(c=(c=i.language)||i.browserLanguage)?c.split("-")[0]:t.LANGUAGE_ENGLISH;t.language=c;var h=!1,l=(c=!1,""),u=0,d=/android (\d+(?:\.\d+)+)/i.exec(a)||/android (\d+(?:\.\d+)+)/i.exec(i.platform);d&&(h=!0,l=d[1]||"",u=parseInt(l)||0),(d=/(iPad|iPhone|iPod).*OS ((\d+_?){2,3})/i.exec(a))?(c=!0,l=d[2]||"",u=parseInt(l)||0):/(iPhone|iPad|iPod)/.exec(i.platform)&&(c=!0,l="",u=0),d=t.OS_UNKNOWN,-1!==i.appVersion.indexOf("Win")?d=t.OS_WINDOWS:c?d=t.OS_IOS:-1!==i.appVersion.indexOf("Mac")?d=t.OS_OSX:-1!==i.appVersion.indexOf("X11")&&-1===i.appVersion.indexOf("Linux")?d=t.OS_UNIX:h?d=t.OS_ANDROID:-1!==i.appVersion.indexOf("Linux")&&(d=t.OS_LINUX),t.os=d,t.osVersion=l,t.osMainVersion=u,t.browserType=t.BROWSER_TYPE_UNKNOWN,function(){var e=/qqbrowser|qq|chrome|safari|firefox|opr|oupeng|opera/i,i=/micromessenger|mqqbrowser|sogou|qzone|liebao|ucbrowser|360 aphone|360browser|baiduboxapp|baidubrowser|maxthon|mxbrowser|trident|miuibrowser/i.exec(a);i||(i=e.exec(a)),"micromessenger"===(e=i?i[0]:t.BROWSER_TYPE_UNKNOWN)?e=t.BROWSER_TYPE_WECHAT:"safari"===e&&h?e=t.BROWSER_TYPE_ANDROID:"trident"===e?e=t.BROWSER_TYPE_IE:"360 aphone"===e?e=t.BROWSER_TYPE_360:"mxbrowser"===e?e=t.BROWSER_TYPE_MAXTHON:"opr"===e&&(e=t.BROWSER_TYPE_OPERA),t.browserType=e}(),t.browserVersion="",function(){var e=a.match(/(mqqbrowser|micromessenger|sogou|qzone|liebao|maxthon|mxbrowser|baidu)(mobile)?(browser)?\/?([\d.]+)/i);e||(e=a.match(/(msie |rv:|firefox|chrome|ucbrowser|qq|oupeng|opera|opr|safari|miui)(mobile)?(browser)?\/?([\d.]+)/i)),t.browserVersion=e?e[4]:""}(),c=window.devicePixelRatio||1,t.windowPixelResolution={width:c*(window.innerWidth||document.documentElement.clientWidth),height:c*(window.innerHeight||document.documentElement.clientHeight)},t._checkWebGLRenderMode=function(){if(cc._renderType!==cc.game.RENDER_TYPE_WEBGL)throw Error("This feature supports WebGL render mode only.")},t._supportCanvasNewBlendModes=function(){var t=s;t.width=1,t.height=1,(t=t.getContext("2d")).fillStyle="#000",t.fillRect(0,0,1,1),t.globalCompositeOperation="multiply";var e=r;e.width=1,e.height=1;var i=e.getContext("2d");return i.fillStyle="#fff",i.fillRect(0,0,1,1),t.drawImage(e,0,0,1,1),0===t.getImageData(0,0,1,1).data[0]}(),cc.sys.isMobile&&((c=document.createElement("style")).type="text/css",document.body.appendChild(c),c.textContent="body,canvas,div{ -moz-user-select: none;-webkit-user-select: none;-ms-user-select: none;-khtml-user-select: none;-webkit-tap-highlight-color:rgba(0,0,0,0);}");try{var _=t.localStorage=e.localStorage;_.setItem("storage",""),_.removeItem("storage"),_=null}catch(e){_=function(){cc.warn("Warning: localStorage isn't enabled. Please confirm browser cookie or privacy option")},t.localStorage={getItem:_,setItem:_,removeItem:_,clear:_}}if(_=!!s.getContext("2d"),c=!1,e.WebGLRenderingContext){l=document.createElement("CANVAS");try{if(cc.create3DContext(l)&&(c=!0),c&&t.os===t.OS_IOS&&9===t.osMainVersion&&(window.indexedDB||(c=!1)),c&&t.os===t.OS_ANDROID){var g=parseFloat(t.browserVersion);switch(t.browserType){case t.BROWSER_TYPE_MOBILE_QQ:case t.BROWSER_TYPE_BAIDU:case t.BROWSER_TYPE_BAIDU_APP:c=6.2<=g;break;case t.BROWSER_TYPE_CHROME:c=30<=g;break;case t.BROWSER_TYPE_ANDROID:t.osMainVersion&&5<=t.osMainVersion&&(c=!0);break;case t.BROWSER_TYPE_UNKNOWN:case t.BROWSER_TYPE_360:case t.BROWSER_TYPE_MIUI:case t.BROWSER_TYPE_UC:c=!1}}}catch(t){}l=null}g=t.capabilities={canvas:_,opengl:c},(void 0!==o.ontouchstart||void 0!==n.ontouchstart||i.msPointerEnabled)&&(g.touches=!0),void 0!==o.onmouseup&&(g.mouse=!0),void 0!==o.onkeyup&&(g.keyboard=!0),(e.DeviceMotionEvent||e.DeviceOrientationEvent)&&(g.accelerometer=!0),t.garbageCollect=function(){},t.dumpRoot=function(){},t.restartVM=function(){},t.cleanScript=function(t){},t.isObjectValid=function(t){return!!t},t.dump=function(){var t;t="isMobile : "+this.isMobile+"\r\n",t+="language : "+this.language+"\r\n",t+="browserType : "+this.browserType+"\r\n",t+="browserVersion : "+this.browserVersion+"\r\n",t+="capabilities : "+JSON.stringify(this.capabilities)+"\r\n",t+="os : "+this.os+"\r\n",t+="osVersion : "+this.osVersion+"\r\n",t+="platform : "+this.platform+"\r\n",t+="Using "+(cc._renderType===cc.game.RENDER_TYPE_WEBGL?"WEBGL":"CANVAS")+" renderer.\r\n",cc.log(t)},t.openURL=function(t){window.open(t)},t.now=function(){return Date.now?Date.now():+new Date}}(),r=s=null,cc.log=cc.warn=cc.error=cc.assert=function(){};var o={},a=!1,c=null;cc._engineLoaded=!1,cc.initEngine=function(t,e){if(a){var s=c;c=function(){s&&s(),e&&e()}}else c=e,!cc.game.config&&t?cc.game.config=t:cc.game.config||cc.game._loadConfig(),function(t){var e=cc.game.CONFIG_KEY,i=parseInt(t[e.renderMode])||0;(isNaN(i)||2<i||0>i)&&(t[e.renderMode]=0),cc._renderType=cc.game.RENDER_TYPE_CANVAS,cc._supportRender=!1,0===i?cc.sys.capabilities.opengl?(cc._renderType=cc.game.RENDER_TYPE_WEBGL,cc._supportRender=!0):cc.sys.capabilities.canvas&&(cc._renderType=cc.game.RENDER_TYPE_CANVAS,cc._supportRender=!0):1===i&&cc.sys.capabilities.canvas?(cc._renderType=cc.game.RENDER_TYPE_CANVAS,cc._supportRender=!0):2===i&&cc.sys.capabilities.opengl&&(cc._renderType=cc.game.RENDER_TYPE_WEBGL,cc._supportRender=!0)}(t=cc.game.config),document.body?i(t):cc._addEventListener(window,"load",n,!1),a=!0}}(),cc.game={DEBUG_MODE_NONE:0,DEBUG_MODE_INFO:1,DEBUG_MODE_WARN:2,DEBUG_MODE_ERROR:3,DEBUG_MODE_INFO_FOR_WEB_PAGE:4,DEBUG_MODE_WARN_FOR_WEB_PAGE:5,DEBUG_MODE_ERROR_FOR_WEB_PAGE:6,EVENT_HIDE:"game_on_hide",EVENT_SHOW:"game_on_show",EVENT_RESIZE:"game_on_resize",EVENT_RENDERER_INITED:"renderer_inited",RENDER_TYPE_CANVAS:0,RENDER_TYPE_WEBGL:1,RENDER_TYPE_OPENGL:2,_eventHide:null,_eventShow:null,CONFIG_KEY:{width:"width",height:"height",engineDir:"engineDir",modules:"modules",debugMode:"debugMode",exposeClassName:"exposeClassName",showFPS:"showFPS",frameRate:"frameRate",id:"id",renderMode:"renderMode",jsList:"jsList"},_paused:!0,_configLoaded:!1,_prepareCalled:!1,_prepared:!1,_rendererInitialized:!1,_renderContext:null,_intervalId:null,_lastTime:null,_frameTime:null,frame:null,container:null,canvas:null,config:null,onStart:null,onStop:null,setFrameRate:function(t){this.config[this.CONFIG_KEY.frameRate]=t,this._intervalId&&window.cancelAnimationFrame(this._intervalId),this._intervalId=0,this._paused=!0,this._setAnimFrame(),this._runMainLoop()},step:function(){cc.director.mainLoop()},pause:function(){this._paused||(this._paused=!0,cc.audioEngine&&cc.audioEngine._pausePlaying(),this._intervalId&&window.cancelAnimationFrame(this._intervalId),this._intervalId=0)},resume:function(){this._paused&&(this._paused=!1,cc.audioEngine&&cc.audioEngine._resumePlaying(),this._runMainLoop())},isPaused:function(){return this._paused},restart:function(){cc.director.popToSceneStackLevel(0),cc.audioEngine&&cc.audioEngine.end(),cc.game.onStart()},end:function(){close()},prepare:function(t){var e=this,i=e.config,n=e.CONFIG_KEY;this._configLoaded?this._prepared?t&&t():this._prepareCalled||(cc._engineLoaded?(this._prepareCalled=!0,this._initRenderer(i[n.width],i[n.height]),cc.view=cc.EGLView._getInstance(),cc.director=cc.Director._getInstance(),cc.director.setOpenGLView&&cc.director.setOpenGLView(cc.view),cc.winSize=cc.director.getWinSize(),this._initEvents(),this._setAnimFrame(),this._runMainLoop(),(i=i[n.jsList])?cc.loader.loadJsWithImg(i,(function(i){if(i)throw Error(i);e._prepared=!0,t&&t()})):t&&t()):cc.initEngine(this.config,(function(){e.prepare(t)}))):this._loadConfig((function(){e.prepare(t)}))},run:function(t,e){"function"==typeof t?cc.game.onStart=t:(t&&("string"==typeof t?(cc.game.config||this._loadConfig(),cc.game.config[cc.game.CONFIG_KEY.id]=t):cc.game.config=t),"function"==typeof e&&(cc.game.onStart=e)),this.prepare(cc.game.onStart&&cc.game.onStart.bind(cc.game))},_setAnimFrame:function(){this._lastTime=new Date;var t=cc.game.config[cc.game.CONFIG_KEY.frameRate];this._frameTime=1e3/t,60!==t&&30!==t?(window.requestAnimFrame=this._stTime,window.cancelAnimationFrame=this._ctTime):(window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||this._stTime,window.cancelAnimationFrame=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||this._ctTime)},_stTime:function(t){var e=(new Date).getTime(),i=Math.max(0,cc.game._frameTime-(e-cc.game._lastTime)),n=window.setTimeout((function(){t()}),i);return cc.game._lastTime=e+i,n},_ctTime:function(t){window.clearTimeout(t)},_runMainLoop:function(){var t,e=this,i=e.config,n=e.CONFIG_KEY,s=cc.director,r=!0,o=i[n.frameRate];s.setDisplayStats(i[n.showFPS]),t=function(){e._paused||(30===o&&(r=!r)||s.mainLoop(),e._intervalId=window.requestAnimFrame(t))},e._intervalId=window.requestAnimFrame(t),e._paused=!1},_loadConfig:function(t){if(s=this.config||document.ccConfig)this._initConfig(s),t&&t();else{for(var e=document.getElementsByTagName("script"),i=0;i<e.length&&(""!==(s=e[i].getAttribute("cocos"))&&!s);i++);var n=this,s=function(e,i){var s=JSON.parse(i);n._initConfig(s),t&&t()};i<e.length?((e=e[i].src)&&(e=/(.*)\//.exec(e)[0],cc.loader.resPath=e,e=cc.path.join(e,"project.json")),cc.loader.loadTxt(e,s)):cc.loader.loadTxt("project.json",s)}},_initConfig:function(t){var e=this.CONFIG_KEY,i=t[e.modules];t[e.showFPS]=void 0===t[e.showFPS]||t[e.showFPS],t[e.engineDir]=t[e.engineDir]||"frameworks/cocos2d-html5",null==t[e.debugMode]&&(t[e.debugMode]=0),t[e.exposeClassName]=!!t[e.exposeClassName],t[e.frameRate]=t[e.frameRate]||60,null==t[e.renderMode]&&(t[e.renderMode]=0),null==t[e.registerSystemEvent]&&(t[e.registerSystemEvent]=!0),i&&0>i.indexOf("core")&&i.splice(0,0,"core"),i&&(t[e.modules]=i),this.config=t,this._configLoaded=!0},_initRenderer:function(t,e){if(!this._rendererInitialized){if(!cc._supportRender)throw Error("The renderer doesn't support the renderMode "+this.config[this.CONFIG_KEY.renderMode]);var i,n,s=this.config[cc.game.CONFIG_KEY.id],r=window;"CANVAS"===(s=cc.$(s)||cc.$("#"+s)).tagName?(t=t||s.width,e=e||s.height,this.canvas=cc._canvas=i=s,this.container=cc.container=n=document.createElement("DIV"),i.parentNode&&i.parentNode.insertBefore(n,i)):("DIV"!==s.tagName&&cc.log("Warning: target element is not a DIV or CANVAS"),t=t||s.clientWidth,e=e||s.clientHeight,this.canvas=cc._canvas=i=cc.$(document.createElement("CANVAS")),this.container=cc.container=n=document.createElement("DIV"),s.appendChild(n)),n.setAttribute("id","Cocos2dGameContainer"),n.appendChild(i),this.frame=n.parentNode===document.body?document.documentElement:n.parentNode,i.addClass("gameCanvas"),i.setAttribute("width",t||480),i.setAttribute("height",e||320),i.setAttribute("tabindex",99),cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(this._renderContext=cc._renderContext=cc.webglContext=cc.create3DContext(i,{stencil:!0,alpha:!1,preserveDrawingBuffer:!0})),this._renderContext?(cc.renderer=cc.rendererWebGL,r.gl=this._renderContext,cc.renderer.init(),cc._drawingUtil=new cc.DrawingPrimitiveWebGL(this._renderContext),cc.textureCache._initializingRenderer(),cc.glExt={},cc.glExt.instanced_arrays=r.gl.getExtension("ANGLE_instanced_arrays"),cc.glExt.element_uint=r.gl.getExtension("OES_element_index_uint")):(cc._renderType=cc.game.RENDER_TYPE_CANVAS,cc.renderer=cc.rendererCanvas,this._renderContext=cc._renderContext=new cc.CanvasContextWrapper(i.getContext("2d")),cc._drawingUtil=cc.DrawingPrimitiveCanvas?new cc.DrawingPrimitiveCanvas(this._renderContext):null),cc._gameDiv=n,cc.game.canvas.oncontextmenu=function(){if(!cc._isContextMenuEnable)return!1},this.dispatchEvent(this.EVENT_RENDERER_INITED,!0),this._rendererInitialized=!0}},_initEvents:function(){var t,e=window;this._eventHide=this._eventHide||new cc.EventCustom(this.EVENT_HIDE),this._eventHide.setUserData(this),this._eventShow=this._eventShow||new cc.EventCustom(this.EVENT_SHOW),this._eventShow.setUserData(this),this.config[this.CONFIG_KEY.registerSystemEvent]&&cc.inputManager.registerSystemEvent(this.canvas),cc.isUndefined(document.hidden)?cc.isUndefined(document.mozHidden)?cc.isUndefined(document.msHidden)?cc.isUndefined(document.webkitHidden)||(t="webkitHidden"):t="msHidden":t="mozHidden":t="hidden";var i=["visibilitychange","mozvisibilitychange","msvisibilitychange","webkitvisibilitychange","qbrowserVisibilityChange"],n=function(){cc.eventManager&&cc.game._eventHide&&cc.eventManager.dispatchEvent(cc.game._eventHide)},s=function(){cc.eventManager&&cc.game._eventShow&&cc.eventManager.dispatchEvent(cc.game._eventShow)};if(t)for(var r=0;r<i.length;r++)document.addEventListener(i[r],(function(e){var i=document[t];(i=i||e.hidden)?n():s()}),!1);else e.addEventListener("blur",n,!1),e.addEventListener("focus",s,!1);-1<navigator.userAgent.indexOf("MicroMessenger")&&(e.onfocus=function(){s()}),"onpageshow"in window&&"onpagehide"in window&&(e.addEventListener("pagehide",n,!1),e.addEventListener("pageshow",s,!1)),cc.eventManager.addCustomListener(cc.game.EVENT_HIDE,(function(){cc.game.pause()})),cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,(function(){cc.game.resume()}))}},Function.prototype.bind=Function.prototype.bind||function(t){if(!cc.isFunction(this))throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},s=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,s.prototype=new n,s},cc.EventHelper=function(){},cc.EventHelper.prototype={constructor:cc.EventHelper,apply:function(t){t.addEventListener=cc.EventHelper.prototype.addEventListener,t.hasEventListener=cc.EventHelper.prototype.hasEventListener,t.removeEventListener=cc.EventHelper.prototype.removeEventListener,t.dispatchEvent=cc.EventHelper.prototype.dispatchEvent},addEventListener:function(t,e,i){if("load"===t&&this._textureLoaded)setTimeout((function(){e.call(i)}),0);else{void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),this.hasEventListener(t,e,i)||n[t].push({callback:e,eventTarget:i})}},hasEventListener:function(t,e,i){if(void 0===this._listeners)return!1;var n=this._listeners;if(void 0!==n[t]){t=0;for(var s=n.length;t<s;t++){var r=n[t];if(r.callback===e&&r.eventTarget===i)return!0}}return!1},removeEventListener:function(t,e,i){if(void 0!==this._listeners&&void 0!==(t=this._listeners[t]))for(var n=0;n<t.length;){var s=t[n];s.eventTarget===i&&s.callback===e?t.splice(n,1):n++}},removeEventTarget:function(t,e,i){if(void 0!==this._listeners&&void 0!==(t=this._listeners[t]))for(e=0;e<t.length;)t[e].eventTarget===i?t.splice(e,1):e++},dispatchEvent:function(t,e){if(void 0!==this._listeners){null==e&&(e=!0);var i=this._listeners[t];if(void 0!==i){for(var n=[],s=i.length,r=0;r<s;r++)n[r]=i[r];for(r=0;r<s;r++)n[r].callback.call(n[r].eventTarget,this);e&&(i.length=0)}}}},cc.EventHelper.prototype.apply(cc.game),cc._LogInfos={ActionManager_addAction:"cc.ActionManager.addAction(): action must be non-null",ActionManager_removeAction:"cocos2d: removeAction: Target not found",ActionManager_removeActionByTag:"cc.ActionManager.removeActionByTag(): an invalid tag",ActionManager_removeActionByTag_2:"cc.ActionManager.removeActionByTag(): target must be non-null",ActionManager_getActionByTag:"cc.ActionManager.getActionByTag(): an invalid tag",ActionManager_getActionByTag_2:"cocos2d : getActionByTag(tag = %s): Action not found",configuration_dumpInfo:"cocos2d: **** WARNING **** CC_ENABLE_PROFILERS is defined. Disable it when you finish profiling (from ccConfig.js)",configuration_loadConfigFile:"Expected 'data' dict, but not found. Config file: %s",configuration_loadConfigFile_2:"Please load the resource first : %s",Director_resume:"cocos2d: Director: Error in gettimeofday",Director_setProjection:"cocos2d: Director: unrecognized projection",Director_popToSceneStackLevel:"cocos2d: Director: unrecognized projection",Director_popToSceneStackLevel_2:"cocos2d: Director: Error in gettimeofday",Director_popScene:"running scene should not null",Director_pushScene:"the scene should not null",arrayVerifyType:"element type is wrong!",Scheduler_scheduleCallbackForTarget:"CCSheduler#scheduleCallback. Callback already scheduled. Updating interval from:%s to %s",Scheduler_scheduleCallbackForTarget_2:"cc.scheduler.scheduleCallbackForTarget(): callback_fn should be non-null.",Scheduler_scheduleCallbackForTarget_3:"cc.scheduler.scheduleCallbackForTarget(): target should be non-null.",Scheduler_pauseTarget:"cc.Scheduler.pauseTarget():target should be non-null",Scheduler_resumeTarget:"cc.Scheduler.resumeTarget():target should be non-null",Scheduler_isTargetPaused:"cc.Scheduler.isTargetPaused():target should be non-null",Node_getZOrder:"getZOrder is deprecated. Please use getLocalZOrder instead.",Node_setZOrder:"setZOrder is deprecated. Please use setLocalZOrder instead.",Node_getRotation:"RotationX != RotationY. Don't know which one to return",Node_getScale:"ScaleX != ScaleY. Don't know which one to return",Node_addChild:"An Node can't be added as a child of itself.",Node_addChild_2:"child already added. It can't be added again",Node_addChild_3:"child must be non-null",Node_removeFromParentAndCleanup:"removeFromParentAndCleanup is deprecated. Use removeFromParent instead",Node_boundingBox:"boundingBox is deprecated. Use getBoundingBox instead",Node_removeChildByTag:"argument tag is an invalid tag",Node_removeChildByTag_2:"cocos2d: removeChildByTag(tag = %s): child not found!",Node_removeAllChildrenWithCleanup:"removeAllChildrenWithCleanup is deprecated. Use removeAllChildren instead",Node_stopActionByTag:"cc.Node.stopActionBy(): argument tag an invalid tag",Node_getActionByTag:"cc.Node.getActionByTag(): argument tag is an invalid tag",Node_resumeSchedulerAndActions:"resumeSchedulerAndActions is deprecated, please use resume instead.",Node_pauseSchedulerAndActions:"pauseSchedulerAndActions is deprecated, please use pause instead.",Node__arrayMakeObjectsPerformSelector:"Unknown callback function",Node_reorderChild:"cc.Node.reorderChild(): child must be non-null",Node_reorderChild_2:"cc.Node.reorderChild(): this child is not in children list",Node_runAction:"cc.Node.runAction(): action must be non-null",Node_schedule:"callback function must be non-null",Node_schedule_2:"interval must be positive",Node_initWithTexture:"cocos2d: Could not initialize cc.AtlasNode. Invalid Texture.",AtlasNode_updateAtlasValues:"cc.AtlasNode.updateAtlasValues(): Shall be overridden in subclasses",AtlasNode_initWithTileFile:"",AtlasNode__initWithTexture:"cocos2d: Could not initialize cc.AtlasNode. Invalid Texture.",_EventListenerKeyboard_checkAvailable:"cc._EventListenerKeyboard.checkAvailable(): Invalid EventListenerKeyboard!",_EventListenerTouchOneByOne_checkAvailable:"cc._EventListenerTouchOneByOne.checkAvailable(): Invalid EventListenerTouchOneByOne!",_EventListenerTouchAllAtOnce_checkAvailable:"cc._EventListenerTouchAllAtOnce.checkAvailable(): Invalid EventListenerTouchAllAtOnce!",_EventListenerAcceleration_checkAvailable:"cc._EventListenerAcceleration.checkAvailable(): _onAccelerationEvent must be non-nil",EventListener_create:"Invalid parameter.",__getListenerID:"Don't call this method if the event is for touch.",eventManager__forceAddEventListener:"Invalid scene graph priority!",eventManager_addListener:"0 priority is forbidden for fixed priority since it's used for scene graph based priority.",eventManager_removeListeners:"Invalid listener type!",eventManager_setPriority:"Can't set fixed priority with scene graph based listener.",eventManager_addListener_2:"Invalid parameters.",eventManager_addListener_3:"listener must be a cc.EventListener object when adding a fixed priority listener",eventManager_addListener_4:"The listener has been registered, please don't register it again.",LayerMultiplex_initWithLayers:"parameters should not be ending with null in Javascript",LayerMultiplex_switchTo:"Invalid index in MultiplexLayer switchTo message",LayerMultiplex_switchToAndReleaseMe:"Invalid index in MultiplexLayer switchTo message",LayerMultiplex_addLayer:"cc.Layer.addLayer(): layer should be non-null",EGLView_setDesignResolutionSize:"Resolution not valid",EGLView_setDesignResolutionSize_2:"should set resolutionPolicy",inputManager_handleTouchesBegin:"The touches is more than MAX_TOUCHES, nUnusedIndex = %s",swap:"cc.swap is being modified from original macro, please check usage",checkGLErrorDebug:"WebGL error %s",animationCache__addAnimationsWithDictionary:"cocos2d: cc.AnimationCache: No animations were found in provided dictionary.",animationCache__addAnimationsWithDictionary_2:"cc.AnimationCache. Invalid animation format",animationCache_addAnimations:"cc.AnimationCache.addAnimations(): File could not be found",animationCache__parseVersion1:"cocos2d: cc.AnimationCache: Animation '%s' found in dictionary without any frames - cannot add to animation cache.",animationCache__parseVersion1_2:"cocos2d: cc.AnimationCache: Animation '%s' refers to frame '%s' which is not currently in the cc.SpriteFrameCache. This frame will not be added to the animation.",animationCache__parseVersion1_3:"cocos2d: cc.AnimationCache: None of the frames for animation '%s' were found in the cc.SpriteFrameCache. Animation is not being added to the Animation Cache.",animationCache__parseVersion1_4:"cocos2d: cc.AnimationCache: An animation in your dictionary refers to a frame which is not in the cc.SpriteFrameCache. Some or all of the frames for the animation '%s' may be missing.",animationCache__parseVersion2:"cocos2d: CCAnimationCache: Animation '%s' found in dictionary without any frames - cannot add to animation cache.",animationCache__parseVersion2_2:"cocos2d: cc.AnimationCache: Animation '%s' refers to frame '%s' which is not currently in the cc.SpriteFrameCache. This frame will not be added to the animation.",animationCache_addAnimations_2:"cc.AnimationCache.addAnimations(): Invalid texture file name",Sprite_ignoreAnchorPointForPosition:"cc.Sprite.ignoreAnchorPointForPosition(): it is invalid in cc.Sprite when using SpriteBatchNode",Sprite_setDisplayFrameWithAnimationName:"cc.Sprite.setDisplayFrameWithAnimationName(): Frame not found",Sprite_setDisplayFrameWithAnimationName_2:"cc.Sprite.setDisplayFrameWithAnimationName(): Invalid frame index",Sprite_setDisplayFrame:"setDisplayFrame is deprecated, please use setSpriteFrame instead.",Sprite__updateBlendFunc:"cc.Sprite._updateBlendFunc(): _updateBlendFunc doesn't work when the sprite is rendered using a cc.CCSpriteBatchNode",Sprite_initWithSpriteFrame:"cc.Sprite.initWithSpriteFrame(): spriteFrame should be non-null",Sprite_initWithSpriteFrameName:"cc.Sprite.initWithSpriteFrameName(): spriteFrameName should be non-null",Sprite_initWithSpriteFrameName1:" is null, please check.",Sprite_initWithFile:"cc.Sprite.initWithFile(): filename should be non-null",Sprite_setDisplayFrameWithAnimationName_3:"cc.Sprite.setDisplayFrameWithAnimationName(): animationName must be non-null",Sprite_addChild:"cc.Sprite.addChild(): cc.Sprite only supports cc.Sprites as children when using cc.SpriteBatchNode",Sprite_addChild_2:"cc.Sprite.addChild(): cc.Sprite only supports a sprite using same texture as children when using cc.SpriteBatchNode",Sprite_addChild_3:"cc.Sprite.addChild(): child should be non-null",Sprite_setTexture:"cc.Sprite.texture setter: Batched sprites should use the same texture as the batchnode",Sprite_updateQuadFromSprite:"cc.SpriteBatchNode.updateQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",Sprite_insertQuadFromSprite:"cc.SpriteBatchNode.insertQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",Sprite_addChild_4:"cc.SpriteBatchNode.addChild(): cc.SpriteBatchNode only supports cc.Sprites as children",Sprite_addChild_5:"cc.SpriteBatchNode.addChild(): cc.Sprite is not using the same texture",Sprite_initWithTexture:"Sprite.initWithTexture(): Argument must be non-nil ",Sprite_setSpriteFrame:"Invalid spriteFrameName",Sprite_setTexture_2:"Invalid argument: cc.Sprite.texture setter expects a CCTexture2D.",Sprite_updateQuadFromSprite_2:"cc.SpriteBatchNode.updateQuadFromSprite(): sprite should be non-null",Sprite_insertQuadFromSprite_2:"cc.SpriteBatchNode.insertQuadFromSprite(): sprite should be non-null",SpriteBatchNode_addSpriteWithoutQuad:"cc.SpriteBatchNode.addQuadFromSprite(): SpriteBatchNode only supports cc.Sprites as children",SpriteBatchNode_increaseAtlasCapacity:"cocos2d: CCSpriteBatchNode: resizing TextureAtlas capacity from %s to %s.",SpriteBatchNode_increaseAtlasCapacity_2:"cocos2d: WARNING: Not enough memory to resize the atlas",SpriteBatchNode_reorderChild:"cc.SpriteBatchNode.addChild(): Child doesn't belong to Sprite",SpriteBatchNode_removeChild:"cc.SpriteBatchNode.addChild(): sprite batch node should contain the child",SpriteBatchNode_addSpriteWithoutQuad_2:"cc.SpriteBatchNode.addQuadFromSprite(): child should be non-null",SpriteBatchNode_reorderChild_2:"cc.SpriteBatchNode.addChild(): child should be non-null",spriteFrameCache__getFrameConfig:"cocos2d: WARNING: originalWidth/Height not found on the cc.SpriteFrame. AnchorPoint won't work as expected. Regenrate the .plist",spriteFrameCache_addSpriteFrames:"cocos2d: WARNING: an alias with name %s already exists",spriteFrameCache__checkConflict:"cocos2d: WARNING: Sprite frame: %s has already been added by another source, please fix name conflit",spriteFrameCache_getSpriteFrame:"cocos2d: cc.SpriteFrameCahce: Frame %s not found",spriteFrameCache__getFrameConfig_2:"Please load the resource first : %s",spriteFrameCache_addSpriteFrames_2:"cc.SpriteFrameCache.addSpriteFrames(): plist should be non-null",spriteFrameCache_addSpriteFrames_3:"Argument must be non-nil",CCSpriteBatchNode_updateQuadFromSprite:"cc.SpriteBatchNode.updateQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",CCSpriteBatchNode_insertQuadFromSprite:"cc.SpriteBatchNode.insertQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",CCSpriteBatchNode_addChild:"cc.SpriteBatchNode.addChild(): cc.SpriteBatchNode only supports cc.Sprites as children",CCSpriteBatchNode_initWithTexture:"Sprite.initWithTexture(): Argument must be non-nil ",CCSpriteBatchNode_addChild_2:"cc.Sprite.addChild(): child should be non-null",CCSpriteBatchNode_setSpriteFrame:"Invalid spriteFrameName",CCSpriteBatchNode_setTexture:"Invalid argument: cc.Sprite texture setter expects a CCTexture2D.",CCSpriteBatchNode_updateQuadFromSprite_2:"cc.SpriteBatchNode.updateQuadFromSprite(): sprite should be non-null",CCSpriteBatchNode_insertQuadFromSprite_2:"cc.SpriteBatchNode.insertQuadFromSprite(): sprite should be non-null",CCSpriteBatchNode_addChild_3:"cc.SpriteBatchNode.addChild(): child should be non-null",TextureAtlas_initWithFile:"cocos2d: Could not open file: %s",TextureAtlas_insertQuad:"cc.TextureAtlas.insertQuad(): invalid totalQuads",TextureAtlas_initWithTexture:"cc.TextureAtlas.initWithTexture():texture should be non-null",TextureAtlas_updateQuad:"cc.TextureAtlas.updateQuad(): quad should be non-null",TextureAtlas_updateQuad_2:"cc.TextureAtlas.updateQuad(): Invalid index",TextureAtlas_insertQuad_2:"cc.TextureAtlas.insertQuad(): Invalid index",TextureAtlas_insertQuads:"cc.TextureAtlas.insertQuad(): Invalid index + amount",TextureAtlas_insertQuadFromIndex:"cc.TextureAtlas.insertQuadFromIndex(): Invalid newIndex",TextureAtlas_insertQuadFromIndex_2:"cc.TextureAtlas.insertQuadFromIndex(): Invalid fromIndex",TextureAtlas_removeQuadAtIndex:"cc.TextureAtlas.removeQuadAtIndex(): Invalid index",TextureAtlas_removeQuadsAtIndex:"cc.TextureAtlas.removeQuadsAtIndex(): index + amount out of bounds",TextureAtlas_moveQuadsFromIndex:"cc.TextureAtlas.moveQuadsFromIndex(): move is out of bounds",TextureAtlas_moveQuadsFromIndex_2:"cc.TextureAtlas.moveQuadsFromIndex(): Invalid newIndex",TextureAtlas_moveQuadsFromIndex_3:"cc.TextureAtlas.moveQuadsFromIndex(): Invalid oldIndex",textureCache_addPVRTCImage:"TextureCache:addPVRTCImage does not support on HTML5",textureCache_addETCImage:"TextureCache:addPVRTCImage does not support on HTML5",textureCache_textureForKey:"textureForKey is deprecated. Please use getTextureForKey instead.",textureCache_addPVRImage:"addPVRImage does not support on HTML5",textureCache_addUIImage:"cocos2d: Couldn't add UIImage in TextureCache",textureCache_dumpCachedTextureInfo:"cocos2d: '%s' id=%s %s x %s",textureCache_dumpCachedTextureInfo_2:"cocos2d: '%s' id= HTMLCanvasElement %s x %s",textureCache_dumpCachedTextureInfo_3:"cocos2d: TextureCache dumpDebugInfo: %s textures, HTMLCanvasElement for %s KB (%s MB)",textureCache_addUIImage_2:"cc.Texture.addUIImage(): image should be non-null",Texture2D_initWithETCFile:"initWithETCFile does not support on HTML5",Texture2D_initWithPVRFile:"initWithPVRFile does not support on HTML5",Texture2D_initWithPVRTCData:"initWithPVRTCData does not support on HTML5",Texture2D_addImage:"cc.Texture.addImage(): path should be non-null",Texture2D_initWithImage:"cocos2d: cc.Texture2D. Can't create Texture. UIImage is nil",Texture2D_initWithImage_2:"cocos2d: WARNING: Image (%s x %s) is bigger than the supported %s x %s",Texture2D_initWithString:"initWithString isn't supported on cocos2d-html5",Texture2D_initWithETCFile_2:"initWithETCFile does not support on HTML5",Texture2D_initWithPVRFile_2:"initWithPVRFile does not support on HTML5",Texture2D_initWithPVRTCData_2:"initWithPVRTCData does not support on HTML5",Texture2D_bitsPerPixelForFormat:"bitsPerPixelForFormat: %s, cannot give useful result, it's a illegal pixel format",Texture2D__initPremultipliedATextureWithImage:"cocos2d: cc.Texture2D: Using RGB565 texture since image has no alpha",Texture2D_addImage_2:"cc.Texture.addImage(): path should be non-null",Texture2D_initWithData:"NSInternalInconsistencyException",MissingFile:"Missing file: %s",radiansToDegress:"cc.radiansToDegress() should be called cc.radiansToDegrees()",RectWidth:"Rect width exceeds maximum margin: %s",RectHeight:"Rect height exceeds maximum margin: %s",EventManager__updateListeners:"If program goes here, there should be event in dispatch.",EventManager__updateListeners_2:"_inDispatch should be 1 here."},cc._logToWebPage=function(t){if(cc._canvas){var e=cc._logList,i=document;if(!e){var n=i.createElement("Div");e=n.style;n.setAttribute("id","logInfoDiv"),cc._canvas.parentNode.appendChild(n),n.setAttribute("width","200"),n.setAttribute("height",cc._canvas.height),e.zIndex="99999",e.position="absolute",e.top="0",e.left="0",e=cc._logList=i.createElement("textarea"),i=e.style,e.setAttribute("rows","20"),e.setAttribute("cols","30"),e.setAttribute("disabled",!0),n.appendChild(e),i.backgroundColor="transparent",i.borderBottom="1px solid #cccccc",i.borderRightWidth="0px",i.borderLeftWidth="0px",i.borderTopWidth="0px",i.borderTopStyle="none",i.borderRightStyle="none",i.borderLeftStyle="none",i.padding="0px",i.margin=0}e.value=e.value+t+"\r\n",e.scrollTop=e.scrollHeight}},cc._formatString=function(t){if(!cc.isObject(t))return t;try{return JSON.stringify(t)}catch(t){return""}},cc._initDebugSetting=function(t){var e,i=cc.game;t!==i.DEBUG_MODE_NONE&&(t>i.DEBUG_MODE_ERROR?(e=cc._logToWebPage.bind(cc),cc.error=function(){e("ERROR :  "+cc.formatStr.apply(cc,arguments))},cc.assert=function(t,i){if(!t&&i){for(var n=2;n<arguments.length;n++)i=i.replace(/(%s)|(%d)/,cc._formatString(arguments[n]));e("Assert: "+i)}},t!==i.DEBUG_MODE_ERROR_FOR_WEB_PAGE&&(cc.warn=function(){e("WARN :  "+cc.formatStr.apply(cc,arguments))}),t===i.DEBUG_MODE_INFO_FOR_WEB_PAGE&&(cc.log=function(){e(cc.formatStr.apply(cc,arguments))})):console&&console.log.apply&&(cc.error=Function.prototype.bind.call(console.error,console),cc.assert=console.assert?Function.prototype.bind.call(console.assert,console):function(t,e){if(!t&&e){for(var i=2;i<arguments.length;i++)e=e.replace(/(%s)|(%d)/,cc._formatString(arguments[i]));throw Error(e)}},t!==i.DEBUG_MODE_ERROR&&(cc.warn=Function.prototype.bind.call(console.warn,console)),t===i.DEBUG_MODE_INFO&&(cc.log=Function.prototype.bind.call(console.log,console))))},cc.loader.loadBinary=function(t,e){var i=this,n=this.getXMLHttpRequest(),s="load "+t+" failed!";n.open("GET",t,!0),n.responseType="arraybuffer",cc.loader.loadBinary._IEFilter?(n.setRequestHeader("Accept-Charset","x-user-defined"),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var t=cc._convertResponseBodyToText(n.responseBody);e(null,i._str2Uint8Array(t))}else e(s)}):(n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.onload=function(){4===n.readyState&&200===n.status?e(null,new Uint8Array(n.response)):e(s)}),n.send(null)},cc.loader.loadBinary._IEFilter=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&window.IEBinaryToArray_ByteStr&&window.IEBinaryToArray_ByteStr_Last,cc.loader._str2Uint8Array=function(t){if(!t)return null;for(var e=new Uint8Array(t.length),i=0;i<t.length;i++)e[i]=255&t.charCodeAt(i);return e},cc.loader.loadBinarySync=function(t){var e=this.getXMLHttpRequest();e.timeout=0;var i="load "+t+" failed!";if(e.open("GET",t,!1),t=null,cc.loader.loadBinary._IEFilter){if(e.setRequestHeader("Accept-Charset","x-user-defined"),e.send(null),200!==e.status)return cc.log(i),null;(e=cc._convertResponseBodyToText(e.responseBody))&&(t=this._str2Uint8Array(e))}else{if(e.overrideMimeType&&e.overrideMimeType("text/plain; charset=x-user-defined"),e.send(null),200!==e.status)return cc.log(i),null;t=this._str2Uint8Array(e.responseText)}return t},window.Uint8Array=window.Uint8Array||window.Array,cc.loader.loadBinary._IEFilter){var IEBinaryToArray_ByteStr_Script='\x3c!-- IEBinaryToArray_ByteStr --\x3e\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last = ""\r\n   End If\r\nEnd Function\r\n',myVBScript=document.createElement("script");myVBScript.type="text/vbscript",myVBScript.textContent=IEBinaryToArray_ByteStr_Script,document.body.appendChild(myVBScript),cc._convertResponseBodyToText=function(t){for(var e={},i=0;256>i;i++)for(var n=0;256>n;n++)e[String.fromCharCode(i+256*n)]=String.fromCharCode(i)+String.fromCharCode(n);return i=IEBinaryToArray_ByteStr(t),t=IEBinaryToArray_ByteStr_Last(t),i.replace(/[\s\S]/g,(function(t){return e[t]}))+t}}cc=cc||{},cc._loadingImage="data:image/gif;base64,R0lGODlhEAAQALMNAD8/P7+/vyoqKlVVVX9/fxUVFUBAQGBgYMDAwC8vL5CQkP///wAAAP///wAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFAAANACwAAAAAEAAQAAAEO5DJSau9OOvNex0IMnDIsiCkiW6g6BmKYlBFkhSUEgQKlQCARG6nEBwOgl+QApMdCIRD7YZ5RjlGpCUCACH5BAUAAA0ALAAAAgAOAA4AAAQ6kLGB0JA4M7QW0hrngRllkYyhKAYqKUGguAws0ypLS8JxCLQDgXAIDg+FRKIA6v0SAECCBpXSkstMBAAh+QQFAAANACwAAAAACgAQAAAEOJDJORAac6K1kDSKYmydpASBUl0mqmRfaGTCcQgwcxDEke+9XO2WkxQSiUIuAQAkls0n7JgsWq8RACH5BAUAAA0ALAAAAAAOAA4AAAQ6kMlplDIzTxWC0oxwHALnDQgySAdBHNWFLAvCukc215JIZihVIZEogDIJACBxnCSXTcmwGK1ar1hrBAAh+QQFAAANACwAAAAAEAAKAAAEN5DJKc4RM+tDyNFTkSQF5xmKYmQJACTVpQSBwrpJNteZSGYoFWjIGCAQA2IGsVgglBOmEyoxIiMAIfkEBQAADQAsAgAAAA4ADgAABDmQSVZSKjPPBEDSGucJxyGA1XUQxAFma/tOpDlnhqIYN6MEAUXvF+zldrMBAjHoIRYLhBMqvSmZkggAIfkEBQAADQAsBgAAAAoAEAAABDeQyUmrnSWlYhMASfeFVbZdjHAcgnUQxOHCcqWylKEohqUEAYVkgEAMfkEJYrFA6HhKJsJCNFoiACH5BAUAAA0ALAIAAgAOAA4AAAQ3kMlJq704611SKloCAEk4lln3DQgyUMJxCBKyLAh1EMRR3wiDQmHY9SQslyIQUMRmlmVTIyRaIgA7",cc._fpsImage="data:image/png;base64,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",cc._loaderImage="data:image/jpeg;base64,/9j/4QlQaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzEzOCA3OS4xNTk4MjQsIDIwMTYvMDkvMTQtMDE6MDk6MDEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiLz4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+/+0ALFBob3Rvc2hvcCAzLjAAOEJJTQQlAAAAAAAQ1B2M2Y8AsgTpgAmY7PhCfv/bAIQABAMDAwMDBAMDBAYEAwQGBwUEBAUHCAYGBwYGCAoICQkJCQgKCgwMDAwMCgwMDQ0MDBERERERFBQUFBQUFBQUFAEEBQUIBwgPCgoPFA4ODhQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU/90ABAB4/+4ADkFkb2JlAGTAAAAAAf/AABEIAnEDwAMAEQABEQECEQH/xADRAAACAgMBAQEAAAAAAAAAAAADBAIFAAEGBwgJAQEBAQEBAQEBAQAAAAAAAAABAAIDBAUGBwgQAAIBAwIEBAIGBQULCAgCCwECAwAEERIhBTFBUQYTImEy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",cc=cc||{},cc.defineGetterSetter=function(t,e,i,n,s,r){if(t.__defineGetter__)i&&t.__defineGetter__(e,i),n&&t.__defineSetter__(e,n);else{if(!Object.defineProperty)throw Error("browser does not support getters");var o={enumerable:!1,configurable:!0};i&&(o.get=i),n&&(o.set=n),Object.defineProperty(t,e,o)}if(!s&&!r){o=null!=i;for(var a=null!=n,c=Object.getOwnPropertyNames(t),h=0;h<c.length;h++){var l=c[h];if((t.__lookupGetter__?!t.__lookupGetter__(l):!Object.getOwnPropertyDescriptor(t,l))&&"function"==typeof t[l]){var u=t[l];if(o&&u===i&&(s=l,!a||r))break;if(a&&u===n&&(r=l,!o||s))break}}}t=t.constructor,s&&(t.__getters__||(t.__getters__={}),t.__getters__[s]=e),r&&(t.__setters__||(t.__setters__={}),t.__setters__[r]=e)},cc.clone=function(t){var e,i=t.constructor?new t.constructor:{};for(e in t){var n=t[e];i[e]="object"!=typeof n||!n||n instanceof cc.Node||n instanceof HTMLElement?n:cc.clone(n)}return i},cc.inject=function(t,e){for(var i in t)e[i]=t[i]};var ClassManager=function(){var t=0|998*Math.random(),e=0|998*Math.random();this.getNewID=function(){return t++},this.getNewInstanceId=function(){return e++}},classManager=new ClassManager;switch(function(){var a=/\b_super\b/;cc.Class=function(){},cc.Class.extend=function(b){var c=this.prototype,d=Object.create(c),e={writable:!0,enumerable:!1,configurable:!0},f;cc.game.config&&cc.game.config[cc.game.CONFIG_KEY.exposeClassName]?(f="(function "+(b._className||"Class")+" (arg0, arg1, arg2, arg3, arg4, arg5) {\n",f+="    this.__instanceId = classManager.getNewInstanceId();\n    if (this.ctor) {\n",f+="        switch (arguments.length) {\n",f+="        case 0: this.ctor(); break;\n",f+="        case 1: this.ctor(arg0); break;\n",f+="        case 3: this.ctor(arg0, arg1, arg2); break;\n",f+="        case 4: this.ctor(arg0, arg1, arg2, arg3); break;\n",f+="        case 5: this.ctor(arg0, arg1, arg2, arg3, arg4); break;\n",f+="        default: this.ctor.apply(this, arguments);\n",f+="        }\n",f+="    }\n",f+="})",f=eval(f)):f=function(t,e,i,n,s){if(this.__instanceId=classManager.getNewInstanceId(),this.ctor)switch(arguments.length){case 0:this.ctor();break;case 1:this.ctor(t);break;case 2:this.ctor(t,e);break;case 3:this.ctor(t,e,i);break;case 4:this.ctor(t,e,i,n);break;case 5:this.ctor(t,e,i,n,s);break;default:this.ctor.apply(this,arguments)}},e.value=classManager.getNewID(),Object.defineProperty(d,"__pid",e),f.prototype=d,e.value=f,Object.defineProperty(d,"constructor",e),this.__getters__&&(f.__getters__=cc.clone(this.__getters__)),this.__setters__&&(f.__setters__=cc.clone(this.__setters__));for(var g=0,h=arguments.length;g<h;++g){var k=arguments[g],m;for(m in k){var n="function"==typeof k[m],p="function"==typeof c[m],r=a.test(k[m]);if(n&&p&&r?(e.value=function(t,e){return function(){var i=this._super;this._super=c[t];var n=e.apply(this,arguments);return this._super=i,n}}(m,k[m]),Object.defineProperty(d,m,e)):n?(e.value=k[m],Object.defineProperty(d,m,e)):d[m]=k[m],n){var t,u;if(this.__getters__&&this.__getters__[m]){var n=this.__getters__[m],s;for(s in this.__setters__)if(this.__setters__[s]===n){u=s;break}cc.defineGetterSetter(d,n,k[m],k[u]?k[u]:d[u],m,u)}if(this.__setters__&&this.__setters__[m]){for(s in n=this.__setters__[m],this.__getters__)if(this.__getters__[s]===n){t=s;break}cc.defineGetterSetter(d,n,k[t]?k[t]:d[t],k[m],t,m)}}}}return f.extend=cc.Class.extend,f.implement=function(t){for(var e in t)d[e]=t[e]},f}}(),cc=cc||{},cc._tmp=cc._tmp||{},cc.associateWithNative=function(t,e){},cc.KEY={none:0,back:6,menu:18,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,select:41,insert:45,Delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,num0:96,num1:97,num2:98,num3:99,num4:100,num5:101,num6:102,num7:103,num8:104,num9:105,"*":106,"+":107,"-":109,numdel:110,"/":111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,";":186,semicolon:186,equal:187,"=":187,",":188,comma:188,dash:189,".":190,period:190,forwardslash:191,grave:192,"[":219,openbracket:219,backslash:220,"]":221,closebracket:221,quote:222,dpadLeft:1e3,dpadRight:1001,dpadUp:1003,dpadDown:1004,dpadCenter:1005},cc.FMT_JPG=0,cc.FMT_PNG=1,cc.FMT_TIFF=2,cc.FMT_RAWDATA=3,cc.FMT_WEBP=4,cc.FMT_UNKNOWN=5,cc.getImageFormatByData=function(t){return 8<t.length&&137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]&&13===t[4]&&10===t[5]&&26===t[6]&&10===t[7]?cc.FMT_PNG:2<t.length&&(73===t[0]&&73===t[1]||77===t[0]&&77===t[1]||255===t[0]&&216===t[1])?cc.FMT_TIFF:cc.FMT_UNKNOWN},cc.Point=function(t,e){this.x=t||0,this.y=e||0},cc.p=function(t,e){return void 0===t?{x:0,y:0}:void 0===e?{x:t.x,y:t.y}:{x:t,y:e}},cc.pointEqualToPoint=function(t,e){return t&&e&&t.x===e.x&&t.y===e.y},cc.Size=function(t,e){this.width=t||0,this.height=e||0},cc.size=function(t,e){return void 0===t?{width:0,height:0}:void 0===e?{width:t.width,height:t.height}:{width:t,height:e}},cc.sizeEqualToSize=function(t,e){return t&&e&&t.width===e.width&&t.height===e.height},cc.Rect=function(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0},cc.rect=function(t,e,i,n){return void 0===t?{x:0,y:0,width:0,height:0}:void 0===e?{x:t.x,y:t.y,width:t.width,height:t.height}:{x:t,y:e,width:i,height:n}},cc.rectEqualToRect=function(t,e){return t&&e&&t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},cc._rectEqualToZero=function(t){return t&&0===t.x&&0===t.y&&0===t.width&&0===t.height},cc.rectContainsRect=function(t,e){return!(!t||!e)&&!(t.x>=e.x||t.y>=e.y||t.x+t.width<=e.x+e.width||t.y+t.height<=e.y+e.height)},cc.rectGetMaxX=function(t){return t.x+t.width},cc.rectGetMidX=function(t){return t.x+t.width/2},cc.rectGetMinX=function(t){return t.x},cc.rectGetMaxY=function(t){return t.y+t.height},cc.rectGetMidY=function(t){return t.y+t.height/2},cc.rectGetMinY=function(t){return t.y},cc.rectContainsPoint=function(t,e){return e.x>=cc.rectGetMinX(t)&&e.x<=cc.rectGetMaxX(t)&&e.y>=cc.rectGetMinY(t)&&e.y<=cc.rectGetMaxY(t)},cc.rectIntersectsRect=function(t,e){var i=t.y+t.height,n=e.x+e.width,s=e.y+e.height;return!(t.x+t.width<e.x||n<t.x||i<e.y||s<t.y)},cc.rectOverlapsRect=function(t,e){return!(t.x+t.width<e.x||e.x+e.width<t.x||t.y+t.height<e.y||e.y+e.height<t.y)},cc.rectUnion=function(t,e){var i=cc.rect(0,0,0,0);return i.x=Math.min(t.x,e.x),i.y=Math.min(t.y,e.y),i.width=Math.max(t.x+t.width,e.x+e.width)-i.x,i.height=Math.max(t.y+t.height,e.y+e.height)-i.y,i},cc.rectIntersection=function(t,e){var i=cc.rect(Math.max(cc.rectGetMinX(t),cc.rectGetMinX(e)),Math.max(cc.rectGetMinY(t),cc.rectGetMinY(e)),0,0);return i.width=Math.min(cc.rectGetMaxX(t),cc.rectGetMaxX(e))-cc.rectGetMinX(i),i.height=Math.min(cc.rectGetMaxY(t),cc.rectGetMaxY(e))-cc.rectGetMinY(i),i},cc.SAXParser=cc.Class.extend({_parser:null,_isSupportDOMParser:null,ctor:function(){window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):this._isSupportDOMParser=!1},parse:function(t){return this._parseXML(t)},_parseXML:function(t){var e;return this._isSupportDOMParser?e=this._parser.parseFromString(t,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)),e}}),cc.PlistParser=cc.SAXParser.extend({parse:function(t){if("plist"!==(t=this._parseXML(t).documentElement).tagName)return cc.warn("Not a plist file!"),{};for(var e=null,i=0,n=t.childNodes.length;i<n&&1!==(e=t.childNodes[i]).nodeType;i++);return this._parseNode(e)},_parseNode:function(t){var e=null,i=t.tagName;if("dict"===i)e=this._parseDict(t);else if("array"===i)e=this._parseArray(t);else if("string"===i)if(1===t.childNodes.length)e=t.firstChild.nodeValue;else for(e="",i=0;i<t.childNodes.length;i++)e+=t.childNodes[i].nodeValue;else"false"===i?e=!1:"true"===i?e=!0:"real"===i?e=parseFloat(t.firstChild.nodeValue):"integer"===i&&(e=parseInt(t.firstChild.nodeValue,10));return e},_parseArray:function(t){for(var e=[],i=0,n=t.childNodes.length;i<n;i++){var s=t.childNodes[i];1===s.nodeType&&e.push(this._parseNode(s))}return e},_parseDict:function(t){for(var e={},i=null,n=0,s=t.childNodes.length;n<s;n++){var r=t.childNodes[n];1===r.nodeType&&("key"===r.tagName?i=r.firstChild.nodeValue:e[i]=this._parseNode(r))}return e}}),cc.saxParser=new cc.SAXParser,cc.plistParser=new cc.PlistParser,cc._txtLoader={load:function(t,e,i,n){cc.loader.loadTxt(t,n)}},cc.loader.register(["txt","xml","vsh","fsh","atlas"],cc._txtLoader),cc._jsonLoader={load:function(t,e,i,n){cc.loader.loadJson(t,n)}},cc.loader.register(["json","ExportJson"],cc._jsonLoader),cc._jsLoader={load:function(t,e,i,n){cc.loader.loadJs(t,n)}},cc.loader.register(["js"],cc._jsLoader),cc._imgLoader={load:function(t,e,i,n){i=cc.loader.isLoading(t)?function(t,i){if(t)return n(t);var s=cc.textureCache.getTextureForKey(e)||cc.textureCache.handleLoadedTexture(e,i);n(null,s)}:function(t,i){if(t)return n(t);var s=cc.textureCache.handleLoadedTexture(e,i);n(null,s)},cc.loader.loadImg(t,i)}},cc.loader.register("png jpg bmp jpeg gif ico tiff webp".split(" "),cc._imgLoader),cc._serverImgLoader={load:function(t,e,i,n){cc._imgLoader.load(i.src,e,i,n)}},cc.loader.register(["serverImg"],cc._serverImgLoader),cc._plistLoader={load:function(t,e,i,n){cc.loader.loadTxt(t,(function(t,e){if(t)return n(t);n(null,cc.plistParser.parse(e))}))}},cc.loader.register(["plist"],cc._plistLoader),cc._fontLoader={TYPE:{".eot":"embedded-opentype",".ttf":"truetype",".ttc":"truetype",".woff":"woff",".svg":"svg"},_loadFont:function(t,e,i){var n=document,s=cc.path,r=this.TYPE,o=document.createElement("style");o.type="text/css",n.body.appendChild(o);var a="";a=isNaN(t-0)?a+"@font-face { font-family:"+t+"; src:":a+"@font-face { font-family:'"+t+"'; src:";if(e instanceof Array)for(var c=0,h=e.length;c<h;c++)i=s.extname(e[c]).toLowerCase(),a+="url('"+e[c]+"') format('"+r[i]+"')",a+=c===h-1?";":",";else a+="url('"+e+"') format('"+r[i=i.toLowerCase()]+"');";o.textContent+=a+"}",(i=(e=document.createElement("div")).style).fontFamily=t,e.innerHTML=".",i.position="absolute",i.left="-100px",i.top="-100px",n.body.appendChild(e)},load:function(t,e,i,n){e=i.type,t=i.name,e=i.srcs,cc.isString(i)?(e=cc.path.extname(i),t=cc.path.basename(i,e),this._loadFont(t,i,e)):this._loadFont(t,e),document.fonts?document.fonts.load("1em "+t).then((function(){n(null,!0)}),(function(t){n(t)})):n(null,!0)}},cc.loader.register("font eot ttf woff svg ttc".split(" "),cc._fontLoader),cc._binaryLoader={load:function(t,e,i,n){cc.loader.loadBinary(t,n)}},cc._csbLoader={load:function(t,e,i,n){cc.loader.loadCsb(t,n)}},cc.loader.register(["csb"],cc._csbLoader),window.CocosEngine=cc.ENGINE_VERSION="Cocos2d-JS v3.16",cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL=0,cc.DIRECTOR_STATS_POSITION=cc.p(0,0),cc.DIRECTOR_FPS_INTERVAL=.5,cc.COCOSNODE_RENDER_SUBPIXEL=1,cc.SPRITEBATCHNODE_RENDER_SUBPIXEL=1,cc.OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA=1,cc.TEXTURE_ATLAS_USE_TRIANGLE_STRIP=0,cc.TEXTURE_ATLAS_USE_VAO=0,cc.TEXTURE_NPOT_SUPPORT=0,cc.RETINA_DISPLAY_FILENAME_SUFFIX="-hd",cc.USE_LA88_LABELS=1,cc.SPRITE_DEBUG_DRAW=0,cc.SPRITEBATCHNODE_DEBUG_DRAW=0,cc.LABELBMFONT_DEBUG_DRAW=0,cc.LABELATLAS_DEBUG_DRAW=0,cc.DRAWNODE_TOTAL_VERTICES=2e4,cc.DEFAULT_ENGINE=cc.ENGINE_VERSION+"-canvas",cc.ENABLE_STACKABLE_ACTIONS=1,cc.ENABLE_GL_STATE_CACHE=1,cc.$=function(t){var e=this===cc?document:this;return(t=t instanceof HTMLElement?t:e.querySelector(t))&&(t.find=t.find||cc.$,t.hasClass=t.hasClass||function(t){return this.className.match(RegExp("(\\s|^)"+t+"(\\s|$)"))},t.addClass=t.addClass||function(t){return this.hasClass(t)||(this.className&&(this.className+=" "),this.className+=t),this},t.removeClass=t.removeClass||function(t){return this.hasClass(t)&&(this.className=this.className.replace(t,"")),this},t.remove=t.remove||function(){return this.parentNode&&this.parentNode.removeChild(this),this},t.appendTo=t.appendTo||function(t){return t.appendChild(this),this},t.prependTo=t.prependTo||function(t){return t.childNodes[0]?t.insertBefore(this,t.childNodes[0]):t.appendChild(this),this},t.transforms=t.transforms||function(){return this.style[cc.$.trans]=cc.$.translate(this.position)+cc.$.rotate(this.rotation)+cc.$.scale(this.scale)+cc.$.skew(this.skew),this},t.position=t.position||{x:0,y:0},t.rotation=t.rotation||0,t.scale=t.scale||{x:1,y:1},t.skew=t.skew||{x:0,y:0},t.translates=function(t,e){return this.position.x=t,this.position.y=e,this.transforms(),this},t.rotate=function(t){return this.rotation=t,this.transforms(),this},t.resize=function(t,e){return this.scale.x=t,this.scale.y=e,this.transforms(),this},t.setSkew=function(t,e){return this.skew.x=t,this.skew.y=e,this.transforms(),this}),t},cc.sys.browserType){case cc.sys.BROWSER_TYPE_FIREFOX:cc.$.pfx="Moz",cc.$.hd=!0;break;case cc.sys.BROWSER_TYPE_CHROME:case cc.sys.BROWSER_TYPE_SAFARI:cc.$.pfx="webkit",cc.$.hd=!0;break;case cc.sys.BROWSER_TYPE_OPERA:cc.$.pfx="O",cc.$.hd=!1;break;case cc.sys.BROWSER_TYPE_IE:cc.$.pfx="ms",cc.$.hd=!1;break;default:cc.$.pfx="webkit",cc.$.hd=!0}cc.$.trans=cc.$.pfx+"Transform",cc.$.translate=cc.$.hd?function(t){return"translate3d("+t.x+"px, "+t.y+"px, 0) "}:function(t){return"translate("+t.x+"px, "+t.y+"px) "},cc.$.rotate=cc.$.hd?function(t){return"rotateZ("+t+"deg) "}:function(t){return"rotate("+t+"deg) "},cc.$.scale=function(t){return"scale("+t.x+", "+t.y+") "},cc.$.skew=function(t){return"skewX("+-t.x+"deg) skewY("+t.y+"deg)"},cc.$new=function(t){return cc.$(document.createElement(t))},cc.$.findpos=function(t){var e=0,i=0;do{e+=t.offsetLeft,i+=t.offsetTop}while(t=t.offsetParent);return{x:e,y:i}},cc.INVALID_INDEX=-1,cc.PI=Math.PI,cc.FLT_MAX=parseFloat("3.402823466e+38F"),cc.FLT_MIN=parseFloat("1.175494351e-38F"),cc.RAD=cc.PI/180,cc.DEG=180/cc.PI,cc.UINT_MAX=4294967295,cc.swap=function(t,e,i){if(!cc.isObject(i)||cc.isUndefined(i.x)||cc.isUndefined(i.y))cc.log(cc._LogInfos.swap);else{var n=i[t];i[t]=i[e],i[e]=n}},cc.lerp=function(t,e,i){return t+(e-t)*i},cc.rand=function(){return 16777215*Math.random()},cc.randomMinus1To1=function(){return 2*(Math.random()-.5)},cc.random0To1=Math.random,cc.degreesToRadians=function(t){return t*cc.RAD},cc.radiansToDegrees=function(t){return t*cc.DEG},cc.radiansToDegress=function(t){return cc.log(cc._LogInfos.radiansToDegress),t*cc.DEG},cc.REPEAT_FOREVER=Number.MAX_VALUE-1,cc.nodeDrawSetup=function(t){t._shaderProgram&&(t._glProgramState.apply(),t._shaderProgram.setUniformForModelViewAndProjectionMatrixWithMat4())},cc.enableDefaultGLStates=function(){},cc.disableDefaultGLStates=function(){},cc.incrementGLDraws=function(t){cc.g_NumberOfDraws+=t},cc.FLT_EPSILON=1.192092896e-7,cc.contentScaleFactor=function(){return cc.director._contentScaleFactor},cc.pointPointsToPixels=function(t){var e=cc.contentScaleFactor();return cc.p(t.x*e,t.y*e)},cc.pointPixelsToPoints=function(t){var e=cc.contentScaleFactor();return cc.p(t.x/e,t.y/e)},cc._pointPixelsToPointsOut=function(t,e){var i=cc.contentScaleFactor();e.x=t.x/i,e.y=t.y/i},cc.sizePointsToPixels=function(t){var e=cc.contentScaleFactor();return cc.size(t.width*e,t.height*e)},cc.sizePixelsToPoints=function(t){var e=cc.contentScaleFactor();return cc.size(t.width/e,t.height/e)},cc._sizePixelsToPointsOut=function(t,e){var i=cc.contentScaleFactor();e.width=t.width/i,e.height=t.height/i},cc.rectPixelsToPoints=function(t){var e=cc.contentScaleFactor();return cc.rect(t.x/e,t.y/e,t.width/e,t.height/e)},cc.rectPointsToPixels=function(t){var e=cc.contentScaleFactor();return cc.rect(t.x*e,t.y*e,t.width*e,t.height*e)},cc.ONE=1,cc.ZERO=0,cc.SRC_ALPHA=770,cc.SRC_ALPHA_SATURATE=776,cc.SRC_COLOR=768,cc.DST_ALPHA=772,cc.DST_COLOR=774,cc.ONE_MINUS_SRC_ALPHA=771,cc.ONE_MINUS_SRC_COLOR=769,cc.ONE_MINUS_DST_ALPHA=773,cc.ONE_MINUS_DST_COLOR=775,cc.ONE_MINUS_CONSTANT_ALPHA=32772,cc.ONE_MINUS_CONSTANT_COLOR=32770,cc.LINEAR=9729,cc.REPEAT=10497,cc.CLAMP_TO_EDGE=33071,cc.MIRRORED_REPEAT=33648,cc.BLEND_SRC=cc.SRC_ALPHA,cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,(function(){cc._renderType===cc.game.RENDER_TYPE_WEBGL&&cc.OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA&&(cc.BLEND_SRC=cc.ONE)})),cc.BLEND_DST=cc.ONE_MINUS_SRC_ALPHA,cc.checkGLErrorDebug=function(){if(cc.renderMode===cc.game.RENDER_TYPE_WEBGL){var t=cc._renderContext.getError();t&&cc.log(cc._LogInfos.checkGLErrorDebug,t)}},cc.ORIENTATION_PORTRAIT=1,cc.ORIENTATION_LANDSCAPE=2,cc.ORIENTATION_AUTO=3,cc.CONCURRENCY_HTTP_REQUEST_COUNT=cc.sys.isMobile?20:0,cc.BATCH_VERTEX_COUNT=2e3,cc.VERTEX_ATTRIB_FLAG_NONE=0,cc.VERTEX_ATTRIB_FLAG_POSITION=1,cc.VERTEX_ATTRIB_FLAG_COLOR=2,cc.VERTEX_ATTRIB_FLAG_TEX_COORDS=4,cc.VERTEX_ATTRIB_FLAG_POS_COLOR_TEX=cc.VERTEX_ATTRIB_FLAG_POSITION|cc.VERTEX_ATTRIB_FLAG_COLOR|cc.VERTEX_ATTRIB_FLAG_TEX_COORDS,cc.GL_ALL=0,cc.VERTEX_ATTRIB_POSITION=0,cc.VERTEX_ATTRIB_COLOR=1,cc.VERTEX_ATTRIB_TEX_COORDS=2,cc.VERTEX_ATTRIB_MAX=7,cc.UNIFORM_PMATRIX=0,cc.UNIFORM_MVMATRIX=1,cc.UNIFORM_MVPMATRIX=2,cc.UNIFORM_TIME=3,cc.UNIFORM_SINTIME=4,cc.UNIFORM_COSTIME=5,cc.UNIFORM_RANDOM01=6,cc.UNIFORM_SAMPLER=7,cc.UNIFORM_MAX=8,cc.SHADER_POSITION_TEXTURECOLOR="ShaderPositionTextureColor",cc.SHADER_SPRITE_POSITION_TEXTURECOLOR="ShaderSpritePositionTextureColor",cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY="ShaderSpritePositionTextureColorGray",cc.SHADER_POSITION_TEXTURECOLORALPHATEST="ShaderPositionTextureColorAlphaTest",cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST="ShaderSpritePositionTextureColorAlphaTest",cc.SHADER_POSITION_COLOR="ShaderPositionColor",cc.SHADER_SPRITE_POSITION_COLOR="ShaderSpritePositionColor",cc.SHADER_POSITION_TEXTURE="ShaderPositionTexture",cc.SHADER_POSITION_TEXTURE_UCOLOR="ShaderPositionTextureUColor",cc.SHADER_POSITION_TEXTUREA8COLOR="ShaderPositionTextureA8Color",cc.SHADER_POSITION_UCOLOR="ShaderPositionUColor",cc.SHADER_POSITION_LENGTHTEXTURECOLOR="ShaderPositionLengthTextureColor",cc.UNIFORM_PMATRIX_S="CC_PMatrix",cc.UNIFORM_MVMATRIX_S="CC_MVMatrix",cc.UNIFORM_MVPMATRIX_S="CC_MVPMatrix",cc.UNIFORM_TIME_S="CC_Time",cc.UNIFORM_SINTIME_S="CC_SinTime",cc.UNIFORM_COSTIME_S="CC_CosTime",cc.UNIFORM_RANDOM01_S="CC_Random01",cc.UNIFORM_SAMPLER_S="CC_Texture0",cc.UNIFORM_ALPHA_TEST_VALUE_S="CC_alpha_value",cc.ATTRIBUTE_NAME_COLOR="a_color",cc.ATTRIBUTE_NAME_POSITION="a_position",cc.ATTRIBUTE_NAME_TEX_COORD="a_texCoord",cc.ATTRIBUTE_NAME_MVMAT="a_mvMatrix",cc.ITEM_SIZE=32,cc.CURRENT_ITEM=3233828865,cc.ZOOM_ACTION_TAG=3233828866,cc.NORMAL_TAG=8801,cc.SELECTED_TAG=8802,cc.DISABLE_TAG=8803,cc.arrayVerifyType=function(t,e){if(t&&0<t.length)for(var i=0;i<t.length;i++)if(!(t[i]instanceof e))return cc.log("element type is wrong!"),!1;return!0},cc.arrayRemoveObject=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e){t.splice(i,1);break}},cc.arrayRemoveArray=function(t,e){for(var i=0,n=e.length;i<n;i++)cc.arrayRemoveObject(t,e[i])},cc.arrayAppendObjectsToIndex=function(t,e,i){return t.splice.apply(t,[i,0].concat(e)),t},cc.copyArray=function(t){var e,i=t.length,n=Array(i);for(e=0;e<i;e+=1)n[e]=t[e];return n},cc.Color=function(t,e,i,n){this._val=((t||0)<<24>>>0)+((e||0)<<16)+((i||0)<<8)+("number"==typeof n?n:255)},_p=cc.Color.prototype,_p._getR=function(){return(4278190080&this._val)>>>24},_p._setR=function(t){this._val=16777215&this._val|t<<24>>>0},_p._getG=function(){return(16711680&this._val)>>16},_p._setG=function(t){this._val=4278255615&this._val|t<<16},_p._getB=function(){return(65280&this._val)>>8},_p._setB=function(t){this._val=4294902015&this._val|t<<8},_p._getA=function(){return 255&this._val},_p._setA=function(t){this._val=4294967040&this._val|t},cc.defineGetterSetter(_p,"r",_p._getR,_p._setR),cc.defineGetterSetter(_p,"g",_p._getG,_p._setG),cc.defineGetterSetter(_p,"b",_p._getB,_p._setB),cc.defineGetterSetter(_p,"a",_p._getA,_p._setA),cc.color=function(t,e,i,n){return void 0===t?new cc.Color(0,0,0,255):"object"==typeof t?new cc.Color(t.r,t.g,t.b,null==t.a?255:t.a):"string"==typeof t?cc.hexToColor(t):new cc.Color(t,e,i,null==n?255:n)},cc.colorEqual=function(t,e){return t.r===e.r&&t.g===e.g&&t.b===e.b},cc.Acceleration=function(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.timestamp=n||0},cc.Vertex2F=function(t,e,i,n){this._arrayBuffer=i||new ArrayBuffer(cc.Vertex2F.BYTES_PER_ELEMENT),this._offset=n||0,this._view=new Float32Array(this._arrayBuffer,this._offset,2),this._view[0]=t||0,this._view[1]=e||0},cc.Vertex2F.BYTES_PER_ELEMENT=8,_p=cc.Vertex2F.prototype,_p._getX=function(){return this._view[0]},_p._setX=function(t){this._view[0]=t},_p._getY=function(){return this._view[1]},_p._setY=function(t){this._view[1]=t},cc.defineGetterSetter(_p,"x",_p._getX,_p._setX),cc.defineGetterSetter(_p,"y",_p._getY,_p._setY),cc.Vertex3F=function(t,e,i,n,s){this._arrayBuffer=n||new ArrayBuffer(cc.Vertex3F.BYTES_PER_ELEMENT),this._offset=s||0,this._view=new Float32Array(this._arrayBuffer,this._offset,3),this._view[0]=t||0,this._view[1]=e||0,this._view[2]=i||0},cc.Vertex3F.BYTES_PER_ELEMENT=12,_p=cc.Vertex3F.prototype,_p._getX=function(){return this._view[0]},_p._setX=function(t){this._view[0]=t},_p._getY=function(){return this._view[1]},_p._setY=function(t){this._view[1]=t},_p._getZ=function(){return this._view[2]},_p._setZ=function(t){this._view[2]=t},cc.defineGetterSetter(_p,"x",_p._getX,_p._setX),cc.defineGetterSetter(_p,"y",_p._getY,_p._setY),cc.defineGetterSetter(_p,"z",_p._getZ,_p._setZ),cc.Tex2F=function(t,e,i,n){this._arrayBuffer=i||new ArrayBuffer(cc.Tex2F.BYTES_PER_ELEMENT),this._offset=n||0,this._view=new Float32Array(this._arrayBuffer,this._offset,2),this._view[0]=t||0,this._view[1]=e||0},cc.Tex2F.BYTES_PER_ELEMENT=8,_p=cc.Tex2F.prototype,_p._getU=function(){return this._view[0]},_p._setU=function(t){this._view[0]=t},_p._getV=function(){return this._view[1]},_p._setV=function(t){this._view[1]=t},cc.defineGetterSetter(_p,"u",_p._getU,_p._setU),cc.defineGetterSetter(_p,"v",_p._getV,_p._setV),cc.Quad2=function(t,e,i,n,s,r){this._arrayBuffer=s||new ArrayBuffer(cc.Quad2.BYTES_PER_ELEMENT),this._offset=r||0,s=this._arrayBuffer,r=this._offset;var o=cc.Vertex2F.BYTES_PER_ELEMENT;this._tl=t?new cc.Vertex2F(t.x,t.y,s,r):new cc.Vertex2F(0,0,s,r),r+=o,this._tr=e?new cc.Vertex2F(e.x,e.y,s,r):new cc.Vertex2F(0,0,s,r),r+=o,this._bl=i?new cc.Vertex2F(i.x,i.y,s,r):new cc.Vertex2F(0,0,s,r),r+=o,this._br=n?new cc.Vertex2F(n.x,n.y,s,r):new cc.Vertex2F(0,0,s,r)},cc.Quad2.BYTES_PER_ELEMENT=32,_p=cc.Quad2.prototype,_p._getTL=function(){return this._tl},_p._setTL=function(t){this._tl._view[0]=t.x,this._tl._view[1]=t.y},_p._getTR=function(){return this._tr},_p._setTR=function(t){this._tr._view[0]=t.x,this._tr._view[1]=t.y},_p._getBL=function(){return this._bl},_p._setBL=function(t){this._bl._view[0]=t.x,this._bl._view[1]=t.y},_p._getBR=function(){return this._br},_p._setBR=function(t){this._br._view[0]=t.x,this._br._view[1]=t.y},cc.defineGetterSetter(_p,"tl",_p._getTL,_p._setTL),cc.defineGetterSetter(_p,"tr",_p._getTR,_p._setTR),cc.defineGetterSetter(_p,"bl",_p._getBL,_p._setBL),cc.defineGetterSetter(_p,"br",_p._getBR,_p._setBR),cc.Quad3=function(t,e,i,n,s,r){this._arrayBuffer=s||new ArrayBuffer(cc.Quad3.BYTES_PER_ELEMENT),this._offset=r||0,s=this._arrayBuffer,r=this._offset;var o=cc.Vertex3F.BYTES_PER_ELEMENT;this.bl=t?new cc.Vertex3F(t.x,t.y,t.z,s,r):new cc.Vertex3F(0,0,0,s,r),r+=o,this.br=e?new cc.Vertex3F(e.x,e.y,e.z,s,r):new cc.Vertex3F(0,0,0,s,r),r+=o,this.tl=i?new cc.Vertex3F(i.x,i.y,i.z,s,r):new cc.Vertex3F(0,0,0,s,r),r+=o,this.tr=n?new cc.Vertex3F(n.x,n.y,n.z,s,r):new cc.Vertex3F(0,0,0,s,r)},cc.Quad3.BYTES_PER_ELEMENT=48,cc.V3F_C4B_T2F=function(t,e,i,n,s){this._arrayBuffer=n||new ArrayBuffer(cc.V3F_C4B_T2F.BYTES_PER_ELEMENT),this._offset=s||0,n=this._arrayBuffer,s=this._offset,this._vertices=t?new cc.Vertex3F(t.x,t.y,t.z,n,s):new cc.Vertex3F(0,0,0,n,s),s+=cc.Vertex3F.BYTES_PER_ELEMENT,this._colors=e?new cc._WebGLColor(e.r,e.g,e.b,e.a,n,s):new cc._WebGLColor(0,0,0,0,n,s),s+=cc._WebGLColor.BYTES_PER_ELEMENT,this._texCoords=i?new cc.Tex2F(i.u,i.v,n,s):new cc.Tex2F(0,0,n,s)},cc.V3F_C4B_T2F.BYTES_PER_ELEMENT=24,_p=cc.V3F_C4B_T2F.prototype,_p._getVertices=function(){return this._vertices},_p._setVertices=function(t){var e=this._vertices;e._view[0]=t.x,e._view[1]=t.y,e._view[2]=t.z},_p._getColor=function(){return this._colors},_p._setColor=function(t){var e=this._colors;e._view[0]=t.r,e._view[1]=t.g,e._view[2]=t.b,e._view[3]=t.a},_p._getTexCoords=function(){return this._texCoords},_p._setTexCoords=function(t){this._texCoords._view[0]=t.u,this._texCoords._view[1]=t.v},cc.defineGetterSetter(_p,"vertices",_p._getVertices,_p._setVertices),cc.defineGetterSetter(_p,"colors",_p._getColor,_p._setColor),cc.defineGetterSetter(_p,"texCoords",_p._getTexCoords,_p._setTexCoords),cc.V3F_C4B_T2F_Quad=function(t,e,i,n,s,r){this._arrayBuffer=s||new ArrayBuffer(cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT),this._offset=r||0,s=this._arrayBuffer,r=this._offset;var o=cc.V3F_C4B_T2F.BYTES_PER_ELEMENT;this._tl=t?new cc.V3F_C4B_T2F(t.vertices,t.colors,t.texCoords,s,r):new cc.V3F_C4B_T2F(null,null,null,s,r),r+=o,this._bl=e?new cc.V3F_C4B_T2F(e.vertices,e.colors,e.texCoords,s,r):new cc.V3F_C4B_T2F(null,null,null,s,r),r+=o,this._tr=i?new cc.V3F_C4B_T2F(i.vertices,i.colors,i.texCoords,s,r):new cc.V3F_C4B_T2F(null,null,null,s,r),r+=o,this._br=n?new cc.V3F_C4B_T2F(n.vertices,n.colors,n.texCoords,s,r):new cc.V3F_C4B_T2F(null,null,null,s,r)},cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT=96,_p=cc.V3F_C4B_T2F_Quad.prototype,_p._getTL=function(){return this._tl},_p._setTL=function(t){var e=this._tl;e.vertices=t.vertices,e.colors=t.colors,e.texCoords=t.texCoords},_p._getBL=function(){return this._bl},_p._setBL=function(t){var e=this._bl;e.vertices=t.vertices,e.colors=t.colors,e.texCoords=t.texCoords},_p._getTR=function(){return this._tr},_p._setTR=function(t){var e=this._tr;e.vertices=t.vertices,e.colors=t.colors,e.texCoords=t.texCoords},_p._getBR=function(){return this._br},_p._setBR=function(t){var e=this._br;e.vertices=t.vertices,e.colors=t.colors,e.texCoords=t.texCoords},_p._getArrayBuffer=function(){return this._arrayBuffer},cc.defineGetterSetter(_p,"tl",_p._getTL,_p._setTL),cc.defineGetterSetter(_p,"tr",_p._getTR,_p._setTR),cc.defineGetterSetter(_p,"bl",_p._getBL,_p._setBL),cc.defineGetterSetter(_p,"br",_p._getBR,_p._setBR),cc.defineGetterSetter(_p,"arrayBuffer",_p._getArrayBuffer,null),cc.V3F_C4B_T2F_QuadZero=function(){return new cc.V3F_C4B_T2F_Quad},cc.V3F_C4B_T2F_QuadCopy=function(t){if(!t)return cc.V3F_C4B_T2F_QuadZero();var e=t.tl,i=t.bl,n=t.tr;return t=t.br,{tl:{vertices:{x:e.vertices.x,y:e.vertices.y,z:e.vertices.z},colors:{r:e.colors.r,g:e.colors.g,b:e.colors.b,a:e.colors.a},texCoords:{u:e.texCoords.u,v:e.texCoords.v}},bl:{vertices:{x:i.vertices.x,y:i.vertices.y,z:i.vertices.z},colors:{r:i.colors.r,g:i.colors.g,b:i.colors.b,a:i.colors.a},texCoords:{u:i.texCoords.u,v:i.texCoords.v}},tr:{vertices:{x:n.vertices.x,y:n.vertices.y,z:n.vertices.z},colors:{r:n.colors.r,g:n.colors.g,b:n.colors.b,a:n.colors.a},texCoords:{u:n.texCoords.u,v:n.texCoords.v}},br:{vertices:{x:t.vertices.x,y:t.vertices.y,z:t.vertices.z},colors:{r:t.colors.r,g:t.colors.g,b:t.colors.b,a:t.colors.a},texCoords:{u:t.texCoords.u,v:t.texCoords.v}}}},cc.V3F_C4B_T2F_QuadsCopy=function(t){if(!t)return[];for(var e=[],i=0;i<t.length;i++)e.push(cc.V3F_C4B_T2F_QuadCopy(t[i]));return e},cc.V2F_C4B_T2F=function(t,e,i,n,s){this._arrayBuffer=n||new ArrayBuffer(cc.V2F_C4B_T2F.BYTES_PER_ELEMENT),this._offset=s||0,n=this._arrayBuffer,s=this._offset,this._vertices=t?new cc.Vertex2F(t.x,t.y,n,s):new cc.Vertex2F(0,0,n,s),s+=cc.Vertex2F.BYTES_PER_ELEMENT,this._colors=e?new cc._WebGLColor(e.r,e.g,e.b,e.a,n,s):new cc._WebGLColor(0,0,0,0,n,s),s+=cc._WebGLColor.BYTES_PER_ELEMENT,this._texCoords=i?new cc.Tex2F(i.u,i.v,n,s):new cc.Tex2F(0,0,n,s)},cc.V2F_C4B_T2F.BYTES_PER_ELEMENT=20,_p=cc.V2F_C4B_T2F.prototype,_p._getVertices=function(){return this._vertices},_p._setVertices=function(t){this._vertices._view[0]=t.x,this._vertices._view[1]=t.y},_p._getColor=function(){return this._colors},_p._setColor=function(t){var e=this._colors;e._view[0]=t.r,e._view[1]=t.g,e._view[2]=t.b,e._view[3]=t.a},_p._getTexCoords=function(){return this._texCoords},_p._setTexCoords=function(t){this._texCoords._view[0]=t.u,this._texCoords._view[1]=t.v},cc.defineGetterSetter(_p,"vertices",_p._getVertices,_p._setVertices),cc.defineGetterSetter(_p,"colors",_p._getColor,_p._setColor),cc.defineGetterSetter(_p,"texCoords",_p._getTexCoords,_p._setTexCoords),cc.V2F_C4B_T2F_Triangle=function(t,e,i,n,s){this._arrayBuffer=n||new ArrayBuffer(cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT),this._offset=s||0,n=this._arrayBuffer,s=this._offset;var r=cc.V2F_C4B_T2F.BYTES_PER_ELEMENT;this._a=t?new cc.V2F_C4B_T2F(t.vertices,t.colors,t.texCoords,n,s):new cc.V2F_C4B_T2F(null,null,null,n,s),s+=r,this._b=e?new cc.V2F_C4B_T2F(e.vertices,e.colors,e.texCoords,n,s):new cc.V2F_C4B_T2F(null,null,null,n,s),s+=r,this._c=i?new cc.V2F_C4B_T2F(i.vertices,i.colors,i.texCoords,n,s):new cc.V2F_C4B_T2F(null,null,null,n,s)},cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT=60,_p=cc.V2F_C4B_T2F_Triangle.prototype,_p._getA=function(){return this._a},_p._setA=function(t){var e=this._a;e.vertices=t.vertices,e.colors=t.colors,e.texCoords=t.texCoords},_p._getB=function(){return this._b},_p._setB=function(t){var e=this._b;e.vertices=t.vertices,e.colors=t.colors,e.texCoords=t.texCoords},_p._getC=function(){return this._c},_p._setC=function(t){var e=this._c;e.vertices=t.vertices,e.colors=t.colors,e.texCoords=t.texCoords},cc.defineGetterSetter(_p,"a",_p._getA,_p._setA),cc.defineGetterSetter(_p,"b",_p._getB,_p._setB),cc.defineGetterSetter(_p,"c",_p._getC,_p._setC),cc.vertex2=function(t,e){return new cc.Vertex2F(t,e)},cc.vertex3=function(t,e,i){return new cc.Vertex3F(t,e,i)},cc.tex2=function(t,e){return new cc.Tex2F(t,e)},cc.BlendFunc=function(t,e){this.src=t,this.dst=e},cc.blendFuncDisable=function(){return new cc.BlendFunc(cc.ONE,cc.ZERO)},cc.hexToColor=function(t){return t=t.replace(/^#?/,"0x"),t=parseInt(t),new cc.Color(t>>16,(t>>8)%256,t%256)},cc.colorToHex=function(t){var e=t.r.toString(16),i=t.g.toString(16),n=t.b.toString(16);return"#"+(16>t.r?"0"+e:e)+(16>t.g?"0"+i:i)+(16>t.b?"0"+n:n)},cc.TEXT_ALIGNMENT_LEFT=0,cc.TEXT_ALIGNMENT_CENTER=1,cc.TEXT_ALIGNMENT_RIGHT=2,cc.VERTICAL_TEXT_ALIGNMENT_TOP=0,cc.VERTICAL_TEXT_ALIGNMENT_CENTER=1,cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM=2,cc._Dictionary=cc.Class.extend({_keyMapTb:null,_valueMapTb:null,__currId:0,ctor:function(){this._keyMapTb={},this._valueMapTb={},this.__currId=2<<(0|10*Math.random())},__getKey:function(){return this.__currId++,"key_"+this.__currId},setObject:function(t,e){if(null!=e){var i=this.__getKey();this._keyMapTb[i]=e,this._valueMapTb[i]=t}},objectForKey:function(t){if(null==t)return null;var e,i=this._keyMapTb;for(e in i)if(i[e]===t)return this._valueMapTb[e];return null},valueForKey:function(t){return this.objectForKey(t)},removeObjectForKey:function(t){if(null!=t){var e,i=this._keyMapTb;for(e in i)if(i[e]===t){delete this._valueMapTb[e],delete i[e];break}}},removeObjectsForKeys:function(t){if(null!=t)for(var e=0;e<t.length;e++)this.removeObjectForKey(t[e])},allKeys:function(){var t,e=[],i=this._keyMapTb;for(t in i)e.push(i[t]);return e},removeAllObjects:function(){this._keyMapTb={},this._valueMapTb={}},count:function(){return this.allKeys().length}}),cc.FontDefinition=function(t){if(this.fontName="Arial",this.fontSize=12,this.textAlign=cc.TEXT_ALIGNMENT_CENTER,this.verticalAlign=cc.VERTICAL_TEXT_ALIGNMENT_TOP,this.fillStyle=cc.color(255,255,255,255),this.boundingHeight=this.boundingWidth=0,this.strokeEnabled=!1,this.strokeStyle=cc.color(255,255,255,255),this.lineWidth=1,this.fontWeight=this.fontStyle=this.lineHeight="normal",this.shadowEnabled=!1,this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0,this.shadowOpacity=1,t&&t instanceof Object)for(var e in t)this[e]=t[e]},cc.FontDefinition.prototype._getCanvasFontStr=function(){return this.fontStyle+" "+this.fontWeight+" "+this.fontSize+"px/"+(this.lineHeight.charAt?this.lineHeight:this.lineHeight+"px")+" '"+this.fontName+"'"},cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,(function(){cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(cc._WebGLColor=function(t,e,i,n,s,r){this._arrayBuffer=s||new ArrayBuffer(cc._WebGLColor.BYTES_PER_ELEMENT),this._offset=r||0,this._view=new Uint8Array(this._arrayBuffer,this._offset,4),this._view[0]=t||0,this._view[1]=e||0,this._view[2]=i||0,this._view[3]=null==n?255:n,void 0===n&&(this.a_undefined=!0)},cc._WebGLColor.BYTES_PER_ELEMENT=4,(_p=cc._WebGLColor.prototype)._getR=function(){return this._view[0]},_p._setR=function(t){this._view[0]=0>t?0:t},_p._getG=function(){return this._view[1]},_p._setG=function(t){this._view[1]=0>t?0:t},_p._getB=function(){return this._view[2]},_p._setB=function(t){this._view[2]=0>t?0:t},_p._getA=function(){return this._view[3]},_p._setA=function(t){this._view[3]=0>t?0:t},cc.defineGetterSetter(_p,"r",_p._getR,_p._setR),cc.defineGetterSetter(_p,"g",_p._getG,_p._setG),cc.defineGetterSetter(_p,"b",_p._getB,_p._setB),cc.defineGetterSetter(_p,"a",_p._getA,_p._setA))})),_p=cc.color,_p._getWhite=function(){return cc.color(255,255,255)},_p._getYellow=function(){return cc.color(255,255,0)},_p._getBlue=function(){return cc.color(0,0,255)},_p._getGreen=function(){return cc.color(0,255,0)},_p._getRed=function(){return cc.color(255,0,0)},_p._getMagenta=function(){return cc.color(255,0,255)},_p._getBlack=function(){return cc.color(0,0,0)},_p._getOrange=function(){return cc.color(255,127,0)},_p._getGray=function(){return cc.color(166,166,166)},cc.defineGetterSetter(_p,"WHITE",_p._getWhite),cc.defineGetterSetter(_p,"YELLOW",_p._getYellow),cc.defineGetterSetter(_p,"BLUE",_p._getBlue),cc.defineGetterSetter(_p,"GREEN",_p._getGreen),cc.defineGetterSetter(_p,"RED",_p._getRed),cc.defineGetterSetter(_p,"MAGENTA",_p._getMagenta),cc.defineGetterSetter(_p,"BLACK",_p._getBlack),cc.defineGetterSetter(_p,"ORANGE",_p._getOrange),cc.defineGetterSetter(_p,"GRAY",_p._getGray),cc.BlendFunc._disable=function(){return new cc.BlendFunc(cc.ONE,cc.ZERO)},cc.BlendFunc._alphaPremultiplied=function(){return new cc.BlendFunc(cc.ONE,cc.ONE_MINUS_SRC_ALPHA)},cc.BlendFunc._alphaNonPremultiplied=function(){return new cc.BlendFunc(cc.SRC_ALPHA,cc.ONE_MINUS_SRC_ALPHA)},cc.BlendFunc._additive=function(){return new cc.BlendFunc(cc.SRC_ALPHA,cc.ONE)},cc.defineGetterSetter(cc.BlendFunc,"DISABLE",cc.BlendFunc._disable),cc.defineGetterSetter(cc.BlendFunc,"ALPHA_PREMULTIPLIED",cc.BlendFunc._alphaPremultiplied),cc.defineGetterSetter(cc.BlendFunc,"ALPHA_NON_PREMULTIPLIED",cc.BlendFunc._alphaNonPremultiplied),cc.defineGetterSetter(cc.BlendFunc,"ADDITIVE",cc.BlendFunc._additive),cc.Touches=[],cc.TouchesIntergerDict={},cc.DENSITYDPI_DEVICE="device-dpi",cc.DENSITYDPI_HIGH="high-dpi",cc.DENSITYDPI_MEDIUM="medium-dpi",cc.DENSITYDPI_LOW="low-dpi";var __BrowserGetter={init:function(){this.html=document.documentElement},availWidth:function(t){return t&&t!==this.html?t.clientWidth:window.innerWidth},availHeight:function(t){return t&&t!==this.html?t.clientHeight:window.innerHeight},meta:{width:"device-width"},adaptationType:cc.sys.browserType};switch(-1<window.navigator.userAgent.indexOf("OS 8_1_")&&(__BrowserGetter.adaptationType=cc.sys.BROWSER_TYPE_MIUI),cc.sys.os===cc.sys.OS_IOS&&(__BrowserGetter.adaptationType=cc.sys.BROWSER_TYPE_SAFARI),__BrowserGetter.adaptationType){case cc.sys.BROWSER_TYPE_SAFARI:__BrowserGetter.meta["minimal-ui"]="true";break;case cc.sys.BROWSER_TYPE_CHROME:__BrowserGetter.__defineGetter__("target-densitydpi",(function(){return cc.view._targetDensityDPI}));break;case cc.sys.BROWSER_TYPE_MIUI:__BrowserGetter.init=function(t){if(!t.__resizeWithBrowserSize){var e=function(){t.setDesignResolutionSize(t._designResolutionSize.width,t._designResolutionSize.height,t._resolutionPolicy),window.removeEventListener("resize",e,!1)};window.addEventListener("resize",e,!1)}}}var _scissorRect=null;cc.EGLView=cc.Class.extend({_delegate:null,_frameSize:null,_designResolutionSize:null,_originalDesignResolutionSize:null,_viewPortRect:null,_visibleRect:null,_retinaEnabled:!1,_autoFullScreen:!1,_devicePixelRatio:1,_viewName:"",_resizeCallback:null,_orientationChanging:!0,_resizing:!1,_scaleX:1,_originalScaleX:1,_scaleY:1,_originalScaleY:1,_isRotated:!1,_orientation:3,_resolutionPolicy:null,_rpExactFit:null,_rpShowAll:null,_rpNoBorder:null,_rpFixedHeight:null,_rpFixedWidth:null,_initialized:!1,_contentTranslateLeftTop:null,_frame:null,_frameZoomFactor:1,__resizeWithBrowserSize:!1,_isAdjustViewPort:!0,_targetDensityDPI:null,ctor:function(){var t=document,e=cc.ContainerStrategy,i=cc.ContentStrategy;__BrowserGetter.init(this),this._frame=cc.container.parentNode===t.body?t.documentElement:cc.container.parentNode,this._frameSize=cc.size(0,0),this._initFrameSize();t=cc._canvas.width;var n=cc._canvas.height;this._designResolutionSize=cc.size(t,n),this._originalDesignResolutionSize=cc.size(t,n),this._viewPortRect=cc.rect(0,0,t,n),this._visibleRect=cc.rect(0,0,t,n),this._contentTranslateLeftTop={left:0,top:0},this._viewName="Cocos2dHTML5",t=cc.sys,cc.visibleRect&&cc.visibleRect.init(this._visibleRect),this._rpExactFit=new cc.ResolutionPolicy(e.EQUAL_TO_FRAME,i.EXACT_FIT),this._rpShowAll=new cc.ResolutionPolicy(e.PROPORTION_TO_FRAME,i.SHOW_ALL),this._rpNoBorder=new cc.ResolutionPolicy(e.EQUAL_TO_FRAME,i.NO_BORDER),this._rpFixedHeight=new cc.ResolutionPolicy(e.EQUAL_TO_FRAME,i.FIXED_HEIGHT),this._rpFixedWidth=new cc.ResolutionPolicy(e.EQUAL_TO_FRAME,i.FIXED_WIDTH),this._targetDensityDPI=cc.DENSITYDPI_HIGH,t.isMobile&&window.addEventListener("orientationchange",this._orientationChange)},_resizeEvent:function(){var t;if(!(t=this.setDesignResolutionSize?this:cc.view)._orientationChanging){var e=t._frameSize.width,i=t._frameSize.height,n=t._isRotated;if(cc.sys.isMobile){var s=cc.game.container.style,r=s.margin;s.margin="0",s.display="none",t._initFrameSize(),s.margin=r,s.display="block"}else t._initFrameSize();t._isRotated===n&&t._frameSize.width===e&&t._frameSize.height===i||(e=t._originalDesignResolutionSize.width,i=t._originalDesignResolutionSize.height,t._resizing=!0,0<e&&t.setDesignResolutionSize(e,i,t._resolutionPolicy),t._resizing=!1,cc.eventManager.dispatchCustomEvent("canvas-resize"),t._resizeCallback&&t._resizeCallback.call())}},_orientationChange:function(){cc.view._orientationChanging=!0,cc.sys.isMobile&&(cc.game.container.style.display="none"),setTimeout((function(){cc.view._orientationChanging=!1,cc.view._resizeEvent()}),300)},setTargetDensityDPI:function(t){this._targetDensityDPI=t,this._adjustViewportMeta()},getTargetDensityDPI:function(){return this._targetDensityDPI},resizeWithBrowserSize:function(t){t?this.__resizeWithBrowserSize||(this.__resizeWithBrowserSize=!0,window.addEventListener("resize",this._resizeEvent)):this.__resizeWithBrowserSize&&(this.__resizeWithBrowserSize=!1,window.removeEventListener("resize",this._resizeEvent))},setResizeCallback:function(t){"function"!=typeof t&&null!=t||(this._resizeCallback=t)},setOrientation:function(t){(t&=cc.ORIENTATION_AUTO)&&this._orientation!==t&&(this._orientation=t,this._resolutionPolicy&&this.setDesignResolutionSize(this._originalDesignResolutionSize.width,this._originalDesignResolutionSize.height,this._resolutionPolicy))},setDocumentPixelWidth:function(t){this._setViewportMeta({width:t},!0),document.documentElement.style.width=t+"px",document.body.style.width="100%",this.setDesignResolutionSize(this._designResolutionSize.width,this._designResolutionSize.height,this._resolutionPolicy)},_initFrameSize:function(){var t=this._frameSize,e=__BrowserGetter.availWidth(this._frame),i=__BrowserGetter.availHeight(this._frame),n=e>=i;!cc.sys.isMobile||n&&this._orientation&cc.ORIENTATION_LANDSCAPE||!n&&this._orientation&cc.ORIENTATION_PORTRAIT?(t.width=e,t.height=i,cc.container.style["-webkit-transform"]="rotate(0deg)",cc.container.style.transform="rotate(0deg)",this._isRotated=!1):(t.width=i,t.height=e,cc.container.style["-webkit-transform"]="rotate(90deg)",cc.container.style.transform="rotate(90deg)",cc.container.style["-webkit-transform-origin"]="0px 0px 0px",cc.container.style.transformOrigin="0px 0px 0px",this._isRotated=!0)},_adjustSizeKeepCanvasSize:function(){var t=this._originalDesignResolutionSize.width,e=this._originalDesignResolutionSize.height;0<t&&this.setDesignResolutionSize(t,e,this._resolutionPolicy)},_setViewportMeta:function(t,e){var i=document.getElementById("cocosMetaElement");i&&e&&document.head.removeChild(i);var n,s,r,o=(o=document.getElementsByName("viewport"))?o[0]:null;for(s in n=o?o.content:"",(i=i||document.createElement("meta")).id="cocosMetaElement",i.name="viewport",i.content="",t)-1==n.indexOf(s)?n+=","+s+"="+t[s]:e&&(r=RegExp(s+"s*=s*[^,]+"),n.replace(r,s+"="+t[s]));/^,/.test(n)&&(n=n.substr(1)),i.content=n,o&&(o.content=n),document.head.appendChild(i)},_adjustViewportMeta:function(){this._isAdjustViewPort&&(this._setViewportMeta(__BrowserGetter.meta,!1),this._isAdjustViewPort=!1)},_setScaleXYForRenderTexture:function(){var t=cc.contentScaleFactor();this._scaleY=this._scaleX=t},_resetScale:function(){this._scaleX=this._originalScaleX,this._scaleY=this._originalScaleY},_adjustSizeToBrowser:function(){},initialize:function(){this._initialized=!0},adjustViewPort:function(t){this._isAdjustViewPort=t},enableRetina:function(t){this._retinaEnabled=!!t},isRetinaEnabled:function(){return this._retinaEnabled},enableAutoFullScreen:function(t){t&&t!==this._autoFullScreen&&cc.sys.isMobile&&this._frame===document.documentElement?(this._autoFullScreen=!0,cc.screen.autoFullScreen(this._frame)):this._autoFullScreen=!1},isAutoFullScreenEnabled:function(){return this._autoFullScreen},isOpenGLReady:function(){return cc.game.canvas&&cc._renderContext},setFrameZoomFactor:function(t){this._frameZoomFactor=t,this.centerWindow(),cc.director.setProjection(cc.director.getProjection())},swapBuffers:function(){},setIMEKeyboardState:function(t){},setContentTranslateLeftTop:function(t,e){this._contentTranslateLeftTop={left:t,top:e}},getContentTranslateLeftTop:function(){return this._contentTranslateLeftTop},getCanvasSize:function(){return cc.size(cc._canvas.width,cc._canvas.height)},getFrameSize:function(){return cc.size(this._frameSize.width,this._frameSize.height)},setFrameSize:function(t,e){this._frameSize.width=t,this._frameSize.height=e,this._frame.style.width=t+"px",this._frame.style.height=e+"px",this._resizeEvent(),cc.director.setProjection(cc.director.getProjection())},getVisibleSize:function(){return cc.size(this._visibleRect.width,this._visibleRect.height)},getVisibleSizeInPixel:function(){return cc.size(this._visibleRect.width*this._scaleX,this._visibleRect.height*this._scaleY)},getVisibleOrigin:function(){return cc.p(this._visibleRect.x,this._visibleRect.y)},getVisibleOriginInPixel:function(){return cc.p(this._visibleRect.x*this._scaleX,this._visibleRect.y*this._scaleY)},canSetContentScaleFactor:function(){return!0},getResolutionPolicy:function(){return this._resolutionPolicy},setResolutionPolicy:function(t){if(t instanceof cc.ResolutionPolicy)this._resolutionPolicy=t;else{var e=cc.ResolutionPolicy;t===e.EXACT_FIT&&(this._resolutionPolicy=this._rpExactFit),t===e.SHOW_ALL&&(this._resolutionPolicy=this._rpShowAll),t===e.NO_BORDER&&(this._resolutionPolicy=this._rpNoBorder),t===e.FIXED_HEIGHT&&(this._resolutionPolicy=this._rpFixedHeight),t===e.FIXED_WIDTH&&(this._resolutionPolicy=this._rpFixedWidth)}},setDesignResolutionSize:function(t,e,i){if(0<t||0<e)if(this.setResolutionPolicy(i),(i=this._resolutionPolicy)&&i.preApply(this),cc.sys.isMobile&&this._adjustViewportMeta(),this._resizing||this._initFrameSize(),i){this._originalDesignResolutionSize.width=this._designResolutionSize.width=t,this._originalDesignResolutionSize.height=this._designResolutionSize.height=e;var n=i.apply(this,this._designResolutionSize);n.scale&&2===n.scale.length&&(this._scaleX=n.scale[0],this._scaleY=n.scale[1]),n.viewport&&(t=this._viewPortRect,e=this._visibleRect,n=n.viewport,t.x=n.x,t.y=n.y,t.width=n.width,t.height=n.height,e.x=-t.x/this._scaleX,e.y=-t.y/this._scaleY,e.width=cc._canvas.width/this._scaleX,e.height=cc._canvas.height/this._scaleY,cc._renderContext.setOffset&&cc._renderContext.setOffset(t.x,-t.y)),(t=cc.director)._winSizeInPoints.width=this._designResolutionSize.width,t._winSizeInPoints.height=this._designResolutionSize.height,i.postApply(this),cc.winSize.width=t._winSizeInPoints.width,cc.winSize.height=t._winSizeInPoints.height,cc._renderType===cc.game.RENDER_TYPE_WEBGL?t.setGLDefaultValues():cc._renderType===cc.game.RENDER_TYPE_CANVAS&&(cc.renderer._allNeedDraw=!0),this._originalScaleX=this._scaleX,this._originalScaleY=this._scaleY,cc.visibleRect&&cc.visibleRect.init(this._visibleRect)}else cc.log(cc._LogInfos.EGLView_setDesignResolutionSize_2);else cc.log(cc._LogInfos.EGLView_setDesignResolutionSize)},getDesignResolutionSize:function(){return cc.size(this._designResolutionSize.width,this._designResolutionSize.height)},setRealPixelResolution:function(t,e,i){this._setViewportMeta({width:t},!0),document.documentElement.style.width=t+"px",document.body.style.width=t+"px",document.body.style.left="0px",document.body.style.top="0px",this.setDesignResolutionSize(t,e,i)},setViewPortInPoints:function(t,e,i,n){var s=this._frameZoomFactor,r=this._scaleX,o=this._scaleY;cc._renderContext.viewport(t*r*s+this._viewPortRect.x*s,e*o*s+this._viewPortRect.y*s,i*r*s,n*o*s)},setScissorInPoints:function(t,e,i,n){var s=this._frameZoomFactor,r=this._scaleX,o=this._scaleY;t=Math.ceil(t*r*s+this._viewPortRect.x*s),e=Math.ceil(e*o*s+this._viewPortRect.y*s),i=Math.ceil(i*r*s),n=Math.ceil(n*o*s),_scissorRect||(s=gl.getParameter(gl.SCISSOR_BOX),_scissorRect=cc.rect(s[0],s[1],s[2],s[3])),_scissorRect.x==t&&_scissorRect.y==e&&_scissorRect.width==i&&_scissorRect.height==n||(_scissorRect.x=t,_scissorRect.y=e,_scissorRect.width=i,_scissorRect.height=n,cc._renderContext.scissor(t,e,i,n))},isScissorEnabled:function(){return cc._renderContext.isEnabled(gl.SCISSOR_TEST)},getScissorRect:function(){if(!_scissorRect){var t=gl.getParameter(gl.SCISSOR_BOX);_scissorRect=cc.rect(t[0],t[1],t[2],t[3])}t=1/this._scaleX;var e=1/this._scaleY;return cc.rect((_scissorRect.x-this._viewPortRect.x)*t,(_scissorRect.y-this._viewPortRect.y)*e,_scissorRect.width*t,_scissorRect.height*e)},setViewName:function(t){null!=t&&0<t.length&&(this._viewName=t)},getViewName:function(){return this._viewName},getViewPortRect:function(){return this._viewPortRect},getScaleX:function(){return this._scaleX},getScaleY:function(){return this._scaleY},getDevicePixelRatio:function(){return this._devicePixelRatio},convertToLocationInView:function(t,e,i){return t=this._devicePixelRatio*(t-i.left),e=this._devicePixelRatio*(i.top+i.height-e),this._isRotated?{x:this._viewPortRect.width-e,y:t}:{x:t,y:e}},_convertMouseToLocationInView:function(t,e){var i=this._viewPortRect;t.x=(this._devicePixelRatio*(t.x-e.left)-i.x)/this._scaleX,t.y=(this._devicePixelRatio*(e.top+e.height-t.y)-i.y)/this._scaleY},_convertPointWithScale:function(t){var e=this._viewPortRect;t.x=(t.x-e.x)/this._scaleX,t.y=(t.y-e.y)/this._scaleY},_convertTouchesWithScale:function(t){for(var e,i,n=this._viewPortRect,s=this._scaleX,r=this._scaleY,o=0;o<t.length;o++)i=(e=t[o])._point,e=e._prevPoint,i.x=(i.x-n.x)/s,i.y=(i.y-n.y)/r,e.x=(e.x-n.x)/s,e.y=(e.y-n.y)/r}}),cc.EGLView._getInstance=function(){return this._instance||(this._instance=this._instance||new cc.EGLView,this._instance.initialize()),this._instance},cc.ContainerStrategy=cc.Class.extend({preApply:function(t){},apply:function(t,e){},postApply:function(t){},_setupContainer:function(t,e,i){var n=cc.game.canvas,s=cc.game.container;cc.sys.os===cc.sys.OS_ANDROID&&(document.body.style.width=(t._isRotated?i:e)+"px",document.body.style.height=(t._isRotated?e:i)+"px"),s.style.width=n.style.width=e+"px",s.style.height=n.style.height=i+"px",s=t._devicePixelRatio=1,t.isRetinaEnabled()&&(s=t._devicePixelRatio=Math.min(2,window.devicePixelRatio||1)),n.width=e*s,n.height=i*s,cc._renderContext.resetCache&&cc._renderContext.resetCache()},_fixContainer:function(){document.body.insertBefore(cc.container,document.body.firstChild);var t=document.body.style;t.width=window.innerWidth+"px",t.height=window.innerHeight+"px",t.overflow="hidden",(t=cc.container.style).position="fixed",t.left=t.top="0px",document.body.scrollTop=0}}),cc.ContentStrategy=cc.Class.extend({_result:{scale:[1,1],viewport:null},_buildResult:function(t,e,i,n,s,r){return 2>Math.abs(t-i)&&(i=t),2>Math.abs(e-n)&&(n=e),t=cc.rect(Math.round((t-i)/2),Math.round((e-n)/2),i,n),this._result.scale=[s,r],this._result.viewport=t,this._result},preApply:function(t){},apply:function(t,e){return{scale:[1,1]}},postApply:function(t){}}),function(){var t=cc.ContainerStrategy.extend({apply:function(t){var e=t._frameSize.height,i=cc.container.style;this._setupContainer(t,t._frameSize.width,t._frameSize.height),i.margin=t._isRotated?"0 0 0 "+e+"px":"0px"}}),e=cc.ContainerStrategy.extend({apply:function(t,e){var i,n,s=t._frameSize.width,r=t._frameSize.height,o=cc.container.style,a=e.width,c=e.height,h=s/a,l=r/c;h<l?(i=s,n=c*h):(i=a*l,n=r),a=Math.round((s-i)/2),n=Math.round((r-n)/2),this._setupContainer(t,s-2*a,r-2*n),o.margin=t._isRotated?"0 0 0 "+r+"px":"0px",o.paddingLeft=a+"px",o.paddingRight=a+"px",o.paddingTop=n+"px",o.paddingBottom=n+"px"}});t.extend({preApply:function(t){this._super(t),t._frame=document.documentElement},apply:function(t){this._super(t),this._fixContainer()}}),e.extend({preApply:function(t){this._super(t),t._frame=document.documentElement},apply:function(t,e){this._super(t,e),this._fixContainer()}});var i=cc.ContainerStrategy.extend({apply:function(t){this._setupContainer(t,cc._canvas.width,cc._canvas.height)}});cc.ContainerStrategy.EQUAL_TO_FRAME=new t,cc.ContainerStrategy.PROPORTION_TO_FRAME=new e,cc.ContainerStrategy.ORIGINAL_CONTAINER=new i;t=cc.ContentStrategy.extend({apply:function(t,e){var i=cc._canvas.width,n=cc._canvas.height;return this._buildResult(i,n,i,n,i/e.width,n/e.height)}}),e=cc.ContentStrategy.extend({apply:function(t,e){var i,n,s=cc._canvas.width,r=cc._canvas.height,o=e.width,a=e.height,c=s/o,h=r/a,l=0;return c<h?(i=s,n=a*(l=c)):(i=o*(l=h),n=r),this._buildResult(s,r,i,n,l,l)}}),i=cc.ContentStrategy.extend({apply:function(t,e){var i,n,s,r=cc._canvas.width,o=cc._canvas.height,a=e.width,c=e.height,h=r/a,l=o/c;return h<l?(n=a*(i=l),s=o):(n=r,s=c*(i=h)),this._buildResult(r,o,n,s,i,i)}});var n=cc.ContentStrategy.extend({apply:function(t,e){var i=cc._canvas.width,n=cc._canvas.height,s=n/e.height;return this._buildResult(i,n,i,n,s,s)},postApply:function(t){cc.director._winSizeInPoints=t.getVisibleSize()}}),s=cc.ContentStrategy.extend({apply:function(t,e){var i=cc._canvas.width,n=cc._canvas.height,s=i/e.width;return this._buildResult(i,n,i,n,s,s)},postApply:function(t){cc.director._winSizeInPoints=t.getVisibleSize()}});cc.ContentStrategy.EXACT_FIT=new t,cc.ContentStrategy.SHOW_ALL=new e,cc.ContentStrategy.NO_BORDER=new i,cc.ContentStrategy.FIXED_HEIGHT=new n,cc.ContentStrategy.FIXED_WIDTH=new s}(),cc.ResolutionPolicy=cc.Class.extend({_containerStrategy:null,_contentStrategy:null,ctor:function(t,e){this.setContainerStrategy(t),this.setContentStrategy(e)},preApply:function(t){this._containerStrategy.preApply(t),this._contentStrategy.preApply(t)},apply:function(t,e){return this._containerStrategy.apply(t,e),this._contentStrategy.apply(t,e)},postApply:function(t){this._containerStrategy.postApply(t),this._contentStrategy.postApply(t)},setContainerStrategy:function(t){t instanceof cc.ContainerStrategy&&(this._containerStrategy=t)},setContentStrategy:function(t){t instanceof cc.ContentStrategy&&(this._contentStrategy=t)}}),cc.ResolutionPolicy.EXACT_FIT=0,cc.ResolutionPolicy.NO_BORDER=1,cc.ResolutionPolicy.SHOW_ALL=2,cc.ResolutionPolicy.FIXED_HEIGHT=3,cc.ResolutionPolicy.FIXED_WIDTH=4,cc.ResolutionPolicy.UNKNOWN=5,cc.screen={_supportsFullScreen:!1,_preOnFullScreenChange:null,_touchEvent:"",_fn:null,_fnMap:[["requestFullscreen","exitFullscreen","fullscreenchange","fullscreenEnabled","fullscreenElement"],["requestFullScreen","exitFullScreen","fullScreenchange","fullScreenEnabled","fullScreenElement"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange","webkitIsFullScreen","webkitCurrentFullScreenElement"],["mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozFullScreen","mozFullScreenElement"],["msRequestFullscreen","msExitFullscreen","MSFullscreenChange","msFullscreenEnabled","msFullscreenElement"]],init:function(){this._fn={};var t,e,i,n=this._fnMap;for(t=0,l=n.length;t<l;t++)if((e=n[t])&&e[1]in document){for(t=0,i=e.length;t<i;t++)this._fn[n[0][t]]=e[t];break}this._supportsFullScreen=void 0!==this._fn.requestFullscreen,this._touchEvent="ontouchstart"in window?"touchstart":"mousedown"},fullScreen:function(){return!!this._supportsFullScreen&&(void 0!==document[this._fn.fullscreenElement]&&null!==document[this._fn.fullscreenElement])},requestFullScreen:function(t,e){if(this._supportsFullScreen){if(t=t||document.documentElement,e){var i=this._fn.fullscreenchange;this._preOnFullScreenChange&&document.removeEventListener(i,this._preOnFullScreenChange),this._preOnFullScreenChange=e,document.addEventListener(i,e,!1)}return t[this._fn.requestFullscreen]()}},exitFullScreen:function(){return!this._supportsFullScreen||document[this._fn.exitFullscreen]()},autoFullScreen:function(t,e){t=t||document.body;var i=cc.game.canvas||t,n=this;this.requestFullScreen(t,e),i.addEventListener(this._touchEvent,(function s(){i.removeEventListener(n._touchEvent,s),n.requestFullScreen(t,e)}))}},cc.screen.init(),cc.visibleRect={topLeft:cc.p(0,0),topRight:cc.p(0,0),top:cc.p(0,0),bottomLeft:cc.p(0,0),bottomRight:cc.p(0,0),bottom:cc.p(0,0),center:cc.p(0,0),left:cc.p(0,0),right:cc.p(0,0),width:0,height:0,init:function(t){var e=this.width=t.width,i=this.height=t.height,n=t.x,s=(t=t.y)+i,r=n+e;this.topLeft.x=n,this.topLeft.y=s,this.topRight.x=r,this.topRight.y=s,this.top.x=n+e/2,this.top.y=s,this.bottomLeft.x=n,this.bottomLeft.y=t,this.bottomRight.x=r,this.bottomRight.y=t,this.bottom.x=n+e/2,this.bottom.y=t,this.center.x=n+e/2,this.center.y=t+i/2,this.left.x=n,this.left.y=t+i/2,this.right.x=r,this.right.y=t+i/2}},cc.UIInterfaceOrientationLandscapeLeft=-90,cc.UIInterfaceOrientationLandscapeRight=90,cc.UIInterfaceOrientationPortraitUpsideDown=180,cc.UIInterfaceOrientationPortrait=0,cc.inputManager={TOUCH_TIMEOUT:5e3,_mousePressed:!1,_isRegisterEvent:!1,_preTouchPoint:cc.p(0,0),_prevMousePoint:cc.p(0,0),_preTouchPool:[],_preTouchPoolPointer:0,_touches:[],_touchesIntegerDict:{},_indexBitsUsed:0,_maxTouches:5,_accelEnabled:!1,_accelInterval:1/30,_accelMinus:1,_accelCurTime:0,_acceleration:null,_accelDeviceEvent:null,_getUnUsedIndex:function(){for(var t=this._indexBitsUsed,e=cc.sys.now(),i=0;i<this._maxTouches;i++){if(!(1&t))return this._indexBitsUsed|=1<<i,i;var n=this._touches[i];if(e-n._lastModified>this.TOUCH_TIMEOUT)return this._removeUsedIndexBit(i),delete this._touchesIntegerDict[n.getID()],i;t>>=1}return-1},_removeUsedIndexBit:function(t){0>t||t>=this._maxTouches||(t=~(1<<t),this._indexBitsUsed&=t)},_glView:null,handleTouchesBegin:function(t){for(var e,i,n,s=[],r=this._touchesIntegerDict,o=cc.sys.now(),a=0,c=t.length;a<c;a++)if(null==(i=r[n=(e=t[a]).getID()])){var h=this._getUnUsedIndex();-1===h?cc.log(cc._LogInfos.inputManager_handleTouchesBegin,h):((i=this._touches[h]=new cc.Touch(e._point.x,e._point.y,e.getID()))._lastModified=o,i._setPrevPoint(e._prevPoint),r[n]=h,s.push(i))}0<s.length&&(this._glView._convertTouchesWithScale(s),(t=new cc.EventTouch(s))._eventCode=cc.EventTouch.EventCode.BEGAN,cc.eventManager.dispatchEvent(t))},handleTouchesMove:function(t){for(var e,i,n=[],s=this._touches,r=cc.sys.now(),o=0,a=t.length;o<a;o++)i=(e=t[o]).getID(),null!=(i=this._touchesIntegerDict[i])&&s[i]&&(s[i]._setPoint(e._point),s[i]._setPrevPoint(e._prevPoint),s[i]._lastModified=r,n.push(s[i]));0<n.length&&(this._glView._convertTouchesWithScale(n),(t=new cc.EventTouch(n))._eventCode=cc.EventTouch.EventCode.MOVED,cc.eventManager.dispatchEvent(t))},handleTouchesEnd:function(t){0<(t=this.getSetOfTouchesEndOrCancel(t)).length&&(this._glView._convertTouchesWithScale(t),(t=new cc.EventTouch(t))._eventCode=cc.EventTouch.EventCode.ENDED,cc.eventManager.dispatchEvent(t))},handleTouchesCancel:function(t){0<(t=this.getSetOfTouchesEndOrCancel(t)).length&&(this._glView._convertTouchesWithScale(t),(t=new cc.EventTouch(t))._eventCode=cc.EventTouch.EventCode.CANCELLED,cc.eventManager.dispatchEvent(t))},getSetOfTouchesEndOrCancel:function(t){for(var e,i,n,s=[],r=this._touches,o=this._touchesIntegerDict,a=0,c=t.length;a<c;a++)null!=(i=o[n=(e=t[a]).getID()])&&r[i]&&(r[i]._setPoint(e._point),r[i]._setPrevPoint(e._prevPoint),s.push(r[i]),this._removeUsedIndexBit(i),delete o[n]);return s},getHTMLElementPosition:function(t){var e=document.documentElement,i=window,n=null;return{left:(n=cc.isFunction(t.getBoundingClientRect)?t.getBoundingClientRect():{left:0,top:0,width:parseInt(t.style.width),height:parseInt(t.style.height)}).left+i.pageXOffset-e.clientLeft,top:n.top+i.pageYOffset-e.clientTop,width:n.width,height:n.height}},getPreTouch:function(t){for(var e=null,i=this._preTouchPool,n=t.getID(),s=i.length-1;0<=s;s--)if(i[s].getID()===n){e=i[s];break}return e||(e=t),e},setPreTouch:function(t){for(var e=!1,i=this._preTouchPool,n=t.getID(),s=i.length-1;0<=s;s--)if(i[s].getID()===n){i[s]=t,e=!0;break}e||(50>=i.length?i.push(t):(i[this._preTouchPoolPointer]=t,this._preTouchPoolPointer=(this._preTouchPoolPointer+1)%50))},getTouchByXY:function(t,e,i){var n=this._preTouchPoint;return t=this._glView.convertToLocationInView(t,e,i),(e=new cc.Touch(t.x,t.y))._setPrevPoint(n.x,n.y),n.x=t.x,n.y=t.y,e},getMouseEvent:function(t,e,i){var n=this._prevMousePoint;return this._glView._convertMouseToLocationInView(t,e),(e=new cc.EventMouse(i)).setLocation(t.x,t.y),e._setPrevCursor(n.x,n.y),n.x=t.x,n.y=t.y,e},getPointByEvent:function(t,e){return null!=t.pageX?{x:t.pageX,y:t.pageY}:(e.left-=document.body.scrollLeft,e.top-=document.body.scrollTop,{x:t.clientX,y:t.clientY})},getTouchesByEvent:function(t,e){for(var i,n,s=[],r=this._glView,o=this._preTouchPoint,a=t.changedTouches.length,c=0;c<a;c++)if(i=t.changedTouches[c]){var h;h=cc.sys.BROWSER_TYPE_FIREFOX===cc.sys.browserType?r.convertToLocationInView(i.pageX,i.pageY,e):r.convertToLocationInView(i.clientX,i.clientY,e),null!=i.identifier?(i=new cc.Touch(h.x,h.y,i.identifier),n=this.getPreTouch(i).getLocation(),i._setPrevPoint(n.x,n.y),this.setPreTouch(i)):(i=new cc.Touch(h.x,h.y))._setPrevPoint(o.x,o.y),o.x=h.x,o.y=h.y,s.push(i)}return s},registerSystemEvent:function(t){if(!this._isRegisterEvent){this._glView=cc.view;var e=this,i="mouse"in cc.sys.capabilities,n="touches"in cc.sys.capabilities,s=!1;if(cc.sys.isMobile&&(s=!0),i&&(window.addEventListener("mousedown",(function(){e._mousePressed=!0}),!1),window.addEventListener("mouseup",(function(i){if(!s){var n=e._mousePressed;if(e._mousePressed=!1,n){n=e.getHTMLElementPosition(t);var r=e.getPointByEvent(i,n);cc.rectContainsPoint(new cc.Rect(n.left,n.top,n.width,n.height),r)||(e.handleTouchesEnd([e.getTouchByXY(r.x,r.y,n)]),(n=e.getMouseEvent(r,n,cc.EventMouse.UP)).setButton(i.button),cc.eventManager.dispatchEvent(n))}}}),!1),t.addEventListener("mousedown",(function(i){if(!s){e._mousePressed=!0;var n=e.getHTMLElementPosition(t),r=e.getPointByEvent(i,n);e.handleTouchesBegin([e.getTouchByXY(r.x,r.y,n)]),(n=e.getMouseEvent(r,n,cc.EventMouse.DOWN)).setButton(i.button),cc.eventManager.dispatchEvent(n),i.stopPropagation(),i.preventDefault(),t.focus()}}),!1),t.addEventListener("mouseup",(function(i){if(!s){e._mousePressed=!1;var n=e.getHTMLElementPosition(t),r=e.getPointByEvent(i,n);e.handleTouchesEnd([e.getTouchByXY(r.x,r.y,n)]),(n=e.getMouseEvent(r,n,cc.EventMouse.UP)).setButton(i.button),cc.eventManager.dispatchEvent(n),i.stopPropagation(),i.preventDefault()}}),!1),t.addEventListener("mousemove",(function(i){if(!s){var n=e.getHTMLElementPosition(t),r=e.getPointByEvent(i,n);e.handleTouchesMove([e.getTouchByXY(r.x,r.y,n)]),n=e.getMouseEvent(r,n,cc.EventMouse.MOVE),e._mousePressed?n.setButton(i.button):n.setButton(null),cc.eventManager.dispatchEvent(n),i.stopPropagation(),i.preventDefault()}}),!1),t.addEventListener("mousewheel",(function(i){var n=e.getHTMLElementPosition(t),s=e.getPointByEvent(i,n);(n=e.getMouseEvent(s,n,cc.EventMouse.SCROLL)).setButton(i.button),n.setScrollData(0,i.wheelDelta),cc.eventManager.dispatchEvent(n),i.stopPropagation(),i.preventDefault()}),!1),t.addEventListener("DOMMouseScroll",(function(i){var n=e.getHTMLElementPosition(t),s=e.getPointByEvent(i,n);(n=e.getMouseEvent(s,n,cc.EventMouse.SCROLL)).setButton(i.button),n.setScrollData(0,-120*i.detail),cc.eventManager.dispatchEvent(n),i.stopPropagation(),i.preventDefault()}),!1)),window.navigator.msPointerEnabled){var r;i={MSPointerDown:e.handleTouchesBegin,MSPointerMove:e.handleTouchesMove,MSPointerUp:e.handleTouchesEnd,MSPointerCancel:e.handleTouchesCancel};for(r in i)!function(i,n){t.addEventListener(i,(function(i){var s=e.getHTMLElementPosition(t);s.left-=document.documentElement.scrollLeft,s.top-=document.documentElement.scrollTop,n.call(e,[e.getTouchByXY(i.clientX,i.clientY,s)]),i.stopPropagation()}),!1)}(r,i[r])}n&&(t.addEventListener("touchstart",(function(i){if(i.changedTouches){var n=e.getHTMLElementPosition(t);n.left-=document.body.scrollLeft,n.top-=document.body.scrollTop,e.handleTouchesBegin(e.getTouchesByEvent(i,n)),i.stopPropagation(),i.preventDefault(),t.focus()}}),!1),t.addEventListener("touchmove",(function(i){if(i.changedTouches){var n=e.getHTMLElementPosition(t);n.left-=document.body.scrollLeft,n.top-=document.body.scrollTop,e.handleTouchesMove(e.getTouchesByEvent(i,n)),i.stopPropagation(),i.preventDefault()}}),!1),t.addEventListener("touchend",(function(i){if(i.changedTouches){var n=e.getHTMLElementPosition(t);n.left-=document.body.scrollLeft,n.top-=document.body.scrollTop,e.handleTouchesEnd(e.getTouchesByEvent(i,n)),i.stopPropagation(),i.preventDefault()}}),!1),t.addEventListener("touchcancel",(function(i){if(i.changedTouches){var n=e.getHTMLElementPosition(t);n.left-=document.body.scrollLeft,n.top-=document.body.scrollTop,e.handleTouchesCancel(e.getTouchesByEvent(i,n)),i.stopPropagation(),i.preventDefault()}}),!1)),this._registerKeyboardEvent(),this._isRegisterEvent=!0}},_registerKeyboardEvent:function(){},_registerAccelerometerEvent:function(){},update:function(t){this._accelCurTime>this._accelInterval&&(this._accelCurTime-=this._accelInterval,cc.eventManager.dispatchEvent(new cc.EventAcceleration(this._acceleration))),this._accelCurTime+=t}},_p=cc.inputManager,_p.setAccelerometerEnabled=function(t){this._accelEnabled!==t&&(this._accelEnabled=t,t=cc.director.getScheduler(),this._accelEnabled?(this._accelCurTime=0,this._registerAccelerometerEvent(),t.scheduleUpdate(this)):(this._accelCurTime=0,this._unregisterAccelerometerEvent(),t.unscheduleUpdate(this)))},_p.setAccelerometerInterval=function(t){this._accelInterval!==t&&(this._accelInterval=t)},_p._registerKeyboardEvent=function(){cc._canvas.addEventListener("keydown",(function(t){cc.eventManager.dispatchEvent(new cc.EventKeyboard(t.keyCode,!0)),t.stopPropagation(),t.preventDefault()}),!1),cc._canvas.addEventListener("keyup",(function(t){cc.eventManager.dispatchEvent(new cc.EventKeyboard(t.keyCode,!1)),t.stopPropagation(),t.preventDefault()}),!1)},_p._registerAccelerometerEvent=function(){var t=window;this._acceleration=new cc.Acceleration,this._accelDeviceEvent=t.DeviceMotionEvent||t.DeviceOrientationEvent,cc.sys.browserType===cc.sys.BROWSER_TYPE_MOBILE_QQ&&(this._accelDeviceEvent=window.DeviceOrientationEvent);var e=this._accelDeviceEvent===t.DeviceMotionEvent?"devicemotion":"deviceorientation",i=navigator.userAgent;(/Android/.test(i)||/Adr/.test(i)&&cc.sys.browserType===cc.BROWSER_TYPE_UC)&&(this._minus=-1),this.didAccelerateCallback=this.didAccelerate.bind(this),t.addEventListener(e,this.didAccelerateCallback,!1)},_p._unregisterAccelerometerEvent=function(){this._acceleration=null,window.removeEventListener(this._accelDeviceEvent===window.DeviceMotionEvent?"devicemotion":"deviceorientation",this.didAccelerateCallback,!1)},_p.didAccelerate=function(t){var e=window;if(this._accelEnabled){var i,n,s,r=this._acceleration;this._accelDeviceEvent===window.DeviceMotionEvent?(s=t.accelerationIncludingGravity,i=this._accelMinus*s.x*.1,n=this._accelMinus*s.y*.1,s=.1*s.z):(i=t.gamma/90*.981,n=-t.beta/90*.981,s=t.alpha/90*.981),r.x=i,r.y=n,r.z=s,r.timestamp=t.timeStamp||Date.now(),t=r.x,e.orientation===cc.UIInterfaceOrientationLandscapeRight?(r.x=-r.y,r.y=t):e.orientation===cc.UIInterfaceOrientationLandscapeLeft?(r.x=r.y,r.y=-t):e.orientation===cc.UIInterfaceOrientationPortraitUpsideDown&&(r.x=-r.x,r.y=-r.y)}},delete _p,cc.AffineTransform=function(t,e,i,n,s,r){this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=r},cc.affineTransformMake=function(t,e,i,n,s,r){return{a:t,b:e,c:i,d:n,tx:s,ty:r}},cc.pointApplyAffineTransform=function(t,e,i){var n;return void 0===i?(i=e,n=t.x,t=t.y):(n=t,t=e),{x:i.a*n+i.c*t+i.tx,y:i.b*n+i.d*t+i.ty}},cc._pointApplyAffineTransform=function(t,e,i){return cc.pointApplyAffineTransform(t,e,i)},cc.sizeApplyAffineTransform=function(t,e){return{width:e.a*t.width+e.c*t.height,height:e.b*t.width+e.d*t.height}},cc.affineTransformMakeIdentity=function(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}},cc.affineTransformIdentity=function(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}},cc.rectApplyAffineTransform=function(t,e){var i=cc.rectGetMinY(t),n=cc.rectGetMinX(t),s=cc.rectGetMaxX(t),r=cc.rectGetMaxY(t),o=cc.pointApplyAffineTransform(n,i,e),a=(i=cc.pointApplyAffineTransform(s,i,e),n=cc.pointApplyAffineTransform(n,r,e),cc.pointApplyAffineTransform(s,r,e)),c=(s=Math.min(o.x,i.x,n.x,a.x),r=Math.max(o.x,i.x,n.x,a.x),Math.min(o.y,i.y,n.y,a.y));o=Math.max(o.y,i.y,n.y,a.y);return cc.rect(s,c,r-s,o-c)},cc._rectApplyAffineTransformIn=function(t,e){var i=cc.rectGetMinY(t),n=cc.rectGetMinX(t),s=cc.rectGetMaxX(t),r=cc.rectGetMaxY(t),o=cc.pointApplyAffineTransform(n,i,e),a=(i=cc.pointApplyAffineTransform(s,i,e),n=cc.pointApplyAffineTransform(n,r,e),cc.pointApplyAffineTransform(s,r,e)),c=(s=Math.min(o.x,i.x,n.x,a.x),r=Math.max(o.x,i.x,n.x,a.x),Math.min(o.y,i.y,n.y,a.y));o=Math.max(o.y,i.y,n.y,a.y);return t.x=s,t.y=c,t.width=r-s,t.height=o-c,t},cc.affineTransformTranslate=function(t,e,i){return{a:t.a,b:t.b,c:t.c,d:t.d,tx:t.tx+t.a*e+t.c*i,ty:t.ty+t.b*e+t.d*i}},cc.affineTransformScale=function(t,e,i){return{a:t.a*e,b:t.b*e,c:t.c*i,d:t.d*i,tx:t.tx,ty:t.ty}},cc.affineTransformRotate=function(t,e){var i=Math.sin(e),n=Math.cos(e);return{a:t.a*n+t.c*i,b:t.b*n+t.d*i,c:t.c*n-t.a*i,d:t.d*n-t.b*i,tx:t.tx,ty:t.ty}},cc.affineTransformConcat=function(t,e){return{a:t.a*e.a+t.b*e.c,b:t.a*e.b+t.b*e.d,c:t.c*e.a+t.d*e.c,d:t.c*e.b+t.d*e.d,tx:t.tx*e.a+t.ty*e.c+e.tx,ty:t.tx*e.b+t.ty*e.d+e.ty}},cc.affineTransformConcatIn=function(t,e){var i=t.a,n=t.b,s=t.c,r=t.d,o=t.tx,a=t.ty;return t.a=i*e.a+n*e.c,t.b=i*e.b+n*e.d,t.c=s*e.a+r*e.c,t.d=s*e.b+r*e.d,t.tx=o*e.a+a*e.c+e.tx,t.ty=o*e.b+a*e.d+e.ty,t},cc.affineTransformEqualToTransform=function(t,e){return t.a===e.a&&t.b===e.b&&t.c===e.c&&t.d===e.d&&t.tx===e.tx&&t.ty===e.ty},cc.affineTransformInvert=function(t){var e=1/(t.a*t.d-t.b*t.c);return{a:e*t.d,b:-e*t.b,c:-e*t.c,d:e*t.a,tx:e*(t.c*t.ty-t.d*t.tx),ty:e*(t.b*t.tx-t.a*t.ty)}},cc.affineTransformInvertOut=function(t,e){var i=t.a,n=t.b,s=t.c,r=t.d,o=1/(i*r-n*s);e.a=o*r,e.b=-o*n,e.c=-o*s,e.d=o*i,e.tx=o*(s*t.ty-r*t.tx),e.ty=o*(n*t.tx-i*t.ty)},cc.POINT_EPSILON=parseFloat("1.192092896e-07F"),cc.pNeg=function(t){return cc.p(-t.x,-t.y)},cc.pAdd=function(t,e){return cc.p(t.x+e.x,t.y+e.y)},cc.pSub=function(t,e){return cc.p(t.x-e.x,t.y-e.y)},cc.pMult=function(t,e){return cc.p(t.x*e,t.y*e)},cc.pMidpoint=function(t,e){return cc.pMult(cc.pAdd(t,e),.5)},cc.pDot=function(t,e){return t.x*e.x+t.y*e.y},cc.pCross=function(t,e){return t.x*e.y-t.y*e.x},cc.pPerp=function(t){return cc.p(-t.y,t.x)},cc.pRPerp=function(t){return cc.p(t.y,-t.x)},cc.pProject=function(t,e){return cc.pMult(e,cc.pDot(t,e)/cc.pDot(e,e))},cc.pRotate=function(t,e){return cc.p(t.x*e.x-t.y*e.y,t.x*e.y+t.y*e.x)},cc.pUnrotate=function(t,e){return cc.p(t.x*e.x+t.y*e.y,t.y*e.x-t.x*e.y)},cc.pLengthSQ=function(t){return cc.pDot(t,t)},cc.pDistanceSQ=function(t,e){return cc.pLengthSQ(cc.pSub(t,e))},cc.pLength=function(t){return Math.sqrt(cc.pLengthSQ(t))},cc.pDistance=function(t,e){return cc.pLength(cc.pSub(t,e))},cc.pNormalize=function(t){var e=cc.pLength(t);return 0===e?cc.p(t):cc.pMult(t,1/e)},cc.pForAngle=function(t){return cc.p(Math.cos(t),Math.sin(t))},cc.pToAngle=function(t){return Math.atan2(t.y,t.x)},cc.clampf=function(t,e,i){if(e>i){var n=e;e=i,i=n}return t<e?e:t<i?t:i},cc.pClamp=function(t,e,i){return cc.p(cc.clampf(t.x,e.x,i.x),cc.clampf(t.y,e.y,i.y))},cc.pFromSize=function(t){return cc.p(t.width,t.height)},cc.pCompOp=function(t,e){return cc.p(e(t.x),e(t.y))},cc.pLerp=function(t,e,i){return cc.pAdd(cc.pMult(t,1-i),cc.pMult(e,i))},cc.pFuzzyEqual=function(t,e,i){return t.x-i<=e.x&&e.x<=t.x+i&&t.y-i<=e.y&&e.y<=t.y+i},cc.pCompMult=function(t,e){return cc.p(t.x*e.x,t.y*e.y)},cc.pAngleSigned=function(t,e){var i=cc.pNormalize(t),n=cc.pNormalize(e);i=Math.atan2(i.x*n.y-i.y*n.x,cc.pDot(i,n));return Math.abs(i)<cc.POINT_EPSILON?0:i},cc.pAngle=function(t,e){var i=Math.acos(cc.pDot(cc.pNormalize(t),cc.pNormalize(e)));return Math.abs(i)<cc.POINT_EPSILON?0:i},cc.pRotateByAngle=function(t,e,i){t=cc.pSub(t,e);var n=Math.cos(i);i=Math.sin(i);var s=t.x;return t.x=s*n-t.y*i+e.x,t.y=s*i+t.y*n+e.y,t},cc.pLineIntersect=function(t,e,i,n,s){if(t.x===e.x&&t.y===e.y||i.x===n.x&&i.y===n.y)return!1;var r=e.x-t.x;e=e.y-t.y;var o=n.x-i.x;n=n.y-i.y;var a=t.x-i.x;return t=t.y-i.y,i=n*r-o*e,s.x=o*t-n*a,s.y=r*t-e*a,0===i?0===s.x||0===s.y:(s.x/=i,s.y/=i,!0)},cc.pSegmentIntersect=function(t,e,i,n){var s=cc.p(0,0);return!!(cc.pLineIntersect(t,e,i,n,s)&&0<=s.x&&1>=s.x&&0<=s.y&&1>=s.y)},cc.pIntersectPoint=function(t,e,i,n){var s=cc.p(0,0);return cc.pLineIntersect(t,e,i,n,s)?((i=cc.p(0,0)).x=t.x+s.x*(e.x-t.x),i.y=t.y+s.x*(e.y-t.y),i):cc.p(0,0)},cc.pSameAs=function(t,e){return null!=t&&null!=e&&(t.x===e.x&&t.y===e.y)},cc.pZeroIn=function(t){t.x=0,t.y=0},cc.pIn=function(t,e){t.x=e.x,t.y=e.y},cc.pMultIn=function(t,e){t.x*=e,t.y*=e},cc.pSubIn=function(t,e){t.x-=e.x,t.y-=e.y},cc.pAddIn=function(t,e){t.x+=e.x,t.y+=e.y},cc.pNormalizeIn=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);0!==e&&cc.pMultIn(t,1/e)},cc.vertexLineToPolygon=function(t,e,i,n,s){if(!(1>=(s+=n))){e*=.5;for(var r,o=s-1,a=n;a<s;a++){r=2*a;var c,h=cc.p(t[2*a],t[2*a+1]);if(0===a)c=cc.pPerp(cc.pNormalize(cc.pSub(h,cc.p(t[2*(a+1)],t[2*(a+1)+1]))));else if(a===o)c=cc.pPerp(cc.pNormalize(cc.pSub(cc.p(t[2*(a-1)],t[2*(a-1)+1]),h)));else{c=cc.p(t[2*(a-1)],t[2*(a-1)+1]);var l=cc.p(t[2*(a+1)],t[2*(a+1)+1]),u=cc.pNormalize(cc.pSub(l,h)),d=cc.pNormalize(cc.pSub(c,h)),_=Math.acos(cc.pDot(u,d));c=_<cc.degreesToRadians(70)?cc.pPerp(cc.pNormalize(cc.pMidpoint(u,d))):_<cc.degreesToRadians(170)?cc.pNormalize(cc.pMidpoint(u,d)):cc.pPerp(cc.pNormalize(cc.pSub(l,c)))}c=cc.pMult(c,e),i[2*r]=h.x+c.x,i[2*r+1]=h.y+c.y,i[2*(r+1)]=h.x-c.x,i[2*(r+1)+1]=h.y-c.y}for(a=0===n?0:n-1;a<o;a++)t=(r=2*a)+2,e=cc.vertex2(i[2*r],i[2*r+1]),s=cc.vertex2(i[2*(r+1)],i[2*(r+1)+1]),r=cc.vertex2(i[2*t],i[2*t]),n=cc.vertex2(i[2*(t+1)],i[2*(t+1)+1]),!(e=!cc.vertexLineIntersect(e.x,e.y,n.x,n.y,s.x,s.y,r.x,r.y)).isSuccess&&(0>e.value||1<e.value)&&(e.isSuccess=!0),e.isSuccess&&(i[2*t]=n.x,i[2*t+1]=n.y,i[2*(t+1)]=r.x,i[2*(t+1)+1]=r.y)}},cc.vertexLineIntersect=function(t,e,i,n,s,r,o,a){return t===i&&e===n||s===o&&r===a?{isSuccess:!1,value:0}:(i-=t,n-=e,r-=e,o-=t,a-=e,e=(s-=t)*(i/=t=Math.sqrt(i*i+n*n))+r*(n/=t),r=r*i-s*n,s=e,e=o*i+a*n,a=a*i-o*n,o=e,r===a?{isSuccess:!1,value:0}:{isSuccess:!0,value:(o+(s-o)*a/(a-r))/t})},cc.vertexListIsClockwise=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[(e+1)%i],s=t[(e+2)%i];if(0<cc.pCross(cc.pSub(n,t[e]),cc.pSub(s,n)))return!1}return!0},cc.CGAffineToGL=function(t,e){e[2]=e[3]=e[6]=e[7]=e[8]=e[9]=e[11]=e[14]=0,e[10]=e[15]=1,e[0]=t.a,e[4]=t.c,e[12]=t.tx,e[1]=t.b,e[5]=t.d,e[13]=t.ty},cc.GLToCGAffine=function(t,e){e.a=t[0],e.c=t[4],e.tx=t[12],e.b=t[1],e.d=t[5],e.ty=t[13]},cc.Touch=cc.Class.extend({_lastModified:0,_point:null,_prevPoint:null,_id:0,_startPointCaptured:!1,_startPoint:null,ctor:function(t,e,i){this.setTouchInfo(i,t,e)},getLocation:function(){return{x:this._point.x,y:this._point.y}},getLocationX:function(){return this._point.x},getLocationY:function(){return this._point.y},getPreviousLocation:function(){return{x:this._prevPoint.x,y:this._prevPoint.y}},getStartLocation:function(){return{x:this._startPoint.x,y:this._startPoint.y}},getDelta:function(){return cc.pSub(this._point,this._prevPoint)},getLocationInView:function(){return{x:this._point.x,y:this._point.y}},getPreviousLocationInView:function(){return{x:this._prevPoint.x,y:this._prevPoint.y}},getStartLocationInView:function(){return{x:this._startPoint.x,y:this._startPoint.y}},getID:function(){return this._id},getId:function(){return cc.log("getId is deprecated. Please use getID instead."),this._id},setTouchInfo:function(t,e,i){this._prevPoint=this._point,this._point=cc.p(e||0,i||0),this._id=t,this._startPointCaptured||(this._startPoint=cc.p(this._point),cc.view._convertPointWithScale(this._startPoint),this._startPointCaptured=!0)},_setPoint:function(t,e){void 0===e?(this._point.x=t.x,this._point.y=t.y):(this._point.x=t,this._point.y=e)},_setPrevPoint:function(t,e){this._prevPoint=void 0===e?cc.p(t.x,t.y):cc.p(t||0,e||0)}}),cc.Event=cc.Class.extend({_type:0,_isStopped:!1,_currentTarget:null,_setCurrentTarget:function(t){this._currentTarget=t},ctor:function(t){this._type=t},getType:function(){return this._type},stopPropagation:function(){this._isStopped=!0},isStopped:function(){return this._isStopped},getCurrentTarget:function(){return this._currentTarget}}),cc.Event.TOUCH=0,cc.Event.KEYBOARD=1,cc.Event.ACCELERATION=2,cc.Event.MOUSE=3,cc.Event.FOCUS=4,cc.Event.CUSTOM=6,cc.EventCustom=cc.Event.extend({_eventName:null,_userData:null,ctor:function(t){cc.Event.prototype.ctor.call(this,cc.Event.CUSTOM),this._eventName=t},setUserData:function(t){this._userData=t},getUserData:function(){return this._userData},getEventName:function(){return this._eventName}}),cc.EventMouse=cc.Event.extend({_eventType:0,_button:0,_x:0,_y:0,_prevX:0,_prevY:0,_scrollX:0,_scrollY:0,ctor:function(t){cc.Event.prototype.ctor.call(this,cc.Event.MOUSE),this._eventType=t},setScrollData:function(t,e){this._scrollX=t,this._scrollY=e},getScrollX:function(){return this._scrollX},getScrollY:function(){return this._scrollY},setLocation:function(t,e){this._x=t,this._y=e},getLocation:function(){return{x:this._x,y:this._y}},getLocationInView:function(){return{x:this._x,y:cc.view._designResolutionSize.height-this._y}},_setPrevCursor:function(t,e){this._prevX=t,this._prevY=e},getDelta:function(){return{x:this._x-this._prevX,y:this._y-this._prevY}},getDeltaX:function(){return this._x-this._prevX},getDeltaY:function(){return this._y-this._prevY},setButton:function(t){this._button=t},getButton:function(){return this._button},getLocationX:function(){return this._x},getLocationY:function(){return this._y}}),cc.EventMouse.NONE=0,cc.EventMouse.DOWN=1,cc.EventMouse.UP=2,cc.EventMouse.MOVE=3,cc.EventMouse.SCROLL=4,cc.EventMouse.BUTTON_LEFT=0,cc.EventMouse.BUTTON_RIGHT=2,cc.EventMouse.BUTTON_MIDDLE=1,cc.EventMouse.BUTTON_4=3,cc.EventMouse.BUTTON_5=4,cc.EventMouse.BUTTON_6=5,cc.EventMouse.BUTTON_7=6,cc.EventMouse.BUTTON_8=7,cc.EventTouch=cc.Event.extend({_eventCode:0,_touches:null,ctor:function(t){cc.Event.prototype.ctor.call(this,cc.Event.TOUCH),this._touches=t||[]},getEventCode:function(){return this._eventCode},getTouches:function(){return this._touches},_setEventCode:function(t){this._eventCode=t},_setTouches:function(t){this._touches=t}}),cc.EventTouch.MAX_TOUCHES=5,cc.EventTouch.EventCode={BEGAN:0,MOVED:1,ENDED:2,CANCELLED:3},cc.EventFocus=cc.Event.extend({_widgetGetFocus:null,_widgetLoseFocus:null,ctor:function(t,e){cc.Event.prototype.ctor.call(this,cc.Event.FOCUS),this._widgetGetFocus=e,this._widgetLoseFocus=t}}),cc.EventListener=cc.Class.extend({_onEvent:null,_type:0,_listenerID:null,_registered:!1,_fixedPriority:0,_node:null,_paused:!0,_isEnabled:!0,ctor:function(t,e,i){this._onEvent=i,this._type=t||0,this._listenerID=e||""},_setPaused:function(t){this._paused=t},_isPaused:function(){return this._paused},_setRegistered:function(t){this._registered=t},_isRegistered:function(){return this._registered},_getType:function(){return this._type},_getListenerID:function(){return this._listenerID},_setFixedPriority:function(t){this._fixedPriority=t},_getFixedPriority:function(){return this._fixedPriority},_setSceneGraphPriority:function(t){this._node=t},_getSceneGraphPriority:function(){return this._node},checkAvailable:function(){return null!==this._onEvent},clone:function(){return null},setEnabled:function(t){this._isEnabled=t},isEnabled:function(){return this._isEnabled},retain:function(){},release:function(){}}),cc.EventListener.UNKNOWN=0,cc.EventListener.TOUCH_ONE_BY_ONE=1,cc.EventListener.TOUCH_ALL_AT_ONCE=2,cc.EventListener.KEYBOARD=3,cc.EventListener.MOUSE=4,cc.EventListener.ACCELERATION=6,cc.EventListener.FOCUS=7,cc.EventListener.CUSTOM=8,cc._EventListenerCustom=cc.EventListener.extend({_onCustomEvent:null,ctor:function(t,e,i){this._onCustomEvent=e,this._target=i,cc.EventListener.prototype.ctor.call(this,cc.EventListener.CUSTOM,t,this._callback)},_callback:function(t){null!==this._onCustomEvent&&this._onCustomEvent.call(this._target,t)},checkAvailable:function(){return cc.EventListener.prototype.checkAvailable.call(this)&&null!==this._onCustomEvent},clone:function(){return new cc._EventListenerCustom(this._listenerID,this._onCustomEvent)}}),cc._EventListenerCustom.create=function(t,e){return new cc._EventListenerCustom(t,e)},cc._EventListenerMouse=cc.EventListener.extend({onMouseDown:null,onMouseUp:null,onMouseMove:null,onMouseScroll:null,ctor:function(){cc.EventListener.prototype.ctor.call(this,cc.EventListener.MOUSE,cc._EventListenerMouse.LISTENER_ID,this._callback)},_callback:function(t){var e=cc.EventMouse;switch(t._eventType){case e.DOWN:this.onMouseDown&&this.onMouseDown(t);break;case e.UP:this.onMouseUp&&this.onMouseUp(t);break;case e.MOVE:this.onMouseMove&&this.onMouseMove(t);break;case e.SCROLL:this.onMouseScroll&&this.onMouseScroll(t)}},clone:function(){var t=new cc._EventListenerMouse;return t.onMouseDown=this.onMouseDown,t.onMouseUp=this.onMouseUp,t.onMouseMove=this.onMouseMove,t.onMouseScroll=this.onMouseScroll,t},checkAvailable:function(){return!0}}),cc._EventListenerMouse.LISTENER_ID="__cc_mouse",cc._EventListenerMouse.create=function(){return new cc._EventListenerMouse},cc._EventListenerTouchOneByOne=cc.EventListener.extend({_claimedTouches:null,swallowTouches:!1,onTouchBegan:null,onTouchMoved:null,onTouchEnded:null,onTouchCancelled:null,ctor:function(){cc.EventListener.prototype.ctor.call(this,cc.EventListener.TOUCH_ONE_BY_ONE,cc._EventListenerTouchOneByOne.LISTENER_ID,null),this._claimedTouches=[]},setSwallowTouches:function(t){this.swallowTouches=t},isSwallowTouches:function(){return this.swallowTouches},clone:function(){var t=new cc._EventListenerTouchOneByOne;return t.onTouchBegan=this.onTouchBegan,t.onTouchMoved=this.onTouchMoved,t.onTouchEnded=this.onTouchEnded,t.onTouchCancelled=this.onTouchCancelled,t.swallowTouches=this.swallowTouches,t},checkAvailable:function(){return!!this.onTouchBegan||(cc.log(cc._LogInfos._EventListenerTouchOneByOne_checkAvailable),!1)}}),cc._EventListenerTouchOneByOne.LISTENER_ID="__cc_touch_one_by_one",cc._EventListenerTouchOneByOne.create=function(){return new cc._EventListenerTouchOneByOne},cc._EventListenerTouchAllAtOnce=cc.EventListener.extend({onTouchesBegan:null,onTouchesMoved:null,onTouchesEnded:null,onTouchesCancelled:null,ctor:function(){cc.EventListener.prototype.ctor.call(this,cc.EventListener.TOUCH_ALL_AT_ONCE,cc._EventListenerTouchAllAtOnce.LISTENER_ID,null)},clone:function(){var t=new cc._EventListenerTouchAllAtOnce;return t.onTouchesBegan=this.onTouchesBegan,t.onTouchesMoved=this.onTouchesMoved,t.onTouchesEnded=this.onTouchesEnded,t.onTouchesCancelled=this.onTouchesCancelled,t},checkAvailable:function(){return null!==this.onTouchesBegan||null!==this.onTouchesMoved||null!==this.onTouchesEnded||null!==this.onTouchesCancelled||(cc.log(cc._LogInfos._EventListenerTouchAllAtOnce_checkAvailable),!1)}}),cc._EventListenerTouchAllAtOnce.LISTENER_ID="__cc_touch_all_at_once",cc._EventListenerTouchAllAtOnce.create=function(){return new cc._EventListenerTouchAllAtOnce},cc.EventListener.create=function(t){cc.assert(t&&t.event,cc._LogInfos.EventListener_create);var e=t.event;delete t.event;var i=null;for(var n in e===cc.EventListener.TOUCH_ONE_BY_ONE?i=new cc._EventListenerTouchOneByOne:e===cc.EventListener.TOUCH_ALL_AT_ONCE?i=new cc._EventListenerTouchAllAtOnce:e===cc.EventListener.MOUSE?i=new cc._EventListenerMouse:e===cc.EventListener.CUSTOM?(i=new cc._EventListenerCustom(t.eventName,t.callback),delete t.eventName,delete t.callback):e===cc.EventListener.KEYBOARD?i=new cc._EventListenerKeyboard:e===cc.EventListener.ACCELERATION?(i=new cc._EventListenerAcceleration(t.callback),delete t.callback):e===cc.EventListener.FOCUS&&(i=new cc._EventListenerFocus),t)i[n]=t[n];return i},cc._EventListenerFocus=cc.EventListener.extend({clone:function(){var t=new cc._EventListenerFocus;return t.onFocusChanged=this.onFocusChanged,t},checkAvailable:function(){return!!this.onFocusChanged||(cc.log("Invalid EventListenerFocus!"),!1)},onFocusChanged:null,ctor:function(){cc.EventListener.prototype.ctor.call(this,cc.EventListener.FOCUS,cc._EventListenerFocus.LISTENER_ID,this._callback)},_callback:function(t){this.onFocusChanged&&this.onFocusChanged(t._widgetLoseFocus,t._widgetGetFocus)}}),cc._EventListenerFocus.LISTENER_ID="__cc_focus_event",cc._EventListenerVector=cc.Class.extend({_fixedListeners:null,_sceneGraphListeners:null,gt0Index:0,ctor:function(){this._fixedListeners=[],this._sceneGraphListeners=[]},size:function(){return this._fixedListeners.length+this._sceneGraphListeners.length},empty:function(){return 0===this._fixedListeners.length&&0===this._sceneGraphListeners.length},push:function(t){0===t._getFixedPriority()?this._sceneGraphListeners.push(t):this._fixedListeners.push(t)},clearSceneGraphListeners:function(){this._sceneGraphListeners.length=0},clearFixedListeners:function(){this._fixedListeners.length=0},clear:function(){this._sceneGraphListeners.length=0,this._fixedListeners.length=0},getFixedPriorityListeners:function(){return this._fixedListeners},getSceneGraphPriorityListeners:function(){return this._sceneGraphListeners}}),cc.eventManager={DIRTY_NONE:0,DIRTY_FIXED_PRIORITY:1,DIRTY_SCENE_GRAPH_PRIORITY:2,DIRTY_ALL:3,_listenersMap:{},_priorityDirtyFlagMap:{},_nodeListenersMap:{},_nodePriorityMap:{},_globalZOrderNodeMap:{},_toAddedListeners:[],_toRemovedListeners:[],_dirtyNodes:[],_inDispatch:0,_isEnabled:!1,_nodePriorityIndex:0,_internalCustomListenerIDs:[cc.game.EVENT_HIDE,cc.game.EVENT_SHOW],_setDirtyForNode:function(t){null!=this._nodeListenersMap[t.__instanceId]&&this._dirtyNodes.push(t);for(var e=0,i=(t=t.getChildren()).length;e<i;e++)this._setDirtyForNode(t[e])},pauseTarget:function(t,e){var i,n,s=this._nodeListenersMap[t.__instanceId];if(s)for(i=0,n=s.length;i<n;i++)s[i]._setPaused(!0);if(!0===e)for(i=0,n=(s=t.getChildren()).length;i<n;i++)this.pauseTarget(s[i],!0)},resumeTarget:function(t,e){var i,n,s=this._nodeListenersMap[t.__instanceId];if(s)for(i=0,n=s.length;i<n;i++)s[i]._setPaused(!1);if(this._setDirtyForNode(t),!0===e)for(i=0,n=(s=t.getChildren()).length;i<n;i++)this.resumeTarget(s[i],!0)},_addListener:function(t){0===this._inDispatch?this._forceAddEventListener(t):this._toAddedListeners.push(t)},_forceAddEventListener:function(t){var e=t._getListenerID(),i=this._listenersMap[e];i||(i=new cc._EventListenerVector,this._listenersMap[e]=i),i.push(t),0===t._getFixedPriority()?(this._setDirty(e,this.DIRTY_SCENE_GRAPH_PRIORITY),null===(e=t._getSceneGraphPriority())&&cc.log(cc._LogInfos.eventManager__forceAddEventListener),this._associateNodeAndEventListener(e,t),e.isRunning()&&this.resumeTarget(e)):this._setDirty(e,this.DIRTY_FIXED_PRIORITY)},_getListeners:function(t){return this._listenersMap[t]},_updateDirtyFlagForSceneGraph:function(){if(0!==this._dirtyNodes.length){for(var t,e,i=this._dirtyNodes,n=this._nodeListenersMap,s=0,r=i.length;s<r;s++)if(t=n[i[s].__instanceId])for(var o=0,a=t.length;o<a;o++)(e=t[o])&&this._setDirty(e._getListenerID(),this.DIRTY_SCENE_GRAPH_PRIORITY);this._dirtyNodes.length=0}},_removeAllListenersInVector:function(t){if(t)for(var e,i=0;i<t.length;)(e=t[i])._setRegistered(!1),null!=e._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(e._getSceneGraphPriority(),e),e._setSceneGraphPriority(null)),0===this._inDispatch?cc.arrayRemoveObject(t,e):++i},_removeListenersForListenerID:function(t){var e=this._listenersMap[t];if(e){var i=e.getFixedPriorityListeners(),n=e.getSceneGraphPriorityListeners();this._removeAllListenersInVector(n),this._removeAllListenersInVector(i),delete this._priorityDirtyFlagMap[t],this._inDispatch||e.clear(),delete this._listenersMap[t]}for(i=this._toAddedListeners,e=0;e<i.length;)(n=i[e])&&n._getListenerID()===t?cc.arrayRemoveObject(i,n):++e},_sortEventListeners:function(t){var e=this.DIRTY_NONE,i=this._priorityDirtyFlagMap;i[t]&&(e=i[t]),e!==this.DIRTY_NONE&&(i[t]=this.DIRTY_NONE,e&this.DIRTY_FIXED_PRIORITY&&this._sortListenersOfFixedPriority(t),e&this.DIRTY_SCENE_GRAPH_PRIORITY&&((e=cc.director.getRunningScene())?this._sortListenersOfSceneGraphPriority(t,e):i[t]=this.DIRTY_SCENE_GRAPH_PRIORITY))},_sortListenersOfSceneGraphPriority:function(t,e){var i=this._getListeners(t);if(i){var n=i.getSceneGraphPriorityListeners();n&&0!==n.length&&(this._nodePriorityIndex=0,this._nodePriorityMap={},this._visitTarget(e,!0),i.getSceneGraphPriorityListeners().sort(this._sortEventListenersOfSceneGraphPriorityDes))}},_sortEventListenersOfSceneGraphPriorityDes:function(t,e){var i=cc.eventManager._nodePriorityMap,n=t._getSceneGraphPriority(),s=e._getSceneGraphPriority();return e&&s&&i[s.__instanceId]?t&&n&&i[n.__instanceId]?i[e._getSceneGraphPriority().__instanceId]-i[t._getSceneGraphPriority().__instanceId]:1:-1},_sortListenersOfFixedPriority:function(t){if(t=this._listenersMap[t]){var e=t.getFixedPriorityListeners();if(e&&0!==e.length){e.sort(this._sortListenersOfFixedPriorityAsc);for(var i=0,n=e.length;i<n&&!(0<=e[i]._getFixedPriority());)++i;t.gt0Index=i}}},_sortListenersOfFixedPriorityAsc:function(t,e){return t._getFixedPriority()-e._getFixedPriority()},_onUpdateListeners:function(t){var e,i,n=t.getFixedPriorityListeners(),s=t.getSceneGraphPriorityListeners(),r=this._toRemovedListeners;if(s)for(e=0;e<s.length;)(i=s[e])._isRegistered()?++e:(cc.arrayRemoveObject(s,i),-1!==(i=r.indexOf(i))&&r.splice(i,1));if(n)for(e=0;e<n.length;)(i=n[e])._isRegistered()?++e:(cc.arrayRemoveObject(n,i),-1!==(i=r.indexOf(i))&&r.splice(i,1));s&&0===s.length&&t.clearSceneGraphListeners(),n&&0===n.length&&t.clearFixedListeners()},frameUpdateListeners:function(){var t,e=this._listenersMap,i=this._priorityDirtyFlagMap;for(t in e)e[t].empty()&&(delete i[t],delete e[t]);if(0!==(e=this._toAddedListeners).length){for(i=0,t=e.length;i<t;i++)this._forceAddEventListener(e[i]);e.length=0}0!==this._toRemovedListeners.length&&this._cleanToRemovedListeners()},_updateTouchListeners:function(t){if(t=this._inDispatch,cc.assert(0<t,cc._LogInfos.EventManager__updateListeners),!(1<t)){var e;if((e=this._listenersMap[cc._EventListenerTouchOneByOne.LISTENER_ID])&&this._onUpdateListeners(e),(e=this._listenersMap[cc._EventListenerTouchAllAtOnce.LISTENER_ID])&&this._onUpdateListeners(e),cc.assert(1===t,cc._LogInfos.EventManager__updateListeners_2),0!==(t=this._toAddedListeners).length){e=0;for(var i=t.length;e<i;e++)this._forceAddEventListener(t[e]);t.length=0}0!==this._toRemovedListeners.length&&this._cleanToRemovedListeners()}},_cleanToRemovedListeners:function(){for(var t=this._toRemovedListeners,e=0;e<t.length;e++){var i=t[e],n=this._listenersMap[i._getListenerID()];if(n){var s=n.getFixedPriorityListeners(),r=n.getSceneGraphPriorityListeners();r&&-1!==(n=r.indexOf(i))&&r.splice(n,1),s&&-1!==(n=s.indexOf(i))&&s.splice(n,1)}}t.length=0},_onTouchEventCallback:function(t,e){if(!t._isRegistered)return!1;var i=e.event,n=e.selTouch;i._setCurrentTarget(t._node);var s,r=!1,o=i.getEventCode(),a=cc.EventTouch.EventCode;return o===a.BEGAN?t.onTouchBegan&&(r=t.onTouchBegan(n,i))&&t._registered&&t._claimedTouches.push(n):0<t._claimedTouches.length&&-1!==(s=t._claimedTouches.indexOf(n))&&(r=!0,o===a.MOVED&&t.onTouchMoved?t.onTouchMoved(n,i):o===a.ENDED?(t.onTouchEnded&&t.onTouchEnded(n,i),t._registered&&t._claimedTouches.splice(s,1)):o===a.CANCELLED&&(t.onTouchCancelled&&t.onTouchCancelled(n,i),t._registered&&t._claimedTouches.splice(s,1))),i.isStopped()?(cc.eventManager._updateTouchListeners(i),!0):!!(r&&t._registered&&t.swallowTouches)&&(e.needsMutableSet&&e.touches.splice(n,1),!0)},_dispatchTouchEvent:function(t){this._sortEventListeners(cc._EventListenerTouchOneByOne.LISTENER_ID),this._sortEventListeners(cc._EventListenerTouchAllAtOnce.LISTENER_ID);var e=this._getListeners(cc._EventListenerTouchOneByOne.LISTENER_ID),i=this._getListeners(cc._EventListenerTouchAllAtOnce.LISTENER_ID);if(null!==e||null!==i){var n=t.getTouches(),s=cc.copyArray(n),r={event:t,needsMutableSet:e&&i,touches:s,selTouch:null};if(e)for(var o=0;o<n.length;o++)if(r.selTouch=n[o],this._dispatchEventToListeners(e,this._onTouchEventCallback,r),t.isStopped())return;if(i&&0<s.length&&(this._dispatchEventToListeners(i,this._onTouchesEventCallback,{event:t,touches:s}),t.isStopped()))return;this._updateTouchListeners(t)}},_onTouchesEventCallback:function(t,e){if(!t._registered)return!1;var i=cc.EventTouch.EventCode,n=e.event,s=e.touches,r=n.getEventCode();return n._setCurrentTarget(t._node),r===i.BEGAN&&t.onTouchesBegan?t.onTouchesBegan(s,n):r===i.MOVED&&t.onTouchesMoved?t.onTouchesMoved(s,n):r===i.ENDED&&t.onTouchesEnded?t.onTouchesEnded(s,n):r===i.CANCELLED&&t.onTouchesCancelled&&t.onTouchesCancelled(s,n),!!n.isStopped()&&(cc.eventManager._updateTouchListeners(n),!0)},_associateNodeAndEventListener:function(t,e){var i=this._nodeListenersMap[t.__instanceId];i||(i=[],this._nodeListenersMap[t.__instanceId]=i),i.push(e)},_dissociateNodeAndEventListener:function(t,e){var i=this._nodeListenersMap[t.__instanceId];i&&(cc.arrayRemoveObject(i,e),0===i.length&&delete this._nodeListenersMap[t.__instanceId])},_dispatchEventToListeners:function(t,e,i){var n,s=!1,r=t.getFixedPriorityListeners(),o=t.getSceneGraphPriorityListeners(),a=0;if(r&&0!==r.length)for(;a<t.gt0Index;++a)if((n=r[a]).isEnabled()&&!n._isPaused()&&n._isRegistered()&&e(n,i)){s=!0;break}if(o&&!s)for(t=0;t<o.length;t++)if((n=o[t]).isEnabled()&&!n._isPaused()&&n._isRegistered()&&e(n,i)){s=!0;break}if(r&&!s)for(;a<r.length&&(!(n=r[a]).isEnabled()||n._isPaused()||!n._isRegistered()||!e(n,i));++a);},_setDirty:function(t,e){var i=this._priorityDirtyFlagMap;i[t]=null==i[t]?e:e|i[t]},_visitTarget:function(t,e){var i=0,n=(c=t.getChildren()).length,s=this._globalZOrderNodeMap,r=this._nodeListenersMap;if(0<n){for(var o;i<n&&(o=c[i])&&0>o.getLocalZOrder();i++)this._visitTarget(o,!1);for(null!=r[t.__instanceId]&&(s[t.getGlobalZOrder()]||(s[t.getGlobalZOrder()]=[]),s[t.getGlobalZOrder()].push(t.__instanceId));i<n;i++)(o=c[i])&&this._visitTarget(o,!1)}else null!=r[t.__instanceId]&&(s[t.getGlobalZOrder()]||(s[t.getGlobalZOrder()]=[]),s[t.getGlobalZOrder()].push(t.__instanceId));if(e){var a,c=[];for(a in s)c.push(a);for(c.sort(this._sortNumberAsc),a=c.length,o=this._nodePriorityMap,i=0;i<a;i++)for(n=s[c[i]],r=0;r<n.length;r++)o[n[r]]=++this._nodePriorityIndex;this._globalZOrderNodeMap={}}},_sortNumberAsc:function(t,e){return t-e},addListener:function(t,e){if(cc.assert(t&&e,cc._LogInfos.eventManager_addListener_2),t instanceof cc.EventListener){if(t._isRegistered())return void cc.log(cc._LogInfos.eventManager_addListener_4)}else cc.assert(!cc.isNumber(e),cc._LogInfos.eventManager_addListener_3),t=cc.EventListener.create(t);if(t.checkAvailable()){if(cc.isNumber(e)){if(0===e)return void cc.log(cc._LogInfos.eventManager_addListener);t._setSceneGraphPriority(null),t._setFixedPriority(e),t._setRegistered(!0),t._setPaused(!1)}else t._setSceneGraphPriority(e),t._setFixedPriority(0),t._setRegistered(!0);return this._addListener(t),t}},addCustomListener:function(t,e,i){return t=new cc._EventListenerCustom(t,e,i),this.addListener(t,1),t},removeListener:function(t){if(null!=t){var e,i,n=this._listenersMap;for(i in n){var s=n[i],r=s.getFixedPriorityListeners();if(e=s.getSceneGraphPriorityListeners(),(e=this._removeListenerInVector(e,t))?this._setDirty(t._getListenerID(),this.DIRTY_SCENE_GRAPH_PRIORITY):(e=this._removeListenerInVector(r,t))&&this._setDirty(t._getListenerID(),this.DIRTY_FIXED_PRIORITY),s.empty()&&(delete this._priorityDirtyFlagMap[t._getListenerID()],delete n[i]),e)break}if(!e)for(i=0,s=(n=this._toAddedListeners).length;i<s;i++)if((r=n[i])===t){cc.arrayRemoveObject(n,r),r._setRegistered(!1);break}}},_removeListenerInCallback:function(t,e){if(null==t)return!1;for(var i=0,n=t.length;i<n;i++){var s=t[i];if(s._onCustomEvent===e||s._onEvent===e)return s._setRegistered(!1),null!=s._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(s._getSceneGraphPriority(),s),s._setSceneGraphPriority(null)),0===this._inDispatch&&cc.arrayRemoveObject(t,s),!0}return!1},_removeListenerInVector:function(t,e){if(null==t)return!1;for(var i=0,n=t.length;i<n;i++){var s=t[i];if(s===e)return s._setRegistered(!1),null!=s._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(s._getSceneGraphPriority(),s),s._setSceneGraphPriority(null)),0===this._inDispatch?cc.arrayRemoveObject(t,s):this._toRemovedListeners.push(s),!0}return!1},removeListeners:function(t,e){if(t instanceof cc.Node){if(delete this._nodePriorityMap[t.__instanceId],cc.arrayRemoveObject(this._dirtyNodes,t),n=this._nodeListenersMap[t.__instanceId]){for(var i=cc.copyArray(n),n=0;n<i.length;n++)this.removeListener(i[n]);i.length=0}for(i=this._toAddedListeners,n=0;n<i.length;){var s=i[n];s._getSceneGraphPriority()===t?(s._setSceneGraphPriority(null),s._setRegistered(!1),i.splice(n,1)):++n}if(!0===e)for(n=0,s=(i=t.getChildren()).length;n<s;n++)this.removeListeners(i[n],!0)}else t===cc.EventListener.TOUCH_ONE_BY_ONE?this._removeListenersForListenerID(cc._EventListenerTouchOneByOne.LISTENER_ID):t===cc.EventListener.TOUCH_ALL_AT_ONCE?this._removeListenersForListenerID(cc._EventListenerTouchAllAtOnce.LISTENER_ID):t===cc.EventListener.MOUSE?this._removeListenersForListenerID(cc._EventListenerMouse.LISTENER_ID):t===cc.EventListener.ACCELERATION?this._removeListenersForListenerID(cc._EventListenerAcceleration.LISTENER_ID):t===cc.EventListener.KEYBOARD?this._removeListenersForListenerID(cc._EventListenerKeyboard.LISTENER_ID):cc.log(cc._LogInfos.eventManager_removeListeners)},removeCustomListeners:function(t){this._removeListenersForListenerID(t)},removeAllListeners:function(){var t,e=this._listenersMap,i=this._internalCustomListenerIDs;for(t in e)-1===i.indexOf(t)&&this._removeListenersForListenerID(t)},setPriority:function(t,e){if(null!=t){var i,n=this._listenersMap;for(i in n){var s=n[i].getFixedPriorityListeners();if(s&&-1!==s.indexOf(t)){null!=t._getSceneGraphPriority()&&cc.log(cc._LogInfos.eventManager_setPriority),t._getFixedPriority()!==e&&(t._setFixedPriority(e),this._setDirty(t._getListenerID(),this.DIRTY_FIXED_PRIORITY));break}}}},setEnabled:function(t){this._isEnabled=t},isEnabled:function(){return this._isEnabled},dispatchEvent:function(t){if(this._isEnabled){if(this._updateDirtyFlagForSceneGraph(),this._inDispatch++,!t||!t.getType)throw Error("event is undefined");if(t._type===cc.Event.TOUCH)this._dispatchTouchEvent(t);else{var e=function(t){var e=cc.Event,i=t._type;return i===e.ACCELERATION?cc._EventListenerAcceleration.LISTENER_ID:i===e.CUSTOM?t._eventName:i===e.KEYBOARD?cc._EventListenerKeyboard.LISTENER_ID:i===e.MOUSE?cc._EventListenerMouse.LISTENER_ID:i===e.FOCUS?cc._EventListenerFocus.LISTENER_ID:(i===e.TOUCH&&cc.log(cc._LogInfos.__getListenerID),"")}(t);this._sortEventListeners(e),(e=this._listenersMap[e])&&(this._dispatchEventToListeners(e,this._onListenerCallback,t),this._onUpdateListeners(e))}this._inDispatch--}},_onListenerCallback:function(t,e){return e._setCurrentTarget(t._getSceneGraphPriority()),t._onEvent(e),e.isStopped()},dispatchCustomEvent:function(t,e){var i=new cc.EventCustom(t);i.setUserData(e),this.dispatchEvent(i)}},cc.EventAcceleration=cc.Event.extend({_acc:null,ctor:function(t){cc.Event.prototype.ctor.call(this,cc.Event.ACCELERATION),this._acc=t}}),cc.EventKeyboard=cc.Event.extend({_keyCode:0,_isPressed:!1,ctor:function(t,e){cc.Event.prototype.ctor.call(this,cc.Event.KEYBOARD),this._keyCode=t,this._isPressed=e}}),cc._EventListenerAcceleration=cc.EventListener.extend({_onAccelerationEvent:null,ctor:function(t){this._onAccelerationEvent=t;var e=this;cc.EventListener.prototype.ctor.call(this,cc.EventListener.ACCELERATION,cc._EventListenerAcceleration.LISTENER_ID,(function(t){e._onAccelerationEvent(t._acc,t)}))},checkAvailable:function(){return cc.assert(this._onAccelerationEvent,cc._LogInfos._EventListenerAcceleration_checkAvailable),!0},clone:function(){return new cc._EventListenerAcceleration(this._onAccelerationEvent)}}),cc._EventListenerAcceleration.LISTENER_ID="__cc_acceleration",cc._EventListenerAcceleration.create=function(t){return new cc._EventListenerAcceleration(t)},cc._EventListenerKeyboard=cc.EventListener.extend({onKeyPressed:null,onKeyReleased:null,ctor:function(){var t=this;cc.EventListener.prototype.ctor.call(this,cc.EventListener.KEYBOARD,cc._EventListenerKeyboard.LISTENER_ID,(function(e){e._isPressed?t.onKeyPressed&&t.onKeyPressed(e._keyCode,e):t.onKeyReleased&&t.onKeyReleased(e._keyCode,e)}))},clone:function(){var t=new cc._EventListenerKeyboard;return t.onKeyPressed=this.onKeyPressed,t.onKeyReleased=this.onKeyReleased,t},checkAvailable:function(){return null!==this.onKeyPressed||null!==this.onKeyReleased||(cc.log(cc._LogInfos._EventListenerKeyboard_checkAvailable),!1)}}),cc._EventListenerKeyboard.LISTENER_ID="__cc_keyboard",cc._EventListenerKeyboard.create=function(){return new cc._EventListenerKeyboard};var GlobalVertexBuffer=function(){var t=function(t,e){this.gl=t,this.vertexBuffer=t.createBuffer(),this.size=888,this.byteLength=e||3552*cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,this.data=new ArrayBuffer(this.byteLength),this.dataArray=new Float32Array(this.data),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.dataArray,t.DYNAMIC_DRAW),this._dirty=!1,this._spaces={0:this.byteLength}};return t.prototype={constructor:t,allocBuffer:function(t,e){var i=this._spaces[t];return!!(i&&i>=e)&&(delete this._spaces[t],i>e&&(this._spaces[t+e]=i-e),!0)},requestBuffer:function(t){var e,i;for(e in this._spaces)if(i=parseInt(e),this._spaces[e]>=t&&this.allocBuffer(i,t))return i;return-1},freeBuffer:function(t,e){var i,n,s=this._spaces;for(n in s){if((i=parseInt(n))>t)break;if(i+s[n]>=t){e=e+t-i,t=i;break}}s=t+e,this._spaces[s]&&(e+=this._spaces[s],delete this._spaces[s]),this._spaces[t]=e},setDirty:function(){this._dirty=!0},update:function(){this._dirty&&(this.gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.bufferSubData(gl.ARRAY_BUFFER,0,this.dataArray),this._dirty=!1)},updateSubData:function(t,e){this.gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.bufferSubData(gl.ARRAY_BUFFER,t,e)},destroy:function(){this.gl.deleteBuffer(this.vertexBuffer),this.vertexBuffer=this.texCoords=this.colors=this.positions=this.data=null}},t}();cc.rendererCanvas={childrenOrderDirty:!0,assignedZ:0,assignedZStep:1e-4,_transformNodePool:[],_renderCmds:[],_isCacheToCanvasOn:!1,_cacheToCanvasCmds:{},_cacheInstanceIds:[],_currentID:0,_clearColor:cc.color(),_clearFillStyle:"rgb(0, 0, 0)",_dirtyRegion:null,_allNeedDraw:!0,_enableDirtyRegion:!1,_debugDirtyRegion:!1,_canUseDirtyRegion:!1,_dirtyRegionCountThreshold:10,getRenderCmd:function(t){return t._createRenderCmd()},enableDirtyRegion:function(t){this._enableDirtyRegion=t},isDirtyRegionEnabled:function(){return this._enableDirtyRegion},setDirtyRegionCountThreshold:function(t){this._dirtyRegionCountThreshold=t},_collectDirtyRegion:function(){var t,e,i=this._renderCmds,n=this._dirtyRegion,s=0,r=!0,o=cc.Node.CanvasRenderCmd.RegionStatus;for(t=0,e=i.length;t<e;t++){var a=i[t],c=a._oldRegion,h=a._currentRegion;a._regionFlag>o.NotDirty&&(++s>this._dirtyRegionCountThreshold&&(r=!1),r&&(!h.isEmpty()&&n.addRegion(h),a._regionFlag>o.Dirty&&!c.isEmpty()&&n.addRegion(c)),a._regionFlag=o.NotDirty)}return r},_beginDrawDirtyRegion:function(t){var e=t.getContext(),i=this._dirtyRegion.getDirtyRegions();e.save(),t.setTransform({a:1,b:0,c:0,d:1,tx:0,ty:0},t._scaleX,t._scaleY),e.beginPath(),t=0;for(var n=i.length;t<n;++t){var s=i[t];e.rect(s._minX,-s._maxY,s._width,s._height)}e.clip()},_endDrawDirtyRegion:function(t){t.restore()},_debugDrawDirtyRegion:function(t){if(this._debugDirtyRegion){var e=t.getContext(),i=this._dirtyRegion.getDirtyRegions();t.setTransform({a:1,b:0,c:0,d:1,tx:0,ty:0},t._scaleX,t._scaleY),e.beginPath(),t=0;for(var n=i.length;t<n;++t){var s=i[t];e.rect(s._minX,-s._maxY,s._width,s._height)}i=e.fillStyle,e.fillStyle="green",e.fill(),e.fillStyle=i}},rendering:function(t){var e=this._dirtyRegion=this._dirtyRegion||new cc.DirtyRegion,i=cc._canvas,n=(t=t||cc._renderContext).getContext(),s=cc.view.getScaleX(),r=cc.view.getScaleY();t.setViewScale(s,r),t.computeRealOffsetY();var o,a=this._dirtyRegion.getDirtyRegions(),c=this._renderCmds,h=this._allNeedDraw||!this._enableDirtyRegion||!this._canUseDirtyRegion;for(o=!0,h||(o=this._collectDirtyRegion()),(h=h||!o)||this._beginDrawDirtyRegion(t),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i.width,i.height),255===this._clearColor.r&&255===this._clearColor.g&&255===this._clearColor.b||(t.setFillStyle(this._clearFillStyle),t.setGlobalAlpha(this._clearColor.a),n.fillRect(0,0,i.width,i.height)),i=0,o=c.length;i<o;i++){var l=c[i],u=!1,d=l._currentRegion;if(!d||h)u=!0;else for(var _=0,g=a.length;_<g;++_)if(a[_].intersects(d)){u=!0;break}u&&l.rendering(t,s,r)}h||(this._debugDrawDirtyRegion(t),this._endDrawDirtyRegion(n)),e.clear(),this._allNeedDraw=!1},_renderingToCacheCanvas:function(t,e,i,n){t||cc.log("The context of RenderTexture is invalid."),i=cc.isUndefined(i)?1:i,n=cc.isUndefined(n)?1:n,e=e||this._currentID;var s,r,o=this._cacheToCanvasCmds[e];for(t.computeRealOffsetY(),s=0,r=o.length;s<r;s++)o[s].rendering(t,i,n);this._removeCache(e),0===(t=this._cacheInstanceIds).length?this._isCacheToCanvasOn=!1:this._currentID=t[t.length-1]},_turnToCacheMode:function(t){this._isCacheToCanvasOn=!0,t=t||0,this._cacheToCanvasCmds[t]=[],-1===this._cacheInstanceIds.indexOf(t)&&this._cacheInstanceIds.push(t),this._currentID=t},_turnToNormalMode:function(){this._isCacheToCanvasOn=!1},_removeCache:function(t){t=t||this._currentID;var e=this._cacheToCanvasCmds[t];e&&(e.length=0,delete this._cacheToCanvasCmds[t]),cc.arrayRemoveObject(this._cacheInstanceIds,t)},resetFlag:function(){this.childrenOrderDirty=!1,this._transformNodePool.length=0},transform:function(){var t=this._transformNodePool;t.sort(this._sortNodeByLevelAsc);for(var e=0,i=t.length;e<i;e++)0!==t[e]._dirtyFlag&&t[e].updateStatus();t.length=0},transformDirty:function(){return 0<this._transformNodePool.length},_sortNodeByLevelAsc:function(t,e){return t._curLevel-e._curLevel},pushDirtyNode:function(t){this._transformNodePool.push(t)},clear:function(){},clearRenderCommands:function(){this._renderCmds.length=0,this._cacheInstanceIds.length=0,this._isCacheToCanvasOn=!1,this._canUseDirtyRegion=this._allNeedDraw=!0},pushRenderCommand:function(t){if(t.needDraw())if(t._canUseDirtyRegion||(this._canUseDirtyRegion=!1),this._isCacheToCanvasOn){var e=this._cacheToCanvasCmds[this._currentID];-1===e.indexOf(t)&&e.push(t)}else-1===this._renderCmds.indexOf(t)&&this._renderCmds.push(t)}},function(){cc.CanvasContextWrapper=function(t){this._context=t,this._saveCount=0,this._currentAlpha=t.globalAlpha,this._currentCompositeOperation=t.globalCompositeOperation,this._currentFillStyle=t.fillStyle,this._currentStrokeStyle=t.strokeStyle,this._offsetY=this._offsetX=0,this._realOffsetY=this.height,this._armatureMode=0};var t=cc.CanvasContextWrapper.prototype;t.resetCache=function(){var t=this._context;this._currentAlpha=t.globalAlpha,this._currentCompositeOperation=t.globalCompositeOperation,this._currentFillStyle=t.fillStyle,this._currentStrokeStyle=t.strokeStyle,this._realOffsetY=this._context.canvas.height+this._offsetY},t.setOffset=function(t,e){this._offsetX=t,this._offsetY=e,this._realOffsetY=this._context.canvas.height+this._offsetY},t.computeRealOffsetY=function(){this._realOffsetY=this._context.canvas.height+this._offsetY},t.setViewScale=function(t,e){this._scaleX=t,this._scaleY=e},t.getContext=function(){return this._context},t.save=function(){this._context.save(),this._saveCount++},t.restore=function(){this._context.restore(),this._saveCount--},t.setGlobalAlpha=function(t){0<this._saveCount?this._context.globalAlpha=t:this._currentAlpha!==t&&(this._currentAlpha=t,this._context.globalAlpha=t)},t.setCompositeOperation=function(t){0<this._saveCount?this._context.globalCompositeOperation=t:this._currentCompositeOperation!==t&&(this._currentCompositeOperation=t,this._context.globalCompositeOperation=t)},t.setFillStyle=function(t){0<this._saveCount?this._context.fillStyle=t:this._currentFillStyle!==t&&(this._currentFillStyle=t,this._context.fillStyle=t)},t.setStrokeStyle=function(t){0<this._saveCount?this._context.strokeStyle=t:this._currentStrokeStyle!==t&&(this._currentStrokeStyle=t,this._context.strokeStyle=t)},t.setTransform=function(t,e,i){0<this._armatureMode?(this.restore(),this.save(),this._context.transform(t.a*e,-t.b*i,-t.c*e,t.d*i,t.tx*e,-t.ty*i)):this._context.setTransform(t.a*e,-t.b*i,-t.c*e,t.d*i,this._offsetX+t.tx*e,this._realOffsetY-t.ty*i)},t._switchToArmatureMode=function(t,e,i,n){t?(this._armatureMode++,this._context.setTransform(e.a,e.c,e.b,e.d,this._offsetX+e.tx*i,this._realOffsetY-e.ty*n),this.save()):(this._armatureMode--,this.restore())}}(),cc.rendererWebGL=function(){var t={texture:null,blendSrc:null,blendDst:null,glProgramState:null},e=!1,i=null,n=null,s=0,r=0,o=0,a=null,c=null,h=null,l=null,u=0,d=!0,_={QUAD:0,TRIANGLE:1,CUSTOM:2};return{mat4Identity:null,childrenOrderDirty:!0,assignedZ:0,assignedZStep:.01,VertexType:_,_transformNodePool:[],_renderCmds:[],_isCacheToBufferOn:!1,_cacheToBufferCmds:{},_cacheInstanceIds:[],_currentID:0,_clearColor:cc.color(0,0,0,255),init:function(){(t=cc._renderContext).disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),this.mat4Identity=new cc.math.Matrix4,this.mat4Identity.identity();var t=cc.BATCH_VERTEX_COUNT,e=cc._renderContext;if(null===i&&(n=e.createBuffer(),i=e.createBuffer()),e=cc._renderContext,i){var r=6*Math.ceil(t/4);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i),l=new Uint16Array(r);for(var o=0,u=0;u<r;u+=6)l[u]=o+0,l[u+1]=o+1,l[u+2]=o+2,l[u+3]=o+1,l[u+4]=o+2,l[u+5]=o+3,o+=4;e.bufferData(e.ELEMENT_ARRAY_BUFFER,l,e.DYNAMIC_DRAW)}n&&(a=new ArrayBuffer(4*(6*t)),c=new Float32Array(a),h=new Uint32Array(a),e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,c,e.DYNAMIC_DRAW)),s=t-200},getVertexSize:function(){return s},getRenderCmd:function(t){return t._createRenderCmd()},_turnToCacheMode:function(t){this._isCacheToBufferOn=!0,t=t||0,this._cacheToBufferCmds[t]?this._cacheToBufferCmds[t].length=0:this._cacheToBufferCmds[t]=[],-1===this._cacheInstanceIds.indexOf(t)&&this._cacheInstanceIds.push(t),this._currentID=t},_turnToNormalMode:function(){this._isCacheToBufferOn=!1},_removeCache:function(t){t=t||this._currentID;var e=this._cacheToBufferCmds[t];e&&(e.length=0,delete this._cacheToBufferCmds[t]),cc.arrayRemoveObject(this._cacheInstanceIds,t)},_renderingToBuffer:function(t){t=t||this._currentID,this.rendering(cc._renderContext,this._cacheToBufferCmds[t]),this._removeCache(t),0===(t=this._cacheInstanceIds).length?this._isCacheToBufferOn=!1:this._currentID=t[t.length-1]},resetFlag:function(){this.childrenOrderDirty&&(this.childrenOrderDirty=!1),this._transformNodePool.length=0},transform:function(){var t,e,i=this._transformNodePool;for(i.sort(this._sortNodeByLevelAsc),t=0,e=i.length;t<e;t++)i[t].updateStatus();i.length=0},transformDirty:function(){return 0<this._transformNodePool.length},_sortNodeByLevelAsc:function(t,e){return t._curLevel-e._curLevel},pushDirtyNode:function(t){this._transformNodePool.push(t)},clearRenderCommands:function(){this._renderCmds.length=0},clear:function(){var t=cc._renderContext;t.clearColor(this._clearColor.r/255,this._clearColor.g/255,this._clearColor.b/255,this._clearColor.a/255),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},setDepthTest:function(t){var e=cc._renderContext;t?(e.clearDepth(1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL)):e.disable(e.DEPTH_TEST)},pushRenderCommand:function(t){if(t.rendering||t.uploadData)if(this._isCacheToBufferOn){var e=this._cacheToBufferCmds[this._currentID];e&&-1===e.indexOf(t)&&e.push(t)}else this._renderCmds&&-1===this._renderCmds.indexOf(t)&&this._renderCmds.push(t)},_increaseBatchingSize:function(t,e,i){switch(e=e||_.QUAD){case _.QUAD:for(e=0;e<t;e+=4)i=r+e,l[o++]=i+0,l[o++]=i+1,l[o++]=i+2,l[o++]=i+1,l[o++]=i+2,l[o++]=i+3;break;case _.TRIANGLE:for(d=!1,e=0;e<t;e+=3)i=r+e,l[o++]=i+0,l[o++]=i+1,l[o++]=i+2;break;case _.CUSTOM:d=!1;var n=i.length;for(e=0;e<n;e++)l[o++]=r+i[e];break;default:return}r+=t},_updateBatchedInfo:function(e,i,n){return(e!==t.texture||i.src!==t.blendSrc||i.dst!==t.blendDst||n!==t.glProgramState)&&(this._batchRendering(),t.texture=e,t.blendSrc=i.src,t.blendDst=i.dst,t.glProgramState=n,!0)},_breakBatch:function(){e=!0},_uploadBufferData:function(i){r>=s&&this._batchRendering();var n=(a=i._node)._texture||a._spriteFrame&&a._spriteFrame._texture,o=a._blendFunc.src,a=a._blendFunc.dst,l=i._glProgramState;(e||t.texture!==n||t.blendSrc!==o||t.blendDst!==a||t.glProgramState!==l)&&(this._batchRendering(),t.texture=n,t.blendSrc=o,t.blendDst=a,t.glProgramState=l,e=!1),0<(n=i.uploadData(c,h,6*r))&&this._increaseBatchingSize(n,i.vertexType)},_batchRendering:function(){if(0!==r&&t.texture){var e=cc._renderContext,a=t.texture,h=t.glProgramState,_=r>.5*s;h&&(h.apply(),h.getGLProgram()._updateProjectionUniform()),cc.glBlendFunc(t.blendSrc,t.blendDst),cc.glBindTexture2DN(0,a),e.bindBuffer(e.ARRAY_BUFFER,n),_?e.bufferData(e.ARRAY_BUFFER,c,e.DYNAMIC_DRAW):(a=c.subarray(0,6*r),e.bufferData(e.ARRAY_BUFFER,a,e.DYNAMIC_DRAW)),e.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),e.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR),e.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS),e.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,3,e.FLOAT,!1,24,0),e.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR,4,e.UNSIGNED_BYTE,!0,24,12),e.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS,2,e.FLOAT,!1,24,16),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i),(!u||!d||o>u)&&(_?e.bufferData(e.ELEMENT_ARRAY_BUFFER,l,e.DYNAMIC_DRAW):e.bufferData(e.ELEMENT_ARRAY_BUFFER,l.subarray(0,o),e.DYNAMIC_DRAW)),e.drawElements(e.TRIANGLES,o,e.UNSIGNED_SHORT,0),cc.g_NumberOfDraws++,d?u=o:(u=0,d=!0),o=r=0}},rendering:function(e,i){var n,s,o,a=i||this._renderCmds,c=e||cc._renderContext;for(c.bindBuffer(gl.ARRAY_BUFFER,null),n=0,s=a.length;n<s;++n)(o=a[n]).needDraw()&&(o.uploadData?this._uploadBufferData(o):(0<r&&this._batchRendering(),o.rendering(c)));this._batchRendering(),t.texture=null}}}();var Region=function(){this._area=this._height=this._width=this._maxY=this._maxX=this._minY=this._minX=0},regionProto=Region.prototype,regionPool=[];function regionCreate(){var t=regionPool.pop();return t||(t=new Region),t}function regionRelease(t){regionPool.push(t)}function unionArea(t,e){return((t._maxX>e._maxX?t._maxX:e._maxX)-(t._minX<e._minX?t._minX:e._minX))*((t._maxY>e._maxY?t._maxY:e._maxY)-(t._minY<e._minY?t._minY:e._minY))}regionProto.setTo=function(t,e,i,n){return this._minX=t,this._minY=e,this._maxX=i,this._maxY=n,this.updateArea(),this},regionProto.intValues=function(){this._minX=Math.floor(this._minX),this._minY=Math.floor(this._minY),this._maxX=Math.ceil(this._maxX),this._maxY=Math.ceil(this._maxY),this.updateArea()},regionProto.updateArea=function(){this._width=this._maxX-this._minX,this._height=this._maxY-this._minY,this._area=this._width*this._height},regionProto.union=function(t){0>=this._width||0>=this._height?this.setTo(t._minX,t._minY,t._maxX,t._maxY):(this._minX>t._minX&&(this._minX=t._minX),this._minY>t._minY&&(this._minY=t._minY),this._maxX<t._maxX&&(this._maxX=t._maxX),this._maxY<t._maxY&&(this._maxY=t._maxY),this.updateArea())},regionProto.setEmpty=function(){this._area=this._height=this._width=this._maxY=this._maxX=this._minY=this._minX=0},regionProto.isEmpty=function(){return 0>=this._width||0>=this._height},regionProto.intersects=function(t){if(0>=this._width||0>=this._height||0>=t._width||0>=t._height)return!1;var e=this._minX>t._minX?this._minX:t._minX,i=this._maxX<t._maxX?this._maxX:t._maxX;return!(e>i)&&(e=this._minY>t._minY?this._minY:t._minY)<=(i=this._maxY<t._maxY?this._maxY:t._maxY)},regionProto.updateRegion=function(t,e){if(0==t.width||0==t.height)this.setEmpty();else{var i,n,s,r=e.a,o=e.b,a=e.c,c=e.d,h=e.tx,l=e.ty,u=t.x,d=t.y,_=u+t.width,g=d+t.height;if(1==r&&0==o&&0==a&&1==c)i=u+h-1,n=d+l-1,s=_+h+1,d=g+l+1;else{i=r*u+a*d+h,n=o*u+c*d+l,s=r*_+a*d+h;d=o*_+c*d+l;var f=r*_+a*g+h;_=o*_+c*g+l,h=r*u+a*g+h,l=o*u+c*g+l,g=0;i>s&&(g=i,i=s,s=g),f>h&&(g=f,f=h,h=g),i=(i<f?i:f)-1,s=(s>h?s:h)+1,n>d&&(g=n,n=d,d=g),_>l&&(g=_,_=l,l=g),n=(n<_?n:_)-1,d=(d>l?d:l)+1}this._minX=i,this._minY=n,this._maxX=s,this._maxY=d,this._width=s-i,this._height=d-n,this._area=this._width*this._height}};var DirtyRegion=function(){this.dirtyList=[],this.hasClipRect=!1,this.clipArea=this.clipHeight=this.clipWidth=0,this.clipRectChanged=!1},dirtyRegionProto=DirtyRegion.prototype;dirtyRegionProto.setClipRect=function(t,e){this.clipRectChanged=this.hasClipRect=!0,this.clipWidth=Math.ceil(t),this.clipHeight=Math.ceil(e),this.clipArea=this.clipWidth*this.clipHeight},dirtyRegionProto.addRegion=function(t){var e=t._minX,i=t._minY,n=t._maxX;if(t=t._maxY,this.hasClipRect&&(0>e&&(e=0),0>i&&(i=0),n>this.clipWidth&&(n=this.clipWidth),t>this.clipHeight&&(t=this.clipHeight)),e>=n||i>=t)return!1;if(this.clipRectChanged)return!0;var s=this.dirtyList,r=regionCreate();return s.push(r.setTo(e,i,n,t)),this.mergeDirtyList(s),!0},dirtyRegionProto.clear=function(){for(var t=this.dirtyList,e=t.length,i=0;i<e;i++)regionRelease(t[i]);t.length=0},dirtyRegionProto.getDirtyRegions=function(){var t=this.dirtyList;if(this.clipRectChanged){this.clipRectChanged=!1,this.clear();var e=regionCreate();t.push(e.setTo(0,0,this.clipWidth,this.clipHeight))}else for(;this.mergeDirtyList(t););if(0<(t=this.dirtyList.length))for(e=0;e<t;e++)this.dirtyList[e].intValues();return this.dirtyList},dirtyRegionProto.mergeDirtyList=function(t){var e=t.length;if(2>e)return!1;for(var i=this.hasClipRect,n=3<e?Number.POSITIVE_INFINITY:0,s=0,r=0,o=0,a=0;a<e-1;a++){var c=t[a];i&&(o+=c.area);for(var h=a+1;h<e;h++){var l;n>(l=unionArea(c,l=t[h])-c.area-l.area)&&(s=a,r=h,n=l)}}return i&&.95<o/this.clipArea&&(this.clipRectChanged=!0),s!=r&&(e=t[r],t[s].union(e),regionRelease(e),t.splice(r,1),!0)},cc.Region=Region,cc.DirtyRegion=DirtyRegion,cc._tmp.PrototypeCCNode=function(){var t=cc.Node.prototype;cc.defineGetterSetter(t,"x",t.getPositionX,t.setPositionX),cc.defineGetterSetter(t,"y",t.getPositionY,t.setPositionY),cc.defineGetterSetter(t,"width",t._getWidth,t._setWidth),cc.defineGetterSetter(t,"height",t._getHeight,t._setHeight),cc.defineGetterSetter(t,"anchorX",t._getAnchorX,t._setAnchorX),cc.defineGetterSetter(t,"anchorY",t._getAnchorY,t._setAnchorY),cc.defineGetterSetter(t,"skewX",t.getSkewX,t.setSkewX),cc.defineGetterSetter(t,"skewY",t.getSkewY,t.setSkewY),cc.defineGetterSetter(t,"zIndex",t.getLocalZOrder,t.setLocalZOrder),cc.defineGetterSetter(t,"vertexZ",t.getVertexZ,t.setVertexZ),cc.defineGetterSetter(t,"rotation",t.getRotation,t.setRotation),cc.defineGetterSetter(t,"rotationX",t.getRotationX,t.setRotationX),cc.defineGetterSetter(t,"rotationY",t.getRotationY,t.setRotationY),cc.defineGetterSetter(t,"scale",t.getScale,t.setScale),cc.defineGetterSetter(t,"scaleX",t.getScaleX,t.setScaleX),cc.defineGetterSetter(t,"scaleY",t.getScaleY,t.setScaleY),cc.defineGetterSetter(t,"children",t.getChildren),cc.defineGetterSetter(t,"childrenCount",t.getChildrenCount),cc.defineGetterSetter(t,"parent",t.getParent,t.setParent),cc.defineGetterSetter(t,"visible",t.isVisible,t.setVisible),cc.defineGetterSetter(t,"running",t.isRunning),cc.defineGetterSetter(t,"ignoreAnchor",t.isIgnoreAnchorPointForPosition,t.ignoreAnchorPointForPosition),cc.defineGetterSetter(t,"actionManager",t.getActionManager,t.setActionManager),cc.defineGetterSetter(t,"scheduler",t.getScheduler,t.setScheduler),cc.defineGetterSetter(t,"shaderProgram",t.getShaderProgram,t.setShaderProgram),cc.defineGetterSetter(t,"opacity",t.getOpacity,t.setOpacity),cc.defineGetterSetter(t,"opacityModifyRGB",t.isOpacityModifyRGB),cc.defineGetterSetter(t,"cascadeOpacity",t.isCascadeOpacityEnabled,t.setCascadeOpacityEnabled),cc.defineGetterSetter(t,"color",t.getColor,t.setColor),cc.defineGetterSetter(t,"cascadeColor",t.isCascadeColorEnabled,t.setCascadeColorEnabled)},cc.NODE_TAG_INVALID=-1,cc.s_globalOrderOfArrival=1,cc.Node=cc.Class.extend({_localZOrder:0,_globalZOrder:0,_vertexZ:0,_customZ:NaN,_rotationX:0,_rotationY:0,_scaleX:1,_scaleY:1,_position:null,_normalizedPosition:null,_usingNormalizedPosition:!1,_normalizedPositionDirty:!1,_skewX:0,_skewY:0,_children:null,_visible:!0,_anchorPoint:null,_contentSize:null,_running:!1,_parent:null,_ignoreAnchorPointForPosition:!1,tag:cc.NODE_TAG_INVALID,userData:null,userObject:null,_reorderChildDirty:!1,arrivalOrder:0,_actionManager:null,_scheduler:null,_additionalTransformDirty:!1,_additionalTransform:null,_componentContainer:null,_isTransitionFinished:!1,_className:"Node",_showNode:!1,_name:"",_realOpacity:255,_realColor:null,_cascadeColorEnabled:!1,_cascadeOpacityEnabled:!1,_renderCmd:null,ctor:function(){this._anchorPoint=cc.p(0,0),this._contentSize=cc.size(0,0),this._position=cc.p(0,0),this._normalizedPosition=cc.p(0,0),this._children=[],this._additionalTransform=cc.affineTransformMakeIdentity(),cc.ComponentContainer&&(this._componentContainer=new cc.ComponentContainer(this)),this._realColor=cc.color(255,255,255,255),this._renderCmd=this._createRenderCmd()},init:function(){return!0},attr:function(t){for(var e in t)this[e]=t[e]},getSkewX:function(){return this._skewX},setSkewX:function(t){this._skewX=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getSkewY:function(){return this._skewY},setSkewY:function(t){this._skewY=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},setLocalZOrder:function(t){t!==this._localZOrder&&(this._parent?this._parent.reorderChild(this,t):this._localZOrder=t,cc.eventManager._setDirtyForNode(this))},_setLocalZOrder:function(t){this._localZOrder=t},getLocalZOrder:function(){return this._localZOrder},getZOrder:function(){return cc.log(cc._LogInfos.Node_getZOrder),this.getLocalZOrder()},setZOrder:function(t){cc.log(cc._LogInfos.Node_setZOrder),this.setLocalZOrder(t)},setGlobalZOrder:function(t){this._globalZOrder!==t&&(this._globalZOrder=t,cc.eventManager._setDirtyForNode(this))},getGlobalZOrder:function(){return this._globalZOrder},getVertexZ:function(){return this._vertexZ},setVertexZ:function(t){this._customZ=this._vertexZ=t},getRotation:function(){return this._rotationX!==this._rotationY&&cc.log(cc._LogInfos.Node_getRotation),this._rotationX},setRotation:function(t){this._rotationX=this._rotationY=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getRotationX:function(){return this._rotationX},setRotationX:function(t){this._rotationX=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getRotationY:function(){return this._rotationY},setRotationY:function(t){this._rotationY=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getScale:function(){return this._scaleX!==this._scaleY&&cc.log(cc._LogInfos.Node_getScale),this._scaleX},setScale:function(t,e){this._scaleX=t,this._scaleY=e||0===e?e:t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getScaleX:function(){return this._scaleX},setScaleX:function(t){this._scaleX=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getScaleY:function(){return this._scaleY},setScaleY:function(t){this._scaleY=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},setPosition:function(t,e){var i=this._position;if(void 0===e){if(i.x===t.x&&i.y===t.y)return;i.x=t.x,i.y=t.y}else{if(i.x===t&&i.y===e)return;i.x=t,i.y=e}this._usingNormalizedPosition=!1,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},setNormalizedPosition:function(t,e){var i=this._normalizedPosition;void 0===e?(i.x=t.x,i.y=t.y):(i.x=t,i.y=e),this._normalizedPositionDirty=this._usingNormalizedPosition=!0,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getPosition:function(){return cc.p(this._position)},getNormalizedPosition:function(){return cc.p(this._normalizedPosition)},getPositionX:function(){return this._position.x},setPositionX:function(t){this._position.x=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getPositionY:function(){return this._position.y},setPositionY:function(t){this._position.y=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getChildrenCount:function(){return this._children.length},getChildren:function(){return this._children},isVisible:function(){return this._visible},setVisible:function(t){this._visible!==t&&(this._visible=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),cc.renderer.childrenOrderDirty=!0)},getAnchorPoint:function(){return cc.p(this._anchorPoint)},setAnchorPoint:function(t,e){var i=this._anchorPoint;if(void 0===e){if(t.x===i.x&&t.y===i.y)return;i.x=t.x,i.y=t.y}else{if(t===i.x&&e===i.y)return;i.x=t,i.y=e}this._renderCmd._updateAnchorPointInPoint()},_getAnchorX:function(){return this._anchorPoint.x},_setAnchorX:function(t){this._anchorPoint.x!==t&&(this._anchorPoint.x=t,this._renderCmd._updateAnchorPointInPoint())},_getAnchorY:function(){return this._anchorPoint.y},_setAnchorY:function(t){this._anchorPoint.y!==t&&(this._anchorPoint.y=t,this._renderCmd._updateAnchorPointInPoint())},getAnchorPointInPoints:function(){return this._renderCmd.getAnchorPointInPoints()},_getWidth:function(){return this._contentSize.width},_setWidth:function(t){this._contentSize.width=t,this._renderCmd._updateAnchorPointInPoint()},_getHeight:function(){return this._contentSize.height},_setHeight:function(t){this._contentSize.height=t,this._renderCmd._updateAnchorPointInPoint()},getContentSize:function(){return cc.size(this._contentSize)},setContentSize:function(t,e){var i=this._contentSize;if(void 0===e){if(t.width===i.width&&t.height===i.height)return;i.width=t.width,i.height=t.height}else{if(t===i.width&&e===i.height)return;i.width=t,i.height=e}this._renderCmd._updateAnchorPointInPoint()},isRunning:function(){return this._running},getParent:function(){return this._parent},setParent:function(t){this._parent=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},isIgnoreAnchorPointForPosition:function(){return this._ignoreAnchorPointForPosition},ignoreAnchorPointForPosition:function(t){t!==this._ignoreAnchorPointForPosition&&(this._ignoreAnchorPointForPosition=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty))},getTag:function(){return this.tag},setTag:function(t){this.tag=t},setName:function(t){this._name=t},getName:function(){return this._name},getUserData:function(){return this.userData},setUserData:function(t){this.userData=t},getUserObject:function(){return this.userObject},setUserObject:function(t){this.userObject!==t&&(this.userObject=t)},getOrderOfArrival:function(){return this.arrivalOrder},setOrderOfArrival:function(t){this.arrivalOrder=t},getActionManager:function(){return this._actionManager||cc.director.getActionManager()},setActionManager:function(t){this._actionManager!==t&&(this.stopAllActions(),this._actionManager=t)},getScheduler:function(){return this._scheduler||cc.director.getScheduler()},setScheduler:function(t){this._scheduler!==t&&(this.unscheduleAllCallbacks(),this._scheduler=t)},boundingBox:function(){return cc.log(cc._LogInfos.Node_boundingBox),this.getBoundingBox()},getBoundingBox:function(){var t=cc.rect(0,0,this._contentSize.width,this._contentSize.height);return cc._rectApplyAffineTransformIn(t,this.getNodeToParentTransform())},cleanup:function(){this.stopAllActions(),this.unscheduleAllCallbacks(),cc.eventManager.removeListeners(this)},getChildByTag:function(t){var e=this._children;if(null!==e)for(var i=0;i<e.length;i++){var n=e[i];if(n&&n.tag===t)return n}return null},getChildByName:function(t){if(!t)return cc.log("Invalid name"),null;for(var e=this._children,i=0,n=e.length;i<n;i++)if(e[i]._name===t)return e[i];return null},addChild:function(t,e,i){e=void 0===e?t._localZOrder:e;var n,s=!1;void 0===i?n=t._name:"string"==typeof i?(n=i,i=void 0):"number"==typeof i&&(s=!0,n=""),cc.assert(t,cc._LogInfos.Node_addChild_3),cc.assert(null===t._parent,"child already added. It can't be added again"),this._addChildHelper(t,e,i,n,s)},_addChildHelper:function(t,e,i,n,s){this._children||(this._children=[]),this._insertChild(t,e),s?t.setTag(i):t.setName(n),t.setParent(this),t.setOrderOfArrival(cc.s_globalOrderOfArrival++),this._running&&(t._performRecursive(cc.Node._stateCallbackType.onEnter),this._isTransitionFinished&&t._performRecursive(cc.Node._stateCallbackType.onEnterTransitionDidFinish)),t._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),this._cascadeColorEnabled&&t._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty),this._cascadeOpacityEnabled&&t._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},removeFromParent:function(t){this._parent&&(void 0===t&&(t=!0),this._parent.removeChild(this,t))},removeFromParentAndCleanup:function(t){cc.log(cc._LogInfos.Node_removeFromParentAndCleanup),this.removeFromParent(t)},removeChild:function(t,e){0!==this._children.length&&(void 0===e&&(e=!0),-1<this._children.indexOf(t)&&this._detachChild(t,e),cc.renderer.childrenOrderDirty=!0)},removeChildByTag:function(t,e){t===cc.NODE_TAG_INVALID&&cc.log(cc._LogInfos.Node_removeChildByTag);var i=this.getChildByTag(t);i?this.removeChild(i,e):cc.log(cc._LogInfos.Node_removeChildByTag_2,t)},removeAllChildrenWithCleanup:function(t){this.removeAllChildren(t)},removeAllChildren:function(t){var e=this._children;if(null!==e){void 0===t&&(t=!0);for(var i=0;i<e.length;i++){var n=e[i];n&&(this._running&&(n._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart),n._performRecursive(cc.Node._stateCallbackType.onExit)),t&&n._performRecursive(cc.Node._stateCallbackType.cleanup),n.parent=null,n._renderCmd.detachFromParent())}this._children.length=0,cc.renderer.childrenOrderDirty=!0}},_detachChild:function(t,e){this._running&&(t._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart),t._performRecursive(cc.Node._stateCallbackType.onExit)),e&&t._performRecursive(cc.Node._stateCallbackType.cleanup),t.parent=null,t._renderCmd.detachFromParent(),cc.arrayRemoveObject(this._children,t)},_insertChild:function(t,e){cc.renderer.childrenOrderDirty=this._reorderChildDirty=!0,this._children.push(t),t._setLocalZOrder(e)},setNodeDirty:function(){this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},reorderChild:function(t,e){cc.assert(t,cc._LogInfos.Node_reorderChild),-1===this._children.indexOf(t)?cc.log(cc._LogInfos.Node_reorderChild_2):(cc.renderer.childrenOrderDirty=this._reorderChildDirty=!0,t.arrivalOrder=cc.s_globalOrderOfArrival,cc.s_globalOrderOfArrival++,t._setLocalZOrder(e),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.orderDirty))},sortAllChildren:function(){if(this._reorderChildDirty){var t,e,i,n=this._children,s=n.length;for(t=1;t<s;t++){for(i=n[t],e=t-1;0<=e;){if(i._localZOrder<n[e]._localZOrder)n[e+1]=n[e];else{if(!(i._localZOrder===n[e]._localZOrder&&i.arrivalOrder<n[e].arrivalOrder))break;n[e+1]=n[e]}e--}n[e+1]=i}this._reorderChildDirty=!1}},draw:function(t){},transformAncestors:function(){null!==this._parent&&(this._parent.transformAncestors(),this._parent.transform())},onEnter:function(){this._isTransitionFinished=!1,this._running=!0,this.resume()},_performRecursive:function(t){var e=cc.Node._stateCallbackType;if(!(t>=e.max)){var i,n,s,r,o,a=0,c=cc.Node._performStacks[cc.Node._performing];for(c||(c=[],cc.Node._performStacks.push(c)),c.length=0,cc.Node._performing++,s=c[0]=this;s;){if((i=s._children)&&0<i.length)for(r=0,o=i.length;r<o;++r)n=i[r],c.push(n);if((i=s._protectedChildren)&&0<i.length)for(r=0,o=i.length;r<o;++r)n=i[r],c.push(n);s=c[++a]}for(r=c.length-1;0<=r;--r)if(s=c[r],c[r]=null,s)switch(t){case e.onEnter:s.onEnter();break;case e.onExit:s.onExit();break;case e.onEnterTransitionDidFinish:s.onEnterTransitionDidFinish();break;case e.cleanup:s.cleanup();break;case e.onExitTransitionDidStart:s.onExitTransitionDidStart()}cc.Node._performing--}},onEnterTransitionDidFinish:function(){this._isTransitionFinished=!0},onExitTransitionDidStart:function(){},onExit:function(){this._running=!1,this.pause(),this.removeAllComponents()},runAction:function(t){return cc.assert(t,cc._LogInfos.Node_runAction),this.actionManager.addAction(t,this,!this._running),t},stopAllActions:function(){this.actionManager&&this.actionManager.removeAllActionsFromTarget(this)},stopAction:function(t){this.actionManager.removeAction(t)},stopActionByTag:function(t){t===cc.ACTION_TAG_INVALID?cc.log(cc._LogInfos.Node_stopActionByTag):this.actionManager.removeActionByTag(t,this)},getActionByTag:function(t){return t===cc.ACTION_TAG_INVALID?(cc.log(cc._LogInfos.Node_getActionByTag),null):this.actionManager.getActionByTag(t,this)},getNumberOfRunningActions:function(){return this.actionManager.numberOfRunningActionsInTarget(this)},scheduleUpdate:function(){this.scheduleUpdateWithPriority(0)},scheduleUpdateWithPriority:function(t){this.scheduler.scheduleUpdate(this,t,!this._running)},unscheduleUpdate:function(){this.scheduler.unscheduleUpdate(this)},schedule:function(t,e,i,n,s){var r=arguments.length;"function"==typeof t?1===r?(e=0,i=cc.REPEAT_FOREVER,n=0,s=this.__instanceId):2===r?"number"==typeof e?(i=cc.REPEAT_FOREVER,n=0,s=this.__instanceId):(s=e,e=0,i=cc.REPEAT_FOREVER,n=0):3===r?("string"==typeof i?(s=i,i=cc.REPEAT_FOREVER):s=this.__instanceId,n=0):4===r&&(s=this.__instanceId):1===r?(e=0,i=cc.REPEAT_FOREVER,n=0):2===r&&(i=cc.REPEAT_FOREVER,n=0),cc.assert(t,cc._LogInfos.Node_schedule),cc.assert(0<=e,cc._LogInfos.Node_schedule_2),e=e||0,i=isNaN(i)?cc.REPEAT_FOREVER:i,this.scheduler.schedule(t,this,e,i,n||0,!this._running,s)},scheduleOnce:function(t,e,i){void 0===i&&(i=this.__instanceId),this.schedule(t,0,0,e,i)},unschedule:function(t){t&&this.scheduler.unschedule(t,this)},unscheduleAllCallbacks:function(){this.scheduler.unscheduleAllForTarget(this)},resumeSchedulerAndActions:function(){cc.log(cc._LogInfos.Node_resumeSchedulerAndActions),this.resume()},resume:function(){this.scheduler.resumeTarget(this),this.actionManager&&this.actionManager.resumeTarget(this),cc.eventManager.resumeTarget(this)},pauseSchedulerAndActions:function(){cc.log(cc._LogInfos.Node_pauseSchedulerAndActions),this.pause()},pause:function(){this.scheduler.pauseTarget(this),this.actionManager&&this.actionManager.pauseTarget(this),cc.eventManager.pauseTarget(this)},setAdditionalTransform:function(t){if(void 0===t)return this._additionalTransformDirty=!1;this._additionalTransform=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),this._additionalTransformDirty=!0},getParentToNodeTransform:function(){return this._renderCmd.getParentToNodeTransform()},parentToNodeTransform:function(){return this.getParentToNodeTransform()},getNodeToWorldTransform:function(){for(var t=this.getNodeToParentTransform(),e=this._parent;null!==e;e=e.parent)t=cc.affineTransformConcat(t,e.getNodeToParentTransform());return t},nodeToWorldTransform:function(){return this.getNodeToWorldTransform()},getWorldToNodeTransform:function(){return cc.affineTransformInvert(this.getNodeToWorldTransform())},worldToNodeTransform:function(){return this.getWorldToNodeTransform()},convertToNodeSpace:function(t){return cc.pointApplyAffineTransform(t,this.getWorldToNodeTransform())},convertToWorldSpace:function(t){return t=t||cc.p(0,0),cc.pointApplyAffineTransform(t,this.getNodeToWorldTransform())},convertToNodeSpaceAR:function(t){return cc.pSub(this.convertToNodeSpace(t),this._renderCmd.getAnchorPointInPoints())},convertToWorldSpaceAR:function(t){return t=t||cc.p(0,0),t=cc.pAdd(t,this._renderCmd.getAnchorPointInPoints()),this.convertToWorldSpace(t)},_convertToWindowSpace:function(t){return t=this.convertToWorldSpace(t),cc.director.convertToUI(t)},convertTouchToNodeSpace:function(t){return t=t.getLocation(),this.convertToNodeSpace(t)},convertTouchToNodeSpaceAR:function(t){return t=cc.director.convertToGL(t.getLocation()),this.convertToNodeSpaceAR(t)},update:function(t){this._componentContainer&&!this._componentContainer.isEmpty()&&this._componentContainer.visit(t)},updateTransform:function(){for(var t,e=this._children,i=0;i<e.length;i++)(t=e[i])&&t.updateTransform()},retain:function(){},release:function(){},getComponent:function(t){return this._componentContainer?this._componentContainer.getComponent(t):null},addComponent:function(t){this._componentContainer&&this._componentContainer.add(t)},removeComponent:function(t){return!!this._componentContainer&&this._componentContainer.remove(t)},removeAllComponents:function(){this._componentContainer&&this._componentContainer.removeAll()},grid:null,visit:function(t){var e=this._renderCmd,i=t?t._renderCmd:null;if(this._visible){t=cc.renderer,e.visit(i);var n,s=this._children,r=s.length;if(0<r){for(this._reorderChildDirty&&this.sortAllChildren(),i=0;i<r&&0>(n=s[i])._localZOrder;i++)n.visit(this);for(t.pushRenderCommand(e);i<r;i++)s[i].visit(this)}else t.pushRenderCommand(e);e._dirtyFlag=0}else e._propagateFlagsDown(i)},transform:function(t,e){this._renderCmd.transform(t,e)},nodeToParentTransform:function(){return this.getNodeToParentTransform()},getNodeToParentTransform:function(t){var e=this._renderCmd.getNodeToParentTransform();if(t){e={a:e.a,b:e.b,c:e.c,d:e.d,tx:e.tx,ty:e.ty};for(var i=this._parent;null!=i&&i!=t;i=i.getParent())cc.affineTransformConcatIn(e,i.getNodeToParentTransform())}return e},getNodeToParentAffineTransform:function(t){return this.getNodeToParentTransform(t)},getCamera:function(){return null},getGrid:function(){return this.grid},setGrid:function(t){this.grid=t},getShaderProgram:function(){return this._renderCmd.getShaderProgram()},setShaderProgram:function(t){this._renderCmd.setShaderProgram(t)},setGLProgramState:function(t){this._renderCmd.setGLProgramState(t)},getGLProgramState:function(){return this._renderCmd.getGLProgramState()},getGLServerState:function(){return 0},setGLServerState:function(t){},getBoundingBoxToWorld:function(){var t=cc.rect(0,0,this._contentSize.width,this._contentSize.height),e=this.getNodeToWorldTransform();t=cc.rectApplyAffineTransform(t,e);if(!this._children)return t;for(var i=this._children,n=0;n<i.length;n++){var s=i[n];s&&s._visible&&(s=s._getBoundingBoxToCurrentNode(e))&&(t=cc.rectUnion(t,s))}return t},_getBoundingBoxToCurrentNode:function(t){var e=cc.rect(0,0,this._contentSize.width,this._contentSize.height);if(t=void 0===t?this.getNodeToParentTransform():cc.affineTransformConcat(this.getNodeToParentTransform(),t),e=cc.rectApplyAffineTransform(e,t),!this._children)return e;for(var i=this._children,n=0;n<i.length;n++){var s=i[n];s&&s._visible&&(s=s._getBoundingBoxToCurrentNode(t))&&(e=cc.rectUnion(e,s))}return e},getOpacity:function(){return this._realOpacity},getDisplayedOpacity:function(){return this._renderCmd.getDisplayedOpacity()},setOpacity:function(t){this._realOpacity=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},updateDisplayedOpacity:function(t){this._renderCmd._updateDisplayOpacity(t)},isCascadeOpacityEnabled:function(){return this._cascadeOpacityEnabled},setCascadeOpacityEnabled:function(t){this._cascadeOpacityEnabled!==t&&(this._cascadeOpacityEnabled=t,this._renderCmd.setCascadeOpacityEnabledDirty())},getColor:function(){var t=this._realColor;return cc.color(t.r,t.g,t.b,t.a)},getDisplayedColor:function(){return this._renderCmd.getDisplayedColor()},setColor:function(t){var e=this._realColor;e.r=t.r,e.g=t.g,e.b=t.b,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty)},updateDisplayedColor:function(t){this._renderCmd._updateDisplayColor(t)},isCascadeColorEnabled:function(){return this._cascadeColorEnabled},setCascadeColorEnabled:function(t){this._cascadeColorEnabled!==t&&(this._cascadeColorEnabled=t,this._renderCmd.setCascadeColorEnabledDirty())},setOpacityModifyRGB:function(t){},isOpacityModifyRGB:function(){return!1},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.Node.CanvasRenderCmd(this):new cc.Node.WebGLRenderCmd(this)},enumerateChildren:function(t,e){cc.assert(t&&0!=t.length,"Invalid name"),cc.assert(null!=e,"Invalid callback function");var i=t.length,n=0,s=i,r=!1;2<i&&"/"===t[0]&&"/"===t[1]&&(r=!0,n=2,s-=2);var o=!1;3<i&&"/"===t[i-3]&&"."===t[i-2]&&"."===t[i-1]&&(o=!0,s-=3),i=t.substr(n,s),o&&(i="[[:alnum:]]+/"+i),r?this.doEnumerateRecursive(this,i,e):this.doEnumerate(i,e)},doEnumerateRecursive:function(t,e,i){var n=!1;if(t.doEnumerate(e,i))n=!0;else for(var s=t.getChildren(),r=s.length,o=0;o<r;o++)if(t=s[o],this.doEnumerateRecursive(t,e,i)){n=!0;break}return n},doEnumerate:function(t,e){var i=t.indexOf("/"),n=t,s=!1;-1!==i&&(n=t.substr(0,i),s=!0);i=!1;for(var r,o=this._children,a=o.length,c=0;c<a;c++)if(-1!==(r=o[c])._name.indexOf(n))if(s){if(i=r.doEnumerate(t,e))break}else if(e(r)){i=!0;break}return i}}),cc.Node.create=function(){return new cc.Node},cc.Node._stateCallbackType={onEnter:1,onExit:2,cleanup:3,onEnterTransitionDidFinish:4,onExitTransitionDidStart:5,max:6},cc.Node._performStacks=[[]],cc.Node._performing=0,cc.assert(cc.isFunction(cc._tmp.PrototypeCCNode),cc._LogInfos.MissingFile,"BaseNodesPropertyDefine.js"),cc._tmp.PrototypeCCNode(),delete cc._tmp.PrototypeCCNode,cc.CustomRenderCmd=function(t,e){this._needDraw=!0,this._target=t,this._callback=e},cc.CustomRenderCmd.prototype.rendering=function(t,e,i){this._callback&&this._callback.call(this._target,t,e,i)},cc.CustomRenderCmd.prototype.needDraw=function(){return this._needDraw};var dirtyFlags=cc.Node._dirtyFlags={transformDirty:1,visibleDirty:2,colorDirty:4,opacityDirty:8,cacheDirty:16,orderDirty:32,textDirty:64,gradientDirty:128,textureDirty:256,contentDirty:512,COUNT:10,all:1023},ONE_DEGREE=Math.PI/180;function transformChildTree(t){var e,i,n,s,r,o=1,a=cc.Node._performStacks[cc.Node._performing];for(a||(a=[],cc.Node._performStacks.push(a)),a.length=0,cc.Node._performing++,a[0]=t;o;)if(i=a[--o],a[o]=null,i){if((e=i._children)&&0<e.length)for(n=i._renderCmd,s=0,r=e.length;s<r;++s)t=e[s],a[o]=t,o++,t._renderCmd.transform(n);if((e=i._protectedChildren)&&0<e.length)for(n=i._renderCmd,s=0,r=e.length;s<r;++s)t=e[s],a[o]=t,o++,t._renderCmd.transform(n)}cc.Node._performing--}cc.Node.RenderCmd=function(t){this._node=t,this._anchorPointInPoints={x:0,y:0},this._displayedColor=cc.color(255,255,255,255)},cc.Node.RenderCmd.prototype={constructor:cc.Node.RenderCmd,_needDraw:!1,_dirtyFlag:1,_curLevel:-1,_displayedOpacity:255,_cascadeColorEnabledDirty:!1,_cascadeOpacityEnabledDirty:!1,_transform:null,_worldTransform:null,_inverse:null,needDraw:function(){return this._needDraw},getAnchorPointInPoints:function(){return cc.p(this._anchorPointInPoints)},getDisplayedColor:function(){var t=this._displayedColor;return cc.color(t.r,t.g,t.b,t.a)},getDisplayedOpacity:function(){return this._displayedOpacity},setCascadeColorEnabledDirty:function(){this._cascadeColorEnabledDirty=!0,this.setDirtyFlag(cc.Node._dirtyFlags.colorDirty)},setCascadeOpacityEnabledDirty:function(){this._cascadeOpacityEnabledDirty=!0,this.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},getParentToNodeTransform:function(){return this._inverse||(this._inverse={a:1,b:0,c:0,d:1,tx:0,ty:0}),this._dirtyFlag&cc.Node._dirtyFlags.transformDirty&&cc.affineTransformInvertOut(this.getNodeToParentTransform(),this._inverse),this._inverse},detachFromParent:function(){},_updateAnchorPointInPoint:function(){var t=this._anchorPointInPoints,e=this._node._contentSize,i=this._node._anchorPoint;t.x=e.width*i.x,t.y=e.height*i.y,this.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},setDirtyFlag:function(t){0===this._dirtyFlag&&0!==t&&cc.renderer.pushDirtyNode(this),this._dirtyFlag|=t},getParentRenderCmd:function(){return this._node&&this._node._parent&&this._node._parent._renderCmd?this._node._parent._renderCmd:null},transform:function(t,e){this._transform||(this._transform={a:1,b:0,c:0,d:1,tx:0,ty:0},this._worldTransform={a:1,b:0,c:0,d:1,tx:0,ty:0});var i=this._node,n=t?t._worldTransform:null,s=this._transform,r=this._worldTransform;if(i._usingNormalizedPosition&&i._parent){var o=i._parent._contentSize;i._position.x=i._normalizedPosition.x*o.width,i._position.y=i._normalizedPosition.y*o.height,i._normalizedPositionDirty=!1}var a=i._rotationX||i._rotationY,c=i._skewX||i._skewY,h=i._scaleX,l=i._scaleY,u=(o=this._anchorPointInPoints.x,this._anchorPointInPoints.y),d=1,_=0,g=0,f=1;a||c?(s.tx=i._position.x,s.ty=i._position.y,a&&(d=i._rotationX*ONE_DEGREE,g=Math.sin(d),f=Math.cos(d),i._rotationY===i._rotationX?(d=f,_=-g):(_=i._rotationY*ONE_DEGREE,d=Math.cos(_),_=-Math.sin(_))),s.a=d*=h,s.b=_*=h,s.c=g*=l,s.d=f*=l,c&&(1/0===(c=Math.tan(i._skewX*ONE_DEGREE))&&(c=99999999),1/0===(h=Math.tan(i._skewY*ONE_DEGREE))&&(h=99999999),s.a=d+g*h,s.b=_+f*h,s.c=g+d*c,s.d=f+_*c),(o||u)&&(s.tx-=s.a*o+s.c*u,s.ty-=s.b*o+s.d*u,i._ignoreAnchorPointForPosition&&(s.tx+=o,s.ty+=u)),i._additionalTransformDirty&&cc.affineTransformConcatIn(s,i._additionalTransform),n?(r.a=s.a*n.a+s.b*n.c,r.b=s.a*n.b+s.b*n.d,r.c=s.c*n.a+s.d*n.c,r.d=s.c*n.b+s.d*n.d,r.tx=n.a*s.tx+n.c*s.ty+n.tx,r.ty=n.d*s.ty+n.ty+n.b*s.tx):(r.a=s.a,r.b=s.b,r.c=s.c,r.d=s.d,r.tx=s.tx,r.ty=s.ty)):(s.a=h,s.b=0,s.c=0,s.d=l,s.tx=i._position.x,s.ty=i._position.y,(o||u)&&(s.tx-=s.a*o,s.ty-=s.d*u,i._ignoreAnchorPointForPosition&&(s.tx+=o,s.ty+=u)),i._additionalTransformDirty&&cc.affineTransformConcatIn(s,i._additionalTransform),n?(r.a=s.a*n.a+s.b*n.c,r.b=s.a*n.b+s.b*n.d,r.c=s.c*n.a+s.d*n.c,r.d=s.c*n.b+s.d*n.d,r.tx=s.tx*n.a+s.ty*n.c+n.tx,r.ty=s.tx*n.b+s.ty*n.d+n.ty):(r.a=s.a,r.b=s.b,r.c=s.c,r.d=s.d,r.tx=s.tx,r.ty=s.ty)),this._updateCurrentRegions&&(this._updateCurrentRegions(),this._notifyRegionStatus&&this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.DirtyDouble)),e&&transformChildTree(i),this._cacheDirty=!0},getNodeToParentTransform:function(){return(!this._transform||this._dirtyFlag&cc.Node._dirtyFlags.transformDirty)&&this.transform(),this._transform},visit:function(t){var e=this._node,i=cc.renderer;(t=t||this.getParentRenderCmd())&&(this._curLevel=t._curLevel+1),isNaN(e._customZ)&&(e._vertexZ=i.assignedZ,i.assignedZ+=i.assignedZStep),this._syncStatus(t)},_updateDisplayColor:function(t){var e,i=this._node,n=this._displayedColor,s=i._realColor;if(this._notifyRegionStatus&&this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty),this._cascadeColorEnabledDirty&&!i._cascadeColorEnabled){for(n.r=s.r,n.g=s.g,n.b=s.b,n=new cc.Color(255,255,255,255),t=i._children,i=0,s=t.length;i<s;i++)(e=t[i])&&e._renderCmd&&e._renderCmd._updateDisplayColor(n);this._cascadeColorEnabledDirty=!1}else if(void 0===t&&(t=(t=i._parent)&&t._cascadeColorEnabled?t.getDisplayedColor():cc.color.WHITE),n.r=0|s.r*t.r/255,n.g=0|s.g*t.g/255,n.b=0|s.b*t.b/255,i._cascadeColorEnabled)for(t=i._children,i=0,s=t.length;i<s;i++)(e=t[i])&&e._renderCmd&&(e._renderCmd._updateDisplayColor(n),e._renderCmd._updateColor());this._dirtyFlag&=~dirtyFlags.colorDirty},_updateDisplayOpacity:function(t){var e,i,n=this._node;if(this._notifyRegionStatus&&this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty),this._cascadeOpacityEnabledDirty&&!n._cascadeOpacityEnabled){for(this._displayedOpacity=n._realOpacity,t=0,n=(e=n._children).length;t<n;t++)(i=e[t])&&i._renderCmd&&i._renderCmd._updateDisplayOpacity(255);this._cascadeOpacityEnabledDirty=!1}else if(void 0===t&&(t=255,(e=n._parent)&&e._cascadeOpacityEnabled&&(t=e.getDisplayedOpacity())),this._displayedOpacity=n._realOpacity*t/255,n._cascadeOpacityEnabled)for(t=0,n=(e=n._children).length;t<n;t++)(i=e[t])&&i._renderCmd&&(i._renderCmd._updateDisplayOpacity(this._displayedOpacity),i._renderCmd._updateColor());this._dirtyFlag&=~dirtyFlags.opacityDirty},_syncDisplayColor:function(t){var e=this._node,i=this._displayedColor,n=e._realColor;void 0===t&&(t=(t=e._parent)&&t._cascadeColorEnabled?t.getDisplayedColor():cc.color.WHITE),i.r=0|n.r*t.r/255,i.g=0|n.g*t.g/255,i.b=0|n.b*t.b/255},_syncDisplayOpacity:function(t){var e=this._node;if(void 0===t){var i=e._parent;t=255,i&&i._cascadeOpacityEnabled&&(t=i.getDisplayedOpacity())}this._displayedOpacity=e._realOpacity*t/255},_updateColor:function(){},_propagateFlagsDown:function(t){var e=this._dirtyFlag,i=t?t._node:null;i&&i._cascadeColorEnabled&&t._dirtyFlag&dirtyFlags.colorDirty&&(e|=dirtyFlags.colorDirty),i&&i._cascadeOpacityEnabled&&t._dirtyFlag&dirtyFlags.opacityDirty&&(e|=dirtyFlags.opacityDirty),t&&t._dirtyFlag&dirtyFlags.transformDirty&&(e|=dirtyFlags.transformDirty),this._dirtyFlag=e},updateStatus:function(){var t=this._dirtyFlag,e=t&dirtyFlags.colorDirty,i=t&dirtyFlags.opacityDirty;t&dirtyFlags.contentDirty&&(this._notifyRegionStatus&&this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty),this._dirtyFlag&=~dirtyFlags.contentDirty),e&&this._updateDisplayColor(),i&&this._updateDisplayOpacity(),(e||i)&&this._updateColor(),t&dirtyFlags.transformDirty&&(this.transform(this.getParentRenderCmd(),!0),this._dirtyFlag&=~dirtyFlags.transformDirty),t&dirtyFlags.orderDirty&&(this._dirtyFlag&=~dirtyFlags.orderDirty)},_syncStatus:function(t){var e=this._dirtyFlag;(i=t?t._node:null)&&i._cascadeColorEnabled&&t._dirtyFlag&dirtyFlags.colorDirty&&(e|=dirtyFlags.colorDirty),i&&i._cascadeOpacityEnabled&&t._dirtyFlag&dirtyFlags.opacityDirty&&(e|=dirtyFlags.opacityDirty),t&&t._dirtyFlag&dirtyFlags.transformDirty&&(e|=dirtyFlags.transformDirty),this._dirtyFlag=e;var i=e&dirtyFlags.colorDirty,n=e&dirtyFlags.opacityDirty;i&&this._syncDisplayColor(),n&&this._syncDisplayOpacity(),(i||n)&&this._updateColor(),e&dirtyFlags.transformDirty&&this.transform(t),e&dirtyFlags.orderDirty&&(this._dirtyFlag&=~dirtyFlags.orderDirty)},setShaderProgram:function(t){},getShaderProgram:function(){return null},getGLProgramState:function(){return null},setGLProgramState:function(t){}},cc.Node.RenderCmd.prototype.originTransform=cc.Node.RenderCmd.prototype.transform,cc.Node.RenderCmd.prototype.originUpdateStatus=cc.Node.RenderCmd.prototype.updateStatus,cc.Node.RenderCmd.prototype._originSyncStatus=cc.Node.RenderCmd.prototype._syncStatus,function(){cc.Node.CanvasRenderCmd=function(t){this._node=t,this._anchorPointInPoints={x:0,y:0},this._displayedColor=cc.color(255,255,255,255),this._cachedParent=null,this._cacheDirty=!1,this._currentRegion=new cc.Region,this._oldRegion=new cc.Region,this._regionFlag=0,this._canUseDirtyRegion=!1},cc.Node.CanvasRenderCmd.RegionStatus={NotDirty:0,Dirty:1,DirtyDouble:2};var t=cc.Node.CanvasRenderCmd.prototype=Object.create(cc.Node.RenderCmd.prototype);t.constructor=cc.Node.CanvasRenderCmd,t._rootCtor=cc.Node.CanvasRenderCmd,t._notifyRegionStatus=function(t){this._needDraw&&this._regionFlag<t&&(this._regionFlag=t)};var e=new cc.Rect;t.getLocalBB=function(){var t=this._node;return e.x=e.y=0,e.width=t._contentSize.width,e.height=t._contentSize.height,e},t._updateCurrentRegions=function(){var t=this._currentRegion;this._currentRegion=this._oldRegion,this._oldRegion=t,cc.Node.CanvasRenderCmd.RegionStatus.DirtyDouble!==this._regionFlag||this._currentRegion.isEmpty()||this._oldRegion.union(this._currentRegion),this._currentRegion.updateRegion(this.getLocalBB(),this._worldTransform)},t.setDirtyFlag=function(t,e){cc.Node.RenderCmd.prototype.setDirtyFlag.call(this,t,e),this._setCacheDirty(e),this._cachedParent&&this._cachedParent.setDirtyFlag(t,!0)},t._setCacheDirty=function(){if(!1===this._cacheDirty){this._cacheDirty=!0;var t=this._cachedParent;t&&t!==this&&t._setNodeDirtyForCache&&t._setNodeDirtyForCache()}},t._setCachedParent=function(t){if(this._cachedParent!==t){this._cachedParent=t;for(var e=this._node._children,i=0,n=e.length;i<n;i++)e[i]._renderCmd._setCachedParent(t)}},t.detachFromParent=function(){this._cachedParent=null;for(var t,e=this._node._children,i=0,n=e.length;i<n;i++)(t=e[i])&&t._renderCmd&&t._renderCmd.detachFromParent()},cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc=function(t){return t?t.src===cc.SRC_ALPHA&&t.dst===cc.ONE||t.src===cc.ONE&&t.dst===cc.ONE?"lighter":t.src===cc.ZERO&&t.dst===cc.SRC_ALPHA?"destination-in":t.src===cc.ZERO&&t.dst===cc.ONE_MINUS_SRC_ALPHA?"destination-out":"source-over":"source-over"}}(),function(){cc.Node.WebGLRenderCmd=function(t){this._node=t,this._anchorPointInPoints={x:0,y:0},this._displayedColor=cc.color(255,255,255,255),this._glProgramState=null};var t=cc.Node.WebGLRenderCmd.prototype=Object.create(cc.Node.RenderCmd.prototype);t.constructor=cc.Node.WebGLRenderCmd,t._rootCtor=cc.Node.WebGLRenderCmd,t._updateColor=function(){},t.setShaderProgram=function(t){this._glProgramState=cc.GLProgramState.getOrCreateWithGLProgram(t)},t.getShaderProgram=function(){return this._glProgramState?this._glProgramState.getGLProgram():null},t.getGLProgramState=function(){return this._glProgramState},t.setGLProgramState=function(t){this._glProgramState=t},Object.defineProperty(t,"_shaderProgram",{set:function(t){this.setShaderProgram(t)},get:function(){return this.getShaderProgram()}})}(),cc.AtlasNode=cc.Node.extend({textureAtlas:null,quadsToDraw:0,_itemsPerRow:0,_itemsPerColumn:0,_itemWidth:0,_itemHeight:0,_opacityModifyRGB:!1,_blendFunc:null,_ignoreContentScaleFactor:!1,_className:"AtlasNode",_texture:null,_textureForCanvas:null,ctor:function(t,e,i,n){cc.Node.prototype.ctor.call(this),this._blendFunc={src:cc.BLEND_SRC,dst:cc.BLEND_DST},this._ignoreContentScaleFactor=!1,void 0!==n&&this.initWithTileFile(t,e,i,n)},_createRenderCmd:function(){this._renderCmd=cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.AtlasNode.CanvasRenderCmd(this):new cc.AtlasNode.WebGLRenderCmd(this)},updateAtlasValues:function(){cc.log(cc._LogInfos.AtlasNode_updateAtlasValues)},getColor:function(){return this._opacityModifyRGB?this._renderCmd._colorUnmodified:cc.Node.prototype.getColor.call(this)},setOpacityModifyRGB:function(t){var e=this.color;this._opacityModifyRGB=t,this.setColor(e)},isOpacityModifyRGB:function(){return this._opacityModifyRGB},getBlendFunc:function(){return this._blendFunc},setBlendFunc:function(t,e){this._blendFunc=void 0===e?t:{src:t,dst:e}},setTextureAtlas:function(t){this.textureAtlas=t},getTextureAtlas:function(){return this.textureAtlas},getQuadsToDraw:function(){return this.quadsToDraw},setQuadsToDraw:function(t){this.quadsToDraw=t},initWithTileFile:function(t,e,i,n){if(!t)throw Error("cc.AtlasNode.initWithTileFile(): title should not be null");return t=cc.textureCache.addImage(t),this.initWithTexture(t,e,i,n)},initWithTexture:function(t,e,i,n){return this._renderCmd.initWithTexture(t,e,i,n)},setColor:function(t){this._renderCmd.setColor(t)},setOpacity:function(t){this._renderCmd.setOpacity(t)},getTexture:function(){return this._texture},setTexture:function(t){this._texture=t},_setIgnoreContentScaleFactor:function(t){this._ignoreContentScaleFactor=t}}),_p=cc.AtlasNode.prototype,cc.defineGetterSetter(_p,"opacity",_p.getOpacity,_p.setOpacity),cc.defineGetterSetter(_p,"color",_p.getColor,_p.setColor),cc.defineGetterSetter(_p,"texture",_p.getTexture,_p.setTexture),cc.EventHelper.prototype.apply(_p),cc.AtlasNode.create=function(t,e,i,n){return new cc.AtlasNode(t,e,i,n)},function(){cc.AtlasNode.CanvasRenderCmd=function(t){this._rootCtor(t),this._needDraw=!1,this._colorUnmodified=cc.color.WHITE,this._textureToRender=null};var t=cc.AtlasNode.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);t.constructor=cc.AtlasNode.CanvasRenderCmd,t.initWithTexture=function(t,e,i,n){var s=this._node;return s._itemWidth=e,s._itemHeight=i,s._opacityModifyRGB=!0,s._texture=t,s._texture?(this._textureToRender=t,this._calculateMaxItems(),s.quadsToDraw=n,!0):(cc.log(cc._LogInfos.AtlasNode__initWithTexture),!1)},t.setColor=function(t){var e=this._node._realColor;e.r===t.r&&e.g===t.g&&e.b===t.b||(this._colorUnmodified=t,this._changeTextureColor())},t._changeTextureColor=function(){var t=this._node._texture,e=this._colorUnmodified,i=t.getHtmlElementObj();i=cc.rect(0,0,i.width,i.height);t===this._textureToRender?this._textureToRender=t._generateColorTexture(e.r,e.g,e.b,i):t._generateColorTexture(e.r,e.g,e.b,i,this._textureToRender.getHtmlElementObj())},t.setOpacity=function(t){cc.Node.prototype.setOpacity.call(this._node,t)},t._calculateMaxItems=function(){var t=this._node,e=t._texture.getContentSize();t._itemsPerColumn=0|e.height/t._itemHeight,t._itemsPerRow=0|e.width/t._itemWidth}}(),function(){cc.AtlasNode.WebGLRenderCmd=function(t){this._rootCtor(t),this._needDraw=!0,this._textureAtlas=null,this._colorUnmodified=cc.color.WHITE,this._uniformColor=this._colorF32Array=null,this._matrix=new cc.math.Matrix4,this._matrix.identity(),this._shaderProgram=cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURE_UCOLOR),this._uniformColor=cc._renderContext.getUniformLocation(this._shaderProgram.getProgram(),"u_color")};var t=cc.AtlasNode.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);t.constructor=cc.AtlasNode.WebGLRenderCmd,t._updateBlendFunc=function(){var t=this._node;this._textureAtlas.texture.hasPremultipliedAlpha()||(t._blendFunc.src=cc.SRC_ALPHA,t._blendFunc.dst=cc.ONE_MINUS_SRC_ALPHA)},t._updateOpacityModifyRGB=function(){this._node._opacityModifyRGB=this._textureAtlas.texture.hasPremultipliedAlpha()},t.rendering=function(t){t=t||cc._renderContext;var e=this._node,i=this._worldTransform;this._matrix.mat[0]=i.a,this._matrix.mat[4]=i.c,this._matrix.mat[12]=i.tx,this._matrix.mat[1]=i.b,this._matrix.mat[5]=i.d,this._matrix.mat[13]=i.ty,this._glProgramState.apply(this._matrix),cc.glBlendFunc(e._blendFunc.src,e._blendFunc.dst),this._uniformColor&&this._colorF32Array&&(t.uniform4fv(this._uniformColor,this._colorF32Array),this._textureAtlas.drawNumberOfQuads(e.quadsToDraw,0))},t.initWithTexture=function(t,e,i,n){var s=this._node;return s._itemWidth=e,s._itemHeight=i,this._colorUnmodified=cc.color.WHITE,s._opacityModifyRGB=!0,s._blendFunc.src=cc.BLEND_SRC,s._blendFunc.dst=cc.BLEND_DST,e=s._realColor,this._colorF32Array=new Float32Array([e.r/255,e.g/255,e.b/255,s._realOpacity/255]),this._textureAtlas=new cc.TextureAtlas,this._textureAtlas.initWithTexture(t,n),this._textureAtlas?(this._updateBlendFunc(),this._updateOpacityModifyRGB(),this._calculateMaxItems(),s.quadsToDraw=n,!0):(cc.log(cc._LogInfos.AtlasNode__initWithTexture),!1)},t.setColor=function(t){var e=cc.color(t.r,t.g,t.b),i=this._node;this._colorUnmodified=t,t=this._displayedOpacity,i._opacityModifyRGB&&(e.r=e.r*t/255,e.g=e.g*t/255,e.b=e.b*t/255),cc.Node.prototype.setColor.call(i,e)},t.setOpacity=function(t){var e=this._node;cc.Node.prototype.setOpacity.call(e,t),e._opacityModifyRGB&&(e.color=this._colorUnmodified)},t._updateColor=function(){if(this._colorF32Array){var t=this._displayedColor;this._colorF32Array[0]=t.r/255,this._colorF32Array[1]=t.g/255,this._colorF32Array[2]=t.b/255,this._colorF32Array[3]=this._displayedOpacity/255}},t.getTexture=function(){return this._textureAtlas.texture},t.setTexture=function(t){this._textureAtlas.texture=t,this._updateBlendFunc(),this._updateOpacityModifyRGB()},t._calculateMaxItems=function(){var t=this._node,e=this._textureAtlas.texture,i=e.getContentSize();t._ignoreContentScaleFactor&&(i=e.getContentSizeInPixels()),t._itemsPerColumn=0|i.height/t._itemHeight,t._itemsPerRow=0|i.width/t._itemWidth}}(),cc._tmp.WebGLTexture2D=function(){cc.Texture2D=cc.Class.extend({_pVRHaveAlphaPremultiplied:!0,_pixelFormat:null,_pixelsWide:0,_pixelsHigh:0,_name:"",_contentSize:null,maxS:0,maxT:0,_hasPremultipliedAlpha:!1,_hasMipmaps:!1,shaderProgram:null,_textureLoaded:!1,_htmlElementObj:null,_webTextureObj:null,url:null,ctor:function(){this._contentSize=cc.size(0,0),this._pixelFormat=cc.Texture2D.defaultPixelFormat},releaseTexture:function(){this._webTextureObj&&cc._renderContext.deleteTexture(this._webTextureObj),this._htmlElementObj=null,cc.loader.release(this.url)},getPixelFormat:function(){return this._pixelFormat},getPixelsWide:function(){return this._pixelsWide},getPixelsHigh:function(){return this._pixelsHigh},getName:function(){return this._webTextureObj},getContentSize:function(){return cc.size(this._contentSize.width/cc.contentScaleFactor(),this._contentSize.height/cc.contentScaleFactor())},_getWidth:function(){return this._contentSize.width/cc.contentScaleFactor()},_getHeight:function(){return this._contentSize.height/cc.contentScaleFactor()},getContentSizeInPixels:function(){return this._contentSize},getMaxS:function(){return this.maxS},setMaxS:function(t){this.maxS=t},getMaxT:function(){return this.maxT},setMaxT:function(t){this.maxT=t},getShaderProgram:function(){return this.shaderProgram},setShaderProgram:function(t){this.shaderProgram=t},hasPremultipliedAlpha:function(){return this._hasPremultipliedAlpha},hasMipmaps:function(){return this._hasMipmaps},description:function(){return"<cc.Texture2D | Name = "+this._name+" | Dimensions = "+this._pixelsWide+" x "+this._pixelsHigh+" | Coordinates = ("+this.maxS+", "+this.maxT+")>"},releaseData:function(t){},keepData:function(t,e){return t},initWithData:function(t,e,i,n,s){var r=cc.Texture2D,o=cc._renderContext,a=o.RGBA,c=o.UNSIGNED_BYTE,h=i*cc.Texture2D._B[e]/8;switch(0==h%8?o.pixelStorei(o.UNPACK_ALIGNMENT,8):0==h%4?o.pixelStorei(o.UNPACK_ALIGNMENT,4):0==h%2?o.pixelStorei(o.UNPACK_ALIGNMENT,2):o.pixelStorei(o.UNPACK_ALIGNMENT,1),this._webTextureObj=o.createTexture(),cc.glBindTexture2D(this),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),e){case r.PIXEL_FORMAT_RGBA8888:a=o.RGBA;break;case r.PIXEL_FORMAT_RGB888:a=o.RGB;break;case r.PIXEL_FORMAT_RGBA4444:c=o.UNSIGNED_SHORT_4_4_4_4;break;case r.PIXEL_FORMAT_RGB5A1:c=o.UNSIGNED_SHORT_5_5_5_1;break;case r.PIXEL_FORMAT_RGB565:c=o.UNSIGNED_SHORT_5_6_5;break;case r.PIXEL_FORMAT_AI88:a=o.LUMINANCE_ALPHA;break;case r.PIXEL_FORMAT_A8:a=o.ALPHA;break;case r.PIXEL_FORMAT_I8:a=o.LUMINANCE;break;default:cc.assert(0,cc._LogInfos.Texture2D_initWithData)}return o.texImage2D(o.TEXTURE_2D,0,a,i,n,0,a,c,t),this._contentSize.width=s.width,this._contentSize.height=s.height,this._pixelsWide=i,this._pixelsHigh=n,this._pixelFormat=e,this.maxS=s.width/i,this.maxT=s.height/n,this._hasMipmaps=this._hasPremultipliedAlpha=!1,this.shaderProgram=cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURE),this._textureLoaded=!0},drawAtPoint:function(t){var e=[0,this.maxT,this.maxS,this.maxT,0,0,this.maxS,0],i=cc._renderContext,n=this._pixelsWide*this.maxS,s=this._pixelsHigh*this.maxT;t=[t.x,t.y,0,n+t.x,t.y,0,t.x,s+t.y,0,n+t.x,s+t.y,0],this._glProgramState.apply(),this._glProgramState._glprogram.setUniformsForBuiltins(),cc.glBindTexture2D(this),i.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),i.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS),i.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,2,i.FLOAT,!1,0,t),i.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS,2,i.FLOAT,!1,0,e),i.drawArrays(i.TRIANGLE_STRIP,0,4)},drawInRect:function(t){var e=[0,this.maxT,this.maxS,this.maxT,0,0,this.maxS,0];t=[t.x,t.y,t.x+t.width,t.y,t.x,t.y+t.height,t.x+t.width,t.y+t.height],this._glProgramState.apply(),this._glProgramState._glprogram.setUniformsForBuiltins(),cc.glBindTexture2D(this);var i=cc._renderContext;i.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),i.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS),i.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,2,i.FLOAT,!1,0,t),i.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS,2,i.FLOAT,!1,0,e),i.drawArrays(i.TRIANGLE_STRIP,0,4)},initWithImage:function(t){if(null==t)return cc.log(cc._LogInfos.Texture2D_initWithImage),!1;var e=t.getWidth(),i=t.getHeight(),n=cc.configuration.getMaxTextureSize();return e>n||i>n?(cc.log(cc._LogInfos.Texture2D_initWithImage_2,e,i,n,n),!1):(this._textureLoaded=!0,this._initPremultipliedATextureWithImage(t,e,i))},initWithElement:function(t){t&&(this._webTextureObj=cc._renderContext.createTexture(),this._htmlElementObj=t,this._hasPremultipliedAlpha=this._textureLoaded=!0)},getHtmlElementObj:function(){return this._htmlElementObj},isLoaded:function(){return this._textureLoaded},handleLoadedTexture:function(t){if(t=void 0!==t?t:this._hasPremultipliedAlpha,cc.game._rendererInitialized&&this._htmlElementObj&&this._htmlElementObj.width&&this._htmlElementObj.height){var e=cc._renderContext;cc.glBindTexture2D(this),e.pixelStorei(e.UNPACK_ALIGNMENT,4),t&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._htmlElementObj),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),this.shaderProgram=cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURE),cc.glBindTexture2D(null),t&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),e=this._htmlElementObj.height,this._pixelsWide=this._contentSize.width=this._htmlElementObj.width,this._pixelsHigh=this._contentSize.height=e,this._pixelFormat=cc.Texture2D.PIXEL_FORMAT_RGBA8888,this.maxT=this.maxS=1,this._hasPremultipliedAlpha=t,this._hasMipmaps=!1,window.ENABLE_IMAEG_POOL&&(this._htmlElementObj=null),this.dispatchEvent("load")}},initWithString:function(t,e,i,n,s,r){return cc.log(cc._LogInfos.Texture2D_initWithString),null},initWithETCFile:function(t){return cc.log(cc._LogInfos.Texture2D_initWithETCFile_2),!1},initWithPVRFile:function(t){return cc.log(cc._LogInfos.Texture2D_initWithPVRFile_2),!1},initWithPVRTCData:function(t,e,i,n,s,r){return cc.log(cc._LogInfos.Texture2D_initWithPVRTCData_2),!1},setTexParameters:function(t,e,i,n){var s=cc._renderContext;void 0!==e&&(t={minFilter:t,magFilter:e,wrapS:i,wrapT:n}),cc.assert(this._pixelsWide===cc.NextPOT(this._pixelsWide)&&this._pixelsHigh===cc.NextPOT(this._pixelsHigh)||t.wrapS===s.CLAMP_TO_EDGE&&t.wrapT===s.CLAMP_TO_EDGE,"WebGLRenderingContext.CLAMP_TO_EDGE should be used in NPOT textures"),cc.glBindTexture2D(this),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,t.minFilter),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,t.magFilter),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,t.wrapS),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,t.wrapT)},setAntiAliasTexParameters:function(){var t=cc._renderContext;cc.glBindTexture2D(this),this._hasMipmaps?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)},setAliasTexParameters:function(){var t=cc._renderContext;cc.glBindTexture2D(this),this._hasMipmaps?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST_MIPMAP_NEAREST):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)},generateMipmap:function(){cc.assert(this._pixelsWide===cc.NextPOT(this._pixelsWide)&&this._pixelsHigh===cc.NextPOT(this._pixelsHigh),"Mimpap texture only works in POT textures"),cc.glBindTexture2D(this),cc._renderContext.generateMipmap(cc._renderContext.TEXTURE_2D),this._hasMipmaps=!0},stringForFormat:function(){return cc.Texture2D._M[this._pixelFormat]},bitsPerPixelForFormat:function(t){t=t||this._pixelFormat;var e=cc.Texture2D._B[t];return null!=e?e:(cc.log(cc._LogInfos.Texture2D_bitsPerPixelForFormat,t),-1)},_initPremultipliedATextureWithImage:function(t,e,i){var n=cc.Texture2D,s=t.getData(),r=null,o=(r=null,t.hasAlpha()),a=cc.size(t.getWidth(),t.getHeight()),c=n.defaultPixelFormat,h=t.getBitsPerComponent();o||(8<=h?c=n.PIXEL_FORMAT_RGB888:(cc.log(cc._LogInfos.Texture2D__initPremultipliedATextureWithImage),c=n.PIXEL_FORMAT_RGB565));var l=e*i;if(c===n.PIXEL_FORMAT_RGB565)if(o)for(s=new Uint16Array(e*i),r=t.getData(),h=0;h<l;++h)s[h]=(r[h]>>0&255)>>3<<11|(r[h]>>8&255)>>2<<5|(r[h]>>16&255)>>3<<0;else for(s=new Uint16Array(e*i),r=t.getData(),h=0;h<l;++h)s[h]=(255&r[h])>>3<<11|(255&r[h])>>2<<5|(255&r[h])>>3<<0;else if(c===n.PIXEL_FORMAT_RGBA4444)for(s=new Uint16Array(e*i),r=t.getData(),h=0;h<l;++h)s[h]=(r[h]>>0&255)>>4<<12|(r[h]>>8&255)>>4<<8|(r[h]>>16&255)>>4<<4|(r[h]>>24&255)>>4<<0;else if(c===n.PIXEL_FORMAT_RGB5A1)for(s=new Uint16Array(e*i),r=t.getData(),h=0;h<l;++h)s[h]=(r[h]>>0&255)>>3<<11|(r[h]>>8&255)>>3<<6|(r[h]>>16&255)>>3<<1|(r[h]>>24&255)>>7<<0;else if(c===n.PIXEL_FORMAT_A8)for(s=new Uint8Array(e*i),r=t.getData(),h=0;h<l;++h)s[h]=r>>24&255;if(o&&c===n.PIXEL_FORMAT_RGB888)for(r=t.getData(),s=new Uint8Array(e*i*3),h=0;h<l;++h)s[3*h]=r>>0&255,s[3*h+1]=r>>8&255,s[3*h+2]=r>>16&255;return this.initWithData(s,c,e,i,a),t.getData(),this._hasPremultipliedAlpha=t.isPremultipliedAlpha(),!0},addLoadedEventListener:function(t,e){this.addEventListener("load",t,e)},removeLoadedEventListener:function(t){this.removeEventTarget("load",t)}})},cc._tmp.WebGLTextureAtlas=function(){var t=cc.TextureAtlas.prototype;t._setupVBO=function(){var t=cc._renderContext;this._buffersVBO[0]=t.createBuffer(),this._buffersVBO[1]=t.createBuffer(),this._quadsWebBuffer=t.createBuffer(),this._mapBuffers()},t._mapBuffers=function(){var t=cc._renderContext;t.bindBuffer(t.ARRAY_BUFFER,this._quadsWebBuffer),t.bufferData(t.ARRAY_BUFFER,this._quadsArrayBuffer,t.DYNAMIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._buffersVBO[1]),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW)},t.drawNumberOfQuads=function(t,e){if(e=e||0,0!==t&&this.texture&&this.texture.isLoaded()){var i=cc._renderContext;cc.glBindTexture2D(this.texture),i.bindBuffer(i.ARRAY_BUFFER,this._quadsWebBuffer),this.dirty&&(i.bufferData(i.ARRAY_BUFFER,this._quadsArrayBuffer,i.DYNAMIC_DRAW),this.dirty=!1),i.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),i.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR),i.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS),i.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,3,i.FLOAT,!1,24,0),i.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR,4,i.UNSIGNED_BYTE,!0,24,12),i.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS,2,i.FLOAT,!1,24,16),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this._buffersVBO[1]),cc.TEXTURE_ATLAS_USE_TRIANGLE_STRIP?i.drawElements(i.TRIANGLE_STRIP,6*t,i.UNSIGNED_SHORT,6*e*this._indices.BYTES_PER_ELEMENT):i.drawElements(i.TRIANGLES,6*t,i.UNSIGNED_SHORT,6*e*this._indices.BYTES_PER_ELEMENT),cc.g_NumberOfDraws++}}},cc._tmp.WebGLTextureCache=function(){var t=cc.textureCache;t.handleLoadedTexture=function(t,e){var i,n=this._textures;return cc.game._rendererInitialized||(n=this._loadedTexturesBefore),(i=n[t])||((i=n[t]=new cc.Texture2D).url=t),i.initWithElement(e),".png"===cc.path.extname(t)?i.handleLoadedTexture(!0):i.handleLoadedTexture(),i},t.addImage=function(t,e,i){cc.assert(t,cc._LogInfos.Texture2D_addImage_2);var n=this._textures;cc.game._rendererInitialized||(n=this._loadedTexturesBefore);var s=n[t]||n[cc.loader._getAliase(t)];return s?(s.isLoaded()?e&&e.call(i,s):s.addEventListener("load",(function(){e&&e.call(i,s)}),i),s):((s=n[t]=new cc.Texture2D).url=t,n=cc.loader.getBasePath?cc.loader.getBasePath():cc.loader.resPath,cc.loader.loadImg(cc.path.join(n||"",t),(function(n,s){if(n)return e&&e.call(i,n);var r=cc.textureCache.handleLoadedTexture(t,s);e&&e.call(i,r)})),s)},t.addImageAsync=t.addImage,t=null},cc._tmp.PrototypeTexture2D=function(){var t=cc.Texture2D;t.PVRImagesHavePremultipliedAlpha=function(t){cc.PVRHaveAlphaPremultiplied_=t},t.PIXEL_FORMAT_RGBA8888=2,t.PIXEL_FORMAT_RGB888=3,t.PIXEL_FORMAT_RGB565=4,t.PIXEL_FORMAT_A8=5,t.PIXEL_FORMAT_I8=6,t.PIXEL_FORMAT_AI88=7,t.PIXEL_FORMAT_RGBA4444=8,t.PIXEL_FORMAT_RGB5A1=7,t.PIXEL_FORMAT_PVRTC4=9,t.PIXEL_FORMAT_PVRTC2=10,t.PIXEL_FORMAT_DEFAULT=t.PIXEL_FORMAT_RGBA8888,t.defaultPixelFormat=t.PIXEL_FORMAT_DEFAULT;var e=cc.Texture2D._M={};e[t.PIXEL_FORMAT_RGBA8888]="RGBA8888",e[t.PIXEL_FORMAT_RGB888]="RGB888",e[t.PIXEL_FORMAT_RGB565]="RGB565",e[t.PIXEL_FORMAT_A8]="A8",e[t.PIXEL_FORMAT_I8]="I8",e[t.PIXEL_FORMAT_AI88]="AI88",e[t.PIXEL_FORMAT_RGBA4444]="RGBA4444",e[t.PIXEL_FORMAT_RGB5A1]="RGB5A1",e[t.PIXEL_FORMAT_PVRTC4]="PVRTC4",e[t.PIXEL_FORMAT_PVRTC2]="PVRTC2",(e=cc.Texture2D._B={})[t.PIXEL_FORMAT_RGBA8888]=32,e[t.PIXEL_FORMAT_RGB888]=24,e[t.PIXEL_FORMAT_RGB565]=16,e[t.PIXEL_FORMAT_A8]=8,e[t.PIXEL_FORMAT_I8]=8,e[t.PIXEL_FORMAT_AI88]=16,e[t.PIXEL_FORMAT_RGBA4444]=16,e[t.PIXEL_FORMAT_RGB5A1]=16,e[t.PIXEL_FORMAT_PVRTC4]=4,e[t.PIXEL_FORMAT_PVRTC2]=3,t=cc.Texture2D.prototype,cc.defineGetterSetter(t,"name",t.getName),cc.defineGetterSetter(t,"pixelFormat",t.getPixelFormat),cc.defineGetterSetter(t,"pixelsWidth",t.getPixelsWide),cc.defineGetterSetter(t,"pixelsHeight",t.getPixelsHigh),cc.defineGetterSetter(t,"width",t._getWidth),cc.defineGetterSetter(t,"height",t._getHeight)},cc._tmp.PrototypeTextureAtlas=function(){var t=cc.TextureAtlas.prototype;cc.defineGetterSetter(t,"totalQuads",t.getTotalQuads),cc.defineGetterSetter(t,"capacity",t.getCapacity),cc.defineGetterSetter(t,"quads",t.getQuads,t.setQuads)},cc.ALIGN_CENTER=51,cc.ALIGN_TOP=19,cc.ALIGN_TOP_RIGHT=18,cc.ALIGN_RIGHT=50,cc.ALIGN_BOTTOM_RIGHT=34,cc.ALIGN_BOTTOM=35,cc.ALIGN_BOTTOM_LEFT=33,cc.ALIGN_LEFT=49,cc.ALIGN_TOP_LEFT=17,cc.PVRHaveAlphaPremultiplied_=!1,cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,(function(){if(cc._renderType===cc.game.RENDER_TYPE_CANVAS){var t={_contentSize:null,_textureLoaded:!1,_htmlElementObj:null,url:null,_pattern:null,ctor:function(){this._contentSize=cc.size(0,0),this._textureLoaded=!1,this._htmlElementObj=null,this._pattern="",this._pixelsHigh=this._pixelsWide=0},getPixelsWide:function(){return this._pixelsWide},getPixelsHigh:function(){return this._pixelsHigh},getContentSize:function(){var t=cc.contentScaleFactor();return cc.size(this._contentSize.width/t,this._contentSize.height/t)},_getWidth:function(){return this._contentSize.width/cc.contentScaleFactor()},_getHeight:function(){return this._contentSize.height/cc.contentScaleFactor()},getContentSizeInPixels:function(){return this._contentSize},initWithElement:function(t){t&&(this._htmlElementObj=t,this._pixelsWide=this._contentSize.width=t.width,this._pixelsHigh=this._contentSize.height=t.height,this._textureLoaded=!0)},getHtmlElementObj:function(){return this._htmlElementObj},isLoaded:function(){return this._textureLoaded},handleLoadedTexture:function(){if(this._htmlElementObj){var t=this._htmlElementObj;this._pixelsWide=this._contentSize.width=t.width,this._pixelsHigh=this._contentSize.height=t.height,this.dispatchEvent("load")}},description:function(){return"<cc.Texture2D | width = "+this._contentSize.width+" height "+this._contentSize.height+">"},initWithData:function(t,e,i,n,s){return!1},initWithImage:function(t){return!1},initWithString:function(t,e,i,n,s,r){return!1},releaseTexture:function(){this._htmlElementObj=null,cc.loader.release(this.url)},getName:function(){return null},getMaxS:function(){return 1},setMaxS:function(t){},getMaxT:function(){return 1},setMaxT:function(t){},getPixelFormat:function(){return null},getShaderProgram:function(){return null},setShaderProgram:function(t){},hasPremultipliedAlpha:function(){return!1},hasMipmaps:function(){return!1},releaseData:function(t){},keepData:function(t,e){return t},drawAtPoint:function(t){},drawInRect:function(t){},initWithETCFile:function(t){return cc.log(cc._LogInfos.Texture2D_initWithETCFile),!1},initWithPVRFile:function(t){return cc.log(cc._LogInfos.Texture2D_initWithPVRFile),!1},initWithPVRTCData:function(t,e,i,n,s,r){return cc.log(cc._LogInfos.Texture2D_initWithPVRTCData),!1},setTexParameters:function(t,e,i,n){void 0!==e&&(t={minFilter:t,magFilter:e,wrapS:i,wrapT:n}),this._pattern=t.wrapS===cc.REPEAT&&t.wrapT===cc.REPEAT?"repeat":t.wrapS===cc.REPEAT?"repeat-x":t.wrapT===cc.REPEAT?"repeat-y":""},setAntiAliasTexParameters:function(){},setAliasTexParameters:function(){},generateMipmap:function(){},stringForFormat:function(){return""},bitsPerPixelForFormat:function(t){return-1},addLoadedEventListener:function(t,e){this.addEventListener("load",t,e)},removeLoadedEventListener:function(t){this.removeEventTarget("load",t)},_generateColorTexture:function(){},_generateTextureCacheForColor:function(){if(this.channelCache)return this.channelCache;var t=[document.createElement("canvas"),document.createElement("canvas"),document.createElement("canvas"),document.createElement("canvas")],e=this._htmlElementObj,i=e.width,n=e.height;t[0].width=i,t[0].height=n,t[1].width=i,t[1].height=n,t[2].width=i,t[2].height=n,t[3].width=i,t[3].height=n,(r=t[3].getContext("2d")).drawImage(e,0,0);for(var s,r=r.getImageData(0,0,i,n).data,o=0;4>o;o++){for(var a=(s=t[o].getContext("2d")).getImageData(0,0,i,n),c=a.data,h=0;h<r.length;h+=4)c[h]=0===o?r[h]:0,c[h+1]=1===o?r[h+1]:0,c[h+2]=2===o?r[h+2]:0,c[h+3]=r[h+3];s.putImageData(a,0,0)}return e.onload=null,this.channelCache=t},_grayElementObj:null,_backupElement:null,_isGray:!1,_switchToGray:function(t){this._textureLoaded&&this._isGray!==t&&((this._isGray=t)?(this._backupElement=this._htmlElementObj,this._grayElementObj||(this._grayElementObj=cc.Texture2D._generateGrayTexture(this._htmlElementObj)),this._htmlElementObj=this._grayElementObj):null!==this._backupElement&&(this._htmlElementObj=this._backupElement))},_generateGrayTexture:function(){if(!this._textureLoaded)return null;var t=cc.Texture2D._generateGrayTexture(this._htmlElementObj),e=new cc.Texture2D;return e.initWithElement(t),e.handleLoadedTexture(),e}};t._generateColorTexture=cc.sys._supportCanvasNewBlendModes?function(t,e,i,n,s){var r=!1;s?r=!0:s=document.createElement("canvas");var o=this._htmlElementObj;n||(n=cc.rect(0,0,o.width,o.height)),s.width=n.width,s.height=n.height;var a=s.getContext("2d");return a.globalCompositeOperation="source-over",a.fillStyle="rgb("+(0|t)+","+(0|e)+","+(0|i)+")",a.fillRect(0,0,n.width,n.height),a.globalCompositeOperation="multiply",a.drawImage(o,n.x,n.y,n.width,n.height,0,0,n.width,n.height),a.globalCompositeOperation="destination-atop",a.drawImage(o,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r?s:((t=new cc.Texture2D).initWithElement(s),t.handleLoadedTexture(),t)}:function(t,e,i,n,s){var r=!1;s?r=!0:s=document.createElement("canvas");var o=this._htmlElementObj;n||(n=cc.rect(0,0,o.width,o.height));var a,c;o=n.x;if(a=n.y,c=n.width,n=n.height,c&&n){s.width=c,s.height=n;var h=s.getContext("2d"),l=cc.textureCache.getTextureColors(this);return h.globalCompositeOperation="lighter",h.drawImage(l[3],o,a,c,n,0,0,c,n),0<t&&(h.globalAlpha=t/255,h.drawImage(l[0],o,a,c,n,0,0,c,n)),0<e&&(h.globalAlpha=e/255,h.drawImage(l[1],o,a,c,n,0,0,c,n)),0<i&&(h.globalAlpha=i/255,h.drawImage(l[2],o,a,c,n,0,0,c,n)),r?s:((t=new cc.Texture2D).initWithElement(s),t.handleLoadedTexture(),t)}},cc.Texture2D=cc.Class.extend(t),cc.Texture2D._generateGrayTexture=function(t,e,i){if(null===t)return null;i=i||document.createElement("canvas"),e=e||cc.rect(0,0,t.width,t.height),i.width=e.width,i.height=e.height;var n=i.getContext("2d");n.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);for(var s=0,r=(e=(t=n.getImageData(0,0,e.width,e.height)).data).length;s<r;s+=4)e[s]=e[s+1]=e[s+2]=.34*e[s]+.5*e[s+1]+.16*e[s+2];return n.putImageData(t,0,0),i}}else cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(cc.assert(cc.isFunction(cc._tmp.WebGLTexture2D),cc._LogInfos.MissingFile,"TexturesWebGL.js"),cc._tmp.WebGLTexture2D(),delete cc._tmp.WebGLTexture2D);cc.EventHelper.prototype.apply(cc.Texture2D.prototype),cc.assert(cc.isFunction(cc._tmp.PrototypeTexture2D),cc._LogInfos.MissingFile,"TexturesPropertyDefine.js"),cc._tmp.PrototypeTexture2D(),delete cc._tmp.PrototypeTexture2D})),cc.textureCache={_textures:{},_textureColorsCache:{},_textureKeySeq:0|1e3*Math.random(),_loadedTexturesBefore:{},_initializingRenderer:function(){var t,e=this._loadedTexturesBefore,i=this._textures;for(t in e){var n=e[t];n.handleLoadedTexture(),i[t]=n}this._loadedTexturesBefore={}},addPVRTCImage:function(t){cc.log(cc._LogInfos.textureCache_addPVRTCImage)},addETCImage:function(t){cc.log(cc._LogInfos.textureCache_addETCImage)},description:function(){return"<TextureCache | Number of textures = "+this._textures.length+">"},textureForKey:function(t){return cc.log(cc._LogInfos.textureCache_textureForKey),this.getTextureForKey(t)},getTextureForKey:function(t){return this._textures[t]||this._textures[cc.loader._getAliase(t)]},getKeyByTexture:function(t){for(var e in this._textures)if(this._textures[e]===t)return e;return null},_generalTextureKey:function(t){return"_textureKey_"+t},getTextureColors:function(t){var e=t._htmlElementObj,i=this.getKeyByTexture(e);return i||(i=e instanceof HTMLImageElement?e.src:this._generalTextureKey(t.__instanceId)),this._textureColorsCache[i]||(this._textureColorsCache[i]=t._generateTextureCacheForColor()),this._textureColorsCache[i]},addPVRImage:function(t){cc.log(cc._LogInfos.textureCache_addPVRImage)},removeAllTextures:function(){var t,e=this._textures;for(t in e)e[t]&&e[t].releaseTexture();this._textures={}},removeTexture:function(t){if(t){var e,i=this._textures;for(e in i)i[e]===t&&(i[e].releaseTexture(),delete i[e])}},removeTextureForKey:function(t){if(null!=t){var e=this._textures[t];e&&(e.releaseTexture(),delete this._textures[t])}},cacheImage:function(t,e){if(e instanceof cc.Texture2D)this._textures[t]=e;else{var i=new cc.Texture2D;i.initWithElement(e),i.handleLoadedTexture(),this._textures[t]=i}},addUIImage:function(t,e){if(cc.assert(t,cc._LogInfos.textureCache_addUIImage_2),e&&this._textures[e])return this._textures[e];var i=new cc.Texture2D;return i.initWithImage(t),null!=e?this._textures[e]=i:cc.log(cc._LogInfos.textureCache_addUIImage),i},dumpCachedTextureInfo:function(){var t,e=0,i=0,n=this._textures;for(t in n){e++,(r=n[t]).getHtmlElementObj()instanceof HTMLImageElement?cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo,t,r.getHtmlElementObj().src,r.getPixelsWide(),r.getPixelsHigh()):cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo_2,t,r.getPixelsWide(),r.getPixelsHigh()),i+=r.getPixelsWide()*r.getPixelsHigh()*4}for(t in n=this._textureColorsCache){var s,r=n[t];for(s in r){var o=r[s];e++,cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo_2,t,o.width,o.height),i+=o.width*o.height*4}}cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo_3,e,i/1024,(i/1048576).toFixed(2))},_clear:function(){this._textures={},this._textureColorsCache={},this._textureKeySeq=0|1e3*Math.random(),this._loadedTexturesBefore={}}},cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,(function(){if(cc._renderType===cc.game.RENDER_TYPE_CANVAS){var t=cc.textureCache;t.handleLoadedTexture=function(t,e){var i=this._textures,n=i[t];return n||((n=i[t]=new cc.Texture2D).url=t),n.initWithElement(e),n.handleLoadedTexture(),n},t.addImage=function(t,e,i){cc.assert(t,cc._LogInfos.Texture2D_addImage);var n=this._textures,s=n[t]||n[cc.loader._getAliase(t)];return s?(s.isLoaded()?e&&e.call(i,s):s.addEventListener("load",(function(){e&&e.call(i,s)}),i),s):((s=n[t]=new cc.Texture2D).url=t,n=cc.loader.getBasePath?cc.loader.getBasePath():cc.loader.resPath,cc.loader.loadImg(cc.path.join(n||"",t),(function(n,s){if(n)return e&&e.call(i,n);var r=cc.textureCache.handleLoadedTexture(t,s);e&&e.call(i,r)})),s)},t.addImageAsync=t.addImage,t=null}else cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(cc.assert(cc.isFunction(cc._tmp.WebGLTextureCache),cc._LogInfos.MissingFile,"TexturesWebGL.js"),cc._tmp.WebGLTextureCache(),delete cc._tmp.WebGLTextureCache)})),cc.TextureAtlas=cc.Class.extend({dirty:!1,texture:null,_indices:null,_buffersVBO:null,_capacity:0,_quads:null,_quadsArrayBuffer:null,_quadsWebBuffer:null,_quadsReader:null,ctor:function(t,e){this._buffersVBO=[],cc.isString(t)?this.initWithFile(t,e):t instanceof cc.Texture2D&&this.initWithTexture(t,e)},getTotalQuads:function(){return this._totalQuads},getCapacity:function(){return this._capacity},getTexture:function(){return this.texture},setTexture:function(t){this.texture=t},setDirty:function(t){this.dirty=t},isDirty:function(){return this.dirty},getQuads:function(){return this._quads},setQuads:function(t){this._quads=t},_copyQuadsToTextureAtlas:function(t,e){if(t)for(var i=0;i<t.length;i++)this._setQuadToArray(t[i],e+i)},_setQuadToArray:function(t,e){var i=this._quads;i[e]?(i[e].bl=t.bl,i[e].br=t.br,i[e].tl=t.tl,i[e].tr=t.tr):i[e]=new cc.V3F_C4B_T2F_Quad(t.tl,t.bl,t.tr,t.br,this._quadsArrayBuffer,e*cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT)},description:function(){return"<cc.TextureAtlas | totalQuads ="+this._totalQuads+">"},_setupIndices:function(){if(0!==this._capacity)for(var t=this._indices,e=this._capacity,i=0;i<e;i++)cc.TEXTURE_ATLAS_USE_TRIANGLE_STRIP?(t[6*i+0]=4*i+0,t[6*i+1]=4*i+0,t[6*i+2]=4*i+2,t[6*i+3]=4*i+1,t[6*i+4]=4*i+3,t[6*i+5]=4*i+3):(t[6*i+0]=4*i+0,t[6*i+1]=4*i+1,t[6*i+2]=4*i+2,t[6*i+3]=4*i+3,t[6*i+4]=4*i+2,t[6*i+5]=4*i+1)},_setupVBO:function(){var t=cc._renderContext;this._buffersVBO[0]=t.createBuffer(),this._buffersVBO[1]=t.createBuffer(),this._quadsWebBuffer=t.createBuffer(),this._mapBuffers()},_mapBuffers:function(){var t=cc._renderContext;t.bindBuffer(t.ARRAY_BUFFER,this._quadsWebBuffer),t.bufferData(t.ARRAY_BUFFER,this._quadsArrayBuffer,t.DYNAMIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._buffersVBO[1]),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW)},initWithFile:function(t,e){var i=cc.textureCache.addImage(t);return i?this.initWithTexture(i,e):(cc.log(cc._LogInfos.TextureAtlas_initWithFile,t),!1)},initWithTexture:function(t,e){cc.assert(t,cc._LogInfos.TextureAtlas_initWithTexture),this._capacity=e|=0,this._totalQuads=0,this.texture=t,this._quads=[],this._indices=new Uint16Array(6*e);var i=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;if(this._quadsArrayBuffer=new ArrayBuffer(i*e),this._quadsReader=new Uint8Array(this._quadsArrayBuffer),(!this._quads||!this._indices)&&0<e)return!1;for(var n=this._quads,s=0;s<e;s++)n[s]=new cc.V3F_C4B_T2F_Quad(null,null,null,null,this._quadsArrayBuffer,s*i);return this._setupIndices(),this._setupVBO(),this.dirty=!0},updateQuad:function(t,e){cc.assert(t,cc._LogInfos.TextureAtlas_updateQuad),cc.assert(0<=e&&e<this._capacity,cc._LogInfos.TextureAtlas_updateQuad_2),this._totalQuads=Math.max(e+1,this._totalQuads),this._setQuadToArray(t,e),this.dirty=!0},insertQuad:function(t,e){if(cc.assert(e<this._capacity,cc._LogInfos.TextureAtlas_insertQuad_2),this._totalQuads++,this._totalQuads>this._capacity)cc.log(cc._LogInfos.TextureAtlas_insertQuad);else{var i=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,n=e*i,s=(this._totalQuads-1-e)*i;this._quads[this._totalQuads-1]=new cc.V3F_C4B_T2F_Quad(null,null,null,null,this._quadsArrayBuffer,(this._totalQuads-1)*i),this._quadsReader.set(this._quadsReader.subarray(n,n+s),n+i),this._setQuadToArray(t,e),this.dirty=!0}},insertQuads:function(t,e,i){i=i||t.length,cc.assert(e+i<=this._capacity,cc._LogInfos.TextureAtlas_insertQuads);var n=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;if(this._totalQuads+=i,this._totalQuads>this._capacity)cc.log(cc._LogInfos.TextureAtlas_insertQuad);else{var s,r=e*n,o=(this._totalQuads-1-e-i)*n,a=this._totalQuads-1-i;for(s=0;s<i;s++)this._quads[a+s]=new cc.V3F_C4B_T2F_Quad(null,null,null,null,this._quadsArrayBuffer,(this._totalQuads-1)*n);for(this._quadsReader.set(this._quadsReader.subarray(r,r+o),r+n*i),s=0;s<i;s++)this._setQuadToArray(t[s],e+s);this.dirty=!0}},insertQuadFromIndex:function(t,e){if(t!==e){cc.assert(0<=e||e<this._totalQuads,cc._LogInfos.TextureAtlas_insertQuadFromIndex),cc.assert(0<=t||t<this._totalQuads,cc._LogInfos.TextureAtlas_insertQuadFromIndex_2);var i,n=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,s=this._quadsReader,r=s.subarray(t*n,n);t>e?(i=e*n,s.set(s.subarray(i,i+(t-e)*n),i+n),s.set(r,i)):(i=(t+1)*n,s.set(s.subarray(i,i+(e-t)*n),i-n),s.set(r,e*n)),this.dirty=!0}},removeQuadAtIndex:function(t){cc.assert(t<this._totalQuads,cc._LogInfos.TextureAtlas_removeQuadAtIndex);var e=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;if(this._totalQuads--,this._quads.length=this._totalQuads,t!==this._totalQuads){var i=(t+1)*e;this._quadsReader.set(this._quadsReader.subarray(i,i+(this._totalQuads-t)*e),i-e)}this.dirty=!0},removeQuadsAtIndex:function(t,e){if(cc.assert(t+e<=this._totalQuads,cc._LogInfos.TextureAtlas_removeQuadsAtIndex),this._totalQuads-=e,t!==this._totalQuads){var i=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,n=(t+e)*i,s=t*i;this._quadsReader.set(this._quadsReader.subarray(n,n+(this._totalQuads-t)*i),s)}this.dirty=!0},removeAllQuads:function(){this._totalQuads=this._quads.length=0},_setDirty:function(t){this.dirty=t},resizeCapacity:function(t){if(t===this._capacity)return!0;var e=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,i=this._capacity;this._totalQuads=Math.min(this._totalQuads,t);var n=this._capacity=0|t,s=this._totalQuads;if(null===this._quads)for(this._quads=[],this._quadsArrayBuffer=new ArrayBuffer(e*n),this._quadsReader=new Uint8Array(this._quadsArrayBuffer),t=0;t<n;t++)this._quads=new cc.V3F_C4B_T2F_Quad(null,null,null,null,this._quadsArrayBuffer,t*e);else{var r,o,a=this._quads;if(n>i){for(r=[],o=new ArrayBuffer(e*n),t=0;t<s;t++)r[t]=new cc.V3F_C4B_T2F_Quad(a[t].tl,a[t].bl,a[t].tr,a[t].br,o,t*e);for(;t<n;t++)r[t]=new cc.V3F_C4B_T2F_Quad(null,null,null,null,o,t*e)}else for(s=Math.max(s,n),r=[],o=new ArrayBuffer(e*n),t=0;t<s;t++)r[t]=new cc.V3F_C4B_T2F_Quad(a[t].tl,a[t].bl,a[t].tr,a[t].br,o,t*e);this._quadsReader=new Uint8Array(o),this._quads=r,this._quadsArrayBuffer=o}return null===this._indices?this._indices=new Uint16Array(6*n):n>i?((e=new Uint16Array(6*n)).set(this._indices,0),this._indices=e):this._indices=this._indices.subarray(0,6*n),this._setupIndices(),this._mapBuffers(),this.dirty=!0},increaseTotalQuadsWith:function(t){this._totalQuads+=t},moveQuadsFromIndex:function(t,e,i){if(void 0===i){if(i=e,e=this._totalQuads-t,cc.assert(i+(this._totalQuads-t)<=this._capacity,cc._LogInfos.TextureAtlas_moveQuadsFromIndex),0===e)return}else if(cc.assert(i+e<=this._totalQuads,cc._LogInfos.TextureAtlas_moveQuadsFromIndex_2),cc.assert(t<this._totalQuads,cc._LogInfos.TextureAtlas_moveQuadsFromIndex_3),t===i)return;var n=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,s=t*n,r=e*n,o=this._quadsReader,a=o.subarray(s,s+r),c=i*n;i<t?(e=i*n,o.set(o.subarray(e,e+(t-i)*n),e+r)):(e=(t+e)*n,o.set(o.subarray(e,e+(i-t)*n),s)),o.set(a,c),this.dirty=!0},fillWithEmptyQuadsFromIndex:function(t,e){for(var i=e*cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,n=new Uint8Array(this._quadsArrayBuffer,t*cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,i),s=0;s<i;s++)n[s]=0},drawQuads:function(){this.drawNumberOfQuads(this._totalQuads,0)},_releaseBuffer:function(){var t=cc._renderContext;this._buffersVBO&&(this._buffersVBO[0]&&t.deleteBuffer(this._buffersVBO[0]),this._buffersVBO[1]&&t.deleteBuffer(this._buffersVBO[1])),this._quadsWebBuffer&&t.deleteBuffer(this._quadsWebBuffer)}}),_p=cc.TextureAtlas.prototype,cc.defineGetterSetter(_p,"totalQuads",_p.getTotalQuads),cc.defineGetterSetter(_p,"capacity",_p.getCapacity),cc.defineGetterSetter(_p,"quads",_p.getQuads,_p.setQuads),cc.TextureAtlas.create=function(t,e){return new cc.TextureAtlas(t,e)},cc.TextureAtlas.createWithTexture=cc.TextureAtlas.create,cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,(function(){cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(cc.assert(cc.isFunction(cc._tmp.WebGLTextureAtlas),cc._LogInfos.MissingFile,"TexturesWebGL.js"),cc._tmp.WebGLTextureAtlas(),delete cc._tmp.WebGLTextureAtlas)})),cc.assert(cc.isFunction(cc._tmp.PrototypeTextureAtlas),cc._LogInfos.MissingFile,"TexturesPropertyDefine.js"),cc._tmp.PrototypeTextureAtlas(),delete cc._tmp.PrototypeTextureAtlas,cc.Scene=cc.Node.extend({_className:"Scene",ctor:function(){cc.Node.prototype.ctor.call(this),this._ignoreAnchorPointForPosition=!0,this.setAnchorPoint(.5,.5),this.setContentSize(cc.director.getWinSize())}}),cc.Scene.create=function(){return new cc.Scene},cc.LoaderScene=cc.Scene.extend({_interval:null,_label:null,_logo:null,_className:"LoaderScene",cb:null,target:null,init:function(){var t=this,e=200,i=t._bgLayer=new cc.LayerColor(cc.color(32,32,32,255));t.addChild(i,0);var n=24,s=-e/2+100;return cc._loaderImage&&(cc.loader.loadImg(cc._loaderImage,{isCrossOrigin:!1},(function(i,n){e=n.height,t._initStage(n,cc.visibleRect.center)})),n=14,s=-e/2-10),(n=t._label=new cc.LabelTTF("Loading... 0%","Arial",n)).setPosition(cc.pAdd(cc.visibleRect.center,cc.p(0,s))),n.setColor(cc.color(180,180,180)),i.addChild(this._label,10),!0},_initStage:function(t,e){var i=this._texture2d=new cc.Texture2D;i.initWithElement(t),i.handleLoadedTexture(),(i=this._logo=new cc.Sprite(i)).setScale(cc.contentScaleFactor()),i.x=e.x,i.y=e.y,this._bgLayer.addChild(i,10)},onEnter:function(){cc.Node.prototype.onEnter.call(this),this.schedule(this._startLoading,.3)},onExit:function(){cc.Node.prototype.onExit.call(this),this._label.setString("Loading... 0%")},initWithResources:function(t,e,i){cc.isString(t)&&(t=[t]),this.resources=t||[],this.cb=e,this.target=i},_startLoading:function(){var t=this;t.unschedule(t._startLoading),cc.loader.load(t.resources,(function(e,i,n){e=Math.min(n/i*100|0,100),t._label.setString("Loading... "+e+"%")}),(function(){t.cb&&t.cb.call(t.target)}))},_updateTransform:function(){this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),this._bgLayer._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),this._label._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),this._logo&&this._logo._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)}}),cc.LoaderScene.preload=function(t,e,i){var n=cc;return n.loaderScene||(n.loaderScene=new cc.LoaderScene,n.loaderScene.init(),cc.eventManager.addCustomListener(cc.Director.EVENT_PROJECTION_CHANGED,(function(){n.loaderScene._updateTransform()}))),n.loaderScene.initWithResources(t,e,i),cc.director.runScene(n.loaderScene),n.loaderScene},cc.Layer=cc.Node.extend({_className:"Layer",ctor:function(){cc.Node.prototype.ctor.call(this),this._ignoreAnchorPointForPosition=!0,this.setAnchorPoint(.5,.5),this.setContentSize(cc.winSize),this._cascadeOpacityEnabled=this._cascadeColorEnabled=!1},bake:function(){this._renderCmd.bake()},unbake:function(){this._renderCmd.unbake()},isBaked:function(){return this._renderCmd._isBaked},visit:function(t){var e=this._renderCmd,i=t?t._renderCmd:null;if(this._visible){if(t=cc.renderer,e.visit(i),e._isBaked)t.pushRenderCommand(e),e._bakeSprite.visit(this);else{var n,s=this._children,r=s.length;if(0<r){for(this._reorderChildDirty&&this.sortAllChildren(),i=0;i<r&&0>(n=s[i])._localZOrder;i++)n.visit(this);for(t.pushRenderCommand(e);i<r;i++)s[i].visit(this)}else t.pushRenderCommand(e)}e._dirtyFlag=0}else e._propagateFlagsDown(i)},addChild:function(t,e,i){cc.Node.prototype.addChild.call(this,t,e,i),this._renderCmd._bakeForAddChild(t)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.Layer.CanvasRenderCmd(this):new cc.Layer.WebGLRenderCmd(this)}}),cc.Layer.create=function(){return new cc.Layer},cc.LayerColor=cc.Layer.extend({_blendFunc:null,_className:"LayerColor",getBlendFunc:function(){return this._blendFunc},changeWidthAndHeight:function(t,e){this.width=t,this.height=e},changeWidth:function(t){this.width=t},changeHeight:function(t){this.height=t},setOpacityModifyRGB:function(t){},isOpacityModifyRGB:function(){return!1},ctor:function(t,e,i){cc.Layer.prototype.ctor.call(this),this._blendFunc=cc.BlendFunc._alphaNonPremultiplied(),cc.LayerColor.prototype.init.call(this,t,e,i)},init:function(t,e,i){var n=cc.director.getWinSize();return t=t||cc.color(0,0,0,255),e=void 0===e?n.width:e,i=void 0===i?n.height:i,(n=this._realColor).r=t.r,n.g=t.g,n.b=t.b,this._realOpacity=t.a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty|cc.Node._dirtyFlags.opacityDirty),cc.LayerColor.prototype.setContentSize.call(this,e,i),!0},visit:function(t){var e=this._renderCmd,i=t?t._renderCmd:null;if(this._visible){if(t=cc.renderer,e.visit(i),e._isBaked)t.pushRenderCommand(e._bakeRenderCmd),e._bakeSprite._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),e._bakeSprite.visit(this);else{var n=this._children,s=n.length;if(0<s){for(this._reorderChildDirty&&this.sortAllChildren(),i=0;i<s&&(child=n[i],0>child._localZOrder);i++)child.visit(this);for(t.pushRenderCommand(e);i<s;i++)n[i].visit(this)}else t.pushRenderCommand(e)}e._dirtyFlag=0}else e._propagateFlagsDown(i)},setBlendFunc:function(t,e){var i=this._blendFunc;void 0===e?(i.src=t.src,i.dst=t.dst):(i.src=t,i.dst=e),this._renderCmd.updateBlendFunc(i)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.LayerColor.CanvasRenderCmd(this):new cc.LayerColor.WebGLRenderCmd(this)}}),cc.LayerColor.create=function(t,e,i){return new cc.LayerColor(t,e,i)},function(){var t=cc.LayerColor.prototype;cc.defineGetterSetter(t,"width",t._getWidth,t._setWidth),cc.defineGetterSetter(t,"height",t._getHeight,t._setHeight)}(),cc.LayerGradient=cc.LayerColor.extend({_endColor:null,_startOpacity:255,_endOpacity:255,_alongVector:null,_compressedInterpolation:!1,_className:"LayerGradient",_colorStops:[],ctor:function(t,e,i,n){cc.LayerColor.prototype.ctor.call(this),this._endColor=cc.color(0,0,0,255),this._alongVector=cc.p(0,-1),this._endOpacity=this._startOpacity=255,n&&n instanceof Array?(this._colorStops=n,n.splice(0,0,{p:0,color:t||cc.color.BLACK}),n.push({p:1,color:e||cc.color.BLACK})):this._colorStops=[{p:0,color:t||cc.color.BLACK},{p:1,color:e||cc.color.BLACK}],cc.LayerGradient.prototype.init.call(this,t,e,i,n)},init:function(t,e,i,n){return t=t||cc.color(0,0,0,255),e=e||cc.color(0,0,0,255),i=i||cc.p(0,-1),n=this._endColor,this._startOpacity=t.a,n.r=e.r,n.g=e.g,n.b=e.b,this._endOpacity=e.a,this._alongVector=i,this._compressedInterpolation=!0,cc.LayerColor.prototype.init.call(this,cc.color(t.r,t.g,t.b,255)),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty|cc.Node._dirtyFlags.opacityDirty|cc.Node._dirtyFlags.gradientDirty),!0},setContentSize:function(t,e){cc.LayerColor.prototype.setContentSize.call(this,t,e),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)},_setWidth:function(t){cc.LayerColor.prototype._setWidth.call(this,t),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)},_setHeight:function(t){cc.LayerColor.prototype._setHeight.call(this,t),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)},getStartColor:function(){return cc.color(this._realColor)},setStartColor:function(t){this.color=t;var e=this._colorStops;e&&0<e.length&&((e=e[0].color).r=t.r,e.g=t.g,e.b=t.b)},setEndColor:function(t){var e=this._endColor;e.r=t.r,e.g=t.g,e.b=t.b,(e=this._colorStops)&&0<e.length&&((e=e[e.length-1].color).r=t.r,e.g=t.g,e.b=t.b),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty)},getEndColor:function(){return cc.color(this._endColor)},setStartOpacity:function(t){this._startOpacity=t;var e=this._colorStops;e&&0<e.length&&(e[0].color.a=t),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},getStartOpacity:function(){return this._startOpacity},setEndOpacity:function(t){this._endOpacity=t;var e=this._colorStops;e&&0<e.length&&(e[e.length-1].color.a=t),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},getEndOpacity:function(){return this._endOpacity},setVector:function(t){this._alongVector.x=t.x,this._alongVector.y=t.y,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)},getVector:function(){return cc.p(this._alongVector.x,this._alongVector.y)},isCompressedInterpolation:function(){return this._compressedInterpolation},setCompressedInterpolation:function(t){this._compressedInterpolation=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)},getColorStops:function(){return this._colorStops},setColorStops:function(t){this._colorStops=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty|cc.Node._dirtyFlags.opacityDirty|cc.Node._dirtyFlags.gradientDirty)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.LayerGradient.CanvasRenderCmd(this):new cc.LayerGradient.WebGLRenderCmd(this)}}),cc.LayerGradient.create=function(t,e,i,n){return new cc.LayerGradient(t,e,i,n)},function(){var t=cc.LayerGradient.prototype;cc.defineGetterSetter(t,"startColor",t.getStartColor,t.setStartColor),cc.defineGetterSetter(t,"endColor",t.getEndColor,t.setEndColor),cc.defineGetterSetter(t,"startOpacity",t.getStartOpacity,t.setStartOpacity),cc.defineGetterSetter(t,"endOpacity",t.getEndOpacity,t.setEndOpacity),cc.defineGetterSetter(t,"vector",t.getVector,t.setVector),cc.defineGetterSetter(t,"colorStops",t.getColorStops,t.setColorStops)}(),cc.LayerMultiplex=cc.Layer.extend({_enabledLayer:0,_layers:null,_className:"LayerMultiplex",ctor:function(t){cc.Layer.prototype.ctor.call(this),t instanceof Array?cc.LayerMultiplex.prototype.initWithLayers.call(this,t):cc.LayerMultiplex.prototype.initWithLayers.call(this,Array.prototype.slice.call(arguments))},initWithLayers:function(t){return 0<t.length&&null==t[t.length-1]&&cc.log(cc._LogInfos.LayerMultiplex_initWithLayers),this._layers=t,this._enabledLayer=0,this.addChild(this._layers[this._enabledLayer]),!0},switchTo:function(t){t>=this._layers.length?cc.log(cc._LogInfos.LayerMultiplex_switchTo):(this.removeChild(this._layers[this._enabledLayer],!0),this._enabledLayer=t,this.addChild(this._layers[t]))},switchToAndReleaseMe:function(t){t>=this._layers.length?cc.log(cc._LogInfos.LayerMultiplex_switchToAndReleaseMe):(this.removeChild(this._layers[this._enabledLayer],!0),this._layers[this._enabledLayer]=null,this._enabledLayer=t,this.addChild(this._layers[t]))},addLayer:function(t){t?this._layers.push(t):cc.log(cc._LogInfos.LayerMultiplex_addLayer)}}),cc.LayerMultiplex.create=function(){return new cc.LayerMultiplex(Array.prototype.slice.call(arguments))},function(){cc.Layer.CanvasRenderCmd=function(t){this._rootCtor(t),this._isBaked=!1,this._bakeSprite=null,this._canUseDirtyRegion=!0,this._updateCache=2};var t=cc.Layer.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);t.constructor=cc.Layer.CanvasRenderCmd,t._layerCmdCtor=cc.Layer.CanvasRenderCmd,t._setCacheDirty=function(t){t&&0===this._updateCache&&(this._updateCache=2),!1===this._cacheDirty&&(this._cacheDirty=!0,(t=this._cachedParent)&&t!==this&&t._setNodeDirtyForCache&&t._setNodeDirtyForCache())},t.updateStatus=function(){var t=cc.Node._dirtyFlags;this._dirtyFlag&t.orderDirty&&(this._cacheDirty=!0,0===this._updateCache&&(this._updateCache=2),this._dirtyFlag&=~t.orderDirty),this.originUpdateStatus()},t._syncStatus=function(t){var e=cc.Node._dirtyFlags,i=this._dirtyFlag;(this._isBaked||i&e.orderDirty)&&(this._cacheDirty=!0,0===this._updateCache&&(this._updateCache=2),this._dirtyFlag&=~e.orderDirty),this._originSyncStatus(t)},t.transform=function(t,e){this._worldTransform||(this._worldTransform={a:1,b:0,c:0,d:1,tx:0,ty:0});var i=this._worldTransform,n=i.a,s=i.b,r=i.c,o=i.d;this.originTransform(t,e),i.a===n&&i.b===s&&i.c===r&&i.d===o||0!==this._updateCache||(this._updateCache=2)},t.bake=function(){if(!this._isBaked){this._needDraw=!0,this._isBaked=this._cacheDirty=cc.renderer.childrenOrderDirty=!0,0===this._updateCache&&(this._updateCache=2);for(var t=this._node._children,e=0,i=t.length;e<i;e++)t[e]._renderCmd._setCachedParent(this);this._bakeSprite||(this._bakeSprite=new cc.BakeSprite,this._bakeSprite.setAnchorPoint(0,0))}},t.unbake=function(){if(this._isBaked){cc.renderer.childrenOrderDirty=!0,this._isBaked=this._needDraw=!1,this._cacheDirty=!0,0===this._updateCache&&(this._updateCache=2);for(var t=this._node._children,e=0,i=t.length;e<i;e++)t[e]._renderCmd._setCachedParent(null)}},t.isBaked=function(){return this._isBaked},t.rendering=function(){if(this._cacheDirty){var t=this._node,e=t._children,i=this._bakeSprite;this.transform(this.getParentRenderCmd(),!0);var n=this._getBoundingBoxForBake();n.width=0|n.width+.5,n.height=0|n.height+.5;var s=i.getCacheContext(),r=s.getContext();if(i.setPosition(n.x,n.y),0<this._updateCache){for(i.resetCanvasSize(n.width,n.height),s.setOffset(0-n.x,r.canvas.height-n.height+n.y),t.sortAllChildren(),cc.renderer._turnToCacheMode(this.__instanceId),t=0,n=e.length;t<n;t++)e[t].visit(this);cc.renderer._renderingToCacheCanvas(s,this.__instanceId),i.transform(),this._updateCache--}this._cacheDirty=!1}},t._bakeForAddChild=function(t){t._parent===this._node&&this._isBaked&&t._renderCmd._setCachedParent(this)},t._getBoundingBoxForBake=function(){var t=null;if(!(e=this._node)._children||0===e._children.length)return cc.rect(0,0,10,10);for(var e,i=e.getNodeToWorldTransform(),n=0,s=(e=e._children).length;n<s;n++){var r=e[n];r&&r._visible&&(t?(r=r._getBoundingBoxToCurrentNode(i))&&(t=cc.rectUnion(t,r)):t=r._getBoundingBoxToCurrentNode(i))}return t}}(),function(){cc.LayerColor.CanvasRenderCmd=function(t){this._layerCmdCtor(t),this._needDraw=!0,this._blendFuncStr="source-over",this._bakeRenderCmd=new cc.CustomRenderCmd(this,this._bakeRendering)};var t=cc.LayerColor.CanvasRenderCmd.prototype=Object.create(cc.Layer.CanvasRenderCmd.prototype);t.constructor=cc.LayerColor.CanvasRenderCmd,t.unbake=function(){cc.Layer.CanvasRenderCmd.prototype.unbake.call(this),this._needDraw=!0},t.rendering=function(t,e,i){var n=(t=t||cc._renderContext).getContext(),s=this._node,r=this._displayedColor,o=this._displayedOpacity/255,a=s._contentSize.width;s=s._contentSize.height;0!==o&&(t.setCompositeOperation(this._blendFuncStr),t.setGlobalAlpha(o),t.setFillStyle("rgba("+(0|r.r)+","+(0|r.g)+","+(0|r.b)+", 1)"),t.setTransform(this._worldTransform,e,i),n.fillRect(0,0,a,-s),cc.g_NumberOfDraws++)},t.updateBlendFunc=function(t){this._blendFuncStr=cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc(t)},t._updateSquareVertices=t._updateSquareVerticesWidth=t._updateSquareVerticesHeight=function(){},t._bakeRendering=function(){if(this._cacheDirty){var t,e=this._node,i=this._bakeSprite,n=e._children,s=n.length;this.transform(this.getParentRenderCmd(),!0),(t=this._getBoundingBoxForBake()).width=0|t.width+.5,t.height=0|t.height+.5;var r=i.getCacheContext(),o=r.getContext();if(i.setPosition(t.x,t.y),0<this._updateCache){if(o.fillStyle=r._currentFillStyle,i.resetCanvasSize(t.width,t.height),r.setOffset(0-t.x,o.canvas.height-t.height+t.y),cc.renderer._turnToCacheMode(this.__instanceId),0<s){for(e.sortAllChildren(),t=0;t<s&&0>(o=n[t])._localZOrder;t++)o.visit(e);for(cc.renderer.pushRenderCommand(this);t<s;t++)n[t].visit(e)}else cc.renderer.pushRenderCommand(this);cc.renderer._renderingToCacheCanvas(r,this.__instanceId),i.transform(),this._updateCache--}this._cacheDirty=!1}},t._getBoundingBoxForBake=function(){var t=this._node,e=cc.rect(0,0,t._contentSize.width,t._contentSize.height),i=t.getNodeToWorldTransform();e=cc.rectApplyAffineTransform(e,t.getNodeToWorldTransform());if(!t._children||0===t._children.length)return e;t=t._children;for(var n=0;n<t.length;n++){var s=t[n];s&&s._visible&&(s=s._getBoundingBoxToCurrentNode(i),e=cc.rectUnion(e,s))}return e}}(),function(){cc.LayerGradient.CanvasRenderCmd=function(t){cc.LayerColor.CanvasRenderCmd.call(this,t),this._needDraw=!0,this._startPoint=cc.p(0,0),this._endPoint=cc.p(0,0),this._endStopStr=this._startStopStr=null};var t=cc.LayerGradient.CanvasRenderCmd.prototype=Object.create(cc.LayerColor.CanvasRenderCmd.prototype);t.constructor=cc.LayerGradient.CanvasRenderCmd,t.rendering=function(t,e,i){var n=(t=t||cc._renderContext).getContext(),s=this._node,r=this._displayedOpacity/255;if(0!==r){var o=s._contentSize.width,a=s._contentSize.height;if(t.setCompositeOperation(this._blendFuncStr),t.setGlobalAlpha(r),r=n.createLinearGradient(this._startPoint.x,this._startPoint.y,this._endPoint.x,this._endPoint.y),s._colorStops)for(var c=0;c<s._colorStops.length;c++)r.addColorStop(s._colorStops[c].p,this._colorStopsStr[c]);else r.addColorStop(0,this._startStopStr),r.addColorStop(1,this._endStopStr);t.setFillStyle(r),t.setTransform(this._worldTransform,e,i),n.fillRect(0,0,o,-a),cc.g_NumberOfDraws++}},t.updateStatus=function(){var t=cc.Node._dirtyFlags;this._dirtyFlag&t.gradientDirty&&(this._dirtyFlag|=t.colorDirty,this._dirtyFlag&=~t.gradientDirty),this.originUpdateStatus()},t._syncStatus=function(t){var e=cc.Node._dirtyFlags;this._dirtyFlag&e.gradientDirty&&(this._dirtyFlag|=e.colorDirty,this._dirtyFlag&=~e.gradientDirty),this._originSyncStatus(t)},t._updateColor=function(){var t=this._node,e=.5*(i=t._contentSize).width,i=.5*i.height,n=cc.pAngleSigned(cc.p(0,-1),t._alongVector),s=(n=cc.pRotateByAngle(cc.p(0,-1),cc.p(0,0),n),Math.min(Math.abs(1/n.x),Math.abs(1/n.y)));if(this._startPoint.x=e*-n.x*s+e,this._startPoint.y=i*n.y*s-i,this._endPoint.x=e*n.x*s+e,this._endPoint.y=i*-n.y*s-i,e=this._displayedColor,i=t._endColor,n=t._startOpacity/255,s=t._endOpacity/255,this._startStopStr="rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+n.toFixed(4)+")",this._endStopStr="rgba("+Math.round(i.r)+","+Math.round(i.g)+","+Math.round(i.b)+","+s.toFixed(4)+")",t._colorStops)for(this._endOpacity=this._startOpacity=0,this._colorStopsStr=[],e=0;e<t._colorStops.length;e++)n=null==(i=t._colorStops[e].color).a?1:i.a/255,this._colorStopsStr.push("rgba("+Math.round(i.r)+","+Math.round(i.g)+","+Math.round(i.b)+","+n.toFixed(4)+")")}}(),function(){cc.Layer.WebGLRenderCmd=function(t){this._rootCtor(t),this._isBaked=!1};var t=cc.Layer.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);t.constructor=cc.Layer.WebGLRenderCmd,t._layerCmdCtor=cc.Layer.WebGLRenderCmd,t.bake=function(){},t.unbake=function(){},t._bakeForAddChild=function(){}}(),function(){cc.LayerColor.WebGLRenderCmd=function(t){this._layerCmdCtor(t),this._needDraw=!0,this._matrix=null,this.initData(4),this._color=new Uint32Array(1),this._vertexBuffer=null,this._shaderProgram=cc.shaderCache.programForKey(cc.SHADER_POSITION_COLOR)};var t=cc.LayerColor.WebGLRenderCmd.prototype=Object.create(cc.Layer.WebGLRenderCmd.prototype);t.constructor=cc.LayerColor.WebGLRenderCmd,t.initData=function(t){this._data=new ArrayBuffer(16*t),this._positionView=new Float32Array(this._data),this._colorView=new Uint32Array(this._data),this._dataDirty=!0},t.transform=function(t,e){this.originTransform(t,e);var i=this._node,n=i._contentSize.width,s=i._contentSize.height,r=this._positionView;r[4]=n,r[9]=s,r[12]=n,r[13]=s,r[2].z=r[6]=r[10]=r[14]=i._vertexZ,this._dataDirty=!0},t._updateColor=function(){var t=this._displayedColor;this._color[0]=this._displayedOpacity<<24|t.b<<16|t.g<<8|t.r;t=this._colorView;for(var e=0;4>e;e++)t[4*e+3]=this._color[0];this._dataDirty=!0},t.rendering=function(t){t=t||cc._renderContext;var e=this._node;this._matrix||(this._matrix=new cc.math.Matrix4,this._matrix.identity());var i=this._worldTransform;this._matrix.mat[0]=i.a,this._matrix.mat[4]=i.c,this._matrix.mat[12]=i.tx,this._matrix.mat[1]=i.b,this._matrix.mat[5]=i.d,this._matrix.mat[13]=i.ty,this._dataDirty&&(this._vertexBuffer||(this._vertexBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this._data,t.DYNAMIC_DRAW),this._dataDirty=!1),this._glProgramState.apply(this._matrix),cc.glBlendFunc(e._blendFunc.src,e._blendFunc.dst),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),t.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR),t.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,3,t.FLOAT,!1,16,0),t.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR,4,t.UNSIGNED_BYTE,!0,16,12),t.drawArrays(t.TRIANGLE_STRIP,0,4)},t.updateBlendFunc=function(t){}}(),function(){cc.LayerGradient.WebGLRenderCmd=function(t){cc.LayerColor.WebGLRenderCmd.call(this,t),this._needDraw=!0,this._clipRect=new cc.Rect,this._clippingRectDirty=!1};var t=cc.LayerGradient.WebGLRenderCmd.prototype=Object.create(cc.LayerColor.WebGLRenderCmd.prototype);t.constructor=cc.LayerGradient.WebGLRenderCmd,t.updateStatus=function(){var t=cc.Node._dirtyFlags;this._dirtyFlag&t.gradientDirty&&(this._dirtyFlag|=t.colorDirty,this._updateVertex(),this._dirtyFlag&=~t.gradientDirty),this.originUpdateStatus()},t._syncStatus=function(t){var e=cc.Node._dirtyFlags;this._dirtyFlag&e.gradientDirty&&(this._dirtyFlag|=e.colorDirty,this._updateVertex(),this._dirtyFlag&=~e.gradientDirty),this._originSyncStatus(t)},t.transform=function(t,e){this.originTransform(t,e),this._updateVertex()},t._updateVertex=function(){var t=this._node,e=t._colorStops;if(e&&!(2>e.length)){this._clippingRectDirty=!0;var i,n=e.length,s=2*n,r=t._contentSize;this._positionView.length/4<s&&this.initData(s);var o=Math.PI+cc.pAngleSigned(cc.p(0,-1),t._alongVector);s=cc.p(r.width/2,r.height/2);i=Math.round(cc.radiansToDegrees(o));var a,c=cc.affineTransformMake(1,0,0,1,s.x,s.y);c=cc.affineTransformRotate(c,o);90>i?(a=cc.p(-s.x,s.y),i=cc.p(s.x,s.y)):180>i?(a=cc.p(s.x,s.y),i=cc.p(s.x,-s.y)):270>i?(a=cc.p(s.x,-s.y),i=cc.p(-s.x,-s.y)):(a=cc.p(-s.x,-s.y),i=cc.p(-s.x,s.y));var h=Math.sin(o);o=Math.cos(o);for(a=Math.abs((a.x*o-a.y*h)/s.x),i=Math.abs((i.x*h+i.y*o)/s.y),c=cc.affineTransformScale(c,a,i),h=this._positionView,i=0;i<n;i++){a=e[i].p*r.height;var l=cc.pointApplyAffineTransform(-s.x,a-s.y,c);h[o=8*i]=l.x,h[o+1]=l.y,h[o+2]=t._vertexZ,a=cc.pointApplyAffineTransform(r.width-s.x,a-s.y,c),h[o+=4]=a.x,h[o+1]=a.y,h[o+2]=t._vertexZ}this._dataDirty=!0}},t._updateColor=function(){var t=this._node._colorStops;if(t&&!(2>t.length)){var e,n=t.length,s=this._colorView,r=this._displayedOpacity/255;for(i=0;i<n;i++)e=t[i].color,this._color[0]=e.a*r<<24|e.b<<16|e.g<<8|e.r,s[(e=8*i)+3]=this._color[0],s[(e+=4)+3]=this._color[0];this._dataDirty=!0}},t.rendering=function(t){t=t||cc._renderContext;var e=this._node;this._matrix||(this._matrix=new cc.math.Matrix4,this._matrix.identity());var i=this._getClippingRect();t.enable(t.SCISSOR_TEST),cc.view.setScissorInPoints(i.x,i.y,i.width,i.height),i=this._worldTransform,this._matrix.mat[0]=i.a,this._matrix.mat[4]=i.c,this._matrix.mat[12]=i.tx,this._matrix.mat[1]=i.b,this._matrix.mat[5]=i.d,this._matrix.mat[13]=i.ty,this._dataDirty&&(this._vertexBuffer||(this._vertexBuffer=gl.createBuffer()),gl.bindBuffer(gl.ARRAY_BUFFER,this._vertexBuffer),gl.bufferData(gl.ARRAY_BUFFER,this._data,gl.DYNAMIC_DRAW),this._dataDirty=!1),this._glProgramState.apply(this._matrix),cc.glBlendFunc(e._blendFunc.src,e._blendFunc.dst),gl.bindBuffer(gl.ARRAY_BUFFER,this._vertexBuffer),gl.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),gl.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR),gl.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,3,gl.FLOAT,!1,16,0),gl.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR,4,gl.UNSIGNED_BYTE,!0,16,12),gl.drawArrays(gl.TRIANGLE_STRIP,0,4),t.disable(t.SCISSOR_TEST)},t._getClippingRect=function(){if(this._clippingRectDirty){var t=this._node,e=cc.rect(0,0,t._contentSize.width,t._contentSize.height);t=t.getNodeToWorldTransform();this._clipRect=cc._rectApplyAffineTransformIn(e,t)}return this._clipRect}}(),cc._tmp.PrototypeSprite=function(){var t=cc.Sprite.prototype;cc.defineGetterSetter(t,"opacityModifyRGB",t.isOpacityModifyRGB,t.setOpacityModifyRGB),cc.defineGetterSetter(t,"opacity",t.getOpacity,t.setOpacity),cc.defineGetterSetter(t,"color",t.getColor,t.setColor),cc.defineGetterSetter(t,"flippedX",t.isFlippedX,t.setFlippedX),cc.defineGetterSetter(t,"flippedY",t.isFlippedY,t.setFlippedY),cc.defineGetterSetter(t,"offsetX",t._getOffsetX),cc.defineGetterSetter(t,"offsetY",t._getOffsetY),cc.defineGetterSetter(t,"texture",t.getTexture,t.setTexture),cc.defineGetterSetter(t,"textureRectRotated",t.isTextureRectRotated),cc.defineGetterSetter(t,"batchNode",t.getBatchNode,t.setBatchNode),cc.defineGetterSetter(t,"quad",t.getQuad)},cc.Sprite=cc.Node.extend({dirty:!1,atlasIndex:0,textureAtlas:null,_batchNode:null,_recursiveDirty:null,_hasChildren:null,_shouldBeHidden:!1,_transformToBatch:null,_blendFunc:null,_texture:null,_rect:null,_rectRotated:!1,_offsetPosition:null,_unflippedOffsetPositionFromCenter:null,_opacityModifyRGB:!1,_flippedX:!1,_flippedY:!1,_textureLoaded:!1,_className:"Sprite",ctor:function(t,e,i){cc.Node.prototype.ctor.call(this),this.setAnchorPoint(.5,.5),this._loader=new cc.Sprite.LoadManager,this._shouldBeHidden=!1,this._offsetPosition=cc.p(0,0),this._unflippedOffsetPositionFromCenter=cc.p(0,0),this._blendFunc={src:cc.BLEND_SRC,dst:cc.BLEND_DST},this._rect=cc.rect(0,0,0,0),this._softInit(t,e,i)},textureLoaded:function(){return this._textureLoaded},addLoadedEventListener:function(t,e){this.addEventListener("load",t,e)},isDirty:function(){return this.dirty},setDirty:function(t){this.dirty=t},isTextureRectRotated:function(){return this._rectRotated},getAtlasIndex:function(){return this.atlasIndex},setAtlasIndex:function(t){this.atlasIndex=t},getTextureRect:function(){return cc.rect(this._rect)},getTextureAtlas:function(){return this.textureAtlas},setTextureAtlas:function(t){this.textureAtlas=t},getOffsetPosition:function(){return cc.p(this._offsetPosition)},_getOffsetX:function(){return this._offsetPosition.x},_getOffsetY:function(){return this._offsetPosition.y},getBlendFunc:function(){return this._blendFunc},initWithSpriteFrame:function(t){return cc.assert(t,cc._LogInfos.Sprite_initWithSpriteFrame),this.setSpriteFrame(t)},initWithSpriteFrameName:function(t){cc.assert(t,cc._LogInfos.Sprite_initWithSpriteFrameName);var e=cc.spriteFrameCache.getSpriteFrame(t);return cc.assert(e,t+cc._LogInfos.Sprite_initWithSpriteFrameName1),this.initWithSpriteFrame(e)},useBatchNode:function(t){},setVertexRect:function(t){var e=this._rect;e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},setFlippedX:function(t){this._flippedX!==t&&(this._flippedX=t,this.setTextureRect(this._rect,this._rectRotated,this._contentSize),this.setNodeDirty(!0))},setFlippedY:function(t){this._flippedY!==t&&(this._flippedY=t,this.setTextureRect(this._rect,this._rectRotated,this._contentSize),this.setNodeDirty(!0))},isFlippedX:function(){return this._flippedX},isFlippedY:function(){return this._flippedY},setOpacityModifyRGB:function(t){this._opacityModifyRGB!==t&&(this._opacityModifyRGB=t,this._renderCmd._setColorDirty())},isOpacityModifyRGB:function(){return this._opacityModifyRGB},setDisplayFrameWithAnimationName:function(t,e){cc.assert(t,cc._LogInfos.Sprite_setDisplayFrameWithAnimationName_3);var i=cc.animationCache.getAnimation(t);i?(i=i.getFrames()[e])?this.setSpriteFrame(i.getSpriteFrame()):cc.log(cc._LogInfos.Sprite_setDisplayFrameWithAnimationName_2):cc.log(cc._LogInfos.Sprite_setDisplayFrameWithAnimationName)},getBatchNode:function(){return this._batchNode},getTexture:function(){return this._texture},_softInit:function(t,e,i){void 0===t?cc.Sprite.prototype.init.call(this):"string"==typeof t?"#"===t[0]?(e=t.substr(1,t.length-1),(e=cc.spriteFrameCache.getSpriteFrame(e))?this.initWithSpriteFrame(e):cc.log("%s does not exist",t)):cc.Sprite.prototype.init.call(this,t,e):"object"==typeof t&&(t instanceof cc.Texture2D?this.initWithTexture(t,e,i):t instanceof cc.SpriteFrame?this.initWithSpriteFrame(t):(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement)&&((e=new cc.Texture2D).initWithElement(t),e.handleLoadedTexture(),this.initWithTexture(e)))},getQuad:function(){return null},setBlendFunc:function(t,e){var i=this._blendFunc;void 0===e?(i.src=t.src,i.dst=t.dst):(i.src=t,i.dst=e),this._renderCmd.updateBlendFunc(i)},init:function(){return 0<arguments.length?this.initWithFile(arguments[0],arguments[1]):(cc.Node.prototype.init.call(this),this.dirty=this._recursiveDirty=!1,this._blendFunc.src=cc.BLEND_SRC,this._blendFunc.dst=cc.BLEND_DST,this.texture=null,this._flippedX=this._flippedY=!1,this.anchorY=this.anchorX=.5,this._offsetPosition.x=0,this._offsetPosition.y=0,this._hasChildren=!1,this.setTextureRect(cc.rect(0,0,0,0),!1,cc.size(0,0)),!0)},initWithFile:function(t,e){cc.assert(t,cc._LogInfos.Sprite_initWithFile);var i=cc.textureCache.getTextureForKey(t);if(i||(i=cc.textureCache.addImage(t)),!i.isLoaded())return this._loader.clear(),this._loader.once(i,(function(){this.initWithFile(t,e),this.dispatchEvent("load")}),this),!1;if(!e){var n=i.getContentSize();e=cc.rect(0,0,n.width,n.height)}return this.initWithTexture(i,e)},initWithTexture:function(t,e,i,n){return cc.assert(0!==arguments.length,cc._LogInfos.CCSpriteBatchNode_initWithTexture),this._loader.clear(),this._textureLoaded=t.isLoaded(),this._textureLoaded?(i=i||!1,t=this._renderCmd._handleTextureForRotatedTexture(t,e,i,n),!!cc.Node.prototype.init.call(this)&&(this._batchNode=null,this.dirty=this._recursiveDirty=!1,this._opacityModifyRGB=!0,this._blendFunc.src=cc.BLEND_SRC,this._blendFunc.dst=cc.BLEND_DST,this._flippedX=this._flippedY=!1,this._offsetPosition.x=0,this._offsetPosition.y=0,this._hasChildren=!1,this._rectRotated=i,e&&(this._rect.x=e.x,this._rect.y=e.y,this._rect.width=e.width,this._rect.height=e.height),e||(e=cc.rect(0,0,t.width,t.height)),this._renderCmd._checkTextureBoundary(t,e,i),this.setTexture(t),this.setTextureRect(e,i),this.setBatchNode(null),!0)):(this._loader.once(t,(function(){this.initWithTexture(t,e,i,n),this.dispatchEvent("load")}),this),!1)},setTextureRect:function(t,e,i,n){this._rectRotated=e||!1,this.setContentSize(i||t),this.setVertexRect(t),this._renderCmd._setTextureCoords(t,n),t=this._unflippedOffsetPositionFromCenter.x,e=this._unflippedOffsetPositionFromCenter.y,this._flippedX&&(t=-t),this._flippedY&&(e=-e),i=this._rect,this._offsetPosition.x=t+(this._contentSize.width-i.width)/2,this._offsetPosition.y=e+(this._contentSize.height-i.height)/2},addChild:function(t,e,i){cc.assert(t,cc._LogInfos.CCSpriteBatchNode_addChild_2),null==e&&(e=t._localZOrder),null==i&&(i=t.tag),this._renderCmd._setBatchNodeForAddChild(t)&&(cc.Node.prototype.addChild.call(this,t,e,i),this._hasChildren=!0)},setSpriteFrame:function(t){"string"==typeof t&&(t=cc.spriteFrameCache.getSpriteFrame(t),cc.assert(t,cc._LogInfos.Sprite_setSpriteFrame)),this._loader.clear(),this.setNodeDirty(!0);var e=t.getTexture();if(this._textureLoaded=t.textureLoaded(),this._loader.clear(),!this._textureLoaded)return this._loader.once(e,(function(){this.setSpriteFrame(t),this.dispatchEvent("load")}),this),!1;var i=t.getOffset();this._unflippedOffsetPositionFromCenter.x=i.x,this._unflippedOffsetPositionFromCenter.y=i.y,e!==this._texture&&(this._renderCmd._setTexture(e),this.setColor(this._realColor)),this.setTextureRect(t.getRect(),t.isRotated(),t.getOriginalSize())},setDisplayFrame:function(t){cc.log(cc._LogInfos.Sprite_setDisplayFrame),this.setSpriteFrame(t)},isFrameDisplayed:function(t){return this._renderCmd.isFrameDisplayed(t)},displayFrame:function(){return this.getSpriteFrame()},getSpriteFrame:function(){return new cc.SpriteFrame(this._texture,cc.rectPointsToPixels(this._rect),this._rectRotated,cc.pointPointsToPixels(this._unflippedOffsetPositionFromCenter),cc.sizePointsToPixels(this._contentSize))},setBatchNode:function(t){},setTexture:function(t){if(!t)return this._renderCmd._setTexture(null);var e="string"==typeof t;if(e&&(t=cc.textureCache.addImage(t)),this._loader.clear(),!t._textureLoaded)return this._loader.once(t,(function(){this.setTexture(t),this.dispatchEvent("load")}),this),!1;this._renderCmd._setTexture(t),e&&this._changeRectWithTexture(t),this.setColor(this._realColor),this._textureLoaded=!0},_changeRectWithTexture:function(t){t=t._contentSize,t=cc.rect(0,0,t.width,t.height),this.setTextureRect(t)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.Sprite.CanvasRenderCmd(this):new cc.Sprite.WebGLRenderCmd(this)}}),cc.Sprite.create=function(t,e,i){return new cc.Sprite(t,e,i)},cc.Sprite.createWithTexture=cc.Sprite.create,cc.Sprite.createWithSpriteFrameName=cc.Sprite.create,cc.Sprite.createWithSpriteFrame=cc.Sprite.create,cc.Sprite.INDEX_NOT_INITIALIZED=-1,cc.EventHelper.prototype.apply(cc.Sprite.prototype),cc.assert(cc.isFunction(cc._tmp.PrototypeSprite),cc._LogInfos.MissingFile,"SpritesPropertyDefine.js"),cc._tmp.PrototypeSprite(),delete cc._tmp.PrototypeSprite,function(){var t=cc.Sprite.LoadManager=function(){this.list=[]};t.prototype.add=function(t,e,i){t&&t.addEventListener&&(t.addEventListener("load",e,i),this.list.push({source:t,listener:e,target:i}))},t.prototype.once=function(t,e,i){if(t&&t.addEventListener){var n=function(s){t.removeEventListener("load",n,i),e.call(i,s)};t.addEventListener("load",n,i),this.list.push({source:t,listener:n,target:i})}},t.prototype.clear=function(){for(;0<this.list.length;){var t=this.list.pop();t.source.removeEventListener("load",t.listener,t.target)}}}(),function(){cc.Sprite.CanvasRenderCmd=function(t){this._rootCtor(t),this._needDraw=!0,this._textureCoord={renderX:0,renderY:0,x:0,y:0,width:0,height:0,validRect:!1},this._blendFuncStr="source-over",this._colorized=!1,this._canUseDirtyRegion=!0,this._textureToRender=null};var t=cc.Sprite.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);t.constructor=cc.Sprite.CanvasRenderCmd,t._spriteCmdCtor=cc.Sprite.CanvasRenderCmd,t.setDirtyRecursively=function(t){},t._setTexture=function(t){var e=this._node;e._texture!==t&&(e._textureLoaded=!!t&&t._textureLoaded,e._texture=t,t=t._contentSize,t=cc.rect(0,0,t.width,t.height),e.setTextureRect(t),this._updateColor())},t._setColorDirty=function(){this.setDirtyFlag(cc.Node._dirtyFlags.colorDirty|cc.Node._dirtyFlags.opacityDirty)},t.isFrameDisplayed=function(t){var e=this._node;return t.getTexture()===e._texture&&cc.rectEqualToRect(t.getRect(),e._rect)},t.updateBlendFunc=function(t){this._blendFuncStr=cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc(t)},t._setBatchNodeForAddChild=function(t){return!0},t._handleTextureForRotatedTexture=function(t,e,i,n){return i&&t.isLoaded()&&(t=t.getHtmlElementObj(),t=cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas(t,e,n),(n=new cc.Texture2D).initWithElement(t),n.handleLoadedTexture(),t=n,e.x=e.y=0,this._node._rect=cc.rect(0,0,e.width,e.height)),t},t._checkTextureBoundary=function(t,e,i){t&&t.url&&(i=e.y+e.height,e.x+e.width>t.width&&cc.error(cc._LogInfos.RectWidth,t.url),i>t.height&&cc.error(cc._LogInfos.RectHeight,t.url))},t.rendering=function(t,e,i){var n=this._node,s=this._textureCoord,r=this._displayedOpacity/255,o=this._textureToRender||n._texture;if((!o||0!==s.width&&0!==s.height&&o._textureLoaded)&&0!==r){var a,c,h,l=(t=t||cc._renderContext).getContext(),u=n._offsetPosition.x,d=n._rect.height,_=n._rect.width,g=-n._offsetPosition.y-d;t.setTransform(this._worldTransform,e,i),t.setCompositeOperation(this._blendFuncStr),t.setGlobalAlpha(r),(n._flippedX||n._flippedY)&&t.save(),n._flippedX&&(u=-u-_,l.scale(-1,1)),n._flippedY&&(g=n._offsetPosition.y,l.scale(1,-1)),this._colorized?a=r=0:(r=s.renderX,a=s.renderY),c=s.width,h=s.height,o&&o._htmlElementObj?(e=o._htmlElementObj,""!==o._pattern?(t.setFillStyle(l.createPattern(e,o._pattern)),l.fillRect(u,g,_,d)):l.drawImage(e,r,a,c,h,u,g,_,d)):(o=n._contentSize,s.validRect&&(s=this._displayedColor,t.setFillStyle("rgba("+s.r+","+s.g+","+s.b+",1)"),l.fillRect(u,g,o.width*e,o.height*i))),(n._flippedX||n._flippedY)&&t.restore(),cc.g_NumberOfDraws++}},t._updateColor=function(){var t=this._node._texture,e=this._textureCoord,i=this._displayedColor;t&&(255!==i.r||255!==i.g||255!==i.b?(this._textureToRender=t._generateColorTexture(i.r,i.g,i.b,e),this._colorized=!0):t&&(this._textureToRender=t,this._colorized=!1))},t._textureLoadedCallback=function(t){if(!this._textureLoaded){this._textureLoaded=!0;var e=this._rect,i=this._renderCmd;e?cc._rectEqualToZero(e)&&(e.width=t.width,e.height=t.height):e=cc.rect(0,0,t.width,t.height),this.texture=t,this.setTextureRect(e,this._rectRotated),255===(t=i._displayedColor).r&&255===t.g&&255===t.b||i._updateColor(),this.setBatchNode(this._batchNode),this.dispatchEvent("load")}},t._setTextureCoords=function(t,e){void 0===e&&(e=!0);var i=this._textureCoord,n=e?cc.contentScaleFactor():1;i.renderX=i.x=0|t.x*n,i.renderY=i.y=0|t.y*n,i.width=0|t.width*n,i.height=0|t.height*n,i.validRect=!(0===i.width||0===i.height||0>i.x||0>i.y)},cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas=function(t,e,i){if(!t)return null;if(!e)return t;i=null==i||i;var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var s=n.getContext("2d");return s.translate(n.width/2,n.height/2),i?s.rotate(-1.5707963267948966):s.rotate(1.5707963267948966),s.drawImage(t,e.x,e.y,e.height,e.width,-e.height/2,-e.width/2,e.height,e.width),n}}(),function(){cc.Sprite.WebGLRenderCmd=function(t){this._rootCtor(t),this._needDraw=!0,this._vertices=[{x:0,y:0,u:0,v:0},{x:0,y:0,u:0,v:0},{x:0,y:0,u:0,v:0},{x:0,y:0,u:0,v:0}],this._color=new Uint32Array(1),this._recursiveDirty=this._dirty=!1,this._shaderProgram=cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR)};var t=cc.Sprite.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);t.constructor=cc.Sprite.WebGLRenderCmd,t._spriteCmdCtor=cc.Sprite.WebGLRenderCmd,t.updateBlendFunc=function(t){},t.setDirtyFlag=function(t){cc.Node.WebGLRenderCmd.prototype.setDirtyFlag.call(this,t),this._dirty=!0},t.setDirtyRecursively=function(t){this._dirty=this._recursiveDirty=t;for(var e,i=this._node._children,n=i?i.length:0,s=0;s<n;s++)(e=i[s])instanceof cc.Sprite&&e._renderCmd.setDirtyRecursively(t)},t._setBatchNodeForAddChild=function(t){var e=this._node;if(e._batchNode){if(!(t instanceof cc.Sprite))return cc.log(cc._LogInfos.Sprite_addChild),!1;t.texture._webTextureObj!==e.textureAtlas.texture._webTextureObj&&cc.log(cc._LogInfos.Sprite_addChild_2),e._batchNode.appendChild(t),e._reorderChildDirty||e._setReorderChildDirtyRecursively()}return!0},t._handleTextureForRotatedTexture=function(t){return t},t.isFrameDisplayed=function(t){var e=this._node;return cc.rectEqualToRect(t.getRect(),e._rect)&&t.getTexture().getName()===e._texture.getName()&&cc.pointEqualToPoint(t.getOffset(),e._unflippedOffsetPositionFromCenter)},t._textureLoadedCallback=function(t){if(!this._textureLoaded){this._textureLoaded=!0;var e=this._rect;e?cc._rectEqualToZero(e)&&(e.width=t.width,e.height=t.height):e=cc.rect(0,0,t.width,t.height),this.texture=t,this.setTextureRect(e,this._rectRotated),this.setBatchNode(this._batchNode),this.dispatchEvent("load"),cc.renderer.childrenOrderDirty=!0}},t._setTextureCoords=function(t,e){void 0===e&&(e=!0),e&&(t=cc.rectPointsToPixels(t));var i=this._node,n=i._batchNode?i.textureAtlas.texture:i._texture,s=this._vertices;if(n){var r,o,a=n.pixelsWidth,c=n.pixelsHeight;i._rectRotated?(cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL?(a=(n=(2*t.x+1)/(2*a))+(2*t.height-2)/(2*a),c=(r=(2*t.y+1)/(2*c))+(2*t.width-2)/(2*c)):(n=t.x/a,a=(t.x+t.height)/a,r=t.y/c,c=(t.y+t.width)/c),i._flippedX&&(o=r,r=c,c=o),i._flippedY&&(o=n,n=a,a=o),s[0].u=a,s[0].v=r,s[1].u=n,s[1].v=r,s[2].u=a,s[2].v=c,s[3].u=n):(cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL?(a=(n=(2*t.x+1)/(2*a))+(2*t.width-2)/(2*a),c=(r=(2*t.y+1)/(2*c))+(2*t.height-2)/(2*c)):(n=t.x/a,a=(t.x+t.width)/a,r=t.y/c,c=(t.y+t.height)/c),i._flippedX&&(o=n,n=a,a=o),i._flippedY&&(o=r,r=c,c=o),s[0].u=n,s[0].v=r,s[1].u=n,s[1].v=c,s[2].u=a,s[2].v=r,s[3].u=a),s[3].v=c}},t._setColorDirty=function(){},t._updateBlendFunc=function(){if(this._batchNode)cc.log(cc._LogInfos.Sprite__updateBlendFunc);else{var t=this._node,e=t._blendFunc;t._texture&&t._texture.hasPremultipliedAlpha()?(e.src===cc.SRC_ALPHA&&e.dst===cc.BLEND_DST&&(e.src=cc.ONE),t.opacityModifyRGB=!0):(e.src===cc.ONE&&e.dst===cc.BLEND_DST&&(e.src=cc.SRC_ALPHA),t.opacityModifyRGB=!1)}},t._setTexture=function(t){var e=this._node;e._texture!==t&&(e._textureLoaded=!!t&&t._textureLoaded,(e._texture=t)&&(t=t._contentSize,t=cc.rect(0,0,t.width,t.height),e.setTextureRect(t),this._updateBlendFunc()),e._textureLoaded&&(cc.renderer.childrenOrderDirty=!0))},t._checkTextureBoundary=function(t,e,i){t&&t.url&&(i?(i=e.x+e.height,e=e.y+e.width):(i=e.x+e.width,e=e.y+e.height),i>t.width&&cc.error(cc._LogInfos.RectWidth,t.url),e>t.height&&cc.error(cc._LogInfos.RectHeight,t.url))},t.transform=function(t,e){this.originTransform(t,e);var i,n=(c=(r=this._node)._offsetPosition.x)+r._rect.width,s=(d=r._offsetPosition.y)+r._rect.height,r=(i=this._worldTransform).tx,o=i.ty,a=c*i.a,c=c*i.b,h=n*i.a,l=(n=n*i.b,s*i.c),u=(s=s*i.d,d*i.c),d=d*i.d;(i=this._vertices)[0].x=a+l+r,i[0].y=c+s+o,i[1].x=a+u+r,i[1].y=c+d+o,i[2].x=h+l+r,i[2].y=n+s+o,i[3].x=h+u+r,i[3].y=n+d+o},t.needDraw=function(){var t=this._node._texture;return this._needDraw&&t},t.uploadData=function(t,e,i){var n=this._node;if(!((s=n._texture)&&s._textureLoaded&&n._rect.width&&n._rect.height&&this._displayedOpacity))return 0;var s=this._displayedOpacity,r=this._displayedColor.r,o=this._displayedColor.g,a=this._displayedColor.b;if(n._opacityModifyRGB){var c=s/255;r=r*c,o=o*c,a=a*c}for(this._color[0]=s<<24|a<<16|o<<8|r,n=n._vertexZ,r=(s=this._vertices).length,a=i,i=0;i<r;++i)o=s[i],t[a]=o.x,t[a+1]=o.y,t[a+2]=n,e[a+3]=this._color[0],t[a+4]=o.u,t[a+5]=o.v,a+=6;return r}}(),cc.SpriteBatchNode=cc.Node.extend({_blendFunc:null,_texture:null,_className:"SpriteBatchNode",ctor:function(t){var e;cc.Node.prototype.ctor.call(this),this._blendFunc=new cc.BlendFunc(cc.BLEND_SRC,cc.BLEND_DST),cc.isString(t)?(e=cc.textureCache.getTextureForKey(t))||(e=cc.textureCache.addImage(t)):t instanceof cc.Texture2D&&(e=t),e&&this.initWithTexture(e)},addSpriteWithoutQuad:function(t,e,i){return this.addChild(t,e,i),this},getTextureAtlas:function(){return null},setTextureAtlas:function(t){},getDescendants:function(){return this._children},initWithFile:function(t,e){var i=cc.textureCache.getTextureForKey(t);return i||(i=cc.textureCache.addImage(t)),this.initWithTexture(i,e)},init:function(t,e){var i=cc.textureCache.getTextureForKey(t);return i||(i=cc.textureCache.addImage(t)),this.initWithTexture(i,e)},increaseAtlasCapacity:function(){},removeChildAtIndex:function(t,e){this.removeChild(this._children[t],e)},rebuildIndexInOrder:function(t,e){return e},highestAtlasIndexInChild:function(t){var e=t.children;return e&&0!==e.length?this.highestAtlasIndexInChild(e[e.length-1]):t.zIndex},lowestAtlasIndexInChild:function(t){var e=t.children;return e&&0!==e.length?this.lowestAtlasIndexInChild(e[e.length-1]):t.zIndex},atlasIndexForChild:function(t){return t.zIndex},reorderBatch:function(t){this._reorderChildDirty=t},setBlendFunc:function(t,e){this._blendFunc=void 0===e?t:{src:t,dst:e}},getBlendFunc:function(){return new cc.BlendFunc(this._blendFunc.src,this._blendFunc.dst)},updateQuadFromSprite:function(t,e){cc.assert(t,cc._LogInfos.CCSpriteBatchNode_updateQuadFromSprite_2),t instanceof cc.Sprite?(t.dirty=!0,t._renderCmd.transform(this._renderCmd,!0)):cc.log(cc._LogInfos.CCSpriteBatchNode_updateQuadFromSprite)},insertQuadFromSprite:function(t,e){this.addChild(t,e)},insertChild:function(t,e){this.addChild(t,e)},appendChild:function(t){this.sortAllChildren(),this.addChild(t.lastLocalZOrder+1)},removeSpriteFromAtlas:function(t,e){this.removeChild(t,e)},initWithTexture:function(t){return this.setTexture(t),!0},getTexture:function(){return this._texture},setTexture:function(t){if(this._texture=t,t._textureLoaded){var e,i=this._children,n=i.length;for(e=0;e<n;++e)i[e].setTexture(t)}else t.addEventListener("load",(function(){var e,i=this._children,n=i.length;for(e=0;e<n;++e)i[e].setTexture(t)}),this)},setShaderProgram:function(t){this._renderCmd.setShaderProgram(t);var e,i=this._children,n=i.length;for(e=0;e<n;++e)i[e].setShaderProgram(t)},addChild:function(t,e,i){cc.assert(void 0!==t,cc._LogInfos.CCSpriteBatchNode_addChild_3),this._isValidChild(t)&&(e=void 0===e?t.zIndex:e,i=void 0===i?t.tag:i,cc.Node.prototype.addChild.call(this,t,e,i),this._renderCmd._shaderProgram&&(t.shaderProgram=this._renderCmd._shaderProgram))},_isValidChild:function(t){return t instanceof cc.Sprite?t.texture===this._texture||(cc.log(cc._LogInfos.Sprite_addChild_5),!1):(cc.log(cc._LogInfos.Sprite_addChild_4),!1)}}),_p=cc.SpriteBatchNode.prototype,cc.defineGetterSetter(_p,"texture",_p.getTexture,_p.setTexture),cc.defineGetterSetter(_p,"shaderProgram",_p.getShaderProgram,_p.setShaderProgram),cc.SpriteBatchNode.create=function(t){return new cc.SpriteBatchNode(t)},cc.SpriteBatchNode.createWithTexture=cc.SpriteBatchNode.create,cc.BakeSprite=cc.Sprite.extend({_cacheCanvas:null,_cacheContext:null,ctor:function(){cc.Sprite.prototype.ctor.call(this);var t=document.createElement("canvas");t.width=t.height=10,this._cacheCanvas=t,this._cacheContext=new cc.CanvasContextWrapper(t.getContext("2d"));var e=new cc.Texture2D;e.initWithElement(t),e.handleLoadedTexture(),this.setTexture(e)},getCacheContext:function(){return this._cacheContext},getCacheCanvas:function(){return this._cacheCanvas},resetCanvasSize:function(t,e){var i=this._cacheCanvas,n=this._cacheContext,s=n._context.strokeStyle,r=n._context.fillStyle;void 0===e&&(e=t.height,t=t.width),i.width=t,i.height=e,s!==n._context.strokeStyle&&(n._context.strokeStyle=s),r!==n._context.fillStyle&&(n._context.fillStyle=r),this.getTexture().handleLoadedTexture(),this.setTextureRect(cc.rect(0,0,t,e),!1,null,!1)}}),cc.AnimationFrame=cc.Class.extend({_spriteFrame:null,_delayPerUnit:0,_userInfo:null,ctor:function(t,e,i){this._spriteFrame=t||null,this._delayPerUnit=e||0,this._userInfo=i||null},clone:function(){var t=new cc.AnimationFrame;return t.initWithSpriteFrame(this._spriteFrame.clone(),this._delayPerUnit,this._userInfo),t},copyWithZone:function(t){return cc.clone(this)},copy:function(t){return(t=new cc.AnimationFrame).initWithSpriteFrame(this._spriteFrame.clone(),this._delayPerUnit,this._userInfo),t},initWithSpriteFrame:function(t,e,i){return this._spriteFrame=t,this._delayPerUnit=e,this._userInfo=i,!0},getSpriteFrame:function(){return this._spriteFrame},setSpriteFrame:function(t){this._spriteFrame=t},getDelayUnits:function(){return this._delayPerUnit},setDelayUnits:function(t){this._delayPerUnit=t},getUserInfo:function(){return this._userInfo},setUserInfo:function(t){this._userInfo=t}}),cc.AnimationFrame.create=function(t,e,i){return new cc.AnimationFrame(t,e,i)},cc.Animation=cc.Class.extend({_frames:null,_loops:0,_restoreOriginalFrame:!1,_duration:0,_delayPerUnit:0,_totalDelayUnits:0,ctor:function(t,e,i){if(this._frames=[],void 0===t)this.initWithSpriteFrames(null,0);else{var n=t[0];n&&(n instanceof cc.SpriteFrame?this.initWithSpriteFrames(t,e,i):n instanceof cc.AnimationFrame&&this.initWithAnimationFrames(t,e,i))}},getFrames:function(){return this._frames},setFrames:function(t){this._frames=t},addSpriteFrame:function(t){var e=new cc.AnimationFrame;e.initWithSpriteFrame(t,1,null),this._frames.push(e),this._totalDelayUnits++},addSpriteFrameWithFile:function(t){t=cc.textureCache.addImage(t);var e=cc.rect(0,0,0,0);e.width=t.width,e.height=t.height,t=new cc.SpriteFrame(t,e),this.addSpriteFrame(t)},addSpriteFrameWithTexture:function(t,e){var i=new cc.SpriteFrame(t,e);this.addSpriteFrame(i)},initWithAnimationFrames:function(t,e,i){for(cc.arrayVerifyType(t,cc.AnimationFrame),this._delayPerUnit=e,this._loops=void 0===i?1:i,this._totalDelayUnits=0,i=(e=this._frames).length=0;i<t.length;i++){var n=t[i];e.push(n),this._totalDelayUnits+=n.getDelayUnits()}return!0},clone:function(){var t=new cc.Animation;return t.initWithAnimationFrames(this._copyFrames(),this._delayPerUnit,this._loops),t.setRestoreOriginalFrame(this._restoreOriginalFrame),t},copyWithZone:function(t){return(t=new cc.Animation).initWithAnimationFrames(this._copyFrames(),this._delayPerUnit,this._loops),t.setRestoreOriginalFrame(this._restoreOriginalFrame),t},_copyFrames:function(){for(var t=[],e=0;e<this._frames.length;e++)t.push(this._frames[e].clone());return t},copy:function(t){return this.copyWithZone(null)},getLoops:function(){return this._loops},setLoops:function(t){this._loops=t},setRestoreOriginalFrame:function(t){this._restoreOriginalFrame=t},getRestoreOriginalFrame:function(){return this._restoreOriginalFrame},getDuration:function(){return this._totalDelayUnits*this._delayPerUnit},getDelayPerUnit:function(){return this._delayPerUnit},setDelayPerUnit:function(t){this._delayPerUnit=t},getTotalDelayUnits:function(){return this._totalDelayUnits},initWithSpriteFrames:function(t,e,i){if(cc.arrayVerifyType(t,cc.SpriteFrame),this._loops=void 0===i?1:i,this._delayPerUnit=e||0,this._totalDelayUnits=0,(e=this._frames).length=0,t){for(i=0;i<t.length;i++){var n=t[i],s=new cc.AnimationFrame;s.initWithSpriteFrame(n,1,null),e.push(s)}this._totalDelayUnits+=t.length}return!0},retain:function(){},release:function(){}}),cc.Animation.create=function(t,e,i){return new cc.Animation(t,e,i)},cc.Animation.createWithAnimationFrames=cc.Animation.create,cc.animationCache={_animations:{},addAnimation:function(t,e){this._animations[e]=t},removeAnimation:function(t){t&&this._animations[t]&&delete this._animations[t]},getAnimation:function(t){return this._animations[t]?this._animations[t]:null},_addAnimationsWithDictionary:function(t,e){var i=t.animations;if(i){var n=1;if(s=t.properties){n=null!=s.format?parseInt(s.format):n;for(var s=s.spritesheets,r=cc.spriteFrameCache,o=cc.path,a=0;a<s.length;a++)r.addSpriteFrames(o.changeBasename(e,s[a]))}switch(n){case 1:this._parseVersion1(i);break;case 2:this._parseVersion2(i);break;default:cc.log(cc._LogInfos.animationCache__addAnimationsWithDictionary_2)}}else cc.log(cc._LogInfos.animationCache__addAnimationsWithDictionary)},addAnimations:function(t){cc.assert(t,cc._LogInfos.animationCache_addAnimations_2);var e=cc.loader.getRes(t);e?this._addAnimationsWithDictionary(e,t):cc.log(cc._LogInfos.animationCache_addAnimations)},_parseVersion1:function(t){var e,i=cc.spriteFrameCache;for(e in t){var n=(s=t[e]).frames,s=parseFloat(s.delay)||0,r=null;if(n){r=[];for(var o=0;o<n.length;o++){var a=i.getSpriteFrame(n[o]);if(a){var c=new cc.AnimationFrame;c.initWithSpriteFrame(a,1,null),r.push(c)}else cc.log(cc._LogInfos.animationCache__parseVersion1_2,e,n[o])}0===r.length?cc.log(cc._LogInfos.animationCache__parseVersion1_3,e):(r.length!==n.length&&cc.log(cc._LogInfos.animationCache__parseVersion1_4,e),r=new cc.Animation(r,s,1),cc.animationCache.addAnimation(r,e))}else cc.log(cc._LogInfos.animationCache__parseVersion1,e)}},_parseVersion2:function(t){var e,i=cc.spriteFrameCache;for(e in t){var n=t[e],s=n.loop,r=parseInt(n.loops),o=(s=s?cc.REPEAT_FOREVER:isNaN(r)?1:r,r=!(!n.restoreOriginalFrame||1!=n.restoreOriginalFrame),n.frames);if(o){for(var a=[],c=0;c<o.length;c++){var h=(u=o[c]).spriteframe,l=i.getSpriteFrame(h);if(l){h=parseFloat(u.delayUnits)||0;var u=u.notification,d=new cc.AnimationFrame;d.initWithSpriteFrame(l,h,u),a.push(d)}else cc.log(cc._LogInfos.animationCache__parseVersion2_2,e,h)}n=parseFloat(n.delayPerUnit)||0,(o=new cc.Animation).initWithAnimationFrames(a,n,s),o.setRestoreOriginalFrame(r),cc.animationCache.addAnimation(o,e)}else cc.log(cc._LogInfos.animationCache__parseVersion2,e)}},_clear:function(){this._animations={}}},cc.SpriteFrame=cc.Class.extend({_offset:null,_originalSize:null,_rectInPixels:null,_rotated:!1,_rect:null,_offsetInPixels:null,_originalSizeInPixels:null,_texture:null,_textureFilename:"",_textureLoaded:!1,ctor:function(t,e,i,n,s){this._offset=cc.p(0,0),this._offsetInPixels=cc.p(0,0),this._originalSize=cc.size(0,0),this._rotated=!1,this._originalSizeInPixels=cc.size(0,0),this._textureFilename="",this._texture=null,this._textureLoaded=!1,void 0!==t&&void 0!==e&&(void 0===i||void 0===n||void 0===s?this.initWithTexture(t,e):this.initWithTexture(t,e,i,n,s))},textureLoaded:function(){return this._textureLoaded},addLoadedEventListener:function(t,e){this.addEventListener("load",t,e)},getRectInPixels:function(){var t=this._rectInPixels;return cc.rect(t.x,t.y,t.width,t.height)},setRectInPixels:function(t){this._rectInPixels||(this._rectInPixels=cc.rect(0,0,0,0)),this._rectInPixels.x=t.x,this._rectInPixels.y=t.y,this._rectInPixels.width=t.width,this._rectInPixels.height=t.height,this._rect=cc.rectPixelsToPoints(t)},isRotated:function(){return this._rotated},setRotated:function(t){this._rotated=t},getRect:function(){var t=this._rect;return cc.rect(t.x,t.y,t.width,t.height)},setRect:function(t){this._rect||(this._rect=cc.rect(0,0,0,0)),this._rect.x=t.x,this._rect.y=t.y,this._rect.width=t.width,this._rect.height=t.height,this._rectInPixels=cc.rectPointsToPixels(this._rect)},getOffsetInPixels:function(){return cc.p(this._offsetInPixels)},setOffsetInPixels:function(t){this._offsetInPixels.x=t.x,this._offsetInPixels.y=t.y,cc._pointPixelsToPointsOut(this._offsetInPixels,this._offset)},getOriginalSizeInPixels:function(){return cc.size(this._originalSizeInPixels)},setOriginalSizeInPixels:function(t){this._originalSizeInPixels.width=t.width,this._originalSizeInPixels.height=t.height},getOriginalSize:function(){return cc.size(this._originalSize)},setOriginalSize:function(t){this._originalSize.width=t.width,this._originalSize.height=t.height},getTexture:function(){if(this._texture)return this._texture;if(""!==this._textureFilename){var t=cc.textureCache.addImage(this._textureFilename);return t&&(this._textureLoaded=t.isLoaded()),t}return null},setTexture:function(t){if(this._texture!==t){var e=t.isLoaded();this._textureLoaded=e,this._texture=t,e||t.addEventListener("load",(function(t){if(this._textureLoaded=!0,this._rotated&&cc._renderType===cc.game.RENDER_TYPE_CANVAS){var e=t.getHtmlElementObj(),i=(e=cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas(e,this.getRect()),new cc.Texture2D);i.initWithElement(e),i.handleLoadedTexture(),this.setTexture(i),e=this.getRect(),this.setRect(cc.rect(0,0,e.width,e.height))}0===(e=this._rect).width&&0===e.height&&(e=t.width,t=t.height,this._rect.width=e,this._rect.height=t,this._rectInPixels=cc.rectPointsToPixels(this._rect),this._originalSizeInPixels.width=this._rectInPixels.width,this._originalSizeInPixels.height=this._rectInPixels.height,this._originalSize.width=e,this._originalSize.height=t),this.dispatchEvent("load")}),this)}},getOffset:function(){return cc.p(this._offset)},setOffset:function(t){this._offset.x=t.x,this._offset.y=t.y},clone:function(){var t=new cc.SpriteFrame;return t.initWithTexture(this._textureFilename,this._rectInPixels,this._rotated,this._offsetInPixels,this._originalSizeInPixels),t.setTexture(this._texture),t},copyWithZone:function(){var t=new cc.SpriteFrame;return t.initWithTexture(this._textureFilename,this._rectInPixels,this._rotated,this._offsetInPixels,this._originalSizeInPixels),t.setTexture(this._texture),t},copy:function(){return this.copyWithZone()},initWithTexture:function(t,e,i,n,s){var r,o;(2===arguments.length&&(e=cc.rectPointsToPixels(e)),n=n||cc.p(0,0),s=s||e,i=i||!1,"string"==typeof t?(this._texture=null,this._textureFilename=t):t instanceof cc.Texture2D&&this.setTexture(t),t=this.getTexture(),this._rectInPixels=e,this._rect=cc.rectPixelsToPoints(e),t&&t.url&&t.isLoaded())&&(i?(r=e.x+e.height,o=e.y+e.width):(r=e.x+e.width,o=e.y+e.height),r>t.getPixelsWide()&&cc.error(cc._LogInfos.RectWidth,t.url),o>t.getPixelsHigh()&&cc.error(cc._LogInfos.RectHeight,t.url));return this._offsetInPixels.x=n.x,this._offsetInPixels.y=n.y,cc._pointPixelsToPointsOut(n,this._offset),this._originalSizeInPixels.width=s.width,this._originalSizeInPixels.height=s.height,cc._sizePixelsToPointsOut(s,this._originalSize),this._rotated=i,!0}}),cc.EventHelper.prototype.apply(cc.SpriteFrame.prototype),cc.SpriteFrame.create=function(t,e,i,n,s){return new cc.SpriteFrame(t,e,i,n,s)},cc.SpriteFrame.createWithTexture=cc.SpriteFrame.create,cc.SpriteFrame._frameWithTextureForCanvas=function(t,e,i,n,s){var r=new cc.SpriteFrame;return r._texture=t,r._rectInPixels=e,r._rect=cc.rectPixelsToPoints(e),r._offsetInPixels.x=n.x,r._offsetInPixels.y=n.y,cc._pointPixelsToPointsOut(r._offsetInPixels,r._offset),r._originalSizeInPixels.width=s.width,r._originalSizeInPixels.height=s.height,cc._sizePixelsToPointsOut(r._originalSizeInPixels,r._originalSize),r._rotated=i,r},cc.spriteFrameCache={_CCNS_REG1:/^\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*$/,_CCNS_REG2:/^\s*\{\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*,\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*\}\s*$/,_spriteFrames:{},_spriteFramesAliases:{},_frameConfigCache:{},_rectFromString:function(t){return(t=this._CCNS_REG2.exec(t))?cc.rect(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4])):cc.rect(0,0,0,0)},_pointFromString:function(t){return(t=this._CCNS_REG1.exec(t))?cc.p(parseFloat(t[1]),parseFloat(t[2])):cc.p(0,0)},_sizeFromString:function(t){return(t=this._CCNS_REG1.exec(t))?cc.size(parseFloat(t[1]),parseFloat(t[2])):cc.size(0,0)},_getFrameConfig:function(t){var e=cc.loader.getRes(t);return cc.assert(e,cc._LogInfos.spriteFrameCache__getFrameConfig_2,t),cc.loader.release(t),e._inited?this._frameConfigCache[t]=e:(this._frameConfigCache[t]=this._parseFrameConfig(e),this._frameConfigCache[t])},_getFrameConfigByJsonObject:function(t,e){return cc.assert(e,cc._LogInfos.spriteFrameCache__getFrameConfig_2,t),this._frameConfigCache[t]=this._parseFrameConfig(e),this._frameConfigCache[t]},_parseFrameConfig:function(t){var e=t.frames,i=t.metadata||t.meta;t={};var n={},s=0;for(var r in i&&(s=1>=(s=i.format).length?parseInt(s):s,n.image=i.textureFileName||i.textureFileName||i.image),e){if(a=e[r]){if(i={},0==s){i.rect=cc.rect(a.x,a.y,a.width,a.height),i.rotated=!1,i.offset=cc.p(a.offsetX,a.offsetY);var o=a.originalWidth,a=a.originalHeight;o&&a||cc.log(cc._LogInfos.spriteFrameCache__getFrameConfig),o=Math.abs(o),a=Math.abs(a),i.size=cc.size(o,a)}else if(1==s||2==s)i.rect=this._rectFromString(a.frame),i.rotated=a.rotated||!1,i.offset=this._pointFromString(a.offset),i.size=this._sizeFromString(a.sourceSize);else if(3==s){o=this._sizeFromString(a.spriteSize);var c=this._rectFromString(a.textureRect);o&&(c=cc.rect(c.x,c.y,o.width,o.height)),i.rect=c,i.rotated=a.textureRotated||!1,i.offset=this._pointFromString(a.spriteOffset),i.size=this._sizeFromString(a.spriteSourceSize),i.aliases=a.aliases}else o=a.frame,c=a.sourceSize,r=a.filename||r,i.rect=cc.rect(o.x,o.y,o.w,o.h),i.rotated=a.rotated||!1,i.offset=cc.p(0,0),i.size=cc.size(c.w,c.h);t[r]=i}}return{_inited:!0,frames:t,meta:n}},_addSpriteFramesByObject:function(t,e,i){cc.assert(t,cc._LogInfos.spriteFrameCache_addSpriteFrames_2),e&&e.frames&&(e=this._frameConfigCache[t]||this._getFrameConfigByJsonObject(t,e),this._createSpriteFrames(t,e,i))},_createSpriteFrames:function(t,e,i){var n=e.frames;for(var s in e=e.meta,i?i instanceof cc.Texture2D||(cc.isString(i)?i=cc.textureCache.addImage(i):cc.assert(0,cc._LogInfos.spriteFrameCache_addSpriteFrames_3)):(i=cc.path.changeBasename(t,e.image||".png"),i=cc.textureCache.addImage(i)),t=this._spriteFramesAliases,e=this._spriteFrames,n){var r=n[s],o=e[s];if(!o){if(o=new cc.SpriteFrame(i,cc.rect(r.rect),r.rotated,r.offset,r.size),r=r.aliases)for(var a=0,c=r.length;a<c;a++){var h=r[a];t[h]&&cc.log(cc._LogInfos.spriteFrameCache_addSpriteFrames,h),t[h]=s}cc._renderType===cc.game.RENDER_TYPE_CANVAS&&o.isRotated()&&o.getTexture().isLoaded()&&(r=o.getTexture().getHtmlElementObj(),r=cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas(r,o.getRectInPixels()),(a=new cc.Texture2D).initWithElement(r),a.handleLoadedTexture(),o.setTexture(a),o.setRotated(!1),r=o._rect,o.setRect(cc.rect(0,0,r.width,r.height))),e[s]=o}}},addSpriteFrames:function(t,e){cc.assert(t,cc._LogInfos.spriteFrameCache_addSpriteFrames_2);var i=this._frameConfigCache[t]||cc.loader.getRes(t);i&&i.frames&&(i=this._frameConfigCache[t]||this._getFrameConfig(t),this._createSpriteFrames(t,i,e))},_checkConflict:function(t){for(var e in t=t.frames)this._spriteFrames[e]&&cc.log(cc._LogInfos.spriteFrameCache__checkConflict,e)},addSpriteFrame:function(t,e){this._spriteFrames[e]=t},removeSpriteFrames:function(){this._spriteFrames={},this._spriteFramesAliases={}},removeSpriteFrameByName:function(t){t&&(this._spriteFramesAliases[t]&&delete this._spriteFramesAliases[t],this._spriteFrames[t]&&delete this._spriteFrames[t])},removeSpriteFramesFromFile:function(t){var e=this._spriteFrames,i=this._spriteFramesAliases;if(t=this._frameConfigCache[t])for(var n in t=t.frames)if(e[n])for(var s in delete e[n],i)i[s]===n&&delete i[s]},removeSpriteFramesFromTexture:function(t){var e,i=this._spriteFrames,n=this._spriteFramesAliases;for(e in i){var s=i[e];if(s&&s.getTexture()===t)for(var r in delete i[e],n)n[r]===e&&delete n[r]}},getSpriteFrame:function(t){var e=this._spriteFrames[t];if(!e){var i=this._spriteFramesAliases[t];i&&((e=this._spriteFrames[i.toString()])||delete this._spriteFramesAliases[t])}return e},_clear:function(){this._spriteFrames={},this._spriteFramesAliases={},this._frameConfigCache={}}},cc.configuration={ERROR:0,STRING:1,INT:2,DOUBLE:3,BOOLEAN:4,_maxTextureSize:0,_maxModelviewStackDepth:0,_supportsPVRTC:!1,_supportsNPOT:!1,_supportsBGRA8888:!1,_supportsDiscardFramebuffer:!1,_supportsShareableVAO:!1,_maxSamplesAllowed:0,_maxTextureUnits:0,_GlExtensions:"",_valueDict:{},_inited:!1,_init:function(){var t=this._valueDict;t["cocos2d.x.version"]=cc.ENGINE_VERSION,t["cocos2d.x.compiled_with_profiler"]=!1,t["cocos2d.x.compiled_with_gl_state_cache"]=cc.ENABLE_GL_STATE_CACHE,this._inited=!0},getMaxTextureSize:function(){return this._maxTextureSize},getMaxModelviewStackDepth:function(){return this._maxModelviewStackDepth},getMaxTextureUnits:function(){return this._maxTextureUnits},supportsNPOT:function(){return this._supportsNPOT},supportsPVRTC:function(){return this._supportsPVRTC},supportsETC:function(){return!1},supportsS3TC:function(){return!1},supportsATITC:function(){return!1},supportsBGRA8888:function(){return this._supportsBGRA8888},supportsDiscardFramebuffer:function(){return this._supportsDiscardFramebuffer},supportsShareableVAO:function(){return this._supportsShareableVAO},checkForGLExtension:function(t){return-1<this._GlExtensions.indexOf(t)},getValue:function(t,e){this._inited||this._init();var i=this._valueDict;return i[t]?i[t]:e},setValue:function(t,e){this._valueDict[t]=e},dumpInfo:function(){0===cc.ENABLE_GL_STATE_CACHE&&(cc.log(""),cc.log(cc._LogInfos.configuration_dumpInfo),cc.log(""))},gatherGPUInfo:function(){if(cc._renderType!==cc.game.RENDER_TYPE_CANVAS){this._inited||this._init();var t=cc._renderContext,e=this._valueDict;e["gl.vendor"]=t.getParameter(t.VENDOR),e["gl.renderer"]=t.getParameter(t.RENDERER),e["gl.version"]=t.getParameter(t.VERSION),this._GlExtensions="";for(var i=t.getSupportedExtensions(),n=0;n<i.length;n++)this._GlExtensions+=i[n]+" ";this._maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),e["gl.max_texture_size"]=this._maxTextureSize,this._maxTextureUnits=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),e["gl.max_texture_units"]=this._maxTextureUnits,this._supportsPVRTC=this.checkForGLExtension("GL_IMG_texture_compression_pvrtc"),e["gl.supports_PVRTC"]=this._supportsPVRTC,this._supportsNPOT=!1,e["gl.supports_NPOT"]=this._supportsNPOT,this._supportsBGRA8888=this.checkForGLExtension("GL_IMG_texture_format_BGRA888"),e["gl.supports_BGRA8888"]=this._supportsBGRA8888,this._supportsDiscardFramebuffer=this.checkForGLExtension("GL_EXT_discard_framebuffer"),e["gl.supports_discard_framebuffer"]=this._supportsDiscardFramebuffer,this._supportsShareableVAO=this.checkForGLExtension("vertex_array_object"),e["gl.supports_vertex_array_object"]=this._supportsShareableVAO,cc.checkGLErrorDebug()}},loadConfigFile:function(t){this._inited||this._init();var e=cc.loader.getRes(t);if(!e)throw Error("Please load the resource first : "+t);if(cc.assert(e,cc._LogInfos.configuration_loadConfigFile_2,t),e=e.data)for(var i in e)this._valueDict[i]=e[i];else cc.log(cc._LogInfos.configuration_loadConfigFile,t)}},cc.g_NumberOfDraws=0,cc.Director=cc.Class.extend({_landscape:!1,_nextDeltaTimeZero:!1,_paused:!1,_purgeDirectorInNextLoop:!1,_sendCleanupToScene:!1,_animationInterval:0,_oldAnimationInterval:0,_projection:0,_contentScaleFactor:1,_deltaTime:0,_winSizeInPoints:null,_lastUpdate:null,_nextScene:null,_notificationNode:null,_openGLView:null,_scenesStack:null,_projectionDelegate:null,_runningScene:null,_totalFrames:0,_secondsPerFrame:0,_dirtyRegion:null,_scheduler:null,_actionManager:null,_eventProjectionChanged:null,_eventAfterUpdate:null,_eventAfterVisit:null,_eventAfterDraw:null,ctor:function(){var t=this;t._lastUpdate=Date.now(),cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,(function(){t._lastUpdate=Date.now()}))},init:function(){return this._oldAnimationInterval=this._animationInterval=1/cc.defaultFPS,this._scenesStack=[],this._projection=cc.Director.PROJECTION_DEFAULT,this._projectionDelegate=null,this._totalFrames=0,this._lastUpdate=Date.now(),this._purgeDirectorInNextLoop=this._paused=!1,this._winSizeInPoints=cc.size(0,0),this._openGLView=null,this._contentScaleFactor=1,this._scheduler=new cc.Scheduler,cc.ActionManager?(this._actionManager=new cc.ActionManager,this._scheduler.scheduleUpdate(this._actionManager,cc.Scheduler.PRIORITY_SYSTEM,!1)):this._actionManager=null,this._eventAfterUpdate=new cc.EventCustom(cc.Director.EVENT_AFTER_UPDATE),this._eventAfterUpdate.setUserData(this),this._eventAfterVisit=new cc.EventCustom(cc.Director.EVENT_AFTER_VISIT),this._eventAfterVisit.setUserData(this),this._eventAfterDraw=new cc.EventCustom(cc.Director.EVENT_AFTER_DRAW),this._eventAfterDraw.setUserData(this),this._eventProjectionChanged=new cc.EventCustom(cc.Director.EVENT_PROJECTION_CHANGED),this._eventProjectionChanged.setUserData(this),!0},calculateDeltaTime:function(){var t=Date.now();this._nextDeltaTimeZero?(this._deltaTime=0,this._nextDeltaTimeZero=!1):this._deltaTime=(t-this._lastUpdate)/1e3,0<cc.game.config[cc.game.CONFIG_KEY.debugMode]&&.2<this._deltaTime&&(this._deltaTime=1/60),this._lastUpdate=t},convertToGL:function(t){var e=document.documentElement,i=cc.view,n=e.getBoundingClientRect();return n.left+=window.pageXOffset-e.clientLeft,n.top+=window.pageYOffset-e.clientTop,e=i._devicePixelRatio*(t.x-n.left),t=i._devicePixelRatio*(n.top+n.height-t.y),i._isRotated?{x:i._viewPortRect.width-t,y:e}:{x:e,y:t}},convertToUI:function(t){var e=document.documentElement,i=cc.view,n=e.getBoundingClientRect();return n.left+=window.pageXOffset-e.clientLeft,n.top+=window.pageYOffset-e.clientTop,e={x:0,y:0},i._isRotated?(e.x=n.left+t.y/i._devicePixelRatio,e.y=n.top+n.height-(i._viewPortRect.width-t.x)/i._devicePixelRatio):(e.x=n.left+t.x/i._devicePixelRatio,e.y=n.top+n.height-t.y/i._devicePixelRatio),e},drawScene:function(){var t=cc.renderer;this.calculateDeltaTime(),this._paused||(this._scheduler.update(this._deltaTime),cc.eventManager.dispatchEvent(this._eventAfterUpdate)),this._nextScene&&this.setNextScene(),this._runningScene&&(t.childrenOrderDirty?(cc.renderer.clearRenderCommands(),cc.renderer.assignedZ=0,this._runningScene._renderCmd._curLevel=0,this._runningScene.visit(),t.resetFlag()):t.transformDirty()&&t.transform()),t.clear(),this._notificationNode&&this._notificationNode.visit(),cc.eventManager.dispatchEvent(this._eventAfterVisit),cc.g_NumberOfDraws=0,t.rendering(cc._renderContext),this._totalFrames++,cc.eventManager.dispatchEvent(this._eventAfterDraw),cc.eventManager.frameUpdateListeners(),this._calculateMPF()},end:function(){this._purgeDirectorInNextLoop=!0},getContentScaleFactor:function(){return this._contentScaleFactor},getNotificationNode:function(){return this._notificationNode},getWinSize:function(){return cc.size(this._winSizeInPoints)},getWinSizeInPixels:function(){return cc.size(this._winSizeInPoints.width*this._contentScaleFactor,this._winSizeInPoints.height*this._contentScaleFactor)},getVisibleSize:null,getVisibleOrigin:null,getZEye:null,pause:function(){this._paused||(this._oldAnimationInterval=this._animationInterval,this.setAnimationInterval(.25),this._paused=!0)},popScene:function(){cc.assert(this._runningScene,cc._LogInfos.Director_popScene),this._scenesStack.pop();var t=this._scenesStack.length;0===t?this.end():(this._sendCleanupToScene=!0,this._nextScene=this._scenesStack[t-1])},purgeCachedData:function(){cc.animationCache._clear(),cc.spriteFrameCache._clear(),cc.textureCache._clear()},purgeDirector:function(){this.getScheduler().unscheduleAll(),cc.eventManager&&cc.eventManager.setEnabled(!1),this._runningScene&&(this._runningScene._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart),this._runningScene._performRecursive(cc.Node._stateCallbackType.onExit),this._runningScene._performRecursive(cc.Node._stateCallbackType.cleanup)),this._nextScene=this._runningScene=null,this._scenesStack.length=0,this.stopAnimation(),this.purgeCachedData(),cc.checkGLErrorDebug()},pushScene:function(t){cc.assert(t,cc._LogInfos.Director_pushScene),this._sendCleanupToScene=!1,this._scenesStack.push(t),this._nextScene=t},runScene:function(t){if(cc.assert(t,cc._LogInfos.Director_pushScene),this._runningScene){var e=this._scenesStack.length;0===e?(this._sendCleanupToScene=!0,this._scenesStack[e]=t):(this._sendCleanupToScene=!0,this._scenesStack[e-1]=t),this._nextScene=t}else this.pushScene(t),this.startAnimation()},resume:function(){this._paused&&(this.setAnimationInterval(this._oldAnimationInterval),(this._lastUpdate=Date.now())||cc.log(cc._LogInfos.Director_resume),this._paused=!1,this._deltaTime=0)},setContentScaleFactor:function(t){t!==this._contentScaleFactor&&(this._contentScaleFactor=t)},setDepthTest:null,setClearColor:null,setDefaultValues:function(){},setNextDeltaTimeZero:function(t){this._nextDeltaTimeZero=t},setNextScene:function(){var t=!1,e=!1;cc.TransitionScene&&(t=!!this._runningScene&&this._runningScene instanceof cc.TransitionScene,e=!!this._nextScene&&this._nextScene instanceof cc.TransitionScene),e||((e=this._runningScene)&&(e._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart),e._performRecursive(cc.Node._stateCallbackType.onExit)),this._sendCleanupToScene&&e&&e._performRecursive(cc.Node._stateCallbackType.cleanup)),this._runningScene=this._nextScene,cc.renderer.childrenOrderDirty=!0,this._nextScene=null,t||null===this._runningScene||(this._runningScene._performRecursive(cc.Node._stateCallbackType.onEnter),this._runningScene._performRecursive(cc.Node._stateCallbackType.onEnterTransitionDidFinish))},setNotificationNode:function(t){cc.renderer.childrenOrderDirty=!0,this._notificationNode&&(this._notificationNode._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart),this._notificationNode._performRecursive(cc.Node._stateCallbackType.onExit),this._notificationNode._performRecursive(cc.Node._stateCallbackType.cleanup)),(this._notificationNode=t)&&(this._notificationNode._performRecursive(cc.Node._stateCallbackType.onEnter),this._notificationNode._performRecursive(cc.Node._stateCallbackType.onEnterTransitionDidFinish))},getDelegate:function(){return this._projectionDelegate},setDelegate:function(t){this._projectionDelegate=t},setOpenGLView:null,setProjection:null,setViewport:null,getOpenGLView:null,getProjection:null,setAlphaBlending:null,isSendCleanupToScene:function(){return this._sendCleanupToScene},getRunningScene:function(){return this._runningScene},getAnimationInterval:function(){return this._animationInterval},isDisplayStats:function(){return!!cc.profiler&&cc.profiler.isShowingStats()},setDisplayStats:function(t){cc.profiler&&(t?cc.profiler.showStats():cc.profiler.hideStats())},getSecondsPerFrame:function(){return this._secondsPerFrame},isNextDeltaTimeZero:function(){return this._nextDeltaTimeZero},isPaused:function(){return this._paused},getTotalFrames:function(){return this._totalFrames},popToRootScene:function(){this.popToSceneStackLevel(1)},popToSceneStackLevel:function(t){cc.assert(this._runningScene,cc._LogInfos.Director_popToSceneStackLevel_2);var e=this._scenesStack,i=e.length;if(0===t)this.end();else if(!(t>=i)){for(;i>t;){var n=e.pop();n.running&&(n._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart),n._performRecursive(cc.Node._stateCallbackType.onExit)),n._performRecursive(cc.Node._stateCallbackType.cleanup),i--}this._nextScene=e[e.length-1],this._sendCleanupToScene=!0}},getScheduler:function(){return this._scheduler},setScheduler:function(t){this._scheduler!==t&&(this._scheduler=t)},getActionManager:function(){return this._actionManager},setActionManager:function(t){this._actionManager!==t&&(this._actionManager=t)},getDeltaTime:function(){return this._deltaTime},_calculateMPF:function(){this._secondsPerFrame=(Date.now()-this._lastUpdate)/1e3}}),cc.Director.EVENT_PROJECTION_CHANGED="director_projection_changed",cc.Director.EVENT_AFTER_UPDATE="director_after_update",cc.Director.EVENT_AFTER_VISIT="director_after_visit",cc.Director.EVENT_AFTER_DRAW="director_after_draw",cc.DisplayLinkDirector=cc.Director.extend({invalid:!1,startAnimation:function(){this._nextDeltaTimeZero=!0,this.invalid=!1},mainLoop:function(){this._purgeDirectorInNextLoop?(this._purgeDirectorInNextLoop=!1,this.purgeDirector()):this.invalid||this.drawScene()},stopAnimation:function(){this.invalid=!0},setAnimationInterval:function(t){this._animationInterval=t,this.invalid||(this.stopAnimation(),this.startAnimation())}}),cc.Director.sharedDirector=null,cc.Director.firstUseDirector=!0,cc.Director._getInstance=function(){return cc.Director.firstUseDirector&&(cc.Director.firstUseDirector=!1,cc.Director.sharedDirector=new cc.DisplayLinkDirector,cc.Director.sharedDirector.init()),cc.Director.sharedDirector},cc.defaultFPS=60,cc.Director.PROJECTION_2D=0,cc.Director.PROJECTION_3D=1,cc.Director.PROJECTION_CUSTOM=3,cc.Director.PROJECTION_DEFAULT=cc.Director.PROJECTION_3D,cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,(function(){if(cc._renderType===cc.game.RENDER_TYPE_CANVAS){var t=cc.Director.prototype;t.getProjection=function(t){return this._projection},t.setProjection=function(t){this._projection=t,cc.eventManager.dispatchEvent(this._eventProjectionChanged)},t.setDepthTest=function(){},t.setClearColor=function(t){cc.renderer._clearColor=t,cc.renderer._clearFillStyle="rgb("+t.r+","+t.g+","+t.b+")"},t.setOpenGLView=function(t){this._winSizeInPoints.width=cc._canvas.width,this._winSizeInPoints.height=cc._canvas.height,this._openGLView=t||cc.view,cc.eventManager&&cc.eventManager.setEnabled(!0)},t.getVisibleSize=function(){return this.getWinSize()},t.getVisibleOrigin=function(){return cc.p(0,0)}}else cc.Director._fpsImage=new Image,cc.Director._fpsImage.addEventListener("load",(function(){cc.Director._fpsImageLoaded=!0})),cc._fpsImage&&(cc.Director._fpsImage.src=cc._fpsImage)})),cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,(function(){if(cc._renderType===cc.game.RENDER_TYPE_WEBGL){cc.DirectorDelegate=cc.Class.extend({updateProjection:function(){}});var t=cc.Director.prototype,e=function(t){if(t&&t._renderCmd){t._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);var i=t._children;for(t=0;t<i.length;t++)e(i[t])}};cc.eventManager.addCustomListener(cc.Director.EVENT_PROJECTION_CHANGED,(function(){for(var t=cc.director._scenesStack,i=0;i<t.length;i++)e(t[i])})),t.setProjection=function(t){var e=this._winSizeInPoints;this.setViewport();var i=(o=this._openGLView)._viewPortRect.x/o._scaleX,n=o._viewPortRect.y/o._scaleY;switch(t){case cc.Director.PROJECTION_2D:cc.kmGLMatrixMode(cc.KM_GL_PROJECTION),cc.kmGLLoadIdentity(),o=cc.math.Matrix4.createOrthographicProjection(0,e.width,0,e.height,-1024,1024),cc.kmGLMultMatrix(o),cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW),cc.kmGLLoadIdentity();break;case cc.Director.PROJECTION_3D:var s=this.getZEye(),r=new cc.math.Matrix4,o=new cc.math.Matrix4;cc.kmGLMatrixMode(cc.KM_GL_PROJECTION),cc.kmGLLoadIdentity(),r=cc.math.Matrix4.createPerspectiveProjection(60,e.width/e.height,.1,2*s),cc.kmGLMultMatrix(r),s=new cc.math.Vec3(-i+e.width/2,-n+e.height/2,s),e=new cc.math.Vec3(-i+e.width/2,-n+e.height/2,0),i=new cc.math.Vec3(0,1,0),o.lookAt(s,e,i),cc.kmGLMultMatrix(o),cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW),cc.kmGLLoadIdentity();break;case cc.Director.PROJECTION_CUSTOM:this._projectionDelegate&&this._projectionDelegate.updateProjection();break;default:cc.log(cc._LogInfos.Director_setProjection)}this._projection=t,cc.eventManager.dispatchEvent(this._eventProjectionChanged),cc.setProjectionMatrixDirty(),cc.renderer.childrenOrderDirty=!0},t.setDepthTest=function(t){cc.renderer.setDepthTest(t)},t.setClearColor=function(t){cc.renderer._clearColor=t},t.setOpenGLView=function(t){this._winSizeInPoints.width=cc._canvas.width,this._winSizeInPoints.height=cc._canvas.height,this._openGLView=t||cc.view,(t=cc.configuration).gatherGPUInfo(),t.dumpInfo(),this.setGLDefaultValues(),cc.eventManager&&cc.eventManager.setEnabled(!0)},t.getVisibleSize=function(){return this._openGLView.getVisibleSize()},t.getVisibleOrigin=function(){return this._openGLView.getVisibleOrigin()},t.getZEye=function(){return this._winSizeInPoints.height/1.1546999375},t.setViewport=function(){var t=this._openGLView;if(t){var e=this._winSizeInPoints;t.setViewPortInPoints(-t._viewPortRect.x/t._scaleX,-t._viewPortRect.y/t._scaleY,e.width,e.height)}},t.getOpenGLView=function(){return this._openGLView},t.getProjection=function(){return this._projection},t.setAlphaBlending=function(t){t?cc.glBlendFunc(cc.BLEND_SRC,cc.BLEND_DST):cc.glBlendFunc(cc._renderContext.ONE,cc._renderContext.ZERO)},t.setGLDefaultValues=function(){this.setAlphaBlending(!0),this.setProjection(this._projection),cc._renderContext.clearColor(0,0,0,0)}}})),function(){var t=function(t,e,i,n,s,r,o){this.prev=t,this.next=e,this.callback=i,this.target=n,this.priority=s,this.paused=r,this.markedForDeletion=o},e=[];t.get=function(i,n,s,r,o,a,c){var h=e.pop();return h?(h.prev=i,h.next=n,h.callback=s,h.target=r,h.priority=o,h.paused=a,h.markedForDeletion=c):h=new t(i,n,s,r,o,a,c),h},t.put=function(t){t.prev=null,t.next=null,t.callback=null,t.target=null,t.priority=0,t.paused=!1,t.markedForDeletion=!1,20>e.length&&e.push(t)};var i=function(t,e,i,n){this.list=t,this.entry=e,this.target=i,this.callback=n},n=[];i.get=function(t,e,s,r){var o=n.pop();return o?(o.list=t,o.entry=e,o.target=s,o.callback=r):o=new i(t,e,s,r),o},i.put=function(t){t.list=null,t.entry=null,t.target=null,t.callback=null,20>n.length&&n.push(t)};var s=function(t,e,i,n,s,r){this.timers=t,this.target=e,this.timerIndex=i,this.currentTimer=n,this.currentTimerSalvaged=s,this.paused=r},r=[];s.get=function(t,e,i,n,o,a){var c=r.pop();return c?(c.timers=t,c.target=e,c.timerIndex=i,c.currentTimer=n,c.currentTimerSalvaged=o,c.paused=a):c=new s(t,e,i,n,o,a),c},s.put=function(t){t.timers=null,t.target=null,t.timerIndex=0,t.currentTimer=null,t.currentTimerSalvaged=!1,t.paused=!1,20>r.length&&r.push(t)};var o=function(){this._scheduler=null,this._elapsed=-1,this._useDelay=this._runForever=!1,this._interval=this._delay=this._repeat=this._timesExecuted=0,this._key=this._callback=this._target=null};cc.inject({initWithCallback:function(t,e,i,n,s,r,o){return this._scheduler=t,this._target=i,this._callback=e,o&&(this._key=o),this._elapsed=-1,this._interval=n,this._delay=r,this._useDelay=0<this._delay,this._repeat=s,this._runForever=this._repeat===cc.REPEAT_FOREVER,!0},getInterval:function(){return this._interval},setInterval:function(t){this._interval=t},update:function(t){-1===this._elapsed?this._timesExecuted=this._elapsed=0:(this._elapsed+=t,this._runForever&&!this._useDelay?this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0):(this._useDelay?this._elapsed>=this._delay&&(this.trigger(),this._elapsed-=this._delay,this._timesExecuted+=1,this._useDelay=!1):this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0,this._timesExecuted+=1),this._callback&&!this._runForever&&this._timesExecuted>this._repeat&&this.cancel()))},getCallback:function(){return this._callback},getKey:function(){return this._key},trigger:function(){this._target&&this._callback&&this._callback.call(this._target,this._elapsed)},cancel:function(){this._scheduler.unschedule(this._callback,this._target)}},o.prototype);var a=[];o.get=function(){return a.pop()||new o},o.put=function(t){t._scheduler=null,t._elapsed=-1,t._runForever=!1,t._useDelay=!1,t._timesExecuted=0,t._repeat=0,t._delay=0,t._interval=0,t._target=null,t._callback=null,t._key=null,20>a.length&&a.push(t)},cc.Scheduler=cc.Class.extend({_timeScale:1,_updatesNegList:null,_updates0List:null,_updatesPosList:null,_hashForTimers:null,_arrayForTimers:null,_hashForUpdates:null,_currentTarget:null,_currentTargetSalvaged:!1,_updateHashLocked:!1,ctor:function(){this._timeScale=1,this._updatesNegList=[],this._updates0List=[],this._updatesPosList=[],this._hashForUpdates={},this._hashForTimers={},this._currentTarget=null,this._updateHashLocked=this._currentTargetSalvaged=!1,this._arrayForTimers=[]},_schedulePerFrame:function(t,e,i,n){var s=this._hashForUpdates[e.__instanceId];if(s&&s.entry){if(s.entry.priority===i)return s.entry.markedForDeletion=!1,void(s.entry.paused=n);if(this._updateHashLocked)return cc.log("warning: you CANNOT change update priority in scheduled function"),s.entry.markedForDeletion=!1,void(s.entry.paused=n);this.unscheduleUpdate(e)}0===i?this._appendIn(this._updates0List,t,e,n):0>i?this._priorityIn(this._updatesNegList,t,e,i,n):this._priorityIn(this._updatesPosList,t,e,i,n)},_removeHashElement:function(t){delete this._hashForTimers[t.target.__instanceId];for(var e=this._arrayForTimers,i=0,n=e.length;i<n;i++)if(e[i]===t){e.splice(i,1);break}s.put(t)},_removeUpdateFromHash:function(e){if(e=this._hashForUpdates[e.target.__instanceId]){for(var n=e.list,s=e.entry,r=0,o=n.length;r<o;r++)if(n[r]===s){n.splice(r,1);break}delete this._hashForUpdates[e.target.__instanceId],t.put(s),i.put(e)}},_priorityIn:function(e,n,s,r,o){if(n=t.get(null,null,n,s,r,o,!1),e){o=e.length-1;for(var a=0;a<=o&&!(r<e[a].priority);a++);e.splice(a,0,n)}else(e=[]).push(n);return this._hashForUpdates[s.__instanceId]=i.get(e,n,s,null),e},_appendIn:function(e,n,s,r){n=t.get(null,null,n,s,0,r,!1),e.push(n),this._hashForUpdates[s.__instanceId]=i.get(e,n,s,null,null)},setTimeScale:function(t){this._timeScale=t},getTimeScale:function(){return this._timeScale},update:function(t){var e,i,n,s;for(this._updateHashLocked=!0,1!==this._timeScale&&(t*=this._timeScale),e=0,n=(i=this._updatesNegList).length;e<n;e++)(s=i[e]).paused||s.markedForDeletion||s.callback(t);for(e=0,n=(i=this._updates0List).length;e<n;e++)(s=i[e]).paused||s.markedForDeletion||s.callback(t);for(e=0,n=(i=this._updatesPosList).length;e<n;e++)(s=i[e]).paused||s.markedForDeletion||s.callback(t);for(n=this._arrayForTimers,e=0;e<n.length;e++){if(this._currentTarget=i=n[e],this._currentTargetSalvaged=!1,!i.paused)for(i.timerIndex=0;i.timerIndex<i.timers.length;++i.timerIndex)i.currentTimer=i.timers[i.timerIndex],i.currentTimerSalvaged=!1,i.currentTimer.update(t),i.currentTimer=null;this._currentTargetSalvaged&&0===this._currentTarget.timers.length&&this._removeHashElement(this._currentTarget)}for(e=0,i=this._updatesNegList;e<i.length;)(s=i[e]).markedForDeletion?this._removeUpdateFromHash(s):e++;for(e=0,i=this._updates0List;e<i.length;)(s=i[e]).markedForDeletion?this._removeUpdateFromHash(s):e++;for(e=0,i=this._updatesPosList;e<i.length;)(s=i[e]).markedForDeletion?this._removeUpdateFromHash(s):e++;this._updateHashLocked=!1,this._currentTarget=null},scheduleCallbackForTarget:function(t,e,i,n,s,r){this.schedule(e,t,i,n,s,r,t.__instanceId+"")},schedule:function(t,e,i,n,r,a,c){if("function"!=typeof t){var h=t;t=e,e=h}var l,u;if(4!==arguments.length&&5!==arguments.length||(c=r,a=n,n=cc.REPEAT_FOREVER,r=0),void 0===c&&(c=e.__instanceId+""),cc.assert(e,cc._LogInfos.Scheduler_scheduleCallbackForTarget_3),(h=this._hashForTimers[e.__instanceId])?cc.assert(h.paused===a,""):(h=s.get(null,e,0,null,null,a),this._arrayForTimers.push(h),this._hashForTimers[e.__instanceId]=h),null==h.timers)h.timers=[];else for(u=0;u<h.timers.length;u++)if(t===(l=h.timers[u])._callback)return cc.log(cc._LogInfos.Scheduler_scheduleCallbackForTarget,l.getInterval().toFixed(4),i.toFixed(4)),void(l._interval=i);(l=o.get()).initWithCallback(this,t,e,i,n,r,c),h.timers.push(l)},scheduleUpdate:function(t,e,i){this._schedulePerFrame((function(e){t.update(e)}),t,e,i)},_getUnscheduleMark:function(t,e){switch(typeof t){case"number":case"string":return t===e._key;case"function":return t===e._callback}},unschedule:function(t,e){if(e&&t){var i=this._hashForTimers[e.__instanceId];if(i)for(var n=i.timers,s=0,r=n.length;s<r;s++){var a=n[s];if(this._getUnscheduleMark(t,a)){a!==i.currentTimer||i.currentTimerSalvaged||(i.currentTimerSalvaged=!0),n.splice(s,1),o.put(a),i.timerIndex>=s&&i.timerIndex--,0===n.length&&(this._currentTarget===i?this._currentTargetSalvaged=!0:this._removeHashElement(i));break}}}},unscheduleUpdate:function(t){t&&(t=this._hashForUpdates[t.__instanceId])&&(this._updateHashLocked?t.entry.markedForDeletion=!0:this._removeUpdateFromHash(t.entry))},unscheduleAllForTarget:function(t){if(t){var e=this._hashForTimers[t.__instanceId];if(e){var i=e.timers;-1<i.indexOf(e.currentTimer)&&!e.currentTimerSalvaged&&(e.currentTimerSalvaged=!0);for(var n=0,s=i.length;n<s;n++)o.put(i[n]);i.length=0,this._currentTarget===e?this._currentTargetSalvaged=!0:this._removeHashElement(e)}this.unscheduleUpdate(t)}},unscheduleAll:function(){this.unscheduleAllWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)},unscheduleAllWithMinPriority:function(t){var e,i,n=this._arrayForTimers;for(e=n.length-1;0<=e;e--)i=n[e],this.unscheduleAllForTarget(i.target);if(n=0,0>t)for(e=0;e<this._updatesNegList.length;)n=this._updatesNegList.length,(i=this._updatesNegList[e])&&i.priority>=t&&this.unscheduleUpdate(i.target),n==this._updatesNegList.length&&e++;if(0>=t)for(e=0;e<this._updates0List.length;)n=this._updates0List.length,(i=this._updates0List[e])&&this.unscheduleUpdate(i.target),n==this._updates0List.length&&e++;for(e=0;e<this._updatesPosList.length;)n=this._updatesPosList.length,(i=this._updatesPosList[e])&&i.priority>=t&&this.unscheduleUpdate(i.target),n==this._updatesPosList.length&&e++},isScheduled:function(t,e){if(cc.assert(t,"Argument callback must not be empty"),cc.assert(e,"Argument target must be non-nullptr"),!(i=this._hashForTimers[e.__instanceId]))return!1;if(null!=i.timers)for(var i=i.timers,n=0;n<i.length;++n)if(t===i[n]._callback)return!0;return!1},pauseAllTargets:function(){return this.pauseAllTargetsWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)},pauseAllTargetsWithMinPriority:function(t){var e,i,n,s=[],r=this._arrayForTimers;for(i=0,n=r.length;i<n;i++)(e=r[i])&&(e.paused=!0,s.push(e.target));if(0>t)for(i=0;i<this._updatesNegList.length;i++)(e=this._updatesNegList[i])&&e.priority>=t&&(e.paused=!0,s.push(e.target));if(0>=t)for(i=0;i<this._updates0List.length;i++)(e=this._updates0List[i])&&(e.paused=!0,s.push(e.target));for(i=0;i<this._updatesPosList.length;i++)(e=this._updatesPosList[i])&&e.priority>=t&&(e.paused=!0,s.push(e.target));return s},resumeTargets:function(t){if(t)for(var e=0;e<t.length;e++)this.resumeTarget(t[e])},pauseTarget:function(t){cc.assert(t,cc._LogInfos.Scheduler_pauseTarget);var e=this._hashForTimers[t.__instanceId];e&&(e.paused=!0),(t=this._hashForUpdates[t.__instanceId])&&(t.entry.paused=!0)},resumeTarget:function(t){cc.assert(t,cc._LogInfos.Scheduler_resumeTarget);var e=this._hashForTimers[t.__instanceId];e&&(e.paused=!1),(t=this._hashForUpdates[t.__instanceId])&&(t.entry.paused=!1)},isTargetPaused:function(t){cc.assert(t,cc._LogInfos.Scheduler_isTargetPaused);var e=this._hashForTimers[t.__instanceId];return e?e.paused:!!(t=this._hashForUpdates[t.__instanceId])&&t.entry.paused},scheduleUpdateForTarget:function(t,e,i){this.scheduleUpdate(t,e,i)},unscheduleCallbackForTarget:function(t,e){this.unschedule(e,t)},unscheduleUpdateForTarget:function(t){this.unscheduleUpdate(t)},unscheduleAllCallbacksForTarget:function(t){this.unschedule(t.__instanceId+"",t)},unscheduleAllCallbacks:function(){this.unscheduleAllWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)},unscheduleAllCallbacksWithMinPriority:function(t){this.unscheduleAllWithMinPriority(t)}}),cc.Scheduler.PRIORITY_SYSTEM=-2147483648,cc.Scheduler.PRIORITY_NON_SYSTEM=cc.Scheduler.PRIORITY_SYSTEM+1}(),cc.PI2=2*Math.PI,cc.DrawingPrimitiveCanvas=cc.Class.extend({_cacheArray:[],_renderContext:null,ctor:function(t){this._renderContext=t},drawPoint:function(t,e){e||(e=1);var i=cc.view.getScaleX(),n=cc.view.getScaleY(),s=(n=cc.p(t.x*i,t.y*n),this._renderContext.getContext());s.beginPath(),s.arc(n.x,-n.y,e*i,0,2*Math.PI,!1),s.closePath(),s.fill()},drawPoints:function(t,e,i){if(null!=t){i||(i=1),e=this._renderContext.getContext();var n=cc.view.getScaleX(),s=cc.view.getScaleY();e.beginPath();for(var r=0,o=t.length;r<o;r++)e.arc(t[r].x*n,-t[r].y*s,i*n,0,2*Math.PI,!1);e.closePath(),e.fill()}},drawLine:function(t,e){var i=this._renderContext.getContext();cc.view.getScaleX(),cc.view.getScaleY(),i.beginPath(),i.moveTo(t.x,-t.y),i.lineTo(e.x,-e.y),i.closePath(),i.stroke()},drawRect:function(t,e){this.drawLine(cc.p(t.x,t.y),cc.p(e.x,t.y)),this.drawLine(cc.p(e.x,t.y),cc.p(e.x,e.y)),this.drawLine(cc.p(e.x,e.y),cc.p(t.x,e.y)),this.drawLine(cc.p(t.x,e.y),cc.p(t.x,t.y))},drawSolidRect:function(t,e,i){t=[t,cc.p(e.x,t.y),e,cc.p(t.x,e.y)],this.drawSolidPoly(t,4,i)},drawPoly:function(t,e,i,n){if(n=n||!1,null!=t){if(3>t.length)throw Error("Polygon's point must greater than 2");var s=t[0];e=this._renderContext.getContext(),cc.view.getScaleX(),cc.view.getScaleY(),e.beginPath(),e.moveTo(s.x,-s.y);s=1;for(var r=t.length;s<r;s++)e.lineTo(t[s].x,-t[s].y);i&&e.closePath(),n?e.fill():e.stroke()}},drawSolidPoly:function(t,e,i){this.setDrawColor(i.r,i.g,i.b,i.a),this.drawPoly(t,e,!0,!0)},drawCircle:function(t,e,i,n,s){s=s||!1,n=this._renderContext.getContext(),cc.view.getScaleX(),cc.view.getScaleY(),n.beginPath(),n.arc(0|t.x,0|-t.y,e,-i,-(i-2*Math.PI),!1),s&&n.lineTo(0|t.x,0|-t.y),n.stroke()},drawQuadBezier:function(t,e,i,n){for(var s=this._cacheArray,r=s.length=0,o=0;o<n;o++){var a=Math.pow(1-r,2)*t.x+2*(1-r)*r*e.x+r*r*i.x,c=Math.pow(1-r,2)*t.y+2*(1-r)*r*e.y+r*r*i.y;s.push(cc.p(a,c)),r+=1/n}s.push(cc.p(i.x,i.y)),this.drawPoly(s,n+1,!1,!1)},drawCubicBezier:function(t,e,i,n,s){for(var r=this._cacheArray,o=r.length=0,a=0;a<s;a++){var c=Math.pow(1-o,3)*t.x+3*Math.pow(1-o,2)*o*e.x+3*(1-o)*o*o*i.x+o*o*o*n.x,h=Math.pow(1-o,3)*t.y+3*Math.pow(1-o,2)*o*e.y+3*(1-o)*o*o*i.y+o*o*o*n.y;r.push(cc.p(c,h)),o+=1/s}r.push(cc.p(n.x,n.y)),this.drawPoly(r,s+1,!1,!1)},drawCatmullRom:function(t,e){this.drawCardinalSpline(t,.5,e)},drawCardinalSpline:function(t,e,i){cc._renderContext.setStrokeStyle("rgba(255,255,255,1)");var n=this._cacheArray;n.length=0;for(var s,r,o=1/t.length,a=0;a<i+1;a++)1===(r=a/i)?(s=t.length-1,r=1):r=(r-o*(s=0|r/o))/o,s=cc.CardinalSplineAt(cc.getControlPointAt(t,s-1),cc.getControlPointAt(t,s-0),cc.getControlPointAt(t,s+1),cc.getControlPointAt(t,s+2),e,r),n.push(s);this.drawPoly(n,i+1,!1,!1)},drawImage:function(t,e,i,n,s){var r=arguments.length,o=this._renderContext.getContext();switch(r){case 2:o.drawImage(t,e.x,-(e.y+t.height));break;case 3:o.drawImage(t,e.x,-(e.y+i.height),i.width,i.height);break;case 5:o.drawImage(t,e.x,e.y,i.width,i.height,n.x,-(n.y+s.height),s.width,s.height);break;default:throw Error("Argument must be non-nil")}},drawStar:function(t,e,i){var n=(t=t||this._renderContext).getContext();i="rgba("+(0|i.r)+","+(0|i.g)+","+(0|i.b),t.setFillStyle(i+",1)");var s=e/10;n.beginPath(),n.moveTo(-e,e),n.lineTo(0,s),n.lineTo(e,e),n.lineTo(s,0),n.lineTo(e,-e),n.lineTo(0,-s),n.lineTo(-e,-e),n.lineTo(-s,0),n.lineTo(-e,e),n.closePath(),n.fill();var r=n.createRadialGradient(0,0,s,0,0,e);r.addColorStop(0,i+", 1)"),r.addColorStop(.3,i+", 0.8)"),r.addColorStop(1,i+", 0.0)"),t.setFillStyle(r),n.beginPath(),n.arc(0,0,e-s,0,cc.PI2,!1),n.closePath(),n.fill()},drawColorBall:function(t,e,i){var n=(t=t||this._renderContext).getContext();e*=cc.view.getScaleX(),i="rgba("+(0|i.r)+","+(0|i.g)+","+(0|i.b);var s=n.createRadialGradient(0,0,e/10,0,0,e);s.addColorStop(0,i+", 1)"),s.addColorStop(.3,i+", 0.8)"),s.addColorStop(.6,i+", 0.4)"),s.addColorStop(1,i+", 0.0)"),t.setFillStyle(s),n.beginPath(),n.arc(0,0,e,0,cc.PI2,!1),n.closePath(),n.fill()},fillText:function(t,e,i){this._renderContext.getContext().fillText(t,e,-i)},setDrawColor:function(t,e,i,n){this._renderContext.setFillStyle("rgba("+t+","+e+","+i+","+n/255+")"),this._renderContext.setStrokeStyle("rgba("+t+","+e+","+i+","+n/255+")")},setPointSize:function(t){},setLineWidth:function(t){this._renderContext.getContext().lineWidth=t*cc.view.getScaleX()}}),cc.DrawingPrimitiveWebGL=cc.Class.extend({_renderContext:null,_initialized:!1,_shader:null,_colorLocation:"u_color",_colorArray:null,_pointSizeLocation:"u_pointSize",_pointSize:-1,ctor:function(t){if(null==t&&(t=cc._renderContext),!t instanceof WebGLRenderingContext)throw Error("Can't initialise DrawingPrimitiveWebGL. context need is WebGLRenderingContext");this._renderContext=t,this._colorArray=new Float32Array([1,1,1,1])},lazy_init:function(){this._initialized||(this._shader=cc.shaderCache.programForKey(cc.SHADER_POSITION_UCOLOR),this._shader._addUniformLocation(this._colorLocation),this._shader._addUniformLocation(this._pointSizeLocation),this._glProgramState=cc.GLProgramState.getOrCreateWithGLProgram(this._shader),this._initialized=!0)},drawInit:function(){this._initialized=!1},drawPoint:function(t){this.lazy_init();var e=this._renderContext;this._glProgramState.apply(),this._shader.setUniformForModelViewAndProjectionMatrixWithMat4(),e.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),this._shader.setUniformLocationWith4fv(this._colorLocation,this._colorArray),this._shader.setUniformLocationWith1f(this._pointSizeLocation,this._pointSize);var i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array([t.x,t.y]),e.STATIC_DRAW),e.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,2,e.FLOAT,!1,0,0),e.drawArrays(e.POINTS,0,1),e.deleteBuffer(i),cc.incrementGLDraws(1)},drawPoints:function(t,e){if(t&&0!==t.length){this.lazy_init();var i=this._renderContext;this._glProgramState.apply(),this._shader.setUniformForModelViewAndProjectionMatrixWithMat4(),i.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),this._shader.setUniformLocationWith4fv(this._colorLocation,this._colorArray),this._shader.setUniformLocationWith1f(this._pointSizeLocation,this._pointSize);var n=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,n),i.bufferData(i.ARRAY_BUFFER,this._pointsToTypeArray(t),i.STATIC_DRAW),i.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,2,i.FLOAT,!1,0,0),i.drawArrays(i.POINTS,0,t.length),i.deleteBuffer(n),cc.incrementGLDraws(1)}},_pointsToTypeArray:function(t){for(var e=new Float32Array(2*t.length),i=0;i<t.length;i++)e[2*i]=t[i].x,e[2*i+1]=t[i].y;return e},drawLine:function(t,e){this.lazy_init();var i=this._renderContext;this._glProgramState.apply(),this._shader.setUniformForModelViewAndProjectionMatrixWithMat4(),i.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),this._shader.setUniformLocationWith4fv(this._colorLocation,this._colorArray);var n=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,n),i.bufferData(i.ARRAY_BUFFER,this._pointsToTypeArray([t,e]),i.STATIC_DRAW),i.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,2,i.FLOAT,!1,0,0),i.drawArrays(i.LINES,0,2),i.deleteBuffer(n),cc.incrementGLDraws(1)},drawRect:function(t,e){this.drawLine(cc.p(t.x,t.y),cc.p(e.x,t.y)),this.drawLine(cc.p(e.x,t.y),cc.p(e.x,e.y)),this.drawLine(cc.p(e.x,e.y),cc.p(t.x,e.y)),this.drawLine(cc.p(t.x,e.y),cc.p(t.x,t.y))},drawSolidRect:function(t,e,i){t=[t,cc.p(e.x,t.y),e,cc.p(t.x,e.y)],this.drawSolidPoly(t,4,i)},drawPoly:function(t,e,i){this.lazy_init(),e=this._renderContext,this._glProgramState.apply(),this._shader.setUniformForModelViewAndProjectionMatrixWithMat4(),e.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),this._shader.setUniformLocationWith4fv(this._colorLocation,this._colorArray);var n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,this._pointsToTypeArray(t),e.STATIC_DRAW),e.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,2,e.FLOAT,!1,0,0),i?e.drawArrays(e.LINE_LOOP,0,t.length):e.drawArrays(e.LINE_STRIP,0,t.length),e.deleteBuffer(n),cc.incrementGLDraws(1)},drawSolidPoly:function(t,e,i){this.lazy_init(),i&&this.setDrawColor(i.r,i.g,i.b,i.a),e=this._renderContext,this._glProgramState.apply(),this._shader.setUniformForModelViewAndProjectionMatrixWithMat4(),e.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),this._shader.setUniformLocationWith4fv(this._colorLocation,this._colorArray),i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,this._pointsToTypeArray(t),e.STATIC_DRAW),e.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,2,e.FLOAT,!1,0,0),e.drawArrays(e.TRIANGLE_FAN,0,t.length),e.deleteBuffer(i),cc.incrementGLDraws(1)},drawCircle:function(t,e,i,n,s){this.lazy_init();var r=1;s&&r++;var o=2*Math.PI/n;if(s=new Float32Array(2*(n+2))){for(var a=0;a<=n;a++){var c=a*o,h=e*Math.cos(c+i)+t.x;c=e*Math.sin(c+i)+t.y;s[2*a]=h,s[2*a+1]=c}s[2*(n+1)]=t.x,s[2*(n+1)+1]=t.y,t=this._renderContext,this._glProgramState.apply(),this._shader.setUniformForModelViewAndProjectionMatrixWithMat4(),t.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),this._shader.setUniformLocationWith4fv(this._colorLocation,this._colorArray),e=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,s,t.STATIC_DRAW),t.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,2,t.FLOAT,!1,0,0),t.drawArrays(t.LINE_STRIP,0,n+r),t.deleteBuffer(e),cc.incrementGLDraws(1)}},drawQuadBezier:function(t,e,i,n){this.lazy_init();for(var s=new Float32Array(2*(n+1)),r=0,o=0;o<n;o++)s[2*o]=Math.pow(1-r,2)*t.x+2*(1-r)*r*e.x+r*r*i.x,s[2*o+1]=Math.pow(1-r,2)*t.y+2*(1-r)*r*e.y+r*r*i.y,r+=1/n;s[2*n]=i.x,s[2*n+1]=i.y,t=this._renderContext,this._glProgramState.apply(),this._shader.setUniformForModelViewAndProjectionMatrixWithMat4(),t.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),this._shader.setUniformLocationWith4fv(this._colorLocation,this._colorArray),e=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,s,t.STATIC_DRAW),t.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,2,t.FLOAT,!1,0,0),t.drawArrays(t.LINE_STRIP,0,n+1),t.deleteBuffer(e),cc.incrementGLDraws(1)},drawCubicBezier:function(t,e,i,n,s){this.lazy_init();for(var r=new Float32Array(2*(s+1)),o=0,a=0;a<s;a++)r[2*a]=Math.pow(1-o,3)*t.x+3*Math.pow(1-o,2)*o*e.x+3*(1-o)*o*o*i.x+o*o*o*n.x,r[2*a+1]=Math.pow(1-o,3)*t.y+3*Math.pow(1-o,2)*o*e.y+3*(1-o)*o*o*i.y+o*o*o*n.y,o+=1/s;r[2*s]=n.x,r[2*s+1]=n.y,t=this._renderContext,this._glProgramState.apply(),this._shader.setUniformForModelViewAndProjectionMatrixWithMat4(),t.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),this._shader.setUniformLocationWith4fv(this._colorLocation,this._colorArray),e=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),t.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,2,t.FLOAT,!1,0,0),t.drawArrays(t.LINE_STRIP,0,s+1),t.deleteBuffer(e),cc.incrementGLDraws(1)},drawCatmullRom:function(t,e){this.drawCardinalSpline(t,.5,e)},drawCardinalSpline:function(t,e,i){this.lazy_init();for(var n,s,r=new Float32Array(2*(i+1)),o=1/t.length,a=0;a<i+1;a++)1===(s=a/i)?(n=t.length-1,s=1):s=(s-o*(n=0|s/o))/o,n=cc.cardinalSplineAt(cc.getControlPointAt(t,n-1),cc.getControlPointAt(t,n),cc.getControlPointAt(t,n+1),cc.getControlPointAt(t,n+2),e,s),r[2*a]=n.x,r[2*a+1]=n.y;t=this._renderContext,this._glProgramState.apply(),this._shader.setUniformForModelViewAndProjectionMatrixWithMat4(),t.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),this._shader.setUniformLocationWith4fv(this._colorLocation,this._colorArray),e=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),t.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,2,t.FLOAT,!1,0,0),t.drawArrays(t.LINE_STRIP,0,i+1),t.deleteBuffer(e),cc.incrementGLDraws(1)},setDrawColor:function(t,e,i,n){this._colorArray[0]=t/255,this._colorArray[1]=e/255,this._colorArray[2]=i/255,this._colorArray[3]=n/255},setPointSize:function(t){this._pointSize=t*cc.contentScaleFactor()},setLineWidth:function(t){this._renderContext.lineWidth&&this._renderContext.lineWidth(t)}}),cc._tmp.PrototypeLabelTTF=function(){var t=cc.LabelTTF.prototype;cc.defineGetterSetter(t,"color",t.getColor,t.setColor),cc.defineGetterSetter(t,"opacity",t.getOpacity,t.setOpacity),cc.defineGetterSetter(t,"string",t.getString,t.setString),cc.defineGetterSetter(t,"textAlign",t.getHorizontalAlignment,t.setHorizontalAlignment),cc.defineGetterSetter(t,"verticalAlign",t.getVerticalAlignment,t.setVerticalAlignment),cc.defineGetterSetter(t,"fontSize",t.getFontSize,t.setFontSize),cc.defineGetterSetter(t,"fontName",t.getFontName,t.setFontName),cc.defineGetterSetter(t,"font",t._getFont,t._setFont),cc.defineGetterSetter(t,"boundingWidth",t._getBoundingWidth,t._setBoundingWidth),cc.defineGetterSetter(t,"boundingHeight",t._getBoundingHeight,t._setBoundingHeight),cc.defineGetterSetter(t,"fillStyle",t._getFillStyle,t.setFontFillColor),cc.defineGetterSetter(t,"strokeStyle",t._getStrokeStyle,t._setStrokeStyle),cc.defineGetterSetter(t,"lineWidth",t._getLineWidth,t._setLineWidth),cc.defineGetterSetter(t,"shadowOffsetX",t._getShadowOffsetX,t._setShadowOffsetX),cc.defineGetterSetter(t,"shadowOffsetY",t._getShadowOffsetY,t._setShadowOffsetY),cc.defineGetterSetter(t,"shadowOpacity",t._getShadowOpacity,t._setShadowOpacity),cc.defineGetterSetter(t,"shadowBlur",t._getShadowBlur,t._setShadowBlur)},cc.LabelTTF=cc.Sprite.extend({_dimensions:null,_hAlignment:cc.TEXT_ALIGNMENT_CENTER,_vAlignment:cc.VERTICAL_TEXT_ALIGNMENT_TOP,_fontName:null,_fontSize:0,_string:"",_originalText:null,_onCacheCanvasMode:!0,_shadowEnabled:!1,_shadowOffset:null,_shadowOpacity:0,_shadowBlur:0,_shadowColor:null,_strokeEnabled:!1,_strokeColor:null,_strokeSize:0,_textFillColor:null,_strokeShadowOffsetX:0,_strokeShadowOffsetY:0,_needUpdateTexture:!1,_lineWidths:null,_className:"LabelTTF",_fontStyle:"normal",_fontWeight:"normal",_lineHeight:"normal",initWithString:function(t,e,i,n,s,r){return t=t?t+"":"",i=i||16,n=n||cc.size(0,0),s=s||cc.TEXT_ALIGNMENT_LEFT,r=r||cc.VERTICAL_TEXT_ALIGNMENT_TOP,this._opacityModifyRGB=!1,this._dimensions=cc.size(n.width,n.height),this._fontName=e||"Arial",this._hAlignment=s,this._vAlignment=r,this._fontSize=i,this._renderCmd._setFontStyle(this._fontName,i,this._fontStyle,this._fontWeight),this.string=t,this._renderCmd._setColorsString(),this._renderCmd._updateTexture(),this._setUpdateTextureDirty(),this._scaleX=this._scaleY=1/cc.view.getDevicePixelRatio(),!0},_setUpdateTextureDirty:function(){this._needUpdateTexture=!0,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.textDirty)},ctor:function(t,e,i,n,s,r){cc.Sprite.prototype.ctor.call(this),this._dimensions=cc.size(0,0),this._hAlignment=cc.TEXT_ALIGNMENT_LEFT,this._vAlignment=cc.VERTICAL_TEXT_ALIGNMENT_TOP,this._opacityModifyRGB=!1,this._fontName="Arial",this._shadowEnabled=!1,this._shadowOffset=cc.p(0,0),this._shadowBlur=this._shadowOpacity=0,this._strokeEnabled=!1,this._strokeColor=cc.color(255,255,255,255),this._strokeSize=0,this._textFillColor=cc.color(255,255,255,255),this._strokeShadowOffsetY=this._strokeShadowOffsetX=0,this._needUpdateTexture=!1,this._lineWidths=[],this._renderCmd._setColorsString(),this._textureLoaded=!0,e&&e instanceof cc.FontDefinition?this.initWithStringAndTextDefinition(t,e):cc.LabelTTF.prototype.initWithString.call(this,t,e,i,n,s,r)},init:function(){return this.initWithString(" ",this._fontName,this._fontSize)},description:function(){return"<cc.LabelTTF | FontName ="+this._fontName+" FontSize = "+this._fontSize.toFixed(1)+">"},getLineHeight:function(){return!this._lineHeight||this._lineHeight.charAt?this._renderCmd._getFontClientHeight():this._lineHeight||this._renderCmd._getFontClientHeight()},setLineHeight:function(t){this._lineHeight=t},getString:function(){return this._string},getHorizontalAlignment:function(){return this._hAlignment},getVerticalAlignment:function(){return this._vAlignment},getDimensions:function(){return cc.size(this._dimensions)},getFontSize:function(){return this._fontSize},getFontName:function(){return this._fontName},initWithStringAndTextDefinition:function(t,e){return this._updateWithTextDefinition(e,!1),this.string=t,!0},setTextDefinition:function(t){t&&this._updateWithTextDefinition(t,!0)},getTextDefinition:function(){return this._prepareTextDefinition(!1)},enableShadow:function(t,e,i,n){null!=t.r&&null!=t.g&&null!=t.b&&null!=t.a?this._enableShadow(t,e,i):this._enableShadowNoneColor(t,e,i,n)},_enableShadowNoneColor:function(t,e,i,n){i=i||.5,!1===this._shadowEnabled&&(this._shadowEnabled=!0);var s=this._shadowOffset;(s&&s.x!==t||s._y!==e)&&(s.x=t,s.y=e),this._shadowOpacity!==i&&(this._shadowOpacity=i),this._renderCmd._setColorsString(),this._shadowBlur!==n&&(this._shadowBlur=n),this._setUpdateTextureDirty()},_enableShadow:function(t,e,i){this._shadowColor||(this._shadowColor=cc.color(255,255,255,128)),this._shadowColor.r=t.r,this._shadowColor.g=t.g,this._shadowColor.b=t.b,this._enableShadowNoneColor(e.width||e.x||0,e.height||e.y||0,null!=t.a?t.a/255:.5,i)},_getShadowOffsetX:function(){return this._shadowOffset.x},_setShadowOffsetX:function(t){!1===this._shadowEnabled&&(this._shadowEnabled=!0),this._shadowOffset.x!==t&&(this._shadowOffset.x=t,this._setUpdateTextureDirty())},_getShadowOffsetY:function(){return this._shadowOffset._y},_setShadowOffsetY:function(t){!1===this._shadowEnabled&&(this._shadowEnabled=!0),this._shadowOffset._y!==t&&(this._shadowOffset._y=t,this._setUpdateTextureDirty())},_getShadowOffset:function(){return cc.p(this._shadowOffset.x,this._shadowOffset.y)},_setShadowOffset:function(t){!1===this._shadowEnabled&&(this._shadowEnabled=!0),this._shadowOffset.x===t.x&&this._shadowOffset.y===t.y||(this._shadowOffset.x=t.x,this._shadowOffset.y=t.y,this._setUpdateTextureDirty())},_getShadowOpacity:function(){return this._shadowOpacity},_setShadowOpacity:function(t){!1===this._shadowEnabled&&(this._shadowEnabled=!0),this._shadowOpacity!==t&&(this._shadowOpacity=t,this._renderCmd._setColorsString(),this._setUpdateTextureDirty())},_getShadowBlur:function(){return this._shadowBlur},_setShadowBlur:function(t){!1===this._shadowEnabled&&(this._shadowEnabled=!0),this._shadowBlur!==t&&(this._shadowBlur=t,this._setUpdateTextureDirty())},disableShadow:function(){this._shadowEnabled&&(this._shadowEnabled=!1,this._setUpdateTextureDirty())},enableStroke:function(t,e){!1===this._strokeEnabled&&(this._strokeEnabled=!0);var i=this._strokeColor;i.r===t.r&&i.g===t.g&&i.b===t.b||(i.r=t.r,i.g=t.g,i.b=t.b,this._renderCmd._setColorsString()),this._strokeSize!==e&&(this._strokeSize=e||0),this._setUpdateTextureDirty()},_getStrokeStyle:function(){return this._strokeColor},_setStrokeStyle:function(t){!1===this._strokeEnabled&&(this._strokeEnabled=!0);var e=this._strokeColor;e.r===t.r&&e.g===t.g&&e.b===t.b||(e.r=t.r,e.g=t.g,e.b=t.b,this._renderCmd._setColorsString(),this._setUpdateTextureDirty())},_getLineWidth:function(){return this._strokeSize},_setLineWidth:function(t){!1===this._strokeEnabled&&(this._strokeEnabled=!0),this._strokeSize!==t&&(this._strokeSize=t||0,this._setUpdateTextureDirty())},disableStroke:function(){this._strokeEnabled&&(this._strokeEnabled=!1,this._setUpdateTextureDirty())},setFontFillColor:function(t){var e=this._textFillColor;e.r===t.r&&e.g===t.g&&e.b===t.b||(e.r=t.r,e.g=t.g,e.b=t.b,this._renderCmd._setColorsString(),this._needUpdateTexture=!0)},_getFillStyle:function(){return this._textFillColor},_updateWithTextDefinition:function(t,e){t.fontDimensions?(this._dimensions.width=t.boundingWidth,this._dimensions.height=t.boundingHeight):(this._dimensions.width=0,this._dimensions.height=0),this._hAlignment=t.textAlign,this._vAlignment=t.verticalAlign,this._fontName=t.fontName,this._fontSize=t.fontSize||12,this._lineHeight=t.lineHeight?t.lineHeight:this._fontSize,this._renderCmd._setFontStyle(t),t.shadowEnabled&&this.enableShadow(t.shadowOffsetX,t.shadowOffsetY,t.shadowOpacity,t.shadowBlur),t.strokeEnabled&&this.enableStroke(t.strokeStyle,t.lineWidth),this.setFontFillColor(t.fillStyle),e&&this._renderCmd._updateTexture();var i=cc.Node._dirtyFlags;this._renderCmd.setDirtyFlag(i.colorDirty|i.opacityDirty|i.textDirty)},_prepareTextDefinition:function(t){var e=new cc.FontDefinition;if(t?(e.fontSize=this._fontSize,e.boundingWidth=cc.contentScaleFactor()*this._dimensions.width,e.boundingHeight=cc.contentScaleFactor()*this._dimensions.height):(e.fontSize=this._fontSize,e.boundingWidth=this._dimensions.width,e.boundingHeight=this._dimensions.height),e.fontName=this._fontName,e.textAlign=this._hAlignment,e.verticalAlign=this._vAlignment,this._strokeEnabled){e.strokeEnabled=!0;var i=this._strokeColor;e.strokeStyle=cc.color(i.r,i.g,i.b),e.lineWidth=this._strokeSize}else e.strokeEnabled=!1;return this._shadowEnabled?(e.shadowEnabled=!0,e.shadowBlur=this._shadowBlur,e.shadowOpacity=this._shadowOpacity,e.shadowOffsetX=(t?cc.contentScaleFactor():1)*this._shadowOffset.x,e.shadowOffsetY=(t?cc.contentScaleFactor():1)*this._shadowOffset.y):e._shadowEnabled=!1,t=this._textFillColor,e.fillStyle=cc.color(t.r,t.g,t.b),e},getScale:function(){return this._scaleX!==this._scaleY&&cc.log(cc._LogInfos.Node_getScale),this._scaleX*cc.view.getDevicePixelRatio()},setScale:function(t,e){var i=cc.view.getDevicePixelRatio();this._scaleX=t/i,this._scaleY=(e||0===e?e:t)/i,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getScaleX:function(){return this._scaleX*cc.view.getDevicePixelRatio()},setScaleX:function(t){this._scaleX=t/cc.view.getDevicePixelRatio(),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getScaleY:function(){return this._scaleY*cc.view.getDevicePixelRatio()},setScaleY:function(t){this._scaleY=t/cc.view.getDevicePixelRatio(),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},setString:function(t){t=String(t),this._originalText!==t&&(this._originalText=t+"",this._updateString(),this._setUpdateTextureDirty(),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty))},_updateString:function(){this._string&&""!==this._string||this._string===this._originalText||(cc.renderer.childrenOrderDirty=!0),this._string=this._originalText},setHorizontalAlignment:function(t){t!==this._hAlignment&&(this._hAlignment=t,this._setUpdateTextureDirty())},setVerticalAlignment:function(t){t!==this._vAlignment&&(this._vAlignment=t,this._setUpdateTextureDirty())},setDimensions:function(t,e){var i;void 0===e?(i=t.width,e=t.height):i=t,i===this._dimensions.width&&e===this._dimensions.height||(this._dimensions.width=i,this._dimensions.height=e,this._updateString(),this._setUpdateTextureDirty())},_getBoundingWidth:function(){return this._dimensions.width},_setBoundingWidth:function(t){t!==this._dimensions.width&&(this._dimensions.width=t,this._updateString(),this._setUpdateTextureDirty())},_getBoundingHeight:function(){return this._dimensions.height},_setBoundingHeight:function(t){t!==this._dimensions.height&&(this._dimensions.height=t,this._updateString(),this._setUpdateTextureDirty())},setFontSize:function(t){this._fontSize!==t&&(this._fontSize=t,this._renderCmd._setFontStyle(this._fontName,this._fontSize,this._fontStyle,this._fontWeight),this._setUpdateTextureDirty())},setFontName:function(t){this._fontName&&this._fontName!==t&&(this._fontName=t,this._renderCmd._setFontStyle(this._fontName,this._fontSize,this._fontStyle,this._fontWeight),this._setUpdateTextureDirty())},_getFont:function(){return this._renderCmd._getFontStyle()},_setFont:function(t){(t=cc.LabelTTF._fontStyleRE.exec(t))&&(this._fontSize=parseInt(t[1]),this._fontName=t[2],this._renderCmd._setFontStyle(this._fontName,this._fontSize,this._fontStyle,this._fontWeight),this._setUpdateTextureDirty())},getContentSize:function(){this._needUpdateTexture&&this._renderCmd._updateTTF();var t=cc.view.getDevicePixelRatio();return cc.size(this._contentSize.width/t,this._contentSize.height/t)},_getWidth:function(){return this._needUpdateTexture&&this._renderCmd._updateTTF(),this._contentSize.width/cc.view.getDevicePixelRatio()},_getHeight:function(){return this._needUpdateTexture&&this._renderCmd._updateTTF(),this._contentSize.height/cc.view.getDevicePixelRatio()},setTextureRect:function(t,e,i){this._rectRotated=e||!1,this.setContentSize(i||t),(e=this._rect).x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,this._renderCmd._setTextureCoords(t,!1),i=this._unflippedOffsetPositionFromCenter.x;var n=this._unflippedOffsetPositionFromCenter.y;this._flippedX&&(i=-i),this._flippedY&&(n=-n),this._offsetPosition.x=i+(t.width-e.width)/2,this._offsetPosition.y=n+(t.height-e.height)/2},setDrawMode:function(t){this._onCacheCanvasMode=t},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?new cc.LabelTTF.WebGLRenderCmd(this):this._onCacheCanvasMode?new cc.LabelTTF.CacheCanvasRenderCmd(this):new cc.LabelTTF.CanvasRenderCmd(this)},_setFontStyle:function(t){this._fontStyle!==t&&(this._fontStyle=t,this._renderCmd._setFontStyle(this._fontName,this._fontSize,this._fontStyle,this._fontWeight),this._setUpdateTextureDirty())},_getFontStyle:function(){return this._fontStyle},_setFontWeight:function(t){this._fontWeight!==t&&(this._fontWeight=t,this._renderCmd._setFontStyle(this._fontName,this._fontSize,this._fontStyle,this._fontWeight),this._setUpdateTextureDirty())},_getFontWeight:function(){return this._fontWeight}}),cc.assert(cc.isFunction(cc._tmp.PrototypeLabelTTF),cc._LogInfos.MissingFile,"LabelTTFPropertyDefine.js"),cc._tmp.PrototypeLabelTTF(),delete cc._tmp.PrototypeLabelTTF,cc.LabelTTF._fontStyleRE=/^(\d+)px\s+['"]?([\w\s\d]+)['"]?$/,cc.LabelTTF.create=function(t,e,i,n,s,r){return new cc.LabelTTF(t,e,i,n,s,r)},cc.LabelTTF.createWithFontDefinition=cc.LabelTTF.create,cc.LabelTTF.__labelHeightDiv=document.createElement("div"),cc.LabelTTF.__labelHeightDiv.style.fontFamily="Arial",cc.LabelTTF.__labelHeightDiv.style.position="absolute",cc.LabelTTF.__labelHeightDiv.style.left="-100px",cc.LabelTTF.__labelHeightDiv.style.top="-100px",cc.LabelTTF.__labelHeightDiv.style.lineHeight="normal",document.body?document.body.appendChild(cc.LabelTTF.__labelHeightDiv):window.addEventListener("load",(function(){this.removeEventListener("load",arguments.callee,!1),document.body.appendChild(cc.LabelTTF.__labelHeightDiv)}),!1),cc.LabelTTF.__getFontHeightByDiv=function(t,e){var i,n=cc.LabelTTF.__labelHeightDiv;if(t instanceof cc.FontDefinition){if(0<(i=cc.LabelTTF.__fontHeightCache[t._getCanvasFontStr()]))return i;n.innerHTML="ajghl~!",n.style.fontFamily=t.fontName,n.style.fontSize=t.fontSize+"px",n.style.fontStyle=t.fontStyle,n.style.fontWeight=t.fontWeight,i=n.clientHeight,cc.LabelTTF.__fontHeightCache[t._getCanvasFontStr()]=i}else{if(0<(i=cc.LabelTTF.__fontHeightCache[t+"."+e]))return i;n.innerHTML="ajghl~!",n.style.fontFamily=t,n.style.fontSize=e+"px",i=n.clientHeight,cc.LabelTTF.__fontHeightCache[t+"."+e]=i}return n.innerHTML="",i},cc.LabelTTF.__fontHeightCache={},cc.LabelTTF._textAlign=["left","center","right"],cc.LabelTTF._textBaseline=["top","middle","bottom"],cc.LabelTTF.wrapInspection=!0,cc.LabelTTF._wordRex=/([a-zA-Z0-9\-\u00bf\u00a1\u00ab\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02af\u0300-\u034e\u0350-\u036F\u0370-\u052f\u2011\u2035-\u2037\u2039\u2045]+|\S)/,cc.LabelTTF._symbolRex=/^[!,.:;}\]%\?>\u3001\u2018\u201c\u300b\u00bb\uff1f\u3002\uff0c\uff01\u2010\u2032-\u2034\u203a\u203c\u2046\u2047-\u2049]/,cc.LabelTTF._lastWordRex=/([a-zA-Z0-9\-\u00bf\u00a1\u00ab\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02af\u0300-\u034e\u0350-\u036F\u0370-\u052f\u2011\u2035-\u2037\u2039\u2045]+|\S)$/,cc.LabelTTF._lastEnglish=/[a-zA-Z0-9\-\u00bf\u00a1\u00ab\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02af\u0300-\u034e\u0350-\u036F\u0370-\u052f\u2011\u2035-\u2037\u2039\u2045]+$/,cc.LabelTTF._firsrEnglish=/^[a-zA-Z0-9\-\u00bf\u00a1\u00ab\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02af\u0300-\u034e\u0350-\u036F\u0370-\u052f\u2011\u2035-\u2037\u2039\u2045]/,function(){cc.LabelTTF.RenderCmd=function(){this._fontClientHeight=18,this._fontStyleStr="",this._shadowColorStr="rgba(128, 128, 128, 0.5)",this._strokeColorStr="",this._fillColorStr="rgba(255,255,255,1)",this._labelContext=this._labelCanvas=null,this._lineWidths=[],this._strings=[],this._isMultiLine=!1,this._status=[],this._renderingIndex=0,this._canUseDirtyRegion=!0};var t=cc.LabelTTF.RenderCmd.prototype;t.constructor=cc.LabelTTF.RenderCmd,t._labelCmdCtor=cc.LabelTTF.RenderCmd,t._setFontStyle=function(t,e,i,n){if(t instanceof cc.FontDefinition)this._fontStyleStr=t._getCanvasFontStr(),this._fontClientHeight=cc.LabelTTF.__getFontHeightByDiv(t);else{var s=e*cc.view.getDevicePixelRatio();this._fontStyleStr=i+" "+n+" "+s+"px '"+t+"'",this._fontClientHeight=cc.LabelTTF.__getFontHeightByDiv(t,e)}},t._getFontStyle=function(){return this._fontStyleStr},t._getFontClientHeight=function(){return this._fontClientHeight},t._updateColor=function(){this._setColorsString(),this._updateTexture()},t._setColorsString=function(){var t=this._displayedColor,e=this._node,i=e._shadowColor||this._displayedColor,n=e._strokeColor,s=e._textFillColor,r=t.r/255,o=t.g/255;t=t.b/255;this._shadowColorStr="rgba("+(0|r*i.r)+","+(0|o*i.g)+","+(0|t*i.b)+","+e._shadowOpacity+")",this._fillColorStr="rgba("+(0|r*s.r)+","+(0|o*s.g)+","+(0|t*s.b)+", 1)",this._strokeColorStr="rgba("+(0|r*n.r)+","+(0|o*n.g)+","+(0|t*n.b)+", 1)"};var e=new cc.Rect;t.getLocalBB=function(){var t=this._node;e.x=e.y=0;var i=cc.view.getDevicePixelRatio();return e.width=t._getWidth()*i,e.height=t._getHeight()*i,e},t._updateTTF=function(){var t,e,i=this._node,n=cc.view.getDevicePixelRatio(),s=i._dimensions.width*n,r=this._lineWidths;r.length=0,this._isMultiLine=!1,this._measureConfig();var o={};if(0!==s)for(this._strings=i._string.split("\n"),t=0;t<this._strings.length;t++)this._checkWarp(this._strings,t,s);else for(this._strings=i._string.split("\n"),t=0,e=this._strings.length;t<e;t++)if(this._strings[t]){var a=this._measure(this._strings[t]);r.push(a),o[this._strings[t]]=a}else r.push(0);1<this._strings.length&&(this._isMultiLine=!0),e=t=0,i._strokeEnabled&&(t=e=2*i._strokeSize),i._shadowEnabled&&(a=i._shadowOffset,t+=2*Math.abs(a.x),e+=2*Math.abs(a.y)),0===s?this._isMultiLine?n=cc.size(Math.ceil(Math.max.apply(Math,r)+t),Math.ceil(this._fontClientHeight*n*this._strings.length+e)):(!(a=o[i._string])&&i._string&&(a=this._measure(i._string)),n=cc.size(Math.ceil((a||0)+t),Math.ceil(this._fontClientHeight*n+e))):n=0===i._dimensions.height?this._isMultiLine?cc.size(Math.ceil(s+t),Math.ceil(i.getLineHeight()*n*this._strings.length+e)):cc.size(Math.ceil(s+t),Math.ceil(i.getLineHeight()*n+e)):cc.size(Math.ceil(s+t),Math.ceil(i._dimensions.height*n+e)),"normal"!==i._getFontStyle()&&(n.width=Math.ceil(n.width+.3*i._fontSize)),i.setContentSize(n),i._strokeShadowOffsetX=t,i._strokeShadowOffsetY=e,i=i._anchorPoint,this._anchorPointInPoints.x=.5*t+(n.width-t)*i.x,this._anchorPointInPoints.y=.5*e+(n.height-e)*i.y},t._saveStatus=function(){var t=this._node,e=cc.view.getDevicePixelRatio(),i=t._strokeShadowOffsetX,n=t._strokeShadowOffsetY,s=t._contentSize.height-n,r=t._vAlignment,o=t._hAlignment,a=.5*i,c=(n=s+.5*n,0),h=0,l=[];i=t._contentSize.width-i,e=((t=t.getLineHeight()*e)-this._fontClientHeight*e)/2,c=o===cc.TEXT_ALIGNMENT_RIGHT?c+i:o===cc.TEXT_ALIGNMENT_CENTER?c+i/2:c+0;if(this._isMultiLine)for(o=this._strings.length,r===cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM?h=t-2*e+s-t*o:r===cc.VERTICAL_TEXT_ALIGNMENT_CENTER&&(h=(t-2*e)/2+(s-t*o)/2),r=0;r<o;r++)l.push(-s+(t*r+e)+h);else r!==cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM&&(h=r===cc.VERTICAL_TEXT_ALIGNMENT_TOP?h-s:h-.5*s),l.push(h);s={contextTransform:cc.p(a,n),xOffset:c,OffsetYArray:l},this._status.push(s)},t._drawTTFInCanvas=function(t){if(t){var e=this._status.pop();t.setTransform(1,0,0,1,e.contextTransform.x,e.contextTransform.y),this.drawLabels(t,e.xOffset,e.OffsetYArray)}},t._checkWarp=function(t,e,i){var n=t[e],s=this._measure(n);if(s>i&&1<n.length){for(var r,o=i/s*n.length|0,a=n.substr(o),c=s-this._measure(a),h=0,l=0;c>i&&100>l++;)o*=i/c,o|=0,a=n.substr(o),c=s-this._measure(a);for(l=0;c<i&&100>l++;)a&&(h=(r=cc.LabelTTF._wordRex.exec(a))?r[0].length:1,r=a),o+=h,a=n.substr(o),c=s-this._measure(a);0===(o-=h)&&(o=1,r=r.substr(1)),i=n.substr(0,o),cc.LabelTTF.wrapInspection&&cc.LabelTTF._symbolRex.test(r||a)&&(0===(o-=(s=cc.LabelTTF._lastWordRex.exec(i))?s[0].length:0)&&(o=1),r=n.substr(o),i=n.substr(0,o)),cc.LabelTTF._firsrEnglish.test(r)&&(s=cc.LabelTTF._lastEnglish.exec(i))&&i!==s[0]&&(o-=s[0].length,r=n.substr(o),i=n.substr(0,o)),t[e]=r||a,t.splice(e,0,i)}},t.updateStatus=function(){this._dirtyFlag&cc.Node._dirtyFlags.textDirty&&this._updateTexture(),this.originUpdateStatus()},t._syncStatus=function(t){var e=cc.Node._dirtyFlags,i=this._dirtyFlag;i&e.textDirty&&this._updateTexture(),this._originSyncStatus(t),(cc._renderType===cc.game.RENDER_TYPE_WEBGL||i&e.transformDirty)&&this.transform(t)},t.drawLabels=function(t,e,i){var n=this._node;if(n._shadowEnabled){var s=n._shadowOffset;t.shadowColor=this._shadowColorStr,t.shadowOffsetX=s.x,t.shadowOffsetY=-s.y,t.shadowBlur=n._shadowBlur}s=n._hAlignment;var r=n._vAlignment,o=n._strokeSize;for(t.font!==this._fontStyleStr&&(t.font=this._fontStyleStr),t.fillStyle=this._fillColorStr,(n=n._strokeEnabled)&&(t.lineWidth=2*o,t.strokeStyle=this._strokeColorStr),t.textBaseline=cc.LabelTTF._textBaseline[r],t.textAlign=cc.LabelTTF._textAlign[s],s=this._strings.length,r=0;r<s;r++)o=this._strings[r],n&&(t.lineJoin="round",t.strokeText(o,e,i[r])),t.fillText(o,e,i[r]);cc.g_NumberOfDraws++}}(),function(){cc.LabelTTF.CacheRenderCmd=function(){this._labelCmdCtor();var t=this._labelCanvas=document.createElement("canvas");t.width=1,t.height=1,this._labelContext=t.getContext("2d")},cc.LabelTTF.CacheRenderCmd.prototype=Object.create(cc.LabelTTF.RenderCmd.prototype),cc.inject(cc.LabelTTF.RenderCmd.prototype,cc.LabelTTF.CacheRenderCmd.prototype);var t=cc.LabelTTF.CacheRenderCmd.prototype;t.constructor=cc.LabelTTF.CacheRenderCmd,t._cacheCmdCtor=cc.LabelTTF.CacheRenderCmd,t._updateTexture=function(){this._dirtyFlag^=this._dirtyFlag&cc.Node._dirtyFlags.textDirty;var t=this._node;t._needUpdateTexture=!1;var e=t._contentSize;this._updateTTF();var i=e.width,n=e.height,s=this._labelContext,r=this._labelCanvas;if(!t._texture){var o=new cc.Texture2D;o.initWithElement(this._labelCanvas),t.setTexture(o)}return 0===t._string.length?(r.width=1,r.height=e.height||1,t._texture&&(t._texture._htmlElementObj=this._labelCanvas,t._texture.handleLoadedTexture()),t.setTextureRect(cc.rect(0,0,1,e.height)),!0):(s.font=this._fontStyleStr,e=r.width===i&&r.height===n,r.width=i,r.height=n,e&&s.clearRect(0,0,i,n),this._saveStatus(),this._drawTTFInCanvas(s),t._texture&&(t._texture._htmlElementObj=this._labelCanvas,t._texture.handleLoadedTexture()),t.setTextureRect(cc.rect(0,0,i,n)),!0)},t._measureConfig=function(){this._labelContext.font=this._fontStyleStr},t._measure=function(t){return t?this._labelContext.measureText(t).width:0}}(),function(){cc.LabelTTF.CacheCanvasRenderCmd=function(t){this._spriteCmdCtor(t),this._cacheCmdCtor()};var t=cc.LabelTTF.CacheCanvasRenderCmd.prototype=Object.create(cc.Sprite.CanvasRenderCmd.prototype);cc.inject(cc.LabelTTF.CacheRenderCmd.prototype,t),t.constructor=cc.LabelTTF.CacheCanvasRenderCmd}(),function(){cc.LabelTTF.CanvasRenderCmd=function(t){this._spriteCmdCtor(t),this._labelCmdCtor()},cc.LabelTTF.CanvasRenderCmd.prototype=Object.create(cc.Sprite.CanvasRenderCmd.prototype),cc.inject(cc.LabelTTF.RenderCmd.prototype,cc.LabelTTF.CanvasRenderCmd.prototype);var t=cc.LabelTTF.CanvasRenderCmd.prototype;t.constructor=cc.LabelTTF.CanvasRenderCmd,t._measureConfig=function(){},t._measure=function(t){if(t){var e=cc._renderContext.getContext();return e.font=this._fontStyleStr,e.measureText(t).width}return 0},t._updateTexture=function(){this._dirtyFlag^=this._dirtyFlag&cc.Node._dirtyFlags.textDirty;var t=this._node,e=t._contentSize;this._updateTTF();var i=e.width,n=e.height;return 0===t._string.length?(t.setTextureRect(cc.rect(0,0,1,e.height)),!0):(this._saveStatus(),t.setTextureRect(cc.rect(0,0,i,n)),!0)},t.rendering=function(t){var e=cc.view.getScaleX(),i=cc.view.getScaleY(),n=(t=t||cc._renderContext).getContext();if(n){var s=this._node;if(t.computeRealOffsetY(),!(0>=this._status.length)){var r=this._renderingIndex>=this._status.length?this._renderingIndex-this._status.length:this._renderingIndex,o=this._status[r];this._renderingIndex=r+1;var a=s._offsetPosition.x,c=(r=-s._offsetPosition.y-s._rect.height,this._displayedOpacity/255);for(t.setTransform(this._worldTransform,e,i),t.setCompositeOperation(this._blendFuncStr),t.setGlobalAlpha(c),t.save(),s._flippedX&&(a=-a-s._rect.width,n.scale(-1,1)),s._flippedY&&(r=s._offsetPosition.y,n.scale(1,-1)),e=o.xOffset+o.contextTransform.x+a*e,s=[],a=this._strings.length,c=0;c<a;c++)s.push(o.OffsetYArray[c]+o.contextTransform.y+r*i);this.drawLabels(n,e,s),t.restore()}}}}(),function(){cc.LabelTTF.WebGLRenderCmd=function(t){this._spriteCmdCtor(t),this._cacheCmdCtor()};var t=cc.LabelTTF.WebGLRenderCmd.prototype=Object.create(cc.Sprite.WebGLRenderCmd.prototype);cc.inject(cc.LabelTTF.CacheRenderCmd.prototype,t),t.constructor=cc.LabelTTF.WebGLRenderCmd,t._updateColor=function(){}}(),cc.HashElement=function(){this.actions=[],this.target=null,this.actionIndex=0,this.currentAction=null,this.lock=this.paused=!1},cc.ActionManager=cc.Class.extend({_elementPool:[],_searchElementByTarget:function(t,e){for(var i=0;i<t.length;i++)if(e===t[i].target)return t[i];return null},ctor:function(){this._hashTargets={},this._arrayTargets=[],this._currentTarget=null},_getElement:function(t,e){var i=this._elementPool.pop();return i||(i=new cc.HashElement),i.target=t,i.paused=!!e,i},_putElement:function(t){t.actions.length=0,t.actionIndex=0,t.currentAction=null,t.paused=!1,t.target=null,t.lock=!1,this._elementPool.push(t)},addAction:function(t,e,i){if(!t)throw Error("cc.ActionManager.addAction(): action must be non-null");if(!e)throw Error("cc.ActionManager.addAction(): target must be non-null");var n=this._hashTargets[e.__instanceId];n?n.actions||(n.actions=[]):(n=this._getElement(e,i),this._hashTargets[e.__instanceId]=n,this._arrayTargets.push(n)),n.actions.push(t),t.startWithTarget(e)},removeAllActions:function(){for(var t=this._arrayTargets,e=0;e<t.length;e++){var i=t[e];i&&this.removeAllActionsFromTarget(i.target,!0)}},removeAllActionsFromTarget:function(t,e){if(null!=t){var i=this._hashTargets[t.__instanceId];i&&(i.actions.length=0,this._deleteHashElement(i))}},removeAction:function(t){if(null!=t){var e=t.getOriginalTarget();if(e=this._hashTargets[e.__instanceId]){for(var i=0;i<e.actions.length;i++)if(e.actions[i]===t){e.actions.splice(i,1),e.actionIndex>=i&&e.actionIndex--;break}}else cc.log(cc._LogInfos.ActionManager_removeAction)}},removeActionByTag:function(t,e){t===cc.ACTION_TAG_INVALID&&cc.log(cc._LogInfos.ActionManager_addAction),cc.assert(e,cc._LogInfos.ActionManager_addAction);var i=this._hashTargets[e.__instanceId];if(i)for(var n=i.actions.length,s=0;s<n;++s){var r=i.actions[s];if(r&&r.getTag()===t&&r.getOriginalTarget()===e){this._removeActionAtIndex(s,i);break}}},getActionByTag:function(t,e){t===cc.ACTION_TAG_INVALID&&cc.log(cc._LogInfos.ActionManager_getActionByTag);var i=this._hashTargets[e.__instanceId];if(i){if(null!=i.actions)for(var n=0;n<i.actions.length;++n){var s=i.actions[n];if(s&&s.getTag()===t)return s}cc.log(cc._LogInfos.ActionManager_getActionByTag_2,t)}return null},numberOfRunningActionsInTarget:function(t){return(t=this._hashTargets[t.__instanceId])&&t.actions?t.actions.length:0},pauseTarget:function(t){(t=this._hashTargets[t.__instanceId])&&(t.paused=!0)},resumeTarget:function(t){(t=this._hashTargets[t.__instanceId])&&(t.paused=!1)},pauseAllRunningActions:function(){for(var t=[],e=this._arrayTargets,i=0;i<e.length;i++){var n=e[i];n&&!n.paused&&(n.paused=!0,t.push(n.target))}return t},resumeTargets:function(t){if(t)for(var e=0;e<t.length;e++)t[e]&&this.resumeTarget(t[e])},purgeSharedManager:function(){cc.director.getScheduler().unscheduleUpdate(this)},_removeActionAtIndex:function(t,e){e.actions.splice(t,1),e.actionIndex>=t&&e.actionIndex--,0===e.actions.length&&this._deleteHashElement(e)},_deleteHashElement:function(t){var e=!1;if(t&&!t.lock&&this._hashTargets[t.target.__instanceId]){delete this._hashTargets[t.target.__instanceId];for(var i=0,n=(e=this._arrayTargets).length;i<n;i++)if(e[i]===t){e.splice(i,1);break}this._putElement(t),e=!0}return e},update:function(t){for(var e,i=this._arrayTargets,n=0;n<i.length;n++){if(!(e=this._currentTarget=i[n]).paused&&e.actions){for(e.lock=!0,e.actionIndex=0;e.actionIndex<e.actions.length;e.actionIndex++)if(e.currentAction=e.actions[e.actionIndex],e.currentAction){if(e.currentAction.step(t*(e.currentAction._speedMethod?e.currentAction._speed:1)),e.currentAction&&e.currentAction.isDone()){e.currentAction.stop();var s=e.currentAction;e.currentAction=null,this.removeAction(s)}e.currentAction=null}e.lock=!1}0===e.actions.length&&this._deleteHashElement(e)&&n--}}}),cc.profiler=function(){var t=!1,e=!1,i=0,n=0,s=0,r=0,o=null,a=document.createElement("div"),c=document.createElement("div"),h=document.createElement("div"),l=document.createElement("div"),u=10,d=[0,10,20,30],_=[0,0,0,0],g=3,f=0,p=0;l.id="fps",l.style.position="absolute",l.style.padding="3px",l.style.textAlign="left",l.style.backgroundColor="rgb(0, 0, 34)",l.style.bottom=cc.DIRECTOR_STATS_POSITION.y+"0px",l.style.left=cc.DIRECTOR_STATS_POSITION.x+"px",l.style.width="45px",l.style.height="80px";for(var m=[h,c,a],T=0;3>T;++T){var S=m[T].style;S.color="rgb(0, 255, 255)",S.font="bold 12px Helvetica, Arial",S.lineHeight="20px",S.width="100%",l.appendChild(m[T])}var y=function(){if(s=cc.director.getSecondsPerFrame(),i++,(r+=cc.director.getDeltaTime())>cc.DIRECTOR_FPS_INTERVAL){if(n=i/r,r=i=0,C.onFrameRateChange){var e=n,o=d.length-1,l=o,m=0;for(f++,p+=e;0<=l;l--)if(e>=d[l]){_[l]++;break}if(f>=u){for(m=p/u,l=o;0<l;l--)if(.6<=(e=_[l]/u)&&m>=d[l]){l!=g&&(g=l,C.onFrameRateChange&&C.onFrameRateChange(m.toFixed(2)));break}for(p=f=_changeCount=0,l=o;0<l;l--)_[l]=0}}t&&(o=cc._renderType===cc.game.RENDER_TYPE_CANVAS?"\n canvas":"\n webgl",c.innerHTML=s.toFixed(3),a.innerHTML=n.toFixed(1).toString()+o,h.innerHTML=(0|cc.g_NumberOfDraws).toString())}},C={onFrameRateChange:null,getSecondsPerFrame:function(){return s},getFrameRate:function(){return n},setProfileDuration:function(t){!isNaN(t)&&0<t&&(u=t/cc.DIRECTOR_FPS_INTERVAL)},resumeProfiling:function(){cc.eventManager.addListener(o,1)},stopProfiling:function(){cc.eventManager.removeListener(o)},isShowingStats:function(){return t},showStats:function(){e||this.init(),null===l.parentElement&&cc.container.appendChild(l),t=!0},hideStats:function(){t=!1,l.parentElement===cc.container&&cc.container.removeChild(l)},init:function(){e||(o=cc.eventManager.addCustomListener(cc.Director.EVENT_AFTER_VISIT,y),e=!0)}};return C}(),cc.math=cc.math||{},cc.math.EPSILON=.015625,cc.math.square=function(t){return t*t},cc.math.almostEqual=function(t,e){return t+cc.math.EPSILON>e&&t-cc.math.EPSILON<e},function(t){t.math.Vec2=function(t,e){void 0===e?(this.x=t.x,this.y=t.y):(this.x=t||0,this.y=e||0)};var e=t.math.Vec2.prototype;e.fill=function(t,e){this.x=t,this.y=e},e.length=function(){return Math.sqrt(t.math.square(this.x)+t.math.square(this.y))},e.lengthSq=function(){return t.math.square(this.x)+t.math.square(this.y)},e.normalize=function(){var t=1/this.length();return this.x*=t,this.y*=t,this},t.math.Vec2.add=function(t,e,i){return t.x=e.x+i.x,t.y=e.y+i.y,t},e.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.dot=function(t){return this.x*t.x+this.y*t.y},t.math.Vec2.subtract=function(t,e,i){return t.x=e.x-i.x,t.y=e.y-i.y,t},e.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},e.transform=function(t){var e=this.x,i=this.y;return this.x=e*t.mat[0]+i*t.mat[3]+t.mat[6],this.y=e*t.mat[1]+i*t.mat[4]+t.mat[7],this},t.math.Vec2.scale=function(t,e,i){return t.x=e.x*i,t.y=e.y*i,t},e.scale=function(t){return this.x*=t,this.y*=t,this},e.equals=function(e){return this.x<e.x+t.math.EPSILON&&this.x>e.x-t.math.EPSILON&&this.y<e.y+t.math.EPSILON&&this.y>e.y-t.math.EPSILON}}(cc),function(t){t.math.Vec3=t.kmVec3=function(t,e,i){t&&void 0===e?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t||0,this.y=e||0,this.z=i||0)},t.math.vec3=function(e,i,n){return new t.math.Vec3(e,i,n)};var e=t.math.Vec3.prototype;e.fill=function(t,e,i){return t&&void 0===e?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t,this.y=e,this.z=i),this},e.length=function(){return Math.sqrt(t.math.square(this.x)+t.math.square(this.y)+t.math.square(this.z))},e.lengthSq=function(){return t.math.square(this.x)+t.math.square(this.y)+t.math.square(this.z)},e.normalize=function(){var t=1/this.length();return this.x*=t,this.y*=t,this.z*=t,this},e.cross=function(t){var e=this.x,i=this.y,n=this.z;return this.x=i*t.z-n*t.y,this.y=n*t.x-e*t.z,this.z=e*t.y-i*t.x,this},e.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},e.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},e.subtract=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},e.transform=function(t){var e=this.x,i=this.y,n=this.z;return t=t.mat,this.x=e*t[0]+i*t[4]+n*t[8]+t[12],this.y=e*t[1]+i*t[5]+n*t[9]+t[13],this.z=e*t[2]+i*t[6]+n*t[10]+t[14],this},e.transformNormal=function(t){var e=this.x,i=this.y,n=this.z;return t=t.mat,this.x=e*t[0]+i*t[4]+n*t[8],this.y=e*t[1]+i*t[5]+n*t[9],this.z=e*t[2]+i*t[6]+n*t[10],this},e.transformCoord=function(e){var i=new t.math.Vec4(this.x,this.y,this.z,1);return i.transform(e),this.x=i.x/i.w,this.y=i.y/i.w,this.z=i.z/i.w,this},e.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this},e.equals=function(e){var i=t.math.EPSILON;return this.x<e.x+i&&this.x>e.x-i&&this.y<e.y+i&&this.y>e.y-i&&this.z<e.z+i&&this.z>e.z-i},e.inverseTransform=function(e){e=e.mat;var i=new t.math.Vec3(this.x-e[12],this.y-e[13],this.z-e[14]);return this.x=i.x*e[0]+i.y*e[1]+i.z*e[2],this.y=i.x*e[4]+i.y*e[5]+i.z*e[6],this.z=i.x*e[8]+i.y*e[9]+i.z*e[10],this},e.inverseTransformNormal=function(t){var e=this.x,i=this.y,n=this.z;return t=t.mat,this.x=e*t[0]+i*t[1]+n*t[2],this.y=e*t[4]+i*t[5]+n*t[6],this.z=e*t[8]+i*t[9]+n*t[10],this},e.assignFrom=function(t){return t?(this.x=t.x,this.y=t.y,this.z=t.z,this):this},t.math.Vec3.zero=function(t){return t.x=t.y=t.z=0,t},e.toTypeArray=function(){var t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}}(cc),function(t){t.math.Vec4=function(t,e,i,n){t&&void 0===e?(this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=n||0)},t.kmVec4=t.math.Vec4;var e=t.math.Vec4.prototype;e.fill=function(t,e,i,n){t&&void 0===e?(this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w):(this.x=t,this.y=e,this.z=i,this.w=n)},e.add=function(t){return t?(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this):this},e.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},e.length=function(){return Math.sqrt(t.math.square(this.x)+t.math.square(this.y)+t.math.square(this.z)+t.math.square(this.w))},e.lengthSq=function(){return t.math.square(this.x)+t.math.square(this.y)+t.math.square(this.z)+t.math.square(this.w)},e.lerp=function(t,e){return this},e.normalize=function(){var t=1/this.length();return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},e.scale=function(t){return this.normalize(),this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},e.subtract=function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w},e.transform=function(t){var e=this.x,i=this.y,n=this.z,s=this.w;return t=t.mat,this.x=e*t[0]+i*t[4]+n*t[8]+s*t[12],this.y=e*t[1]+i*t[5]+n*t[9]+s*t[13],this.z=e*t[2]+i*t[6]+n*t[10]+s*t[14],this.w=e*t[3]+i*t[7]+n*t[11]+s*t[15],this},t.math.Vec4.transformArray=function(e,i){for(var n=[],s=0;s<e.length;s++){var r=new t.math.Vec4(e[s]);r.transform(i),n.push(r)}return n},e.equals=function(e){var i=t.math.EPSILON;return this.x<e.x+i&&this.x>e.x-i&&this.y<e.y+i&&this.y>e.y-i&&this.z<e.z+i&&this.z>e.z-i&&this.w<e.w+i&&this.w>e.w-i},e.assignFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},e.toTypeArray=function(){var t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}}(cc),function(t){function e(e,i,n){(i=new t.math.Vec2(i)).subtract(e),n.x=-i.y,n.y=i.x,n.normalize()}t.math.Ray2=function(e,i){this.start=e||new t.math.Vec2,this.dir=i||new t.math.Vec2},t.math.Ray2.prototype.fill=function(t,e,i,n){this.start.x=t,this.start.y=e,this.dir.x=i,this.dir.y=n},t.math.Ray2.prototype.intersectLineSegment=function(e,i,n){var s=this.start.x,r=this.start.y,o=this.start.x+this.dir.x,a=this.start.y+this.dir.y,c=e.x,h=e.y,l=i.x,u=i.y,d=(u-h)*(o-s)-(l-c)*(a-r);return!(d>-t.math.EPSILON&&d<t.math.EPSILON)&&(c=s+(h=((l-c)*(r-h)-(u-h)*(s-c))/d)*(o-s),h=r+h*(a-r),!(c<Math.min(e.x,i.x)-t.math.EPSILON||c>Math.max(e.x,i.x)+t.math.EPSILON||h<Math.min(e.y,i.y)-t.math.EPSILON||h>Math.max(e.y,i.y)+t.math.EPSILON||c<Math.min(s,o)-t.math.EPSILON||c>Math.max(s,o)+t.math.EPSILON||h<Math.min(r,a)-t.math.EPSILON||h>Math.max(r,a)+t.math.EPSILON)&&(n.x=c,n.y=h,!0))},t.math.Ray2.prototype.intersectTriangle=function(i,n,s,r,o){var a,c=new t.math.Vec2,h=new t.math.Vec2,l=new t.math.Vec2,u=1e4,d=!1;return this.intersectLineSegment(i,n,c)&&(d=!0,(a=c.subtract(this.start).length())<u&&(h.x=c.x,h.y=c.y,u=a,e(i,n,l))),this.intersectLineSegment(n,s,c)&&(d=!0,(a=c.subtract(this.start).length())<u&&(h.x=c.x,h.y=c.y,u=a,e(n,s,l))),this.intersectLineSegment(s,i,c)&&(d=!0,(a=c.subtract(this.start).length())<u&&(h.x=c.x,h.y=c.y,e(s,i,l))),d&&(r.x=h.x,r.y=h.y,o&&(o.x=l.x,o.y=l.y)),d}}(cc),window.Uint16Array=window.Uint16Array||window.Array,window.Float32Array=window.Float32Array||window.Array,function(t){t.math.Matrix3=function(t){this.mat=t&&t.mat?new Float32Array(t.mat):new Float32Array(9)},t.kmMat3=t.math.Matrix3;var e=t.math.Matrix3.prototype;e.fill=function(t){var e=this.mat;return t=t.mat,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},e.adjugate=function(){var t=this.mat,e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],a=t[6],c=t[7],h=t[8];return t[0]=r*h-o*c,t[1]=n*c-i*h,t[2]=i*o-n*r,t[3]=o*a-s*h,t[4]=e*h-n*a,t[5]=n*s-e*o,t[6]=s*c-r*a,t[8]=e*r-i*s,this},e.identity=function(){var t=this.mat;return t[1]=t[2]=t[3]=t[5]=t[6]=t[7]=0,t[0]=t[4]=t[8]=1,this};var i=new t.math.Matrix3;e.inverse=function(t){return 0===t||(i.assignFrom(this),t=1/t,this.adjugate(),this.multiplyScalar(t)),this},e.isIdentity=function(){var t=this.mat;return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&1===t[4]&&0===t[5]&&0===t[6]&&0===t[7]&&1===t[8]},e.transpose=function(){var t=this.mat,e=t[1],i=t[2],n=t[5],s=t[6],r=t[7];return t[1]=t[3],t[2]=s,t[3]=e,t[5]=r,t[6]=i,t[7]=n,this},e.determinant=function(){var t=this.mat;return t[0]*t[4]*t[8]+t[1]*t[5]*t[6]+t[2]*t[3]*t[7]-(t[2]*t[4]*t[6]+t[0]*t[5]*t[7]+t[1]*t[3]*t[8])},e.multiply=function(t){var e=this.mat,i=t.mat;t=e[0];var n=e[1],s=e[2],r=e[3],o=e[4],a=e[5],c=e[6],h=e[7],l=e[8],u=i[0],d=i[1],_=i[2],g=i[3],f=i[4],p=i[5],m=i[6],T=i[7];i=i[8];return e[0]=t*u+r*d+c*_,e[1]=n*u+o*d+h*_,e[2]=s*u+a*d+l*_,e[3]=s*u+a*d+l*_,e[4]=n*g+o*f+h*p,e[5]=s*g+a*f+l*p,e[6]=t*m+r*T+c*i,e[7]=n*m+o*T+h*i,e[8]=s*m+a*T+l*i,this},e.multiplyScalar=function(t){var e=this.mat;return e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=t,e[5]*=t,e[6]*=t,e[7]*=t,e[8]*=t,this},t.math.Matrix3.rotationAxisAngle=function(e,i){var n=Math.cos(i),s=Math.sin(i),r=new t.math.Matrix3,o=r.mat;return o[0]=n+e.x*e.x*(1-n),o[1]=e.z*s+e.y*e.x*(1-n),o[2]=-e.y*s+e.z*e.x*(1-n),o[3]=-e.z*s+e.x*e.y*(1-n),o[4]=n+e.y*e.y*(1-n),o[5]=e.x*s+e.z*e.y*(1-n),o[6]=e.y*s+e.x*e.z*(1-n),o[7]=-e.x*s+e.y*e.z*(1-n),o[8]=n+e.z*e.z*(1-n),r},e.assignFrom=function(e){if(this===e)return t.log("cc.math.Matrix3.assign(): current matrix equals matIn"),this;var i=this.mat;return e=e.mat,i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],this},e.equals=function(e){if(this===e)return!0;var i=t.math.EPSILON,n=this.mat;e=e.mat;for(var s=0;9>s;++s)if(!(n[s]+i>e[s]&&n[s]-i<e[s]))return!1;return!0},t.math.Matrix3.createByRotationX=function(e){var i=new t.math.Matrix3,n=i.mat;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=Math.cos(e),n[5]=Math.sin(e),n[6]=0,n[7]=-Math.sin(e),n[8]=Math.cos(e),i},t.math.Matrix3.createByRotationY=function(e){var i=new t.math.Matrix3,n=i.mat;return n[0]=Math.cos(e),n[1]=0,n[2]=-Math.sin(e),n[3]=0,n[4]=1,n[5]=0,n[6]=Math.sin(e),n[7]=0,n[8]=Math.cos(e),i},t.math.Matrix3.createByRotationZ=function(e){var i=new t.math.Matrix3,n=i.mat;return n[0]=Math.cos(e),n[1]=-Math.sin(e),n[2]=0,n[3]=Math.sin(e),n[4]=Math.cos(e),n[5]=0,n[6]=0,n[7]=0,n[8]=1,i},t.math.Matrix3.createByRotation=function(e){var i=new t.math.Matrix3,n=i.mat;return n[0]=Math.cos(e),n[1]=Math.sin(e),n[2]=0,n[3]=-Math.sin(e),n[4]=Math.cos(e),n[5]=0,n[6]=0,n[7]=0,n[8]=1,i},t.math.Matrix3.createByScale=function(e,i){var n=new t.math.Matrix3;return n.identity(),n.mat[0]=e,n.mat[4]=i,n},t.math.Matrix3.createByTranslation=function(e,i){var n=new t.math.Matrix3;return n.identity(),n.mat[6]=e,n.mat[7]=i,n},t.math.Matrix3.createByQuaternion=function(e){if(!e)return null;var i=new t.math.Matrix3,n=i.mat;return n[0]=1-2*(e.y*e.y+e.z*e.z),n[1]=2*(e.x*e.y-e.w*e.z),n[2]=2*(e.x*e.z+e.w*e.y),n[3]=2*(e.x*e.y+e.w*e.z),n[4]=1-2*(e.x*e.x+e.z*e.z),n[5]=2*(e.y*e.z-e.w*e.x),n[6]=2*(e.x*e.z-e.w*e.y),n[7]=2*(e.y*e.z+e.w*e.x),n[8]=1-2*(e.x*e.x+e.y*e.y),i},e.rotationToAxisAngle=function(){return t.math.Quaternion.rotationMatrix(this).toAxisAndAngle()}}(cc),function(t){t.math.Matrix4=function(t){this.mat=t&&t.mat?new Float32Array(t.mat):new Float32Array(16)},t.kmMat4=t.math.Matrix4;var e=t.math.Matrix4.prototype;e.fill=function(t){for(var e=this.mat,i=0;16>i;i++)e[i]=t[i];return this},t.kmMat4Identity=function(t){var e=t.mat;return e[1]=e[2]=e[3]=e[4]=e[6]=e[7]=e[8]=e[9]=e[11]=e[12]=e[13]=e[14]=0,e[0]=e[5]=e[10]=e[15]=1,t},e.identity=function(){var t=this.mat;return t[1]=t[2]=t[3]=t[4]=t[6]=t[7]=t[8]=t[9]=t[11]=t[12]=t[13]=t[14]=0,t[0]=t[5]=t[10]=t[15]=1,this},e.get=function(t,e){return this.mat[t+4*e]},e.set=function(t,e,i){this.mat[t+4*e]=i},e.swap=function(t,e,i,n){var s=this.mat,r=s[t+4*e];s[t+4*e]=s[i+4*n],s[i+4*n]=r},t.math.Matrix4._gaussj=function(t,e){var i,n,s,r,o,a=0,c=0,h=[0,0,0,0],l=[0,0,0,0],u=[0,0,0,0];for(i=0;4>i;i++){for(n=o=0;4>n;n++)if(1!==u[n])for(s=0;4>s;s++)0===u[s]&&((r=Math.abs(t.get(n,s)))>=o&&(o=r,c=n,a=s));if(++u[a],c!==a){for(n=0;4>n;n++)t.swap(c,n,a,n);for(n=0;4>n;n++)e.swap(c,n,a,n)}if(l[i]=c,h[i]=a,0===t.get(a,a))return!1;for(s=1/t.get(a,a),t.set(a,a,1),n=0;4>n;n++)t.set(a,n,t.get(a,n)*s);for(n=0;4>n;n++)e.set(a,n,e.get(a,n)*s);for(s=0;4>s;s++)if(s!==a){for(r=t.get(s,a),t.set(s,a,0),n=0;4>n;n++)t.set(s,n,t.get(s,n)-t.get(a,n)*r);for(n=0;4>n;n++)e.set(s,n,t.get(s,n)-e.get(a,n)*r)}}for(n=3;0<=n;n--)if(l[n]!==h[n])for(s=0;4>s;s++)t.swap(s,l[n],s,h[n]);return!0};var i=(new t.math.Matrix4).identity();t.kmMat4Inverse=function(e,n){var s=new t.math.Matrix4(n),r=new t.math.Matrix4(i);return!1===t.math.Matrix4._gaussj(s,r)?null:(e.assignFrom(s),e)},e.inverse=function(){var e=new t.math.Matrix4(this),n=new t.math.Matrix4(i);return!1===t.math.Matrix4._gaussj(e,n)?null:e},e.isIdentity=function(){var t=this.mat;return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]},e.transpose=function(){var t=this.mat,e=t[1],i=t[2],n=t[3],s=t[6],r=t[7],o=t[8],a=t[9],c=t[11],h=t[12],l=t[13],u=t[14];return t[1]=t[4],t[2]=o,t[3]=h,t[4]=e,t[6]=a,t[7]=l,t[8]=i,t[9]=s,t[11]=u,t[12]=n,t[13]=r,t[14]=c,this},t.kmMat4Multiply=function(t,e,i){var n=t.mat,s=e.mat,r=i.mat;i=s[0],e=s[1];var o=s[2],a=s[3],c=s[4],h=s[5],l=s[6],u=s[7],d=s[8],_=s[9],g=s[10],f=s[11],p=s[12],m=s[13],T=s[14],S=(s=s[15],r[0]),y=r[1],C=r[2],E=r[3],A=r[4],b=r[5],v=r[6],I=r[7],x=r[8],R=r[9],P=r[10],w=r[11],B=r[12],L=r[13],O=r[14];r=r[15];return n[0]=S*i+y*c+C*d+E*p,n[1]=S*e+y*h+C*_+E*m,n[2]=S*o+y*l+C*g+E*T,n[3]=S*a+y*u+C*f+E*s,n[4]=A*i+b*c+v*d+I*p,n[5]=A*e+b*h+v*_+I*m,n[6]=A*o+b*l+v*g+I*T,n[7]=A*a+b*u+v*f+I*s,n[8]=x*i+R*c+P*d+w*p,n[9]=x*e+R*h+P*_+w*m,n[10]=x*o+R*l+P*g+w*T,n[11]=x*a+R*u+P*f+w*s,n[12]=B*i+L*c+O*d+r*p,n[13]=B*e+L*h+O*_+r*m,n[14]=B*o+L*l+O*g+r*T,n[15]=B*a+L*u+O*f+r*s,t},e.multiply=function(t){var e=this.mat,i=t.mat;t=e[0];var n=e[1],s=e[2],r=e[3],o=e[4],a=e[5],c=e[6],h=e[7],l=e[8],u=e[9],d=e[10],_=e[11],g=e[12],f=e[13],p=e[14],m=e[15],T=i[0],S=i[1],y=i[2],C=i[3],E=i[4],A=i[5],b=i[6],v=i[7],I=i[8],x=i[9],R=i[10],P=i[11],w=i[12],B=i[13],L=i[14];i=i[15];return e[0]=T*t+S*o+y*l+C*g,e[1]=T*n+S*a+y*u+C*f,e[2]=T*s+S*c+y*d+C*p,e[3]=T*r+S*h+y*_+C*m,e[4]=E*t+A*o+b*l+v*g,e[5]=E*n+A*a+b*u+v*f,e[6]=E*s+A*c+b*d+v*p,e[7]=E*r+A*h+b*_+v*m,e[8]=I*t+x*o+R*l+P*g,e[9]=I*n+x*a+R*u+P*f,e[10]=I*s+x*c+R*d+P*p,e[11]=I*r+x*h+R*_+P*m,e[12]=w*t+B*o+L*l+i*g,e[13]=w*n+B*a+L*u+i*f,e[14]=w*s+B*c+L*d+i*p,e[15]=w*r+B*h+L*_+i*m,this},t.getMat4MultiplyValue=function(t,e){var i=t.mat,n=e.mat,s=new Float32Array(16);return s[0]=i[0]*n[0]+i[4]*n[1]+i[8]*n[2]+i[12]*n[3],s[1]=i[1]*n[0]+i[5]*n[1]+i[9]*n[2]+i[13]*n[3],s[2]=i[2]*n[0]+i[6]*n[1]+i[10]*n[2]+i[14]*n[3],s[3]=i[3]*n[0]+i[7]*n[1]+i[11]*n[2]+i[15]*n[3],s[4]=i[0]*n[4]+i[4]*n[5]+i[8]*n[6]+i[12]*n[7],s[5]=i[1]*n[4]+i[5]*n[5]+i[9]*n[6]+i[13]*n[7],s[6]=i[2]*n[4]+i[6]*n[5]+i[10]*n[6]+i[14]*n[7],s[7]=i[3]*n[4]+i[7]*n[5]+i[11]*n[6]+i[15]*n[7],s[8]=i[0]*n[8]+i[4]*n[9]+i[8]*n[10]+i[12]*n[11],s[9]=i[1]*n[8]+i[5]*n[9]+i[9]*n[10]+i[13]*n[11],s[10]=i[2]*n[8]+i[6]*n[9]+i[10]*n[10]+i[14]*n[11],s[11]=i[3]*n[8]+i[7]*n[9]+i[11]*n[10]+i[15]*n[11],s[12]=i[0]*n[12]+i[4]*n[13]+i[8]*n[14]+i[12]*n[15],s[13]=i[1]*n[12]+i[5]*n[13]+i[9]*n[14]+i[13]*n[15],s[14]=i[2]*n[12]+i[6]*n[13]+i[10]*n[14]+i[14]*n[15],s[15]=i[3]*n[12]+i[7]*n[13]+i[11]*n[14]+i[15]*n[15],s},t.kmMat4Assign=function(e,i){if(e===i)return t.log("cc.kmMat4Assign(): pOut equals pIn"),e;var n=e.mat,s=i.mat;return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],e},e.assignFrom=function(e){if(this===e)return t.log("cc.mat.Matrix4.assignFrom(): mat4 equals current matrix"),this;var i=this.mat;return e=e.mat,i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],this},e.equals=function(e){if(this===e)return t.log("cc.kmMat4AreEqual(): pMat1 and pMat2 are same object."),!0;var i=this.mat;e=e.mat;for(var n=t.math.EPSILON,s=0;16>s;s++)if(!(i[s]+n>e[s]&&i[s]-n<e[s]))return!1;return!0},t.math.Matrix4.createByRotationX=function(e,i){var n=(i=i||new t.math.Matrix4).mat;return n[0]=1,n[3]=n[2]=n[1]=0,n[4]=0,n[5]=Math.cos(e),n[6]=Math.sin(e),n[7]=0,n[8]=0,n[9]=-Math.sin(e),n[10]=Math.cos(e),n[11]=0,n[14]=n[13]=n[12]=0,n[15]=1,i},t.math.Matrix4.createByRotationY=function(e,i){var n=(i=i||new t.math.Matrix4).mat;return n[0]=Math.cos(e),n[1]=0,n[2]=-Math.sin(e),n[3]=0,n[7]=n[6]=n[4]=0,n[5]=1,n[8]=Math.sin(e),n[9]=0,n[10]=Math.cos(e),n[11]=0,n[14]=n[13]=n[12]=0,n[15]=1,i},t.math.Matrix4.createByRotationZ=function(e,i){var n=(i=i||new t.math.Matrix4).mat;return n[0]=Math.cos(e),n[1]=Math.sin(e),n[3]=n[2]=0,n[4]=-Math.sin(e),n[5]=Math.cos(e),n[7]=n[6]=0,n[11]=n[9]=n[8]=0,n[10]=1,n[14]=n[13]=n[12]=0,n[15]=1,i},t.math.Matrix4.createByPitchYawRoll=function(e,i,n,s){s=s||new t.math.Matrix4;var r=Math.cos(e);e=Math.sin(e);var o=Math.cos(i);i=Math.sin(i);var a=Math.cos(n);n=Math.sin(n);var c=e*i,h=r*i,l=s.mat;return l[0]=o*a,l[4]=o*n,l[8]=-i,l[1]=c*a-r*n,l[5]=c*n+r*a,l[9]=e*o,l[2]=h*a+e*n,l[6]=h*n-e*a,l[10]=r*o,l[3]=l[7]=l[11]=0,l[15]=1,s},t.math.Matrix4.createByQuaternion=function(e,i){var n=(i=i||new t.math.Matrix4).mat;return n[0]=1-2*(e.y*e.y+e.z*e.z),n[1]=2*(e.x*e.y+e.z*e.w),n[2]=2*(e.x*e.z-e.y*e.w),n[3]=0,n[4]=2*(e.x*e.y-e.z*e.w),n[5]=1-2*(e.x*e.x+e.z*e.z),n[6]=2*(e.z*e.y+e.x*e.w),n[7]=0,n[8]=2*(e.x*e.z+e.y*e.w),n[9]=2*(e.y*e.z-e.x*e.w),n[10]=1-2*(e.x*e.x+e.y*e.y),n[11]=0,n[14]=n[13]=n[12]=0,n[15]=1,i},t.math.Matrix4.createByRotationTranslation=function(e,i,n){var s=(n=n||new t.math.Matrix4).mat;return e=e.mat,s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=0,s[4]=e[3],s[5]=e[4],s[6]=e[5],s[7]=0,s[8]=e[6],s[9]=e[7],s[10]=e[8],s[11]=0,s[12]=i.x,s[13]=i.y,s[14]=i.z,s[15]=1,n},t.math.Matrix4.createByScale=function(e,i,n,s){var r=(s=s||new t.math.Matrix4).mat;return r[0]=e,r[5]=i,r[10]=n,r[15]=1,r[1]=r[2]=r[3]=r[4]=r[6]=r[7]=r[8]=r[9]=r[11]=r[12]=r[13]=r[14]=0,s},t.kmMat4Translation=function(t,e,i,n){return t.mat[0]=t.mat[5]=t.mat[10]=t.mat[15]=1,t.mat[1]=t.mat[2]=t.mat[3]=t.mat[4]=t.mat[6]=t.mat[7]=t.mat[8]=t.mat[9]=t.mat[11]=0,t.mat[12]=e,t.mat[13]=i,t.mat[14]=n,t},t.math.Matrix4.createByTranslation=function(e,i,n,s){return(s=s||new t.math.Matrix4).identity(),s.mat[12]=e,s.mat[13]=i,s.mat[14]=n,s},e.getUpVec3=function(){var e=this.mat;return new t.math.Vec3(e[4],e[5],e[6]).normalize()},e.getRightVec3=function(){var e=this.mat;return new t.math.Vec3(e[0],e[1],e[2]).normalize()},e.getForwardVec3=function(){var e=this.mat;return new t.math.Vec3(e[8],e[9],e[10]).normalize()},t.kmMat4PerspectiveProjection=function(e,i,n,s,r){var o=t.degreesToRadians(i/2);i=r-s;var a=Math.sin(o);return 0===i||0===a||0===n?null:(o=Math.cos(o)/a,e.identity(),e.mat[0]=o/n,e.mat[5]=o,e.mat[10]=-(r+s)/i,e.mat[11]=-1,e.mat[14]=-2*s*r/i,e.mat[15]=0,e)},t.math.Matrix4.createPerspectiveProjection=function(e,i,n,s){var r=t.degreesToRadians(e/2);e=s-n;var o=Math.sin(r);if(0===e||0===o||0===i)return null;r=Math.cos(r)/o;var a=(o=new t.math.Matrix4).mat;return o.identity(),a[0]=r/i,a[5]=r,a[10]=-(s+n)/e,a[11]=-1,a[14]=-2*n*s/e,a[15]=0,o},t.kmMat4OrthographicProjection=function(t,e,i,n,s,r,o){return t.identity(),t.mat[0]=2/(i-e),t.mat[5]=2/(s-n),t.mat[10]=-2/(o-r),t.mat[12]=-(i+e)/(i-e),t.mat[13]=-(s+n)/(s-n),t.mat[14]=-(o+r)/(o-r),t},t.math.Matrix4.createOrthographicProjection=function(e,i,n,s,r,o){var a=new t.math.Matrix4,c=a.mat;return a.identity(),c[0]=2/(i-e),c[5]=2/(s-n),c[10]=-2/(o-r),c[12]=-(i+e)/(i-e),c[13]=-(s+n)/(s-n),c[14]=-(o+r)/(o-r),a},t.kmMat4LookAt=function(e,i,n,s){n=new t.math.Vec3(n);var r=new t.math.Vec3(s);return n.subtract(i),n.normalize(),r.normalize(),(s=new t.math.Vec3(n)).cross(r),s.normalize(),(r=new t.math.Vec3(s)).cross(n),s.normalize(),e.identity(),e.mat[0]=s.x,e.mat[4]=s.y,e.mat[8]=s.z,e.mat[1]=r.x,e.mat[5]=r.y,e.mat[9]=r.z,e.mat[2]=-n.x,e.mat[6]=-n.y,e.mat[10]=-n.z,i=t.math.Matrix4.createByTranslation(-i.x,-i.y,-i.z),e.multiply(i),e};var n=new t.math.Matrix4;e.lookAt=function(e,i,s){i=new t.math.Vec3(i);var r=new t.math.Vec3(s);s=this.mat,i.subtract(e),i.normalize(),r.normalize();var o=new t.math.Vec3(i);return o.cross(r),o.normalize(),(r=new t.math.Vec3(o)).cross(i),o.normalize(),this.identity(),s[0]=o.x,s[4]=o.y,s[8]=o.z,s[1]=r.x,s[5]=r.y,s[9]=r.z,s[2]=-i.x,s[6]=-i.y,s[10]=-i.z,n=t.math.Matrix4.createByTranslation(-e.x,-e.y,-e.z,n),this.multiply(n),this},t.kmMat4RotationAxisAngle=function(e,i,n){var s=Math.cos(n);return n=Math.sin(n),(i=new t.math.Vec3(i)).normalize(),e.mat[0]=s+i.x*i.x*(1-s),e.mat[1]=i.z*n+i.y*i.x*(1-s),e.mat[2]=-i.y*n+i.z*i.x*(1-s),e.mat[3]=0,e.mat[4]=-i.z*n+i.x*i.y*(1-s),e.mat[5]=s+i.y*i.y*(1-s),e.mat[6]=i.x*n+i.z*i.y*(1-s),e.mat[7]=0,e.mat[8]=i.y*n+i.x*i.z*(1-s),e.mat[9]=-i.x*n+i.y*i.z*(1-s),e.mat[10]=s+i.z*i.z*(1-s),e.mat[11]=0,e.mat[12]=0,e.mat[13]=0,e.mat[14]=0,e.mat[15]=1,e},t.math.Matrix4.createByAxisAndAngle=function(e,i,n){n=n||new t.math.Matrix4;var s=this.mat,r=Math.cos(i);return i=Math.sin(i),(e=new t.math.Vec3(e)).normalize(),s[0]=r+e.x*e.x*(1-r),s[1]=e.z*i+e.y*e.x*(1-r),s[2]=-e.y*i+e.z*e.x*(1-r),s[3]=0,s[4]=-e.z*i+e.x*e.y*(1-r),s[5]=r+e.y*e.y*(1-r),s[6]=e.x*i+e.z*e.y*(1-r),s[7]=0,s[8]=e.y*i+e.x*e.z*(1-r),s[9]=-e.x*i+e.y*e.z*(1-r),s[10]=r+e.z*e.z*(1-r),s[11]=0,s[12]=s[13]=s[14]=0,s[15]=1,n},e.extractRotation=function(){var e=new t.math.Matrix3,i=this.mat,n=e.mat;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[4],n[4]=i[5],n[5]=i[6],n[6]=i[8],n[7]=i[9],n[8]=i[10],e},e.extractPlane=function(e){var i=new t.math.Plane,n=this.mat;switch(e){case t.math.Plane.RIGHT:i.a=n[3]-n[0],i.b=n[7]-n[4],i.c=n[11]-n[8],i.d=n[15]-n[12];break;case t.math.Plane.LEFT:i.a=n[3]+n[0],i.b=n[7]+n[4],i.c=n[11]+n[8],i.d=n[15]+n[12];break;case t.math.Plane.BOTTOM:i.a=n[3]+n[1],i.b=n[7]+n[5],i.c=n[11]+n[9],i.d=n[15]+n[13];break;case t.math.Plane.TOP:i.a=n[3]-n[1],i.b=n[7]-n[5],i.c=n[11]-n[9],i.d=n[15]-n[13];break;case t.math.Plane.FAR:i.a=n[3]-n[2],i.b=n[7]-n[6],i.c=n[11]-n[10],i.d=n[15]-n[14];break;case t.math.Plane.NEAR:i.a=n[3]+n[2],i.b=n[7]+n[6],i.c=n[11]+n[10],i.d=n[15]+n[14];break;default:t.log("cc.math.Matrix4.extractPlane: Invalid plane index")}return e=Math.sqrt(i.a*i.a+i.b*i.b+i.c*i.c),i.a/=e,i.b/=e,i.c/=e,i.d/=e,i},e.toAxisAndAngle=function(){var e=this.extractRotation();return t.math.Quaternion.rotationMatrix(e).toAxisAndAngle()}}(cc),function(t){t.math.Plane=function(t,e,i,n){t&&void 0===e?(this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d):(this.a=t||0,this.b=e||0,this.c=i||0,this.d=n||0)},t.kmPlane=t.math.Plane;var e=t.math.Plane.prototype;t.math.Plane.LEFT=0,t.math.Plane.RIGHT=1,t.math.Plane.BOTTOM=2,t.math.Plane.TOP=3,t.math.Plane.NEAR=4,t.math.Plane.FAR=5,t.math.Plane.POINT_INFRONT_OF_PLANE=0,t.math.Plane.POINT_BEHIND_PLANE=1,t.math.Plane.POINT_ON_PLANE=2,e.dot=function(t){return this.a*t.x+this.b*t.y+this.c*t.z+this.d*t.w},e.dotCoord=function(t){return this.a*t.x+this.b*t.y+this.c*t.z+this.d},e.dotNormal=function(t){return this.a*t.x+this.b*t.y+this.c*t.z},t.math.Plane.fromPointNormal=function(e,i){return new t.math.Plane(i.x,i.y,i.z,-i.dot(e))},t.math.Plane.fromPoints=function(e,i,n){i=new t.math.Vec3(i),n=new t.math.Vec3(n);var s=new t.math.Plane;return i.subtract(e),n.subtract(e),i.cross(n),i.normalize(),s.a=i.x,s.b=i.y,s.c=i.z,s.d=i.scale(-1).dot(e),s},e.normalize=function(){var e=new t.math.Vec3(this.a,this.b,this.c),i=1/e.length();return e.normalize(),this.a=e.x,this.b=e.y,this.c=e.z,this.d*=i,this},e.classifyPoint=function(e){return.001<(e=this.a*e.x+this.b*e.y+this.c*e.z+this.d)?t.math.Plane.POINT_INFRONT_OF_PLANE:-.001>e?t.math.Plane.POINT_BEHIND_PLANE:t.math.Plane.POINT_ON_PLANE}}(cc),function(t){t.math.Quaternion=function(t,e,i,n){t&&void 0===e?(this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=n||0)},t.kmQuaternion=t.math.Quaternion;var e=t.math.Quaternion.prototype;e.conjugate=function(t){return this.x=-t.x,this.y=-t.y,this.z=-t.z,this.w=t.w,this},e.dot=function(t){return this.w*t.w+this.x*t.x+this.y*t.y+this.z*t.z},e.exponential=function(){return this},e.identity=function(){return this.z=this.y=this.x=0,this.w=1,this},e.inverse=function(){var e=this.length();return Math.abs(e)>t.math.EPSILON?(this.w=this.z=this.y=this.x=0,this):(this.conjugate(this).scale(1/e),this)},e.isIdentity=function(){return 0===this.x&&0===this.y&&0===this.z&&1===this.w},e.length=function(){return Math.sqrt(this.lengthSq())},e.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},e.multiply=function(t){var e=this.x,i=this.y,n=this.z,s=this.w;return this.w=s*t.w-e*t.x-i*t.y-n*t.z,this.x=s*t.x+e*t.w+i*t.z-n*t.y,this.y=s*t.y+i*t.w+n*t.x-e*t.z,this.z=s*t.z+n*t.w+e*t.y-i*t.x,this},e.normalize=function(){var e=this.length();if(Math.abs(e)<=t.math.EPSILON)throw Error("current quaternion is an invalid value");return this.scale(1/e),this},e.rotationAxis=function(t,e){var i=.5*e,n=Math.sin(i);return this.w=Math.cos(i),this.x=t.x*n,this.y=t.y*n,this.z=t.z*n,this},t.math.Quaternion.rotationMatrix=function(e){if(!e)return null;var i,n,s;i=[],n=e.mat,e=0,i[0]=n[0],i[1]=n[3],i[2]=n[6],i[4]=n[1],i[5]=n[4],i[6]=n[7],i[8]=n[2],i[9]=n[5],i[10]=n[8],i[15]=1;var r=i[0];return(e=r[0]+r[5]+r[10]+1)>t.math.EPSILON?(e=2*Math.sqrt(e),i=(r[9]-r[6])/e,n=(r[2]-r[8])/e,s=(r[4]-r[1])/e,e*=.25):r[0]>r[5]&&r[0]>r[10]?(i=.25*(e=2*Math.sqrt(1+r[0]-r[5]-r[10])),n=(r[4]+r[1])/e,s=(r[2]+r[8])/e,e=(r[9]-r[6])/e):r[5]>r[10]?(e=2*Math.sqrt(1+r[5]-r[0]-r[10]),i=(r[4]+r[1])/e,n=.25*e,s=(r[9]+r[6])/e,e=(r[2]-r[8])/e):(e=2*Math.sqrt(1+r[10]-r[0]-r[5]),i=(r[2]+r[8])/e,n=(r[9]+r[6])/e,s=.25*e,e=(r[4]-r[1])/e),new t.math.Quaternion(i,n,s,e)},t.math.Quaternion.rotationYawPitchRoll=function(e,i,n){var s,r,o,a,c;s=t.degreesToRadians(i)/2,r=t.degreesToRadians(e)/2,o=t.degreesToRadians(n)/2,n=Math.cos(s),e=Math.cos(r),i=Math.cos(o),s=Math.sin(s),a=e*i,c=(r=Math.sin(r))*(o=Math.sin(o));var h=new t.math.Quaternion;return h.w=n*a+s*c,h.x=s*a-n*c,h.y=n*r*i+s*e*o,h.z=n*e*o-s*r*i,h.normalize(),h},e.slerp=function(e,i){if(this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w)return this;var n=this.dot(e),s=Math.acos(n),r=Math.sqrt(1-t.math.square(n));n=Math.sin(i*s)/r,s=Math.sin((1-i)*s)/r,r=new t.math.Quaternion(e);return this.scale(s),r.scale(n),this.add(r),this},e.toAxisAndAngle=function(){var e,i,n=new t.math.Vec3;return e=Math.acos(this.w),(i=Math.sqrt(t.math.square(this.x)+t.math.square(this.y)+t.math.square(this.z)))>-t.math.EPSILON&&i<t.math.EPSILON||i<2*Math.PI+t.math.EPSILON&&i>2*Math.PI-t.math.EPSILON?(e=0,n.x=0,n.y=0,n.z=1):(e*=2,n.x=this.x/i,n.y=this.y/i,n.z=this.z/i,n.normalize()),{axis:n,angle:e}},e.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},e.assignFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},e.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},t.math.Quaternion.rotationBetweenVec3=function(e,i,n){var s=new t.math.Vec3(e),r=new t.math.Vec3(i);s.normalize(),r.normalize();var o=s.dot(r);return i=new t.math.Quaternion,1<=o?(i.identity(),i):(-.999999>o?Math.abs(n.lengthSq())<t.math.EPSILON?i.rotationAxis(n,Math.PI):((s=new t.math.Vec3(1,0,0)).cross(e),Math.abs(s.lengthSq())<t.math.EPSILON&&(s.fill(0,1,0),s.cross(e)),s.normalize(),i.rotationAxis(s,Math.PI)):(n=1/(e=Math.sqrt(2*(1+o))),s.cross(r),i.x=s.x*n,i.y=s.y*n,i.z=s.z*n,i.w=.5*e,i.normalize()),i)},e.multiplyVec3=function(e){var i=this.x,n=this.y,s=this.z,r=new t.math.Vec3(e),o=new t.math.Vec3(i,n,s);i=new t.math.Vec3(i,n,s);return o.cross(e),i.cross(o),o.scale(2*q.w),i.scale(2),r.add(o),r.add(i),r}}(cc),cc.math.AABB=function(t,e){this.min=t||new cc.math.Vec3,this.max=e||new cc.math.Vec3},cc.math.AABB.prototype.containsPoint=function(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z},cc.math.AABB.containsPoint=function(t,e){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y&&t.z>=e.min.z&&t.z<=e.max.z},cc.math.AABB.prototype.assignFrom=function(t){this.min.assignFrom(t.min),this.max.assignFrom(t.max)},cc.math.AABB.assign=function(t,e){return t.min.assignFrom(e.min),t.max.assignFrom(e.max),t},function(t){t.math.Matrix4Stack=function(t,e){this.top=t,this.stack=e||[],this.lastUpdated=0},t.km_mat4_stack=t.math.Matrix4Stack;var e=t.math.Matrix4Stack.prototype;e.initialize=function(){this.stack.length=0,this.top=null},t.km_mat4_stack_push=function(e,i){e.stack.push(e.top),e.top=new t.math.Matrix4(i)},t.km_mat4_stack_pop=function(t,e){t.top=t.stack.pop()},t.km_mat4_stack_release=function(t){t.stack=null,t.top=null},e.push=function(e){e=e||this.top,this.stack.push(this.top),this.top=new t.math.Matrix4(e)},e.pop=function(){this.top=this.stack.pop()},e.release=function(){this._matrixPool=this.top=this.stack=null},e._getFromPool=function(e){var i=this._matrixPool;return 0===i.length?new t.math.Matrix4(e):((i=i.pop()).assignFrom(e),i)},e._putInPool=function(t){this._matrixPool.push(t)}}(cc),function(t){t.KM_GL_MODELVIEW=5888,t.KM_GL_PROJECTION=5889,t.KM_GL_TEXTURE=5890,t.modelview_matrix_stack=new t.math.Matrix4Stack,t.projection_matrix_stack=new t.math.Matrix4Stack,t.texture_matrix_stack=new t.math.Matrix4Stack,t.current_stack=null,t.lazyInitialize=function(){var e=new t.math.Matrix4;t.modelview_matrix_stack.initialize(),t.projection_matrix_stack.initialize(),t.texture_matrix_stack.initialize(),t.current_stack=t.modelview_matrix_stack,t.initialized=!0,e.identity(),t.modelview_matrix_stack.push(e),t.projection_matrix_stack.push(e),t.texture_matrix_stack.push(e)},t.lazyInitialize(),t.kmGLFreeAll=function(){t.modelview_matrix_stack.release(),t.modelview_matrix_stack=null,t.projection_matrix_stack.release(),t.projection_matrix_stack=null,t.texture_matrix_stack.release(),t.texture_matrix_stack=null,t.initialized=!1,t.current_stack=null},t.kmGLPushMatrix=function(){t.current_stack.push(t.current_stack.top)},t.kmGLPushMatrixWitMat4=function(e){t.current_stack.stack.push(t.current_stack.top),e.assignFrom(t.current_stack.top),t.current_stack.top=e},t.kmGLPopMatrix=function(){t.current_stack.top=t.current_stack.stack.pop()},t.kmGLMatrixMode=function(e){switch(e){case t.KM_GL_MODELVIEW:t.current_stack=t.modelview_matrix_stack;break;case t.KM_GL_PROJECTION:t.current_stack=t.projection_matrix_stack;break;case t.KM_GL_TEXTURE:t.current_stack=t.texture_matrix_stack;break;default:throw Error("Invalid matrix mode specified")}t.current_stack.lastUpdated=t.director.getTotalFrames()},t.kmGLLoadIdentity=function(){t.current_stack.top.identity()},t.kmGLLoadMatrix=function(e){t.current_stack.top.assignFrom(e)},t.kmGLMultMatrix=function(e){t.current_stack.top.multiply(e)};var e=new t.math.Matrix4;t.kmGLTranslatef=function(i,n,s){i=t.math.Matrix4.createByTranslation(i,n,s,e),t.current_stack.top.multiply(i)};var i=new t.math.Vec3;t.kmGLRotatef=function(n,s,r,o){i.fill(s,r,o),n=t.math.Matrix4.createByAxisAndAngle(i,t.degreesToRadians(n),e),t.current_stack.top.multiply(n)},t.kmGLScalef=function(i,n,s){i=t.math.Matrix4.createByScale(i,n,s,e),t.current_stack.top.multiply(i)},t.kmGLGetMatrix=function(e,i){switch(e){case t.KM_GL_MODELVIEW:i.assignFrom(t.modelview_matrix_stack.top);break;case t.KM_GL_PROJECTION:i.assignFrom(t.projection_matrix_stack.top);break;case t.KM_GL_TEXTURE:i.assignFrom(t.texture_matrix_stack.top);break;default:throw Error("Invalid matrix mode specified")}}}(cc),cc.SHADER_POSITION_UCOLOR_FRAG="precision lowp float;\nvarying vec4 v_fragmentColor;\nvoid main()                              \n{ \n    gl_FragColor = v_fragmentColor;      \n}\n",cc.SHADER_POSITION_UCOLOR_VERT="attribute vec4 a_position;\nuniform    vec4 u_color;\nuniform float u_pointSize;\nvarying lowp vec4 v_fragmentColor; \nvoid main(void)   \n{\n    gl_Position = (CC_PMatrix * CC_MVMatrix) * a_position;  \n    gl_PointSize = u_pointSize;          \n    v_fragmentColor = u_color;           \n}",cc.SHADER_POSITION_COLOR_FRAG="precision lowp float; \nvarying vec4 v_fragmentColor; \nvoid main() \n{ \n     gl_FragColor = v_fragmentColor; \n} ",cc.SHADER_POSITION_COLOR_VERT="attribute vec4 a_position;\nattribute vec4 a_color;\nvarying lowp vec4 v_fragmentColor;\nvoid main()\n{\n    gl_Position = (CC_PMatrix * CC_MVMatrix) * a_position;  \n    v_fragmentColor = a_color;             \n}",cc.SHADER_SPRITE_POSITION_COLOR_VERT="attribute vec4 a_position;\nattribute vec4 a_color;\nvarying lowp vec4 v_fragmentColor;\nvoid main()\n{\n    gl_Position = CC_PMatrix * a_position;  \n    v_fragmentColor = a_color;             \n}",cc.SHADER_POSITION_COLOR_LENGTH_TEXTURE_FRAG="// #extension GL_OES_standard_derivatives : enable\nvarying mediump vec4 v_color;\nvarying mediump vec2 v_texcoord;\nvoid main()\t\n{ \n// #if defined GL_OES_standard_derivatives\t\n// gl_FragColor = v_color*smoothstep(0.0, length(fwidth(v_texcoord)), 1.0 - length(v_texcoord)); \n// #else\t\ngl_FragColor = v_color * step(0.0, 1.0 - length(v_texcoord)); \n// #endif \n}",cc.SHADER_POSITION_COLOR_LENGTH_TEXTURE_VERT="attribute mediump vec4 a_position; \nattribute mediump vec2 a_texcoord; \nattribute mediump vec4 a_color;\t\nvarying mediump vec4 v_color; \nvarying mediump vec2 v_texcoord;\t\nvoid main() \n{ \n     v_color = a_color;//vec4(a_color.rgb * a_color.a, a_color.a); \n     v_texcoord = a_texcoord; \n    gl_Position = (CC_PMatrix * CC_MVMatrix) * a_position;  \n}",cc.SHADER_POSITION_TEXTURE_FRAG="precision lowp float;   \nvarying vec2 v_texCoord;  \nvoid main() \n{  \n    gl_FragColor =  texture2D(CC_Texture0, v_texCoord);   \n}",cc.SHADER_POSITION_TEXTURE_VERT="attribute vec4 a_position; \nattribute vec2 a_texCoord; \nvarying mediump vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position = (CC_PMatrix * CC_MVMatrix) * a_position;  \n    v_texCoord = a_texCoord;               \n}",cc.SHADER_POSITION_TEXTURE_UCOLOR_FRAG="precision lowp float;  \nuniform vec4 u_color; \nvarying vec2 v_texCoord; \nvoid main() \n{  \n    gl_FragColor =  texture2D(CC_Texture0, v_texCoord) * u_color;    \n}",cc.SHADER_POSITION_TEXTURE_UCOLOR_VERT="attribute vec4 a_position;\nattribute vec2 a_texCoord; \nvarying mediump vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position = (CC_PMatrix * CC_MVMatrix) * a_position;  \n    v_texCoord = a_texCoord;                 \n}",cc.SHADER_POSITION_TEXTURE_A8COLOR_FRAG="precision lowp float;  \nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nvoid main() \n{ \n    gl_FragColor = vec4( v_fragmentColor.rgb,         \n        v_fragmentColor.a * texture2D(CC_Texture0, v_texCoord).a   \n    ); \n}",cc.SHADER_POSITION_TEXTURE_A8COLOR_VERT="attribute vec4 a_position; \nattribute vec2 a_texCoord; \nattribute vec4 a_color;  \nvarying lowp vec4 v_fragmentColor; \nvarying mediump vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position = (CC_PMatrix * CC_MVMatrix) * a_position;  \n    v_fragmentColor = a_color; \n    v_texCoord = a_texCoord; \n}",cc.SHADER_POSITION_TEXTURE_COLOR_FRAG="precision lowp float;\nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nvoid main() \n{ \n    gl_FragColor = v_fragmentColor * texture2D(CC_Texture0, v_texCoord); \n}",cc.SHADER_POSITION_TEXTURE_COLOR_VERT="attribute vec4 a_position; \nattribute vec2 a_texCoord; \nattribute vec4 a_color;  \nvarying lowp vec4 v_fragmentColor; \nvarying mediump vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position = (CC_PMatrix * CC_MVMatrix) * a_position;  \n    v_fragmentColor = a_color; \n    v_texCoord = a_texCoord; \n}",cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_VERT="attribute vec4 a_position; \nattribute vec2 a_texCoord; \nattribute vec4 a_color;  \nvarying lowp vec4 v_fragmentColor; \nvarying mediump vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position = CC_PMatrix * a_position;  \n    v_fragmentColor = a_color; \n    v_texCoord = a_texCoord; \n}",cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_GRAY_FRAG="precision lowp float;\nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nvoid main() \n{ \n    vec4 c = texture2D(CC_Texture0, v_texCoord); \n    gl_FragColor.xyz = vec3(0.2126*c.r + 0.7152*c.g + 0.0722*c.b); \n     gl_FragColor.w = c.w ; \n}",cc.SHADER_POSITION_TEXTURE_COLOR_ALPHATEST_FRAG="precision lowp float;   \nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord;   \nuniform float CC_alpha_value; \nvoid main() \n{  \n    vec4 texColor = texture2D(CC_Texture0, v_texCoord);  \n    if ( texColor.a <= CC_alpha_value )          \n        discard; \n    gl_FragColor = texColor * v_fragmentColor;  \n}",cc.SHADEREX_SWITCHMASK_FRAG="precision lowp float; \nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nuniform sampler2D u_texture;  \nuniform sampler2D   u_mask;   \nvoid main()  \n{  \n    vec4 texColor   = texture2D(u_texture, v_texCoord);  \n    vec4 maskColor  = texture2D(u_mask, v_texCoord); \n    vec4 finalColor = vec4(texColor.r, texColor.g, texColor.b, maskColor.a * texColor.a);        \n    gl_FragColor    = v_fragmentColor * finalColor; \n}",cc.shaderCache={TYPE_POSITION_TEXTURECOLOR:0,TYPE_POSITION_TEXTURECOLOR_ALPHATEST:1,TYPE_POSITION_COLOR:2,TYPE_POSITION_TEXTURE:3,TYPE_POSITION_TEXTURE_UCOLOR:4,TYPE_POSITION_TEXTURE_A8COLOR:5,TYPE_POSITION_UCOLOR:6,TYPE_POSITION_LENGTH_TEXTURECOLOR:7,TYPE_SPRITE_POSITION_TEXTURECOLOR:8,TYPE_SPRITE_POSITION_TEXTURECOLOR_ALPHATEST:9,TYPE_SPRITE_POSITION_COLOR:10,TYPE_SPRITE_POSITION_TEXTURECOLOR_GRAY:11,TYPE_MAX:11,_keyMap:[cc.SHADER_POSITION_TEXTURECOLOR,cc.SHADER_POSITION_TEXTURECOLORALPHATEST,cc.SHADER_POSITION_COLOR,cc.SHADER_POSITION_TEXTURE,cc.SHADER_POSITION_TEXTURE_UCOLOR,cc.SHADER_POSITION_TEXTUREA8COLOR,cc.SHADER_POSITION_UCOLOR,cc.SHADER_POSITION_LENGTHTEXTURECOLOR,cc.SHADER_SPRITE_POSITION_TEXTURECOLOR,cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST,cc.SHADER_SPRITE_POSITION_COLOR,cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY],_programs:{},_init:function(){return this.loadDefaultShaders(),!0},_loadDefaultShader:function(t,e){switch(e){case cc.SHADER_POSITION_TEXTURECOLOR:t.initWithVertexShaderByteArray(cc.SHADER_POSITION_TEXTURE_COLOR_VERT,cc.SHADER_POSITION_TEXTURE_COLOR_FRAG),t.addAttribute(cc.ATTRIBUTE_NAME_POSITION,cc.VERTEX_ATTRIB_POSITION),t.addAttribute(cc.ATTRIBUTE_NAME_COLOR,cc.VERTEX_ATTRIB_COLOR),t.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD,cc.VERTEX_ATTRIB_TEX_COORDS);break;case cc.SHADER_SPRITE_POSITION_TEXTURECOLOR:t.initWithVertexShaderByteArray(cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_VERT,cc.SHADER_POSITION_TEXTURE_COLOR_FRAG),t.addAttribute(cc.ATTRIBUTE_NAME_POSITION,cc.VERTEX_ATTRIB_POSITION),t.addAttribute(cc.ATTRIBUTE_NAME_COLOR,cc.VERTEX_ATTRIB_COLOR),t.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD,cc.VERTEX_ATTRIB_TEX_COORDS);break;case cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY:t.initWithVertexShaderByteArray(cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_VERT,cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_GRAY_FRAG),t.addAttribute(cc.ATTRIBUTE_NAME_POSITION,cc.VERTEX_ATTRIB_POSITION),t.addAttribute(cc.ATTRIBUTE_NAME_COLOR,cc.VERTEX_ATTRIB_COLOR),t.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD,cc.VERTEX_ATTRIB_TEX_COORDS);break;case cc.SHADER_POSITION_TEXTURECOLORALPHATEST:t.initWithVertexShaderByteArray(cc.SHADER_POSITION_TEXTURE_COLOR_VERT,cc.SHADER_POSITION_TEXTURE_COLOR_ALPHATEST_FRAG),t.addAttribute(cc.ATTRIBUTE_NAME_POSITION,cc.VERTEX_ATTRIB_POSITION),t.addAttribute(cc.ATTRIBUTE_NAME_COLOR,cc.VERTEX_ATTRIB_COLOR),t.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD,cc.VERTEX_ATTRIB_TEX_COORDS);break;case cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST:t.initWithVertexShaderByteArray(cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_VERT,cc.SHADER_POSITION_TEXTURE_COLOR_ALPHATEST_FRAG),t.addAttribute(cc.ATTRIBUTE_NAME_POSITION,cc.VERTEX_ATTRIB_POSITION),t.addAttribute(cc.ATTRIBUTE_NAME_COLOR,cc.VERTEX_ATTRIB_COLOR),t.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD,cc.VERTEX_ATTRIB_TEX_COORDS);break;case cc.SHADER_POSITION_COLOR:t.initWithVertexShaderByteArray(cc.SHADER_POSITION_COLOR_VERT,cc.SHADER_POSITION_COLOR_FRAG),t.addAttribute(cc.ATTRIBUTE_NAME_POSITION,cc.VERTEX_ATTRIB_POSITION),t.addAttribute(cc.ATTRIBUTE_NAME_COLOR,cc.VERTEX_ATTRIB_COLOR);break;case cc.SHADER_SPRITE_POSITION_COLOR:t.initWithVertexShaderByteArray(cc.SHADER_SPRITE_POSITION_COLOR_VERT,cc.SHADER_POSITION_COLOR_FRAG),t.addAttribute(cc.ATTRIBUTE_NAME_POSITION,cc.VERTEX_ATTRIB_POSITION),t.addAttribute(cc.ATTRIBUTE_NAME_COLOR,cc.VERTEX_ATTRIB_COLOR);break;case cc.SHADER_POSITION_TEXTURE:t.initWithVertexShaderByteArray(cc.SHADER_POSITION_TEXTURE_VERT,cc.SHADER_POSITION_TEXTURE_FRAG),t.addAttribute(cc.ATTRIBUTE_NAME_POSITION,cc.VERTEX_ATTRIB_POSITION),t.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD,cc.VERTEX_ATTRIB_TEX_COORDS);break;case cc.SHADER_POSITION_TEXTURE_UCOLOR:t.initWithVertexShaderByteArray(cc.SHADER_POSITION_TEXTURE_UCOLOR_VERT,cc.SHADER_POSITION_TEXTURE_UCOLOR_FRAG),t.addAttribute(cc.ATTRIBUTE_NAME_POSITION,cc.VERTEX_ATTRIB_POSITION),t.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD,cc.VERTEX_ATTRIB_TEX_COORDS);break;case cc.SHADER_POSITION_TEXTUREA8COLOR:t.initWithVertexShaderByteArray(cc.SHADER_POSITION_TEXTURE_A8COLOR_VERT,cc.SHADER_POSITION_TEXTURE_A8COLOR_FRAG),t.addAttribute(cc.ATTRIBUTE_NAME_POSITION,cc.VERTEX_ATTRIB_POSITION),t.addAttribute(cc.ATTRIBUTE_NAME_COLOR,cc.VERTEX_ATTRIB_COLOR),t.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD,cc.VERTEX_ATTRIB_TEX_COORDS);break;case cc.SHADER_POSITION_UCOLOR:t.initWithVertexShaderByteArray(cc.SHADER_POSITION_UCOLOR_VERT,cc.SHADER_POSITION_UCOLOR_FRAG),t.addAttribute("aVertex",cc.VERTEX_ATTRIB_POSITION);break;case cc.SHADER_POSITION_LENGTHTEXTURECOLOR:t.initWithVertexShaderByteArray(cc.SHADER_POSITION_COLOR_LENGTH_TEXTURE_VERT,cc.SHADER_POSITION_COLOR_LENGTH_TEXTURE_FRAG),t.addAttribute(cc.ATTRIBUTE_NAME_POSITION,cc.VERTEX_ATTRIB_POSITION),t.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD,cc.VERTEX_ATTRIB_TEX_COORDS),t.addAttribute(cc.ATTRIBUTE_NAME_COLOR,cc.VERTEX_ATTRIB_COLOR);break;default:return void cc.log("cocos2d: cc.shaderCache._loadDefaultShader, error shader type")}t.link(),t.updateUniforms()},loadDefaultShaders:function(){for(var t=0;t<this.TYPE_MAX;++t)this.programForKey(this._keyMap[t])},reloadDefaultShaders:function(){var t=this.programForKey(cc.SHADER_POSITION_TEXTURECOLOR);t.reset(),this._loadDefaultShader(t,cc.SHADER_POSITION_TEXTURECOLOR),(t=this.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR)).reset(),this._loadDefaultShader(t,cc.SHADER_SPRITE_POSITION_TEXTURECOLOR),(t=this.programForKey(cc.SHADER_POSITION_TEXTURECOLORALPHATEST)).reset(),this._loadDefaultShader(t,cc.SHADER_POSITION_TEXTURECOLORALPHATEST),(t=this.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST)).reset(),this._loadDefaultShader(t,cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST),(t=this.programForKey(cc.SHADER_POSITION_COLOR)).reset(),this._loadDefaultShader(t,cc.SHADER_POSITION_COLOR),(t=this.programForKey(cc.SHADER_POSITION_TEXTURE)).reset(),this._loadDefaultShader(t,cc.SHADER_POSITION_TEXTURE),(t=this.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_GRAY_FRAG)).reset(),this._loadDefaultShader(t,cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_GRAY_FRAG),(t=this.programForKey(cc.SHADER_POSITION_TEXTURE_UCOLOR)).reset(),this._loadDefaultShader(t,cc.SHADER_POSITION_TEXTURE_UCOLOR),(t=this.programForKey(cc.SHADER_POSITION_TEXTUREA8COLOR)).reset(),this._loadDefaultShader(t,cc.SHADER_POSITION_TEXTUREA8COLOR),(t=this.programForKey(cc.SHADER_POSITION_UCOLOR)).reset(),this._loadDefaultShader(t,cc.SHADER_POSITION_UCOLOR)},programForKey:function(t){if(!this._programs[t]){var e=new cc.GLProgram;this._loadDefaultShader(e,t),this._programs[t]=e}return this._programs[t]},getProgram:function(t){return this.programForKey(t)},addProgram:function(t,e){this._programs[e]=t}},cc.GLProgram=cc.Class.extend({_glContext:null,_programObj:null,_vertShader:null,_fragShader:null,_uniforms:null,_hashForUniforms:null,_usesTime:!1,_projectionUpdated:-1,_updateUniform:function(t){if(!t)return!1;var e,i=!1,n=this._hashForUniforms[t];if(Array.isArray(arguments[1]))e=arguments[1];else{e=Array(arguments.length-1);for(var s=1;s<arguments.length;s+=1)e[s-1]=arguments[s]}if(n&&n.length===e.length)for(s=0;s<e.length;s+=1)e[s]===n[s]&&"object"!=typeof e[s]||(n[s]=e[s],i=!0);else this._hashForUniforms[t]=[].concat(e),i=!0;return i},_description:function(){return"<CCGLProgram = "+this.toString()+" | Program = "+this._programObj.toString()+", VertexShader = "+this._vertShader.toString()+", FragmentShader = "+this._fragShader.toString()+">"},_compileShader:function(t,e,i){return!(!i||!t)&&(i=(cc.GLProgram._isHighpSupported()?"precision highp float;\n":"precision mediump float;\n")+"uniform mat4 CC_PMatrix;         \nuniform mat4 CC_MVMatrix;        \nuniform mat4 CC_MVPMatrix;       \nuniform vec4 CC_Time;            \nuniform vec4 CC_SinTime;         \nuniform vec4 CC_CosTime;         \nuniform vec4 CC_Random01;        \nuniform sampler2D CC_Texture0;   \n//CC INCLUDES END                \n"+i,this._glContext.shaderSource(t,i),this._glContext.compileShader(t),(i=this._glContext.getShaderParameter(t,this._glContext.COMPILE_STATUS))||(cc.log("cocos2d: ERROR: Failed to compile shader:\n"+this._glContext.getShaderSource(t)),e===this._glContext.VERTEX_SHADER?cc.log("cocos2d: \n"+this.vertexShaderLog()):cc.log("cocos2d: \n"+this.fragmentShaderLog())),!0===i)},ctor:function(t,e,i){this._uniforms={},this._hashForUniforms={},this._glContext=i||cc._renderContext,t&&e&&this.init(t,e)},destroyProgram:function(){this._hashForUniforms=this._uniforms=this._fragShader=this._vertShader=null,this._glContext.deleteProgram(this._programObj)},initWithVertexShaderByteArray:function(t,e){var i=this._glContext;return this._programObj=i.createProgram(),this._fragShader=this._vertShader=null,t&&(this._vertShader=i.createShader(i.VERTEX_SHADER),this._compileShader(this._vertShader,i.VERTEX_SHADER,t)||cc.log("cocos2d: ERROR: Failed to compile vertex shader")),e&&(this._fragShader=i.createShader(i.FRAGMENT_SHADER),this._compileShader(this._fragShader,i.FRAGMENT_SHADER,e)||cc.log("cocos2d: ERROR: Failed to compile fragment shader")),this._vertShader&&i.attachShader(this._programObj,this._vertShader),cc.checkGLErrorDebug(),this._fragShader&&i.attachShader(this._programObj,this._fragShader),0<Object.keys(this._hashForUniforms).length&&(this._hashForUniforms={}),cc.checkGLErrorDebug(),!0},initWithString:function(t,e){return this.initWithVertexShaderByteArray(t,e)},initWithVertexShaderFilename:function(t,e){var i=cc.loader.getRes(t);if(!i)throw Error("Please load the resource firset : "+t);var n=cc.loader.getRes(e);if(!n)throw Error("Please load the resource firset : "+e);return this.initWithVertexShaderByteArray(i,n)},init:function(t,e){return this.initWithVertexShaderFilename(t,e)},addAttribute:function(t,e){this._glContext.bindAttribLocation(this._programObj,e,t)},link:function(){return this._programObj?(this._glContext.linkProgram(this._programObj),this._vertShader&&this._glContext.deleteShader(this._vertShader),this._fragShader&&this._glContext.deleteShader(this._fragShader),this._fragShader=this._vertShader=null,!(cc.game.config[cc.game.CONFIG_KEY.debugMode]&&!this._glContext.getProgramParameter(this._programObj,this._glContext.LINK_STATUS))||(cc.log("cocos2d: ERROR: Failed to link program: "+this._glContext.getProgramInfoLog(this._programObj)),cc.glDeleteProgram(this._programObj),this._programObj=null,!1)):(cc.log("cc.GLProgram.link(): Cannot link invalid program"),!1)},use:function(){cc.glUseProgram(this._programObj)},updateUniforms:function(){this._addUniformLocation(cc.UNIFORM_PMATRIX_S),this._addUniformLocation(cc.UNIFORM_MVMATRIX_S),this._addUniformLocation(cc.UNIFORM_MVPMATRIX_S),this._addUniformLocation(cc.UNIFORM_TIME_S),this._addUniformLocation(cc.UNIFORM_SINTIME_S),this._addUniformLocation(cc.UNIFORM_COSTIME_S),this._addUniformLocation(cc.UNIFORM_RANDOM01_S),this._addUniformLocation(cc.UNIFORM_SAMPLER_S),this._usesTime=null!=this._uniforms[cc.UNIFORM_TIME_S]||null!=this._uniforms[cc.UNIFORM_SINTIME_S]||null!=this._uniforms[cc.UNIFORM_COSTIME_S],this.use(),this.setUniformLocationWith1i(this._uniforms[cc.UNIFORM_SAMPLER_S],0)},_addUniformLocation:function(t){var e=this._glContext.getUniformLocation(this._programObj,t);return e&&(e._name=t),this._uniforms[t]=e},getUniformLocationForName:function(t){if(!t)throw Error("cc.GLProgram.getUniformLocationForName(): uniform name should be non-null");if(!this._programObj)throw Error("cc.GLProgram.getUniformLocationForName(): Invalid operation. Cannot get uniform location when program is not initialized");return this._uniforms[t]||this._addUniformLocation(t)},getUniformMVPMatrix:function(){return this._uniforms[cc.UNIFORM_MVPMATRIX_S]},getUniformSampler:function(){return this._uniforms[cc.UNIFORM_SAMPLER_S]},setUniformLocationWith1i:function(t,e){var i="string"==typeof t,n=i?t:t&&t._name;n?this._updateUniform(n,e)&&(i&&(t=this.getUniformLocationForName(n)),this._glContext.uniform1i(t,e)):this._glContext.uniform1i(t,e)},setUniformLocationWith2i:function(t,e,i){var n="string"==typeof t,s=n?t:t&&t._name;s?this._updateUniform(s,e,i)&&(n&&(t=this.getUniformLocationForName(s)),this._glContext.uniform2i(t,e,i)):this._glContext.uniform2i(t,e,i)},setUniformLocationWith3i:function(t,e,i,n){var s="string"==typeof t,r=s?t:t&&t._name;r?this._updateUniform(r,e,i,n)&&(s&&(t=this.getUniformLocationForName(r)),this._glContext.uniform3i(t,e,i,n)):this._glContext.uniform3i(t,e,i,n)},setUniformLocationWith4i:function(t,e,i,n,s){var r="string"==typeof t,o=r?t:t&&t._name;o?this._updateUniform(o,e,i,n,s)&&(r&&(t=this.getUniformLocationForName(o)),this._glContext.uniform4i(t,e,i,n,s)):this._glContext.uniform4i(t,e,i,n,s)},setUniformLocationWith2iv:function(t,e){var i="string"==typeof t,n=i?t:t&&t._name;n?this._updateUniform(n,e)&&(i&&(t=this.getUniformLocationForName(n)),this._glContext.uniform2iv(t,e)):this._glContext.uniform2iv(t,e)},setUniformLocationWith3iv:function(t,e){var i="string"==typeof t,n=i?t:t&&t._name;n?this._updateUniform(n,e)&&(i&&(t=this.getUniformLocationForName(n)),this._glContext.uniform3iv(t,e)):this._glContext.uniform3iv(t,e)},setUniformLocationWith4iv:function(t,e){var i="string"==typeof t,n=i?t:t&&t._name;n?this._updateUniform(n,e)&&(i&&(t=this.getUniformLocationForName(n)),this._glContext.uniform4iv(t,e)):this._glContext.uniform4iv(t,e)},setUniformLocationI32:function(t,e){this.setUniformLocationWith1i(t,e)},setUniformLocationWith1f:function(t,e){var i="string"==typeof t,n=i?t:t&&t._name;n?this._updateUniform(n,e)&&(i&&(t=this.getUniformLocationForName(n)),this._glContext.uniform1f(t,e)):this._glContext.uniform1f(t,e)},setUniformLocationWith2f:function(t,e,i){var n="string"==typeof t,s=n?t:t&&t._name;s?this._updateUniform(s,e,i)&&(n&&(t=this.getUniformLocationForName(s)),this._glContext.uniform2f(t,e,i)):this._glContext.uniform2f(t,e,i)},setUniformLocationWith3f:function(t,e,i,n){var s="string"==typeof t,r=s?t:t&&t._name;r?this._updateUniform(r,e,i,n)&&(s&&(t=this.getUniformLocationForName(r)),this._glContext.uniform3f(t,e,i,n)):this._glContext.uniform3f(t,e,i,n)},setUniformLocationWith4f:function(t,e,i,n,s){var r="string"==typeof t,o=r?t:t&&t._name;o?this._updateUniform(o,e,i,n,s)&&(r&&(t=this.getUniformLocationForName(o)),this._glContext.uniform4f(t,e,i,n,s)):(this._glContext.uniform4f(t,e,i,n,s),cc.log("uniform4f",e,i,n,s))},setUniformLocationWith2fv:function(t,e){var i="string"==typeof t,n=i?t:t&&t._name;n?this._updateUniform(n,e)&&(i&&(t=this.getUniformLocationForName(n)),this._glContext.uniform2fv(t,e)):this._glContext.uniform2fv(t,e)},setUniformLocationWith3fv:function(t,e){var i="string"==typeof t,n=i?t:t&&t._name;n?this._updateUniform(n,e)&&(i&&(t=this.getUniformLocationForName(n)),this._glContext.uniform3fv(t,e)):this._glContext.uniform3fv(t,e)},setUniformLocationWith4fv:function(t,e){var i="string"==typeof t,n=i?t:t&&t._name;n?this._updateUniform(n,e)&&(i&&(t=this.getUniformLocationForName(n)),this._glContext.uniform4fv(t,e)):(this._glContext.uniform4fv(t,e),cc.log("uniform4fv",e))},setUniformLocationWithMatrix2fv:function(t,e){var i="string"==typeof t,n=i?t:t&&t._name;n?this._updateUniform(n,e)&&(i&&(t=this.getUniformLocationForName(n)),this._glContext.uniformMatrix2fv(t,!1,e)):this._glContext.uniformMatrix2fv(t,!1,e)},setUniformLocationWithMatrix3fv:function(t,e){var i="string"==typeof t,n=i?t:t&&t._name;n?this._updateUniform(n,e)&&(i&&(t=this.getUniformLocationForName(n)),this._glContext.uniformMatrix3fv(t,!1,e)):this._glContext.uniformMatrix3fv(t,!1,e)},setUniformLocationWithMatrix4fv:function(t,e){var i="string"==typeof t,n=i?t:t&&t._name;n?this._updateUniform(n,e)&&(i&&(t=this.getUniformLocationForName(n)),this._glContext.uniformMatrix4fv(t,!1,e)):this._glContext.uniformMatrix4fv(t,!1,e)},setUniformLocationF32:function(){if(!(2>arguments.length))switch(arguments.length){case 2:this.setUniformLocationWith1f(arguments[0],arguments[1]);break;case 3:this.setUniformLocationWith2f(arguments[0],arguments[1],arguments[2]);break;case 4:this.setUniformLocationWith3f(arguments[0],arguments[1],arguments[2],arguments[3]);break;case 5:this.setUniformLocationWith4f(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4])}},setUniformsForBuiltins:function(){var t=new cc.math.Matrix4,e=new cc.math.Matrix4,i=new cc.math.Matrix4;cc.kmGLGetMatrix(cc.KM_GL_PROJECTION,t),cc.kmGLGetMatrix(cc.KM_GL_MODELVIEW,e),cc.kmMat4Multiply(i,t,e),this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_PMATRIX_S],t.mat,1),this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_MVMATRIX_S],e.mat,1),this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_MVPMATRIX_S],i.mat,1),this._usesTime&&(t=(t=cc.director).getTotalFrames()*t.getAnimationInterval(),this.setUniformLocationWith4f(this._uniforms[cc.UNIFORM_TIME_S],t/10,t,2*t,4*t),this.setUniformLocationWith4f(this._uniforms[cc.UNIFORM_SINTIME_S],t/8,t/4,t/2,Math.sin(t)),this.setUniformLocationWith4f(this._uniforms[cc.UNIFORM_COSTIME_S],t/8,t/4,t/2,Math.cos(t))),-1!==this._uniforms[cc.UNIFORM_RANDOM01_S]&&this.setUniformLocationWith4f(this._uniforms[cc.UNIFORM_RANDOM01_S],Math.random(),Math.random(),Math.random(),Math.random())},_setUniformsForBuiltinsForRenderer:function(t){if(t&&t._renderCmd){var e=new cc.math.Matrix4,i=new cc.math.Matrix4;cc.kmGLGetMatrix(cc.KM_GL_PROJECTION,e),cc.kmMat4Multiply(i,e,t._renderCmd._stackMatrix),this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_PMATRIX_S],e.mat,1),this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_MVMATRIX_S],t._renderCmd._stackMatrix.mat,1),this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_MVPMATRIX_S],i.mat,1),this._usesTime&&(t=(t=cc.director).getTotalFrames()*t.getAnimationInterval(),this.setUniformLocationWith4f(this._uniforms[cc.UNIFORM_TIME_S],t/10,t,2*t,4*t),this.setUniformLocationWith4f(this._uniforms[cc.UNIFORM_SINTIME_S],t/8,t/4,t/2,Math.sin(t)),this.setUniformLocationWith4f(this._uniforms[cc.UNIFORM_COSTIME_S],t/8,t/4,t/2,Math.cos(t))),-1!==this._uniforms[cc.UNIFORM_RANDOM01_S]&&this.setUniformLocationWith4f(this._uniforms[cc.UNIFORM_RANDOM01_S],Math.random(),Math.random(),Math.random(),Math.random())}},setUniformForModelViewProjectionMatrix:function(){this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_MVPMATRIX_S],cc.getMat4MultiplyValue(cc.projection_matrix_stack.top,cc.modelview_matrix_stack.top))},setUniformForModelViewProjectionMatrixWithMat4:function(t){cc.kmMat4Multiply(t,cc.projection_matrix_stack.top,cc.modelview_matrix_stack.top),this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_MVPMATRIX_S],t.mat)},setUniformForModelViewAndProjectionMatrixWithMat4:function(){this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_MVMATRIX_S],cc.modelview_matrix_stack.top.mat),this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_PMATRIX_S],cc.projection_matrix_stack.top.mat)},_setUniformForMVPMatrixWithMat4:function(t){if(!t)throw Error("modelView matrix is undefined.");this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_MVMATRIX_S],t.mat),this.setUniformLocationWithMatrix4fv(this._uniforms[cc.UNIFORM_PMATRIX_S],cc.projection_matrix_stack.top.mat)},_updateProjectionUniform:function(){var t=cc.projection_matrix_stack;t.lastUpdated!==this._projectionUpdated&&(this._glContext.uniformMatrix4fv(this._uniforms[cc.UNIFORM_PMATRIX_S],!1,t.top.mat),this._projectionUpdated=t.lastUpdated)},vertexShaderLog:function(){return this._glContext.getShaderInfoLog(this._vertShader)},getVertexShaderLog:function(){return this._glContext.getShaderInfoLog(this._vertShader)},getFragmentShaderLog:function(){return this._glContext.getShaderInfoLog(this._vertShader)},fragmentShaderLog:function(){return this._glContext.getShaderInfoLog(this._fragShader)},programLog:function(){return this._glContext.getProgramInfoLog(this._programObj)},getProgramLog:function(){return this._glContext.getProgramInfoLog(this._programObj)},reset:function(){this._fragShader=this._vertShader=null,0<Object.keys(this._uniforms).length&&(this._uniforms={}),this._glContext.deleteProgram(this._programObj),this._programObj=null,0<Object.keys(this._hashForUniforms).length&&(this._hashForUniforms={})},getProgram:function(){return this._programObj},retain:function(){},release:function(){}}),cc.GLProgram.create=function(t,e){return new cc.GLProgram(t,e)},cc.GLProgram._highpSupported=null,cc.GLProgram._isHighpSupported=function(){var t=cc._renderContext;return t.getShaderPrecisionFormat&&null==cc.GLProgram._highpSupported&&(t=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),cc.GLProgram._highpSupported=0!==t.precision),cc.GLProgram._highpSupported},cc.setProgram=function(t,e){t.shaderProgram=e;var i=t.children;if(i)for(var n=0;n<i.length;n++)cc.setProgram(i[n],e)};var types={GL_FLOAT:0,GL_INT:1,GL_FLOAT_VEC2:2,GL_FLOAT_VEC3:3,GL_FLOAT_VEC4:4,GL_FLOAT_MAT4:5,GL_CALLBACK:6,GL_TEXTURE:7};cc.UniformValue=function(t,e){this._uniform=t,this._glprogram=e,this._value=null,this._type=-1},cc.UniformValue.prototype={setFloat:function(t){this._value=t,this._type=types.GL_FLOAT},setInt:function(t){this._value=t,this._type=types.GL_INT},setVec2:function(t,e){this._value=[t,e],this._type=types.GL_FLOAT_VEC2},setVec2v:function(t){this._value=t.slice(0),this._type=types.GL_FLOAT_VEC2},setVec3:function(t,e,i){this._value=[t,e,i],this._type=types.GL_FLOAT_VEC3},setVec3v:function(t){this._value=t.slice(0),this._type=types.GL_FLOAT_VEC3},setVec4:function(t,e,i,n){this._value=[t,e,i,n],this._type=types.GL_FLOAT_VEC4},setVec4v:function(t){this._value=t.slice(0),this._type=types.GL_FLOAT_VEC4},setMat4:function(t){this._value=t.slice(0),this._type=types.GL_FLOAT_MAT4},setCallback:function(t){this._value=t,this._type=types.GL_CALLBACK},setTexture:function(t,e){this._value=e,this._textureId=t,this._type=types.GL_TEXTURE},apply:function(){switch(this._type){case types.GL_INT:this._glprogram.setUniformLocationWith1i(this._uniform._location,this._value);break;case types.GL_FLOAT:this._glprogram.setUniformLocationWith1f(this._uniform._location,this._value);break;case types.GL_FLOAT_VEC2:this._glprogram.setUniformLocationWith2fv(this._uniform._location,this._value);break;case types.GL_FLOAT_VEC3:this._glprogram.setUniformLocationWith3fv(this._uniform._location,this._value);break;case types.GL_FLOAT_VEC4:this._glprogram.setUniformLocationWith4fv(this._uniform._location,this._value);break;case types.GL_FLOAT_MAT4:this._glprogram.setUniformLocationWithMatrix4fv(this._uniform._location,this._value);break;case types.GL_CALLBACK:this._value(this._glprogram,this._uniform);break;case types.GL_TEXTURE:this._glprogram.setUniformLocationWith1i(this._uniform._location,this._value),cc.glBindTexture2DN(this._value,this._textureId)}}},cc.GLProgramState=function(t){this._glprogram=t,this._uniforms={},this._boundTextureUnits={},this._textureUnitIndex=1;for(var e=t._glContext.getProgramParameter(t._programObj,t._glContext.ACTIVE_UNIFORMS),i=0;i<e;i+=1){var n=t._glContext.getActiveUniform(t._programObj,i);if(0!==n.name.indexOf("CC_")){n._location=t._glContext.getUniformLocation(t._programObj,n.name),n._location._name=n.name;var s=new cc.UniformValue(n,t);this._uniforms[n.name]=s}}},cc.GLProgramState.prototype={apply:function(t){for(var e in this._glprogram.use(),t&&this._glprogram._setUniformForMVPMatrixWithMat4(t),this._uniforms)this._uniforms[e].apply()},setGLProgram:function(t){this._glprogram=t},getGLProgram:function(){return this._glprogram},getUniformCount:function(){return this._uniforms.length},getUniformValue:function(t){return this._uniforms[t]},setUniformInt:function(t,e){var i=this.getUniformValue(t);i?i.setInt(e):cc.log("cocos2d: warning: Uniform not found: "+t)},setUniformFloat:function(t,e){var i=this.getUniformValue(t);i?i.setFloat(e):cc.log("cocos2d: warning: Uniform not found: "+t)},setUniformVec2:function(t,e,i){var n=this.getUniformValue(t);n?n.setVec2(e,i):cc.log("cocos2d: warning: Uniform not found: "+t)},setUniformVec2v:function(t,e){var i=this.getUniformValue(t);i?i.setVec2v(e):cc.log("cocos2d: warning: Uniform not found: "+t)},setUniformVec3:function(t,e,i,n){var s=this.getUniformValue(t);s?s.setVec3(e,i,n):cc.log("cocos2d: warning: Uniform not found: "+t)},setUniformVec3v:function(t,e){var i=this.getUniformValue(t);i?i.setVec3v(e):cc.log("cocos2d: warning: Uniform not found: "+t)},setUniformVec4:function(t,e,i,n,s){var r=this.getUniformValue(t);r?r.setVec4(e,i,n,s):cc.log("cocos2d: warning: Uniform not found: "+t)},setUniformVec4v:function(t,e){var i=this.getUniformValue(t);i?i.setVec4v(e):cc.log("cocos2d: warning: Uniform not found: "+t)},setUniformMat4:function(t,e){var i=this.getUniformValue(t);i?i.setMat4(e):cc.log("cocos2d: warning: Uniform not found: "+t)},setUniformCallback:function(t,e){var i=this.getUniformValue(t);i?i.setCallback(e):cc.log("cocos2d: warning: Uniform not found: "+t)},setUniformTexture:function(t,e){var i=this.getUniformValue(t);if(i){var n=this._boundTextureUnits[t];n?i.setTexture(e,n):(i.setTexture(e,this._textureUnitIndex),this._boundTextureUnits[t]=this._textureUnitIndex++)}}},cc.GLProgramState._cache={},cc.GLProgramState.getOrCreateWithGLProgram=function(t){var e=cc.GLProgramState._cache[t.__instanceId];return e||(e=new cc.GLProgramState(t),cc.GLProgramState._cache[t.__instanceId]=e),e},cc._currentProjectionMatrix=-1,cc.ENABLE_GL_STATE_CACHE&&(cc.MAX_ACTIVETEXTURE=16,cc._currentShaderProgram=-1,cc._currentBoundTexture=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],cc._blendingSource=-1,cc._blendingDest=-1,cc._GLServerState=0,cc.TEXTURE_ATLAS_USE_VAO&&(cc._uVAO=0)),cc.glInvalidateStateCache=function(){if(cc.kmGLFreeAll(),cc._currentProjectionMatrix=-1,cc.ENABLE_GL_STATE_CACHE){cc._currentShaderProgram=-1;for(var t=0;t<cc.MAX_ACTIVETEXTURE;t++)cc._currentBoundTexture[t]=-1;cc._blendingSource=-1,cc._blendingDest=-1,cc._GLServerState=0}},cc.glUseProgram=cc.ENABLE_GL_STATE_CACHE?function(t){t!==cc._currentShaderProgram&&(cc._currentShaderProgram=t,cc._renderContext.useProgram(t))}:function(t){cc._renderContext.useProgram(t)},cc.glDeleteProgram=function(t){cc.ENABLE_GL_STATE_CACHE&&t===cc._currentShaderProgram&&(cc._currentShaderProgram=-1),gl.deleteProgram(t)},cc.setBlending=function(t,e){var i=cc._renderContext;t===i.ONE&&e===i.ZERO?i.disable(i.BLEND):(i.enable(i.BLEND),cc._renderContext.blendFunc(t,e))},cc.glBlendFunc=cc.ENABLE_GL_STATE_CACHE?function(t,e){t===cc._blendingSource&&e===cc._blendingDest||(cc._blendingSource=t,cc._blendingDest=e,cc.setBlending(t,e))}:cc.setBlending,cc.glBlendFuncForParticle=function(t,e){if(t!==cc._blendingSource||e!==cc._blendingDest){cc._blendingSource=t,cc._blendingDest=e;var i=cc._renderContext;t===i.ONE&&e===i.ZERO?i.disable(i.BLEND):(i.enable(i.BLEND),i.blendFuncSeparate(i.SRC_ALPHA,e,t,e))}},cc.glBlendResetToCache=function(){var t=cc._renderContext;t.blendEquation(t.FUNC_ADD),cc.ENABLE_GL_STATE_CACHE?cc.setBlending(cc._blendingSource,cc._blendingDest):cc.setBlending(t.BLEND_SRC,t.BLEND_DST)},cc.setProjectionMatrixDirty=function(){cc._currentProjectionMatrix=-1},cc.glBindTexture2D=function(t){cc.glBindTexture2DN(0,t)},cc.glBindTexture2DN=cc.ENABLE_GL_STATE_CACHE?function(t,e){if(cc._currentBoundTexture[t]!==e){cc._currentBoundTexture[t]=e;var i=cc._renderContext;i.activeTexture(i.TEXTURE0+t),e?i.bindTexture(i.TEXTURE_2D,e._webTextureObj):i.bindTexture(i.TEXTURE_2D,null)}}:function(t,e){var i=cc._renderContext;i.activeTexture(i.TEXTURE0+t),e?i.bindTexture(i.TEXTURE_2D,e._webTextureObj):i.bindTexture(i.TEXTURE_2D,null)},cc.glDeleteTexture=function(t){cc.glDeleteTextureN(0,t)},cc.glDeleteTextureN=function(t,e){cc.ENABLE_GL_STATE_CACHE&&e===cc._currentBoundTexture[t]&&(cc._currentBoundTexture[t]=-1),cc._renderContext.deleteTexture(e._webTextureObj)},cc.glBindVAO=function(t){cc.TEXTURE_ATLAS_USE_VAO&&cc.ENABLE_GL_STATE_CACHE&&cc._uVAO!==t&&(cc._uVAO=t)},cc.glEnable=function(t){},cc.IMAGE_FORMAT_JPEG=0,cc.IMAGE_FORMAT_PNG=1,cc.IMAGE_FORMAT_RAWDATA=9,cc.NextPOT=function(t){return t-=1,t|=t>>1,t|=t>>2,t|=t>>4,1+((t|=t>>8)|t>>16)},cc.RenderTexture=cc.Node.extend({sprite:null,clearFlags:0,clearDepthVal:0,autoDraw:!1,_texture:null,_pixelFormat:0,clearStencilVal:0,_clearColor:null,_className:"RenderTexture",ctor:function(t,e,i,n){cc.Node.prototype.ctor.call(this),this._cascadeOpacityEnabled=this._cascadeColorEnabled=!0,this._pixelFormat=cc.Texture2D.PIXEL_FORMAT_RGBA8888,this._clearColor=new cc.Color(0,0,0,255),void 0!==t&&void 0!==e&&(i=i||cc.Texture2D.PIXEL_FORMAT_RGBA8888,this.initWithWidthAndHeight(t,e,i,n||0)),this.setAnchorPoint(0,0)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.RenderTexture.CanvasRenderCmd(this):new cc.RenderTexture.WebGLRenderCmd(this)},visit:function(t){var e=this._renderCmd;if(t=t?t._renderCmd:null,this._visible){var i=cc.renderer;e.visit(t),i.pushRenderCommand(e),this.sprite.visit(this),e._dirtyFlag=0}else e._propagateFlagsDown(t)},cleanup:function(){cc.Node.prototype.onExit.call(this),this._renderCmd.cleanup()},getSprite:function(){return this.sprite},setSprite:function(t){this.sprite=t},setVirtualViewport:function(t,e,i){this._renderCmd.setVirtualViewport(t,e,i)},initWithWidthAndHeight:function(t,e,i,n){return this._renderCmd.initWithWidthAndHeight(t,e,i,n)},begin:function(){cc.renderer._turnToCacheMode(this.__instanceId),this._renderCmd.begin()},beginWithClear:function(t,e,i,n,s,r){var o=cc._renderContext;s=s||o.COLOR_BUFFER_BIT,r=r||o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT,this._beginWithClear(t,e,i,n,s,r,o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT|o.STENCIL_BUFFER_BIT)},_beginWithClear:function(t,e,i,n,s,r,o){this.begin(),this._renderCmd._beginWithClear(t,e,i,n,s,r,o)},end:function(){this._renderCmd.end()},clear:function(t,e,i,n){this.beginWithClear(t,e,i,n),this.end()},clearRect:function(t,e,i,n){this._renderCmd.clearRect(t,e,i,n)},clearDepth:function(t){this._renderCmd.clearDepth(t)},clearStencil:function(t){this._renderCmd.clearStencil(t)},getClearFlags:function(){return this.clearFlags},setClearFlags:function(t){this.clearFlags=t},getClearColor:function(){return this._clearColor},setClearColor:function(t){var e=this._clearColor;e.r=t.r,e.g=t.g,e.b=t.b,e.a=t.a,this._renderCmd.updateClearColor(t)},getClearDepth:function(){return this.clearDepthVal},setClearDepth:function(t){this.clearDepthVal=t},getClearStencil:function(){return this.clearStencilVal},setClearStencil:function(t){this.clearStencilVal=t},isAutoDraw:function(){return this.autoDraw},setAutoDraw:function(t){this.autoDraw=t},saveToFile:function(t,e){cc.log("saveToFile isn't supported on Cocos2d-Html5")},newCCImage:function(t){return cc.log("saveToFile isn't supported on cocos2d-html5"),null},listenToBackground:function(t){},listenToForeground:function(t){}}),_p=cc.RenderTexture.prototype,cc.defineGetterSetter(_p,"clearColorVal",_p.getClearColor,_p.setClearColor),cc.RenderTexture.create=function(t,e,i,n){return new cc.RenderTexture(t,e,i,n)},function(){cc.RenderTexture.CanvasRenderCmd=function(t){this._rootCtor(t),this._needDraw=!1,this._clearColorStr="rgba(255,255,255,1)",this._cacheCanvas=document.createElement("canvas"),this._cacheContext=new cc.CanvasContextWrapper(this._cacheCanvas.getContext("2d"))};var t=cc.RenderTexture.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);t.constructor=cc.RenderTexture.CanvasRenderCmd,t.cleanup=function(){this._cacheCanvas=this._cacheContext=null},t.clearStencil=function(t){},t.setVirtualViewport=function(t,e,i){},t.updateClearColor=function(t){this._clearColorStr="rgba("+(0|t.r)+","+(0|t.g)+","+(0|t.b)+","+t.a/255+")"},t.initWithWidthAndHeight=function(t,e,i,n){i=this._node,n=this._cacheCanvas;var s=cc.contentScaleFactor();return n.width=0|t*s,n.height=0|e*s,(t=new cc.Texture2D).initWithElement(n),t.handleLoadedTexture(),(t=i.sprite=new cc.Sprite(t)).setBlendFunc(cc.ONE,cc.ONE_MINUS_SRC_ALPHA),i.autoDraw=!1,i.addChild(t),!0},t.begin=function(){},t._beginWithClear=function(t,e,i,n,s,r,o){t=t||0,e=e||0,i=i||0,n=isNaN(n)?255:n,s=this._cacheContext.getContext(),r=this._cacheCanvas,s.setTransform(1,0,0,1,0,0),this._cacheContext.setFillStyle("rgba("+(0|t)+","+(0|e)+","+(0|i)+","+n/255+")"),s.clearRect(0,0,r.width,r.height),s.fillRect(0,0,r.width,r.height)},t.end=function(){var t=this._node,e=cc.contentScaleFactor();cc.renderer._renderingToCacheCanvas(this._cacheContext,t.__instanceId,e,e),(t=t.sprite._renderCmd)._notifyRegionStatus&&t._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty)},t.clearRect=function(t,e,i,n){this._cacheContext.clearRect(t,e,i,-n)},t.clearDepth=function(t){cc.log("clearDepth isn't supported on Cocos2d-Html5")}}(),function(){cc.RenderTexture.WebGLRenderCmd=function(t){this._rootCtor(t),this._needDraw=!0,this._depthRenderBuffer=this._textureCopy=this._oldFBO=this._fBO=null,this._rtTextureRect=new cc.Rect,this._fullRect=new cc.Rect,this._fullViewport=new cc.Rect};var t=cc.RenderTexture.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);t.constructor=cc.RenderTexture.WebGLRenderCmd,t.setVirtualViewport=function(t,e,i){this._rtTextureRect.x=t.x,this._rtTextureRect.y=t.y,this._fullRect=e,this._fullViewport=i},t.needDraw=function(){return this._needDraw&&this._node.autoDraw},t.rendering=function(t){var e=t||cc._renderContext;if((t=this._node).autoDraw){t.begin();var i=t.clearFlags;if(i){var n=[0,0,0,0],s=0,r=0;i&e.COLOR_BUFFER_BIT&&(n=e.getParameter(e.COLOR_CLEAR_VALUE),e.clearColor(t._clearColor.r/255,t._clearColor.g/255,t._clearColor.b/255,t._clearColor.a/255)),i&e.DEPTH_BUFFER_BIT&&(s=e.getParameter(e.DEPTH_CLEAR_VALUE),e.clearDepth(t.clearDepthVal)),i&e.STENCIL_BUFFER_BIT&&(r=e.getParameter(e.STENCIL_CLEAR_VALUE),e.clearStencil(t.clearStencilVal)),e.clear(i),i&e.COLOR_BUFFER_BIT&&e.clearColor(n[0],n[1],n[2],n[3]),i&e.DEPTH_BUFFER_BIT&&e.clearDepth(s),i&e.STENCIL_BUFFER_BIT&&e.clearStencil(r)}for(t.sortAllChildren(),e=t._children,i=0;i<e.length;i++)(n=e[i])!==t.sprite&&n.visit(t.sprite);t.end()}},t.clearStencil=function(t){var e=cc._renderContext,i=e.getParameter(e.STENCIL_CLEAR_VALUE);e.clearStencil(t),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(i)},t.cleanup=function(){this._textureCopy=null;var t=cc._renderContext;t.deleteFramebuffer(this._fBO),this._depthRenderBuffer&&t.deleteRenderbuffer(this._depthRenderBuffer)},t.updateClearColor=function(t){},t.initWithWidthAndHeight=function(t,e,i,n){var s=this._node;i===cc.Texture2D.PIXEL_FORMAT_A8&&cc.log("cc.RenderTexture._initWithWidthAndHeightForWebGL() : only RGB and RGBA formats are valid for a render texture;");var r,o=cc._renderContext,a=cc.contentScaleFactor();this._fullRect=new cc.Rect(0,0,t,e),this._fullViewport=new cc.Rect(0,0,t,e),t=0|t*a,e=0|e*a,this._oldFBO=o.getParameter(o.FRAMEBUFFER_BINDING),cc.configuration.supportsNPOT()?(a=t,r=e):(a=cc.NextPOT(t),r=cc.NextPOT(e));for(var c=new Uint8Array(a*r*4),h=0;h<a*r*4;h++)c[h]=0;if(this._pixelFormat=i,h=s._texture=new cc.Texture2D,!s._texture)return!1;if(h.initWithData(c,s._pixelFormat,a,r,cc.size(t,e)),i=o.getParameter(o.RENDERBUFFER_BINDING),cc.configuration.checkForGLExtension("GL_QCOM")){if(this._textureCopy=new cc.Texture2D,!this._textureCopy)return!1;this._textureCopy.initWithData(c,s._pixelFormat,a,r,cc.size(t,e))}return this._fBO=o.createFramebuffer(),o.bindFramebuffer(o.FRAMEBUFFER,this._fBO),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,h._webTextureObj,0),0!==n&&(this._depthRenderBuffer=o.createRenderbuffer(),o.bindRenderbuffer(o.RENDERBUFFER,this._depthRenderBuffer),o.renderbufferStorage(o.RENDERBUFFER,n,a,r),n===o.DEPTH_STENCIL?o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,this._depthRenderBuffer):n===o.STENCIL_INDEX||n===o.STENCIL_INDEX8?o.framebufferRenderbuffer(o.FRAMEBUFFER,o.STENCIL_ATTACHMENT,o.RENDERBUFFER,this._depthRenderBuffer):n===o.DEPTH_COMPONENT16&&o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,this._depthRenderBuffer)),o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&cc.log("Could not attach texture to the framebuffer"),h.setAliasTexParameters(),(t=s.sprite=new cc.Sprite(h)).scaleY=-1,t.setBlendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.bindRenderbuffer(o.RENDERBUFFER,i),o.bindFramebuffer(o.FRAMEBUFFER,this._oldFBO),s.autoDraw=!1,s.addChild(t),!0},t.begin=function(){var t=this._node;cc.kmGLMatrixMode(cc.KM_GL_PROJECTION),cc.kmGLPushMatrix(),cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW),cc.kmGLPushMatrix();var e=cc._renderContext;(s=cc.director).setProjection(s.getProjection());var i=t._texture.getContentSizeInPixels(),n=cc.director.getWinSizeInPixels(),s=n.width/i.width;i=n.height/i.height,s=cc.math.Matrix4.createOrthographicProjection(-1/s,1/s,-1/i,1/i,-1,1);cc.kmGLMultMatrix(s),(s=new cc.Rect(0,0,0,0)).width=this._fullViewport.width,s.height=this._fullViewport.height,i=s.height/this._fullRect.height,s.x=s.width/this._fullRect.width*(this._fullRect.x-this._rtTextureRect.x),s.y=(this._fullRect.y-this._rtTextureRect.y)*i,e.viewport(s.x,s.y,s.width,s.height),this._oldFBO=e.getParameter(e.FRAMEBUFFER_BINDING),e.bindFramebuffer(e.FRAMEBUFFER,this._fBO),cc.configuration.checkForGLExtension("GL_QCOM")&&(e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._textureCopy._webTextureObj,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t._texture._webTextureObj,0))},t._beginWithClear=function(t,e,i,n,s,r,o){t/=255,e/=255,i/=255,n/=255;var a=cc._renderContext,c=[0,0,0,0],h=0,l=0;o&a.COLOR_BUFFER_BIT&&(c=a.getParameter(a.COLOR_CLEAR_VALUE),a.clearColor(t,e,i,n)),o&a.DEPTH_BUFFER_BIT&&(h=a.getParameter(a.DEPTH_CLEAR_VALUE),a.clearDepth(s)),o&a.STENCIL_BUFFER_BIT&&(l=a.getParameter(a.STENCIL_CLEAR_VALUE),a.clearStencil(r)),a.clear(o),o&a.COLOR_BUFFER_BIT&&a.clearColor(c[0],c[1],c[2],c[3]),o&a.DEPTH_BUFFER_BIT&&a.clearDepth(h),o&a.STENCIL_BUFFER_BIT&&a.clearStencil(l)},t.end=function(){cc.renderer._renderingToBuffer(this._node.__instanceId);var t=cc._renderContext,e=cc.director;t.bindFramebuffer(t.FRAMEBUFFER,this._oldFBO),e.setViewport(),cc.kmGLMatrixMode(cc.KM_GL_PROJECTION),cc.kmGLPopMatrix(),cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW),cc.kmGLPopMatrix()},t.clearRect=function(t,e,i,n){},t.clearDepth=function(t){var e=this._node;e.begin();var i=cc._renderContext,n=i.getParameter(i.DEPTH_CLEAR_VALUE);i.clearDepth(t),i.clear(i.DEPTH_BUFFER_BIT),i.clearDepth(n),e.end()}}(),cc.LabelBMFont=cc.SpriteBatchNode.extend({_opacityModifyRGB:!1,_string:"",_config:null,_fntFile:"",_initialString:"",_alignment:cc.TEXT_ALIGNMENT_CENTER,_width:-1,_lineBreakWithoutSpaces:!1,_imageOffset:null,_textureLoaded:!1,_className:"LabelBMFont",_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?new cc.LabelBMFont.WebGLRenderCmd(this):new cc.LabelBMFont.CanvasRenderCmd(this)},_setString:function(t,e){e?this._initialString=t:this._string=t;var i=this._children;if(i)for(var n=0;n<i.length;n++){var s=i[n];s&&s.setVisible(!1)}this._textureLoaded&&(this._string&&0<this._string.length&&this.createFontChars(),e&&this.updateLabel())},ctor:function(t,e,i,n,s){cc.SpriteBatchNode.prototype.ctor.call(this),this._imageOffset=cc.p(0,0),this._cascadeOpacityEnabled=this._cascadeColorEnabled=!0,this.initWithString(t,e,i,n,s)},textureLoaded:function(){return this._textureLoaded},addLoadedEventListener:function(t,e){this.addEventListener("load",t,e)},isOpacityModifyRGB:function(){return this._opacityModifyRGB},setOpacityModifyRGB:function(t){if(this._opacityModifyRGB=t,t=this._children)for(var e=0;e<t.length;e++){var i=t[e];i&&(i.opacityModifyRGB=this._opacityModifyRGB)}},_changeTextureColor:function(){this._renderCmd._changeTextureColor()},init:function(){return this.initWithString(null,null,null,null,null)},initWithString:function(t,e,i,n,s){var r;if(t=t||"",this._config&&cc.log("cc.LabelBMFont.initWithString(): re-init is no longer supported"),e){if(!(r=cc.loader.getRes(e))&&!(r=cc.FntFrameCache[e]||cc.FntFrameCache[cc.path.basename(e)]))return cc.log("cc.LabelBMFont.initWithString(): Impossible to create font. Please check file"),!1;this._config=r,this._fntFile=e,e=r.atlasName,(e=cc.spriteFrameCache.getSpriteFrame(e)||cc.spriteFrameCache.getSpriteFrame(cc.path.basename(e)))?(r=e.getTexture(),this._spriteFrame=e):r=cc.textureCache.addImage(r.atlasName),(this._textureLoaded=e=r.isLoaded())||r.addEventListener("load",(function(t){this._textureLoaded=!0,this.initWithTexture(t,this._initialString.length),this.setString(this._initialString,!0),this.dispatchEvent("load")}),this)}else r=new cc.Texture2D,e=new Image,r.initWithElement(e),this._textureLoaded=!1;return!!this.initWithTexture(r,t.length)&&(this._alignment=n||cc.TEXT_ALIGNMENT_LEFT,this._imageOffset=s||cc.p(0,0),this._width=void 0===i?-1:i,this._realOpacity=255,this._realColor=cc.color(255,255,255,255),this._contentSize.width=0,this._contentSize.height=0,this.setAnchorPoint(.5,.5),this.setString(t,!0),!0)},createFontChars:function(){var t,e=this._string,i=e?e.length:0,n=this._renderCmd,s=n._texture||this._texture,r=0,o=cc.size(0,0),a=0,c=1,h=this._config,l=h.kerningDict,u=h.commonHeight,d=h.fontDefDictionary;for(t=0;t<i-1;t++)10===e.charCodeAt(t)&&c++;var _,g=u*c,f=(c=-(u-u*c),-1);for(t=0;t<i;t++)if(0!==(u=e.charCodeAt(t)))if(10===u)r=0,c-=h.commonHeight;else{f=l[f<<16|65535&u]||0,(_=d[u])||(cc.log("cocos2d: LabelBMFont: character not found "+e[t]),_={rect:{x:0,y:0,width:0,height:0},xOffset:0,yOffset:0,xAdvance:0});var p=cc.rect(_.rect.x,_.rect.y,_.rect.width,_.rect.height);(p=cc.rectPixelsToPoints(p)).x+=this._imageOffset.x,p.y+=this._imageOffset.y;var m=!1;if(this._spriteFrame){var T=this._spriteFrame._rect;if(this._spriteFrame._rotated){m=!0;var S=p.x;p.x=p.y+T.x,p.y=S+T.y}else p.x+=T.x,p.y+=T.y}(T=this.getChildByTag(t))?n._updateCharTexture(T,p,u,m):((T=new cc.Sprite).initWithTexture(s,p,m),T._newTextureWhenChangeColor=!0,this.addChild(T,0,t)),T.opacityModifyRGB=this._opacityModifyRGB,n._updateCharColorAndOpacity(T),p=cc.p(r+_.xOffset+.5*_.rect.width+f,c+(h.commonHeight-_.yOffset)-.5*p.height*cc.contentScaleFactor()),T.setPosition(cc.pointPixelsToPoints(p)),r+=_.xAdvance+f,f=u,a<r&&(a=r)}o.width=_&&_.xAdvance<_.rect.width?a-_.xAdvance+_.rect.width:a,o.height=g,this.setContentSize(cc.sizePixelsToPoints(o))},updateString:function(t){var e=this._children;if(e)for(var i=0,n=e.length;i<n;i++){var s=e[i];s&&(s.visible=!1)}this._config&&this._string&&0<this._string.length&&this.createFontChars(),t||this.updateLabel()},getString:function(){return this._initialString},setString:function(t,e){void 0===e&&(e=!0),void 0!==(t=String(t))&&"string"==typeof t||(t+=""),this._initialString=t,this._setString(t,e)},_setStringForSetter:function(t){this.setString(t,!1)},setCString:function(t){this.setString(t,!0)},_getCharsWidth:function(t,e){if(0>=e)return 0;var i=this.getChildByTag(t),n=this.getChildByTag(t+e);return this._getLetterPosXLeft(n)-this._getLetterPosXLeft(i)},_checkWarp:function(t,e,i,n){for(var s=t[e],r=0,o=0;o<e;o++)r+=t[o].length;r=r+e-n;var a=this._getCharsWidth(r,t[e].length-1);if(a>i&&1<s.length){n=i/a*s.length|0;o=s.substr(n);for(var c,h=a-this._getCharsWidth(r+n,o.length-1),l=0,u=0;h>i&&100>u++;)n*=i/h,n|=0,o=s.substr(n),h=a-this._getCharsWidth(r+n,o.length-1);for(u=0;h<i&&100>u++;)o&&(l=(c=cc.LabelTTF._wordRex.exec(o))?c[0].length:1,c=o),this._lineBreakWithoutSpaces&&(l=0),n+=l,o=s.substr(n),h=a-this._getCharsWidth(r+n,o.length-1);0===(n-=l)&&(n=1,c=c.substr(1)),i=s.substr(0,n),cc.LabelTTF.wrapInspection&&cc.LabelTTF._symbolRex.test(c||o)&&(l=(r=cc.LabelTTF._lastWordRex.exec(i))?r[0].length:0,this._lineBreakWithoutSpaces&&(l=0),n-=l,c=s.substr(n),i=s.substr(0,n)),cc.LabelTTF._firsrEnglish.test(c)&&(r=cc.LabelTTF._lastEnglish.exec(i))&&i!==r[0]&&(l=r[0].length,this._lineBreakWithoutSpaces&&(l=0),n-=l,c=s.substr(n),i=s.substr(0,n)),t[e]=c||o,t.splice(e,0,i)}},updateLabel:function(){var t,e,i;if(this.string=this._initialString,0<this._width){var n=this.string.split("\n"),s="",r=0,o=0;for(t=0;t<n.length;t++)o=n.length,this._checkWarp(n,t,this._width*this._scaleX,r),o<n.length&&r++,0<t&&(s+="\n"),s+=n[t];s+=String.fromCharCode(0),this._setString(s,!1)}if(this._alignment!==cc.TEXT_ALIGNMENT_LEFT)for(n=t=0,s=this._string.length,r=[],o=0;o<s;o++)if(10===this._string[o].charCodeAt(0)||0===this._string[o].charCodeAt(0)){e=0;var a=r.length;if(0===a)n++;else if(!(0>(i=t+a-1+n))){var c=this.getChildByTag(i);if(null!=c){switch(e=c.getPositionX()+c._getWidth()/2,c=0,this._alignment){case cc.TEXT_ALIGNMENT_CENTER:c=this.width/2-e/2;break;case cc.TEXT_ALIGNMENT_RIGHT:c=this.width-e}if(0!==c)for(e=0;e<a;e++)0>(i=t+e+n)||(i=this.getChildByTag(i))&&(i.x+=c);t+=a,n++,r.length=0}}}else r.push(this._string[t])},setAlignment:function(t){this._alignment=t,this.updateLabel()},_getAlignment:function(){return this._alignment},setBoundingWidth:function(t){this._width=t,this.updateLabel()},_getBoundingWidth:function(){return this._width},setLineBreakWithoutSpace:function(t){this._lineBreakWithoutSpaces=t,this.updateLabel()},setScale:function(t,e){cc.Node.prototype.setScale.call(this,t,e),this.updateLabel()},setScaleX:function(t){cc.Node.prototype.setScaleX.call(this,t),this.updateLabel()},setScaleY:function(t){cc.Node.prototype.setScaleY.call(this,t),this.updateLabel()},setFntFile:function(t){if(null!=t&&t!==this._fntFile){var e=cc.loader.getRes(t);e?(this._fntFile=t,this._config=e,t=cc.textureCache.addImage(e.atlasName),(this._textureLoaded=e=t.isLoaded())?(this.setTexture(t),this._string&&0<this._string.length&&this.createFontChars()):t.addEventListener("load",(function(t){this._textureLoaded=!0,this.setTexture(t),this._string&&0<this._string.length&&this.createFontChars(),this._changeTextureColor(),this.updateLabel(),this.dispatchEvent("load")}),this)):cc.log("cc.LabelBMFont.setFntFile() : Impossible to create font. Please check file")}},getFntFile:function(){return this._fntFile},setTexture:function(t){this._texture=t,this._renderCmd.setTexture(t)},setAnchorPoint:function(t,e){cc.Node.prototype.setAnchorPoint.call(this,t,e),this.updateLabel()},_setAnchorX:function(t){cc.Node.prototype._setAnchorX.call(this,t),this.updateLabel()},_setAnchorY:function(t){cc.Node.prototype._setAnchorY.call(this,t),this.updateLabel()},_atlasNameFromFntFile:function(t){},_kerningAmountForFirst:function(t,e){var i=0;if(this._configuration.kerningDictionary){var n=this._configuration.kerningDictionary[(t<<16|65535&e).toString()];n&&(i=n.amount)}return i},_getLetterPosXLeft:function(t){return t.getPositionX()*this._scaleX-t._getWidth()*this._scaleX*t._getAnchorX()},_getLetterPosXRight:function(t){return t.getPositionX()*this._scaleX+t._getWidth()*this._scaleX*t._getAnchorX()},_isspace_unicode:function(t){return 9<=(t=t.charCodeAt(0))&&13>=t||32===t||133===t||160===t||5760===t||8192<=t&&8202>=t||8232===t||8233===t||8239===t||8287===t||12288===t},_utf8_trim_ws:function(t){var e=t.length;if(!(0>=e)&&(e-=1,this._isspace_unicode(t[e]))){for(var i=e-1;0<=i&&this._isspace_unicode(t[i]);--i)e=i;this._utf8_trim_from(t,e)}},_utf8_trim_from:function(t,e){var i=t.length;e>=i||0>e||t.splice(e,i)}}),function(){var t=cc.LabelBMFont.prototype;cc.EventHelper.prototype.apply(t),cc.defineGetterSetter(t,"string",t.getString,t._setStringForSetter),cc.defineGetterSetter(t,"boundingWidth",t._getBoundingWidth,t.setBoundingWidth),cc.defineGetterSetter(t,"textAlign",t._getAlignment,t.setAlignment),cc.defineGetterSetter(t,"texture",t.getTexture,t.setTexture)}(),cc.LabelBMFont.create=function(t,e,i,n,s){return new cc.LabelBMFont(t,e,i,n,s)},cc.FntFrameCache={};var _fntLoader={FNT_HEAD:/fntframes [^\n]*(\n|$)/gi,FNT_FRAME_NAME:/fntframe [^\n]*(\n|$)/gi,INFO_EXP:/info [^\n]*(\n|$)/gi,COMMON_EXP:/common [^\n]*(\n|$)/gi,PAGE_EXP:/page [^\n]*(\n|$)/gi,CHAR_EXP:/char [^\n]*(\n|$)/gi,KERNING_EXP:/kerning [^\n]*(\n|$)/gi,ITEM_EXP:/\w+=[^ \r\n]+/gi,INT_EXP:/^[\-]?\d+$/,_parseStrToObj:function(t){var e={};if(t=t.match(this.ITEM_EXP))for(var i=0,n=t.length;i<n;i++){var s,r=(s=t[i]).indexOf("="),o=s.substring(0,r);(s=s.substring(r+1)).match(this.INT_EXP)?s=parseInt(s):'"'===s[0]&&(s=s.substring(1,s.length-1)),e[o]=s}return e},_parseFntContent:function(t,e,i,n){var s=this._parseStrToObj(e.match(this.COMMON_EXP)[0]);if(t.commonHeight=s.lineHeight,cc._renderType===cc.game.RENDER_TYPE_WEBGL){var r=cc.configuration.getMaxTextureSize();(s.scaleW>r.width||s.scaleH>r.height)&&cc.log("cc.LabelBMFont._parseCommonArguments(): page can't be larger than supported")}for(1!==s.pages&&cc.log("cc.LabelBMFont._parseCommonArguments(): only supports 1 page"),0!==(s=this._parseStrToObj(e.match(this.PAGE_EXP)[0])).id&&cc.log("cc.LabelBMFont._parseImageFileName() : file could not be found"),t.atlasName=n?cc.path.join(cc.path.dirname(n.path)+s.file):cc.path.changeBasename(i,s.file),s=e.match(this.CHAR_EXP),r=t.fontDefDictionary={},i=0,n=s.length;i<n;i++){var o=this._parseStrToObj(s[i]);r[o.id]={rect:{x:o.x,y:o.y,width:o.width,height:o.height},xOffset:o.xoffset,yOffset:o.yoffset,xAdvance:o.xadvance}}if(s=t.kerningDict={},e=e.match(this.KERNING_EXP))for(i=0,n=e.length;i<n;i++)s[(r=this._parseStrToObj(e[i])).first<<16|65535&r.second]=r.amount;return t},parseFnt:function(t,e){var i={};if(s=t.match(this.FNT_HEAD)){var n=this._parseStrToObj(s[0]);if(n&&n.count)for(var s=(t=t.substr(s[0].length)).split("----"),r=0;r<n.count;++r){var o=s[r],a=o.match(this.FNT_FRAME_NAME);if(a){var c=this._parseStrToObj(a[0]);if(c&&c.name){i={};var h=cc.path.join(cc.path.dirname(e),c.name);cc.FntFrameCache[h]=this._parseFntContent(i,o.substr(a[0].length),e,{path:c.name})}}}}else i=this._parseFntContent(i,t,e);return i},load:function(t,e,i,n){var s=this;cc.loader.loadTxt(t,(function(t,i){if(t)return n(t);n(null,s.parseFnt(i,e))}))}};function setProgram(t,e){t.shaderProgram=e;var i=t.children;if(i)for(var n=0;n<i.length;n++)setProgram(i[n],e)}cc.loader.register(["fnt"],_fntLoader),function(){cc.LabelBMFont.CanvasRenderCmd=function(t){this._rootCtor(t)};var t=cc.LabelBMFont.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);t.constructor=cc.LabelBMFont.CanvasRenderCmd,t._updateCharTexture=function(t,e,i){32===i?t.setTextureRect(e,!1,cc.size(0,0)):(t.setTextureRect(e,!1),t.visible=!0)},t._updateCharColorAndOpacity=function(t){t._displayedColor=this._displayedColor,t._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty),t._displayedOpacity=this._displayedOpacity,t._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},t.setTexture=function(t){for(var e=this._node,i=e._children,n=this._displayedColor,s=0;s<i.length;s++){var r=i[s],o=r._renderCmd,a=o._displayedColor;(e._texture===o._texture||a.r===n.r&&a.g===n.g&&a.b===n.b)&&(r.texture=t)}e._texture=t},t._changeTextureColor=function(){var t=this._node,e=t._texture,i=e.getContentSize(),n=t._texture,s=n.getHtmlElementObj(),r=this._displayedColor,o=cc.rect(0,0,s.width,s.height);e&&0<i.width&&s&&(e=n._generateColorTexture(r.r,r.g,r.b,o),t.setTexture(e))},t._updateChildrenDisplayedOpacity=function(t){cc.Node.prototype.updateDisplayedOpacity.call(t,this._displayedOpacity)},t._updateChildrenDisplayedColor=function(t){cc.Node.prototype.updateDisplayedColor.call(t,this._displayedColor)}}(),function(){cc.LabelBMFont.WebGLRenderCmd=function(t){this._rootCtor(t)};var t=cc.LabelBMFont.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);t.constructor=cc.LabelBMFont.WebGLRenderCmd,t.setTexture=function(t){this._node.setOpacityModifyRGB(this._node._texture.hasPremultipliedAlpha())},t._updateCharTexture=function(t,e,i,n){t.setTextureRect(e,n),t.visible=!0},t._changeTextureColor=function(){},t._updateCharColorAndOpacity=function(){}}(),cc.LabelAtlas=cc.LabelBMFont.extend({_className:"LabelAtlas",ctor:function(t,e,i,n,s){cc.SpriteBatchNode.prototype.ctor.call(this),this._imageOffset=cc.p(0,0),this._cascadeOpacityEnabled=this._cascadeColorEnabled=!0,e&&cc.LabelAtlas.prototype.initWithString.call(this,t,e,i,n,s)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?new cc.LabelBMFont.WebGLRenderCmd(this):new cc.LabelBMFont.CanvasRenderCmd(this)},_createFntConfig:function(t,e,i,n){var s={};s.commonHeight=i;var r=s.fontDefDictionary={},o=t.pixelsWidth;t=t.pixelsHeight,n=n.charCodeAt(0);for(var a=0,c=i;c<=t;c+=i)for(var h=0;h<o;h+=e)r[n+a]={rect:{x:h,y:c-i,width:e,height:i},xOffset:0,yOffset:0,xAdvance:e},++a;return s.kerningDict={},s},initWithString:function(t,e,i,n,s){var r;if(this._string=this._initialString=t=t+""||"",void 0===i){if(s=cc.loader.getRes(e),1!==parseInt(s.version,10))return cc.log("cc.LabelAtlas.initWithString(): Unsupported version. Upgrade cocos2d version"),!1;r=cc.path.changeBasename(e,s.textureFilename),n=cc.contentScaleFactor(),i=parseInt(s.itemWidth,10)/n,n=parseInt(s.itemHeight,10)/n,s=String.fromCharCode(parseInt(s.firstChar,10))}else r=e,i=i||0,n=n||0,s=s||" ";if(e){this._fntFile="dummy_fnt_file:"+r,e=r;var o=cc.spriteFrameCache.getSpriteFrame(e)||cc.spriteFrameCache.getSpriteFrame(cc.path.basename(e));o?(e=o.getTexture(),this._spriteFrame=o):e=cc.textureCache.addImage(r),(i=this._createFntConfig(e,i,n,s)).atlasName=r,this._config=i,(this._textureLoaded=r=e.isLoaded())||e.addEventListener("load",(function(t){this._textureLoaded=!0,this.initWithTexture(t,this._initialString.length),this.setString(this._initialString,!0),this.dispatchEvent("load")}),this)}else e=new cc.Texture2D,r=new Image,e.initWithElement(r),this._textureLoaded=!1;return!!this.initWithTexture(e,t.length)&&(this._alignment=cc.TEXT_ALIGNMENT_LEFT,this._imageOffset=cc.p(0,0),this._width=-1,this._realOpacity=255,this._realColor=cc.color(255,255,255,255),this._contentSize.width=0,this._contentSize.height=0,this.setString(t,!0),!0)},setFntFile:function(){cc.warn("setFntFile doesn't support with LabelAtlas.")}}),cc.LabelAtlas.create=function(t,e,i,n,s){return new cc.LabelAtlas(t,e,i,n,s)},function(){cc.LabelAtlas.CanvasRenderCmd=function(t){cc.AtlasNode.CanvasRenderCmd.call(this,t),this._needDraw=!1};var t=cc.LabelAtlas.CanvasRenderCmd.prototype=Object.create(cc.AtlasNode.CanvasRenderCmd.prototype);t.constructor=cc.LabelAtlas.CanvasRenderCmd,t.setCascade=function(){var t=this._node;t._cascadeOpacityEnabled=!0,t._cascadeColorEnabled=!1},t.updateAtlasValues=function(){for(var t=this._node,e=t._string||"",i=e.length,n=this._textureToRender,s=t._itemWidth,r=t._itemHeight,o=0,a=-1;o<i;o++){var c=e.charCodeAt(o)-t._mapStartChar.charCodeAt(0),h=parseInt(c%t._itemsPerRow,10);c=parseInt(c/t._itemsPerRow,10);if(!(0>h||0>c||(h=cc.rect(h*s,c*r,s,r),c=n._contentSize,0>h.x||0>h.y||h.x+h.width>c.width||h.y+h.height>c.height))){a++;c=e.charCodeAt(o);var l=t.getChildByTag(o);l?32===c?(l.init(),l.setTextureRect(cc.rect(0,0,10,10),!1,cc.size(0,0))):(l.initWithTexture(n,h),l.visible=!0):(l=new cc.Sprite,32===c?(l.init(),l.setTextureRect(cc.rect(0,0,10,10),!1,cc.size(0,0))):l.initWithTexture(n,h),cc.Node.prototype.addChild.call(t,l,0,o)),l.setPosition(a*s+s/2,r/2)}}this.updateContentSize(o,a+1)},t.updateContentSize=function(t,e){var i=this._node,n=i._contentSize;t!==e&&t*i._itemWidth===n.width&&i._itemHeight===n.height&&i.setContentSize(e*i._itemWidth,i._itemHeight)},t.setString=function(t){if((t=this._node)._children)for(var e=(t=t._children).length,i=0;i<e;i++){var n=t[i];n&&!n._lateChild&&(n.visible=!1)}},t._addChild=function(){child._lateChild=!0}}(),function(){cc.LabelAtlas.WebGLRenderCmd=function(t){cc.AtlasNode.WebGLRenderCmd.call(this,t),this._needDraw=!0};var t=cc.LabelAtlas.WebGLRenderCmd.prototype=Object.create(cc.AtlasNode.WebGLRenderCmd.prototype);t.constructor=cc.LabelAtlas.WebGLRenderCmd,t._updateColor=function(){if(this._colorF32Array){var t=this._displayedColor,e=this._displayedOpacity/255;this._node._opacityModifyRGB?(this._colorF32Array[0]=t.r*e/255,this._colorF32Array[1]=t.g*e/255,this._colorF32Array[2]=t.b*e/255):(this._colorF32Array[0]=t.r/255,this._colorF32Array[1]=t.g/255,this._colorF32Array[2]=t.b/255),this._colorF32Array[3]=e}},t.setCascade=function(){var t=this._node;t._cascadeOpacityEnabled=!0,t._cascadeColorEnabled=!0},t.rendering=function(t){if(cc.AtlasNode.WebGLRenderCmd.prototype.rendering.call(this,t),cc.LABELATLAS_DEBUG_DRAW){t=(e=this._node).getContentSize();var e,i=(e=e.getBoundingBoxToWorld()).x,n=e.y;t.width=e.width,t.height=e.height,t=[cc.p(i,n),cc.p(i+t.width,n),cc.p(t.width+i,t.height+n),cc.p(i,n+t.height)],cc._drawingUtil.drawPoly(t,4,!0)}},t.updateAtlasValues=function(){var t=this._node,e=t._string,i=e.length,n=this._textureAtlas,s=(r=n.texture).pixelsWidth,r=r.pixelsHeight,o=t._itemWidth,a=t._itemHeight;t._ignoreContentScaleFactor||(o=t._itemWidth*cc.contentScaleFactor(),a=t._itemHeight*cc.contentScaleFactor()),i>n.getCapacity()&&cc.log("cc.LabelAtlas._updateAtlasValues(): Invalid String length");for(var c=n.quads,h=t._itemWidth,l=t._itemHeight,u=0,d=-1;u<i;u++){var _=e.charCodeAt(u)-t._mapStartChar.charCodeAt(0),g=_%t._itemsPerRow,f=0|_/t._itemsPerRow;if(!(0>g||0>f||g*h+h>s||f*l+l>r)){var p;d++,cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL?(_=(g=(2*g*o+1)/(2*s))+(2*o-2)/(2*s),p=(f=(2*f*a+1)/(2*r))+(2*a-2)/(2*r)):(_=(g=g*o/s)+o/s,p=(f=f*a/r)+a/r);var m=(y=c[u]).tl,T=y.tr,S=y.bl,y=y.br;m.texCoords.u=g,m.texCoords.v=f,T.texCoords.u=_,T.texCoords.v=f,S.texCoords.u=g,S.texCoords.v=p,y.texCoords.u=_,y.texCoords.v=p,S.vertices.x=d*h,S.vertices.y=0,S.vertices.z=0,y.vertices.x=d*h+h,y.vertices.y=0,y.vertices.z=0,m.vertices.x=d*h,m.vertices.y=t._itemHeight,m.vertices.z=0,T.vertices.x=d*h+h,T.vertices.y=t._itemHeight,T.vertices.z=0}}this._updateColor(),this.updateContentSize(u,d+1),0<i&&(n.dirty=!0,i>(t=n.totalQuads)&&n.increaseTotalQuadsWith(i-t))},t.updateContentSize=function(t,e){var i=this._node,n=i._contentSize;t!==e&&t*i._itemWidth===n.width&&i._itemHeight===n.height&&i.setContentSize(e*i._itemWidth,i._itemHeight)},t.setString=function(t){(t=t.length)>this._textureAtlas.totalQuads&&this._textureAtlas.resizeCapacity(t)},t._addChild=function(){}}(),cc.MotionStreak=cc.Node.extend({texture:null,fastMode:!1,startingPositionInitialized:!1,_blendFunc:null,_stroke:0,_fadeDelta:0,_minSeg:0,_maxPoints:0,_nuPoints:0,_previousNuPoints:0,_pointVertexes:null,_pointState:null,_vertices:null,_colorPointer:null,_texCoords:null,_verticesBuffer:null,_colorPointerBuffer:null,_texCoordsBuffer:null,_className:"MotionStreak",ctor:function(t,e,i,n,s){cc.Node.prototype.ctor.call(this),this._positionR=cc.p(0,0),this._blendFunc=new cc.BlendFunc(cc.SRC_ALPHA,cc.ONE_MINUS_SRC_ALPHA),this.startingPositionInitialized=this.fastMode=!1,this.texture=null,this._previousNuPoints=this._nuPoints=this._maxPoints=this._minSeg=this._fadeDelta=this._stroke=0,this._texCoordsBuffer=this._colorPointerBuffer=this._verticesBuffer=this._texCoords=this._colorPointer=this._vertices=this._pointState=this._pointVertexes=null,void 0!==s&&this.initWithFade(t,e,i,n,s)},getTexture:function(){return this.texture},setTexture:function(t){this.texture!==t&&(this.texture=t)},getBlendFunc:function(){return this._blendFunc},setBlendFunc:function(t,e){void 0===e?this._blendFunc=t:(this._blendFunc.src=t,this._blendFunc.dst=e)},getOpacity:function(){return cc.log("cc.MotionStreak.getOpacity has not been supported."),0},setOpacity:function(t){cc.log("cc.MotionStreak.setOpacity has not been supported.")},setOpacityModifyRGB:function(t){},isOpacityModifyRGB:function(){return!1},isFastMode:function(){return this.fastMode},setFastMode:function(t){this.fastMode=t},isStartingPositionInitialized:function(){return this.startingPositionInitialized},setStartingPositionInitialized:function(t){this.startingPositionInitialized=t},getStroke:function(){return this._stroke},setStroke:function(t){this._stroke=t},initWithFade:function(t,e,i,n,s){if(!s)throw Error("cc.MotionStreak.initWithFade(): Invalid filename or texture");return cc.isString(s)&&(s=cc.textureCache.addImage(s)),cc.Node.prototype.setPosition.call(this,cc.p(0,0)),this.anchorY=this.anchorX=0,this.ignoreAnchor=!0,this.startingPositionInitialized=!1,this.fastMode=!0,this._minSeg=-1===e?i/5:e,this._minSeg*=this._minSeg,this._stroke=i,this._fadeDelta=1/t,this._maxPoints=t=2+(0|60*t),this._nuPoints=0,this._pointState=new Float32Array(t),this._pointVertexes=new Float32Array(2*t),this._vertices=new Float32Array(4*t),this._texCoords=new Float32Array(4*t),this._colorPointer=new Uint8Array(8*t),this._verticesBuffer=gl.createBuffer(),this._texCoordsBuffer=gl.createBuffer(),this._colorPointerBuffer=gl.createBuffer(),this._blendFunc.src=gl.SRC_ALPHA,this._blendFunc.dst=gl.ONE_MINUS_SRC_ALPHA,this.texture=s,this.color=n,this.scheduleUpdate(),gl.bindBuffer(gl.ARRAY_BUFFER,this._verticesBuffer),gl.bufferData(gl.ARRAY_BUFFER,this._vertices,gl.DYNAMIC_DRAW),gl.bindBuffer(gl.ARRAY_BUFFER,this._texCoordsBuffer),gl.bufferData(gl.ARRAY_BUFFER,this._texCoords,gl.DYNAMIC_DRAW),gl.bindBuffer(gl.ARRAY_BUFFER,this._colorPointerBuffer),gl.bufferData(gl.ARRAY_BUFFER,this._colorPointer,gl.DYNAMIC_DRAW),!0},tintWithColor:function(t){this.color=t;for(var e=this._colorPointer,i=0,n=2*this._nuPoints;i<n;i++)e[4*i]=t.r,e[4*i+1]=t.g,e[4*i+2]=t.b},reset:function(){this._nuPoints=0},setPosition:function(t,e){this.startingPositionInitialized=!0,void 0===e?(this._positionR.x=t.x,this._positionR.y=t.y):(this._positionR.x=t,this._positionR.y=e)},getPositionX:function(){return this._positionR.x},setPositionX:function(t){this._positionR.x=t,this.startingPositionInitialized||(this.startingPositionInitialized=!0)},getPositionY:function(){return this._positionR.y},setPositionY:function(t){this._positionR.y=t,this.startingPositionInitialized||(this.startingPositionInitialized=!0)},update:function(t){if(this.startingPositionInitialized){this._renderCmd._updateDisplayColor(),t*=this._fadeDelta;var e,i,n,s,r=0,o=this._nuPoints,a=this._pointState,c=this._pointVertexes,h=this._vertices,l=this._colorPointer;for(e=0;e<o;e++)a[e]-=t,0>=a[e]?r++:(i=e-r,0<r?(a[i]=a[e],c[2*i]=c[2*e],c[2*i+1]=c[2*e+1],s=2*e,h[2*(n=2*i)]=h[2*s],h[2*n+1]=h[2*s+1],h[2*(n+1)]=h[2*(s+1)],h[2*(n+1)+1]=h[2*(s+1)+1],s*=4,l[(n*=4)+0]=l[s+0],l[n+1]=l[s+1],l[n+2]=l[s+2],l[n+4]=l[s+4],l[n+5]=l[s+5],l[n+6]=l[s+6]):n=8*i,i=255*a[i],l[n+3]=i,l[n+7]=i);if(e=!0,((o-=r)>=this._maxPoints||0<o&&(t=cc.pDistanceSQ(cc.p(c[2*(o-1)],c[2*(o-1)+1]),this._positionR)<this._minSeg,n=1!==o&&cc.pDistanceSQ(cc.p(c[2*(o-2)],c[2*(o-2)+1]),this._positionR)<2*this._minSeg,t||n))&&(e=!1),e&&(c[2*o]=this._positionR.x,c[2*o+1]=this._positionR.y,a[o]=1,a=8*o,e=this.getDisplayedColor(),l[a]=e.r,l[a+1]=e.g,l[a+2]=e.b,l[a+4]=e.r,l[a+5]=e.g,l[a+6]=e.b,l[a+3]=255,l[a+7]=255,0<o&&this.fastMode&&(1<o?cc.vertexLineToPolygon(c,this._stroke,this._vertices,o,1):cc.vertexLineToPolygon(c,this._stroke,this._vertices,0,2)),o++),this.fastMode||cc.vertexLineToPolygon(c,this._stroke,this._vertices,0,o),o&&this._previousNuPoints!==o){for(c=1/o,l=this._texCoords,e=0;e<o;e++)l[4*e]=0,l[4*e+1]=c*e,l[2*(2*e+1)]=1,l[2*(2*e+1)+1]=c*e;this._previousNuPoints=o}this._nuPoints=o}},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?new cc.MotionStreak.WebGLRenderCmd(this):null}}),cc.MotionStreak.create=function(t,e,i,n,s){return new cc.MotionStreak(t,e,i,n,s)},cc.MotionStreak.WebGLRenderCmd=function(t){this._rootCtor(t),this._needDraw=!0,this._matrix=new cc.math.Matrix4,this._matrix.identity(),this._shaderProgram=cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURECOLOR)},cc.MotionStreak.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype),cc.MotionStreak.WebGLRenderCmd.prototype.constructor=cc.Sprite.WebGLRenderCmd,cc.MotionStreak.WebGLRenderCmd.prototype.rendering=function(t){var e=this._node;if(!(1>=e._nuPoints)&&e.texture&&e.texture.isLoaded()){t=t||cc._renderContext;var i=this._worldTransform;this._matrix.mat[0]=i.a,this._matrix.mat[4]=i.c,this._matrix.mat[12]=i.tx,this._matrix.mat[1]=i.b,this._matrix.mat[5]=i.d,this._matrix.mat[13]=i.ty,this._glProgramState.apply(this._matrix),cc.glBlendFunc(e._blendFunc.src,e._blendFunc.dst),cc.glBindTexture2D(e.texture),t.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),t.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR),t.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS),t.bindBuffer(t.ARRAY_BUFFER,e._verticesBuffer),t.bufferData(t.ARRAY_BUFFER,e._vertices,t.DYNAMIC_DRAW),t.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,e._texCoordsBuffer),t.bufferData(t.ARRAY_BUFFER,e._texCoords,t.DYNAMIC_DRAW),t.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,e._colorPointerBuffer),t.bufferData(t.ARRAY_BUFFER,e._colorPointer,t.DYNAMIC_DRAW),t.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR,4,t.UNSIGNED_BYTE,!0,0,0),t.drawArrays(t.TRIANGLE_STRIP,0,2*e._nuPoints),cc.g_NumberOfDraws++}},cc.NodeGrid=cc.Node.extend({grid:null,_target:null,_gridRect:null,ctor:function(t){cc.Node.prototype.ctor.call(this),void 0===t&&(t=cc.rect()),this._gridRect=t},getGrid:function(){return this.grid},setGrid:function(t){this.grid=t},setGridRect:function(t){this._gridRect=t},getGridRect:function(){return this._gridRect},setTarget:function(t){this._target=t},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?new cc.NodeGrid.WebGLRenderCmd(this):new cc.Node.CanvasRenderCmd(this)}}),_p=cc.NodeGrid.prototype,cc.defineGetterSetter(_p,"target",null,_p.setTarget),cc.NodeGrid.create=function(){return new cc.NodeGrid},function(){cc.NodeGrid.WebGLRenderCmd=function(t){this._rootCtor(t),this._needDraw=!1,this._gridBeginCommand=new cc.CustomRenderCmd(this,this.onGridBeginDraw),this._gridEndCommand=new cc.CustomRenderCmd(this,this.onGridEndDraw)};var t=cc.NodeGrid.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);t.constructor=cc.NodeGrid.WebGLRenderCmd,t.visit=function(t){var e=this._node;if(e._visible){(t=t||this.getParentRenderCmd())&&(this._curLevel=t._curLevel+1);var i=cc.current_stack;if(i.stack.push(i.top),this._syncStatus(t),i.top=this._stackMatrix,cc.renderer.pushRenderCommand(this._gridBeginCommand),e._target&&e._target.visit(),(t=e._children)&&0<t.length){var n=t.length;for(e.sortAllChildren(),e=0;e<n;e++){var s=t[e];s&&s.visit()}}cc.renderer.pushRenderCommand(this._gridEndCommand),this._dirtyFlag=0,i.top=i.stack.pop()}},t.onGridBeginDraw=function(){var t=this._node.grid;t&&t._active&&t.beforeDraw()},t.onGridEndDraw=function(){var t=this._node.grid;t&&t._active&&t.afterDraw(this._node)}}(),cc.DrawNode=cc.Node.extend({_buffer:null,_blendFunc:null,_lineWidth:1,_drawColor:null,getBlendFunc:function(){return this._blendFunc},setBlendFunc:function(t,e){void 0===e?(this._blendFunc.src=t.src,this._blendFunc.dst=t.dst):(this._blendFunc.src=t,this._blendFunc.dst=e)},setLineWidth:function(t){this._lineWidth=t},getLineWidth:function(){return this._lineWidth},setDrawColor:function(t){var e=this._drawColor;e.r=t.r,e.g=t.g,e.b=t.b,e.a=null==t.a?255:t.a},getDrawColor:function(){return cc.color(this._drawColor.r,this._drawColor.g,this._drawColor.b,this._drawColor.a)}}),cc.DrawNode.create=function(){return new cc.DrawNode},cc.DrawNode.TYPE_DOT=0,cc.DrawNode.TYPE_SEGMENT=1,cc.DrawNode.TYPE_POLY=2,cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,(function(){if(cc._renderType===cc.game.RENDER_TYPE_CANVAS)cc._DrawNodeElement=function(t,e,i,n,s,r,o,a,c){this.type=t,this.verts=e||null,this.fillColor=i||null,this.lineWidth=n||0,this.lineColor=s||null,this.lineCap=r||"butt",this.isClosePolygon=o||!1,this.isFill=a||!1,this.isStroke=c||!1},cc.extend(cc.DrawNode.prototype,{_className:"DrawNodeCanvas",ctor:function(){cc.Node.prototype.ctor.call(this);var t=this._renderCmd;t._buffer=this._buffer=[],t._drawColor=this._drawColor=cc.color(255,255,255,255),t._blendFunc=this._blendFunc=new cc.BlendFunc(cc.SRC_ALPHA,cc.ONE_MINUS_SRC_ALPHA),this.init(),this._localBB=new cc.Rect},setLocalBB:function(t,e,i,n){var s=this._localBB;void 0===e?(s.x=t.x,s.y=t.y,s.width=t.width,s.height=t.height):(s.x=t,s.y=e,s.width=i,s.height=n)},drawRect:function(t,e,i,n,s){n=null==n?this._lineWidth:n,null==(s=s||this.getDrawColor()).a&&(s.a=255),t=[t,cc.p(e.x,t.y),e,cc.p(t.x,e.y)],(e=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY)).verts=t,e.lineWidth=n,e.lineColor=s,e.isClosePolygon=!0,e.isStroke=!0,e.lineCap="butt",(e.fillColor=i)&&(null==i.a&&(i.a=255),e.isFill=!0),this._buffer.push(e)},drawCircle:function(t,e,i,n,s,r,o){r=r||this._lineWidth,null==(o=o||this.getDrawColor()).a&&(o.a=255);for(var a=2*Math.PI/n,c=[],h=0;h<=n;h++){var l=h*a,u=e*Math.cos(l+i)+t.x;l=e*Math.sin(l+i)+t.y;c.push(cc.p(u,l))}s&&c.push(cc.p(t.x,t.y)),(t=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY)).verts=c,t.lineWidth=r,t.lineColor=o,t.isClosePolygon=!0,t.isStroke=!0,this._buffer.push(t)},drawQuadBezier:function(t,e,i,n,s,r){s=s||this._lineWidth,null==(r=r||this.getDrawColor()).a&&(r.a=255);for(var o=[],a=0,c=0;c<n;c++){var h=Math.pow(1-a,2)*t.x+2*(1-a)*a*e.x+a*a*i.x,l=Math.pow(1-a,2)*t.y+2*(1-a)*a*e.y+a*a*i.y;o.push(cc.p(h,l)),a+=1/n}o.push(cc.p(i.x,i.y)),(t=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY)).verts=o,t.lineWidth=s,t.lineColor=r,t.isStroke=!0,t.lineCap="round",this._buffer.push(t)},drawCubicBezier:function(t,e,i,n,s,r,o){r=r||this._lineWidth,null==(o=o||this.getDrawColor()).a&&(o.a=255);for(var a=[],c=0,h=0;h<s;h++){var l=Math.pow(1-c,3)*t.x+3*Math.pow(1-c,2)*c*e.x+3*(1-c)*c*c*i.x+c*c*c*n.x,u=Math.pow(1-c,3)*t.y+3*Math.pow(1-c,2)*c*e.y+3*(1-c)*c*c*i.y+c*c*c*n.y;a.push(cc.p(l,u)),c+=1/s}a.push(cc.p(n.x,n.y)),(t=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY)).verts=a,t.lineWidth=r,t.lineColor=o,t.isStroke=!0,t.lineCap="round",this._buffer.push(t)},drawCatmullRom:function(t,e,i,n){this.drawCardinalSpline(t,.5,e,i,n)},drawCardinalSpline:function(t,e,i,n,s){n=n||this._lineWidth,null==(s=s||this.getDrawColor()).a&&(s.a=255);for(var r,o,a=[],c=1/t.length,h=0;h<i+1;h++)1===(o=h/i)?(r=t.length-1,o=1):o=(o-c*(r=0|o/c))/c,r=cc.cardinalSplineAt(cc.getControlPointAt(t,r-1),cc.getControlPointAt(t,r-0),cc.getControlPointAt(t,r+1),cc.getControlPointAt(t,r+2),e,o),a.push(r);(t=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY)).verts=a,t.lineWidth=n,t.lineColor=s,t.isStroke=!0,t.lineCap="round",this._buffer.push(t)},drawDot:function(t,e,i){null==(i=i||this.getDrawColor()).a&&(i.a=255);var n=new cc._DrawNodeElement(cc.DrawNode.TYPE_DOT);n.verts=[t],n.lineWidth=e,n.fillColor=i,this._buffer.push(n)},drawDots:function(t,e,i){if(t&&0!=t.length){null==(i=i||this.getDrawColor()).a&&(i.a=255);for(var n=0,s=t.length;n<s;n++)this.drawDot(t[n],e,i)}},drawSegment:function(t,e,i,n){i=i||this._lineWidth,null==(n=n||this.getDrawColor()).a&&(n.a=255);var s=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);s.verts=[t,e],s.lineWidth=2*i,s.lineColor=n,s.isStroke=!0,s.lineCap="round",this._buffer.push(s)},drawPoly_:function(t,e,i,n){i=null==i?this._lineWidth:i,null==(n=n||this.getDrawColor()).a&&(n.a=255);var s=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);s.verts=t,s.fillColor=e,s.lineWidth=i,s.lineColor=n,s.isClosePolygon=!0,s.isStroke=!0,s.lineCap="round",e&&(s.isFill=!0),this._buffer.push(s)},drawPoly:function(t,e,i,n){for(var s=[],r=0;r<t.length;r++)s.push(cc.p(t[r].x,t[r].y));return this.drawPoly_(s,e,i,n)},clear:function(){this._buffer.length=0},_createRenderCmd:function(){return new cc.DrawNode.CanvasRenderCmd(this)}});else if(cc._renderType===cc.game.RENDER_TYPE_WEBGL){var t=null,e=[],i=cc.p(),n=cc.p(),s=new Uint32Array(1),r=cc.p(),o=cc.p(),a=cc.p(),c=cc.p(),h=[];cc.extend(cc.DrawNode.prototype,{_bufferCapacity:0,_vertexCount:0,_offset:0,_occupiedSize:0,_f32Buffer:null,_ui32Buffer:null,_dirty:!1,_className:"DrawNodeWebGL",manualRelease:!1,ctor:function(e,i){cc.Node.prototype.ctor.call(this),t||(t=new GlobalVertexBuffer(cc._renderContext,20*cc.DRAWNODE_TOTAL_VERTICES)),this._renderCmd._shaderProgram=cc.shaderCache.programForKey(cc.SHADER_POSITION_LENGTHTEXTURECOLOR),this._blendFunc=new cc.BlendFunc(cc.SRC_ALPHA,cc.ONE_MINUS_SRC_ALPHA),this._drawColor=cc.color(255,255,255,255),this._bufferCapacity=e||64,this.manualRelease=i,this._dirty=!0},onEnter:function(){cc.Node.prototype.onEnter.call(this),this._occupiedSize<this._bufferCapacity&&this._ensureCapacity(this._bufferCapacity)},onExit:function(){this.manualRelease||this.release(),cc.Node.prototype.onExit.call(this)},release:function(){0<this._occupiedSize&&(this._vertexCount=0,t.freeBuffer(this._offset,20*this._occupiedSize),this._occupiedSize=0)},_ensureCapacity:function(e){var i=this._occupiedSize,n=this._offset;if(e>i||this._bufferCapacity>i){var s=Math.max(Math.min(i+i,200),e,this._bufferCapacity);if(0!==i&&(t.freeBuffer(n,20*i),this._occupiedSize=0),0<=(e=this._offset=t.requestBuffer(20*s))){if(this._occupiedSize=this._bufferCapacity=s,this._f32Buffer=new Float32Array(t.data,e,5*this._occupiedSize),this._ui32Buffer=new Uint32Array(t.data,e,5*this._occupiedSize),0!==i&&n!==e)for(i=n/4+5*i,e/=4,n/=4;n<i;e++,n++)t.dataArray[e]=t.dataArray[n];return!0}return cc.warn("Failed to allocate buffer for DrawNode: buffer for "+s+" vertices requested"),!1}return!0},drawRect:function(t,i,n,s,r){s=null==s?this._lineWidth:s,r=r||this._drawColor,e.length=0,e.push(t.x,t.y,i.x,t.y,i.x,i.y,t.x,i.y),null==n?this._drawSegments(e,s,r,!0):this.drawPoly(e,n,s,r),e.length=0},drawCircle:function(t,s,r,o,a,c,h){c=c||this._lineWidth,h=h||this._drawColor;var l,u=2*Math.PI/o;for(l=e.length=0;l<=o;l++){var d=l*u,_=s*Math.cos(d+r)+t.x;d=s*Math.sin(d+r)+t.y;e.push(_,d)}for(a&&e.push(t.x,t.y),c*=.5,l=0,t=e.length-2;l<t;l+=2)i.x=e[l],i.y=e[l+1],n.x=e[l+2],n.y=e[l+3],this.drawSegment(i,n,c,h);e.length=0},drawQuadBezier:function(t,i,n,s,r,o){r=r||this._lineWidth,o=o||this._drawColor;for(var a=0,c=e.length=0;c<s;c++){var h=Math.pow(1-a,2)*t.x+2*(1-a)*a*i.x+a*a*n.x,l=Math.pow(1-a,2)*t.y+2*(1-a)*a*i.y+a*a*n.y;e.push(h,l),a+=1/s}e.push(n.x,n.y),this._drawSegments(e,r,o,!1),e.length=0},drawCubicBezier:function(t,i,n,s,r,o,a){o=o||this._lineWidth,a=a||this._drawColor;for(var c=0,h=e.length=0;h<r;h++){var l=Math.pow(1-c,3)*t.x+3*Math.pow(1-c,2)*c*i.x+3*(1-c)*c*c*n.x+c*c*c*s.x,u=Math.pow(1-c,3)*t.y+3*Math.pow(1-c,2)*c*i.y+3*(1-c)*c*c*n.y+c*c*c*s.y;e.push(l,u),c+=1/r}e.push(s.x,s.y),this._drawSegments(e,o,a,!1),e.length=0},drawCatmullRom:function(t,e,i,n){this.drawCardinalSpline(t,.5,e,i,n)},drawCardinalSpline:function(t,s,r,o,a){o=o||this._lineWidth,a=a||this._drawColor;for(var c,h,l=1/t.length,u=e.length=0;u<r+1;u++)1===(h=u/r)?(c=t.length-1,h=1):h=(h-l*(c=0|h/l))/l,cc.cardinalSplineAt(cc.getControlPointAt(t,c-1),cc.getControlPointAt(t,c-0),cc.getControlPointAt(t,c+1),cc.getControlPointAt(t,c+2),s,h,i),e.push(i.x,i.y);for(o*=.5,t=0,s=e.length-2;t<s;t+=2)i.x=e[t],i.y=e[t+1],n.x=e[t+2],n.y=e[t+3],this.drawSegment(i,n,o,a);e.length=0},drawDots:function(t,e,i){if(t&&0!==t.length){i=i||this._drawColor;for(var n=0,s=t.length;n<s;n++)this.drawDot(t[n],e,i)}},_render:function(){var e=cc._renderContext;0>this._offset||0>=this._vertexCount||(this._dirty?(t.updateSubData(this._offset,this._f32Buffer),this._dirty=!1):e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),e.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR),e.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS),e.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR,4,e.UNSIGNED_BYTE,!0,20,8),e.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS,2,e.FLOAT,!1,20,12),e.drawArrays(e.TRIANGLES,this._offset/20,this._vertexCount),cc.incrementGLDraws(1))},appendVertexData:function(t,e,i,n,r){var o=this._f32Buffer,a=5*this._vertexCount;o[a]=t,o[a+1]=e,s[0]=i.a<<24|i.b<<16|i.g<<8|i.r,this._ui32Buffer[a+2]=s[0],o[a+3]=n,o[a+4]=r,this._vertexCount++},drawDot:function(t,e,i){null==(i=i||this._drawColor).a&&(i.a=255);var n=t.x-e,s=t.y-e,r=t.x+e;t=t.y+e,this._ensureCapacity(this._vertexCount+6)&&(this.appendVertexData(n,s,i,-1,-1),this.appendVertexData(n,t,i,-1,1),this.appendVertexData(r,t,i,1,1),this.appendVertexData(n,s,i,-1,-1),this.appendVertexData(r,t,i,1,1),this.appendVertexData(r,s,i,1,-1),this._dirty=!0)},drawSegment:function(t,e,i,n){if(null==(n=n||this.getDrawColor()).a&&(n.a=255),i=i||.5*this._lineWidth,this._ensureCapacity(this._vertexCount+18)){r.x=t.y-e.y,r.y=e.x-t.x,cc.pNormalizeIn(r),o.x=-r.y,o.y=r.x;var s=i;a.x=r.x*s,a.y=r.y*s,c.x=o.x*i,c.y=o.y*i,i=e.x+a.x-c.x;s=e.y+a.y-c.y;var h=r.x-o.x,l=r.y-o.y,u=e.x-a.x,d=e.y-a.y,_=-r.x,g=-r.y,f=e.x+a.x,p=e.y+a.y,m=r.x,T=r.y,S=t.x-a.x,y=t.y-a.y,C=t.x+a.x,E=t.y+a.y,A=r.x,b=r.y,v=t.x-a.x+c.x,I=t.y-a.y+c.y,x=o.x-r.x,R=o.y-r.y,P=t.x+a.x+c.x;t=t.y+a.y+c.y;var w=r.x+o.x,B=r.y+o.y;this.appendVertexData(e.x-a.x-c.x,e.y-a.y-c.y,n,-(r.x+o.x),-(r.y+o.y)),this.appendVertexData(i,s,n,h,l),this.appendVertexData(u,d,n,_,g),this.appendVertexData(f,p,n,m,T),this.appendVertexData(i,s,n,h,l),this.appendVertexData(u,d,n,_,g),this.appendVertexData(f,p,n,m,T),this.appendVertexData(S,y,n,_,g),this.appendVertexData(u,d,n,_,g),this.appendVertexData(f,p,n,m,T),this.appendVertexData(S,y,n,_,g),this.appendVertexData(C,E,n,A,b),this.appendVertexData(v,I,n,x,R),this.appendVertexData(S,y,n,_,g),this.appendVertexData(C,E,n,A,b),this.appendVertexData(v,I,n,x,R),this.appendVertexData(P,t,n,w,B),this.appendVertexData(C,E,n,A,b),this._dirty=!0}},drawPoly:function(t,i,n,s){if("object"==typeof t[0]){for(var o=e.length=0;o<t.length;o++)e.push(t[o].x,t[o].y);t=e}if(null==i)this._drawSegments(t,n,s,!0);else{null==i.a&&(i.a=255),null==s.a&&(s.a=255),n=null==n?this._lineWidth:n,n*=.5;var c,l,u,d,_,g,f,p=t.length;for(o=h.length=0;o<p;o+=2)c=t[(o-2+p)%p],l=t[(o-1+p)%p],u=t[o],d=t[o+1],_=t[(o+2)%p],g=t[(o+3)%p],r.x=l-d,r.y=u-c,a.x=d-g,a.y=_-u,cc.pNormalizeIn(r),cc.pNormalizeIn(a),d=r.x*a.x+r.y*a.y+1,f=(r.x+a.x)/d,d=(r.y+a.y)/d,h.push(f,d,a.x,a.y);if(p/=2,f=0<n,this._ensureCapacity(this._vertexCount+3*(3*p-2))){var m=0==f?.5:0;for(o=0;o<p-2;o++)c=t[0]-h[0]*m,l=t[1]-h[1]*m,u=t[2*o+2]-h[4*(o+1)]*m,d=t[2*o+3]-h[4*(o+1)+1]*m,_=t[2*o+4]-h[4*(o+2)]*m,g=t[2*o+5]-h[4*(o+2)+1]*m,this.appendVertexData(c,l,i,0,0),this.appendVertexData(u,d,i,0,0),this.appendVertexData(_,g,i,0,0);var T,S,y,C;for(n=f?n:.5,i=f?s:i,o=0;o<p;o++)s=(o+1)%p,c=t[2*o],l=t[2*o+1],u=t[2*s],d=t[2*s+1],r.x=h[4*o+2],r.y=h[4*o+3],a.x=f?-r.x:0,a.y=f?-r.y:0,T=h[4*o],S=h[4*o+1],y=h[4*s],C=h[4*s+1],s=c-T*n,_=l-S*n,g=u-y*n,m=d-C*n,c+=T*n,l+=S*n,u+=y*n,d+=C*n,this.appendVertexData(s,_,i,a.x,a.y),this.appendVertexData(g,m,i,a.x,a.y),this.appendVertexData(u,d,i,r.x,r.y),this.appendVertexData(s,_,i,a.x,a.y),this.appendVertexData(c,l,i,r.x,r.y),this.appendVertexData(u,d,i,r.x,r.y);h.length=0,e.length=0,this._dirty=!0}}},_drawSegments:function(t,e,i,n){if(!(0>=(e=null==e?this._lineWidth:e))){null==(i=i||this._drawColor).a&&(i.a=255),e*=.5;var s,o,c,l,u,d,_,g=t.length;for(_=h.length=0;_<g;_+=2)s=t[(_-2+g)%g],o=t[(_-1+g)%g],c=t[_],l=t[_+1],u=t[(_+2)%g],d=t[(_+3)%g],r.x=o-l,r.y=c-s,a.x=l-d,a.y=u-c,cc.pNormalizeIn(r),cc.pNormalizeIn(a),c=r.x*a.x+r.y*a.y+1,l=(r.x+a.x)/c,c=(r.y+a.y)/c,h.push(l,c,a.x,a.y);if(g/=2,this._ensureCapacity(this._vertexCount+3*(3*g-2))){var f,p,m,T,S,y;for(n=n?g:g-1,_=0;_<n;_++)u=(_+1)%g,s=t[2*_],o=t[2*_+1],c=t[2*u],l=t[2*u+1],r.x=h[4*_+2],r.y=h[4*_+3],f=h[4*_],p=h[4*_+1],m=h[4*u],T=h[4*u+1],u=s-f*e,d=o-p*e,S=c-m*e,y=l-T*e,s+=f*e,o+=p*e,c+=m*e,l+=T*e,this.appendVertexData(u,d,i,-r.x,-r.y),this.appendVertexData(S,y,i,-r.x,-r.y),this.appendVertexData(c,l,i,r.x,r.y),this.appendVertexData(u,d,i,-r.x,-r.y),this.appendVertexData(s,o,i,r.x,r.y),this.appendVertexData(c,l,i,r.x,r.y);h.length=0,this._dirty=!0}}},clear:function(){this.release(),this._dirty=!0},_createRenderCmd:function(){return new cc.DrawNode.WebGLRenderCmd(this)}})}})),cc.DrawNode.CanvasRenderCmd=function(t){this._rootCtor(t),this._needDraw=!0,this._blendFunc=this._drawColor=this._buffer=null},cc.DrawNode.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype),cc.DrawNode.CanvasRenderCmd.prototype.constructor=cc.DrawNode.CanvasRenderCmd,cc.DrawNode.CanvasRenderCmd.prototype.getLocalBB=function(){return this._node._localBB},cc.extend(cc.DrawNode.CanvasRenderCmd.prototype,{rendering:function(t,e,i){if((t=t||cc._renderContext).getContext(),0!=(n=this._displayedOpacity/255)){t.setTransform(this._worldTransform,e,i),t.setGlobalAlpha(n),this._blendFunc&&this._blendFunc.src===cc.SRC_ALPHA&&this._blendFunc.dst===cc.ONE&&t.setCompositeOperation("lighter");for(var n,s=0,r=(n=this._buffer).length;s<r;s++){var o=n[s];switch(o.type){case cc.DrawNode.TYPE_DOT:this._drawDot(t,o,e,i);break;case cc.DrawNode.TYPE_SEGMENT:this._drawSegment(t,o,e,i);break;case cc.DrawNode.TYPE_POLY:this._drawPoly(t,o,e,i)}}}},_drawDot:function(t,e){var i=e.fillColor,n=e.verts[0],s=e.lineWidth,r=t.getContext();t.setFillStyle("rgba("+(0|i.r)+","+(0|i.g)+","+(0|i.b)+","+i.a/255+")"),r.beginPath(),r.arc(n.x,-n.y,s,0,2*Math.PI,!1),r.closePath(),r.fill()},_drawSegment:function(t,e,i){var n=e.lineColor,s=e.verts[0],r=e.verts[1],o=e.lineWidth;e=e.lineCap;var a=t.getContext();t.setStrokeStyle("rgba("+(0|n.r)+","+(0|n.g)+","+(0|n.b)+","+n.a/255+")"),a.lineWidth=o*i,a.beginPath(),a.lineCap=e,a.moveTo(s.x,-s.y),a.lineTo(r.x,-r.y),a.stroke()},_drawPoly:function(t,e,i){var n=e.verts,s=e.lineCap;if(null!=n){var r=e.fillColor,o=e.lineWidth,a=e.lineColor,c=e.isClosePolygon,h=e.isFill;e=e.isStroke;var l=t.getContext(),u=n[0];for(l.lineCap=s,r&&t.setFillStyle("rgba("+(0|r.r)+","+(0|r.g)+","+(0|r.b)+","+r.a/255+")"),o&&(l.lineWidth=o*i),a&&t.setStrokeStyle("rgba("+(0|a.r)+","+(0|a.g)+","+(0|a.b)+","+a.a/255+")"),l.beginPath(),l.moveTo(u.x,-u.y),t=1,i=n.length;t<i;t++)l.lineTo(n[t].x,-n[t].y);c&&l.closePath(),h&&l.fill(),e&&l.stroke()}}}),cc.DrawNode.WebGLRenderCmd=function(t){this._rootCtor(t),this._needDraw=!0,this._matrix=new cc.math.Matrix4,this._matrix.identity()},cc.DrawNode.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype),cc.DrawNode.WebGLRenderCmd.prototype.constructor=cc.DrawNode.WebGLRenderCmd,cc.DrawNode.WebGLRenderCmd.prototype.rendering=function(t){if(0<(t=this._node)._vertexCount){var e=this._worldTransform;this._matrix.mat[0]=e.a,this._matrix.mat[4]=e.c,this._matrix.mat[12]=e.tx,this._matrix.mat[1]=e.b,this._matrix.mat[5]=e.d,this._matrix.mat[13]=e.ty,cc.glBlendFunc(t._blendFunc.src,t._blendFunc.dst),this._glProgramState.apply(this._matrix),t._render()}},cc.stencilBits=-1,cc.ClippingNode=cc.Node.extend({inverted:!1,_alphaThreshold:0,_stencil:null,_className:"ClippingNode",_originStencilProgram:null,ctor:function(t){t=t||null,cc.Node.prototype.ctor.call(this),(this._stencil=t)&&(this._originStencilProgram=t.getShaderProgram()),this.alphaThreshold=1,this.inverted=!1,this._renderCmd.initStencilBits()},onEnter:function(){cc.Node.prototype.onEnter.call(this),this._stencil&&this._stencil._performRecursive(cc.Node._stateCallbackType.onEnter)},onEnterTransitionDidFinish:function(){cc.Node.prototype.onEnterTransitionDidFinish.call(this),this._stencil&&this._stencil._performRecursive(cc.Node._stateCallbackType.onEnterTransitionDidFinish)},onExitTransitionDidStart:function(){this._stencil._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart),cc.Node.prototype.onExitTransitionDidStart.call(this)},onExit:function(){this._stencil._performRecursive(cc.Node._stateCallbackType.onExit),cc.Node.prototype.onExit.call(this)},visit:function(t){this._renderCmd.clippingVisit(t&&t._renderCmd)},_visitChildren:function(){this._reorderChildDirty&&this.sortAllChildren();for(var t,e=this._children,i=0,n=e.length;i<n;i++)(t=e[i])&&t._visible&&t.visit(this);this._renderCmd._dirtyFlag=0},getAlphaThreshold:function(){return this._alphaThreshold},setAlphaThreshold:function(t){1===t&&t!==this._alphaThreshold&&this._renderCmd.resetProgramByStencil(),this._alphaThreshold=t},isInverted:function(){return this.inverted},setInverted:function(t){this.inverted=t},getStencil:function(){return this._stencil},setStencil:function(t){this._stencil!==t&&(t&&(this._originStencilProgram=t.getShaderProgram()),this._renderCmd.setStencil(t))},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.ClippingNode.CanvasRenderCmd(this):new cc.ClippingNode.WebGLRenderCmd(this)}}),_p=cc.ClippingNode.prototype,cc.defineGetterSetter(_p,"stencil",_p.getStencil,_p.setStencil),cc.defineGetterSetter(_p,"alphaThreshold",_p.getAlphaThreshold,_p.setAlphaThreshold),cc.ClippingNode.create=function(t){return new cc.ClippingNode(t)},function(){cc.ClippingNode.CanvasRenderCmd=function(t){this._rootCtor(t),this._clipElemType=this._godhelpme=this._needDraw=!1,this._rendererSaveCmd=new cc.CustomRenderCmd(this,this._saveCmdCallback),this._rendererClipCmd=new cc.CustomRenderCmd(this,this._clipCmdCallback),this._rendererRestoreCmd=new cc.CustomRenderCmd(this,this._restoreCmdCallback)};var t=cc.ClippingNode.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);t.constructor=cc.ClippingNode.CanvasRenderCmd,t.resetProgramByStencil=function(){},t.initStencilBits=function(){},t.setStencil=function(t){if(null!=t)if(this._node._stencil=t,t instanceof cc.DrawNode){if(t._buffer)for(var e=0;e<t._buffer.length;e++)t._buffer[e].isFill=!1,t._buffer[e].isStroke=!1;t._renderCmd.rendering=function(t,e,i){},t._renderCmd._canUseDirtyRegion=!0,this._rendererSaveCmd._canUseDirtyRegion=!0,this._rendererClipCmd._canUseDirtyRegion=!0,this._rendererRestoreCmd._canUseDirtyRegion=!0}else t._parent=this._node},t._saveCmdCallback=function(t,e,i){var n=t||cc._renderContext;t=n.getContext(),this._clipElemType?(e=cc.ClippingNode.CanvasRenderCmd._getSharedCache(),i=t.canvas,e.width=i.width,e.height=i.height,e.getContext("2d").drawImage(i,0,0)):(n.save(),n.setTransform(this._worldTransform,e,i),this._node.inverted&&(t.beginPath(),t.rect(0,0,t.canvas.width,-t.canvas.height),t.clip()))},t._setStencilCompositionOperation=function(t){if(t){var e=this._node;if(t._renderCmd&&t._renderCmd._blendFuncStr&&(t._renderCmd._blendFuncStr=e.inverted?"destination-out":"destination-in"),t._children){e=0;for(var i=(t=t._children).length;e<i;e++)this._setStencilCompositionOperation(t[e])}}},t._clipCmdCallback=function(t){var e=this._node;if(t=(t||cc._renderContext).getContext(),this._clipElemType)this._setStencilCompositionOperation(e._stencil);else{if((e=this._node._stencil)instanceof cc.DrawNode){t.beginPath();var i=e._renderCmd._transform;for(t.transform(i.a,i.b,i.c,i.d,i.tx,-i.ty),i=0;i<e._buffer.length;i++){var n=e._buffer[i].verts,s=n[0];for(t.moveTo(s.x,-s.y),s=n.length-1;0<s;s--)t.lineTo(n[s].x,-n[s].y)}}t.clip()}},t._restoreCmdCallback=function(t){var e=cc.ClippingNode.CanvasRenderCmd._getSharedCache(),i=(t=t||cc._renderContext).getContext();this._clipElemType?(i.save(),i.setTransform(1,0,0,1,0,0),i.globalCompositeOperation="destination-over",i.drawImage(e,0,0),i.restore(),this._dirtyFlag=0):t.restore()},t.transform=function(t,e){this.originTransform(t,e);var i=this._node;i._stencil&&i._stencil._renderCmd&&(i._stencil._renderCmd.transform(this,!0),i._stencil._dirtyFlag&=~cc.Node._dirtyFlags.transformDirty)},t._cangodhelpme=function(t){return!0!==t&&!1!==t||(cc.ClippingNode.CanvasRenderCmd.prototype._godhelpme=t),cc.ClippingNode.CanvasRenderCmd.prototype._godhelpme},t.clippingVisit=function(t){var e=this._node;if(t=t||this.getParentRenderCmd(),this.visit(t),this._clipElemType=!(!this._cangodhelpme()&&e._stencil instanceof cc.DrawNode),e._stencil&&e._stencil.visible){if(cc.renderer.pushRenderCommand(this._rendererSaveCmd),this._clipElemType?e._visitChildren():e._stencil.visit(e),cc.renderer.pushRenderCommand(this._rendererClipCmd),this._clipElemType)e._stencil.visit(e);else{this._cangodhelpme(!0);var i,n=(t=e._children).length;if(0<n)for(e.sortAllChildren(),i=0;i<n;i++)t[i].visit(e);this._cangodhelpme(!1)}cc.renderer.pushRenderCommand(this._rendererRestoreCmd),this._dirtyFlag=0}else this.inverted&&e._visitChildren()},cc.ClippingNode.CanvasRenderCmd._sharedCache=null,cc.ClippingNode.CanvasRenderCmd._getSharedCache=function(){return cc.ClippingNode.CanvasRenderCmd._sharedCache||(cc.ClippingNode.CanvasRenderCmd._sharedCache=document.createElement("canvas"))}}(),function(){cc.ClippingNode.WebGLRenderCmd=function(t){this._rootCtor(t),this._needDraw=!1,this._beforeVisitCmd=new cc.CustomRenderCmd(this,this._onBeforeVisit),this._afterDrawStencilCmd=new cc.CustomRenderCmd(this,this._onAfterDrawStencil),this._afterVisitCmd=new cc.CustomRenderCmd(this,this._onAfterVisit),this._mask_layer_le=this._currentStencilEnabled=null};var t=cc.ClippingNode.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);t.constructor=cc.ClippingNode.WebGLRenderCmd,cc.ClippingNode.WebGLRenderCmd._init_once=null,cc.ClippingNode.WebGLRenderCmd._visit_once=null,cc.ClippingNode.WebGLRenderCmd._layer=-1,t.initStencilBits=function(){cc.ClippingNode.WebGLRenderCmd._init_once=!0,cc.ClippingNode.WebGLRenderCmd._init_once&&(cc.stencilBits=cc._renderContext.getParameter(cc._renderContext.STENCIL_BITS),0>=cc.stencilBits&&cc.log("Stencil buffer is not enabled."),cc.ClippingNode.WebGLRenderCmd._init_once=!1)},t.transform=function(t,e){var i=this._node;this.originTransform(t,e),i._stencil&&(i._stencil._renderCmd.transform(this,!0),i._stencil._dirtyFlag&=~cc.Node._dirtyFlags.transformDirty)},t.clippingVisit=function(t){var e=this._node;if(t=t||this.getParentRenderCmd(),this.visit(t),1>cc.stencilBits)e._visitChildren();else if(e._stencil&&e._stencil.visible)if(cc.ClippingNode.WebGLRenderCmd._layer+1===cc.stencilBits)cc.ClippingNode.WebGLRenderCmd._visit_once=!0,cc.ClippingNode.WebGLRenderCmd._visit_once&&(cc.log("Nesting more than "+cc.stencilBits+"stencils is not supported. Everything will be drawn without stencil for this node and its children."),cc.ClippingNode.WebGLRenderCmd._visit_once=!1),e._visitChildren();else{if(cc.renderer.pushRenderCommand(this._beforeVisitCmd),e._stencil.visit(e),cc.renderer.pushRenderCommand(this._afterDrawStencilCmd),(t=e._children)&&0<t.length){var i=t.length;e.sortAllChildren();for(var n=0;n<i;n++)t[n].visit(e)}cc.renderer.pushRenderCommand(this._afterVisitCmd),this._dirtyFlag=0}else e.inverted&&e._visitChildren()},t.setStencil=function(t){var e=this._node;e._stencil&&(e._stencil._parent=null),e._stencil=t,e._stencil&&(e._stencil._parent=e)},t.resetProgramByStencil=function(){var t=this._node;t._stencil&&setProgram(t._stencil,t._originStencilProgram)},t._onBeforeVisit=function(t){var e=t||cc._renderContext;t=this._node,cc.ClippingNode.WebGLRenderCmd._layer++;var i=1<<cc.ClippingNode.WebGLRenderCmd._layer;this._mask_layer_le=i|i-1,this._currentStencilEnabled=e.isEnabled(e.STENCIL_TEST),e.clear(e.DEPTH_BUFFER_BIT),e.enable(e.STENCIL_TEST),e.depthMask(!1),e.stencilFunc(e.NEVER,i,i),e.stencilOp(e.REPLACE,e.KEEP,e.KEEP),e.stencilMask(i),e.clear(e.STENCIL_BUFFER_BIT),1>t.alphaThreshold&&(e=cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURECOLORALPHATEST),cc.glUseProgram(e.getProgram()),e.setUniformLocationWith1f(cc.UNIFORM_ALPHA_TEST_VALUE_S,t.alphaThreshold),e.setUniformLocationWithMatrix4fv(cc.UNIFORM_MVMATRIX_S,cc.renderer.mat4Identity.mat),cc.setProgram(t._stencil,e))},t._onAfterDrawStencil=function(t){(t=t||cc._renderContext).depthMask(!0),t.stencilFunc(this._node.inverted?t.NOTEQUAL:t.EQUAL,this._mask_layer_le,this._mask_layer_le),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},t._onAfterVisit=function(t){if(t=t||cc._renderContext,cc.ClippingNode.WebGLRenderCmd._layer--,this._currentStencilEnabled){var e=1<<cc.ClippingNode.WebGLRenderCmd._layer,i=e|e-1;t.stencilMask(e),t.stencilFunc(t.EQUAL,i,i)}else t.disable(t.STENCIL_TEST)}}(),cc.GridBase=cc.Class.extend({_active:!1,_reuseGrid:0,_gridSize:null,_gridRect:null,_texture:null,_step:null,_grabber:null,_isTextureFlipped:!1,_glProgramState:null,_directorProjection:0,_dirty:!1,ctor:function(t,e,i,n){cc.sys._checkWebGLRenderMode(),this._active=!1,this._reuseGrid=0,this._gridSize=null,this._gridRect=new cc.rect,this._texture=null,this._step=cc.p(0,0),this._grabber=null,this._isTextureFlipped=!1,this._glProgramState=null,this._directorProjection=0,this._dirty=!1,void 0!==t&&this.initWithSize(t,e,i,n)},isActive:function(){return this._active},setActive:function(t){if(this._active=t,!t){var e=(t=cc.director).getProjection();t.setProjection(e)}},getReuseGrid:function(){return this._reuseGrid},setReuseGrid:function(t){this._reuseGrid=t},getGridSize:function(){return cc.size(this._gridSize.width,this._gridSize.height)},setGridSize:function(t){this._gridSize.width=parseInt(t.width),this._gridSize.height=parseInt(t.height)},setGridRect:function(t){this._gridRect=t},getGridRect:function(){return this._gridRect},getStep:function(){return cc.p(this._step.x,this._step.y)},setStep:function(t){this._step.x=t.x,this._step.y=t.y},isTextureFlipped:function(){return this._isTextureFlipped},setTextureFlipped:function(t){this._isTextureFlipped!==t&&(this._isTextureFlipped=t,this.calculateVertexPoints())},initWithSize:function(t,e,i,n){if(!e){var s=cc.director.getWinSizeInPixels(),r=cc.NextPOT(s.width),o=cc.NextPOT(s.height),a=new Uint8Array(r*o*4);if(!a)return cc.log("cocos2d: CCGrid: not enough memory."),!1;if((e=new cc.Texture2D).initWithData(a,cc.Texture2D.PIXEL_FORMAT_RGBA8888,r,o,s),!e)return cc.log("cocos2d: CCGrid: error creating texture"),!1}return this._active=!1,this._reuseGrid=0,this._gridSize=t,this._texture=e,this._isTextureFlipped=i||!1,(void 0===n||cc._rectEqualToZero(n))&&(e=this._texture.getContentSize(),n=new cc.rect(0,0,e.width,e.height)),this._gridRect=n,this._step.x=this._gridRect.width/t.width,this._step.y=this._gridRect.height/t.height,this._grabber=new cc.Grabber,!!this._grabber&&(this._grabber.grab(this._texture),this._glProgramState=cc.GLProgramState.getOrCreateWithGLProgram(cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURE)),this.calculateVertexPoints(),!0)},beforeDraw:function(){this._directorProjection=cc.director.getProjection();var t=cc.director.getWinSizeInPixels();gl.viewport(0,0,t.width,t.height),this._grabber.beforeRender(this._texture)},afterDraw:function(t){this._grabber.afterRender(this._texture),cc.director.setViewport(),cc.glBindTexture2D(this._texture),this.beforeBlit(),this.blit(t),this.afterBlit()},beforeBlit:function(){},afterBlit:function(){},blit:function(){cc.log("cc.GridBase.blit(): Shall be overridden in subclass.")},reuse:function(){cc.log("cc.GridBase.reuse(): Shall be overridden in subclass.")},calculateVertexPoints:function(){cc.log("cc.GridBase.calculateVertexPoints(): Shall be overridden in subclass.")},set2DProjection:function(){var t=cc.director.getWinSizeInPixels();cc._renderContext.viewport(0,0,t.width,t.height),cc.kmGLMatrixMode(cc.KM_GL_PROJECTION),cc.kmGLLoadIdentity(),t=cc.math.Matrix4.createOrthographicProjection(0,t.width,0,t.height,-1,1),cc.kmGLMultMatrix(t),cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW),cc.kmGLLoadIdentity(),cc.setProjectionMatrixDirty()}}),cc.GridBase.create=function(t,e,i,n){return new cc.GridBase(t,e,i,n)},cc.Grid3D=cc.GridBase.extend({_texCoordinates:null,_vertices:null,_originalVertices:null,_indices:null,_texCoordinateBuffer:null,_verticesBuffer:null,_indicesBuffer:null,_needDepthTestForBlit:!1,_oldDepthTestValue:!1,_oldDepthWriteValue:!1,ctor:function(t,e,i,n){cc.GridBase.prototype.ctor.call(this),this._indicesBuffer=this._verticesBuffer=this._texCoordinateBuffer=this._indices=this._originalVertices=this._vertices=this._texCoordinates=null,this._matrix=new cc.math.Matrix4,this._matrix.identity(),void 0!==t&&this.initWithSize(t,e,i,n)},vertex:function(t){return this.getVertex(t)},getVertex:function(t){t.x===(0|t.x)&&t.y===(0|t.y)||cc.log("cc.Grid3D.vertex() : Numbers must be integers"),t=0|3*(t.x*(this._gridSize.height+1)+t.y);var e=this._vertices;return new cc.Vertex3F(e[t],e[t+1],e[t+2])},originalVertex:function(t){return this.getOriginalVertex(t)},getOriginalVertex:function(t){t.x===(0|t.x)&&t.y===(0|t.y)||cc.log("cc.Grid3D.originalVertex() : Numbers must be integers"),t=0|3*(t.x*(this._gridSize.height+1)+t.y);var e=this._originalVertices;return new cc.Vertex3F(e[t],e[t+1],e[t+2])},setVertex:function(t,e){t.x===(0|t.x)&&t.y===(0|t.y)||cc.log("cc.Grid3D.setVertex() : Numbers must be integers");var i=0|3*(t.x*(this._gridSize.height+1)+t.y),n=this._vertices;n[i]=e.x,n[i+1]=e.y,n[i+2]=e.z,this._dirty=!0},beforeBlit:function(){if(this._needDepthTestForBlit){var t=cc._renderContext;this._oldDepthTestValue=t.isEnabled(t.DEPTH_TEST),this._oldDepthWriteValue=t.getParameter(t.DEPTH_WRITEMASK),t.enable(t.DEPTH_TEST),t.depthMask(!0)}},afterBlit:function(){if(this._needDepthTestForBlit){var t=cc._renderContext;this._oldDepthTestValue?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),t.depthMask(this._oldDepthWriteValue)}},blit:function(t){var e=this._gridSize.width*this._gridSize.height;t=t._renderCmd._worldTransform,this._matrix.mat[0]=t.a,this._matrix.mat[4]=t.c,this._matrix.mat[12]=t.tx,this._matrix.mat[1]=t.b,this._matrix.mat[5]=t.d,this._matrix.mat[13]=t.ty,this._glProgramState.apply(this._matrix),t=cc._renderContext;var i=this._dirty;t.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),t.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS),t.bindBuffer(t.ARRAY_BUFFER,this._verticesBuffer),i&&t.bufferData(t.ARRAY_BUFFER,this._vertices,t.DYNAMIC_DRAW),t.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this._texCoordinateBuffer),i&&t.bufferData(t.ARRAY_BUFFER,this._texCoordinates,t.DYNAMIC_DRAW),t.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indicesBuffer),i&&t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW),t.drawElements(t.TRIANGLES,6*e,t.UNSIGNED_SHORT,0),i&&(this._dirty=!1),cc.incrementGLDraws(1)},reuse:function(){if(0<this._reuseGrid){for(var t=this._originalVertices,e=this._vertices,i=0,n=this._vertices.length;i<n;i++)t[i]=e[i];--this._reuseGrid}},calculateVertexPoints:function(){var t=cc._renderContext,e=this._texture.pixelsWidth,i=this._texture.pixelsHeight,n=this._texture.getContentSizeInPixels().height,s=this._gridSize,r=(s.width+1)*(s.height+1);this._vertices=new Float32Array(3*r),this._texCoordinates=new Float32Array(2*r),this._indices=new Uint16Array(s.width*s.height*6),this._verticesBuffer&&t.deleteBuffer(this._verticesBuffer),this._verticesBuffer=t.createBuffer(),this._texCoordinateBuffer&&t.deleteBuffer(this._texCoordinateBuffer),this._texCoordinateBuffer=t.createBuffer(),this._indicesBuffer&&t.deleteBuffer(this._indicesBuffer),this._indicesBuffer=t.createBuffer();var o,a,c=this._indices,h=this._texCoordinates,l=this._isTextureFlipped,u=this._vertices;for(r=0;r<s.width;++r)for(o=0;o<s.height;++o){var d=o*s.width+r,_=(a=r*this._step.x+this._gridRect.x)+this._step.x,g=o*this._step.y+this._gridRect.y,f=g+this._step.y,p=r*(s.height+1)+o,m=(r+1)*(s.height+1)+o,T=(r+1)*(s.height+1)+(o+1),S=r*(s.height+1)+(o+1);c[6*d]=p,c[6*d+1]=m,c[6*d+2]=S,c[6*d+3]=m,c[6*d+4]=T,c[6*d+5]=S;d=[3*p,3*m,3*T,3*S];var y=[{x:a,y:g,z:0},{x:_,y:g,z:0},{x:_,y:f,z:0},{x:a,y:f,z:0}];p=[2*p,2*m,2*T,2*S],_=[cc.p(a,g),cc.p(_,g),cc.p(_,f),cc.p(a,f)];for(a=0;4>a;++a)u[d[a]]=y[a].x,u[d[a]+1]=y[a].y,u[d[a]+2]=y[a].z,h[p[a]]=_[a].x/e,h[p[a]+1]=l?(n-_[a].y)/i:_[a].y/i}this._originalVertices=new Float32Array(this._vertices),t.bindBuffer(t.ARRAY_BUFFER,this._verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this._vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._texCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,this._texCoordinates,t.DYNAMIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW),this._dirty=!0},setNeedDepthTestForBlit:function(t){this._needDepthTestForBlit=t},getNeedDepthTestForBlit:function(){return this._needDepthTestForBlit}}),cc.Grid3D.create=function(t,e,i){return new cc.Grid3D(t,e,i)},cc.TiledGrid3D=cc.GridBase.extend({_texCoordinates:null,_vertices:null,_originalVertices:null,_indices:null,_texCoordinateBuffer:null,_verticesBuffer:null,_indicesBuffer:null,ctor:function(t,e,i,n){cc.GridBase.prototype.ctor.call(this),this._indicesBuffer=this._verticesBuffer=this._texCoordinateBuffer=this._indices=this._originalVertices=this._vertices=this._texCoordinates=null,this._matrix=new cc.math.Matrix4,this._matrix.identity(),void 0!==t&&this.initWithSize(t,e,i,n)},tile:function(t){return this.getTile(t)},getTile:function(t){t.x===(0|t.x)&&t.y===(0|t.y)||cc.log("cc.TiledGrid3D.tile() : Numbers must be integers"),t=12*(this._gridSize.height*t.x+t.y);var e=this._vertices;return new cc.Quad3(new cc.Vertex3F(e[t],e[t+1],e[t+2]),new cc.Vertex3F(e[t+3],e[t+4],e[t+5]),new cc.Vertex3F(e[t+6],e[t+7],e[t+8]),new cc.Vertex3F(e[t+9],e[t+10],e[t+11]))},getOriginalTile:function(t){t.x===(0|t.x)&&t.y===(0|t.y)||cc.log("cc.TiledGrid3D.originalTile() : Numbers must be integers"),t=12*(this._gridSize.height*t.x+t.y);var e=this._originalVertices;return new cc.Quad3(new cc.Vertex3F(e[t],e[t+1],e[t+2]),new cc.Vertex3F(e[t+3],e[t+4],e[t+5]),new cc.Vertex3F(e[t+6],e[t+7],e[t+8]),new cc.Vertex3F(e[t+9],e[t+10],e[t+11]))},originalTile:function(t){return this.getOriginalTile(t)},setTile:function(t,e){t.x===(0|t.x)&&t.y===(0|t.y)||cc.log("cc.TiledGrid3D.setTile() : Numbers must be integers");var i=12*(this._gridSize.height*t.x+t.y),n=this._vertices;n[i]=e.bl.x,n[i+1]=e.bl.y,n[i+2]=e.bl.z,n[i+3]=e.br.x,n[i+4]=e.br.y,n[i+5]=e.br.z,n[i+6]=e.tl.x,n[i+7]=e.tl.y,n[i+8]=e.tl.z,n[i+9]=e.tr.x,n[i+10]=e.tr.y,n[i+11]=e.tr.z,this._dirty=!0},blit:function(t){var e=this._gridSize.width*this._gridSize.height;t=t._renderCmd._worldTransform,this._matrix.mat[0]=t.a,this._matrix.mat[4]=t.c,this._matrix.mat[12]=t.tx,this._matrix.mat[1]=t.b,this._matrix.mat[5]=t.d,this._matrix.mat[13]=t.ty,this._glProgramState.apply(this._matrix),t=cc._renderContext;var i=this._dirty;t.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),t.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS),t.bindBuffer(t.ARRAY_BUFFER,this._verticesBuffer),i&&t.bufferData(t.ARRAY_BUFFER,this._vertices,t.DYNAMIC_DRAW),t.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,3,t.FLOAT,!1,0,this._vertices),t.bindBuffer(t.ARRAY_BUFFER,this._texCoordinateBuffer),i&&t.bufferData(t.ARRAY_BUFFER,this._texCoordinates,t.DYNAMIC_DRAW),t.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS,2,t.FLOAT,!1,0,this._texCoordinates),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indicesBuffer),i&&t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW),t.drawElements(t.TRIANGLES,6*e,t.UNSIGNED_SHORT,0),i&&(this._dirty=!1),cc.incrementGLDraws(1)},reuse:function(){if(0<this._reuseGrid){for(var t=this._vertices,e=this._originalVertices,i=0;i<t.length;i++)e[i]=t[i];--this._reuseGrid}},calculateVertexPoints:function(){var t=this._texture.pixelsWidth,e=this._texture.pixelsHeight,i=this._texture.getContentSizeInPixels().height,n=this._gridSize,s=n.width*n.height;this._vertices=new Float32Array(12*s),this._texCoordinates=new Float32Array(8*s),this._indices=new Uint16Array(6*s);var r=cc._renderContext;this._verticesBuffer&&r.deleteBuffer(this._verticesBuffer),this._verticesBuffer=r.createBuffer(),this._texCoordinateBuffer&&r.deleteBuffer(this._texCoordinateBuffer),this._texCoordinateBuffer=r.createBuffer(),this._indicesBuffer&&r.deleteBuffer(this._indicesBuffer),this._indicesBuffer=r.createBuffer();var o,a,c=0,h=this._step,l=this._vertices,u=this._texCoordinates,d=this._isTextureFlipped;for(o=0;o<n.width;o++)for(a=0;a<n.height;a++){var _=o*h.x,g=_+h.x,f=a*h.y,p=f+h.y;l[12*c]=_,l[12*c+1]=f,l[12*c+2]=0,l[12*c+3]=g,l[12*c+4]=f,l[12*c+5]=0,l[12*c+6]=_,l[12*c+7]=p,l[12*c+8]=0,l[12*c+9]=g,l[12*c+10]=p,l[12*c+11]=0;var m=f,T=p;d&&(m=i-f,T=i-p),u[8*c]=_/t,u[8*c+1]=m/e,u[8*c+2]=g/t,u[8*c+3]=m/e,u[8*c+4]=_/t,u[8*c+5]=T/e,u[8*c+6]=g/t,u[8*c+7]=T/e,c++}for(t=this._indices,o=0;o<s;o++)t[6*o+0]=4*o+0,t[6*o+1]=4*o+1,t[6*o+2]=4*o+2,t[6*o+3]=4*o+1,t[6*o+4]=4*o+2,t[6*o+5]=4*o+3;this._originalVertices=new Float32Array(this._vertices),r.bindBuffer(r.ARRAY_BUFFER,this._verticesBuffer),r.bufferData(r.ARRAY_BUFFER,this._vertices,r.DYNAMIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,this._texCoordinateBuffer),r.bufferData(r.ARRAY_BUFFER,this._texCoordinates,r.DYNAMIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this._indicesBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,this._indices,r.DYNAMIC_DRAW),this._dirty=!0}}),cc.TiledGrid3D.create=function(t,e,i){return new cc.TiledGrid3D(t,e,i)},cc.Grabber=cc.Class.extend({_FBO:null,_oldFBO:null,_oldClearColor:null,_gl:null,ctor:function(){cc.sys._checkWebGLRenderMode(),this._gl=cc._renderContext,this._oldClearColor=[0,0,0,0],this._oldFBO=null,this._FBO=this._gl.createFramebuffer()},grab:function(t){var e=this._gl;this._oldFBO=e.getParameter(e.FRAMEBUFFER_BINDING),e.bindFramebuffer(e.FRAMEBUFFER,this._FBO),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t._webTextureObj,0),e.checkFramebufferStatus(e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE&&cc.log("Frame Grabber: could not attach texture to frmaebuffer"),e.bindFramebuffer(e.FRAMEBUFFER,this._oldFBO)},beforeRender:function(t){t=this._gl,this._oldFBO=t.getParameter(t.FRAMEBUFFER_BINDING),t.bindFramebuffer(t.FRAMEBUFFER,this._FBO),this._oldClearColor=t.getParameter(t.COLOR_CLEAR_VALUE),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},afterRender:function(t){(t=this._gl).bindFramebuffer(t.FRAMEBUFFER,this._oldFBO),t.colorMask(!0,!0,!0,!0)},destroy:function(){this._gl.deleteFramebuffer(this._FBO)}}),cc.ACTION_TAG_INVALID=-1,cc.Action=cc.Class.extend({originalTarget:null,target:null,tag:cc.ACTION_TAG_INVALID,ctor:function(){this.target=this.originalTarget=null,this.tag=cc.ACTION_TAG_INVALID},copy:function(){return cc.log("copy is deprecated. Please use clone instead."),this.clone()},clone:function(){var t=new cc.Action;return t.originalTarget=null,t.target=null,t.tag=this.tag,t},isDone:function(){return!0},startWithTarget:function(t){this.target=this.originalTarget=t},stop:function(){this.target=null},step:function(t){cc.log("[Action step]. override me")},update:function(t){cc.log("[Action update]. override me")},getTarget:function(){return this.target},setTarget:function(t){this.target=t},getOriginalTarget:function(){return this.originalTarget},setOriginalTarget:function(t){this.originalTarget=t},getTag:function(){return this.tag},setTag:function(t){this.tag=t},retain:function(){},release:function(){}}),cc.action=function(){return new cc.Action},cc.Action.create=cc.action,cc.FiniteTimeAction=cc.Action.extend({_duration:0,ctor:function(){cc.Action.prototype.ctor.call(this),this._duration=0},getDuration:function(){return this._duration*(this._timesForRepeat||1)},setDuration:function(t){this._duration=t},reverse:function(){return cc.log("cocos2d: FiniteTimeAction#reverse: Implement me"),null},clone:function(){return new cc.FiniteTimeAction}}),cc.Speed=cc.Action.extend({_speed:0,_innerAction:null,ctor:function(t,e){cc.Action.prototype.ctor.call(this),this._speed=0,this._innerAction=null,t&&this.initWithAction(t,e)},getSpeed:function(){return this._speed},setSpeed:function(t){this._speed=t},initWithAction:function(t,e){if(!t)throw Error("cc.Speed.initWithAction(): action must be non nil");return this._innerAction=t,this._speed=e,!0},clone:function(){var t=new cc.Speed;return t.initWithAction(this._innerAction.clone(),this._speed),t},startWithTarget:function(t){cc.Action.prototype.startWithTarget.call(this,t),this._innerAction.startWithTarget(t)},stop:function(){this._innerAction.stop(),cc.Action.prototype.stop.call(this)},step:function(t){this._innerAction.step(t*this._speed)},isDone:function(){return this._innerAction.isDone()},reverse:function(){return new cc.Speed(this._innerAction.reverse(),this._speed)},setInnerAction:function(t){this._innerAction!==t&&(this._innerAction=t)},getInnerAction:function(){return this._innerAction}}),cc.speed=function(t,e){return new cc.Speed(t,e)},cc.Speed.create=cc.speed,cc.Follow=cc.Action.extend({_followedNode:null,_boundarySet:!1,_boundaryFullyCovered:!1,_halfScreenSize:null,_fullScreenSize:null,_worldRect:null,leftBoundary:0,rightBoundary:0,topBoundary:0,bottomBoundary:0,ctor:function(t,e){cc.Action.prototype.ctor.call(this),this._followedNode=null,this._boundaryFullyCovered=this._boundarySet=!1,this._fullScreenSize=this._halfScreenSize=null,this.bottomBoundary=this.topBoundary=this.rightBoundary=this.leftBoundary=0,this._worldRect=cc.rect(0,0,0,0),t&&(e?this.initWithTarget(t,e):this.initWithTarget(t))},clone:function(){var t=new cc.Follow,e=this._worldRect;e=new cc.Rect(e.x,e.y,e.width,e.height);return t.initWithTarget(this._followedNode,e),t},isBoundarySet:function(){return this._boundarySet},setBoudarySet:function(t){this._boundarySet=t},initWithTarget:function(t,e){if(!t)throw Error("cc.Follow.initWithAction(): followedNode must be non nil");e=e||cc.rect(0,0,0,0),this._followedNode=t,this._worldRect=e,this._boundarySet=!cc._rectEqualToZero(e),this._boundaryFullyCovered=!1;var i=cc.director.getWinSize();return this._fullScreenSize=cc.p(i.width,i.height),this._halfScreenSize=cc.pMult(this._fullScreenSize,.5),this._boundarySet&&(this.leftBoundary=-(e.x+e.width-this._fullScreenSize.x),this.rightBoundary=-e.x,this.topBoundary=-e.y,this.bottomBoundary=-(e.y+e.height-this._fullScreenSize.y),this.rightBoundary<this.leftBoundary&&(this.rightBoundary=this.leftBoundary=(this.leftBoundary+this.rightBoundary)/2),this.topBoundary<this.bottomBoundary&&(this.topBoundary=this.bottomBoundary=(this.topBoundary+this.bottomBoundary)/2),this.topBoundary===this.bottomBoundary&&this.leftBoundary===this.rightBoundary&&(this._boundaryFullyCovered=!0)),!0},step:function(t){t=this._followedNode.x;var e=this._followedNode.y;t=this._halfScreenSize.x-t,e=this._halfScreenSize.y-e,this.target._renderCmd._dirtyFlag=0,this._boundarySet?this._boundaryFullyCovered||this.target.setPosition(cc.clampf(t,this.leftBoundary,this.rightBoundary),cc.clampf(e,this.bottomBoundary,this.topBoundary)):this.target.setPosition(t,e)},isDone:function(){return!this._followedNode.running},stop:function(){this.target=null,cc.Action.prototype.stop.call(this)}}),cc.follow=function(t,e){return new cc.Follow(t,e)},cc.Follow.create=cc.follow,cc.ActionInterval=cc.FiniteTimeAction.extend({_elapsed:0,_firstTick:!1,_easeList:null,_timesForRepeat:1,_repeatForever:!1,_repeatMethod:!1,_speed:1,_speedMethod:!1,ctor:function(t){this._timesForRepeat=this._speed=1,this._repeatForever=!1,this.MAX_VALUE=2,this._speedMethod=this._repeatMethod=!1,cc.FiniteTimeAction.prototype.ctor.call(this),void 0!==t&&this.initWithDuration(t)},getElapsed:function(){return this._elapsed},initWithDuration:function(t){return this._duration=0===t?cc.FLT_EPSILON:t,this._elapsed=0,this._firstTick=!0},isDone:function(){return this._elapsed>=this._duration},_cloneDecoration:function(t){t._repeatForever=this._repeatForever,t._speed=this._speed,t._timesForRepeat=this._timesForRepeat,t._easeList=this._easeList,t._speedMethod=this._speedMethod,t._repeatMethod=this._repeatMethod},_reverseEaseList:function(t){if(this._easeList){t._easeList=[];for(var e=0;e<this._easeList.length;e++)t._easeList.push(this._easeList[e].reverse())}},clone:function(){var t=new cc.ActionInterval(this._duration);return this._cloneDecoration(t),t},easing:function(t){this._easeList?this._easeList.length=0:this._easeList=[];for(var e=0;e<arguments.length;e++)this._easeList.push(arguments[e]);return this},_computeEaseTime:function(t){var e=this._easeList;if(!e||0===e.length)return t;for(var i=0,n=e.length;i<n;i++)t=e[i].easing(t);return t},step:function(t){this._firstTick?(this._firstTick=!1,this._elapsed=0):this._elapsed+=t,t=1>(t=this._elapsed/(1.192092896e-7<this._duration?this._duration:1.192092896e-7))?t:1,this.update(0<t?t:0),this._repeatMethod&&1<this._timesForRepeat&&this.isDone()&&(this._repeatForever||this._timesForRepeat--,this.startWithTarget(this.target),this.step(this._elapsed-this._duration))},startWithTarget:function(t){cc.Action.prototype.startWithTarget.call(this,t),this._elapsed=0,this._firstTick=!0},reverse:function(){return cc.log("cc.IntervalAction: reverse not implemented."),null},setAmplitudeRate:function(t){cc.log("cc.ActionInterval.setAmplitudeRate(): it should be overridden in subclass.")},getAmplitudeRate:function(){return cc.log("cc.ActionInterval.getAmplitudeRate(): it should be overridden in subclass."),0},speed:function(t){return 0>=t?(cc.log("The speed parameter error"),this):(this._speedMethod=!0,this._speed*=t,this)},getSpeed:function(){return this._speed},setSpeed:function(t){return this._speed=t,this},repeat:function(t){return t=Math.round(t),isNaN(t)||1>t?(cc.log("The repeat parameter error"),this):(this._repeatMethod=!0,this._timesForRepeat*=t,this)},repeatForever:function(){return this._repeatMethod=!0,this._timesForRepeat=this.MAX_VALUE,this._repeatForever=!0,this}}),cc.actionInterval=function(t){return new cc.ActionInterval(t)},cc.ActionInterval.create=cc.actionInterval,cc.Sequence=cc.ActionInterval.extend({_actions:null,_split:null,_last:0,ctor:function(t){cc.ActionInterval.prototype.ctor.call(this),this._actions=[];var e=t instanceof Array?t:arguments,i=e.length-1;if(0<=i&&null==e[i]&&cc.log("parameters should not be ending with null in Javascript"),0<=i){for(var n=e[0],s=1;s<i;s++)e[s]&&(n=cc.Sequence._actionOneTwo(n,e[s]));this.initWithTwoActions(n,e[i])}},initWithTwoActions:function(t,e){if(!t||!e)throw Error("cc.Sequence.initWithTwoActions(): arguments must all be non nil");return this.initWithDuration(t._duration+e._duration),this._actions[0]=t,this._actions[1]=e,!0},clone:function(){var t=new cc.Sequence;return this._cloneDecoration(t),t.initWithTwoActions(this._actions[0].clone(),this._actions[1].clone()),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),this._split=this._actions[0]._duration/this._duration,this._last=-1},stop:function(){-1!==this._last&&this._actions[this._last].stop(),cc.Action.prototype.stop.call(this)},update:function(t){var e=0,i=this._split,n=this._actions,s=this._last;(t=this._computeEaseTime(t))<i?(t=0!==i?t/i:1,0===e&&1===s&&(n[1].update(0),n[1].stop())):(e=1,t=1===i?1:(t-i)/(1-i),-1===s&&(n[0].startWithTarget(this.target),n[0].update(1),n[0].stop()),s||(n[0].update(1),n[0].stop())),n=n[e],s===e&&n.isDone()||(s!==e&&n.startWithTarget(this.target),t*=n._timesForRepeat,n.update(1<t?t%1:t),this._last=e)},reverse:function(){var t=cc.Sequence._actionOneTwo(this._actions[1].reverse(),this._actions[0].reverse());return this._cloneDecoration(t),this._reverseEaseList(t),t}}),cc.sequence=function(t){var e,i,n,s,r=t instanceof Array?t:arguments;for(0<r.length&&null==r[r.length-1]&&cc.log("parameters should not be ending with null in Javascript");r&&0<r.length;)for(s=(i=Array.prototype.shift.call(r))._timesForRepeat||1,i._repeatMethod=!1,i._timesForRepeat=1,n=0,e||(e=i,n=1);n<s;n++)e=cc.Sequence._actionOneTwo(e,i);return e},cc.Sequence.create=cc.sequence,cc.Sequence._actionOneTwo=function(t,e){var i=new cc.Sequence;return i.initWithTwoActions(t,e),i},cc.Repeat=cc.ActionInterval.extend({_times:0,_total:0,_nextDt:0,_actionInstant:!1,_innerAction:null,ctor:function(t,e){cc.ActionInterval.prototype.ctor.call(this),void 0!==e&&this.initWithAction(t,e)},initWithAction:function(t,e){return!!this.initWithDuration(t._duration*e)&&(this._times=e,this._innerAction=t,t instanceof cc.ActionInstant&&(this._actionInstant=!0,this._times-=1),this._total=0,!0)},clone:function(){var t=new cc.Repeat;return this._cloneDecoration(t),t.initWithAction(this._innerAction.clone(),this._times),t},startWithTarget:function(t){this._total=0,this._nextDt=this._innerAction._duration/this._duration,cc.ActionInterval.prototype.startWithTarget.call(this,t),this._innerAction.startWithTarget(t)},stop:function(){this._innerAction.stop(),cc.Action.prototype.stop.call(this)},update:function(t){t=this._computeEaseTime(t);var e=this._innerAction,i=this._duration,n=this._times,s=this._nextDt;if(t>=s){for(;t>s&&this._total<n;)e.update(1),this._total++,e.stop(),e.startWithTarget(this.target),this._nextDt=s+=e._duration/i;1<=t&&this._total<n&&this._total++,this._actionInstant||(this._total===n?(e.update(1),e.stop()):e.update(t-(s-e._duration/i)))}else e.update(t*n%1)},isDone:function(){return this._total===this._times},reverse:function(){var t=new cc.Repeat(this._innerAction.reverse(),this._times);return this._cloneDecoration(t),this._reverseEaseList(t),t},setInnerAction:function(t){this._innerAction!==t&&(this._innerAction=t)},getInnerAction:function(){return this._innerAction}}),cc.repeat=function(t,e){return new cc.Repeat(t,e)},cc.Repeat.create=cc.repeat,cc.RepeatForever=cc.ActionInterval.extend({_innerAction:null,ctor:function(t){cc.ActionInterval.prototype.ctor.call(this),this._innerAction=null,t&&this.initWithAction(t)},initWithAction:function(t){if(!t)throw Error("cc.RepeatForever.initWithAction(): action must be non null");return this._innerAction=t,!0},clone:function(){var t=new cc.RepeatForever;return this._cloneDecoration(t),t.initWithAction(this._innerAction.clone()),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),this._innerAction.startWithTarget(t)},step:function(t){var e=this._innerAction;e.step(t),e.isDone()&&(e.startWithTarget(this.target),e.step(e.getElapsed()-e._duration))},isDone:function(){return!1},reverse:function(){var t=new cc.RepeatForever(this._innerAction.reverse());return this._cloneDecoration(t),this._reverseEaseList(t),t},setInnerAction:function(t){this._innerAction!==t&&(this._innerAction=t)},getInnerAction:function(){return this._innerAction}}),cc.repeatForever=function(t){return new cc.RepeatForever(t)},cc.RepeatForever.create=cc.repeatForever,cc.Spawn=cc.ActionInterval.extend({_one:null,_two:null,ctor:function(t){var e,i,n;if(cc.ActionInterval.prototype.ctor.call(this),this._two=this._one=null,t instanceof Array)i=t;else for(i=Array(arguments.length),e=0;e<arguments.length;++e)i[e]=arguments[e];if(0<=(n=i.length-1)&&null==i[n]&&cc.log("parameters should not be ending with null in Javascript"),0<=n){var s=i[0];for(e=1;e<n;e++)i[e]&&(s=cc.Spawn._actionOneTwo(s,i[e]));this.initWithTwoActions(s,i[n])}},initWithTwoActions:function(t,e){if(!t||!e)throw Error("cc.Spawn.initWithTwoActions(): arguments must all be non null");var i=!1,n=t._duration,s=e._duration;return this.initWithDuration(Math.max(n,s))&&(this._one=t,this._two=e,n>s?this._two=cc.Sequence._actionOneTwo(e,cc.delayTime(n-s)):n<s&&(this._one=cc.Sequence._actionOneTwo(t,cc.delayTime(s-n))),i=!0),i},clone:function(){var t=new cc.Spawn;return this._cloneDecoration(t),t.initWithTwoActions(this._one.clone(),this._two.clone()),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),this._one.startWithTarget(t),this._two.startWithTarget(t)},stop:function(){this._one.stop(),this._two.stop(),cc.Action.prototype.stop.call(this)},update:function(t){t=this._computeEaseTime(t),this._one&&this._one.update(t),this._two&&this._two.update(t)},reverse:function(){var t=cc.Spawn._actionOneTwo(this._one.reverse(),this._two.reverse());return this._cloneDecoration(t),this._reverseEaseList(t),t}}),cc.spawn=function(t){var e=t instanceof Array?t:arguments;0<e.length&&null==e[e.length-1]&&cc.log("parameters should not be ending with null in Javascript");for(var i=e[0],n=1;n<e.length;n++)null!=e[n]&&(i=cc.Spawn._actionOneTwo(i,e[n]));return i},cc.Spawn.create=cc.spawn,cc.Spawn._actionOneTwo=function(t,e){var i=new cc.Spawn;return i.initWithTwoActions(t,e),i},cc.RotateTo=cc.ActionInterval.extend({_dstAngleX:0,_startAngleX:0,_diffAngleX:0,_dstAngleY:0,_startAngleY:0,_diffAngleY:0,ctor:function(t,e,i){cc.ActionInterval.prototype.ctor.call(this),void 0!==e&&this.initWithDuration(t,e,i)},initWithDuration:function(t,e,i){return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(this._dstAngleX=e||0,this._dstAngleY=void 0!==i?i:this._dstAngleX,!0)},clone:function(){var t=new cc.RotateTo;return this._cloneDecoration(t),t.initWithDuration(this._duration,this._dstAngleX,this._dstAngleY),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t);var e=t.rotationX%360,i=this._dstAngleX-e;180<i&&(i-=360),-180>i&&(i+=360),this._startAngleX=e,this._diffAngleX=i,this._startAngleY=t.rotationY%360,180<(t=this._dstAngleY-this._startAngleY)&&(t-=360),-180>t&&(t+=360),this._diffAngleY=t},reverse:function(){cc.log("cc.RotateTo.reverse(): it should be overridden in subclass.")},update:function(t){t=this._computeEaseTime(t),this.target&&(this.target.rotationX=this._startAngleX+this._diffAngleX*t,this.target.rotationY=this._startAngleY+this._diffAngleY*t)}}),cc.rotateTo=function(t,e,i){return new cc.RotateTo(t,e,i)},cc.RotateTo.create=cc.rotateTo,cc.RotateBy=cc.ActionInterval.extend({_angleX:0,_startAngleX:0,_angleY:0,_startAngleY:0,ctor:function(t,e,i){cc.ActionInterval.prototype.ctor.call(this),void 0!==e&&this.initWithDuration(t,e,i)},initWithDuration:function(t,e,i){return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(this._angleX=e||0,this._angleY=i||this._angleX,!0)},clone:function(){var t=new cc.RotateBy;return this._cloneDecoration(t),t.initWithDuration(this._duration,this._angleX,this._angleY),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),this._startAngleX=t.rotationX,this._startAngleY=t.rotationY},update:function(t){t=this._computeEaseTime(t),this.target&&(this.target.rotationX=this._startAngleX+this._angleX*t,this.target.rotationY=this._startAngleY+this._angleY*t)},reverse:function(){var t=new cc.RotateBy(this._duration,-this._angleX,-this._angleY);return this._cloneDecoration(t),this._reverseEaseList(t),t}}),cc.rotateBy=function(t,e,i){return new cc.RotateBy(t,e,i)},cc.RotateBy.create=cc.rotateBy,cc.MoveBy=cc.ActionInterval.extend({_positionDelta:null,_startPosition:null,_previousPosition:null,ctor:function(t,e,i){cc.ActionInterval.prototype.ctor.call(this),this._positionDelta=cc.p(0,0),this._startPosition=cc.p(0,0),this._previousPosition=cc.p(0,0),void 0!==e&&this.initWithDuration(t,e,i)},initWithDuration:function(t,e,i){return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(void 0!==e.x&&(i=e.y,e=e.x),this._positionDelta.x=e,this._positionDelta.y=i,!0)},clone:function(){var t=new cc.MoveBy;return this._cloneDecoration(t),t.initWithDuration(this._duration,this._positionDelta),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t);var e=t.getPositionX();t=t.getPositionY(),this._previousPosition.x=e,this._previousPosition.y=t,this._startPosition.x=e,this._startPosition.y=t},update:function(t){if(t=this._computeEaseTime(t),this.target){var e=this._positionDelta.x*t;t*=this._positionDelta.y;var i=this._startPosition;if(cc.ENABLE_STACKABLE_ACTIONS){var n=this.target.getPositionX(),s=this.target.getPositionY(),r=this._previousPosition;i.x=i.x+n-r.x,i.y=i.y+s-r.y,e+=i.x,t+=i.y,r.x=e,r.y=t,this.target.setPosition(e,t)}else this.target.setPosition(i.x+e,i.y+t)}},reverse:function(){var t=new cc.MoveBy(this._duration,cc.p(-this._positionDelta.x,-this._positionDelta.y));return this._cloneDecoration(t),this._reverseEaseList(t),t}}),cc.moveBy=function(t,e,i){return new cc.MoveBy(t,e,i)},cc.MoveBy.create=cc.moveBy,cc.MoveTo=cc.MoveBy.extend({_endPosition:null,ctor:function(t,e,i){cc.MoveBy.prototype.ctor.call(this),this._endPosition=cc.p(0,0),void 0!==e&&this.initWithDuration(t,e,i)},initWithDuration:function(t,e,i){return!!cc.MoveBy.prototype.initWithDuration.call(this,t,e,i)&&(void 0!==e.x&&(i=e.y,e=e.x),this._endPosition.x=e,this._endPosition.y=i,!0)},clone:function(){var t=new cc.MoveTo;return this._cloneDecoration(t),t.initWithDuration(this._duration,this._endPosition),t},startWithTarget:function(t){cc.MoveBy.prototype.startWithTarget.call(this,t),this._positionDelta.x=this._endPosition.x-t.getPositionX(),this._positionDelta.y=this._endPosition.y-t.getPositionY()}}),cc.moveTo=function(t,e,i){return new cc.MoveTo(t,e,i)},cc.MoveTo.create=cc.moveTo,cc.SkewTo=cc.ActionInterval.extend({_skewX:0,_skewY:0,_startSkewX:0,_startSkewY:0,_endSkewX:0,_endSkewY:0,_deltaX:0,_deltaY:0,ctor:function(t,e,i){cc.ActionInterval.prototype.ctor.call(this),void 0!==i&&this.initWithDuration(t,e,i)},initWithDuration:function(t,e,i){var n=!1;return cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(this._endSkewX=e,this._endSkewY=i,n=!0),n},clone:function(){var t=new cc.SkewTo;return this._cloneDecoration(t),t.initWithDuration(this._duration,this._endSkewX,this._endSkewY),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),this._startSkewX=t.skewX%180,this._deltaX=this._endSkewX-this._startSkewX,180<this._deltaX&&(this._deltaX-=360),-180>this._deltaX&&(this._deltaX+=360),this._startSkewY=t.skewY%360,this._deltaY=this._endSkewY-this._startSkewY,180<this._deltaY&&(this._deltaY-=360),-180>this._deltaY&&(this._deltaY+=360)},update:function(t){t=this._computeEaseTime(t),this.target.skewX=this._startSkewX+this._deltaX*t,this.target.skewY=this._startSkewY+this._deltaY*t}}),cc.skewTo=function(t,e,i){return new cc.SkewTo(t,e,i)},cc.SkewTo.create=cc.skewTo,cc.SkewBy=cc.SkewTo.extend({ctor:function(t,e,i){cc.SkewTo.prototype.ctor.call(this),void 0!==i&&this.initWithDuration(t,e,i)},initWithDuration:function(t,e,i){var n=!1;return cc.SkewTo.prototype.initWithDuration.call(this,t,e,i)&&(this._skewX=e,this._skewY=i,n=!0),n},clone:function(){var t=new cc.SkewBy;return this._cloneDecoration(t),t.initWithDuration(this._duration,this._skewX,this._skewY),t},startWithTarget:function(t){cc.SkewTo.prototype.startWithTarget.call(this,t),this._deltaX=this._skewX,this._deltaY=this._skewY,this._endSkewX=this._startSkewX+this._deltaX,this._endSkewY=this._startSkewY+this._deltaY},reverse:function(){var t=new cc.SkewBy(this._duration,-this._skewX,-this._skewY);return this._cloneDecoration(t),this._reverseEaseList(t),t}}),cc.skewBy=function(t,e,i){return new cc.SkewBy(t,e,i)},cc.SkewBy.create=cc.skewBy,cc.JumpBy=cc.ActionInterval.extend({_startPosition:null,_delta:null,_height:0,_jumps:0,_previousPosition:null,ctor:function(t,e,i,n,s){cc.ActionInterval.prototype.ctor.call(this),this._startPosition=cc.p(0,0),this._previousPosition=cc.p(0,0),this._delta=cc.p(0,0),void 0!==n&&this.initWithDuration(t,e,i,n,s)},initWithDuration:function(t,e,i,n,s){return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(void 0===s&&(s=n,n=i,i=e.y,e=e.x),this._delta.x=e,this._delta.y=i,this._height=n,this._jumps=s,!0)},clone:function(){var t=new cc.JumpBy;return this._cloneDecoration(t),t.initWithDuration(this._duration,this._delta,this._height,this._jumps),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t);var e=t.getPositionX();t=t.getPositionY(),this._previousPosition.x=e,this._previousPosition.y=t,this._startPosition.x=e,this._startPosition.y=t},update:function(t){if(t=this._computeEaseTime(t),this.target){var e=t*this._jumps%1;e=(e=4*this._height*e*(1-e))+this._delta.y*t;t*=this._delta.x;var i=this._startPosition;if(cc.ENABLE_STACKABLE_ACTIONS){var n=this.target.getPositionX(),s=this.target.getPositionY(),r=this._previousPosition;i.x=i.x+n-r.x,i.y=i.y+s-r.y,t+=i.x,e+=i.y,r.x=t,r.y=e,this.target.setPosition(t,e)}else this.target.setPosition(i.x+t,i.y+e)}},reverse:function(){var t=new cc.JumpBy(this._duration,cc.p(-this._delta.x,-this._delta.y),this._height,this._jumps);return this._cloneDecoration(t),this._reverseEaseList(t),t}}),cc.jumpBy=function(t,e,i,n,s){return new cc.JumpBy(t,e,i,n,s)},cc.JumpBy.create=cc.jumpBy,cc.JumpTo=cc.JumpBy.extend({_endPosition:null,ctor:function(t,e,i,n,s){cc.JumpBy.prototype.ctor.call(this),this._endPosition=cc.p(0,0),void 0!==n&&this.initWithDuration(t,e,i,n,s)},initWithDuration:function(t,e,i,n,s){return!!cc.JumpBy.prototype.initWithDuration.call(this,t,e,i,n,s)&&(void 0===s&&(i=e.y,e=e.x),this._endPosition.x=e,this._endPosition.y=i,!0)},startWithTarget:function(t){cc.JumpBy.prototype.startWithTarget.call(this,t),this._delta.x=this._endPosition.x-this._startPosition.x,this._delta.y=this._endPosition.y-this._startPosition.y},clone:function(){var t=new cc.JumpTo;return this._cloneDecoration(t),t.initWithDuration(this._duration,this._endPosition,this._height,this._jumps),t}}),cc.jumpTo=function(t,e,i,n,s){return new cc.JumpTo(t,e,i,n,s)},cc.JumpTo.create=cc.jumpTo,cc.bezierAt=function(t,e,i,n,s){return Math.pow(1-s,3)*t+3*s*Math.pow(1-s,2)*e+3*Math.pow(s,2)*(1-s)*i+Math.pow(s,3)*n},cc.BezierBy=cc.ActionInterval.extend({_config:null,_startPosition:null,_previousPosition:null,ctor:function(t,e){cc.ActionInterval.prototype.ctor.call(this),this._config=[],this._startPosition=cc.p(0,0),this._previousPosition=cc.p(0,0),e&&this.initWithDuration(t,e)},initWithDuration:function(t,e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(this._config=e,!0)},clone:function(){var t=new cc.BezierBy;this._cloneDecoration(t);for(var e=[],i=0;i<this._config.length;i++){var n=this._config[i];e.push(cc.p(n.x,n.y))}return t.initWithDuration(this._duration,e),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t);var e=t.getPositionX();t=t.getPositionY(),this._previousPosition.x=e,this._previousPosition.y=t,this._startPosition.x=e,this._startPosition.y=t},update:function(t){if(t=this._computeEaseTime(t),this.target){var e=(s=this._config)[0].y,i=s[1].y,n=s[2].y,s=cc.bezierAt(0,s[0].x,s[1].x,s[2].x,t);if(t=cc.bezierAt(0,e,i,n,t),e=this._startPosition,cc.ENABLE_STACKABLE_ACTIONS){i=this.target.getPositionX(),n=this.target.getPositionY();var r=this._previousPosition;e.x=e.x+i-r.x,e.y=e.y+n-r.y,s+=e.x,t+=e.y,r.x=s,r.y=t,this.target.setPosition(s,t)}else this.target.setPosition(e.x+s,e.y+t)}},reverse:function(){var t=this._config;t=[cc.pAdd(t[1],cc.pNeg(t[2])),cc.pAdd(t[0],cc.pNeg(t[2])),cc.pNeg(t[2])],t=new cc.BezierBy(this._duration,t);return this._cloneDecoration(t),this._reverseEaseList(t),t}}),cc.bezierBy=function(t,e){return new cc.BezierBy(t,e)},cc.BezierBy.create=cc.bezierBy,cc.BezierTo=cc.BezierBy.extend({_toConfig:null,ctor:function(t,e){cc.BezierBy.prototype.ctor.call(this),this._toConfig=[],e&&this.initWithDuration(t,e)},initWithDuration:function(t,e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(this._toConfig=e,!0)},clone:function(){var t=new cc.BezierTo;return this._cloneDecoration(t),t.initWithDuration(this._duration,this._toConfig),t},startWithTarget:function(t){cc.BezierBy.prototype.startWithTarget.call(this,t),t=this._startPosition;var e=this._toConfig,i=this._config;i[0]=cc.pSub(e[0],t),i[1]=cc.pSub(e[1],t),i[2]=cc.pSub(e[2],t)}}),cc.bezierTo=function(t,e){return new cc.BezierTo(t,e)},cc.BezierTo.create=cc.bezierTo,cc.ScaleTo=cc.ActionInterval.extend({_scaleX:1,_scaleY:1,_startScaleX:1,_startScaleY:1,_endScaleX:0,_endScaleY:0,_deltaX:0,_deltaY:0,ctor:function(t,e,i){cc.ActionInterval.prototype.ctor.call(this),void 0!==e&&this.initWithDuration(t,e,i)},initWithDuration:function(t,e,i){return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(this._endScaleX=e,this._endScaleY=null!=i?i:e,!0)},clone:function(){var t=new cc.ScaleTo;return this._cloneDecoration(t),t.initWithDuration(this._duration,this._endScaleX,this._endScaleY),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),this._startScaleX=t.scaleX,this._startScaleY=t.scaleY,this._deltaX=this._endScaleX-this._startScaleX,this._deltaY=this._endScaleY-this._startScaleY},update:function(t){t=this._computeEaseTime(t),this.target&&(this.target.scaleX=this._startScaleX+this._deltaX*t,this.target.scaleY=this._startScaleY+this._deltaY*t)}}),cc.scaleTo=function(t,e,i){return new cc.ScaleTo(t,e,i)},cc.ScaleTo.create=cc.scaleTo,cc.ScaleBy=cc.ScaleTo.extend({startWithTarget:function(t){cc.ScaleTo.prototype.startWithTarget.call(this,t),this._deltaX=this._startScaleX*this._endScaleX-this._startScaleX,this._deltaY=this._startScaleY*this._endScaleY-this._startScaleY},reverse:function(){var t=new cc.ScaleBy(this._duration,1/this._endScaleX,1/this._endScaleY);return this._cloneDecoration(t),this._reverseEaseList(t),t},clone:function(){var t=new cc.ScaleBy;return this._cloneDecoration(t),t.initWithDuration(this._duration,this._endScaleX,this._endScaleY),t}}),cc.scaleBy=function(t,e,i){return new cc.ScaleBy(t,e,i)},cc.ScaleBy.create=cc.scaleBy,cc.Blink=cc.ActionInterval.extend({_times:0,_originalState:!1,ctor:function(t,e){cc.ActionInterval.prototype.ctor.call(this),void 0!==e&&this.initWithDuration(t,e)},initWithDuration:function(t,e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(this._times=e,!0)},clone:function(){var t=new cc.Blink;return this._cloneDecoration(t),t.initWithDuration(this._duration,this._times),t},update:function(t){if(t=this._computeEaseTime(t),this.target&&!this.isDone()){var e=1/this._times;this.target.visible=t%e>e/2}},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),this._originalState=t.visible},stop:function(){this.target.visible=this._originalState,cc.ActionInterval.prototype.stop.call(this)},reverse:function(){var t=new cc.Blink(this._duration,this._times);return this._cloneDecoration(t),this._reverseEaseList(t),t}}),cc.blink=function(t,e){return new cc.Blink(t,e)},cc.Blink.create=cc.blink,cc.FadeTo=cc.ActionInterval.extend({_toOpacity:0,_fromOpacity:0,ctor:function(t,e){cc.ActionInterval.prototype.ctor.call(this),void 0!==e&&this.initWithDuration(t,e)},initWithDuration:function(t,e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(this._toOpacity=e,!0)},clone:function(){var t=new cc.FadeTo;return this._cloneDecoration(t),t.initWithDuration(this._duration,this._toOpacity),t},update:function(t){t=this._computeEaseTime(t);var e=void 0!==this._fromOpacity?this._fromOpacity:255;this.target.opacity=e+(this._toOpacity-e)*t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),this._fromOpacity=t.opacity}}),cc.fadeTo=function(t,e){return new cc.FadeTo(t,e)},cc.FadeTo.create=cc.fadeTo,cc.FadeIn=cc.FadeTo.extend({_reverseAction:null,ctor:function(t){cc.FadeTo.prototype.ctor.call(this),null==t&&(t=0),this.initWithDuration(t,255)},reverse:function(){var t=new cc.FadeOut;return t.initWithDuration(this._duration,0),this._cloneDecoration(t),this._reverseEaseList(t),t},clone:function(){var t=new cc.FadeIn;return this._cloneDecoration(t),t.initWithDuration(this._duration,this._toOpacity),t},startWithTarget:function(t){this._reverseAction&&(this._toOpacity=this._reverseAction._fromOpacity),cc.FadeTo.prototype.startWithTarget.call(this,t)}}),cc.fadeIn=function(t){return new cc.FadeIn(t)},cc.FadeIn.create=cc.fadeIn,cc.FadeOut=cc.FadeTo.extend({ctor:function(t){cc.FadeTo.prototype.ctor.call(this),null==t&&(t=0),this.initWithDuration(t,0)},reverse:function(){var t=new cc.FadeIn;return t._reverseAction=this,t.initWithDuration(this._duration,255),this._cloneDecoration(t),this._reverseEaseList(t),t},clone:function(){var t=new cc.FadeOut;return this._cloneDecoration(t),t.initWithDuration(this._duration,this._toOpacity),t}}),cc.fadeOut=function(t){return new cc.FadeOut(t)},cc.FadeOut.create=cc.fadeOut,cc.TintTo=cc.ActionInterval.extend({_to:null,_from:null,ctor:function(t,e,i,n){cc.ActionInterval.prototype.ctor.call(this),this._to=cc.color(0,0,0),this._from=cc.color(0,0,0),void 0!==n&&this.initWithDuration(t,e,i,n)},initWithDuration:function(t,e,i,n){return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(this._to=cc.color(e,i,n),!0)},clone:function(){var t=new cc.TintTo;this._cloneDecoration(t);var e=this._to;return t.initWithDuration(this._duration,e.r,e.g,e.b),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),this._from=this.target.color},update:function(t){t=this._computeEaseTime(t);var e=this._from,i=this._to;e&&this.target.setColor(cc.color(e.r+(i.r-e.r)*t,e.g+(i.g-e.g)*t,e.b+(i.b-e.b)*t))}}),cc.tintTo=function(t,e,i,n){return new cc.TintTo(t,e,i,n)},cc.TintTo.create=cc.tintTo,cc.TintBy=cc.ActionInterval.extend({_deltaR:0,_deltaG:0,_deltaB:0,_fromR:0,_fromG:0,_fromB:0,ctor:function(t,e,i,n){cc.ActionInterval.prototype.ctor.call(this),void 0!==n&&this.initWithDuration(t,e,i,n)},initWithDuration:function(t,e,i,n){return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(this._deltaR=e,this._deltaG=i,this._deltaB=n,!0)},clone:function(){var t=new cc.TintBy;return this._cloneDecoration(t),t.initWithDuration(this._duration,this._deltaR,this._deltaG,this._deltaB),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),t=t.color,this._fromR=t.r,this._fromG=t.g,this._fromB=t.b},update:function(t){t=this._computeEaseTime(t),this.target.color=cc.color(this._fromR+this._deltaR*t,this._fromG+this._deltaG*t,this._fromB+this._deltaB*t)},reverse:function(){var t=new cc.TintBy(this._duration,-this._deltaR,-this._deltaG,-this._deltaB);return this._cloneDecoration(t),this._reverseEaseList(t),t}}),cc.tintBy=function(t,e,i,n){return new cc.TintBy(t,e,i,n)},cc.TintBy.create=cc.tintBy,cc.DelayTime=cc.ActionInterval.extend({update:function(t){},reverse:function(){var t=new cc.DelayTime(this._duration);return this._cloneDecoration(t),this._reverseEaseList(t),t},clone:function(){var t=new cc.DelayTime;return this._cloneDecoration(t),t.initWithDuration(this._duration),t}}),cc.delayTime=function(t){return new cc.DelayTime(t)},cc.DelayTime.create=cc.delayTime,cc.ReverseTime=cc.ActionInterval.extend({_other:null,ctor:function(t){cc.ActionInterval.prototype.ctor.call(this),this._other=null,t&&this.initWithAction(t)},initWithAction:function(t){if(!t)throw Error("cc.ReverseTime.initWithAction(): action must be non null");if(t===this._other)throw Error("cc.ReverseTime.initWithAction(): the action was already passed in.");return!!cc.ActionInterval.prototype.initWithDuration.call(this,t._duration)&&(this._other=t,!0)},clone:function(){var t=new cc.ReverseTime;return this._cloneDecoration(t),t.initWithAction(this._other.clone()),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),this._other.startWithTarget(t)},update:function(t){t=this._computeEaseTime(t),this._other&&this._other.update(1-t)},reverse:function(){return this._other.clone()},stop:function(){this._other.stop(),cc.Action.prototype.stop.call(this)}}),cc.reverseTime=function(t){return new cc.ReverseTime(t)},cc.ReverseTime.create=cc.reverseTime,cc.Animate=cc.ActionInterval.extend({_animation:null,_nextFrame:0,_origFrame:null,_executedLoops:0,_splitTimes:null,_currFrameIndex:0,ctor:function(t){cc.ActionInterval.prototype.ctor.call(this),this._splitTimes=[],t&&this.initWithAnimation(t)},getAnimation:function(){return this._animation},setAnimation:function(t){this._animation=t},getCurrentFrameIndex:function(){return this._currFrameIndex},initWithAnimation:function(t){if(!t)throw Error("cc.Animate.initWithAnimation(): animation must be non-NULL");var e=t.getDuration();if(this.initWithDuration(e*t.getLoops())){this._nextFrame=0,this.setAnimation(t),this._origFrame=null,this._executedLoops=0;var i=this._splitTimes,n=i.length=0,s=e/t.getTotalDelayUnits();t=t.getFrames(),cc.arrayVerifyType(t,cc.AnimationFrame);for(var r=0;r<t.length;r++){var o=n*s/e;n=n+t[r].getDelayUnits();i.push(o)}return!0}return!1},clone:function(){var t=new cc.Animate;return this._cloneDecoration(t),t.initWithAnimation(this._animation.clone()),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),this._animation.getRestoreOriginalFrame()&&(this._origFrame=t.getSpriteFrame()),this._executedLoops=this._nextFrame=0},update:function(t){1>(t=this._computeEaseTime(t))&&((0|(t*=this._animation.getLoops()))>this._executedLoops&&(this._nextFrame=0,this._executedLoops++),t%=1);for(var e=this._animation.getFrames(),i=e.length,n=this._splitTimes,s=this._nextFrame;s<i&&n[s]<=t;s++)_currFrameIndex=s,this.target.setSpriteFrame(e[_currFrameIndex].getSpriteFrame()),this._nextFrame=s+1},reverse:function(){var t=this._animation,e=t.getFrames(),i=[];if(cc.arrayVerifyType(e,cc.AnimationFrame),0<e.length)for(var n=e.length-1;0<=n;n--){var s=e[n];if(!s)break;i.push(s.clone())}return(e=new cc.Animation(i,t.getDelayPerUnit(),t.getLoops())).setRestoreOriginalFrame(t.getRestoreOriginalFrame()),t=new cc.Animate(e),this._cloneDecoration(t),this._reverseEaseList(t),t},stop:function(){this._animation.getRestoreOriginalFrame()&&this.target&&this.target.setSpriteFrame(this._origFrame),cc.Action.prototype.stop.call(this)}}),cc.animate=function(t){return new cc.Animate(t)},cc.Animate.create=cc.animate,cc.TargetedAction=cc.ActionInterval.extend({_action:null,_forcedTarget:null,ctor:function(t,e){cc.ActionInterval.prototype.ctor.call(this),e&&this.initWithTarget(t,e)},initWithTarget:function(t,e){return!!this.initWithDuration(e._duration)&&(this._forcedTarget=t,this._action=e,!0)},clone:function(){var t=new cc.TargetedAction;return this._cloneDecoration(t),t.initWithTarget(this._forcedTarget,this._action.clone()),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),this._action.startWithTarget(this._forcedTarget)},stop:function(){this._action.stop()},update:function(t){t=this._computeEaseTime(t),this._action.update(t)},getForcedTarget:function(){return this._forcedTarget},setForcedTarget:function(t){this._forcedTarget!==t&&(this._forcedTarget=t)}}),cc.targetedAction=function(t,e){return new cc.TargetedAction(t,e)},cc.TargetedAction.create=cc.targetedAction,cc.ActionInstant=cc.FiniteTimeAction.extend({isDone:function(){return!0},step:function(t){this.update(1)},update:function(t){},reverse:function(){return this.clone()},clone:function(){return new cc.ActionInstant}}),cc.Show=cc.ActionInstant.extend({update:function(t){this.target.visible=!0},reverse:function(){return new cc.Hide},clone:function(){return new cc.Show}}),cc.show=function(){return new cc.Show},cc.Show.create=cc.show,cc.Hide=cc.ActionInstant.extend({update:function(t){this.target.visible=!1},reverse:function(){return new cc.Show},clone:function(){return new cc.Hide}}),cc.hide=function(){return new cc.Hide},cc.Hide.create=cc.hide,cc.ToggleVisibility=cc.ActionInstant.extend({update:function(t){this.target.visible=!this.target.visible},reverse:function(){return new cc.ToggleVisibility},clone:function(){return new cc.ToggleVisibility}}),cc.toggleVisibility=function(){return new cc.ToggleVisibility},cc.ToggleVisibility.create=cc.toggleVisibility,cc.RemoveSelf=cc.ActionInstant.extend({_isNeedCleanUp:!0,ctor:function(t){cc.FiniteTimeAction.prototype.ctor.call(this),void 0!==t&&this.init(t)},update:function(t){this.target.removeFromParent(this._isNeedCleanUp)},init:function(t){return this._isNeedCleanUp=t,!0},reverse:function(){return new cc.RemoveSelf(this._isNeedCleanUp)},clone:function(){return new cc.RemoveSelf(this._isNeedCleanUp)}}),cc.removeSelf=function(t){return new cc.RemoveSelf(t)},cc.RemoveSelf.create=cc.removeSelf,cc.FlipX=cc.ActionInstant.extend({_flippedX:!1,ctor:function(t){cc.FiniteTimeAction.prototype.ctor.call(this),this._flippedX=!1,void 0!==t&&this.initWithFlipX(t)},initWithFlipX:function(t){return this._flippedX=t,!0},update:function(t){this.target.flippedX=this._flippedX},reverse:function(){return new cc.FlipX(!this._flippedX)},clone:function(){var t=new cc.FlipX;return t.initWithFlipX(this._flippedX),t}}),cc.flipX=function(t){return new cc.FlipX(t)},cc.FlipX.create=cc.flipX,cc.FlipY=cc.ActionInstant.extend({_flippedY:!1,ctor:function(t){cc.FiniteTimeAction.prototype.ctor.call(this),this._flippedY=!1,void 0!==t&&this.initWithFlipY(t)},initWithFlipY:function(t){return this._flippedY=t,!0},update:function(t){this.target.flippedY=this._flippedY},reverse:function(){return new cc.FlipY(!this._flippedY)},clone:function(){var t=new cc.FlipY;return t.initWithFlipY(this._flippedY),t}}),cc.flipY=function(t){return new cc.FlipY(t)},cc.FlipY.create=cc.flipY,cc.Place=cc.ActionInstant.extend({_x:0,_y:0,ctor:function(t,e){cc.FiniteTimeAction.prototype.ctor.call(this),this._y=this._x=0,void 0!==t&&(void 0!==t.x&&(e=t.y,t=t.x),this.initWithPosition(t,e))},initWithPosition:function(t,e){return this._x=t,this._y=e,!0},update:function(t){this.target.setPosition(this._x,this._y)},clone:function(){var t=new cc.Place;return t.initWithPosition(this._x,this._y),t}}),cc.place=function(t,e){return new cc.Place(t,e)},cc.Place.create=cc.place,cc.CallFunc=cc.ActionInstant.extend({_selectorTarget:null,_function:null,_data:null,ctor:function(t,e,i){cc.FiniteTimeAction.prototype.ctor.call(this),this.initWithFunction(t,e,i)},initWithFunction:function(t,e,i){return t&&(this._function=t),e&&(this._selectorTarget=e),void 0!==i&&(this._data=i),!0},execute:function(){this._function&&this._function.call(this._selectorTarget,this.target,this._data)},update:function(t){this.execute()},getTargetCallback:function(){return this._selectorTarget},setTargetCallback:function(t){t!==this._selectorTarget&&(this._selectorTarget&&(this._selectorTarget=null),this._selectorTarget=t)},clone:function(){var t=new cc.CallFunc;return t.initWithFunction(this._function,this._selectorTarget,this._data),t}}),cc.callFunc=function(t,e,i){return new cc.CallFunc(t,e,i)},cc.CallFunc.create=cc.callFunc,cc.ActionEase=cc.ActionInterval.extend({_inner:null,ctor:function(t){cc.ActionInterval.prototype.ctor.call(this),t&&this.initWithAction(t)},initWithAction:function(t){if(!t)throw Error("cc.ActionEase.initWithAction(): action must be non nil");return!!this.initWithDuration(t.getDuration())&&(this._inner=t,!0)},clone:function(){var t=new cc.ActionEase;return t.initWithAction(this._inner.clone()),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),this._inner.startWithTarget(this.target)},stop:function(){this._inner.stop(),cc.ActionInterval.prototype.stop.call(this)},update:function(t){this._inner.update(t)},reverse:function(){return new cc.ActionEase(this._inner.reverse())},getInnerAction:function(){return this._inner}}),cc.actionEase=function(t){return new cc.ActionEase(t)},cc.ActionEase.create=cc.actionEase,cc.EaseRateAction=cc.ActionEase.extend({_rate:0,ctor:function(t,e){cc.ActionEase.prototype.ctor.call(this),void 0!==e&&this.initWithAction(t,e)},setRate:function(t){this._rate=t},getRate:function(){return this._rate},initWithAction:function(t,e){return!!cc.ActionEase.prototype.initWithAction.call(this,t)&&(this._rate=e,!0)},clone:function(){var t=new cc.EaseRateAction;return t.initWithAction(this._inner.clone(),this._rate),t},reverse:function(){return new cc.EaseRateAction(this._inner.reverse(),1/this._rate)}}),cc.easeRateAction=function(t,e){return new cc.EaseRateAction(t,e)},cc.EaseRateAction.create=cc.easeRateAction,cc.EaseIn=cc.EaseRateAction.extend({update:function(t){this._inner.update(Math.pow(t,this._rate))},reverse:function(){return new cc.EaseIn(this._inner.reverse(),1/this._rate)},clone:function(){var t=new cc.EaseIn;return t.initWithAction(this._inner.clone(),this._rate),t}}),cc.EaseIn.create=function(t,e){return new cc.EaseIn(t,e)},cc.easeIn=function(t){return{_rate:t,easing:function(t){return Math.pow(t,this._rate)},reverse:function(){return cc.easeIn(1/this._rate)}}},cc.EaseOut=cc.EaseRateAction.extend({update:function(t){this._inner.update(Math.pow(t,1/this._rate))},reverse:function(){return new cc.EaseOut(this._inner.reverse(),1/this._rate)},clone:function(){var t=new cc.EaseOut;return t.initWithAction(this._inner.clone(),this._rate),t}}),cc.EaseOut.create=function(t,e){return new cc.EaseOut(t,e)},cc.easeOut=function(t){return{_rate:t,easing:function(t){return Math.pow(t,1/this._rate)},reverse:function(){return cc.easeOut(1/this._rate)}}},cc.EaseInOut=cc.EaseRateAction.extend({update:function(t){1>(t*=2)?this._inner.update(.5*Math.pow(t,this._rate)):this._inner.update(1-.5*Math.pow(2-t,this._rate))},clone:function(){var t=new cc.EaseInOut;return t.initWithAction(this._inner.clone(),this._rate),t},reverse:function(){return new cc.EaseInOut(this._inner.reverse(),this._rate)}}),cc.EaseInOut.create=function(t,e){return new cc.EaseInOut(t,e)},cc.easeInOut=function(t){return{_rate:t,easing:function(t){return 1>(t*=2)?.5*Math.pow(t,this._rate):1-.5*Math.pow(2-t,this._rate)},reverse:function(){return cc.easeInOut(this._rate)}}},cc.EaseExponentialIn=cc.ActionEase.extend({update:function(t){this._inner.update(0===t?0:Math.pow(2,10*(t-1)))},reverse:function(){return new cc.EaseExponentialOut(this._inner.reverse())},clone:function(){var t=new cc.EaseExponentialIn;return t.initWithAction(this._inner.clone()),t}}),cc.EaseExponentialIn.create=function(t){return new cc.EaseExponentialIn(t)},cc._easeExponentialInObj={easing:function(t){return 0===t?0:Math.pow(2,10*(t-1))},reverse:function(){return cc._easeExponentialOutObj}},cc.easeExponentialIn=function(){return cc._easeExponentialInObj},cc.EaseExponentialOut=cc.ActionEase.extend({update:function(t){this._inner.update(1===t?1:1-Math.pow(2,-10*t))},reverse:function(){return new cc.EaseExponentialIn(this._inner.reverse())},clone:function(){var t=new cc.EaseExponentialOut;return t.initWithAction(this._inner.clone()),t}}),cc.EaseExponentialOut.create=function(t){return new cc.EaseExponentialOut(t)},cc._easeExponentialOutObj={easing:function(t){return 1===t?1:1-Math.pow(2,-10*t)},reverse:function(){return cc._easeExponentialInObj}},cc.easeExponentialOut=function(){return cc._easeExponentialOutObj},cc.EaseExponentialInOut=cc.ActionEase.extend({update:function(t){1!==t&&0!==t&&(t=1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))),this._inner.update(t)},reverse:function(){return new cc.EaseExponentialInOut(this._inner.reverse())},clone:function(){var t=new cc.EaseExponentialInOut;return t.initWithAction(this._inner.clone()),t}}),cc.EaseExponentialInOut.create=function(t){return new cc.EaseExponentialInOut(t)},cc._easeExponentialInOutObj={easing:function(t){return 1!==t&&0!==t?1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1))):t},reverse:function(){return cc._easeExponentialInOutObj}},cc.easeExponentialInOut=function(){return cc._easeExponentialInOutObj},cc.EaseSineIn=cc.ActionEase.extend({update:function(t){t=0===t||1===t?t:-1*Math.cos(t*Math.PI/2)+1,this._inner.update(t)},reverse:function(){return new cc.EaseSineOut(this._inner.reverse())},clone:function(){var t=new cc.EaseSineIn;return t.initWithAction(this._inner.clone()),t}}),cc.EaseSineIn.create=function(t){return new cc.EaseSineIn(t)},cc._easeSineInObj={easing:function(t){return 0===t||1===t?t:-1*Math.cos(t*Math.PI/2)+1},reverse:function(){return cc._easeSineOutObj}},cc.easeSineIn=function(){return cc._easeSineInObj},cc.EaseSineOut=cc.ActionEase.extend({update:function(t){t=0===t||1===t?t:Math.sin(t*Math.PI/2),this._inner.update(t)},reverse:function(){return new cc.EaseSineIn(this._inner.reverse())},clone:function(){var t=new cc.EaseSineOut;return t.initWithAction(this._inner.clone()),t}}),cc.EaseSineOut.create=function(t){return new cc.EaseSineOut(t)},cc._easeSineOutObj={easing:function(t){return 0===t||1===t?t:Math.sin(t*Math.PI/2)},reverse:function(){return cc._easeSineInObj}},cc.easeSineOut=function(){return cc._easeSineOutObj},cc.EaseSineInOut=cc.ActionEase.extend({update:function(t){t=0===t||1===t?t:-.5*(Math.cos(Math.PI*t)-1),this._inner.update(t)},clone:function(){var t=new cc.EaseSineInOut;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseSineInOut(this._inner.reverse())}}),cc.EaseSineInOut.create=function(t){return new cc.EaseSineInOut(t)},cc._easeSineInOutObj={easing:function(t){return 0===t||1===t?t:-.5*(Math.cos(Math.PI*t)-1)},reverse:function(){return cc._easeSineInOutObj}},cc.easeSineInOut=function(){return cc._easeSineInOutObj},cc.EaseElastic=cc.ActionEase.extend({_period:.3,ctor:function(t,e){cc.ActionEase.prototype.ctor.call(this),t&&this.initWithAction(t,e)},getPeriod:function(){return this._period},setPeriod:function(t){this._period=t},initWithAction:function(t,e){return cc.ActionEase.prototype.initWithAction.call(this,t),this._period=null==e?.3:e,!0},reverse:function(){return cc.log("cc.EaseElastic.reverse(): it should be overridden in subclass."),null},clone:function(){var t=new cc.EaseElastic;return t.initWithAction(this._inner.clone(),this._period),t}}),cc.EaseElastic.create=function(t,e){return new cc.EaseElastic(t,e)},cc.EaseElasticIn=cc.EaseElastic.extend({update:function(t){var e=0;0===t||1===t?e=t:(e=this._period/4,t-=1,e=-Math.pow(2,10*t)*Math.sin((t-e)*Math.PI*2/this._period)),this._inner.update(e)},reverse:function(){return new cc.EaseElasticOut(this._inner.reverse(),this._period)},clone:function(){var t=new cc.EaseElasticIn;return t.initWithAction(this._inner.clone(),this._period),t}}),cc.EaseElasticIn.create=function(t,e){return new cc.EaseElasticIn(t,e)},cc._easeElasticInObj={easing:function(t){return 0===t||1===t?t:(t-=1,-Math.pow(2,10*t)*Math.sin((t-.075)*Math.PI*2/.3))},reverse:function(){return cc._easeElasticOutObj}},cc.easeElasticIn=function(t){return t&&.3!==t?{_period:t,easing:function(t){return 0===t||1===t?t:(t-=1,-Math.pow(2,10*t)*Math.sin((t-this._period/4)*Math.PI*2/this._period))},reverse:function(){return cc.easeElasticOut(this._period)}}:cc._easeElasticInObj},cc.EaseElasticOut=cc.EaseElastic.extend({update:function(t){var e=0;0===t||1===t?e=t:(e=this._period/4,e=Math.pow(2,-10*t)*Math.sin((t-e)*Math.PI*2/this._period)+1),this._inner.update(e)},reverse:function(){return new cc.EaseElasticIn(this._inner.reverse(),this._period)},clone:function(){var t=new cc.EaseElasticOut;return t.initWithAction(this._inner.clone(),this._period),t}}),cc.EaseElasticOut.create=function(t,e){return new cc.EaseElasticOut(t,e)},cc._easeElasticOutObj={easing:function(t){return 0===t||1===t?t:Math.pow(2,-10*t)*Math.sin((t-.075)*Math.PI*2/.3)+1},reverse:function(){return cc._easeElasticInObj}},cc.easeElasticOut=function(t){return t&&.3!==t?{_period:t,easing:function(t){return 0===t||1===t?t:Math.pow(2,-10*t)*Math.sin((t-this._period/4)*Math.PI*2/this._period)+1},reverse:function(){return cc.easeElasticIn(this._period)}}:cc._easeElasticOutObj},cc.EaseElasticInOut=cc.EaseElastic.extend({update:function(t){var e=0;e=this._period;if(0===t||1===t)e=t;else{e||(e=this._period=.3*1.5);var i=e/4;e=0>(t=2*t-1)?-.5*Math.pow(2,10*t)*Math.sin((t-i)*Math.PI*2/e):Math.pow(2,-10*t)*Math.sin((t-i)*Math.PI*2/e)*.5+1}this._inner.update(e)},reverse:function(){return new cc.EaseElasticInOut(this._inner.reverse(),this._period)},clone:function(){var t=new cc.EaseElasticInOut;return t.initWithAction(this._inner.clone(),this._period),t}}),cc.EaseElasticInOut.create=function(t,e){return new cc.EaseElasticInOut(t,e)},cc.easeElasticInOut=function(t){return{_period:t||.3,easing:function(t){var e=0;e=this._period;if(0===t||1===t)e=t;else{e||(e=this._period=.3*1.5);var i=e/4;e=0>(t=2*t-1)?-.5*Math.pow(2,10*t)*Math.sin((t-i)*Math.PI*2/e):Math.pow(2,-10*t)*Math.sin((t-i)*Math.PI*2/e)*.5+1}return e},reverse:function(){return cc.easeElasticInOut(this._period)}}},cc.EaseBounce=cc.ActionEase.extend({bounceTime:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},clone:function(){var t=new cc.EaseBounce;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseBounce(this._inner.reverse())}}),cc.EaseBounce.create=function(t){return new cc.EaseBounce(t)},cc.EaseBounceIn=cc.EaseBounce.extend({update:function(t){t=1-this.bounceTime(1-t),this._inner.update(t)},reverse:function(){return new cc.EaseBounceOut(this._inner.reverse())},clone:function(){var t=new cc.EaseBounceIn;return t.initWithAction(this._inner.clone()),t}}),cc.EaseBounceIn.create=function(t){return new cc.EaseBounceIn(t)},cc._bounceTime=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},cc._easeBounceInObj={easing:function(t){return 1-cc._bounceTime(1-t)},reverse:function(){return cc._easeBounceOutObj}},cc.easeBounceIn=function(){return cc._easeBounceInObj},cc.EaseBounceOut=cc.EaseBounce.extend({update:function(t){t=this.bounceTime(t),this._inner.update(t)},reverse:function(){return new cc.EaseBounceIn(this._inner.reverse())},clone:function(){var t=new cc.EaseBounceOut;return t.initWithAction(this._inner.clone()),t}}),cc.EaseBounceOut.create=function(t){return new cc.EaseBounceOut(t)},cc._easeBounceOutObj={easing:function(t){return cc._bounceTime(t)},reverse:function(){return cc._easeBounceInObj}},cc.easeBounceOut=function(){return cc._easeBounceOutObj},cc.EaseBounceInOut=cc.EaseBounce.extend({update:function(t){var e=.5>t?.5*(1-this.bounceTime(1-2*t)):.5*this.bounceTime(2*t-1)+.5;this._inner.update(e)},clone:function(){var t=new cc.EaseBounceInOut;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseBounceInOut(this._inner.reverse())}}),cc.EaseBounceInOut.create=function(t){return new cc.EaseBounceInOut(t)},cc._easeBounceInOutObj={easing:function(t){return.5>t?.5*(1-cc._bounceTime(1-2*t)):.5*cc._bounceTime(2*t-1)+.5},reverse:function(){return cc._easeBounceInOutObj}},cc.easeBounceInOut=function(){return cc._easeBounceInOutObj},cc.EaseBackIn=cc.ActionEase.extend({update:function(t){this._inner.update(0===t||1===t?t:t*t*(2.70158*t-1.70158))},reverse:function(){return new cc.EaseBackOut(this._inner.reverse())},clone:function(){var t=new cc.EaseBackIn;return t.initWithAction(this._inner.clone()),t}}),cc.EaseBackIn.create=function(t){return new cc.EaseBackIn(t)},cc._easeBackInObj={easing:function(t){return 0===t||1===t?t:t*t*(2.70158*t-1.70158)},reverse:function(){return cc._easeBackOutObj}},cc.easeBackIn=function(){return cc._easeBackInObj},cc.EaseBackOut=cc.ActionEase.extend({update:function(t){t-=1,this._inner.update(t*t*(2.70158*t+1.70158)+1)},reverse:function(){return new cc.EaseBackIn(this._inner.reverse())},clone:function(){var t=new cc.EaseBackOut;return t.initWithAction(this._inner.clone()),t}}),cc.EaseBackOut.create=function(t){return new cc.EaseBackOut(t)},cc._easeBackOutObj={easing:function(t){return(t-=1)*t*(2.70158*t+1.70158)+1},reverse:function(){return cc._easeBackInObj}},cc.easeBackOut=function(){return cc._easeBackOutObj},cc.EaseBackInOut=cc.ActionEase.extend({update:function(t){1>(t*=2)?this._inner.update(t*t*(3.5949095*t-2.5949095)/2):(t-=2,this._inner.update(t*t*(3.5949095*t+2.5949095)/2+1))},clone:function(){var t=new cc.EaseBackInOut;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseBackInOut(this._inner.reverse())}}),cc.EaseBackInOut.create=function(t){return new cc.EaseBackInOut(t)},cc._easeBackInOutObj={easing:function(t){return 1>(t*=2)?t*t*(3.5949095*t-2.5949095)/2:(t-=2)*t*(3.5949095*t+2.5949095)/2+1},reverse:function(){return cc._easeBackInOutObj}},cc.easeBackInOut=function(){return cc._easeBackInOutObj},cc.EaseBezierAction=cc.ActionEase.extend({_p0:null,_p1:null,_p2:null,_p3:null,ctor:function(t){cc.ActionEase.prototype.ctor.call(this,t)},_updateTime:function(t,e,i,n,s){return Math.pow(1-s,3)*t+3*s*Math.pow(1-s,2)*e+3*Math.pow(s,2)*(1-s)*i+Math.pow(s,3)*n},update:function(t){t=this._updateTime(this._p0,this._p1,this._p2,this._p3,t),this._inner.update(t)},clone:function(){var t=new cc.EaseBezierAction;return t.initWithAction(this._inner.clone()),t.setBezierParamer(this._p0,this._p1,this._p2,this._p3),t},reverse:function(){var t=new cc.EaseBezierAction(this._inner.reverse());return t.setBezierParamer(this._p3,this._p2,this._p1,this._p0),t},setBezierParamer:function(t,e,i,n){this._p0=t||0,this._p1=e||0,this._p2=i||0,this._p3=n||0}}),cc.EaseBezierAction.create=function(t){return new cc.EaseBezierAction(t)},cc.easeBezierAction=function(t,e,i,n){return{easing:function(s){return cc.EaseBezierAction.prototype._updateTime(t,e,i,n,s)},reverse:function(){return cc.easeBezierAction(n,i,e,t)}}},cc.EaseQuadraticActionIn=cc.ActionEase.extend({_updateTime:function(t){return Math.pow(t,2)},update:function(t){this._inner.update(this._updateTime(t))},clone:function(){var t=new cc.EaseQuadraticActionIn;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseQuadraticActionIn(this._inner.reverse())}}),cc.EaseQuadraticActionIn.create=function(t){return new cc.EaseQuadraticActionIn(t)},cc._easeQuadraticActionIn={easing:cc.EaseQuadraticActionIn.prototype._updateTime,reverse:function(){return cc._easeQuadraticActionIn}},cc.easeQuadraticActionIn=function(){return cc._easeQuadraticActionIn},cc.EaseQuadraticActionOut=cc.ActionEase.extend({_updateTime:function(t){return-t*(t-2)},update:function(t){this._inner.update(this._updateTime(t))},clone:function(){var t=new cc.EaseQuadraticActionOut;return t.initWithAction(),t},reverse:function(){return new cc.EaseQuadraticActionOut(this._inner.reverse())}}),cc.EaseQuadraticActionOut.create=function(t){return new cc.EaseQuadraticActionOut(t)},cc._easeQuadraticActionOut={easing:cc.EaseQuadraticActionOut.prototype._updateTime,reverse:function(){return cc._easeQuadraticActionOut}},cc.easeQuadraticActionOut=function(){return cc._easeQuadraticActionOut},cc.EaseQuadraticActionInOut=cc.ActionEase.extend({_updateTime:function(t){var e=t;return 1>(t*=2)?e=t*t*.5:e=-.5*(--t*(t-2)-1),e},update:function(t){this._inner.update(this._updateTime(t))},clone:function(){var t=new cc.EaseQuadraticActionInOut;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseQuadraticActionInOut(this._inner.reverse())}}),cc.EaseQuadraticActionInOut.create=function(t){return new cc.EaseQuadraticActionInOut(t)},cc._easeQuadraticActionInOut={easing:cc.EaseQuadraticActionInOut.prototype._updateTime,reverse:function(){return cc._easeQuadraticActionInOut}},cc.easeQuadraticActionInOut=function(){return cc._easeQuadraticActionInOut},cc.EaseQuarticActionIn=cc.ActionEase.extend({_updateTime:function(t){return t*t*t*t},update:function(t){this._inner.update(this._updateTime(t))},clone:function(){var t=new cc.EaseQuarticActionIn;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseQuarticActionIn(this._inner.reverse())}}),cc.EaseQuarticActionIn.create=function(t){return new cc.EaseQuarticActionIn(t)},cc._easeQuarticActionIn={easing:cc.EaseQuarticActionIn.prototype._updateTime,reverse:function(){return cc._easeQuarticActionIn}},cc.easeQuarticActionIn=function(){return cc._easeQuarticActionIn},cc.EaseQuarticActionOut=cc.ActionEase.extend({_updateTime:function(t){return-((t-=1)*t*t*t-1)},update:function(t){this._inner.update(this._updateTime(t))},clone:function(){var t=new cc.EaseQuarticActionOut;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseQuarticActionOut(this._inner.reverse())}}),cc.EaseQuarticActionOut.create=function(t){return new cc.EaseQuarticActionOut(t)},cc._easeQuarticActionOut={easing:cc.EaseQuarticActionOut.prototype._updateTime,reverse:function(){return cc._easeQuarticActionOut}},cc.easeQuarticActionOut=function(){return cc._easeQuarticActionOut},cc.EaseQuarticActionInOut=cc.ActionEase.extend({_updateTime:function(t){return 1>(t*=2)?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},update:function(t){this._inner.update(this._updateTime(t))},clone:function(){var t=new cc.EaseQuarticActionInOut;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseQuarticActionInOut(this._inner.reverse())}}),cc.EaseQuarticActionInOut.create=function(t){return new cc.EaseQuarticActionInOut(t)},cc._easeQuarticActionInOut={easing:cc.EaseQuarticActionInOut.prototype._updateTime,reverse:function(){return cc._easeQuarticActionInOut}},cc.easeQuarticActionInOut=function(){return cc._easeQuarticActionInOut},cc.EaseQuinticActionIn=cc.ActionEase.extend({_updateTime:function(t){return t*t*t*t*t},update:function(t){this._inner.update(this._updateTime(t))},clone:function(){var t=new cc.EaseQuinticActionIn;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseQuinticActionIn(this._inner.reverse())}}),cc.EaseQuinticActionIn.create=function(t){return new cc.EaseQuinticActionIn(t)},cc._easeQuinticActionIn={easing:cc.EaseQuinticActionIn.prototype._updateTime,reverse:function(){return cc._easeQuinticActionIn}},cc.easeQuinticActionIn=function(){return cc._easeQuinticActionIn},cc.EaseQuinticActionOut=cc.ActionEase.extend({_updateTime:function(t){return(t-=1)*t*t*t*t+1},update:function(t){this._inner.update(this._updateTime(t))},clone:function(){var t=new cc.EaseQuinticActionOut;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseQuinticActionOut(this._inner.reverse())}}),cc.EaseQuinticActionOut.create=function(t){return new cc.EaseQuinticActionOut(t)},cc._easeQuinticActionOut={easing:cc.EaseQuinticActionOut.prototype._updateTime,reverse:function(){return cc._easeQuinticActionOut}},cc.easeQuinticActionOut=function(){return cc._easeQuinticActionOut},cc.EaseQuinticActionInOut=cc.ActionEase.extend({_updateTime:function(t){return 1>(t*=2)?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},update:function(t){this._inner.update(this._updateTime(t))},clone:function(){var t=new cc.EaseQuinticActionInOut;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseQuinticActionInOut(this._inner.reverse())}}),cc.EaseQuinticActionInOut.create=function(t){return new cc.EaseQuinticActionInOut(t)},cc._easeQuinticActionInOut={easing:cc.EaseQuinticActionInOut.prototype._updateTime,reverse:function(){return cc._easeQuinticActionInOut}},cc.easeQuinticActionInOut=function(){return cc._easeQuinticActionInOut},cc.EaseCircleActionIn=cc.ActionEase.extend({_updateTime:function(t){return-1*(Math.sqrt(1-t*t)-1)},update:function(t){this._inner.update(this._updateTime(t))},clone:function(){var t=new cc.EaseCircleActionIn;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseCircleActionIn(this._inner.reverse())}}),cc.EaseCircleActionIn.create=function(t){return new cc.EaseCircleActionIn(t)},cc._easeCircleActionIn={easing:cc.EaseCircleActionIn.prototype._updateTime,reverse:function(){return cc._easeCircleActionIn}},cc.easeCircleActionIn=function(){return cc._easeCircleActionIn},cc.EaseCircleActionOut=cc.ActionEase.extend({_updateTime:function(t){return t-=1,Math.sqrt(1-t*t)},update:function(t){this._inner.update(this._updateTime(t))},clone:function(){var t=new cc.EaseCircleActionOut;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseCircleActionOut(this._inner.reverse())}}),cc.EaseCircleActionOut.create=function(t){return new cc.EaseCircleActionOut(t)},cc._easeCircleActionOut={easing:cc.EaseCircleActionOut.prototype._updateTime,reverse:function(){return cc._easeCircleActionOut}},cc.easeCircleActionOut=function(){return cc._easeCircleActionOut},cc.EaseCircleActionInOut=cc.ActionEase.extend({_updateTime:function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):(t-=2,.5*(Math.sqrt(1-t*t)+1))},update:function(t){this._inner.update(this._updateTime(t))},clone:function(){var t=new cc.EaseCircleActionInOut;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseCircleActionInOut(this._inner.reverse())}}),cc.EaseCircleActionInOut.create=function(t){return new cc.EaseCircleActionInOut(t)},cc._easeCircleActionInOut={easing:cc.EaseCircleActionInOut.prototype._updateTime,reverse:function(){return cc._easeCircleActionInOut}},cc.easeCircleActionInOut=function(){return cc._easeCircleActionInOut},cc.EaseCubicActionIn=cc.ActionEase.extend({_updateTime:function(t){return t*t*t},update:function(t){this._inner.update(this._updateTime(t))},clone:function(){var t=new cc.EaseCubicActionIn;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseCubicActionIn(this._inner.reverse())}}),cc.EaseCubicActionIn.create=function(t){return new cc.EaseCubicActionIn(t)},cc._easeCubicActionIn={easing:cc.EaseCubicActionIn.prototype._updateTime,reverse:function(){return cc._easeCubicActionIn}},cc.easeCubicActionIn=function(){return cc._easeCubicActionIn},cc.EaseCubicActionOut=cc.ActionEase.extend({_updateTime:function(t){return(t-=1)*t*t+1},update:function(t){this._inner.update(this._updateTime(t))},clone:function(){var t=new cc.EaseCubicActionOut;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseCubicActionOut(this._inner.reverse())}}),cc.EaseCubicActionOut.create=function(t){return new cc.EaseCubicActionOut(t)},cc._easeCubicActionOut={easing:cc.EaseCubicActionOut.prototype._updateTime,reverse:function(){return cc._easeCubicActionOut}},cc.easeCubicActionOut=function(){return cc._easeCubicActionOut},cc.EaseCubicActionInOut=cc.ActionEase.extend({_updateTime:function(t){return 1>(t*=2)?.5*t*t*t:.5*((t-=2)*t*t+2)},update:function(t){this._inner.update(this._updateTime(t))},clone:function(){var t=new cc.EaseCubicActionInOut;return t.initWithAction(this._inner.clone()),t},reverse:function(){return new cc.EaseCubicActionInOut(this._inner.reverse())}}),cc.EaseCubicActionInOut.create=function(t){return new cc.EaseCubicActionInOut(t)},cc._easeCubicActionInOut={easing:cc.EaseCubicActionInOut.prototype._updateTime,reverse:function(){return cc._easeCubicActionInOut}},cc.easeCubicActionInOut=function(){return cc._easeCubicActionInOut},cc.cardinalSplineAt=function(t,e,i,n,s,r,o){var a=r*r,c=a*r,h=(1-s)/2;s=h*(2*a-c-r);var l=h*(-c+a)+(2*c-3*a+1);if(r=h*(c-2*a+r)+(-2*c+3*a),c=h*(c-a),a=t.x*s+e.x*l+i.x*r+n.x*c,t=t.y*s+e.y*l+i.y*r+n.y*c,void 0===o)return cc.p(a,t);o.x=a,o.y=t},cc.reverseControlPoints=function(t){for(var e=[],i=t.length-1;0<=i;i--)e.push(cc.p(t[i].x,t[i].y));return e},cc.cloneControlPoints=function(t){for(var e=[],i=0;i<t.length;i++)e.push(cc.p(t[i].x,t[i].y));return e},cc.copyControlPoints=cc.cloneControlPoints,cc.getControlPointAt=function(t,e){return t[Math.min(t.length-1,Math.max(e,0))]},cc.reverseControlPointsInline=function(t){for(var e=t.length,i=0|e/2,n=0;n<i;++n){var s=t[n];t[n]=t[e-n-1],t[e-n-1]=s}},cc.CardinalSplineTo=cc.ActionInterval.extend({_points:null,_deltaT:0,_tension:0,_previousPosition:null,_accumulatedDiff:null,ctor:function(t,e,i){cc.ActionInterval.prototype.ctor.call(this),this._points=[],void 0!==i&&this.initWithDuration(t,e,i)},initWithDuration:function(t,e,i){if(!e||0===e.length)throw Error("Invalid configuration. It must at least have one control point");return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(this.setPoints(e),this._tension=i,!0)},clone:function(){var t=new cc.CardinalSplineTo;return t.initWithDuration(this._duration,cc.copyControlPoints(this._points),this._tension),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),this._deltaT=1/(this._points.length-1),this._previousPosition=cc.p(this.target.getPositionX(),this.target.getPositionY()),this._accumulatedDiff=cc.p(0,0)},update:function(t){t=this._computeEaseTime(t);var e,i=this._points;if(1===t)e=i.length-1,t=1;else{var n=this._deltaT;t=(t-n*(e=0|t/n))/n}e=cc.cardinalSplineAt(cc.getControlPointAt(i,e-1),cc.getControlPointAt(i,e-0),cc.getControlPointAt(i,e+1),cc.getControlPointAt(i,e+2),this._tension,t),cc.ENABLE_STACKABLE_ACTIONS&&(i=this.target.getPositionX()-this._previousPosition.x,t=this.target.getPositionY()-this._previousPosition.y,0!==i||0!==t)&&(i=(n=this._accumulatedDiff).x+i,t=n.y+t,n.x=i,n.y=t,e.x+=i,e.y+=t),this.updatePosition(e)},reverse:function(){var t=cc.reverseControlPoints(this._points);return cc.cardinalSplineTo(this._duration,t,this._tension)},updatePosition:function(t){this.target.setPosition(t),this._previousPosition=t},getPoints:function(){return this._points},setPoints:function(t){this._points=t}}),cc.cardinalSplineTo=function(t,e,i){return new cc.CardinalSplineTo(t,e,i)},cc.CardinalSplineTo.create=cc.cardinalSplineTo,cc.CardinalSplineBy=cc.CardinalSplineTo.extend({_startPosition:null,ctor:function(t,e,i){cc.CardinalSplineTo.prototype.ctor.call(this),this._startPosition=cc.p(0,0),void 0!==i&&this.initWithDuration(t,e,i)},startWithTarget:function(t){cc.CardinalSplineTo.prototype.startWithTarget.call(this,t),this._startPosition.x=t.getPositionX(),this._startPosition.y=t.getPositionY()},reverse:function(){for(var t,e=this._points.slice(),i=e[0],n=1;n<e.length;++n)t=e[n],e[n]=cc.pSub(t,i),i=t;for(i=(e=cc.reverseControlPoints(e))[e.length-1],e.pop(),i.x=-i.x,i.y=-i.y,e.unshift(i),n=1;n<e.length;++n)(t=e[n]).x=-t.x,t.y=-t.y,t.x+=i.x,t.y+=i.y,i=e[n]=t;return cc.cardinalSplineBy(this._duration,e,this._tension)},updatePosition:function(t){var e=this._startPosition,i=t.x+e.x;t=t.y+e.y,this._previousPosition.x=i,this._previousPosition.y=t,this.target.setPosition(i,t)},clone:function(){var t=new cc.CardinalSplineBy;return t.initWithDuration(this._duration,cc.copyControlPoints(this._points),this._tension),t}}),cc.cardinalSplineBy=function(t,e,i){return new cc.CardinalSplineBy(t,e,i)},cc.CardinalSplineBy.create=cc.cardinalSplineBy,cc.CatmullRomTo=cc.CardinalSplineTo.extend({ctor:function(t,e){e&&this.initWithDuration(t,e)},initWithDuration:function(t,e){return cc.CardinalSplineTo.prototype.initWithDuration.call(this,t,e,.5)},clone:function(){var t=new cc.CatmullRomTo;return t.initWithDuration(this._duration,cc.copyControlPoints(this._points)),t}}),cc.catmullRomTo=function(t,e){return new cc.CatmullRomTo(t,e)},cc.CatmullRomTo.create=cc.catmullRomTo,cc.CatmullRomBy=cc.CardinalSplineBy.extend({ctor:function(t,e){cc.CardinalSplineBy.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},initWithDuration:function(t,e){return cc.CardinalSplineTo.prototype.initWithDuration.call(this,t,e,.5)},clone:function(){var t=new cc.CatmullRomBy;return t.initWithDuration(this._duration,cc.copyControlPoints(this._points)),t}}),cc.catmullRomBy=function(t,e){return new cc.CatmullRomBy(t,e)},cc.CatmullRomBy.create=cc.catmullRomBy,cc.ActionTweenDelegate=cc.Class.extend({updateTweenAction:function(t,e){}}),cc.ActionTween=cc.ActionInterval.extend({key:"",from:0,to:0,delta:0,ctor:function(t,e,i,n){cc.ActionInterval.prototype.ctor.call(this),this.key="",void 0!==n&&this.initWithDuration(t,e,i,n)},initWithDuration:function(t,e,i,n){return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(this.key=e,this.to=n,this.from=i,!0)},startWithTarget:function(t){if(!t||!t.updateTweenAction)throw Error("cc.ActionTween.startWithTarget(): target must be non-null, and target must implement updateTweenAction function");cc.ActionInterval.prototype.startWithTarget.call(this,t),this.delta=this.to-this.from},update:function(t){this.target.updateTweenAction(this.to-this.delta*(1-t),this.key)},reverse:function(){return new cc.ActionTween(this.duration,this.key,this.to,this.from)},clone:function(){var t=new cc.ActionTween;return t.initWithDuration(this._duration,this.key,this.from,this.to),t}}),cc.actionTween=function(t,e,i,n){return new cc.ActionTween(t,e,i,n)},cc.ActionTween.create=cc.actionTween,cc.GridAction=cc.ActionInterval.extend({_gridSize:null,_gridNodeTarget:null,ctor:function(t,e){cc.sys._checkWebGLRenderMode(),cc.ActionInterval.prototype.ctor.call(this),this._gridSize=cc.size(0,0),e&&this.initWithDuration(t,e)},_cacheTargetAsGridNode:function(t){this._gridNodeTarget=t},clone:function(){var t=new cc.GridAction,e=this._gridSize;return t.initWithDuration(this._duration,cc.size(e.width,e.height)),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),cc.renderer.childrenOrderDirty=!0,this._cacheTargetAsGridNode(t);var e=this.getGrid();(t=this._gridNodeTarget.getGrid())&&0<t.getReuseGrid()?(e=t.getGridSize(),t.isActive()&&e.width===this._gridSize.width&&e.height===this._gridSize.height&&t.reuse()):(t&&t.isActive()&&t.setActive(!1),this._gridNodeTarget.setGrid(e),this._gridNodeTarget.getGrid().setActive(!0))},reverse:function(){return new cc.ReverseTime(this)},initWithDuration:function(t,e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(this._gridSize.width=e.width,this._gridSize.height=e.height,!0)},getGrid:function(){cc.log("cc.GridAction.getGrid(): it should be overridden in subclass.")}}),cc.gridAction=function(t,e){return new cc.GridAction(t,e)},cc.GridAction.create=cc.gridAction,cc.Grid3DAction=cc.GridAction.extend({getGrid:function(){return new cc.Grid3D(this._gridSize,void 0,void 0,this._gridNodeTarget.getGridRect())},getGridRect:function(){return this._gridNodeTarget.getGridRect()},vertex:function(t){return this.getVertex(t)},getVertex:function(t){return this.target.grid.getVertex(t)},originalVertex:function(t){return this.getOriginalVertex(t)},getOriginalVertex:function(t){return this.target.grid.originalVertex(t)},setVertex:function(t,e){this.target.grid.setVertex(t,e)}}),cc.grid3DAction=function(t,e){return new cc.Grid3DAction(t,e)},cc.Grid3DAction.create=cc.grid3DAction,cc.TiledGrid3DAction=cc.GridAction.extend({tile:function(t){return this.getTile(t)},getTile:function(t){return this.target.grid.tile(t)},originalTile:function(t){return this.getOriginalTile(t)},getOriginalTile:function(t){return this.target.grid.originalTile(t)},setTile:function(t,e){this.target.grid.setTile(t,e)},getGrid:function(){return new cc.TiledGrid3D(this._gridSize,void 0,void 0,this._gridNodeTarget.getGridRect())}}),cc.tiledGrid3DAction=function(t,e){return new cc.TiledGrid3DAction(t,e)},cc.TiledGrid3DAction.create=cc.tiledGrid3DAction,cc.StopGrid=cc.ActionInstant.extend({startWithTarget:function(t){cc.ActionInstant.prototype.startWithTarget.call(this,t),cc.renderer.childrenOrderDirty=!0,(t=this.target.grid)&&t.isActive()&&t.setActive(!1)}}),cc.stopGrid=function(){return new cc.StopGrid},cc.StopGrid.create=cc.stopGrid,cc.ReuseGrid=cc.ActionInstant.extend({_times:null,ctor:function(t){cc.ActionInstant.prototype.ctor.call(this),void 0!==t&&this.initWithTimes(t)},initWithTimes:function(t){return this._times=t,!0},startWithTarget:function(t){cc.ActionInstant.prototype.startWithTarget.call(this,t),cc.renderer.childrenOrderDirty=!0,this.target.grid&&this.target.grid.isActive()&&this.target.grid.setReuseGrid(this.target.grid.getReuseGrid()+this._times)}}),cc.reuseGrid=function(t){return new cc.ReuseGrid(t)},cc.ReuseGrid.create=cc.reuseGrid,cc.Waves3D=cc.Grid3DAction.extend({_waves:0,_amplitude:0,_amplitudeRate:0,ctor:function(t,e,i,n){cc.GridAction.prototype.ctor.call(this),void 0!==n&&this.initWithDuration(t,e,i,n)},getAmplitude:function(){return this._amplitude},setAmplitude:function(t){this._amplitude=t},getAmplitudeRate:function(){return this._amplitudeRate},setAmplitudeRate:function(t){this._amplitudeRate=t},initWithDuration:function(t,e,i,n){return!!cc.Grid3DAction.prototype.initWithDuration.call(this,t,e)&&(this._waves=i,this._amplitude=n,this._amplitudeRate=1,!0)},update:function(t){for(var e=this._gridSize,i=this._amplitude,n=cc.p(0,0),s=this._amplitudeRate,r=this._waves,o=0;o<e.width+1;++o)for(var a=0;a<e.height+1;++a){n.x=o,n.y=a;var c=this.originalVertex(n);c.z+=Math.sin(Math.PI*t*r*2+.01*(c.y+c.x))*i*s,this.setVertex(n,c)}}}),cc.waves3D=function(t,e,i,n){return new cc.Waves3D(t,e,i,n)},cc.Waves3D.create=cc.waves3D,cc.FlipX3D=cc.Grid3DAction.extend({ctor:function(t){void 0!==t?cc.GridAction.prototype.ctor.call(this,t,cc.size(1,1)):cc.GridAction.prototype.ctor.call(this)},initWithDuration:function(t){return cc.Grid3DAction.prototype.initWithDuration.call(this,t,cc.size(1,1))},initWithSize:function(t,e){return 1!==t.width||1!==t.height?(cc.log("Grid size must be (1,1)"),!1):cc.Grid3DAction.prototype.initWithDuration.call(this,e,t)},update:function(t){var e=Math.PI*t;t=Math.sin(e);var i=Math.cos(e/2);e=new cc.Vertex3F;(o=cc.p(0,0)).x=o.y=1;var n=this.originalVertex(o);o.x=o.y=0;var s,r,o=this.originalVertex(o),a=n.x,c=o.x;a>c?(n=cc.p(0,0),o=cc.p(0,1),s=cc.p(1,0),r=cc.p(1,1)):(s=cc.p(0,0),r=cc.p(0,1),n=cc.p(1,0),o=cc.p(1,1),a=c),e.x=a-a*i,e.z=Math.abs(parseFloat(a*t/4)),(t=this.originalVertex(n)).x=e.x,t.z+=e.z,this.setVertex(n,t),(t=this.originalVertex(o)).x=e.x,t.z+=e.z,this.setVertex(o,t),(t=this.originalVertex(s)).x-=e.x,t.z-=e.z,this.setVertex(s,t),(t=this.originalVertex(r)).x-=e.x,t.z-=e.z,this.setVertex(r,t)}}),cc.flipX3D=function(t){return new cc.FlipX3D(t)},cc.FlipX3D.create=cc.flipX3D,cc.FlipY3D=cc.FlipX3D.extend({ctor:function(t){void 0!==t?cc.GridAction.prototype.ctor.call(this,t,cc.size(1,1)):cc.GridAction.prototype.ctor.call(this)},update:function(t){var e=Math.PI*t;t=Math.sin(e);var i=Math.cos(e/2);e=new cc.Vertex3F;(o=cc.p(0,0)).x=o.y=1;var n=this.originalVertex(o);o.x=o.y=0;var s,r,o=this.originalVertex(o),a=n.y,c=o.y;a>c?(n=cc.p(0,0),o=cc.p(0,1),s=cc.p(1,0),r=cc.p(1,1)):(o=cc.p(0,0),n=cc.p(0,1),r=cc.p(1,0),s=cc.p(1,1),a=c),e.y=a-a*i,e.z=Math.abs(parseFloat(a*t)/4),(t=this.originalVertex(n)).y=e.y,t.z+=e.z,this.setVertex(n,t),(t=this.originalVertex(o)).y-=e.y,t.z-=e.z,this.setVertex(o,t),(t=this.originalVertex(s)).y=e.y,t.z+=e.z,this.setVertex(s,t),(t=this.originalVertex(r)).y-=e.y,t.z-=e.z,this.setVertex(r,t)}}),cc.flipY3D=function(t){return new cc.FlipY3D(t)},cc.FlipY3D.create=cc.flipY3D,cc.Lens3D=cc.Grid3DAction.extend({_position:null,_radius:0,_lensEffect:0,_concave:!1,_dirty:!1,ctor:function(t,e,i,n){cc.GridAction.prototype.ctor.call(this),this._position=cc.p(0,0),void 0!==n&&this.initWithDuration(t,e,i,n)},getLensEffect:function(){return this._lensEffect},setLensEffect:function(t){this._lensEffect=t},setConcave:function(t){this._concave=t},getPosition:function(){return this._position},setPosition:function(t){cc.pointEqualToPoint(t,this._position)||(this._position.x=t.x,this._position.y=t.y,this._dirty=!0)},initWithDuration:function(t,e,i,n){return!!cc.Grid3DAction.prototype.initWithDuration.call(this,t,e)&&(this.setPosition(i),this._radius=n,this._lensEffect=.7,this._dirty=!0)},update:function(t){if(this._dirty){t=this._gridSize.width;for(var e,i,n,s=this._gridSize.height,r=this._radius,o=this._lensEffect,a=cc.p(0,0),c=cc.p(0,0),h=0;h<t+1;++h)for(var l=0;l<s+1;++l)a.x=h,a.y=l,e=this.originalVertex(a),c.x=this._position.x-e.x,c.y=this._position.y-e.y,(i=cc.pLength(c))<r&&(i=r-i,0===(i/=r)&&(i=.001),i=Math.log(i)*o,n=Math.exp(i)*r,0<(i=cc.pLength(c))&&(c.x/=i,c.y/=i,c.x*=n,c.y*=n,e.z+=cc.pLength(c)*o)),this.setVertex(a,e);this._dirty=!1}}}),cc.lens3D=function(t,e,i,n){return new cc.Lens3D(t,e,i,n)},cc.Lens3D.create=cc.lens3D,cc.Ripple3D=cc.Grid3DAction.extend({_position:null,_radius:0,_waves:0,_amplitude:0,_amplitudeRate:0,ctor:function(t,e,i,n,s,r){cc.GridAction.prototype.ctor.call(this),this._position=cc.p(0,0),void 0!==r&&this.initWithDuration(t,e,i,n,s,r)},getPosition:function(){return this._position},setPosition:function(t){this._position.x=t.x,this._position.y=t.y},getAmplitude:function(){return this._amplitude},setAmplitude:function(t){this._amplitude=t},getAmplitudeRate:function(){return this._amplitudeRate},setAmplitudeRate:function(t){this._amplitudeRate=t},initWithDuration:function(t,e,i,n,s,r){return!!cc.Grid3DAction.prototype.initWithDuration.call(this,t,e)&&(this.setPosition(i),this._radius=n,this._waves=s,this._amplitude=r,this._amplitudeRate=1,!0)},update:function(t){for(var e,i,n=this._gridSize.width,s=this._gridSize.height,r=cc.p(0,0),o=this._radius,a=this._waves,c=this._amplitude,h=this._amplitudeRate,l=cc.p(0,0),u=0;u<n+1;++u)for(var d=0;d<s+1;++d){if(r.x=u,r.y=d,e=this.originalVertex(r),l.x=this._position.x-e.x,l.y=this._position.y-e.y,(i=cc.pLength(l))<o){i=o-i;var _=Math.pow(i/o,2);e.z+=Math.sin(t*Math.PI*a*2+.1*i)*c*h*_}this.setVertex(r,e)}}}),cc.ripple3D=function(t,e,i,n,s,r){return new cc.Ripple3D(t,e,i,n,s,r)},cc.Ripple3D.create=cc.ripple3D,cc.Shaky3D=cc.Grid3DAction.extend({_randRange:0,_shakeZ:!1,ctor:function(t,e,i,n){cc.GridAction.prototype.ctor.call(this),void 0!==n&&this.initWithDuration(t,e,i,n)},initWithDuration:function(t,e,i,n){return!!cc.Grid3DAction.prototype.initWithDuration.call(this,t,e)&&(this._randRange=i,this._shakeZ=n,!0)},update:function(t){t=this._gridSize.width;for(var e,i=this._gridSize.height,n=this._randRange,s=this._shakeZ,r=cc.p(0,0),o=0;o<t+1;++o)for(var a=0;a<i+1;++a)r.x=o,r.y=a,(e=this.originalVertex(r)).x+=cc.rand()%(2*n)-n,e.y+=cc.rand()%(2*n)-n,s&&(e.z+=cc.rand()%(2*n)-n),this.setVertex(r,e)}}),cc.shaky3D=function(t,e,i,n){return new cc.Shaky3D(t,e,i,n)},cc.Shaky3D.create=cc.shaky3D,cc.Liquid=cc.Grid3DAction.extend({_waves:0,_amplitude:0,_amplitudeRate:0,ctor:function(t,e,i,n){cc.GridAction.prototype.ctor.call(this),void 0!==n&&this.initWithDuration(t,e,i,n)},getAmplitude:function(){return this._amplitude},setAmplitude:function(t){this._amplitude=t},getAmplitudeRate:function(){return this._amplitudeRate},setAmplitudeRate:function(t){this._amplitudeRate=t},initWithDuration:function(t,e,i,n){return!!cc.Grid3DAction.prototype.initWithDuration.call(this,t,e)&&(this._waves=i,this._amplitude=n,this._amplitudeRate=1,!0)},update:function(t){for(var e,i=this._gridSize.width,n=this._gridSize.height,s=cc.p(0,0),r=this._waves,o=this._amplitude,a=this._amplitudeRate,c=1;c<i;++c)for(var h=1;h<n;++h)s.x=c,s.y=h,(e=this.originalVertex(s)).x+=Math.sin(t*Math.PI*r*2+.01*e.x)*o*a,e.y+=Math.sin(t*Math.PI*r*2+.01*e.y)*o*a,this.setVertex(s,e)}}),cc.liquid=function(t,e,i,n){return new cc.Liquid(t,e,i,n)},cc.Liquid.create=cc.liquid,cc.Waves=cc.Grid3DAction.extend({_waves:0,_amplitude:0,_amplitudeRate:0,_vertical:!1,_horizontal:!1,ctor:function(t,e,i,n,s,r){cc.GridAction.prototype.ctor.call(this),void 0!==r&&this.initWithDuration(t,e,i,n,s,r)},getAmplitude:function(){return this._amplitude},setAmplitude:function(t){this._amplitude=t},getAmplitudeRate:function(){return this._amplitudeRate},setAmplitudeRate:function(t){this._amplitudeRate=t},initWithDuration:function(t,e,i,n,s,r){return!!cc.Grid3DAction.prototype.initWithDuration.call(this,t,e)&&(this._waves=i,this._amplitude=n,this._amplitudeRate=1,this._horizontal=s,this._vertical=r,!0)},update:function(t){for(var e,i=this._gridSize.width,n=this._gridSize.height,s=cc.p(0,0),r=this._vertical,o=this._horizontal,a=this._waves,c=this._amplitude,h=this._amplitudeRate,l=0;l<i+1;++l)for(var u=0;u<n+1;++u)s.x=l,s.y=u,e=this.originalVertex(s),r&&(e.x+=Math.sin(t*Math.PI*a*2+.01*e.y)*c*h),o&&(e.y+=Math.sin(t*Math.PI*a*2+.01*e.x)*c*h),this.setVertex(s,e)}}),cc.waves=function(t,e,i,n,s,r){return new cc.Waves(t,e,i,n,s,r)},cc.Waves.create=cc.waves,cc.Twirl=cc.Grid3DAction.extend({_position:null,_twirls:0,_amplitude:0,_amplitudeRate:0,ctor:function(t,e,i,n,s){cc.GridAction.prototype.ctor.call(this),this._position=cc.p(0,0),void 0!==s&&this.initWithDuration(t,e,i,n,s)},getPosition:function(){return this._position},setPosition:function(t){this._position.x=t.x,this._position.y=t.y},getAmplitude:function(){return this._amplitude},setAmplitude:function(t){this._amplitude=t},getAmplitudeRate:function(){return this._amplitudeRate},setAmplitudeRate:function(t){this._amplitudeRate=t},initWithDuration:function(t,e,i,n,s){return!!cc.Grid3DAction.prototype.initWithDuration.call(this,t,e)&&(this.setPosition(i),this._twirls=n,this._amplitude=s,this._amplitudeRate=1,!0)},update:function(t){for(var e,i,n,s=this._position,r=this._gridSize.width,o=this._gridSize.height,a=cc.p(0,0),c=.1*this._amplitude*this._amplitudeRate,h=this._twirls,l=cc.p(0,0),u=0;u<r+1;++u)for(var d=0;d<o+1;++d)a.x=u,a.y=d,e=this.originalVertex(a),l.x=u-r/2,l.y=d-o/2,i=cc.pLength(l)*Math.cos(Math.PI/2+t*Math.PI*h*2)*c,n=Math.sin(i)*(e.y-s.y)+Math.cos(i)*(e.x-s.x),i=Math.cos(i)*(e.y-s.y)-Math.sin(i)*(e.x-s.x),e.x=s.x+n,e.y=s.y+i,this.setVertex(a,e)}}),cc.twirl=function(t,e,i,n,s){return new cc.Twirl(t,e,i,n,s)},cc.Twirl.create=cc.twirl,cc.ShakyTiles3D=cc.TiledGrid3DAction.extend({_randRange:0,_shakeZ:!1,ctor:function(t,e,i,n){cc.GridAction.prototype.ctor.call(this),void 0!==n&&this.initWithDuration(t,e,i,n)},initWithDuration:function(t,e,i,n){return!!cc.TiledGrid3DAction.prototype.initWithDuration.call(this,t,e)&&(this._randRange=i,this._shakeZ=n,!0)},update:function(t){t=this._gridSize;for(var e=this._randRange,i=cc.p(0,0),n=0;n<t.width;++n)for(var s=0;s<t.height;++s){i.x=n,i.y=s;var r=this.originalTile(i);r.bl.x+=cc.rand()%(2*e)-e,r.br.x+=cc.rand()%(2*e)-e,r.tl.x+=cc.rand()%(2*e)-e,r.tr.x+=cc.rand()%(2*e)-e,r.bl.y+=cc.rand()%(2*e)-e,r.br.y+=cc.rand()%(2*e)-e,r.tl.y+=cc.rand()%(2*e)-e,r.tr.y+=cc.rand()%(2*e)-e,this._shakeZ&&(r.bl.z+=cc.rand()%(2*e)-e,r.br.z+=cc.rand()%(2*e)-e,r.tl.z+=cc.rand()%(2*e)-e,r.tr.z+=cc.rand()%(2*e)-e),this.setTile(i,r)}}}),cc.shakyTiles3D=function(t,e,i,n){return new cc.ShakyTiles3D(t,e,i,n)},cc.ShakyTiles3D.create=cc.shakyTiles3D,cc.ShatteredTiles3D=cc.TiledGrid3DAction.extend({_randRange:0,_once:!1,_shatterZ:!1,ctor:function(t,e,i,n){cc.GridAction.prototype.ctor.call(this),void 0!==n&&this.initWithDuration(t,e,i,n)},initWithDuration:function(t,e,i,n){return!!cc.TiledGrid3DAction.prototype.initWithDuration.call(this,t,e)&&(this._once=!1,this._randRange=i,this._shatterZ=n,!0)},update:function(t){if(!1===this._once){t=this._gridSize;for(var e,i=this._randRange,n=cc.p(0,0),s=0;s<t.width;++s)for(var r=0;r<t.height;++r)n.x=s,n.y=r,(e=this.originalTile(n)).bl.x+=cc.rand()%(2*i)-i,e.br.x+=cc.rand()%(2*i)-i,e.tl.x+=cc.rand()%(2*i)-i,e.tr.x+=cc.rand()%(2*i)-i,e.bl.y+=cc.rand()%(2*i)-i,e.br.y+=cc.rand()%(2*i)-i,e.tl.y+=cc.rand()%(2*i)-i,e.tr.y+=cc.rand()%(2*i)-i,this._shatterZ&&(e.bl.z+=cc.rand()%(2*i)-i,e.br.z+=cc.rand()%(2*i)-i,e.tl.z+=cc.rand()%(2*i)-i,e.tr.z+=cc.rand()%(2*i)-i),this.setTile(n,e);this._once=!0}}}),cc.shatteredTiles3D=function(t,e,i,n){return new cc.ShatteredTiles3D(t,e,i,n)},cc.ShatteredTiles3D.create=cc.shatteredTiles3D,cc.Tile=function(t,e,i){this.position=t||cc.p(0,0),this.startPosition=e||cc.p(0,0),this.delta=i||cc.p(0,0)},cc.ShuffleTiles=cc.TiledGrid3DAction.extend({_seed:0,_tilesCount:0,_tilesOrder:null,_tiles:null,ctor:function(t,e,i){cc.GridAction.prototype.ctor.call(this),this._tilesOrder=[],this._tiles=[],void 0!==i&&this.initWithDuration(t,e,i)},initWithDuration:function(t,e,i){return!!cc.TiledGrid3DAction.prototype.initWithDuration.call(this,t,e)&&(this._seed=i,this._tilesOrder.length=0,this._tiles.length=0,!0)},shuffle:function(t,e){for(var i=e-1;0<=i;i--){var n=0|cc.rand()%(i+1),s=t[i];t[i]=t[n],t[n]=s}},getDelta:function(t){var e=this._gridSize,i=t.width*e.height+t.height;return cc.size(this._tilesOrder[i]/e.height-t.width,this._tilesOrder[i]%e.height-t.height)},placeTile:function(t,e){var i=this.originalTile(t),n=this.target.grid.getStep(),s=e.position;i.bl.x+=s.x*n.x,i.bl.y+=s.y*n.y,i.br.x+=s.x*n.x,i.br.y+=s.y*n.y,i.tl.x+=s.x*n.x,i.tl.y+=s.y*n.y,i.tr.x+=s.x*n.x,i.tr.y+=s.y*n.y,this.setTile(t,i)},startWithTarget:function(t){cc.TiledGrid3DAction.prototype.startWithTarget.call(this,t),t=this._gridSize,this._tilesCount=t.width*t.height;for(var e=(i=this._tilesOrder).length=0;e<this._tilesCount;++e)i[e]=e;this.shuffle(i,this._tilesCount);e=(i=this._tiles).length=0;for(var i,n=cc.size(0,0),s=0;s<t.width;++s)for(var r=0;r<t.height;++r)i[e]=new cc.Tile,i[e].position=cc.p(s,r),i[e].startPosition=cc.p(s,r),n.width=s,n.height=r,i[e].delta=this.getDelta(n),++e},update:function(t){for(var e,i=0,n=this._gridSize,s=this._tiles,r=cc.p(0,0),o=0;o<n.width;++o)for(var a=0;a<n.height;++a)r.x=o,r.y=a,(e=s[i]).position.x=e.delta.width*t,e.position.y=e.delta.height*t,this.placeTile(r,e),++i}}),cc.shuffleTiles=function(t,e,i){return new cc.ShuffleTiles(t,e,i)},cc.ShuffleTiles.create=cc.shuffleTiles,cc.FadeOutTRTiles=cc.TiledGrid3DAction.extend({testFunc:function(t,e){var i=this._gridSize.width*e,n=this._gridSize.height*e;return i===this._gridSize.width&&n===this._gridSize.height?0:0===i+n?1:Math.pow((t.x+t.y)/(i+n),6)},turnOnTile:function(t){this.setTile(t,this.originalTile(t))},turnOffTile:function(t){this.setTile(t,new cc.Quad3)},transformTile:function(t,e){var i=this.originalTile(t),n=this.target.grid.getStep();i.bl.x+=n.x/2*(1-e),i.bl.y+=n.y/2*(1-e),i.br.x-=n.x/2*(1-e),i.br.y+=n.y/2*(1-e),i.tl.x+=n.x/2*(1-e),i.tl.y-=n.y/2*(1-e),i.tr.x-=n.x/2*(1-e),i.tr.y-=n.y/2*(1-e),this.setTile(t,i)},update:function(t){for(var e,i=this._gridSize,n=cc.p(0,0),s=0;s<i.width;++s)for(var r=0;r<i.height;++r)n.x=s,n.y=r,0===(e=this.testFunc(n,t))?this.turnOffTile(n):1>e?this.transformTile(n,e):this.turnOnTile(n)}}),cc.fadeOutTRTiles=function(t,e){return new cc.FadeOutTRTiles(t,e)},cc.FadeOutTRTiles.create=cc.fadeOutTRTiles,cc.FadeOutBLTiles=cc.FadeOutTRTiles.extend({testFunc:function(t,e){var i=this._gridSize.width*(1-e),n=this._gridSize.height*(1-e);return 0===i+n?0:0===t.x+t.y?1:Math.pow((i+n)/(t.x+t.y),6)}}),cc.fadeOutBLTiles=function(t,e){return new cc.FadeOutBLTiles(t,e)},cc.FadeOutBLTiles.create=cc.fadeOutBLTiles,cc.FadeOutUpTiles=cc.FadeOutTRTiles.extend({testFunc:function(t,e){var i=this._gridSize.height*e;return i===this._gridSize.height?0:0===i?1:Math.pow(t.y/i,6)},transformTile:function(t,e){var i=this.originalTile(t),n=this.target.grid.getStep();i.bl.y+=n.y/2*(1-e),i.br.y+=n.y/2*(1-e),i.tl.y-=n.y/2*(1-e),i.tr.y-=n.y/2*(1-e),this.setTile(t,i)}}),cc.fadeOutUpTiles=function(t,e){return new cc.FadeOutUpTiles(t,e)},cc.FadeOutUpTiles.create=cc.fadeOutUpTiles,cc.FadeOutDownTiles=cc.FadeOutUpTiles.extend({testFunc:function(t,e){var i=this._gridSize.height*(1-e);return 0===i?0:0===t.y?1:Math.pow(i/t.y,6)}}),cc.fadeOutDownTiles=function(t,e){return new cc.FadeOutDownTiles(t,e)},cc.FadeOutDownTiles.create=cc.fadeOutDownTiles,cc.TurnOffTiles=cc.TiledGrid3DAction.extend({_seed:null,_tilesCount:0,_tilesOrder:null,ctor:function(t,e,i){cc.GridAction.prototype.ctor.call(this),this._tilesOrder=[],void 0!==e&&this.initWithDuration(t,e,i)},initWithDuration:function(t,e,i){return!!cc.TiledGrid3DAction.prototype.initWithDuration.call(this,t,e)&&(this._seed=i||0,this._tilesOrder.length=0,!0)},shuffle:function(t,e){for(var i=e-1;0<=i;i--){var n=0|cc.rand()%(i+1),s=t[i];t[i]=t[n],t[n]=s}},turnOnTile:function(t){this.setTile(t,this.originalTile(t))},turnOffTile:function(t){this.setTile(t,new cc.Quad3)},startWithTarget:function(t){cc.TiledGrid3DAction.prototype.startWithTarget.call(this,t),this._tilesCount=this._gridSize.width*this._gridSize.height;for(var e=(t=this._tilesOrder).length=0;e<this._tilesCount;++e)t[e]=e;this.shuffle(t,this._tilesCount)},update:function(t){t=0|t*this._tilesCount;for(var e,i=this._gridSize,n=cc.p(0,0),s=this._tilesOrder,r=0;r<this._tilesCount;r++)e=s[r],n.x=0|e/i.height,n.y=e%(0|i.height),r<t?this.turnOffTile(n):this.turnOnTile(n)}}),cc.turnOffTiles=function(t,e,i){return new cc.TurnOffTiles(t,e,i)},cc.TurnOffTiles.create=cc.turnOffTiles,cc.WavesTiles3D=cc.TiledGrid3DAction.extend({_waves:0,_amplitude:0,_amplitudeRate:0,ctor:function(t,e,i,n){cc.GridAction.prototype.ctor.call(this),void 0!==n&&this.initWithDuration(t,e,i,n)},getAmplitude:function(){return this._amplitude},setAmplitude:function(t){this._amplitude=t},getAmplitudeRate:function(){return this._amplitudeRate},setAmplitudeRate:function(t){this._amplitudeRate=t},initWithDuration:function(t,e,i,n){return!!cc.TiledGrid3DAction.prototype.initWithDuration.call(this,t,e)&&(this._waves=i,this._amplitude=n,this._amplitudeRate=1,!0)},update:function(t){for(var e,i=this._gridSize,n=this._waves,s=this._amplitude,r=this._amplitudeRate,o=cc.p(0,0),a=0;a<i.width;a++)for(var c=0;c<i.height;c++)o.x=a,o.y=c,(e=this.originalTile(o)).bl.z=Math.sin(t*Math.PI*n*2+.01*(e.bl.y+e.bl.x))*s*r,e.br.z=e.bl.z,e.tl.z=e.bl.z,e.tr.z=e.bl.z,this.setTile(o,e)}}),cc.wavesTiles3D=function(t,e,i,n){return new cc.WavesTiles3D(t,e,i,n)},cc.WavesTiles3D.create=cc.wavesTiles3D,cc.JumpTiles3D=cc.TiledGrid3DAction.extend({_jumps:0,_amplitude:0,_amplitudeRate:0,ctor:function(t,e,i,n){cc.GridAction.prototype.ctor.call(this),void 0!==n&&this.initWithDuration(t,e,i,n)},getAmplitude:function(){return this._amplitude},setAmplitude:function(t){this._amplitude=t},getAmplitudeRate:function(){return this._amplitudeRate},setAmplitudeRate:function(t){this._amplitudeRate=t},initWithDuration:function(t,e,i,n){return!!cc.TiledGrid3DAction.prototype.initWithDuration.call(this,t,e)&&(this._jumps=i,this._amplitude=n,this._amplitudeRate=1,!0)},update:function(t){var e=Math.sin(Math.PI*t*this._jumps*2)*this._amplitude*this._amplitudeRate;t=Math.sin(Math.PI*(t*this._jumps*2+1))*this._amplitude*this._amplitudeRate;for(var i,n=this._gridSize,s=this.target.grid,r=cc.p(0,0),o=0;o<n.width;o++)for(var a=0;a<n.height;a++)r.x=o,r.y=a,i=s.originalTile(r),0==(o+a)%2?(i.bl.z+=e,i.br.z+=e,i.tl.z+=e,i.tr.z+=e):(i.bl.z+=t,i.br.z+=t,i.tl.z+=t,i.tr.z+=t),s.setTile(r,i)}}),cc.jumpTiles3D=function(t,e,i,n){return new cc.JumpTiles3D(t,e,i,n)},cc.JumpTiles3D.create=cc.jumpTiles3D,cc.SplitRows=cc.TiledGrid3DAction.extend({_rows:0,_winSize:null,ctor:function(t,e){cc.GridAction.prototype.ctor.call(this),void 0!==e&&this.initWithDuration(t,e)},initWithDuration:function(t,e){return this._rows=e,cc.TiledGrid3DAction.prototype.initWithDuration.call(this,t,cc.size(1,e))},update:function(t){for(var e,i,n=this._gridSize,s=this._winSize.width,r=cc.p(0,0),o=0;o<n.height;++o)r.y=o,i=1,0==o%2&&(i=-1),(e=this.originalTile(r)).bl.x+=i*s*t,e.br.x+=i*s*t,e.tl.x+=i*s*t,e.tr.x+=i*s*t,this.setTile(r,e)},startWithTarget:function(t){cc.TiledGrid3DAction.prototype.startWithTarget.call(this,t),this._winSize=cc.director.getWinSizeInPixels()}}),cc.splitRows=function(t,e){return new cc.SplitRows(t,e)},cc.SplitRows.create=cc.splitRows,cc.SplitCols=cc.TiledGrid3DAction.extend({_cols:0,_winSize:null,ctor:function(t,e){cc.GridAction.prototype.ctor.call(this),void 0!==e&&this.initWithDuration(t,e)},initWithDuration:function(t,e){return this._cols=e,cc.TiledGrid3DAction.prototype.initWithDuration.call(this,t,cc.size(e,1))},update:function(t){for(var e,i,n=this._gridSize.width,s=this._winSize.height,r=cc.p(0,0),o=0;o<n;++o)r.x=o,i=1,0==o%2&&(i=-1),(e=this.originalTile(r)).bl.y+=i*s*t,e.br.y+=i*s*t,e.tl.y+=i*s*t,e.tr.y+=i*s*t,this.setTile(r,e);cc.renderer.childrenOrderDirty=!0},startWithTarget:function(t){cc.TiledGrid3DAction.prototype.startWithTarget.call(this,t),this._winSize=cc.director.getWinSizeInPixels()}}),cc.splitCols=function(t,e){return new cc.SplitCols(t,e)},cc.SplitCols.create=cc.splitCols,cc.PageTurn3D=cc.Grid3DAction.extend({getGrid:function(){var t=new cc.Grid3D(this._gridSize,void 0,void 0,this._gridNodeTarget.getGridRect());return t.setNeedDepthTestForBlit(!0),t},clone:function(){var t=new cc.PageTurn3D;return t.initWithDuration(this._duration,this._gridSize),t},update:function(t){var e=-100-(e=Math.max(0,t-.25))*e*500,i=.5<(n=Math.sqrt(t))?Math.PI/2*n:Math.PI/2*(1-n);t=(2-t)*Math.PI;for(var n=Math.sin(i),s=(i=Math.cos(i),this._gridSize),r=cc.p(0,0),o=0;o<=s.width;++o)for(var a=0;a<=s.height;++a){r.x=o,r.y=a;var c=this.getOriginalVertex(r);c.x-=this.getGridRect().x;var h=Math.sqrt(c.x*c.x+(c.y-e)*(c.y-e)),l=h*n,u=Math.asin(c.x/h)/n,d=Math.cos(u);c.x=u<=Math.PI?l*Math.sin(u):0,c.y=h+e-l*(1-d)*n,c.z=l*(1-d)*i,c.x=c.z*Math.sin(t)+c.x*Math.cos(t),c.z=c.z*Math.cos(t)-c.x*Math.cos(t),c.z/=7,.5>c.z&&(c.z=.5),c.x+=this.getGridRect().x,this.setVertex(r,c)}}}),cc.pageTurn3D=function(t,e){return new cc.PageTurn3D(t,e)},cc.PageTurn3D.create=cc.pageTurn3D,cc.ProgressTimer=cc.Node.extend({_type:null,_percentage:0,_sprite:null,_midPoint:null,_barChangeRate:null,_reverseDirection:!1,_className:"ProgressTimer",ctor:function(t){cc.Node.prototype.ctor.call(this),this._type=cc.ProgressTimer.TYPE_RADIAL,this._percentage=0,this._midPoint=cc.p(0,0),this._barChangeRate=cc.p(0,0),this._reverseDirection=!1,this._sprite=null,t&&this.initWithSprite(t)},onEnter:function(){this._super(),cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(this._renderCmd.initCmd(),this._renderCmd._updateProgress())},cleanup:function(){cc._renderType===cc.game.RENDER_TYPE_WEBGL&&this._renderCmd.releaseData(),this._super()},getMidpoint:function(){return cc.p(this._midPoint.x,this._midPoint.y)},setMidpoint:function(t){this._midPoint=cc.pClamp(t,cc.p(0,0),cc.p(1,1))},getBarChangeRate:function(){return cc.p(this._barChangeRate.x,this._barChangeRate.y)},setBarChangeRate:function(t){this._barChangeRate=cc.pClamp(t,cc.p(0,0),cc.p(1,1))},getType:function(){return this._type},getPercentage:function(){return this._percentage},getSprite:function(){return this._sprite},setPercentage:function(t){this._percentage!==t&&(this._percentage=cc.clampf(t,0,100),this._renderCmd._updateProgress())},setOpacityModifyRGB:function(t){},isOpacityModifyRGB:function(){return!1},isReverseDirection:function(){return this._reverseDirection},setColor:function(t){this._sprite.color=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty)},setOpacity:function(t){this._sprite.opacity=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},getColor:function(){return this._sprite.color},getOpacity:function(){return this._sprite.opacity},setReverseProgress:function(t){this._reverseDirection!==t&&(this._reverseDirection=t,this._renderCmd.resetVertexData())},setSprite:function(t){this._sprite!==t&&((this._sprite=t)?(this.setContentSize(t.width,t.height),t.ignoreAnchorPointForPosition(!0)):this.setContentSize(0,0),this._renderCmd.resetVertexData())},setType:function(t){t!==this._type&&(this._type=t,this._renderCmd.resetVertexData())},setReverseDirection:function(t){this._reverseDirection!==t&&(this._reverseDirection=t,this._renderCmd.resetVertexData())},initWithSprite:function(t){return this.percentage=0,this.setAnchorPoint(.5,.5),this._type=cc.ProgressTimer.TYPE_RADIAL,this._reverseDirection=!1,this.midPoint=cc.p(.5,.5),this.barChangeRate=cc.p(1,1),this.setSprite(t),this._renderCmd.resetVertexData(),!0},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.ProgressTimer.CanvasRenderCmd(this):new cc.ProgressTimer.WebGLRenderCmd(this)}}),_p=cc.ProgressTimer.prototype,cc.defineGetterSetter(_p,"midPoint",_p.getMidpoint,_p.setMidpoint),cc.defineGetterSetter(_p,"barChangeRate",_p.getBarChangeRate,_p.setBarChangeRate),cc.defineGetterSetter(_p,"type",_p.getType,_p.setType),cc.defineGetterSetter(_p,"percentage",_p.getPercentage,_p.setPercentage),cc.defineGetterSetter(_p,"sprite",_p.getSprite,_p.setSprite),cc.defineGetterSetter(_p,"reverseDir",_p.isReverseDirection,_p.setReverseDirection),cc.ProgressTimer.create=function(t){return new cc.ProgressTimer(t)},cc.ProgressTimer.TEXTURE_COORDS_COUNT=4,cc.ProgressTimer.TEXTURE_COORDS=75,cc.ProgressTimer.TYPE_RADIAL=0,cc.ProgressTimer.TYPE_BAR=1,cc.ProgressTo=cc.ActionInterval.extend({_to:0,_from:0,ctor:function(t,e){cc.ActionInterval.prototype.ctor.call(this),this._from=this._to=0,void 0!==e&&this.initWithDuration(t,e)},initWithDuration:function(t,e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(this._to=e,!0)},clone:function(){var t=new cc.ProgressTo;return t.initWithDuration(this._duration,this._to),t},reverse:function(){return cc.log("cc.ProgressTo.reverse(): reverse hasn't been supported."),null},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),this._from=t.percentage},update:function(t){this.target instanceof cc.ProgressTimer&&(this.target.percentage=this._from+(this._to-this._from)*t)}}),cc.progressTo=function(t,e){return new cc.ProgressTo(t,e)},cc.ProgressTo.create=cc.progressTo,cc.ProgressFromTo=cc.ActionInterval.extend({_to:0,_from:0,ctor:function(t,e,i){cc.ActionInterval.prototype.ctor.call(this),this._from=this._to=0,void 0!==i&&this.initWithDuration(t,e,i)},initWithDuration:function(t,e,i){return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(this._to=i,this._from=e,!0)},clone:function(){var t=new cc.ProgressFromTo;return t.initWithDuration(this._duration,this._from,this._to),t},reverse:function(){return cc.progressFromTo(this._duration,this._to,this._from)},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t)},update:function(t){this.target instanceof cc.ProgressTimer&&(this.target.percentage=this._from+(this._to-this._from)*t)}}),cc.progressFromTo=function(t,e,i){return new cc.ProgressFromTo(t,e,i)},cc.ProgressFromTo.create=cc.progressFromTo,function(){cc.ProgressTimer.CanvasRenderCmd=function(t){this._rootCtor(t),this._needDraw=!0,this._PI180=Math.PI/180,this._barRect=cc.rect(0,0,0,0),this._origin=cc.p(0,0),this._radius=0,this._endAngle=this._startAngle=270,this._counterClockWise=!1,this._canUseDirtyRegion=!0};var t=cc.ProgressTimer.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);t.constructor=cc.ProgressTimer.CanvasRenderCmd,t.rendering=function(t,e,i){var n=(t=t||cc._renderContext).getContext(),s=this._node,r=s._sprite,o=r._renderCmd._textureCoord,a=r._renderCmd._displayedOpacity/255;if(0!==o.width&&0!==o.height&&r._texture&&o.validRect&&0!==a){t.setTransform(this._worldTransform,e,i),t.setCompositeOperation(r._blendFuncStr),t.setGlobalAlpha(a);var c=r._rect,h=r._offsetPosition;e=h.x,i=-h.y-c.height,a=c.width,c=c.height,t.save(),r._flippedX&&(e=-e-a,n.scale(-1,1)),r._flippedY&&(i=h.y,n.scale(1,-1)),s._type===cc.ProgressTimer.TYPE_BAR?(s=this._barRect,n.beginPath(),n.rect(s.x,s.y,s.width,s.height),n.clip(),n.closePath()):s._type===cc.ProgressTimer.TYPE_RADIAL&&(s=this._origin.x,h=this._origin.y,n.beginPath(),n.arc(s,h,this._radius,this._PI180*this._startAngle,this._PI180*this._endAngle,this._counterClockWise),n.lineTo(s,h),n.clip(),n.closePath()),s=(r._renderCmd._textureToRender||r._texture).getHtmlElementObj(),r._renderCmd._colorized?n.drawImage(s,0,0,o.width,o.height,e,i,a,c):n.drawImage(s,o.renderX,o.renderY,o.width,o.height,e,i,a,c),t.restore(),cc.g_NumberOfDraws++}},t.releaseData=function(){},t.resetVertexData=function(){},t._updateProgress=function(){this.setDirtyFlag(cc.Node._dirtyFlags.contentDirty);var t=this._node,e=t._sprite,i=e.width,n=e.height,s=t._midPoint;if(t._type===cc.ProgressTimer.TYPE_RADIAL){this._radius=Math.round(Math.sqrt(i*i+n*n));var r,o=!1,a=this._origin;a.x=i*s.x,a.y=-n*s.y,t._reverseDirection?(r=270,s=270-3.6*t._percentage):(s=-90,r=3.6*t._percentage-90),e._flippedX&&(a.x-=2*i*t._midPoint.x,s=-s-180,r=-r-180,o=!o),e._flippedY&&(a.y+=2*n*t._midPoint.y,o=!o,s=-s,r=-r),this._startAngle=s,this._endAngle=r,this._counterClockWise=o}else o=t._barChangeRate,a=t._percentage/100,t=this._barRect,o=cc.size(i*(1-o.x),n*(1-o.y)),a=cc.size((i-o.width)*a,(n-o.height)*a),o=cc.size(o.width+a.width,o.height+a.height),a=(r=cc.p(i*s.x,n*s.y)).x-o.width/2,.5<s.x&&o.width/2>=i-r.x&&(a=i-o.width),i=r.y-o.height/2,.5<s.y&&o.height/2>=n-r.y&&(i=n-o.height),t.x=0,n=1,e._flippedX&&(t.x-=o.width,n=-1),0<a&&(t.x+=a*n),t.y=0,n=1,e._flippedY&&(t.y+=o.height,n=-1),0<i&&(t.y-=i*n),t.width=o.width,t.height=-o.height},t._syncStatus=function(t){if((n=this._node)._sprite){var e=cc.Node._dirtyFlags,i=this._dirtyFlag;(s=t?t._node:null)&&s._cascadeColorEnabled&&t._dirtyFlag&e.colorDirty&&(i|=e.colorDirty),s&&s._cascadeOpacityEnabled&&t._dirtyFlag&e.opacityDirty&&(i|=e.opacityDirty),t&&t._dirtyFlag&e.transformDirty&&(i|=e.transformDirty),this._dirtyFlag=i;var n,s=(r=(n=n._sprite._renderCmd)._dirtyFlag)&e.colorDirty,r=r&e.opacityDirty;s&&(n._syncDisplayColor(),n._dirtyFlag&=~e.colorDirty,this._dirtyFlag&=~e.colorDirty),r&&(n._syncDisplayOpacity(),n._dirtyFlag&=~e.opacityDirty,this._dirtyFlag&=~e.opacityDirty),(s||r)&&n._updateColor(),i&e.transformDirty&&this.transform(t),i&e.orderDirty&&(this._dirtyFlag&=~e.orderDirty)}},t.updateStatus=function(){if((t=this._node)._sprite){var t,e=cc.Node._dirtyFlags,i=this._dirtyFlag,n=(s=(t=t._sprite._renderCmd)._dirtyFlag)&e.colorDirty,s=s&e.opacityDirty;n&&(t._updateDisplayColor(),t._dirtyFlag^=t._dirtyFlag&e.colorDirty,this._dirtyFlag^=this._dirtyFlag&e.colorDirty),s&&(t._updateDisplayOpacity(),t._dirtyFlag^=t._dirtyFlag&e.opacityDirty,this._dirtyFlag^=this._dirtyFlag&e.opacityDirty),(n||s)&&t._updateColor(),i&e.transformDirty&&this.transform(this.getParentRenderCmd(),!0),i&e.contentDirty&&this._notifyRegionStatus&&this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty),this._dirtyFlag=0}}}(),function(){cc.ProgressTimer.WebGLRenderCmd=function(t){this._rootCtor(t),this._progressDirty=this._needDraw=!0,this._bl=cc.p(),this._tr=cc.p(),this._transformUpdating=!1,this.initCmd()};var t=cc.ProgressTimer.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);t.constructor=cc.ProgressTimer.WebGLRenderCmd,t.transform=function(t,e){this.originTransform(t,e),(r=this._node._sprite)._renderCmd.transform(this,e);var i=r._offsetPosition.x,n=i+r._rect.width,s=r._offsetPosition.y,r=s+r._rect.height,o=this._worldTransform;this._bl.x=i*o.a+s*o.c+o.tx,this._bl.y=i*o.b+s*o.d+o.ty,this._tr.x=n*o.a+r*o.c+o.tx,this._tr.y=n*o.b+r*o.d+o.ty,this._transformUpdating=!0,this._updateProgressData(),this._transformUpdating=!1},t.rendering=function(t){var e=this._node;if(t=t||cc._renderContext,0!==this._vertexDataCount&&e._sprite){this._glProgramState.apply(),this._shaderProgram._updateProjectionUniform();var i=e._sprite._blendFunc;cc.glBlendFunc(i.src,i.dst),cc.glBindTexture2D(e._sprite.texture),t.bindBuffer(t.ARRAY_BUFFER,this._vertexWebGLBuffer),t.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),t.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR),t.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS),this._vertexDataDirty&&(t.bufferSubData(t.ARRAY_BUFFER,0,this._float32View),this._vertexDataDirty=!1),i=cc.V3F_C4B_T2F.BYTES_PER_ELEMENT,t.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,3,t.FLOAT,!1,i,0),t.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR,4,t.UNSIGNED_BYTE,!0,i,12),t.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS,2,t.FLOAT,!1,i,16),e._type===cc.ProgressTimer.TYPE_RADIAL?t.drawArrays(t.TRIANGLE_FAN,0,this._vertexDataCount):e._type===cc.ProgressTimer.TYPE_BAR&&(e._reverseDirection?(t.drawArrays(t.TRIANGLE_STRIP,0,this._vertexDataCount/2),t.drawArrays(t.TRIANGLE_STRIP,4,this._vertexDataCount/2),cc.g_NumberOfDraws++):t.drawArrays(t.TRIANGLE_STRIP,0,this._vertexDataCount)),cc.g_NumberOfDraws++}},t._syncStatus=function(t){if((n=this._node)._sprite){var e=cc.Node._dirtyFlags,i=this._dirtyFlag;(s=t?t._node:null)&&s._cascadeColorEnabled&&t._dirtyFlag&e.colorDirty&&(i|=e.colorDirty),s&&s._cascadeOpacityEnabled&&t._dirtyFlag&e.opacityDirty&&(i|=e.opacityDirty),t&&t._dirtyFlag&e.transformDirty&&(i|=e.transformDirty),this._dirtyFlag=i;var n,s=(i|(r=(n=n._sprite._renderCmd)._dirtyFlag))&e.colorDirty,r=(i|r)&e.opacityDirty;s&&(n._syncDisplayColor(),n._dirtyFlag&=~e.colorDirty,this._dirtyFlag&=~e.colorDirty),r&&(n._syncDisplayOpacity(),n._dirtyFlag&=~e.opacityDirty,this._dirtyFlag&=~e.opacityDirty),(s||r)&&this._updateColor(),i&e.transformDirty&&this.transform(t),i&e.textureDirty&&(this._updateProgressData(),this._dirtyFlag&=~e.textureDirty),n._dirtyFlag=0}},t.updateStatus=function(){if((t=this._node)._sprite){var t,e=cc.Node._dirtyFlags,i=this._dirtyFlag,n=(i|(s=(t=t._sprite._renderCmd)._dirtyFlag))&e.colorDirty,s=(i|s)&e.opacityDirty;n&&(t._updateDisplayColor(),t._dirtyFlag^=t._dirtyFlag&e.colorDirty,this._dirtyFlag^=this._dirtyFlag&e.colorDirty),s&&(t._updateDisplayOpacity(),t._dirtyFlag^=t._dirtyFlag&e.opacityDirty,this._dirtyFlag^=this._dirtyFlag&e.opacityDirty),(n||s)&&this._updateColor(),i&e.transformDirty&&this.transform(this.getParentRenderCmd(),!0),i&e.orderDirty&&(this._dirtyFlag^=this._dirtyFlag&e.orderDirty),i&e.textureDirty&&(this._updateProgressData(),this._dirtyFlag^=this._dirtyFlag&e.textureDirty)}},t.releaseData=function(){if(this._vertexData){var t=this._vertexWebGLBuffer;setTimeout((function(){cc._renderContext.deleteBuffer(t)}),.1),this._vertexArrayBuffer=this._float32View=this._vertexData=this._vertexWebGLBuffer=null,this._vertexDataCount=0}},t.initCmd=function(){if(!this._vertexData){this._vertexWebGLBuffer=cc._renderContext.createBuffer();var t=cc.V3F_C4B_T2F.BYTES_PER_ELEMENT;this._vertexArrayBuffer=new ArrayBuffer(8*t),this._float32View=new Float32Array(this._vertexArrayBuffer),this._vertexData=[];for(var e=0;8>e;e++)this._vertexData[e]=new cc.V3F_C4B_T2F(null,null,null,this._vertexArrayBuffer,e*t);gl.bindBuffer(gl.ARRAY_BUFFER,this._vertexWebGLBuffer),gl.bufferData(gl.ARRAY_BUFFER,this._float32View,gl.DYNAMIC_DRAW),this._vertexDataCount=0,this._vertexDataDirty=!0,this._shaderProgram=cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR)}},t.resetVertexData=function(){this._vertexDataCount=0},t._updateProgressData=function(){var t=this._node._type;t===cc.ProgressTimer.TYPE_RADIAL?this._updateRadial():t===cc.ProgressTimer.TYPE_BAR&&this._updateBar(),this._vertexDataDirty=!0},t._updateProgress=function(){this.setDirtyFlag(cc.Node._dirtyFlags.textureDirty)},t._updateBar=function(){if((i=this._node)._sprite){var t=i._percentage/100,e=i._barChangeRate,i=(e=cc.pMult(cc.p(1-e.x+t*e.x,1-e.y+t*e.y),.5),t=cc.pSub(i._midPoint,e),cc.pAdd(i._midPoint,e));0>t.x&&(i.x+=-t.x,t.x=0),1<i.x&&(t.x-=i.x-1,i.x=1),0>t.y&&(i.y+=-t.y,t.y=0),1<i.y&&(t.y-=i.y-1,i.y=1),this._reverseDirection?(e=this._vertexData,this._vertexDataCount||(this._vertexDataCount=8,this._textureCoordFromAlphaPoint(e[0].texCoords,0,1),this._vertexFromAlphaPoint(e[0].vertices,0,1),this._textureCoordFromAlphaPoint(e[1].texCoords,0,0),this._vertexFromAlphaPoint(e[1].vertices,0,0),this._textureCoordFromAlphaPoint(e[6].texCoords,1,1),this._vertexFromAlphaPoint(e[6].vertices,1,1),this._textureCoordFromAlphaPoint(e[7].texCoords,1,0),this._vertexFromAlphaPoint(e[7].vertices,1,0)),this._textureCoordFromAlphaPoint(e[2].texCoords,t.x,i.y),this._vertexFromAlphaPoint(e[2].vertices,t.x,i.y),this._textureCoordFromAlphaPoint(e[3].texCoords,t.x,t.y),this._vertexFromAlphaPoint(e[3].vertices,t.x,t.y),this._textureCoordFromAlphaPoint(e[4].texCoords,i.x,i.y),this._vertexFromAlphaPoint(e[4].vertices,i.x,i.y),this._textureCoordFromAlphaPoint(e[5].texCoords,i.x,t.y),this._vertexFromAlphaPoint(e[5].vertices,i.x,t.y)):(this._vertexDataCount||(this._vertexDataCount=4),e=this._vertexData,this._textureCoordFromAlphaPoint(e[0].texCoords,t.x,i.y),this._vertexFromAlphaPoint(e[0].vertices,t.x,i.y),this._textureCoordFromAlphaPoint(e[1].texCoords,t.x,t.y),this._vertexFromAlphaPoint(e[1].vertices,t.x,t.y),this._textureCoordFromAlphaPoint(e[2].texCoords,i.x,i.y),this._vertexFromAlphaPoint(e[2].vertices,i.x,i.y),this._textureCoordFromAlphaPoint(e[3].texCoords,i.x,t.y),this._vertexFromAlphaPoint(e[3].vertices,i.x,t.y)),this._updateColor()}},t._updateRadial=function(){if((n=this._node)._sprite){var t,e=n._midPoint;t=n._percentage/100;var i=2*cc.PI*(n._reverseDirection?t:1-t),n=cc.p(e.x,1),s=cc.pRotateByAngle(n,e,i);i=0;if(0===t)s=n,i=0;else if(1===t)s=n,i=4;else{var r=cc.FLT_MAX,o=cc.ProgressTimer.TEXTURE_COORDS_COUNT;for(t=0;t<=o;++t){var a=(t+(o-1))%o,c=this._boundaryTexCoord(t%o);a=this._boundaryTexCoord(a);0===t?a=cc.pLerp(c,a,1-e.x):4===t&&(c=cc.pLerp(c,a,1-e.x));var h=cc.p(0,0);cc.pLineIntersect(c,a,e,s,h)&&(0!==t&&4!==t||0<=h.x&&1>=h.x)&&0<=h.y&&h.y<r&&(r=h.y,i=t)}s=cc.pAdd(e,cc.pMult(cc.pSub(s,e),r))}if(t=!0,this._vertexDataCount!==i+3&&(t=!1,this._vertexDataCount=i+3),this._updateColor(),r=this._vertexData,this._transformUpdating||!t)for(this._textureCoordFromAlphaPoint(r[0].texCoords,e.x,e.y),this._vertexFromAlphaPoint(r[0].vertices,e.x,e.y),this._textureCoordFromAlphaPoint(r[1].texCoords,n.x,n.y),this._vertexFromAlphaPoint(r[1].vertices,n.x,n.y),t=0;t<i;t++)e=this._boundaryTexCoord(t),this._textureCoordFromAlphaPoint(r[t+2].texCoords,e.x,e.y),this._vertexFromAlphaPoint(r[t+2].vertices,e.x,e.y);this._textureCoordFromAlphaPoint(r[this._vertexDataCount-1].texCoords,s.x,s.y),this._vertexFromAlphaPoint(r[this._vertexDataCount-1].vertices,s.x,s.y)}},t._boundaryTexCoord=function(t){if(t<cc.ProgressTimer.TEXTURE_COORDS_COUNT){var e=cc.ProgressTimer.TEXTURE_COORDS;return this._node._reverseDirection?cc.p(e>>7-(t<<1)&1,e>>7-(1+(t<<1))&1):cc.p(e>>1+(t<<1)&1,e>>(t<<1)&1)}return cc.p(0,0)},t._textureCoordFromAlphaPoint=function(t,e,i){var n=this._node._sprite;if(n){var s=(r=n._renderCmd._vertices)[1],r=r[2];s=cc.p(s.u,s.v),r=cc.p(r.u,r.v);n.textureRectRotated&&(n=e,e=i,i=n),t.u=s.x*(1-e)+r.x*e,t.v=s.y*(1-i)+r.y*i}else t.u=0,t.v=0},t._vertexFromAlphaPoint=function(t,e,i){t.x=this._bl.x*(1-e)+this._tr.x*e,t.y=this._bl.y*(1-i)+this._tr.y*i,t.z=this._node._vertexZ},t._updateColor=function(){var t=this._node._sprite;if(this._vertexDataCount&&t){var e=this._displayedColor,i=(s=t._renderCmd._displayedColor).r,n=s.g,s=s.b,r=t._renderCmd._displayedOpacity/255;for(t._opacityModifyRGB&&(i*=r,n*=r,s*=r),e.r=i,e.g=n,e.b=s,e.a=t._renderCmd._displayedOpacity,t=this._vertexData,i=0,n=this._vertexDataCount;i<n;++i)t[i].colors=e;this._vertexDataDirty=!0}}}(),cc.SCENE_FADE=4208917214,cc.TRANSITION_ORIENTATION_LEFT_OVER=0,cc.TRANSITION_ORIENTATION_RIGHT_OVER=1,cc.TRANSITION_ORIENTATION_UP_OVER=0,cc.TRANSITION_ORIENTATION_DOWN_OVER=1,cc.TransitionScene=cc.Scene.extend({_inScene:null,_outScene:null,_duration:null,_isInSceneOnTop:!1,_isSendCleanupToScene:!1,_className:"TransitionScene",ctor:function(t,e){cc.Scene.prototype.ctor.call(this),void 0!==t&&void 0!==e&&this.initWithDuration(t,e)},_setNewScene:function(t){this.unschedule(this._setNewScene),t=cc.director,this._isSendCleanupToScene=t.isSendCleanupToScene(),t.runScene(this._inScene),cc.eventManager.setEnabled(!0),this._outScene.visible=!0},_sceneOrder:function(){this._isInSceneOnTop=!0},visit:function(){this._isInSceneOnTop?(this._outScene.visit(),this._inScene.visit()):(this._inScene.visit(),this._outScene.visit()),cc.Node.prototype.visit.call(this)},onEnter:function(){cc.Node.prototype.onEnter.call(this),cc.eventManager.setEnabled(!1),this._outScene._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart),this._inScene._performRecursive(cc.Node._stateCallbackType.onEnter)},onExit:function(){cc.Node.prototype.onExit.call(this),cc.eventManager.setEnabled(!0),this._outScene._performRecursive(cc.Node._stateCallbackType.onExit),this._inScene._performRecursive(cc.Node._stateCallbackType.onEnterTransitionDidFinish)},cleanup:function(){cc.Node.prototype.cleanup.call(this),this._isSendCleanupToScene&&this._outScene._performRecursive(cc.Node._stateCallbackType.cleanup)},initWithDuration:function(t,e){if(!e)throw Error("cc.TransitionScene.initWithDuration(): Argument scene must be non-nil");if(this.init()){if(this._duration=t,this.attr({x:0,y:0,anchorX:0,anchorY:0}),this._inScene=e,this._outScene=cc.director.getRunningScene(),this._outScene||(this._outScene=new cc.Scene,this._outScene.init()),this._inScene===this._outScene)throw Error("cc.TransitionScene.initWithDuration(): Incoming scene must be different from the outgoing scene");return this._sceneOrder(),!0}return!1},finish:function(){this._inScene.attr({visible:!0,x:0,y:0,scale:1,rotation:0}),this._outScene.attr({visible:!1,x:0,y:0,scale:1,rotation:0}),this.schedule(this._setNewScene,0)},hideOutShowIn:function(){this._inScene.visible=!0,this._outScene.visible=!1}}),cc.TransitionScene.create=function(t,e){return new cc.TransitionScene(t,e)},cc.TransitionSceneOriented=cc.TransitionScene.extend({_orientation:0,ctor:function(t,e,i){cc.TransitionScene.prototype.ctor.call(this),null!=i&&this.initWithDuration(t,e,i)},initWithDuration:function(t,e,i){return cc.TransitionScene.prototype.initWithDuration.call(this,t,e)&&(this._orientation=i),!0}}),cc.TransitionSceneOriented.create=function(t,e,i){return new cc.TransitionSceneOriented(t,e,i)},cc.TransitionRotoZoom=cc.TransitionScene.extend({ctor:function(t,e){cc.TransitionScene.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this),this._inScene.attr({scale:.001,anchorX:.5,anchorY:.5}),this._outScene.attr({scale:1,anchorX:.5,anchorY:.5});var t=cc.sequence(cc.spawn(cc.scaleBy(this._duration/2,.001),cc.rotateBy(this._duration/2,720)),cc.delayTime(this._duration/2));this._outScene.runAction(t),this._inScene.runAction(cc.sequence(t.reverse(),cc.callFunc(this.finish,this)))}}),cc.TransitionRotoZoom.create=function(t,e){return new cc.TransitionRotoZoom(t,e)},cc.TransitionJumpZoom=cc.TransitionScene.extend({ctor:function(t,e){cc.TransitionScene.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this);var t=cc.director.getWinSize();this._inScene.attr({scale:.5,x:t.width,y:0,anchorX:.5,anchorY:.5}),this._outScene.anchorX=.5,this._outScene.anchorY=.5;var e=cc.jumpBy(this._duration/4,cc.p(-t.width,0),t.width/4,2),i=cc.scaleTo(this._duration/4,1);t=cc.scaleTo(this._duration/4,.5),t=cc.sequence(t,e),e=cc.sequence(e,i),i=cc.delayTime(this._duration/2);this._outScene.runAction(t),this._inScene.runAction(cc.sequence(i,e,cc.callFunc(this.finish,this)))}}),cc.TransitionJumpZoom.create=function(t,e){return new cc.TransitionJumpZoom(t,e)},cc.TransitionMoveInL=cc.TransitionScene.extend({ctor:function(t,e){cc.TransitionScene.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this),this.initScenes();var t=this.action();this._inScene.runAction(cc.sequence(this.easeActionWithAction(t),cc.callFunc(this.finish,this)))},initScenes:function(){this._inScene.setPosition(-cc.director.getWinSize().width,0)},action:function(){return cc.moveTo(this._duration,cc.p(0,0))},easeActionWithAction:function(t){return new cc.EaseOut(t,2)}}),cc.TransitionMoveInL.create=function(t,e){return new cc.TransitionMoveInL(t,e)},cc.TransitionMoveInR=cc.TransitionMoveInL.extend({ctor:function(t,e){cc.TransitionMoveInL.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},initScenes:function(){this._inScene.setPosition(cc.director.getWinSize().width,0)}}),cc.TransitionMoveInR.create=function(t,e){return new cc.TransitionMoveInR(t,e)},cc.TransitionMoveInT=cc.TransitionMoveInL.extend({ctor:function(t,e){cc.TransitionMoveInL.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},initScenes:function(){this._inScene.setPosition(0,cc.director.getWinSize().height)}}),cc.TransitionMoveInT.create=function(t,e){return new cc.TransitionMoveInT(t,e)},cc.TransitionMoveInB=cc.TransitionMoveInL.extend({ctor:function(t,e){cc.TransitionMoveInL.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},initScenes:function(){this._inScene.setPosition(0,-cc.director.getWinSize().height)}}),cc.TransitionMoveInB.create=function(t,e){return new cc.TransitionMoveInB(t,e)},cc.ADJUST_FACTOR=.5,cc.TransitionSlideInL=cc.TransitionScene.extend({ctor:function(t,e){cc.TransitionScene.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},_sceneOrder:function(){this._isInSceneOnTop=!1},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this),this.initScenes();var t=this.action(),e=this.action();t=cc.sequence(this.easeActionWithAction(t),cc.callFunc(this.finish,this)),e=this.easeActionWithAction(e);this._inScene.runAction(t),this._outScene.runAction(e)},initScenes:function(){this._inScene.setPosition(-cc.director.getWinSize().width+cc.ADJUST_FACTOR,0)},action:function(){return cc.moveBy(this._duration,cc.p(cc.director.getWinSize().width-cc.ADJUST_FACTOR,0))},easeActionWithAction:function(t){return new cc.EaseInOut(t,2)}}),cc.TransitionSlideInL.create=function(t,e){return new cc.TransitionSlideInL(t,e)},cc.TransitionSlideInR=cc.TransitionSlideInL.extend({ctor:function(t,e){cc.TransitionSlideInL.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},_sceneOrder:function(){this._isInSceneOnTop=!0},initScenes:function(){this._inScene.setPosition(cc.director.getWinSize().width-cc.ADJUST_FACTOR,0)},action:function(){return cc.moveBy(this._duration,cc.p(-(cc.director.getWinSize().width-cc.ADJUST_FACTOR),0))}}),cc.TransitionSlideInR.create=function(t,e){return new cc.TransitionSlideInR(t,e)},cc.TransitionSlideInB=cc.TransitionSlideInL.extend({ctor:function(t,e){cc.TransitionSlideInL.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},_sceneOrder:function(){this._isInSceneOnTop=!1},initScenes:function(){this._inScene.setPosition(0,-(cc.director.getWinSize().height-cc.ADJUST_FACTOR))},action:function(){return cc.moveBy(this._duration,cc.p(0,cc.director.getWinSize().height-cc.ADJUST_FACTOR))}}),cc.TransitionSlideInB.create=function(t,e){return new cc.TransitionSlideInB(t,e)},cc.TransitionSlideInT=cc.TransitionSlideInL.extend({ctor:function(t,e){cc.TransitionSlideInL.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},_sceneOrder:function(){this._isInSceneOnTop=!0},initScenes:function(){this._inScene.setPosition(0,cc.director.getWinSize().height-cc.ADJUST_FACTOR)},action:function(){return cc.moveBy(this._duration,cc.p(0,-(cc.director.getWinSize().height-cc.ADJUST_FACTOR)))}}),cc.TransitionSlideInT.create=function(t,e){return new cc.TransitionSlideInT(t,e)},cc.TransitionShrinkGrow=cc.TransitionScene.extend({ctor:function(t,e){cc.TransitionScene.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this),this._inScene.attr({scale:.001,anchorX:2/3,anchorY:.5}),this._outScene.attr({scale:1,anchorX:1/3,anchorY:.5});var t=cc.scaleTo(this._duration,.01),e=cc.scaleTo(this._duration,1);this._inScene.runAction(cc.sequence(this.easeActionWithAction(e),cc.callFunc(this.finish,this))),this._outScene.runAction(this.easeActionWithAction(t))},easeActionWithAction:function(t){return new cc.EaseOut(t,2)}}),cc.TransitionShrinkGrow.create=function(t,e){return new cc.TransitionShrinkGrow(t,e)},cc.TransitionFade=cc.TransitionScene.extend({_color:null,ctor:function(t,e,i){cc.TransitionScene.prototype.ctor.call(this),this._color=cc.color(),e&&this.initWithDuration(t,e,i)},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this);var t=new cc.LayerColor(this._color);this._inScene.visible=!1,this.addChild(t,2,cc.SCENE_FADE);t=this.getChildByTag(cc.SCENE_FADE);var e=cc.sequence(cc.fadeIn(this._duration/2),cc.callFunc(this.hideOutShowIn,this),cc.fadeOut(this._duration/2),cc.callFunc(this.finish,this));t.runAction(e)},onExit:function(){cc.TransitionScene.prototype.onExit.call(this),this.removeChildByTag(cc.SCENE_FADE,!1)},initWithDuration:function(t,e,i){return i=i||cc.color.BLACK,cc.TransitionScene.prototype.initWithDuration.call(this,t,e)&&(this._color.r=i.r,this._color.g=i.g,this._color.b=i.b,this._color.a=0),!0}}),cc.TransitionFade.create=function(t,e,i){return new cc.TransitionFade(t,e,i)},cc.TransitionCrossFade=cc.TransitionScene.extend({ctor:function(t,e){cc.TransitionScene.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this);var t=cc.color(0,0,0,0),e=cc.director.getWinSize(),i=(t=new cc.LayerColor(t),new cc.RenderTexture(e.width,e.height));i.sprite.anchorX=.5,i.sprite.anchorY=.5,i.attr({x:e.width/2,y:e.height/2,anchorX:.5,anchorY:.5}),i.begin(),this._inScene.visit(),i.end();var n=new cc.RenderTexture(e.width,e.height);n.setPosition(e.width/2,e.height/2),n.sprite.anchorX=n.anchorX=.5,n.sprite.anchorY=n.anchorY=.5,n.begin(),this._outScene.visit(),n.end(),i.sprite.setBlendFunc(cc.ONE,cc.ONE),n.sprite.setBlendFunc(cc.SRC_ALPHA,cc.ONE_MINUS_SRC_ALPHA),t.addChild(i),t.addChild(n),i.sprite.opacity=255,n.sprite.opacity=255,e=cc.sequence(cc.fadeTo(this._duration,0),cc.callFunc(this.hideOutShowIn,this),cc.callFunc(this.finish,this)),n.sprite.runAction(e),this.addChild(t,2,cc.SCENE_FADE)},onExit:function(){this.removeChildByTag(cc.SCENE_FADE,!1),cc.TransitionScene.prototype.onExit.call(this)}}),cc.TransitionCrossFade.create=function(t,e){return new cc.TransitionCrossFade(t,e)},cc.TransitionTurnOffTiles=cc.TransitionScene.extend({_gridProxy:null,ctor:function(t,e){cc.TransitionScene.prototype.ctor.call(this),this._gridProxy=new cc.NodeGrid,e&&this.initWithDuration(t,e)},_sceneOrder:function(){this._isInSceneOnTop=!1},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this),this._gridProxy.setTarget(this._outScene),this._gridProxy._performRecursive(cc.Node._stateCallbackType.onEnter);var t=cc.director.getWinSize();t=cc.turnOffTiles(this._duration,cc.size(0|t.width/t.height*12,12)),t=this.easeActionWithAction(t);this._gridProxy.runAction(cc.sequence(t,cc.callFunc(this.finish,this),cc.stopGrid()))},visit:function(){this._inScene.visit(),this._gridProxy.visit()},easeActionWithAction:function(t){return t}}),cc.TransitionTurnOffTiles.create=function(t,e){return new cc.TransitionTurnOffTiles(t,e)},cc.TransitionSplitCols=cc.TransitionScene.extend({_gridProxy:null,_switchTargetToInscene:function(){this._gridProxy.setTarget(this._inScene)},ctor:function(t,e){cc.TransitionScene.prototype.ctor.call(this),this._gridProxy=new cc.NodeGrid,e&&this.initWithDuration(t,e)},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this),this._gridProxy.setTarget(this._outScene),this._gridProxy._performRecursive(cc.Node._stateCallbackType.onEnter);var t=this.action();t=cc.sequence(t,cc.callFunc(this._switchTargetToInscene,this),t.reverse());this._gridProxy.runAction(cc.sequence(this.easeActionWithAction(t),cc.callFunc(this.finish,this),cc.stopGrid()))},onExit:function(){this._gridProxy.setTarget(null),this._gridProxy._performRecursive(cc.Node._stateCallbackType.onExit),cc.TransitionScene.prototype.onExit.call(this)},visit:function(){this._gridProxy.visit()},easeActionWithAction:function(t){return new cc.EaseInOut(t,3)},action:function(){return cc.splitCols(this._duration/2,3)}}),cc.TransitionSplitCols.create=function(t,e){return new cc.TransitionSplitCols(t,e)},cc.TransitionSplitRows=cc.TransitionSplitCols.extend({ctor:function(t,e){cc.TransitionSplitCols.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},action:function(){return cc.splitRows(this._duration/2,3)}}),cc.TransitionSplitRows.create=function(t,e){return new cc.TransitionSplitRows(t,e)},cc.TransitionFadeTR=cc.TransitionScene.extend({_gridProxy:null,ctor:function(t,e){cc.TransitionScene.prototype.ctor.call(this),this._gridProxy=new cc.NodeGrid,e&&this.initWithDuration(t,e)},_sceneOrder:function(){this._isInSceneOnTop=!1},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this),this._gridProxy.setTarget(this._outScene),this._gridProxy._performRecursive(cc.Node._stateCallbackType.onEnter);var t=cc.director.getWinSize();t=this.actionWithSize(cc.size(0|t.width/t.height*12,12));this._gridProxy.runAction(cc.sequence(this.easeActionWithAction(t),cc.callFunc(this.finish,this),cc.stopGrid()))},visit:function(){this._inScene.visit(),this._gridProxy.visit()},easeActionWithAction:function(t){return t},actionWithSize:function(t){return cc.fadeOutTRTiles(this._duration,t)}}),cc.TransitionFadeTR.create=function(t,e){return new cc.TransitionFadeTR(t,e)},cc.TransitionFadeBL=cc.TransitionFadeTR.extend({ctor:function(t,e){cc.TransitionFadeTR.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},actionWithSize:function(t){return cc.fadeOutBLTiles(this._duration,t)}}),cc.TransitionFadeBL.create=function(t,e){return new cc.TransitionFadeBL(t,e)},cc.TransitionFadeUp=cc.TransitionFadeTR.extend({ctor:function(t,e){cc.TransitionFadeTR.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},actionWithSize:function(t){return new cc.FadeOutUpTiles(this._duration,t)}}),cc.TransitionFadeUp.create=function(t,e){return new cc.TransitionFadeUp(t,e)},cc.TransitionFadeDown=cc.TransitionFadeTR.extend({ctor:function(t,e){cc.TransitionFadeTR.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},actionWithSize:function(t){return cc.fadeOutDownTiles(this._duration,t)}}),cc.TransitionFadeDown.create=function(t,e){return new cc.TransitionFadeDown(t,e)},cc.SCENE_RADIAL=49153,cc.TransitionProgress=cc.TransitionScene.extend({_to:0,_from:0,_sceneToBeModified:null,_className:"TransitionProgress",ctor:function(t,e){cc.TransitionScene.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},_setAttrs:function(t,e,i){t.attr({x:e,y:i,anchorX:.5,anchorY:.5})},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this),this._setupTransition();var t=cc.director.getWinSize(),e=new cc.RenderTexture(t.width,t.height);e.sprite.anchorX=.5,e.sprite.anchorY=.5,this._setAttrs(e,t.width/2,t.height/2),e.clear(0,0,0,1),e.begin(),this._sceneToBeModified.visit(),e.end(),this._sceneToBeModified===this._outScene&&this.hideOutShowIn(),t=this._progressTimerNodeWithRenderTexture(e),e=cc.sequence(cc.progressFromTo(this._duration,this._from,this._to),cc.callFunc(this.finish,this)),t.runAction(e),this.addChild(t,2,cc.SCENE_RADIAL)},onExit:function(){this.removeChildByTag(cc.SCENE_RADIAL,!0),cc.TransitionScene.prototype.onExit.call(this)},_setupTransition:function(){this._sceneToBeModified=this._outScene,this._from=100,this._to=0},_progressTimerNodeWithRenderTexture:function(t){return cc.log("cc.TransitionProgress._progressTimerNodeWithRenderTexture(): should be overridden in subclass"),null},_sceneOrder:function(){this._isInSceneOnTop=!1}}),cc.TransitionProgress.create=function(t,e){return new cc.TransitionProgress(t,e)},cc.TransitionProgressRadialCCW=cc.TransitionProgress.extend({ctor:function(t,e){cc.TransitionProgress.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},_progressTimerNodeWithRenderTexture:function(t){var e=cc.director.getWinSize();return t=new cc.ProgressTimer(t.sprite),cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(t.sprite.flippedY=!0),t.type=cc.ProgressTimer.TYPE_RADIAL,t.reverseDir=!1,t.percentage=100,this._setAttrs(t,e.width/2,e.height/2),t}}),cc.TransitionProgressRadialCCW.create=function(t,e){return new cc.TransitionProgressRadialCCW(t,e)},cc.TransitionProgressRadialCW=cc.TransitionProgress.extend({ctor:function(t,e){cc.TransitionProgress.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},_progressTimerNodeWithRenderTexture:function(t){var e=cc.director.getWinSize();return t=new cc.ProgressTimer(t.sprite),cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(t.sprite.flippedY=!0),t.type=cc.ProgressTimer.TYPE_RADIAL,t.reverseDir=!0,t.percentage=100,this._setAttrs(t,e.width/2,e.height/2),t}}),cc.TransitionProgressRadialCW.create=function(t,e){var i=new cc.TransitionProgressRadialCW;return null!==i&&i.initWithDuration(t,e)?i:new cc.TransitionProgressRadialCW(t,e)},cc.TransitionProgressHorizontal=cc.TransitionProgress.extend({ctor:function(t,e){cc.TransitionProgress.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},_progressTimerNodeWithRenderTexture:function(t){var e=cc.director.getWinSize();return t=new cc.ProgressTimer(t.sprite),cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(t.sprite.flippedY=!0),t.type=cc.ProgressTimer.TYPE_BAR,t.midPoint=cc.p(1,0),t.barChangeRate=cc.p(1,0),t.percentage=100,this._setAttrs(t,e.width/2,e.height/2),t}}),cc.TransitionProgressHorizontal.create=function(t,e){return new cc.TransitionProgressHorizontal(t,e)},cc.TransitionProgressVertical=cc.TransitionProgress.extend({ctor:function(t,e){cc.TransitionProgress.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},_progressTimerNodeWithRenderTexture:function(t){var e=cc.director.getWinSize();return t=new cc.ProgressTimer(t.sprite),cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(t.sprite.flippedY=!0),t.type=cc.ProgressTimer.TYPE_BAR,t.midPoint=cc.p(0,0),t.barChangeRate=cc.p(0,1),t.percentage=100,this._setAttrs(t,e.width/2,e.height/2),t}}),cc.TransitionProgressVertical.create=function(t,e){return new cc.TransitionProgressVertical(t,e)},cc.TransitionProgressInOut=cc.TransitionProgress.extend({ctor:function(t,e){cc.TransitionProgress.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},_progressTimerNodeWithRenderTexture:function(t){var e=cc.director.getWinSize();return t=new cc.ProgressTimer(t.sprite),cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(t.sprite.flippedY=!0),t.type=cc.ProgressTimer.TYPE_BAR,t.midPoint=cc.p(.5,.5),t.barChangeRate=cc.p(1,1),t.percentage=0,this._setAttrs(t,e.width/2,e.height/2),t},_sceneOrder:function(){this._isInSceneOnTop=!1},_setupTransition:function(){this._sceneToBeModified=this._inScene,this._from=0,this._to=100}}),cc.TransitionProgressInOut.create=function(t,e){return new cc.TransitionProgressInOut(t,e)},cc.TransitionProgressOutIn=cc.TransitionProgress.extend({ctor:function(t,e){cc.TransitionProgress.prototype.ctor.call(this),e&&this.initWithDuration(t,e)},_progressTimerNodeWithRenderTexture:function(t){var e=cc.director.getWinSize();return t=new cc.ProgressTimer(t.sprite),cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(t.sprite.flippedY=!0),t.type=cc.ProgressTimer.TYPE_BAR,t.midPoint=cc.p(.5,.5),t.barChangeRate=cc.p(1,1),t.percentage=100,this._setAttrs(t,e.width/2,e.height/2),t}}),cc.TransitionProgressOutIn.create=function(t,e){return new cc.TransitionProgressOutIn(t,e)},cc.TransitionPageTurn=cc.TransitionScene.extend({ctor:function(t,e,i){cc.TransitionScene.prototype.ctor.call(this),this._gridProxy=new cc.NodeGrid,this.initWithDuration(t,e,i)},_back:!0,_gridProxy:null,_className:"TransitionPageTurn",initWithDuration:function(t,e,i){return this._back=i,cc.TransitionScene.prototype.initWithDuration.call(this,t,e),!0},actionWithSize:function(t){return this._back?cc.reverseTime(cc.pageTurn3D(this._duration,t)):cc.pageTurn3D(this._duration,t)},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this);var t,e=cc.director.getWinSize();e.width>e.height?(e=16,t=12):(e=12,t=16),e=this.actionWithSize(cc.size(e,t)),t=this._gridProxy,this._back?(t.setTarget(this._inScene),t._performRecursive(cc.Node._stateCallbackType.onEnter),this._inScene.visible=!1,t.runAction(cc.sequence(e,cc.callFunc(this.finish,this),cc.stopGrid())),this._inScene.runAction(cc.show())):(t.setTarget(this._outScene),t._performRecursive(cc.Node._stateCallbackType.onEnter),t.runAction(cc.sequence(e,cc.callFunc(this.finish,this),cc.stopGrid())))},visit:function(){this._back?this._outScene.visit():this._inScene.visit(),this._gridProxy.visit()},_sceneOrder:function(){this._isInSceneOnTop=this._back}}),cc.TransitionPageTurn.create=function(t,e,i){return new cc.TransitionPageTurn(t,e,i)},cc.Codec={name:"Jacob__Codec"},cc.unzip=function(){return cc.Codec.GZip.gunzip.apply(cc.Codec.GZip,arguments)},cc.unzipBase64=function(){var t=cc.Codec.Base64.decode.apply(cc.Codec.Base64,arguments);return cc.Codec.GZip.gunzip.apply(cc.Codec.GZip,[t])},cc.unzipBase64AsArray=function(t,e){e=e||1;var i,n,s,r=this.unzipBase64(t),o=[];for(i=0,s=r.length/e;i<s;i++)for(o[i]=0,n=e-1;0<=n;--n)o[i]+=r.charCodeAt(i*e+n)<<8*n;return o},cc.unzipAsArray=function(t,e){e=e||1;var i,n,s,r=this.unzip(t),o=[];for(i=0,s=r.length/e;i<s;i++)for(o[i]=0,n=e-1;0<=n;--n)o[i]+=r.charCodeAt(i*e+n)<<8*n;return o},cc.StringToArray=function(t){t=t.split(",");var e,i=[];for(e=0;e<t.length;e++)i.push(parseInt(t[e]));return i},cc.Codec.Base64={name:"Jacob__Codec__Base64"},cc.Codec.Base64._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",cc.Codec.Base64.decode=function(t){var e,i,n,s,r,o=[],a=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");a<t.length;)e=(e=this._keyStr.indexOf(t.charAt(a++)))<<2|(i=this._keyStr.indexOf(t.charAt(a++)))>>4,i=(15&i)<<4|(s=this._keyStr.indexOf(t.charAt(a++)))>>2,n=(3&s)<<6|(r=this._keyStr.indexOf(t.charAt(a++))),o.push(String.fromCharCode(e)),64!==s&&o.push(String.fromCharCode(i)),64!==r&&o.push(String.fromCharCode(n));return o.join("")},cc.Codec.Base64.decodeAsArray=function(t,e){var i,n,s,r=this.decode(t),o=[];for(i=0,s=r.length/e;i<s;i++)for(o[i]=0,n=e-1;0<=n;--n)o[i]+=r.charCodeAt(i*e+n)<<8*n;return o},cc.uint8ArrayToUint32Array=function(t){if(0!=t.length%4)return null;for(var e=t.length/4,i=window.Uint32Array?new Uint32Array(e):[],n=0;n<e;n++){var s=4*n;i[n]=t[s]+256*t[s+1]+65536*t[s+2]+16777216*t[s+3]}return i},cc.PNGReader=cc.Class.extend({ctor:function(t){var e,i,n,s;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},n=null;;){for(e=this.readUInt32(),s=t=void 0,s=[],t=0;4>t;++t)s.push(String.fromCharCode(this.data[this.pos++]));switch(t=s.join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":n&&this.animation.frames.push(n),this.pos+=4,n={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},t=this.readUInt16(),e=this.readUInt16()||100,n.delay=1e3*t/e,n.disposeOp=this.data[this.pos++],n.blendOp=this.data[this.pos++],n.data=[];break;case"IDAT":case"fdAT":for("fdAT"===t&&(this.pos+=4,e-=4),t=(null!=n?n.data:void 0)||this.imgData,s=0;0<=e?s<e:s>e;0<=e?++s:--s)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(e),0<(e=255-this.transparency.indexed.length))for(t=0;0<=e?t<e:t>e;0<=e?++t:--t)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":e=(s=this.read(e)).indexOf(0),t=String.fromCharCode.apply(String,s.slice(0,e)),this.text[t]=String.fromCharCode.apply(String,s.slice(e+1));break;case"IEND":n&&this.animation.frames.push(n);t:{switch(this.colorType){case 0:case 3:case 4:n=1;break t;case 2:case 6:n=3;break t}n=void 0}this.colors=n,this.hasAlphaChannel=4===(i=this.colorType)||6===i,i=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*i;t:{switch(this.colors){case 1:i="DeviceGray";break t;case 3:i="DeviceRGB";break t}i=void 0}return this.colorSpace=i,void(Uint8Array!=Array&&(this.imgData=new Uint8Array(this.imgData)));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file")}},read:function(t){var e,i;for(i=[],e=0;0<=t?e<t:e>t;0<=t?++e:--e)i.push(this.data[this.pos++]);return i},readUInt32:function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},readUInt16:function(){return this.data[this.pos++]<<8|this.data[this.pos++]},decodePixels:function(t){var e,i,n,s,r,o,a,c,h,l,u,d,_,g,f;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);for(t=new Zlib.Inflate(t,{index:0,verify:!1}).decompress(),d=(c=this.pixelBitlength/8)*this.width,h=new Uint8Array(d*this.height),o=t.length,i=l=u=0;l<o;){switch(t[l++]){case 0:for(e=0;e<d;e+=1)h[i++]=t[l++];break;case 1:for(s=_=0;_<d;s=_+=1)e=t[l++],r=s<c?0:h[i-c],h[i++]=(e+r)%256;break;case 2:for(s=r=0;r<d;s=r+=1)e=t[l++],n=(s-s%c)/c,_=u&&h[(u-1)*d+n*c+s%c],h[i++]=(_+e)%256;break;case 3:for(s=f=0;f<d;s=f+=1)e=t[l++],n=(s-s%c)/c,r=s<c?0:h[i-c],_=u&&h[(u-1)*d+n*c+s%c],h[i++]=(e+Math.floor((r+_)/2))%256;break;case 4:for(s=f=0;f<d;s=f+=1)e=t[l++],n=(s-s%c)/c,r=s<c?0:h[i-c],0===u?_=g=0:(_=h[(u-1)*d+n*c+s%c],g=n&&h[(u-1)*d+(n-1)*c+s%c]),a=r+_-g,s=Math.abs(a-r),n=Math.abs(a-_),a=Math.abs(a-g),r=s<=n&&s<=a?r:n<=a?_:g,h[i++]=(e+r)%256;break;default:throw Error("Invalid filter algorithm: "+t[l-1])}u++}return h},copyToImageData:function(t,e){var i,n,s,r,o,a,c,h;if(n=this.colors,h=null,i=this.hasAlphaChannel,this.palette.length&&(h=null!=(s=this._decodedPalette)?s:this._decodedPalette=this.decodePalette(),n=4,i=!0),c=(s=t.data||t).length,o=h||e,r=a=0,1===n)for(;r<c;)n=h?4*e[r/4]:a,a=o[n++],s[r++]=a,s[r++]=a,s[r++]=a,s[r++]=i?o[n++]:255,a=n;else for(;r<c;)n=h?4*e[r/4]:a,s[r++]=o[n++],s[r++]=o[n++],s[r++]=o[n++],s[r++]=i?o[n++]:255,a=n},decodePalette:function(){var t,e,i,n,s,r,o,a,c;for(i=this.palette,r=this.transparency.indexed||[],s=new Uint8Array((r.length||0)+i.length),e=o=t=n=0,a=i.length;o<a;e=o+=3)s[n++]=i[e],s[n++]=i[e+1],s[n++]=i[e+2],s[n++]=null!=(c=r[t++])?c:255;return s},render:function(t){var e;return t.width=this.width,t.height=this.height,e=(t=t.getContext("2d")).createImageData(this.width,this.height),this.copyToImageData(e,this.decodePixels()),t.putImageData(e,0,0)}}),cc.tiffReader={_littleEndian:!1,_tiffData:null,_fileDirectories:[],getUint8:function(t){return this._tiffData[t]},getUint16:function(t){return this._littleEndian?this._tiffData[t+1]<<8|this._tiffData[t]:this._tiffData[t]<<8|this._tiffData[t+1]},getUint32:function(t){var e=this._tiffData;return this._littleEndian?e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]:e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]},checkLittleEndian:function(){var t=this.getUint16(0);if(18761===t)this.littleEndian=!0;else{if(19789!==t)throw console.log(t),TypeError("Invalid byte order value.");this.littleEndian=!1}return this.littleEndian},hasTowel:function(){if(42!==this.getUint16(2))throw RangeError("You forgot your towel!");return!0},getFieldTypeName:function(t){var e=this.fieldTypeNames;return t in e?e[t]:null},getFieldTagName:function(t){var e=this.fieldTagNames;return t in e?e[t]:(console.log("Unknown Field Tag:",t),"Tag"+t)},getFieldTypeLength:function(t){return-1!==["BYTE","ASCII","SBYTE","UNDEFINED"].indexOf(t)?1:-1!==["SHORT","SSHORT"].indexOf(t)?2:-1!==["LONG","SLONG","FLOAT"].indexOf(t)?4:-1!==["RATIONAL","SRATIONAL","DOUBLE"].indexOf(t)?8:null},getFieldValues:function(t,e,i,n){t=[];var s=this.getFieldTypeLength(e);if(4>=s*i)!1===this.littleEndian?t.push(n>>>8*(4-s)):t.push(n);else for(var r=0;r<i;r++){var o=s*r;8<=s?-1!==["RATIONAL","SRATIONAL"].indexOf(e)?(t.push(this.getUint32(n+o)),t.push(this.getUint32(n+o+4))):cc.log("Can't handle this field type or size"):t.push(this.getBytes(s,n+o))}return"ASCII"===e&&t.forEach((function(t,e,i){i[e]=String.fromCharCode(t)})),t},getBytes:function(t,e){if(0>=t)cc.log("No bytes requested");else{if(1>=t)return this.getUint8(e);if(2>=t)return this.getUint16(e);if(3>=t)return this.getUint32(e)>>>8;if(4>=t)return this.getUint32(e);cc.log("Too many bytes requested")}},getBits:function(t,e,i){i=i||0,e+=Math.floor(i/8);var n,s,r=i+t;return t=32-t,0>=r?console.log("No bits requested"):8>=r?(n=24+i,s=this.getUint8(e)):16>=r?(n=16+i,s=this.getUint16(e)):32>=r?(n=i,s=this.getUint32(e)):console.log("Too many bits requested"),{bits:s<<n>>>t,byteOffset:e+Math.floor(r/8),bitOffset:r%8}},parseFileDirectory:function(t){var e=this.getUint16(t),i=[];t+=2;for(var n=0;n<e;t+=12,n++){var s=this.getUint16(t),r=this.getUint16(t+2),o=this.getUint32(t+4),a=this.getUint32(t+8);s=this.getFieldTagName(s),r=this.getFieldTypeName(r),o=this.getFieldValues(s,r,o,a);i[s]={type:r,values:o}}this._fileDirectories.push(i),0!==(e=this.getUint32(t))&&this.parseFileDirectory(e)},clampColorSample:function(t,e){var i=Math.pow(2,8-e);return Math.floor(t*i+(i-1))},parseTIFF:function(t,e){if(e=e||document.createElement("canvas"),this._tiffData=t,this.canvas=e,this.checkLittleEndian(),this.hasTowel()){var i=this.getUint32(4);this._fileDirectories.length=0,this.parseFileDirectory(i);var n=this._fileDirectories[0],s=(i=n.ImageWidth.values[0],n.ImageLength.values[0]);this.canvas.width=i,this.canvas.height=s;var r=[],o=n.Compression?n.Compression.values[0]:1,a=n.SamplesPerPixel.values[0],c=[],h=0,l=!1;if(n.BitsPerSample.values.forEach((function(t,e,i){c[e]={bitsPerSample:t,hasBytesPerSample:!1,bytesPerSample:void 0},0==t%8&&(c[e].hasBytesPerSample=!0,c[e].bytesPerSample=t/8),h+=t}),this),0==h%8){l=!0;var u=h/8}var d=n.StripOffsets.values,_=d.length;if(n.StripByteCounts)var g=n.StripByteCounts.values;else{if(cc.log("Missing StripByteCounts!"),1!==_)throw Error("Cannot recover from missing StripByteCounts");g=[Math.ceil(i*s*h/8)]}for(var f=0;f<_;f++){var p=d[f];r[f]=[];for(var m=g[f],T=0,S=0,y=1,C=!0,E=[],A=0,b=0,v=0;T<m;T+=y)switch(o){case 1:for(y=0,E=[];y<a;y++){if(!c[y].hasBytesPerSample){var I=this.getBits(c[y].bitsPerSample,p+T,S);throw E.push(I.bits),T=I.byteOffset-p,S=I.bitOffset,RangeError("Cannot handle sub-byte bits per sample")}E.push(this.getBytes(c[y].bytesPerSample,p+T+c[y].bytesPerSample*y))}if(r[f].push(E),!l)throw y=0,RangeError("Cannot handle sub-byte bits per pixel");y=u;break;case 32773:if(C){C=!1;var x=1,R=1;0<=(y=this.getInt8(p+T))&&127>=y?x=y+1:-127<=y&&-1>=y?R=1-y:C=!0}else{var P=this.getUint8(p+T);for(y=0;y<R;y++){if(!c[b].hasBytesPerSample)throw RangeError("Cannot handle sub-byte bits per sample");v=v<<8*A|P,++A===c[b].bytesPerSample&&(E.push(v),v=A=0,b++),b===a&&(r[f].push(E),E=[],b=0)}0===--x&&(C=!0)}y=1}}if(e.getContext){if((u=this.canvas.getContext("2d")).fillStyle="rgba(255, 255, 255, 0)",f=n.RowsPerStrip?n.RowsPerStrip.values[0]:s,p=r.length,s=0===(s%=f)?f:s,T=f,o=0,E=n.PhotometricInterpretation.values[0],x=[],R=0,n.ExtraSamples&&(R=(x=n.ExtraSamples.values).length),n.ColorMap){I=n.ColorMap.values;var w=Math.pow(2,c[0].bitsPerSample)}for(f=0;f<p;f++){for(f+1===p&&(T=s),n=r[f].length,o*=f,l=a=0;l<n;a++)for(d=0;d<i;d++,l++){if(g=r[f][l],C=S=m=0,_=1,0<R)for(m=0;m<R;m++)if(1===x[m]||2===x[m]){_=g[3+m]/256;break}switch(E){case 0:if(c[0].hasBytesPerSample)var B=Math.pow(16,2*c[0].bytesPerSample);g.forEach((function(t,e,i){i[e]=B-t}));case 1:m=S=C=this.clampColorSample(g[0],c[0].bitsPerSample);break;case 2:m=this.clampColorSample(g[0],c[0].bitsPerSample),S=this.clampColorSample(g[1],c[1].bitsPerSample),C=this.clampColorSample(g[2],c[2].bitsPerSample);break;case 3:if(void 0===I)throw Error("Palette image missing color map");g=g[0],m=this.clampColorSample(I[g],16),S=this.clampColorSample(I[w+g],16),C=this.clampColorSample(I[2*w+g],16);break;default:throw RangeError("Unknown Photometric Interpretation:",E)}u.fillStyle="rgba("+m+", "+S+", "+C+", "+_+")",u.fillRect(d,o+a,1,1)}o=T}}return this.canvas}},fieldTagNames:{315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop"},fieldTypeNames:{1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE"}},cc.Particle=function(t,e,i,n,s,r,o,a,c,h,l,u){this.pos=t||cc.p(0,0),this.startPos=e||cc.p(0,0),this.color=i||{r:0,g:0,b:0,a:255},this.deltaColor=n||{r:0,g:0,b:0,a:255},this.size=s||0,this.deltaSize=r||0,this.rotation=o||0,this.deltaRotation=a||0,this.timeToLive=c||0,this.atlasIndex=h||0,this.modeA=l||new cc.Particle.ModeA,this.modeB=u||new cc.Particle.ModeB,this.isChangeColor=!1,this.drawPos=cc.p(0,0)},cc.Particle.ModeA=function(t,e,i){this.dir=t||cc.p(0,0),this.radialAccel=e||0,this.tangentialAccel=i||0},cc.Particle.ModeB=function(t,e,i,n){this.angle=t||0,this.degreesPerSecond=e||0,this.radius=i||0,this.deltaRadius=n||0},cc.Particle.TemporaryPoints=[cc.p(),cc.p(),cc.p(),cc.p()],cc.ParticleSystem=cc.Node.extend({_className:"ParticleSystem",_plistFile:"",_elapsed:0,_dontTint:!1,modeA:null,modeB:null,_pointZeroForParticle:cc.p(0,0),_particles:null,_emitCounter:0,_particleIdx:0,_batchNode:null,atlasIndex:0,_transformSystemDirty:!1,_allocatedParticles:0,_isActive:!1,particleCount:0,duration:0,_sourcePosition:null,_posVar:null,life:0,lifeVar:0,angle:0,angleVar:0,startSize:0,startSizeVar:0,endSize:0,endSizeVar:0,_startColor:null,_startColorVar:null,_endColor:null,_endColorVar:null,startSpin:0,startSpinVar:0,endSpin:0,endSpinVar:0,emissionRate:0,_totalParticles:0,_texture:null,_blendFunc:null,_opacityModifyRGB:!1,positionType:null,autoRemoveOnFinish:!1,emitterMode:0,_textureLoaded:null,ctor:function(t){cc.Node.prototype.ctor.call(this),this.emitterMode=cc.ParticleSystem.MODE_GRAVITY,this.modeA=new cc.ParticleSystem.ModeA,this.modeB=new cc.ParticleSystem.ModeB,this._blendFunc={src:cc.BLEND_SRC,dst:cc.BLEND_DST},this._particles=[],this._sourcePosition=cc.p(0,0),this._posVar=cc.p(0,0),this._startColor=cc.color(255,255,255,255),this._startColorVar=cc.color(255,255,255,255),this._endColor=cc.color(255,255,255,255),this._endColorVar=cc.color(255,255,255,255),this._plistFile="",this._elapsed=0,this._dontTint=!1,this._pointZeroForParticle=cc.p(0,0),this._particleIdx=this._emitCounter=0,this._batchNode=null,this.atlasIndex=0,this._transformSystemDirty=!1,this._allocatedParticles=0,this._isActive=!1,this._totalParticles=this.emissionRate=this.endSpinVar=this.endSpin=this.startSpinVar=this.startSpin=this.endSizeVar=this.endSize=this.startSizeVar=this.startSize=this.angleVar=this.angle=this.lifeVar=this.life=this.duration=this.particleCount=0,this._texture=null,this._opacityModifyRGB=!1,this.positionType=cc.ParticleSystem.TYPE_FREE,this.autoRemoveOnFinish=!1,this._textureLoaded=!0,!t||cc.isNumber(t)?(t=t||100,this.setDrawMode(cc.ParticleSystem.TEXTURE_MODE),this.initWithTotalParticles(t)):cc.isString(t)?this.initWithFile(t):cc.isObject(t)&&this.initWithDictionary(t,"")},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.ParticleSystem.CanvasRenderCmd(this):new cc.ParticleSystem.WebGLRenderCmd(this)},ignoreColor:function(t){this._dontTint=t},initTexCoordsWithRect:function(t){this._renderCmd.initTexCoordsWithRect(t)},getBatchNode:function(){return this._batchNode},setBatchNode:function(t){this._renderCmd.setBatchNode(t)},getAtlasIndex:function(){return this.atlasIndex},setAtlasIndex:function(t){this.atlasIndex=t},getDrawMode:function(){return this._renderCmd.getDrawMode()},setDrawMode:function(t){this._renderCmd.setDrawMode(t)},getShapeType:function(){return this._renderCmd.getShapeType()},setShapeType:function(t){this._renderCmd.setShapeType(t)},isActive:function(){return this._isActive},getParticleCount:function(){return this.particleCount},setParticleCount:function(t){this.particleCount=t},getDuration:function(){return this.duration},setDuration:function(t){this.duration=t},getSourcePosition:function(){return{x:this._sourcePosition.x,y:this._sourcePosition.y}},setSourcePosition:function(t){this._sourcePosition.x=t.x,this._sourcePosition.y=t.y},getPosVar:function(){return{x:this._posVar.x,y:this._posVar.y}},setPosVar:function(t){this._posVar.x=t.x,this._posVar.y=t.y},getLife:function(){return this.life},setLife:function(t){this.life=t},getLifeVar:function(){return this.lifeVar},setLifeVar:function(t){this.lifeVar=t},getAngle:function(){return this.angle},setAngle:function(t){this.angle=t},getAngleVar:function(){return this.angleVar},setAngleVar:function(t){this.angleVar=t},getGravity:function(){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.getGravity() : Particle Mode should be Gravity");var t=this.modeA.gravity;return cc.p(t.x,t.y)},setGravity:function(t){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.setGravity() : Particle Mode should be Gravity"),this.modeA.gravity=t},getSpeed:function(){return this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.getSpeed() : Particle Mode should be Gravity"),this.modeA.speed},setSpeed:function(t){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.setSpeed() : Particle Mode should be Gravity"),this.modeA.speed=t},getSpeedVar:function(){return this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.getSpeedVar() : Particle Mode should be Gravity"),this.modeA.speedVar},setSpeedVar:function(t){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.setSpeedVar() : Particle Mode should be Gravity"),this.modeA.speedVar=t},getTangentialAccel:function(){return this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.getTangentialAccel() : Particle Mode should be Gravity"),this.modeA.tangentialAccel},setTangentialAccel:function(t){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.setTangentialAccel() : Particle Mode should be Gravity"),this.modeA.tangentialAccel=t},getTangentialAccelVar:function(){return this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.getTangentialAccelVar() : Particle Mode should be Gravity"),this.modeA.tangentialAccelVar},setTangentialAccelVar:function(t){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.setTangentialAccelVar() : Particle Mode should be Gravity"),this.modeA.tangentialAccelVar=t},getRadialAccel:function(){return this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.getRadialAccel() : Particle Mode should be Gravity"),this.modeA.radialAccel},setRadialAccel:function(t){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.setRadialAccel() : Particle Mode should be Gravity"),this.modeA.radialAccel=t},getRadialAccelVar:function(){return this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.getRadialAccelVar() : Particle Mode should be Gravity"),this.modeA.radialAccelVar},setRadialAccelVar:function(t){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.setRadialAccelVar() : Particle Mode should be Gravity"),this.modeA.radialAccelVar=t},getRotationIsDir:function(){return this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.getRotationIsDir() : Particle Mode should be Gravity"),this.modeA.rotationIsDir},setRotationIsDir:function(t){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.setRotationIsDir() : Particle Mode should be Gravity"),this.modeA.rotationIsDir=t},getStartRadius:function(){return this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.getStartRadius() : Particle Mode should be Radius"),this.modeB.startRadius},setStartRadius:function(t){this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.setStartRadius() : Particle Mode should be Radius"),this.modeB.startRadius=t},getStartRadiusVar:function(){return this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.getStartRadiusVar() : Particle Mode should be Radius"),this.modeB.startRadiusVar},setStartRadiusVar:function(t){this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.setStartRadiusVar() : Particle Mode should be Radius"),this.modeB.startRadiusVar=t},getEndRadius:function(){return this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.getEndRadius() : Particle Mode should be Radius"),this.modeB.endRadius},setEndRadius:function(t){this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.setEndRadius() : Particle Mode should be Radius"),this.modeB.endRadius=t},getEndRadiusVar:function(){return this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.getEndRadiusVar() : Particle Mode should be Radius"),this.modeB.endRadiusVar},setEndRadiusVar:function(t){this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.setEndRadiusVar() : Particle Mode should be Radius"),this.modeB.endRadiusVar=t},getRotatePerSecond:function(){return this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.getRotatePerSecond() : Particle Mode should be Radius"),this.modeB.rotatePerSecond},setRotatePerSecond:function(t){this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.setRotatePerSecond() : Particle Mode should be Radius"),this.modeB.rotatePerSecond=t},getRotatePerSecondVar:function(){return this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.getRotatePerSecondVar() : Particle Mode should be Radius"),this.modeB.rotatePerSecondVar},setRotatePerSecondVar:function(t){this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.setRotatePerSecondVar() : Particle Mode should be Radius"),this.modeB.rotatePerSecondVar=t},setScale:function(t,e){this._transformSystemDirty=!0,cc.Node.prototype.setScale.call(this,t,e)},setRotation:function(t){this._transformSystemDirty=!0,cc.Node.prototype.setRotation.call(this,t)},setScaleX:function(t){this._transformSystemDirty=!0,cc.Node.prototype.setScaleX.call(this,t)},setScaleY:function(t){this._transformSystemDirty=!0,cc.Node.prototype.setScaleY.call(this,t)},getStartSize:function(){return this.startSize},setStartSize:function(t){this.startSize=t},getStartSizeVar:function(){return this.startSizeVar},setStartSizeVar:function(t){this.startSizeVar=t},getEndSize:function(){return this.endSize},setEndSize:function(t){this.endSize=t},getEndSizeVar:function(){return this.endSizeVar},setEndSizeVar:function(t){this.endSizeVar=t},getStartColor:function(){return cc.color(this._startColor.r,this._startColor.g,this._startColor.b,this._startColor.a)},setStartColor:function(t){this._startColor.r=t.r,this._startColor.g=t.g,this._startColor.b=t.b,this._startColor.a=t.a},getStartColorVar:function(){return cc.color(this._startColorVar.r,this._startColorVar.g,this._startColorVar.b,this._startColorVar.a)},setStartColorVar:function(t){this._startColorVar.r=t.r,this._startColorVar.g=t.g,this._startColorVar.b=t.b,this._startColorVar.a=t.a},getEndColor:function(){return cc.color(this._endColor.r,this._endColor.g,this._endColor.b,this._endColor.a)},setEndColor:function(t){this._endColor.r=t.r,this._endColor.g=t.g,this._endColor.b=t.b,this._endColor.a=t.a},getEndColorVar:function(){return cc.color(this._endColorVar.r,this._endColorVar.g,this._endColorVar.b,this._endColorVar.a)},setEndColorVar:function(t){this._endColorVar.r=t.r,this._endColorVar.g=t.g,this._endColorVar.b=t.b,this._endColorVar.a=t.a},getStartSpin:function(){return this.startSpin},setStartSpin:function(t){this.startSpin=t},getStartSpinVar:function(){return this.startSpinVar},setStartSpinVar:function(t){this.startSpinVar=t},getEndSpin:function(){return this.endSpin},setEndSpin:function(t){this.endSpin=t},getEndSpinVar:function(){return this.endSpinVar},setEndSpinVar:function(t){this.endSpinVar=t},getEmissionRate:function(){return this.emissionRate},setEmissionRate:function(t){this.emissionRate=t},getTotalParticles:function(){return this._totalParticles},setTotalParticles:function(t){this._renderCmd.setTotalParticles(t)},getTexture:function(){return this._texture},setTexture:function(t){t&&(t.isLoaded()?this.setTextureWithRect(t,cc.rect(0,0,t.width,t.height)):(this._textureLoaded=!1,t.addEventListener("load",(function(t){this._textureLoaded=!0,this.setTextureWithRect(t,cc.rect(0,0,t.width,t.height))}),this)))},getBlendFunc:function(){return this._blendFunc},setBlendFunc:function(t,e){void 0===e?this._blendFunc!==t&&(this._blendFunc=t,this._updateBlendFunc()):this._blendFunc.src===t&&this._blendFunc.dst===e||(this._blendFunc={src:t,dst:e},this._updateBlendFunc())},isOpacityModifyRGB:function(){return this._opacityModifyRGB},setOpacityModifyRGB:function(t){this._opacityModifyRGB=t},isBlendAdditive:function(){return this._blendFunc.src===cc.SRC_ALPHA&&this._blendFunc.dst===cc.ONE||this._blendFunc.src===cc.ONE&&this._blendFunc.dst===cc.ONE},setBlendAdditive:function(t){var e=this._blendFunc;t?(e.src=cc.SRC_ALPHA,e.dst=cc.ONE):this._renderCmd._setBlendAdditive()},getPositionType:function(){return this.positionType},setPositionType:function(t){this.positionType=t},isAutoRemoveOnFinish:function(){return this.autoRemoveOnFinish},setAutoRemoveOnFinish:function(t){this.autoRemoveOnFinish=t},getEmitterMode:function(){return this.emitterMode},setEmitterMode:function(t){this.emitterMode=t},init:function(){return this.initWithTotalParticles(150)},initWithFile:function(t){return this._plistFile=t,(t=cc.loader.getRes(t))?this.initWithDictionary(t,""):(cc.log("cc.ParticleSystem.initWithFile(): Particles: file not found"),!1)},getBoundingBoxToWorld:function(){return cc.rect(0,0,cc._canvas.width,cc._canvas.height)},initWithDictionary:function(t,e){var i=!1,n=null,s=(n=this._valueForKey,parseInt(n("maxParticles",t)));if(this.initWithTotalParticles(s)){if(this.angle=parseFloat(n("angle",t)),this.angleVar=parseFloat(n("angleVariance",t)),this.duration=parseFloat(n("duration",t)),this._blendFunc.src=parseInt(n("blendFuncSource",t)),this._blendFunc.dst=parseInt(n("blendFuncDestination",t)),(i=this._startColor).r=255*parseFloat(n("startColorRed",t)),i.g=255*parseFloat(n("startColorGreen",t)),i.b=255*parseFloat(n("startColorBlue",t)),i.a=255*parseFloat(n("startColorAlpha",t)),(i=this._startColorVar).r=255*parseFloat(n("startColorVarianceRed",t)),i.g=255*parseFloat(n("startColorVarianceGreen",t)),i.b=255*parseFloat(n("startColorVarianceBlue",t)),i.a=255*parseFloat(n("startColorVarianceAlpha",t)),(i=this._endColor).r=255*parseFloat(n("finishColorRed",t)),i.g=255*parseFloat(n("finishColorGreen",t)),i.b=255*parseFloat(n("finishColorBlue",t)),i.a=255*parseFloat(n("finishColorAlpha",t)),(i=this._endColorVar).r=255*parseFloat(n("finishColorVarianceRed",t)),i.g=255*parseFloat(n("finishColorVarianceGreen",t)),i.b=255*parseFloat(n("finishColorVarianceBlue",t)),i.a=255*parseFloat(n("finishColorVarianceAlpha",t)),this.startSize=parseFloat(n("startParticleSize",t)),this.startSizeVar=parseFloat(n("startParticleSizeVariance",t)),this.endSize=parseFloat(n("finishParticleSize",t)),this.endSizeVar=parseFloat(n("finishParticleSizeVariance",t)),this.setPosition(parseFloat(n("sourcePositionx",t)),parseFloat(n("sourcePositiony",t))),this._posVar.x=parseFloat(n("sourcePositionVariancex",t)),this._posVar.y=parseFloat(n("sourcePositionVariancey",t)),this.startSpin=parseFloat(n("rotationStart",t)),this.startSpinVar=parseFloat(n("rotationStartVariance",t)),this.endSpin=parseFloat(n("rotationEnd",t)),this.endSpinVar=parseFloat(n("rotationEndVariance",t)),this.emitterMode=parseInt(n("emitterType",t)),this.emitterMode===cc.ParticleSystem.MODE_GRAVITY)(i=this.modeA).gravity.x=parseFloat(n("gravityx",t)),i.gravity.y=parseFloat(n("gravityy",t)),i.speed=parseFloat(n("speed",t)),i.speedVar=parseFloat(n("speedVariance",t)),s=n("radialAcceleration",t),i.radialAccel=s?parseFloat(s):0,s=n("radialAccelVariance",t),i.radialAccelVar=s?parseFloat(s):0,s=n("tangentialAcceleration",t),i.tangentialAccel=s?parseFloat(s):0,s=n("tangentialAccelVariance",t),i.tangentialAccelVar=s?parseFloat(s):0,null!==(s=n("rotationIsDir",t))?(s=s.toString().toLowerCase(),i.rotationIsDir="true"===s||"1"===s):i.rotationIsDir=!1;else{if(this.emitterMode!==cc.ParticleSystem.MODE_RADIUS)return cc.log("cc.ParticleSystem.initWithDictionary(): Invalid emitterType in config file"),!1;(i=this.modeB).startRadius=parseFloat(n("maxRadius",t)),i.startRadiusVar=parseFloat(n("maxRadiusVariance",t)),i.endRadius=parseFloat(n("minRadius",t)),i.endRadiusVar=0,i.rotatePerSecond=parseFloat(n("rotatePerSecond",t)),i.rotatePerSecondVar=parseFloat(n("rotatePerSecondVariance",t))}if(this.life=parseFloat(n("particleLifespan",t)),this.lifeVar=parseFloat(n("particleLifespanVariance",t)),this.emissionRate=this._totalParticles/this.life,!this._batchNode)if(this._opacityModifyRGB=!1,i=n("textureFileName",t),i=cc.path.changeBasename(this._plistFile,i),s=cc.textureCache.getTextureForKey(i))this.setTexture(s);else if((n=n("textureImageData",t))&&0!==n.length){if(!(n=cc.unzipBase64AsArray(n,1)))return cc.log("cc.ParticleSystem: error decoding or ungzipping textureImageData"),!1;if((s=cc.getImageFormatByData(n))!==cc.FMT_TIFF&&s!==cc.FMT_PNG)return cc.log("cc.ParticleSystem: unknown image format with Data"),!1;var r=document.createElement("canvas");s===cc.FMT_PNG?new cc.PNGReader(n).render(r):cc.tiffReader.parseTIFF(n,r),cc.textureCache.cacheImage(i,r),(n=cc.textureCache.getTextureForKey(i))||cc.log("cc.ParticleSystem.initWithDictionary() : error loading the texture"),this.setTexture(n)}else{if(!(s=cc.textureCache.addImage(i)))return!1;this.setTexture(s)}i=!0}return i},initWithTotalParticles:function(t){this._totalParticles=t;var e,i=this._particles;for(e=i.length=0;e<t;e++)i[e]=new cc.Particle;if(!i)return cc.log("Particle system: not enough memory"),!1;if(this._allocatedParticles=t,this._batchNode)for(e=0;e<this._totalParticles;e++)i[e].atlasIndex=e;return this._isActive=!0,this._blendFunc.src=cc.BLEND_SRC,this._blendFunc.dst=cc.BLEND_DST,this.positionType=cc.ParticleSystem.TYPE_FREE,this.emitterMode=cc.ParticleSystem.MODE_GRAVITY,this._transformSystemDirty=this.autoRemoveOnFinish=!1,this.scheduleUpdateWithPriority(1),this._renderCmd._initWithTotalParticles(t),!0},destroyParticleSystem:function(){this.unscheduleUpdate()},addParticle:function(){if(this.isFull())return!1;var t=this._renderCmd.addParticle();return this.initParticle(t),++this.particleCount,!0},initParticle:function(t){var e,i,n=cc.randomMinus1To1;t.timeToLive=this.life+this.lifeVar*n(),t.timeToLive=Math.max(0,t.timeToLive),t.pos.x=this._sourcePosition.x+this._posVar.x*n(),t.pos.y=this._sourcePosition.y+this._posVar.y*n(),e=this._startColor;var s=this._startColorVar,r=this._endColor;if(i=this._endColorVar,e={r:cc.clampf(e.r+s.r*n(),0,255),g:cc.clampf(e.g+s.g*n(),0,255),b:cc.clampf(e.b+s.b*n(),0,255),a:cc.clampf(e.a+s.a*n(),0,255)},i={r:cc.clampf(r.r+i.r*n(),0,255),g:cc.clampf(r.g+i.g*n(),0,255),b:cc.clampf(r.b+i.b*n(),0,255),a:cc.clampf(r.a+i.a*n(),0,255)},t.color=e,s=t.deltaColor,r=t.timeToLive,s.r=(i.r-e.r)/r,s.g=(i.g-e.g)/r,s.b=(i.b-e.b)/r,s.a=(i.a-e.a)/r,e=this.startSize+this.startSizeVar*n(),e=Math.max(0,e),t.size=e,this.endSize===cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE?t.deltaSize=0:(i=this.endSize+this.endSizeVar*n(),i=Math.max(0,i),t.deltaSize=(i-e)/r),e=this.startSpin+this.startSpinVar*n(),i=this.endSpin+this.endSpinVar*n(),t.rotation=e,t.deltaRotation=(i-e)/r,this.positionType===cc.ParticleSystem.TYPE_FREE?t.startPos=this.convertToWorldSpace(this._pointZeroForParticle):this.positionType===cc.ParticleSystem.TYPE_RELATIVE&&(t.startPos.x=this._position.x,t.startPos.y=this._position.y),e=cc.degreesToRadians(this.angle+this.angleVar*n()),this.emitterMode===cc.ParticleSystem.MODE_GRAVITY)r=this.modeA,i=t.modeA,s=r.speed+r.speedVar*n(),i.dir.x=Math.cos(e),i.dir.y=Math.sin(e),cc.pMultIn(i.dir,s),i.radialAccel=r.radialAccel+r.radialAccelVar*n(),i.tangentialAccel=r.tangentialAccel+r.tangentialAccelVar*n(),r.rotationIsDir&&(t.rotation=-cc.radiansToDegrees(cc.pToAngle(i.dir)));else{i=this.modeB,t=t.modeB;s=i.startRadius+i.startRadiusVar*n();var o=i.endRadius+i.endRadiusVar*n();t.radius=s,t.deltaRadius=i.endRadius===cc.ParticleSystem.START_RADIUS_EQUAL_TO_END_RADIUS?0:(o-s)/r,t.angle=e,t.degreesPerSecond=cc.degreesToRadians(i.rotatePerSecond+i.rotatePerSecondVar*n())}},stopSystem:function(){this._isActive=!1,this._elapsed=this.duration,this._emitCounter=0},resetSystem:function(){this._isActive=!0,this._elapsed=0;var t=this._particles;for(this._particleIdx=0;this._particleIdx<this.particleCount;++this._particleIdx)t[this._particleIdx].timeToLive=0},isFull:function(){return this.particleCount>=this._totalParticles},updateQuadWithParticle:function(t,e){this._renderCmd.updateQuadWithParticle(t,e)},postStep:function(){this._renderCmd.postStep()},update:function(t){if(this._isActive&&this.emissionRate){var e=1/this.emissionRate;for(this.particleCount<this._totalParticles&&(this._emitCounter+=t);this.particleCount<this._totalParticles&&this._emitCounter>e;)this.addParticle(),this._emitCounter-=e;this._elapsed+=t,-1!==this.duration&&this.duration<this._elapsed&&this.stopSystem()}if(this._particleIdx=0,e=cc.Particle.TemporaryPoints[0],this.positionType===cc.ParticleSystem.TYPE_FREE?cc.pIn(e,this.convertToWorldSpace(this._pointZeroForParticle)):this.positionType===cc.ParticleSystem.TYPE_RELATIVE&&(e.x=this._position.x,e.y=this._position.y),this._visible){for(var i=cc.Particle.TemporaryPoints[1],n=cc.Particle.TemporaryPoints[2],s=cc.Particle.TemporaryPoints[3],r=this._particles;this._particleIdx<this.particleCount;){cc.pZeroIn(i),cc.pZeroIn(n),cc.pZeroIn(s);var o=r[this._particleIdx];if(o.timeToLive-=t,0<o.timeToLive){if(this.emitterMode===cc.ParticleSystem.MODE_GRAVITY){var a=s,c=i,h=n;o.pos.x||o.pos.y?(cc.pIn(c,o.pos),cc.pNormalizeIn(c)):cc.pZeroIn(c),cc.pIn(h,c),cc.pMultIn(c,o.modeA.radialAccel);var l=h.x;h.x=-h.y,h.y=l,cc.pMultIn(h,o.modeA.tangentialAccel),cc.pIn(a,c),cc.pAddIn(a,h),cc.pAddIn(a,this.modeA.gravity),cc.pMultIn(a,t),cc.pAddIn(o.modeA.dir,a),cc.pIn(a,o.modeA.dir),cc.pMultIn(a,t),cc.pAddIn(o.pos,a)}else(a=o.modeB).angle+=a.degreesPerSecond*t,a.radius+=a.deltaRadius*t,o.pos.x=-Math.cos(a.angle)*a.radius,o.pos.y=-Math.sin(a.angle)*a.radius;this._renderCmd._updateDeltaColor(o,t),o.size+=o.deltaSize*t,o.size=Math.max(0,o.size),o.rotation+=o.deltaRotation*t,a=i,this.positionType===cc.ParticleSystem.TYPE_FREE||this.positionType===cc.ParticleSystem.TYPE_RELATIVE?(c=n,cc.pIn(c,e),cc.pSubIn(c,o.startPos),cc.pIn(a,o.pos),cc.pSubIn(a,c)):cc.pIn(a,o.pos),this._batchNode&&(a.x+=this._position.x,a.y+=this._position.y),this._renderCmd.updateParticlePosition(o,a),++this._particleIdx}else if(o=o.atlasIndex,this._particleIdx!==this.particleCount-1&&(a=r[this._particleIdx],r[this._particleIdx]=r[this.particleCount-1],r[this.particleCount-1]=a),this._batchNode&&(this._batchNode.disableParticle(this.atlasIndex+o),r[this.particleCount-1].atlasIndex=o),--this.particleCount,0===this.particleCount&&this.autoRemoveOnFinish)return this.unscheduleUpdate(),void this._parent.removeChild(this,!0)}this._transformSystemDirty=!1}this._batchNode||this.postStep()},updateWithNoTime:function(){this.update(0)},_valueForKey:function(t,e){if(e){var i=e[t];return null!=i?i:""}return""},_updateBlendFunc:function(){if(this._batchNode)cc.log("Can't change blending functions when the particle is being batched");else{var t=this._texture;if(t&&t instanceof cc.Texture2D){this._opacityModifyRGB=!1;var e=this._blendFunc;e.src===cc.BLEND_SRC&&e.dst===cc.BLEND_DST&&(t.hasPremultipliedAlpha()?this._opacityModifyRGB=!0:(e.src=cc.SRC_ALPHA,e.dst=cc.ONE_MINUS_SRC_ALPHA))}}},clone:function(){var t=new cc.ParticleSystem;if(t.initWithTotalParticles(this.getTotalParticles())){t.setAngle(this.getAngle()),t.setAngleVar(this.getAngleVar()),t.setDuration(this.getDuration());var e=this.getBlendFunc();if(t.setBlendFunc(e.src,e.dst),t.setStartColor(this.getStartColor()),t.setStartColorVar(this.getStartColorVar()),t.setEndColor(this.getEndColor()),t.setEndColorVar(this.getEndColorVar()),t.setStartSize(this.getStartSize()),t.setStartSizeVar(this.getStartSizeVar()),t.setEndSize(this.getEndSize()),t.setEndSizeVar(this.getEndSizeVar()),t.setPosition(cc.p(this.x,this.y)),t.setPosVar(cc.p(this.getPosVar().x,this.getPosVar().y)),t.setPositionType(this.getPositionType()),t.setStartSpin(this.getStartSpin()||0),t.setStartSpinVar(this.getStartSpinVar()||0),t.setEndSpin(this.getEndSpin()||0),t.setEndSpinVar(this.getEndSpinVar()||0),t.setEmitterMode(this.getEmitterMode()),this.getEmitterMode()===cc.ParticleSystem.MODE_GRAVITY?(e=this.getGravity(),t.setGravity(cc.p(e.x,e.y)),t.setSpeed(this.getSpeed()),t.setSpeedVar(this.getSpeedVar()),t.setRadialAccel(this.getRadialAccel()),t.setRadialAccelVar(this.getRadialAccelVar()),t.setTangentialAccel(this.getTangentialAccel()),t.setTangentialAccelVar(this.getTangentialAccelVar())):this.getEmitterMode()===cc.ParticleSystem.MODE_RADIUS&&(t.setStartRadius(this.getStartRadius()),t.setStartRadiusVar(this.getStartRadiusVar()),t.setEndRadius(this.getEndRadius()),t.setEndRadiusVar(this.getEndRadiusVar()),t.setRotatePerSecond(this.getRotatePerSecond()),t.setRotatePerSecondVar(this.getRotatePerSecondVar())),t.setLife(this.getLife()),t.setLifeVar(this.getLifeVar()),t.setEmissionRate(this.getEmissionRate()),!this.getBatchNode()&&(t.setOpacityModifyRGB(this.isOpacityModifyRGB()),e=this.getTexture())){var i=e.getContentSize();t.setTextureWithRect(e,cc.rect(0,0,i.width,i.height))}}return t},setDisplayFrame:function(t){if(t){var e=t.getOffsetInPixels();0===e.x&&0===e.y||cc.log("cc.ParticleSystem.setDisplayFrame(): QuadParticle only supports SpriteFrames with no offsets"),t=t.getTexture(),this._texture!==t&&this.setTexture(t)}},setTextureWithRect:function(t,e){this._texture!==t&&(this._texture=t,this._updateBlendFunc()),this.initTexCoordsWithRect(e)},listenBackToForeground:function(t){}}),_p=cc.ParticleSystem.prototype,cc.defineGetterSetter(_p,"opacityModifyRGB",_p.isOpacityModifyRGB,_p.setOpacityModifyRGB),cc.defineGetterSetter(_p,"batchNode",_p.getBatchNode,_p.setBatchNode),cc.defineGetterSetter(_p,"drawMode",_p.getDrawMode,_p.setDrawMode),cc.defineGetterSetter(_p,"shapeType",_p.getShapeType,_p.setShapeType),cc.defineGetterSetter(_p,"active",_p.isActive),cc.defineGetterSetter(_p,"sourcePos",_p.getSourcePosition,_p.setSourcePosition),cc.defineGetterSetter(_p,"posVar",_p.getPosVar,_p.setPosVar),cc.defineGetterSetter(_p,"gravity",_p.getGravity,_p.setGravity),cc.defineGetterSetter(_p,"speed",_p.getSpeed,_p.setSpeed),cc.defineGetterSetter(_p,"speedVar",_p.getSpeedVar,_p.setSpeedVar),cc.defineGetterSetter(_p,"tangentialAccel",_p.getTangentialAccel,_p.setTangentialAccel),cc.defineGetterSetter(_p,"tangentialAccelVar",_p.getTangentialAccelVar,_p.setTangentialAccelVar),cc.defineGetterSetter(_p,"radialAccel",_p.getRadialAccel,_p.setRadialAccel),cc.defineGetterSetter(_p,"radialAccelVar",_p.getRadialAccelVar,_p.setRadialAccelVar),cc.defineGetterSetter(_p,"rotationIsDir",_p.getRotationIsDir,_p.setRotationIsDir),cc.defineGetterSetter(_p,"startRadius",_p.getStartRadius,_p.setStartRadius),cc.defineGetterSetter(_p,"startRadiusVar",_p.getStartRadiusVar,_p.setStartRadiusVar),cc.defineGetterSetter(_p,"endRadius",_p.getEndRadius,_p.setEndRadius),cc.defineGetterSetter(_p,"endRadiusVar",_p.getEndRadiusVar,_p.setEndRadiusVar),cc.defineGetterSetter(_p,"rotatePerS",_p.getRotatePerSecond,_p.setRotatePerSecond),cc.defineGetterSetter(_p,"rotatePerSVar",_p.getRotatePerSecondVar,_p.setRotatePerSecondVar),cc.defineGetterSetter(_p,"startColor",_p.getStartColor,_p.setStartColor),cc.defineGetterSetter(_p,"startColorVar",_p.getStartColorVar,_p.setStartColorVar),cc.defineGetterSetter(_p,"endColor",_p.getEndColor,_p.setEndColor),cc.defineGetterSetter(_p,"endColorVar",_p.getEndColorVar,_p.setEndColorVar),cc.defineGetterSetter(_p,"totalParticles",_p.getTotalParticles,_p.setTotalParticles),cc.defineGetterSetter(_p,"texture",_p.getTexture,_p.setTexture),cc.ParticleSystem.create=function(t){return new cc.ParticleSystem(t)},cc.ParticleSystem.createWithTotalParticles=cc.ParticleSystem.create,cc.ParticleSystem.ModeA=function(t,e,i,n,s,r,o,a){this.gravity=t||cc.p(0,0),this.speed=e||0,this.speedVar=i||0,this.tangentialAccel=n||0,this.tangentialAccelVar=s||0,this.radialAccel=r||0,this.radialAccelVar=o||0,this.rotationIsDir=a||!1},cc.ParticleSystem.ModeB=function(t,e,i,n,s,r){this.startRadius=t||0,this.startRadiusVar=e||0,this.endRadius=i||0,this.endRadiusVar=n||0,this.rotatePerSecond=s||0,this.rotatePerSecondVar=r||0},cc.ParticleSystem.SHAPE_MODE=0,cc.ParticleSystem.TEXTURE_MODE=1,cc.ParticleSystem.STAR_SHAPE=0,cc.ParticleSystem.BALL_SHAPE=1,cc.ParticleSystem.DURATION_INFINITY=-1,cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE=-1,cc.ParticleSystem.START_RADIUS_EQUAL_TO_END_RADIUS=-1,cc.ParticleSystem.MODE_GRAVITY=0,cc.ParticleSystem.MODE_RADIUS=1,cc.ParticleSystem.TYPE_FREE=0,cc.ParticleSystem.TYPE_RELATIVE=1,cc.ParticleSystem.TYPE_GROUPED=2,function(){cc.ParticleSystem.CanvasRenderCmd=function(t){this._rootCtor(t),this._needDraw=!0,this._drawMode=cc.ParticleSystem.TEXTURE_MODE,this._shapeType=cc.ParticleSystem.BALL_SHAPE,this._pointRect=cc.rect(0,0,0,0),this._tintCache=null};var t=cc.ParticleSystem.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);t.constructor=cc.ParticleSystem.CanvasRenderCmd,t.getDrawMode=function(){return this._drawMode},t.setDrawMode=function(t){this._drawMode=t},t.getShapeType=function(){return this._shapeType},t.setShapeType=function(t){this._shapeType=t},t.setBatchNode=function(t){this._batchNode!==t&&(this._node._batchNode=t)},t.updateQuadWithParticle=function(t,e){},t.updateParticlePosition=function(t,e){cc.pIn(t.drawPos,e)},t.rendering=function(t,e,i){var n,s,r=(t=t||cc._renderContext).getContext(),o=this._node,a=this._pointRect;t.setTransform(this._worldTransform,e,i),t.save(),o.isBlendAdditive()?r.globalCompositeOperation="lighter":r.globalCompositeOperation="source-over",i=this._node.particleCount;var c=this._node._particles;if(o.drawMode!==cc.ParticleSystem.SHAPE_MODE&&o._texture){if(!o._texture._textureLoaded)return void t.restore();var h=o._texture.getHtmlElementObj();if(!h.width||!h.height)return void t.restore();for(n=h,e=0;e<i;e++)if(0!==(s=(n=c[e]).color.a/255)){r.globalAlpha=s,r.save(),r.translate(0|n.drawPos.x,-(0|n.drawPos.y));var l=4*Math.floor(n.size/4);s=a.width;var u=a.height;r.scale(Math.max(1/s*l,1e-6),Math.max(1/u*l,1e-6)),n.rotation&&r.rotate(cc.degreesToRadians(n.rotation)),n=n.isChangeColor?this._changeTextureColor(o._texture,n.color,this._pointRect):h,r.drawImage(n,-(0|s/2),-(0|u/2)),r.restore()}}else for(h=cc._drawingUtil,e=0;e<i;e++)a=0|.5*(n=c[e]).size,0!==(s=n.color.a/255)&&(r.globalAlpha=s,r.save(),r.translate(0|n.drawPos.x,-(0|n.drawPos.y)),o.shapeType===cc.ParticleSystem.STAR_SHAPE?(n.rotation&&r.rotate(cc.degreesToRadians(n.rotation)),h.drawStar(t,a,n.color)):h.drawColorBall(t,a,n.color),r.restore());t.restore(),cc.g_NumberOfDraws++},t._changeTextureColor=function(t,e,i){this._tintCache||(this._tintCache=document.createElement("canvas"));var n=this._tintCache,s=t.getContentSize();return n.width=s.width,n.height=s.height,t._generateColorTexture(e.r,e.g,e.b,i,n)},t.initTexCoordsWithRect=function(t){this._pointRect=t},t.setTotalParticles=function(t){this._node._totalParticles=200>t?t:200},t.addParticle=function(){var t=this._node,e=t._particles;return t.particleCount<e.length?t=e[t.particleCount]:(t=new cc.Particle,e.push(t)),t},t._setupVBO=function(){},t._allocMemory=function(){return!0},t.postStep=function(){},t._setBlendAdditive=function(){var t=this._node._blendFunc;t.src=cc.BLEND_SRC,t.dst=cc.BLEND_DST},t._initWithTotalParticles=function(t){},t._updateDeltaColor=function(t,e){if(!this._node._dontTint){var i=t.deltaColor;t.color.r+=i.r*e,t.color.g+=i.g*e,t.color.b+=i.b*e,t.color.a+=i.a*e,t.isChangeColor=0!==i.r||0!==i.g||0!==i.b}}}(),function(){cc.ParticleSystem.WebGLRenderCmd=function(t){this._rootCtor(t),this._needDraw=!0,this._matrix=null,this._buffersVBO=[0,0],this._quads=[],this._indices=[],this._quadsArrayBuffer=null};var t=cc.ParticleSystem.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);t.constructor=cc.ParticleSystem.WebGLRenderCmd,t.getDrawMode=function(){},t.setDrawMode=function(t){},t.getShapeType=function(){},t.setShapeType=function(t){},t.setBatchNode=function(t){var e=this._node;if(e._batchNode!==t){var i=e._batchNode;if(e._batchNode=t)for(var n=e._particles,s=0;s<e._totalParticles;s++)n[s].atlasIndex=s;t?i||(e._batchNode.textureAtlas._copyQuadsToTextureAtlas(this._quads,e.atlasIndex),cc._renderContext.deleteBuffer(this._buffersVBO[1])):(this._allocMemory(),this.initIndices(e._totalParticles),e.setTexture(i.getTexture()),this._setupVBO())}},t.initIndices=function(t){for(var e=this._indices,i=0;i<t;++i){var n=6*i,s=4*i;e[n+0]=s+0,e[n+1]=s+1,e[n+2]=s+2,e[n+5]=s+1,e[n+4]=s+2,e[n+3]=s+3}},t.isDifferentTexture=function(t,e){return t===e},t.updateParticlePosition=function(t,e){this.updateQuadWithParticle(t,e)},t.updateQuadWithParticle=function(t,e){var i,n,s,r=null,o=this._node;o._batchNode?(r=o._batchNode.textureAtlas.quads[o.atlasIndex+t.atlasIndex],o._batchNode.textureAtlas.dirty=!0):r=this._quads[o._particleIdx],o._opacityModifyRGB?(o=0|t.color.r*t.color.a/255,i=0|t.color.g*t.color.a/255,n=0|t.color.b*t.color.a/255):(o=0|t.color.r,i=0|t.color.g,n=0|t.color.b),s=0|t.color.a;var a=r.bl.colors,c=r.br.colors,h=r.tl.colors,l=r.tr.colors;a.r=c.r=h.r=l.r=o,a.g=c.g=h.g=l.g=i,a.b=c.b=h.b=l.b=n,a.a=c.a=h.a=l.a=s,o=t.size/2,t.rotation?(i=-o,n=-o,s=e.x,a=e.y,h=-cc.degreesToRadians(t.rotation),c=Math.cos(h),h=Math.sin(h),r.bl.vertices.x=i*c-n*h+s,r.bl.vertices.y=i*h+n*c+a,r.br.vertices.x=o*c-n*h+s,r.br.vertices.y=o*h+n*c+a,r.tl.vertices.x=i*c-o*h+s,r.tl.vertices.y=i*h+o*c+a,r.tr.vertices.x=o*c-o*h+s,r.tr.vertices.y=o*h+o*c+a):(r.bl.vertices.x=e.x-o,r.bl.vertices.y=e.y-o,r.br.vertices.x=e.x+o,r.br.vertices.y=e.y-o,r.tl.vertices.x=e.x-o,r.tl.vertices.y=e.y+o,r.tr.vertices.x=e.x+o,r.tr.vertices.y=e.y+o)},t.rendering=function(t){var e=this._node;if(e._texture){t=t||cc._renderContext,this._matrix||(this._matrix=new cc.math.Matrix4,this._matrix.identity());var i=this._worldTransform;this._matrix.mat[0]=i.a,this._matrix.mat[4]=i.c,this._matrix.mat[12]=i.tx,this._matrix.mat[1]=i.b,this._matrix.mat[5]=i.d,this._matrix.mat[13]=i.ty,this._glProgramState.apply(this._matrix),cc.glBindTexture2D(e._texture),cc.glBlendFuncForParticle(e._blendFunc.src,e._blendFunc.dst),t.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),t.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR),t.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS),t.bindBuffer(t.ARRAY_BUFFER,this._buffersVBO[0]),t.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,3,t.FLOAT,!1,24,0),t.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR,4,t.UNSIGNED_BYTE,!0,24,12),t.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS,2,t.FLOAT,!1,24,16),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._buffersVBO[1]),t.drawElements(t.TRIANGLES,6*e._particleIdx,t.UNSIGNED_SHORT,0)}},t.initTexCoordsWithRect=function(t){var e=this._node,i=e.texture,n=cc.contentScaleFactor(),s=cc.rect(t.x*n,t.y*n,t.width*n,t.height*n),r=(n=t.width,t.height);i&&(n=i.pixelsWidth,r=i.pixelsHeight),cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL?(i=(2*s.x+1)/(2*n),t=(2*s.y+1)/(2*r),n=i+(2*s.width-2)/(2*n),s=t+(2*s.height-2)/(2*r)):(i=s.x/n,t=s.y/r,n=i+s.width/n,s=t+s.height/r),r=s,s=t,t=r;var o=0,a=0;for(e._batchNode?(r=e._batchNode.textureAtlas.quads,o=e.atlasIndex,a=e.atlasIndex+e._totalParticles):(r=this._quads,o=0,a=e._totalParticles),e=o;e<a;e++)r[e]||(r[e]=cc.V3F_C4B_T2F_QuadZero()),(o=r[e]).bl.texCoords.u=i,o.bl.texCoords.v=t,o.br.texCoords.u=n,o.br.texCoords.v=t,o.tl.texCoords.u=i,o.tl.texCoords.v=s,o.tr.texCoords.u=n,o.tr.texCoords.v=s},t.setTotalParticles=function(t){var e=this._node;if(t>e._allocatedParticles){var i=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;this._indices=new Uint16Array(6*t);var n=new ArrayBuffer(t*i),s=e._particles;s.length=0;for(var r=this._quads,o=r.length=0;o<t;o++)s[o]=new cc.Particle,r[o]=new cc.V3F_C4B_T2F_Quad(null,null,null,null,n,o*i);if(e._allocatedParticles=t,e._totalParticles=t,e._batchNode)for(i=0;i<t;i++)s[i].atlasIndex=i;this._quadsArrayBuffer=n,this.initIndices(t),this._setupVBO(),e._texture&&this.initTexCoordsWithRect(cc.rect(0,0,e._texture.width,e._texture.height))}else e._totalParticles=t;e.resetSystem()},t.addParticle=function(){var t=this._node;return t._particles[t.particleCount]},t._setupVBO=function(){var t=cc._renderContext;this._buffersVBO[0]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._buffersVBO[0]),t.bufferData(t.ARRAY_BUFFER,this._quadsArrayBuffer,t.DYNAMIC_DRAW),this._buffersVBO[1]=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._buffersVBO[1]),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW)},t._allocMemory=function(){if((e=this._node)._batchNode)return cc.log("cc.ParticleSystem._allocMemory(): Memory should not be allocated when not using batchNode"),!1;var t=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,e=e._totalParticles,i=this._quads;i.length=0,this._indices=new Uint16Array(6*e);for(var n=new ArrayBuffer(t*e),s=0;s<e;s++)i[s]=new cc.V3F_C4B_T2F_Quad(null,null,null,null,n,s*t);return i&&this._indices?(this._quadsArrayBuffer=n,!0):(cc.log("cocos2d: Particle system: not enough memory"),!1)},t.postStep=function(){var t=cc._renderContext;t.bindBuffer(t.ARRAY_BUFFER,this._buffersVBO[0]),t.bufferSubData(t.ARRAY_BUFFER,0,this._quadsArrayBuffer)},t._setBlendAdditive=function(){var t=this._node._blendFunc;this._texture&&!this._texture.hasPremultipliedAlpha()?(t.src=cc.SRC_ALPHA,t.dst=cc.ONE_MINUS_SRC_ALPHA):(t.src=cc.BLEND_SRC,t.dst=cc.BLEND_DST)},t._initWithTotalParticles=function(t){if(!this._allocMemory())return!1;this.initIndices(t),this._setupVBO(),this._shaderProgram=cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURECOLOR)},t._updateDeltaColor=function(t,e){t.color.r+=t.deltaColor.r*e,t.color.g+=t.deltaColor.g*e,t.color.b+=t.deltaColor.b*e,t.color.a+=t.deltaColor.a*e,t.isChangeColor=!0}}(),cc.ParticleFire=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?300:150)},initWithTotalParticles:function(t){return!!cc.ParticleSystem.prototype.initWithTotalParticles.call(this,t)&&(this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,0)),this.setRadialAccel(0),this.setRadialAccelVar(0),this.setSpeed(60),this.setSpeedVar(20),this.setAngle(90),this.setAngleVar(10),t=cc.director.getWinSize(),this.setPosition(t.width/2,60),this.setPosVar(cc.p(40,20)),this.setLife(3),this.setLifeVar(.25),this.setStartSize(54),this.setStartSizeVar(10),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(this.getTotalParticles()/this.getLife()),this.setStartColor(cc.color(194,64,31,255)),this.setStartColorVar(cc.color(0,0,0,0)),this.setEndColor(cc.color(0,0,0,255)),this.setEndColorVar(cc.color(0,0,0,0)),this.setBlendAdditive(!0),!0)}}),cc.ParticleFire.create=function(){return new cc.ParticleFire},cc.ParticleFireworks=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?1500:150)},initWithTotalParticles:function(t){return!!cc.ParticleSystem.prototype.initWithTotalParticles.call(this,t)&&(this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,-90)),this.setRadialAccel(0),this.setRadialAccelVar(0),this.setSpeed(180),this.setSpeedVar(50),t=cc.director.getWinSize(),this.setPosition(t.width/2,t.height/2),this.setAngle(90),this.setAngleVar(20),this.setLife(3.5),this.setLifeVar(1),this.setEmissionRate(this.getTotalParticles()/this.getLife()),this.setStartColor(cc.color(128,128,128,255)),this.setStartColorVar(cc.color(128,128,128,255)),this.setEndColor(cc.color(26,26,26,51)),this.setEndColorVar(cc.color(26,26,26,51)),this.setStartSize(8),this.setStartSizeVar(2),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setBlendAdditive(!1),!0)}}),cc.ParticleFireworks.create=function(){return new cc.ParticleFireworks},cc.ParticleSun=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?350:150)},initWithTotalParticles:function(t){return!!cc.ParticleSystem.prototype.initWithTotalParticles.call(this,t)&&(this.setBlendAdditive(!0),this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,0)),this.setRadialAccel(0),this.setRadialAccelVar(0),this.setSpeed(20),this.setSpeedVar(5),this.setAngle(90),this.setAngleVar(360),t=cc.director.getWinSize(),this.setPosition(t.width/2,t.height/2),this.setPosVar(cc.p(0,0)),this.setLife(1),this.setLifeVar(.5),this.setStartSize(30),this.setStartSizeVar(10),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(this.getTotalParticles()/this.getLife()),this.setStartColor(cc.color(194,64,31,255)),this.setStartColorVar(cc.color(0,0,0,0)),this.setEndColor(cc.color(0,0,0,255)),this.setEndColorVar(cc.color(0,0,0,0)),!0)}}),cc.ParticleSun.create=function(){return new cc.ParticleSun},cc.ParticleGalaxy=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?200:100)},initWithTotalParticles:function(t){return!!cc.ParticleSystem.prototype.initWithTotalParticles.call(this,t)&&(this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,0)),this.setSpeed(60),this.setSpeedVar(10),this.setRadialAccel(-80),this.setRadialAccelVar(0),this.setTangentialAccel(80),this.setTangentialAccelVar(0),this.setAngle(90),this.setAngleVar(360),t=cc.director.getWinSize(),this.setPosition(t.width/2,t.height/2),this.setPosVar(cc.p(0,0)),this.setLife(4),this.setLifeVar(1),this.setStartSize(37),this.setStartSizeVar(10),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(this.getTotalParticles()/this.getLife()),this.setStartColor(cc.color(31,64,194,255)),this.setStartColorVar(cc.color(0,0,0,0)),this.setEndColor(cc.color(0,0,0,255)),this.setEndColorVar(cc.color(0,0,0,0)),this.setBlendAdditive(!0),!0)}}),cc.ParticleGalaxy.create=function(){return new cc.ParticleGalaxy},cc.ParticleFlower=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?250:100)},initWithTotalParticles:function(t){return!!cc.ParticleSystem.prototype.initWithTotalParticles.call(this,t)&&(this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,0)),this.setSpeed(80),this.setSpeedVar(10),this.setRadialAccel(-60),this.setRadialAccelVar(0),this.setTangentialAccel(15),this.setTangentialAccelVar(0),this.setAngle(90),this.setAngleVar(360),t=cc.director.getWinSize(),this.setPosition(t.width/2,t.height/2),this.setPosVar(cc.p(0,0)),this.setLife(4),this.setLifeVar(1),this.setStartSize(30),this.setStartSizeVar(10),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(this.getTotalParticles()/this.getLife()),this.setStartColor(cc.color(128,128,128,255)),this.setStartColorVar(cc.color(128,128,128,128)),this.setEndColor(cc.color(0,0,0,255)),this.setEndColorVar(cc.color(0,0,0,0)),this.setBlendAdditive(!0),!0)}}),cc.ParticleFlower.create=function(){return new cc.ParticleFlower},cc.ParticleMeteor=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?150:100)},initWithTotalParticles:function(t){return!!cc.ParticleSystem.prototype.initWithTotalParticles.call(this,t)&&(this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(-200,200)),this.setSpeed(15),this.setSpeedVar(5),this.setRadialAccel(0),this.setRadialAccelVar(0),this.setTangentialAccel(0),this.setTangentialAccelVar(0),this.setAngle(90),this.setAngleVar(360),t=cc.director.getWinSize(),this.setPosition(t.width/2,t.height/2),this.setPosVar(cc.p(0,0)),this.setLife(2),this.setLifeVar(1),this.setStartSize(60),this.setStartSizeVar(10),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(this.getTotalParticles()/this.getLife()),this.setStartColor(cc.color(51,102,179)),this.setStartColorVar(cc.color(0,0,51,26)),this.setEndColor(cc.color(0,0,0,255)),this.setEndColorVar(cc.color(0,0,0,0)),this.setBlendAdditive(!0),!0)}}),cc.ParticleMeteor.create=function(){return new cc.ParticleMeteor},cc.ParticleSpiral=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?500:100)},initWithTotalParticles:function(t){return!!cc.ParticleSystem.prototype.initWithTotalParticles.call(this,t)&&(this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,0)),this.setSpeed(150),this.setSpeedVar(0),this.setRadialAccel(-380),this.setRadialAccelVar(0),this.setTangentialAccel(45),this.setTangentialAccelVar(0),this.setAngle(90),this.setAngleVar(0),t=cc.director.getWinSize(),this.setPosition(t.width/2,t.height/2),this.setPosVar(cc.p(0,0)),this.setLife(12),this.setLifeVar(0),this.setStartSize(20),this.setStartSizeVar(0),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(this.getTotalParticles()/this.getLife()),this.setStartColor(cc.color(128,128,128,255)),this.setStartColorVar(cc.color(128,128,128,0)),this.setEndColor(cc.color(128,128,128,255)),this.setEndColorVar(cc.color(128,128,128,0)),this.setBlendAdditive(!1),!0)}}),cc.ParticleSpiral.create=function(){return new cc.ParticleSpiral},cc.ParticleExplosion=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?700:300)},initWithTotalParticles:function(t){return!!cc.ParticleSystem.prototype.initWithTotalParticles.call(this,t)&&(this.setDuration(.1),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,0)),this.setSpeed(70),this.setSpeedVar(40),this.setRadialAccel(0),this.setRadialAccelVar(0),this.setTangentialAccel(0),this.setTangentialAccelVar(0),this.setAngle(90),this.setAngleVar(360),t=cc.director.getWinSize(),this.setPosition(t.width/2,t.height/2),this.setPosVar(cc.p(0,0)),this.setLife(5),this.setLifeVar(2),this.setStartSize(15),this.setStartSizeVar(10),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(this.getTotalParticles()/this.getDuration()),this.setStartColor(cc.color(179,26,51,255)),this.setStartColorVar(cc.color(128,128,128,0)),this.setEndColor(cc.color(128,128,128,0)),this.setEndColorVar(cc.color(128,128,128,0)),this.setBlendAdditive(!1),!0)}}),cc.ParticleExplosion.create=function(){return new cc.ParticleExplosion},cc.ParticleSmoke=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?200:100)},initWithTotalParticles:function(t){return!!cc.ParticleSystem.prototype.initWithTotalParticles.call(this,t)&&(this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,0)),this.setRadialAccel(0),this.setRadialAccelVar(0),this.setSpeed(25),this.setSpeedVar(10),this.setAngle(90),this.setAngleVar(5),t=cc.director.getWinSize(),this.setPosition(t.width/2,0),this.setPosVar(cc.p(20,0)),this.setLife(4),this.setLifeVar(1),this.setStartSize(60),this.setStartSizeVar(10),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(this.getTotalParticles()/this.getLife()),this.setStartColor(cc.color(204,204,204,255)),this.setStartColorVar(cc.color(5,5,5,0)),this.setEndColor(cc.color(0,0,0,255)),this.setEndColorVar(cc.color(0,0,0,0)),this.setBlendAdditive(!1),!0)}}),cc.ParticleSmoke.create=function(){return new cc.ParticleSmoke},cc.ParticleSnow=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?700:250)},initWithTotalParticles:function(t){return!!cc.ParticleSystem.prototype.initWithTotalParticles.call(this,t)&&(this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,-1)),this.setSpeed(5),this.setSpeedVar(1),this.setRadialAccel(0),this.setRadialAccelVar(1),this.setTangentialAccel(0),this.setTangentialAccelVar(1),t=cc.director.getWinSize(),this.setPosition(t.width/2,t.height+10),this.setPosVar(cc.p(t.width/2,0)),this.setAngle(-90),this.setAngleVar(5),this.setLife(45),this.setLifeVar(15),this.setStartSize(10),this.setStartSizeVar(5),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(10),this.setStartColor(cc.color(255,255,255,255)),this.setStartColorVar(cc.color(0,0,0,0)),this.setEndColor(cc.color(255,255,255,0)),this.setEndColorVar(cc.color(0,0,0,0)),this.setBlendAdditive(!1),!0)}}),cc.ParticleSnow.create=function(){return new cc.ParticleSnow},cc.ParticleRain=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?1e3:300)},initWithTotalParticles:function(t){return!!cc.ParticleSystem.prototype.initWithTotalParticles.call(this,t)&&(this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(10,-10)),this.setRadialAccel(0),this.setRadialAccelVar(1),this.setTangentialAccel(0),this.setTangentialAccelVar(1),this.setSpeed(130),this.setSpeedVar(30),this.setAngle(-90),this.setAngleVar(5),t=cc.director.getWinSize(),this.setPosition(t.width/2,t.height),this.setPosVar(cc.p(t.width/2,0)),this.setLife(4.5),this.setLifeVar(0),this.setStartSize(4),this.setStartSizeVar(2),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(20),this.setStartColor(cc.color(179,204,255,255)),this.setStartColorVar(cc.color(0,0,0,0)),this.setEndColor(cc.color(179,204,255,128)),this.setEndColorVar(cc.color(0,0,0,0)),this.setBlendAdditive(!1),!0)}}),cc.ParticleRain.create=function(){return new cc.ParticleRain},cc.PARTICLE_DEFAULT_CAPACITY=500,cc.ParticleBatchNode=cc.Node.extend({textureAtlas:null,_blendFunc:null,_className:"ParticleBatchNode",ctor:function(t,e){cc.Node.prototype.ctor.call(this),this._blendFunc={src:cc.BLEND_SRC,dst:cc.BLEND_DST},cc.isString(t)?this.init(t,e):t instanceof cc.Texture2D&&this.initWithTexture(t,e)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.ParticleBatchNode.CanvasRenderCmd(this):new cc.ParticleBatchNode.WebGLRenderCmd(this)},initWithTexture:function(t,e){return this.textureAtlas=new cc.TextureAtlas,this.textureAtlas.initWithTexture(t,e),this._children.length=0,this._renderCmd._initWithTexture(),!0},initWithFile:function(t,e){var i=cc.textureCache.addImage(t);return this.initWithTexture(i,e)},init:function(t,e){var i=cc.textureCache.addImage(t);return this.initWithTexture(i,e)},visit:function(t){var e=this._renderCmd;t=t?t._renderCmd:null,this._visible?(e.visit(t),cc.renderer.pushRenderCommand(e),e._dirtyFlag=0):e._propagateFlagsDown(t)},addChild:function(t,e,i){if(!t)throw Error("cc.ParticleBatchNode.addChild() : child should be non-null");if(!(t instanceof cc.ParticleSystem))throw Error("cc.ParticleBatchNode.addChild() : only supports cc.ParticleSystem as children");if(e=null==e?t.zIndex:e,i=null==i?t.tag:i,t.getTexture()!==this.textureAtlas.texture)throw Error("cc.ParticleSystem.addChild() : the child is not using the same texture id");var n=t.getBlendFunc();if(0===this._children.length)this.setBlendFunc(n);else if(n.src!==this._blendFunc.src||n.dst!==this._blendFunc.dst)return void cc.log("cc.ParticleSystem.addChild() : Can't add a ParticleSystem that uses a different blending function");e=this._addChildHelper(t,e,i),i=0,0!==e?i=(e=this._children[e-1]).getAtlasIndex()+e.getTotalParticles():i=0,this.insertChild(t,i),t.setBatchNode(this)},insertChild:function(t,e){var i=t.getTotalParticles(),n=this.textureAtlas,s=n.totalQuads;t.setAtlasIndex(e),s+i>n.getCapacity()&&(this._increaseAtlasCapacityTo(s+i),n.fillWithEmptyQuadsFromIndex(n.getCapacity()-i,i)),t.getAtlasIndex()+i!==s&&n.moveQuadsFromIndex(e,e+i),n.increaseTotalQuadsWith(i),this._updateAllAtlasIndexes()},removeChild:function(t,e){if(null!=t){if(!(t instanceof cc.ParticleSystem))throw Error("cc.ParticleBatchNode.removeChild(): only supports cc.ParticleSystem as children");if(-1===this._children.indexOf(t))cc.log("cc.ParticleBatchNode.removeChild(): doesn't contain the sprite. Can't remove it");else{cc.Node.prototype.removeChild.call(this,t,e);var i=this.textureAtlas;i.removeQuadsAtIndex(t.getAtlasIndex(),t.getTotalParticles()),i.fillWithEmptyQuadsFromIndex(i.totalQuads,t.getTotalParticles()),t.setBatchNode(null),this._updateAllAtlasIndexes()}}},reorderChild:function(t,e){if(!t)throw Error("cc.ParticleBatchNode.reorderChild(): child should be non-null");if(!(t instanceof cc.ParticleSystem))throw Error("cc.ParticleBatchNode.reorderChild(): only supports cc.QuadParticleSystems as children");if(-1===this._children.indexOf(t))cc.log("cc.ParticleBatchNode.reorderChild(): Child doesn't belong to batch");else{if(1<this._children.length){var i=this._getCurrentIndex(t,e);if(i.oldIndex!==i.newIndex){this._children.splice(i.oldIndex,1),this._children.splice(i.newIndex,0,t),i=t.getAtlasIndex(),this._updateAllAtlasIndexes();for(var n=0,s=this._children,r=0;r<s.length;r++)if(s[r]===t){n=t.getAtlasIndex();break}this.textureAtlas.moveQuadsFromIndex(i,t.getTotalParticles(),n),t.updateWithNoTime()}}t._setLocalZOrder(e)}},removeChildAtIndex:function(t,e){this.removeChild(this._children[i],e)},removeAllChildren:function(t){for(var e=this._children,i=0;i<e.length;i++)e[i].setBatchNode(null);cc.Node.prototype.removeAllChildren.call(this,t),this.textureAtlas.removeAllQuads()},disableParticle:function(t){(t=this.textureAtlas.quads[t]).br.vertices.x=t.br.vertices.y=t.tr.vertices.x=t.tr.vertices.y=t.tl.vertices.x=t.tl.vertices.y=t.bl.vertices.x=t.bl.vertices.y=0,this.textureAtlas._setDirty(!0)},getTexture:function(){return this.textureAtlas.texture},setTexture:function(t){this.textureAtlas.texture=t;var e=this._blendFunc;t&&!t.hasPremultipliedAlpha()&&e.src===cc.BLEND_SRC&&e.dst===cc.BLEND_DST&&(e.src=cc.SRC_ALPHA,e.dst=cc.ONE_MINUS_SRC_ALPHA)},setBlendFunc:function(t,e){void 0===e?(this._blendFunc.src=t.src,this._blendFunc.dst=t.dst):(this._blendFunc.src=t,this._blendFunc.src=e)},getBlendFunc:function(){return new cc.BlendFunc(this._blendFunc.src,this._blendFunc.dst)},_updateAllAtlasIndexes:function(){for(var t=0,e=this._children,i=0;i<e.length;i++){var n=e[i];n.setAtlasIndex(t),t+=n.getTotalParticles()}},_increaseAtlasCapacityTo:function(t){cc.log("cocos2d: cc.ParticleBatchNode: resizing TextureAtlas capacity from ["+this.textureAtlas.getCapacity()+"] to ["+t+"]."),this.textureAtlas.resizeCapacity(t)||cc.log("cc.ParticleBatchNode._increaseAtlasCapacityTo() : WARNING: Not enough memory to resize the atlas")},_searchNewPositionInChildrenForZ:function(t){for(var e=this._children,i=e.length,n=0;n<i;n++)if(e[n].zIndex>t)return n;return i},_getCurrentIndex:function(t,e){for(var i=!1,n=!1,s=0,r=0,o=0,a=this._children,c=a.length,h=0;h<c;h++){var l=a[h];if(l.zIndex>e&&!n&&(s=h,n=!0,i&&n))break;if(t===l&&(r=h,n||(o=-1),(i=!0)&&n))break}return n||(s=c),{newIndex:s+o,oldIndex:r}},_addChildHelper:function(t,e,i){if(!t)throw Error("cc.ParticleBatchNode._addChildHelper(): child should be non-null");if(t.parent)return cc.log("cc.ParticleBatchNode._addChildHelper(): child already added. It can't be added again"),null;this._children||(this._children=[]);var n=this._searchNewPositionInChildrenForZ(e);return this._children.splice(n,0,t),t.tag=i,t._setLocalZOrder(e),t.parent=this,this._running&&(t._performRecursive(cc.Node._stateCallbackType.onEnter),t._performRecursive(cc.Node._stateCallbackType.onEnterTransitionDidFinish)),n},_updateBlendFunc:function(){this.textureAtlas.texture.hasPremultipliedAlpha()||(this._blendFunc.src=cc.SRC_ALPHA,this._blendFunc.dst=cc.ONE_MINUS_SRC_ALPHA)},getTextureAtlas:function(){return this.textureAtlas},setTextureAtlas:function(t){this.textureAtlas=t}}),_p=cc.ParticleBatchNode.prototype,cc.defineGetterSetter(_p,"texture",_p.getTexture,_p.setTexture),cc.ParticleBatchNode.create=function(t,e){return new cc.ParticleBatchNode(t,e)},function(){cc.ParticleBatchNode.CanvasRenderCmd=function(t){this._rootCtor(t),this._needDraw=!1};var t=cc.ParticleBatchNode.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);t.constructor=cc.ParticleBatchNode.CanvasRenderCmd,t._initWithTexture=function(){}}(),function(){cc.ParticleBatchNode.WebGLRenderCmd=function(t){this._rootCtor(t),this._needDraw=!0,this._matrix=new cc.math.Matrix4,this._matrix.identity()};var t=cc.ParticleBatchNode.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);t.constructor=cc.ParticleBatchNode.WebGLRenderCmd,t.rendering=function(t){if(0!==(t=this._node).textureAtlas.totalQuads){var e=this._worldTransform;this._matrix.mat[0]=e.a,this._matrix.mat[4]=e.c,this._matrix.mat[12]=e.tx,this._matrix.mat[1]=e.b,this._matrix.mat[5]=e.d,this._matrix.mat[13]=e.ty,this._glProgramState.apply(this._matrix),cc.glBlendFuncForParticle(t._blendFunc.src,t._blendFunc.dst),t.textureAtlas.drawQuads()}},t._initWithTexture=function(){this._shaderProgram=cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURECOLOR)}}(),cc.IMEKeyboardNotificationInfo=function(t,e,i){this.begin=t||cc.rect(0,0,0,0),this.end=e||cc.rect(0,0,0,0),this.duration=i||0},cc.IMEDelegate=cc.Class.extend({ctor:function(){cc.imeDispatcher.addDelegate(this)},removeDelegate:function(){cc.imeDispatcher.removeDelegate(this)},attachWithIME:function(){return cc.imeDispatcher.attachDelegateWithIME(this)},detachWithIME:function(){return cc.imeDispatcher.detachDelegateWithIME(this)},canAttachWithIME:function(){return!1},didAttachWithIME:function(){},canDetachWithIME:function(){return!1},didDetachWithIME:function(){},insertText:function(t,e){},deleteBackward:function(){},getContentText:function(){return""},keyboardWillShow:function(t){},keyboardDidShow:function(t){},keyboardWillHide:function(t){},keyboardDidHide:function(t){}}),cc.IMEDispatcher=cc.Class.extend({_domInputControl:null,impl:null,_currentInputString:"",_lastClickPosition:null,ctor:function(){this.impl=new cc.IMEDispatcher.Impl,this._lastClickPosition=cc.p(0,0)},init:function(){if(!cc.sys.isMobile){this._domInputControl=cc.$("#imeDispatcherInput"),this._domInputControl||(this._domInputControl=cc.$new("input"),this._domInputControl.setAttribute("type","text"),this._domInputControl.setAttribute("id","imeDispatcherInput"),this._domInputControl.resize(0,0),this._domInputControl.translates(0,0),this._domInputControl.style.opacity="0",this._domInputControl.style.fontSize="1px",this._domInputControl.setAttribute("tabindex",2),this._domInputControl.style.position="absolute",this._domInputControl.style.top=0,this._domInputControl.style.left=0,document.body.appendChild(this._domInputControl));var t=this;this._domInputControl.addEventListener("input",(function(){t._processDomInputString(t._domInputControl.value)}),!1),this._domInputControl.addEventListener("keydown",(function(e){e.keyCode===cc.KEY.tab?(e.stopPropagation(),e.preventDefault()):e.keyCode===cc.KEY.enter&&(t.dispatchInsertText("\n",1),e.stopPropagation(),e.preventDefault())}),!1),/msie/i.test(navigator.userAgent)&&this._domInputControl.addEventListener("keyup",(function(e){e.keyCode===cc.KEY.backspace&&t._processDomInputString(t._domInputControl.value)}),!1),window.addEventListener("mousedown",(function(e){var i=e.pageY||0;t._lastClickPosition.x=e.pageX||0,t._lastClickPosition.y=i}),!1)}},_processDomInputString:function(t){var e,i;for(e=this._currentInputString.length<t.length?this._currentInputString.length:t.length,i=0;i<e&&t[i]===this._currentInputString[i];i++);var n=this._currentInputString.length-i,s=t.length-i;for(e=0;e<n;e++)this.dispatchDeleteBackward();for(e=0;e<s;e++)this.dispatchInsertText(t[i+e],1);this._currentInputString=t},dispatchInsertText:function(t,e){!this.impl||!t||0>=e||this.impl._delegateWithIme&&this.impl._delegateWithIme.insertText(t,e)},dispatchDeleteBackward:function(){this.impl&&this.impl._delegateWithIme&&this.impl._delegateWithIme.deleteBackward()},getContentText:function(){if(this.impl&&this.impl._delegateWithIme){var t=this.impl._delegateWithIme.getContentText();return t||""}return""},dispatchKeyboardWillShow:function(t){if(this.impl)for(var e=0;e<this.impl._delegateList.length;e++){var i=this.impl._delegateList[e];i&&i.keyboardWillShow(t)}},dispatchKeyboardDidShow:function(t){if(this.impl)for(var e=0;e<this.impl._delegateList.length;e++){var i=this.impl._delegateList[e];i&&i.keyboardDidShow(t)}},dispatchKeyboardWillHide:function(t){if(this.impl)for(var e=0;e<this.impl._delegateList.length;e++){var i=this.impl._delegateList[e];i&&i.keyboardWillHide(t)}},dispatchKeyboardDidHide:function(t){if(this.impl)for(var e=0;e<this.impl._delegateList.length;e++){var i=this.impl._delegateList[e];i&&i.keyboardDidHide(t)}},addDelegate:function(t){t&&this.impl&&(-1<this.impl._delegateList.indexOf(t)||this.impl._delegateList.splice(0,0,t))},attachDelegateWithIME:function(t){if(!this.impl||!t||-1===this.impl._delegateList.indexOf(t))return!1;if(this.impl._delegateWithIme){if(!this.impl._delegateWithIme.canDetachWithIME()||!t.canAttachWithIME())return!1;var e=this.impl._delegateWithIme;return this.impl._delegateWithIme=null,e.didDetachWithIME(),this._focusDomInput(t),!0}return!!t.canAttachWithIME()&&(this._focusDomInput(t),!0)},_focusDomInput:function(t){if(cc.sys.isMobile){this.impl._delegateWithIme=t,t.didAttachWithIME(),this._currentInputString=t.string||"",t=t.getTipMessage?t.getTipMessage():"please enter your word:";var e=window.Window;null!=(t=e&&e.prototype.prompt&&e.prototype.prompt!=prompt?e.prototype.prompt.call(window,t,this._currentInputString):prompt(t,this._currentInputString))&&this._processDomInputString(t),this.dispatchInsertText("\n",1)}else this.impl._delegateWithIme=t,this._currentInputString=t.string||"",t.didAttachWithIME(),this._domInputControl.focus(),this._domInputControl.value=this._currentInputString,this._domInputControlTranslate()},_domInputControlTranslate:function(){/msie/i.test(navigator.userAgent)?(this._domInputControl.style.left=this._lastClickPosition.x+"px",this._domInputControl.style.top=this._lastClickPosition.y+"px"):this._domInputControl.translates(this._lastClickPosition.x,this._lastClickPosition.y)},detachDelegateWithIME:function(t){return!!(this.impl&&t&&this.impl._delegateWithIme===t&&t.canDetachWithIME())&&(this.impl._delegateWithIme=null,t.didDetachWithIME(),cc._canvas.focus(),!0)},removeDelegate:function(t){this.impl&&t&&-1!==this.impl._delegateList.indexOf(t)&&(this.impl._delegateWithIme&&t===this.impl._delegateWithIme&&(this.impl._delegateWithIme=null),cc.arrayRemoveObject(this.impl._delegateList,t))},processKeycode:function(t){32>t?t===cc.KEY.backspace?this.dispatchDeleteBackward():t===cc.KEY.enter&&this.dispatchInsertText("\n",1):255>t&&this.dispatchInsertText(String.fromCharCode(t),1)}}),cc.IMEDispatcher.Impl=cc.Class.extend({_delegateWithIme:null,_delegateList:null,ctor:function(){this._delegateList=[]},findDelegate:function(t){for(var e=0;e<this._delegateList.length;e++)if(this._delegateList[e]===t)return e;return null}}),cc.imeDispatcher=new cc.IMEDispatcher,document.body?cc.imeDispatcher.init():window.addEventListener("load",(function(){cc.imeDispatcher.init()}),!1),cc.TextFieldDelegate=cc.Class.extend({onTextFieldAttachWithIME:function(t){return!1},onTextFieldDetachWithIME:function(t){return!1},onTextFieldInsertText:function(t,e,i){return!1},onTextFieldDeleteBackward:function(t,e,i){return!1},onDraw:function(t){return!1}}),cc.TextFieldTTF=cc.LabelTTF.extend({delegate:null,colorSpaceHolder:null,_colorText:null,_lens:null,_inputText:"",_placeHolder:"",_charCount:0,_className:"TextFieldTTF",ctor:function(t,e,i,n,s){this.colorSpaceHolder=cc.color(127,127,127),this._colorText=cc.color(255,255,255,255),cc.LabelTTF.prototype.ctor.call(this),void 0!==s?(this.initWithPlaceHolder("",e,i,n,s),t&&this.setPlaceHolder(t)):void 0===n&&void 0!==i&&(this.initWithString("",e,i),t&&this.setPlaceHolder(t))},onEnter:function(){cc.LabelTTF.prototype.onEnter.call(this),cc.imeDispatcher.addDelegate(this)},onExit:function(){cc.LabelTTF.prototype.onExit.call(this),cc.imeDispatcher.removeDelegate(this)},getDelegate:function(){return this.delegate},setDelegate:function(t){this.delegate=t},getCharCount:function(){return this._charCount},getColorSpaceHolder:function(){return cc.color(this.colorSpaceHolder)},setColorSpaceHolder:function(t){this.colorSpaceHolder.r=t.r,this.colorSpaceHolder.g=t.g,this.colorSpaceHolder.b=t.b,this.colorSpaceHolder.a=cc.isUndefined(t.a)?255:t.a,this._inputText.length||this.setColor(this.colorSpaceHolder)},setTextColor:function(t){this._colorText.r=t.r,this._colorText.g=t.g,this._colorText.b=t.b,this._colorText.a=cc.isUndefined(t.a)?255:t.a,this._inputText.length&&this.setColor(this._colorText)},initWithPlaceHolder:function(t,e,i,n,s){switch(arguments.length){case 5:return t&&this.setPlaceHolder(t),this.initWithString(this._placeHolder,n,s,e,i);case 3:return t&&this.setPlaceHolder(t),this.initWithString(this._placeHolder,arguments[1],arguments[2]);default:throw Error("Argument must be non-nil ")}},setString:function(t){this._inputText=(t=String(t))||"",this._inputText.length?(cc.LabelTTF.prototype.setString.call(this,this._inputText),this.setColor(this._colorText)):(cc.LabelTTF.prototype.setString.call(this,this._placeHolder),this.setColor(this.colorSpaceHolder)),cc._renderType===cc.game.RENDER_TYPE_CANVAS&&this._renderCmd._updateTexture(),this._charCount=this._inputText.length},getString:function(){return this._inputText},setPlaceHolder:function(t){this._placeHolder=t||"",this._inputText.length||(cc.LabelTTF.prototype.setString.call(this,this._placeHolder),this.setColor(this.colorSpaceHolder))},getPlaceHolder:function(){return this._placeHolder},draw:function(t){t=t||cc._renderContext,this.delegate&&this.delegate.onDraw(this)||cc.LabelTTF.prototype.draw.call(this,t)},attachWithIME:function(){return cc.imeDispatcher.attachDelegateWithIME(this)},detachWithIME:function(){return cc.imeDispatcher.detachDelegateWithIME(this)},canAttachWithIME:function(){return!this.delegate||!this.delegate.onTextFieldAttachWithIME(this)},didAttachWithIME:function(){},canDetachWithIME:function(){return!this.delegate||!this.delegate.onTextFieldDetachWithIME(this)},didDetachWithIME:function(){},deleteBackward:function(){var t=this._inputText.length;0===t||this.delegate&&this.delegate.onTextFieldDeleteBackward(this,this._inputText[t-1],1)||(1>=t?(this._inputText="",this._charCount=0,cc.LabelTTF.prototype.setString.call(this,this._placeHolder),this.setColor(this.colorSpaceHolder)):this.string=this._inputText.substring(0,t-1))},removeDelegate:function(){cc.imeDispatcher.removeDelegate(this)},_tipMessage:"please enter your word:",setTipMessage:function(t){null!=t&&(this._tipMessage=t)},getTipMessage:function(){return this._tipMessage},insertText:function(t,e){var i=t,n=i.indexOf("\n");if(-1<n&&(i=i.substring(0,n)),0<i.length){if(this.delegate&&this.delegate.onTextFieldInsertText(this,i,i.length))return;i=this._inputText+i,this._charCount=i.length,this.string=i}-1!==n&&(this.delegate&&this.delegate.onTextFieldInsertText(this,"\n",1)||this.detachWithIME())},getContentText:function(){return this._inputText},keyboardWillShow:function(t){},keyboardDidShow:function(t){},keyboardWillHide:function(t){},keyboardDidHide:function(t){}}),_p=cc.TextFieldTTF.prototype,cc.defineGetterSetter(_p,"charCount",_p.getCharCount),cc.defineGetterSetter(_p,"placeHolder",_p.getPlaceHolder,_p.setPlaceHolder),cc.TextFieldTTF.create=function(t,e,i,n,s){return new cc.TextFieldTTF(t,e,i,n,s)},cc._globalFontSize=cc.ITEM_SIZE,cc._globalFontName="Arial",cc._globalFontNameRelease=!1,cc.MenuItem=cc.Node.extend({_enabled:!1,_target:null,_callback:null,_isSelected:!1,_className:"MenuItem",ctor:function(t,e){var i=cc.Node.prototype;i.ctor.call(this),this._callback=this._target=null,this._enabled=this._isSelected=!1,i.setAnchorPoint.call(this,.5,.5),this._target=e||null,(this._callback=t||null)&&(this._enabled=!0)},isSelected:function(){return this._isSelected},setOpacityModifyRGB:function(t){},isOpacityModifyRGB:function(){return!1},setTarget:function(t,e){this._target=e,this._callback=t},isEnabled:function(){return this._enabled},setEnabled:function(t){this._enabled=t},initWithCallback:function(t,e){return this.anchorY=this.anchorX=.5,this._target=e,this._callback=t,this._enabled=!0,this._isSelected=!1,!0},rect:function(){var t=this._position,e=this._contentSize,i=this._anchorPoint;return cc.rect(t.x-e.width*i.x,t.y-e.height*i.y,e.width,e.height)},selected:function(){this._isSelected=!0},unselected:function(){this._isSelected=!1},setCallback:function(t,e){this._target=e,this._callback=t},activate:function(){if(this._enabled){var t=this._target,e=this._callback;e&&(t&&cc.isString(e)?t[e](this):t&&cc.isFunction(e)?e.call(t,this):e(this))}}}),_p=cc.MenuItem.prototype,cc.defineGetterSetter(_p,"enabled",_p.isEnabled,_p.setEnabled),cc.MenuItem.create=function(t,e){return new cc.MenuItem(t,e)},cc.MenuItemLabel=cc.MenuItem.extend({_disabledColor:null,_label:null,_originalScale:0,_colorBackup:null,ctor:function(t,e,i){cc.MenuItem.prototype.ctor.call(this,e,i),this._colorBackup=this._label=this._disabledColor=null,t&&(this._originalScale=1,this._colorBackup=cc.color.WHITE,this._disabledColor=cc.color(126,126,126),this.setLabel(t),t.textureLoaded&&!t.textureLoaded()&&t.addEventListener("load",(function(t){this.width=t.width,this.height=t.height,this.parent instanceof cc.Menu&&this.parent.updateAlign()}),this),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0))},getDisabledColor:function(){return this._disabledColor},setDisabledColor:function(t){this._disabledColor=t},getLabel:function(){return this._label},setLabel:function(t){t&&(this.addChild(t),t.anchorX=0,t.anchorY=0,this.width=t.width,this.height=t.height,t.setCascadeColorEnabled(!0)),this._label&&this.removeChild(this._label,!0),this._label=t},setEnabled:function(t){this._enabled!==t&&(t?this.setColor(this._colorBackup):(this._colorBackup=this.color,this.setColor(this._disabledColor))),cc.MenuItem.prototype.setEnabled.call(this,t)},initWithLabel:function(t,e,i){return this.initWithCallback(e,i),this._originalScale=1,this._colorBackup=cc.color.WHITE,this._disabledColor=cc.color(126,126,126),this.setLabel(t),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0),!0},setString:function(t){this._label.string=t,this.width=this._label.width,this.height=this._label.height},getString:function(){return this._label.string},activate:function(){this._enabled&&(this.stopAllActions(),this.scale=this._originalScale,cc.MenuItem.prototype.activate.call(this))},selected:function(){if(this._enabled){cc.MenuItem.prototype.selected.call(this);var t=this.getActionByTag(cc.ZOOM_ACTION_TAG);t?this.stopAction(t):this._originalScale=this.scale,(t=cc.scaleTo(.1,1.2*this._originalScale)).setTag(cc.ZOOM_ACTION_TAG),this.runAction(t)}},unselected:function(){if(this._enabled){cc.MenuItem.prototype.unselected.call(this),this.stopActionByTag(cc.ZOOM_ACTION_TAG);var t=cc.scaleTo(.1,this._originalScale);t.setTag(cc.ZOOM_ACTION_TAG),this.runAction(t)}}}),_p=cc.MenuItemLabel.prototype,cc.defineGetterSetter(_p,"string",_p.getString,_p.setString),cc.defineGetterSetter(_p,"disabledColor",_p.getDisabledColor,_p.setDisabledColor),cc.defineGetterSetter(_p,"label",_p.getLabel,_p.setLabel),cc.MenuItemLabel.create=function(t,e,i){return new cc.MenuItemLabel(t,e,i)},cc.MenuItemAtlasFont=cc.MenuItemLabel.extend({ctor:function(t,e,i,n,s,r,o){var a;t&&0<t.length&&(a=new cc.LabelAtlas(t,e,i,n,s)),cc.MenuItemLabel.prototype.ctor.call(this,a,r,o)},initWithString:function(t,e,i,n,s,r,o){if(!t||0===t.length)throw Error("cc.MenuItemAtlasFont.initWithString(): value should be non-null and its length should be greater than 0");var a=new cc.LabelAtlas;return a.initWithString(t,e,i,n,s),this.initWithLabel(a,r,o),!0}}),cc.MenuItemAtlasFont.create=function(t,e,i,n,s,r,o){return new cc.MenuItemAtlasFont(t,e,i,n,s,r,o)},cc.MenuItemFont=cc.MenuItemLabel.extend({_fontSize:null,_fontName:null,ctor:function(t,e,i){var n;t&&0<t.length?(this._fontName=cc._globalFontName,this._fontSize=cc._globalFontSize,n=new cc.LabelTTF(t,this._fontName,this._fontSize)):(this._fontSize=0,this._fontName=""),cc.MenuItemLabel.prototype.ctor.call(this,n,e,i)},initWithString:function(t,e,i){if(!t||0===t.length)throw Error("Value should be non-null and its length should be greater than 0");return this._fontName=cc._globalFontName,this._fontSize=cc._globalFontSize,t=new cc.LabelTTF(t,this._fontName,this._fontSize),this.initWithLabel(t,e,i),!0},setFontSize:function(t){this._fontSize=t,this._recreateLabel()},getFontSize:function(){return this._fontSize},setFontName:function(t){this._fontName=t,this._recreateLabel()},getFontName:function(){return this._fontName},_recreateLabel:function(){var t=new cc.LabelTTF(this._label.string,this._fontName,this._fontSize);this.setLabel(t)}}),cc.MenuItemFont.setFontSize=function(t){cc._globalFontSize=t},cc.MenuItemFont.fontSize=function(){return cc._globalFontSize},cc.MenuItemFont.setFontName=function(t){cc._globalFontNameRelease&&(cc._globalFontName=""),cc._globalFontName=t,cc._globalFontNameRelease=!0},_p=cc.MenuItemFont.prototype,cc.defineGetterSetter(_p,"fontSize",_p.getFontSize,_p.setFontSize),cc.defineGetterSetter(_p,"fontName",_p.getFontName,_p.setFontName),cc.MenuItemFont.fontName=function(){return cc._globalFontName},cc.MenuItemFont.create=function(t,e,i){return new cc.MenuItemFont(t,e,i)},cc.MenuItemSprite=cc.MenuItem.extend({_normalImage:null,_selectedImage:null,_disabledImage:null,ctor:function(t,e,i,n,s){var r,o,a;if(cc.MenuItem.prototype.ctor.call(this),this._disabledImage=this._selectedImage=this._normalImage=null,this._loader=new cc.Sprite.LoadManager,void 0!==t)return e=e||null,void 0!==s?(r=i,a=n,o=s):void 0!==n&&cc.isFunction(n)?(r=i,a=n):void 0!==n&&cc.isFunction(i)?(o=n,a=i,r=null):void 0===i&&(r=null),this._loader.clear(),t.textureLoaded&&!t.textureLoaded()?(this._loader.once(t,(function(){this.initWithNormalSprite(t,e,r,a,o)}),this),!1):(this.initWithNormalSprite(t,e,r,a,o),!0)},getNormalImage:function(){return this._normalImage},setNormalImage:function(t){this._normalImage!==t&&(t&&(this.addChild(t,0,cc.NORMAL_TAG),t.anchorX=0,t.anchorY=0),this._normalImage&&this.removeChild(this._normalImage,!0),this._normalImage=t)&&(this.width=this._normalImage.width,this.height=this._normalImage.height,this._updateImagesVisibility(),t.textureLoaded&&!t.textureLoaded()&&t.addEventListener("load",(function(t){this.width=t.width,this.height=t.height,this.parent instanceof cc.Menu&&this.parent.updateAlign()}),this))},getSelectedImage:function(){return this._selectedImage},setSelectedImage:function(t){this._selectedImage!==t&&(t&&(this.addChild(t,0,cc.SELECTED_TAG),t.anchorX=0,t.anchorY=0),this._selectedImage&&this.removeChild(this._selectedImage,!0),this._selectedImage=t,this._updateImagesVisibility())},getDisabledImage:function(){return this._disabledImage},setDisabledImage:function(t){this._disabledImage!==t&&(t&&(this.addChild(t,0,cc.DISABLE_TAG),t.anchorX=0,t.anchorY=0),this._disabledImage&&this.removeChild(this._disabledImage,!0),this._disabledImage=t,this._updateImagesVisibility())},initWithNormalSprite:function(t,e,i,n,s){if(this._loader.clear(),t.textureLoaded&&!t.textureLoaded())return this._loader.once(t,(function(){this.initWithNormalSprite(t,e,i,n,s)}),this),!1;this.initWithCallback(n,s),this.setNormalImage(t),this.setSelectedImage(e),this.setDisabledImage(i);var r=this._normalImage;return r&&(this.width=r.width,this.height=r.height),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0),!0},selected:function(){cc.MenuItem.prototype.selected.call(this),this._normalImage&&(this._disabledImage&&(this._disabledImage.visible=!1),this._selectedImage?(this._normalImage.visible=!1,this._selectedImage.visible=!0):this._normalImage.visible=!0)},unselected:function(){cc.MenuItem.prototype.unselected.call(this),this._normalImage&&(this._normalImage.visible=!0,this._selectedImage&&(this._selectedImage.visible=!1),this._disabledImage&&(this._disabledImage.visible=!1))},setEnabled:function(t){this._enabled!==t&&(cc.MenuItem.prototype.setEnabled.call(this,t),this._updateImagesVisibility())},_updateImagesVisibility:function(){var t=this._normalImage,e=this._selectedImage,i=this._disabledImage;this._enabled?(t&&(t.visible=!0),e&&(e.visible=!1),i&&(i.visible=!1)):i?(t&&(t.visible=!1),e&&(e.visible=!1),i&&(i.visible=!0)):(t&&(t.visible=!0),e&&(e.visible=!1))}}),_p=cc.MenuItemSprite.prototype,cc.defineGetterSetter(_p,"normalImage",_p.getNormalImage,_p.setNormalImage),cc.defineGetterSetter(_p,"selectedImage",_p.getSelectedImage,_p.setSelectedImage),cc.defineGetterSetter(_p,"disabledImage",_p.getDisabledImage,_p.setDisabledImage),cc.MenuItemSprite.create=function(t,e,i,n,s){return new cc.MenuItemSprite(t,e,i,n,s||void 0)},cc.MenuItemImage=cc.MenuItemSprite.extend({ctor:function(t,e,i,n,s){var r=null,o=null,a=null,c=null,h=null;null==t?cc.MenuItemSprite.prototype.ctor.call(this):(r=new cc.Sprite(t),e&&(o=new cc.Sprite(e)),void 0===n?c=i:void 0===s?(c=i,h=n):s&&(a=new cc.Sprite(i),c=n,h=s),cc.MenuItemSprite.prototype.ctor.call(this,r,o,a,c,h))},setNormalSpriteFrame:function(t){this.setNormalImage(new cc.Sprite(t))},setSelectedSpriteFrame:function(t){this.setSelectedImage(new cc.Sprite(t))},setDisabledSpriteFrame:function(t){this.setDisabledImage(new cc.Sprite(t))},initWithNormalImage:function(t,e,i,n,s){var r=null,o=null,a=null;return t&&(r=new cc.Sprite(t)),e&&(o=new cc.Sprite(e)),i&&(a=new cc.Sprite(i)),this.initWithNormalSprite(r,o,a,n,s)}}),cc.MenuItemImage.create=function(t,e,i,n,s){return new cc.MenuItemImage(t,e,i,n,s)},cc.MenuItemToggle=cc.MenuItem.extend({subItems:null,_selectedIndex:0,_opacity:null,_color:null,ctor:function(){cc.MenuItem.prototype.ctor.call(this),this._selectedIndex=0,this.subItems=[],this._opacity=0,this._color=cc.color.WHITE,0<arguments.length&&this.initWithItems(Array.prototype.slice.apply(arguments))},getOpacity:function(){return this._opacity},setOpacity:function(t){if(this._opacity=t,this.subItems&&0<this.subItems.length)for(var e=0;e<this.subItems.length;e++)this.subItems[e].opacity=t;this._color.a=t},getColor:function(){var t=this._color;return cc.color(t.r,t.g,t.b,t.a)},setColor:function(t){var e=this._color;if(e.r=t.r,e.g=t.g,e.b=t.b,this.subItems&&0<this.subItems.length)for(e=0;e<this.subItems.length;e++)this.subItems[e].setColor(t);void 0===t.a||t.a_undefined||this.setOpacity(t.a)},getSelectedIndex:function(){return this._selectedIndex},setSelectedIndex:function(t){if(t!==this._selectedIndex){this._selectedIndex=t,(t=this.getChildByTag(cc.CURRENT_ITEM))&&t.removeFromParent(!1),t=this.subItems[this._selectedIndex],this.addChild(t,0,cc.CURRENT_ITEM);var e=t.width,i=t.height;this.width=e,this.height=i,t.setPosition(e/2,i/2)}},getSubItems:function(){return this.subItems},setSubItems:function(t){this.subItems=t},initWithItems:function(t){var e=t.length;cc.isFunction(t[t.length-2])?(this.initWithCallback(t[t.length-2],t[t.length-1]),e-=2):cc.isFunction(t[t.length-1])?(this.initWithCallback(t[t.length-1],null),e-=1):this.initWithCallback(null,null);for(var i=this.subItems,n=i.length=0;n<e;n++)t[n]&&i.push(t[n]);return this._selectedIndex=cc.UINT_MAX,this.setSelectedIndex(0),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0),!0},addSubItem:function(t){this.subItems.push(t)},activate:function(){this._enabled&&this.setSelectedIndex((this._selectedIndex+1)%this.subItems.length),cc.MenuItem.prototype.activate.call(this)},selected:function(){cc.MenuItem.prototype.selected.call(this),this.subItems[this._selectedIndex].selected()},unselected:function(){cc.MenuItem.prototype.unselected.call(this),this.subItems[this._selectedIndex].unselected()},setEnabled:function(t){if(this._enabled!==t){cc.MenuItem.prototype.setEnabled.call(this,t);var e=this.subItems;if(e&&0<e.length)for(var i=0;i<e.length;i++)e[i].enabled=t}},selectedItem:function(){return this.subItems[this._selectedIndex]},getSelectedItem:function(){return this.subItems[this._selectedIndex]},onEnter:function(){cc.Node.prototype.onEnter.call(this),this.setSelectedIndex(this._selectedIndex)}}),_p=cc.MenuItemToggle.prototype,cc.defineGetterSetter(_p,"selectedIndex",_p.getSelectedIndex,_p.setSelectedIndex),cc.MenuItemToggle.create=function(){0<arguments.length&&null==arguments[arguments.length-1]&&cc.log("parameters should not be ending with null in Javascript");var t=new cc.MenuItemToggle;return t.initWithItems(Array.prototype.slice.apply(arguments)),t},cc.MENU_STATE_WAITING=0,cc.MENU_STATE_TRACKING_TOUCH=1,cc.MENU_HANDLER_PRIORITY=-128,cc.DEFAULT_PADDING=5,cc.Menu=cc.Layer.extend({enabled:!1,_selectedItem:null,_state:-1,_touchListener:null,_className:"Menu",ctor:function(t){cc.Layer.prototype.ctor.call(this),this._color=cc.color.WHITE,this.enabled=!1,this._opacity=255,this._selectedItem=null,this._state=-1,this._touchListener=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:this._onTouchBegan,onTouchMoved:this._onTouchMoved,onTouchEnded:this._onTouchEnded,onTouchCancelled:this._onTouchCancelled});var e,i=arguments.length;if(t instanceof Array)e=t;else if(0===i)e=[];else if(0<i){e=[];for(var n=0;n<i;n++)arguments[n]&&e.push(arguments[n])}this.initWithArray(e)},onEnter:function(){var t=this._touchListener;t._isRegistered()||cc.eventManager.addListener(t,this),cc.Node.prototype.onEnter.call(this)},isEnabled:function(){return this.enabled},setEnabled:function(t){this.enabled=t},initWithItems:function(t){var e=[];if(t)for(var i=0;i<t.length;i++)t[i]&&e.push(t[i]);return this.initWithArray(e)},initWithArray:function(t){if(cc.Layer.prototype.init.call(this)){this.enabled=!0;var e=cc.winSize;if(this.setPosition(e.width/2,e.height/2),this.setContentSize(e),this.setAnchorPoint(.5,.5),this.ignoreAnchorPointForPosition(!0),t)for(e=0;e<t.length;e++)this.addChild(t[e],e);return this._selectedItem=null,this._state=cc.MENU_STATE_WAITING,this.cascadeOpacity=this.cascadeColor=!0}return!1},addChild:function(t,e,i){if(!(t instanceof cc.MenuItem))throw Error("cc.Menu.addChild() : Menu only supports MenuItem objects as children");cc.Layer.prototype.addChild.call(this,t,e,i)},updateAlign:function(){switch(this._align){case"vertically":this.alignItemsVertically();break;case"horizontally":this.alignItemsHorizontally()}},alignItemsVertically:function(){this.alignItemsVerticallyWithPadding(cc.DEFAULT_PADDING)},alignItemsVerticallyWithPadding:function(t){this._align="vertically";var e,i,n,s,r=-t,o=this._children;if(o&&0<o.length){for(i=0,e=o.length;i<e;i++)r+=o[i].height*o[i].scaleY+t;var a=r/2;for(i=0,e=o.length;i<e;i++)n=(s=o[i]).height,r=s.scaleY,s.setPosition(0,a-n*r/2),a-=n*r+t}},alignItemsHorizontally:function(){this.alignItemsHorizontallyWithPadding(cc.DEFAULT_PADDING)},alignItemsHorizontallyWithPadding:function(t){this._align="horizontally";var e,i,n,s,r=-t,o=this._children;if(o&&0<o.length){for(e=0,i=o.length;e<i;e++)r+=o[e].width*o[e].scaleX+t;var a=-r/2;for(e=0,i=o.length;e<i;e++)r=(s=o[e]).scaleX,n=o[e].width,s.setPosition(a+n*r/2,0),a+=n*r+t}},alignItemsInColumns:function(){0<arguments.length&&null==arguments[arguments.length-1]&&cc.log("parameters should not be ending with null in Javascript");var t,e=[];for(t=0;t<arguments.length;t++)e.push(arguments[t]);var i,n,s,r=-5,o=0,a=0,c=0,h=this._children;if(h&&0<h.length)for(t=0,s=h.length;t<s;t++)o>=e.length||!(i=e[o])||(a=a>=(n=h[t].height)||isNaN(n)?a:n,++c>=i&&(r+=a+5,a=c=0,++o));var l=cc.director.getWinSize(),u=i=a=o=0,d=0;r/=2;if(h&&0<h.length)for(t=0,s=h.length;t<s;t++){var _=h[t];0===i&&(i=e[o],d=u=l.width/(1+i)),a=a>=(n=_._getHeight())||isNaN(n)?a:n,_.setPosition(d-l.width/2,r-n/2),d+=u,++c>=i&&(r-=a+5,a=i=c=0,++o)}},alignItemsInRows:function(){0<arguments.length&&null==arguments[arguments.length-1]&&cc.log("parameters should not be ending with null in Javascript");var t,e=[];for(t=0;t<arguments.length;t++)e.push(arguments[t]);var i,n,s,r,o=[],a=[],c=-10,h=-5,l=0,u=0,d=0,_=this._children;if(_&&0<_.length)for(t=0,s=_.length;t<s;t++)n=_[t],l>=e.length||!(i=e[l])||(u=u>=(r=n.width)||isNaN(r)?u:r,h+=n.height+5,++d>=i&&(o.push(u),a.push(h),c+=u+10,u=d=0,h=-5,++l));h=cc.director.getWinSize(),i=u=l=0;c=-c/2;var g=0;if(_&&0<_.length)for(t=0,s=_.length;t<s;t++)n=_[t],0===i&&(i=e[l],g=a[l]),u=u>=(r=n._getWidth())||isNaN(r)?u:r,n.setPosition(c+o[l]/2,g-h.height/2),g-=n.height+10,++d>=i&&(c+=u+5,u=i=d=0,++l)},removeChild:function(t,e){null!=t&&(t instanceof cc.MenuItem?(this._selectedItem===t&&(this._selectedItem=null),cc.Node.prototype.removeChild.call(this,t,e)):cc.log("cc.Menu.removeChild():Menu only supports MenuItem objects as children"))},_onTouchBegan:function(t,e){var i=e.getCurrentTarget();if(i._state!==cc.MENU_STATE_WAITING||!i._visible||!i.enabled)return!1;for(var n=i.parent;null!=n;n=n.parent)if(!n.isVisible())return!1;return i._selectedItem=i._itemForTouch(t),!!i._selectedItem&&(i._state=cc.MENU_STATE_TRACKING_TOUCH,i._selectedItem.selected(),i._selectedItem.setNodeDirty(),!0)},_onTouchEnded:function(t,e){var i=e.getCurrentTarget();i._state!==cc.MENU_STATE_TRACKING_TOUCH?cc.log("cc.Menu.onTouchEnded(): invalid state"):(i._selectedItem&&(i._selectedItem.unselected(),i._selectedItem.setNodeDirty(),i._selectedItem.activate()),i._state=cc.MENU_STATE_WAITING)},_onTouchCancelled:function(t,e){var i=e.getCurrentTarget();i._state!==cc.MENU_STATE_TRACKING_TOUCH?cc.log("cc.Menu.onTouchCancelled(): invalid state"):(i._selectedItem&&(i._selectedItem.unselected(),i._selectedItem.setNodeDirty()),i._state=cc.MENU_STATE_WAITING)},_onTouchMoved:function(t,e){var i=e.getCurrentTarget();if(i._state!==cc.MENU_STATE_TRACKING_TOUCH)cc.log("cc.Menu.onTouchMoved(): invalid state");else{var n=i._itemForTouch(t);n!==i._selectedItem&&(i._selectedItem&&(i._selectedItem.unselected(),i._selectedItem.setNodeDirty()),i._selectedItem=n,i._selectedItem&&(i._selectedItem.selected(),i._selectedItem.setNodeDirty()))}},onExit:function(){this._state===cc.MENU_STATE_TRACKING_TOUCH&&(this._selectedItem&&(this._selectedItem.unselected(),this._selectedItem=null),this._state=cc.MENU_STATE_WAITING),cc.Node.prototype.onExit.call(this)},setOpacityModifyRGB:function(t){},isOpacityModifyRGB:function(){return!1},_itemForTouch:function(t){t=t.getLocation();var e,i=this._children;if(i&&0<i.length)for(var n=i.length-1;0<=n;n--)if((e=i[n]).isVisible()&&e.isEnabled()){var s=e.convertToNodeSpace(t),r=e.rect();if(r.x=0,r.y=0,cc.rectContainsPoint(r,s))return e}return null}}),_p=cc.Menu.prototype,cc.Menu.create=function(t){var e=arguments.length;return 0<e&&null==arguments[e-1]&&cc.log("parameters should not be ending with null in Javascript"),0===e?new cc.Menu:1===e?new cc.Menu(t):new cc.Menu(Array.prototype.slice.call(arguments,0))},cc.Codec.GZip=function(t){this.data=t,this.debug=!1,this.gpflags=void 0,this.files=0,this.unzipped=[],this.buf32k=Array(32768),this.bIdx=0,this.modeZIP=!1,this.bytepos=0,this.bb=1,this.bits=0,this.nameBuf=[],this.fileout=void 0,this.literalTree=Array(cc.Codec.GZip.LITERALS),this.distanceTree=Array(32),this.treepos=0,this.Places=null,this.len=0,this.fpos=Array(17),this.fpos[0]=0,this.fmax=this.flens=void 0},cc.Codec.GZip.gunzip=function(t){return new cc.Codec.GZip(t).gunzip()[0][0]},cc.Codec.GZip.HufNode=function(){this.b1=this.b0=0,this.jump=null,this.jumppos=-1},cc.Codec.GZip.LITERALS=288,cc.Codec.GZip.NAMEMAX=256,cc.Codec.GZip.bitReverse=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],cc.Codec.GZip.cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],cc.Codec.GZip.cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],cc.Codec.GZip.cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],cc.Codec.GZip.cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],cc.Codec.GZip.border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],cc.Codec.GZip.prototype.gunzip=function(){return this.outputArr=[],this.nextFile(),this.unzipped},cc.Codec.GZip.prototype.readByte=function(){return this.bits+=8,this.bytepos<this.data.length?this.data.charCodeAt(this.bytepos++):-1},cc.Codec.GZip.prototype.byteAlign=function(){this.bb=1},cc.Codec.GZip.prototype.readBit=function(){var t;return this.bits++,t=1&this.bb,this.bb>>=1,0===this.bb&&(this.bb=this.readByte(),t=1&this.bb,this.bb=this.bb>>1|128),t},cc.Codec.GZip.prototype.readBits=function(t){for(var e=0,i=t;i--;)e=e<<1|this.readBit();return t&&(e=cc.Codec.GZip.bitReverse[e]>>8-t),e},cc.Codec.GZip.prototype.flushBuffer=function(){this.bIdx=0},cc.Codec.GZip.prototype.addBuffer=function(t){this.buf32k[this.bIdx++]=t,this.outputArr.push(String.fromCharCode(t)),32768===this.bIdx&&(this.bIdx=0)},cc.Codec.GZip.prototype.IsPat=function(){for(;;){if(this.fpos[this.len]>=this.fmax)return-1;if(this.flens[this.fpos[this.len]]===this.len)return this.fpos[this.len]++;this.fpos[this.len]++}},cc.Codec.GZip.prototype.Rec=function(){var t,e=this.Places[this.treepos];if(17===this.len)return-1;if(this.treepos++,this.len++,0<=(t=this.IsPat()))e.b0=t;else if(e.b0=32768,this.Rec())return-1;if(0<=(t=this.IsPat()))e.b1=t,e.jump=null;else if(e.b1=32768,e.jump=this.Places[this.treepos],e.jumppos=this.treepos,this.Rec())return-1;return this.len--,0},cc.Codec.GZip.prototype.CreateTree=function(t,e,i,n){for(this.Places=t,this.treepos=0,this.flens=i,this.fmax=e,t=0;17>t;t++)this.fpos[t]=0;return this.len=0,this.Rec()?-1:0},cc.Codec.GZip.prototype.DecodeValue=function(t){for(var e,i,n=0,s=t[n];;)if(e=this.readBit()){if(!(32768&s.b1))return s.b1;for(s=s.jump,e=t.length,i=0;i<e;i++)if(t[i]===s){n=i;break}}else{if(!(32768&s.b0))return s.b0;s=t[++n]}return-1},cc.Codec.GZip.prototype.DeflateLoop=function(){var t,e,i,n,s;do{if(t=this.readBit(),0===(i=this.readBits(2)))for(this.byteAlign(),i=this.readByte(),i|=this.readByte()<<8,e=this.readByte(),65535&(i^~(e|=this.readByte()<<8))&&document.write("BlockLen checksum mismatch\n");i--;)e=this.readByte(),this.addBuffer(e);else if(1===i)for(;;)if(23<(i=cc.Codec.GZip.bitReverse[this.readBits(7)]>>1)?199<(i=i<<1|this.readBit())?i=(i-=128)<<1|this.readBit():143<(i-=48)&&(i+=136):i+=256,256>i)this.addBuffer(i);else{if(256===i)break;var r;for(i-=257,s=this.readBits(cc.Codec.GZip.cplext[i])+cc.Codec.GZip.cplens[i],i=cc.Codec.GZip.bitReverse[this.readBits(5)]>>3,8<cc.Codec.GZip.cpdext[i]?(r=this.readBits(8),r|=this.readBits(cc.Codec.GZip.cpdext[i]-8)<<8):r=this.readBits(cc.Codec.GZip.cpdext[i]),r+=cc.Codec.GZip.cpdist[i],i=0;i<s;i++)e=this.buf32k[this.bIdx-r&32767],this.addBuffer(e)}else if(2===i){var o=Array(320);for(e=257+this.readBits(5),r=1+this.readBits(5),n=4+this.readBits(4),i=0;19>i;i++)o[i]=0;for(i=0;i<n;i++)o[cc.Codec.GZip.border[i]]=this.readBits(3);for(s=this.distanceTree.length,n=0;n<s;n++)this.distanceTree[n]=new cc.Codec.GZip.HufNode;if(this.CreateTree(this.distanceTree,19,o,0))return this.flushBuffer(),1;s=e+r,n=0;for(;n<s;)if(16>(i=this.DecodeValue(this.distanceTree)))o[n++]=i;else if(16===i){var a;if(n+(i=3+this.readBits(2))>s)return this.flushBuffer(),1;for(a=n?o[n-1]:0;i--;)o[n++]=a}else{if(n+(i=17===i?3+this.readBits(3):11+this.readBits(7))>s)return this.flushBuffer(),1;for(;i--;)o[n++]=0}for(s=this.literalTree.length,n=0;n<s;n++)this.literalTree[n]=new cc.Codec.GZip.HufNode;if(this.CreateTree(this.literalTree,e,o,0))return this.flushBuffer(),1;for(s=this.literalTree.length,n=0;n<s;n++)this.distanceTree[n]=new cc.Codec.GZip.HufNode;for(i=[],n=e;n<o.length;n++)i[n-e]=o[n];if(this.CreateTree(this.distanceTree,r,i,0))return this.flushBuffer(),1;for(;;)if(256<=(i=this.DecodeValue(this.literalTree))){if(0===(i-=256))break;for(i--,s=this.readBits(cc.Codec.GZip.cplext[i])+cc.Codec.GZip.cplens[i],i=this.DecodeValue(this.distanceTree),8<cc.Codec.GZip.cpdext[i]?(r=this.readBits(8),r|=this.readBits(cc.Codec.GZip.cpdext[i]-8)<<8):r=this.readBits(cc.Codec.GZip.cpdext[i]),r+=cc.Codec.GZip.cpdist[i];s--;)e=this.buf32k[this.bIdx-r&32767],this.addBuffer(e)}else this.addBuffer(i)}}while(!t);return this.flushBuffer(),this.byteAlign(),0},cc.Codec.GZip.prototype.unzipFile=function(t){var e;for(this.gunzip(),e=0;e<this.unzipped.length;e++)if(this.unzipped[e][1]===t)return this.unzipped[e][0]},cc.Codec.GZip.prototype.nextFile=function(){this.outputArr=[],this.modeZIP=!1;var t=[];if(t[0]=this.readByte(),t[1]=this.readByte(),120===t[0]&&218===t[1]&&(this.DeflateLoop(),this.unzipped[this.files]=[this.outputArr.join(""),"geonext.gxt"],this.files++),31===t[0]&&139===t[1]&&(this.skipdir(),this.unzipped[this.files]=[this.outputArr.join(""),"file"],this.files++),80===t[0]&&75===t[1]&&(this.modeZIP=!0,t[2]=this.readByte(),t[3]=this.readByte(),3===t[2]&&4===t[3])){t[0]=this.readByte(),t[1]=this.readByte(),this.gpflags=this.readByte(),this.gpflags|=this.readByte()<<8,t=this.readByte(),t|=this.readByte()<<8,this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte();var e=(e=this.readByte())|this.readByte()<<8,i=(i=this.readByte())|this.readByte()<<8,n=0;for(this.nameBuf=[];e--;){var s=this.readByte();"/"===s|":"===s?n=0:n<cc.Codec.GZip.NAMEMAX-1&&(this.nameBuf[n++]=String.fromCharCode(s))}this.fileout||(this.fileout=this.nameBuf);for(n=0;n<i;)this.readByte(),n++;8===t&&(this.DeflateLoop(),this.unzipped[this.files]=[this.outputArr.join(""),this.nameBuf.join("")],this.files++),this.skipdir()}},cc.Codec.GZip.prototype.skipdir=function(){var t,e=[];if(8&this.gpflags&&(e[0]=this.readByte(),e[1]=this.readByte(),e[2]=this.readByte(),e[3]=this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte()),this.modeZIP&&this.nextFile(),e[0]=this.readByte(),8!==e[0])return 0;if(this.gpflags=this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),4&this.gpflags)for(e[0]=this.readByte(),e[2]=this.readByte(),this.len=e[0]+256*e[1],e=0;e<this.len;e++)this.readByte();if(8&this.gpflags)for(e=0,this.nameBuf=[];t=this.readByte();)"7"!==t&&":"!==t||(e=0),e<cc.Codec.GZip.NAMEMAX-1&&(this.nameBuf[e++]=t);if(16&this.gpflags)for(;this.readByte(););2&this.gpflags&&(this.readByte(),this.readByte()),this.DeflateLoop(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.modeZIP&&this.nextFile()},function(){function t(t){throw t}function e(t,e){var i,n=t.split("."),s=y;n[0]in s||!s.execScript||s.execScript("var "+n[0]);for(;n.length&&(i=n.shift());)n.length||e===T?s=s[i]?s[i]:s[i]={}:s[i]=e}function i(t){var e,i;if("string"==typeof t)for(e=0,i=(t=t.split("")).length;e<i;e++)t[e]=(255&t[e].charCodeAt(0))>>>0;e=1,i=0;for(var n,s=t.length,r=0;0<s;){s-=n=1024<s?1024:s;do{i+=e+=t[r++]}while(--n);e%=65521,i%=65521}return(i<<16|e)>>>0}function n(e,i){this.index="number"==typeof i?i:0,this.i=0,this.buffer=e instanceof(C?Uint8Array:Array)?e:new(C?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&t(Error("invalid index")),this.buffer.length<=this.index&&this.f()}function s(t){this.buffer=new(C?Uint16Array:Array)(2*t),this.length=0}function r(t){var e,i,n,s,r,o,a,c,h,l=t.length,u=0,d=Number.POSITIVE_INFINITY;for(c=0;c<l;++c)t[c]>u&&(u=t[c]),t[c]<d&&(d=t[c]);for(e=1<<u,i=new(C?Uint32Array:Array)(e),n=1,s=0,r=2;n<=u;){for(c=0;c<l;++c)if(t[c]===n){for(o=0,a=s,h=0;h<n;++h)o=o<<1|1&a,a>>=1;for(h=o;h<e;h+=r)i[h]=n<<16|c;++s}++n,s<<=1,r<<=1}return[i,u,d]}function o(t,e){this.h=P,this.w=0,this.input=t,this.b=0,e&&(e.lazy&&(this.w=e.lazy),"number"==typeof e.compressionType&&(this.h=e.compressionType),e.outputBuffer&&(this.a=C&&e.outputBuffer instanceof Array?new Uint8Array(e.outputBuffer):e.outputBuffer),"number"==typeof e.outputIndex&&(this.b=e.outputIndex)),this.a||(this.a=new(C?Uint8Array:Array)(32768))}function a(t,e){this.length=t,this.G=e}function c(){var e=R;switch(S){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case 12>=e:return[265,e-11,1];case 14>=e:return[266,e-13,1];case 16>=e:return[267,e-15,1];case 18>=e:return[268,e-17,1];case 22>=e:return[269,e-19,2];case 26>=e:return[270,e-23,2];case 30>=e:return[271,e-27,2];case 34>=e:return[272,e-31,2];case 42>=e:return[273,e-35,3];case 50>=e:return[274,e-43,3];case 58>=e:return[275,e-51,3];case 66>=e:return[276,e-59,3];case 82>=e:return[277,e-67,4];case 98>=e:return[278,e-83,4];case 114>=e:return[279,e-99,4];case 130>=e:return[280,e-115,4];case 162>=e:return[281,e-131,5];case 194>=e:return[282,e-163,5];case 226>=e:return[283,e-195,5];case 257>=e:return[284,e-227,5];case 258===e:return[285,e-258,0];default:t("invalid length: "+e)}}function h(e,i){function n(e,i){var n,s,r=e.G,o=[],a=0;switch(n=B[e.length],o[a++]=65535&n,o[a++]=n>>16&255,o[a++]=n>>24,S){case 1===r:s=[0,r-1,0];break;case 2===r:s=[1,r-2,0];break;case 3===r:s=[2,r-3,0];break;case 4===r:s=[3,r-4,0];break;case 6>=r:s=[4,r-5,1];break;case 8>=r:s=[5,r-7,1];break;case 12>=r:s=[6,r-9,2];break;case 16>=r:s=[7,r-13,2];break;case 24>=r:s=[8,r-17,3];break;case 32>=r:s=[9,r-25,3];break;case 48>=r:s=[10,r-33,4];break;case 64>=r:s=[11,r-49,4];break;case 96>=r:s=[12,r-65,5];break;case 128>=r:s=[13,r-97,5];break;case 192>=r:s=[14,r-129,6];break;case 256>=r:s=[15,r-193,6];break;case 384>=r:s=[16,r-257,7];break;case 512>=r:s=[17,r-385,7];break;case 768>=r:s=[18,r-513,8];break;case 1024>=r:s=[19,r-769,8];break;case 1536>=r:s=[20,r-1025,9];break;case 2048>=r:s=[21,r-1537,9];break;case 3072>=r:s=[22,r-2049,10];break;case 4096>=r:s=[23,r-3073,10];break;case 6144>=r:s=[24,r-4097,11];break;case 8192>=r:s=[25,r-6145,11];break;case 12288>=r:s=[26,r-8193,12];break;case 16384>=r:s=[27,r-12289,12];break;case 24576>=r:s=[28,r-16385,13];break;case 32768>=r:s=[29,r-24577,13];break;default:t("invalid distance")}for(n=s,o[a++]=n[0],o[a++]=n[1],o[a++]=n[2],r=0,a=o.length;r<a;++r)_[g++]=o[r];p[o[0]]++,m[o[3]]++,f=e.length+i-1,l=null}var s,r,o,c,h,l,u,d={},_=C?new Uint16Array(2*i.length):[],g=0,f=0,p=new(C?Uint32Array:Array)(286),m=new(C?Uint32Array:Array)(30),y=e.w;if(!C){for(o=0;285>=o;)p[o++]=0;for(o=0;29>=o;)m[o++]=0}for(p[256]=1,s=0,r=i.length;s<r;++s){for(o=h=0,c=3;o<c&&s+o!==r;++o)h=h<<8|i[s+o];if(d[h]===T&&(d[h]=[]),o=d[h],!(0<f--)){for(;0<o.length&&32768<s-o[0];)o.shift();if(s+3>=r){for(l&&n(l,-1),o=0,c=r-s;o<c;++o)u=i[s+o],_[g++]=u,++p[u];break}if(0<o.length){h=c=T;var E=0,A=T,b=T,v=A=T,I=i.length;b=0,v=o.length;t:for(;b<v;b++){if(c=o[v-b-1],A=3,3<E){for(A=E;3<A;A--)if(i[c+A-1]!==i[s+A-1])continue t;A=E}for(;258>A&&s+A<I&&i[c+A]===i[s+A];)++A;if(A>E&&(h=c,E=A),258===A)break}c=new a(E,s-h),l?l.length<c.length?(u=i[s-1],_[g++]=u,++p[u],n(c,0)):n(l,-1):c.length<y?l=c:n(c,0)}else l?n(l,-1):(u=i[s],_[g++]=u,++p[u])}o.push(s)}return _[g++]=256,p[256]++,e.L=p,e.K=m,C?_.subarray(0,g):_}function l(t,e){function i(t){var e=f[t][p[t]];e===l?(i(t+1),i(t+1)):--u[e],++p[t]}var n,r,o,a=t.length,c=new s(572),h=new(C?Uint8Array:Array)(a);if(!C)for(r=0;r<a;r++)h[r]=0;for(r=0;r<a;++r)0<t[r]&&c.push(r,t[r]);if(a=Array(c.length/2),n=new(C?Uint32Array:Array)(c.length/2),1===a.length)return h[c.pop().index]=1,h;for(r=0,o=c.length/2;r<o;++r)a[r]=c.pop(),n[r]=a[r].value;var l=n.length;r=new(C?Uint16Array:Array)(e);c=new(C?Uint8Array:Array)(e);var u=new(C?Uint8Array:Array)(l);o=Array(e);var d,_,g,f=Array(e),p=Array(e),m=(1<<e)-l,T=1<<e-1;for(r[e-1]=l,d=0;d<e;++d)m<T?c[d]=0:(c[d]=1,m-=T),m<<=1,r[e-2-d]=(r[e-1-d]/2|0)+l;for(r[0]=c[0],o[0]=Array(r[0]),f[0]=Array(r[0]),d=1;d<e;++d)r[d]>2*r[d-1]+c[d]&&(r[d]=2*r[d-1]+c[d]),o[d]=Array(r[d]),f[d]=Array(r[d]);for(m=0;m<l;++m)u[m]=e;for(T=0;T<r[e-1];++T)o[e-1][T]=n[T],f[e-1][T]=T;for(m=0;m<e;++m)p[m]=0;for(1===c[e-1]&&(--u[0],++p[e-1]),d=e-2;0<=d;--d){for(_=m=0,g=p[d+1],T=0;T<r[d];T++)(_=o[d+1][g]+o[d+1][g+1])>n[m]?(o[d][T]=_,f[d][T]=l,g+=2):(o[d][T]=n[m],f[d][T]=m,++m);p[d]=0,1===c[d]&&i(d)}for(n=u,r=0,o=a.length;r<o;++r)h[a[r].index]=n[r];return h}function u(e){var i,n,s,r=new(C?Uint16Array:Array)(e.length),o=[],a=[],c=0;for(i=0,n=e.length;i<n;i++)o[e[i]]=1+(0|o[e[i]]);for(i=1,n=16;i<=n;i++)a[i]=c,(c+=0|o[i])>1<<i&&t("overcommitted"),c<<=1;for(65536>c&&t("undercommitted"),i=0,n=e.length;i<n;i++)for(c=a[e[i]],a[e[i]]+=1,o=r[i]=0,s=e[i];o<s;o++)r[i]=r[i]<<1|1&c,c>>>=1;return r}function d(t,e){this.input=t,this.a=new(C?Uint8Array:Array)(32768),this.h=L.j;var i,n={};for(i in!e&&(e={})||"number"!=typeof e.compressionType||(this.h=e.compressionType),e)n[i]=e[i];n.outputBuffer=this.a,this.z=new o(this.input,n)}function _(e,i){switch(this.k=[],this.l=32768,this.e=this.g=this.c=this.q=0,this.input=C?new Uint8Array(e):e,this.s=!1,this.m=N,this.B=!1,!i&&(i={})||(i.index&&(this.c=i.index),i.bufferSize&&(this.l=i.bufferSize),i.bufferType&&(this.m=i.bufferType),i.resize&&(this.B=i.resize)),this.m){case O:this.b=32768,this.a=new(C?Uint8Array:Array)(32768+this.l+258);break;case N:this.b=0,this.a=new(C?Uint8Array:Array)(this.l),this.f=this.J,this.t=this.H,this.o=this.I;break;default:t(Error("invalid inflate mode"))}}function g(e,i){for(var n,s=e.g,r=e.e,o=e.input,a=e.c;r<i;)(n=o[a++])===T&&t(Error("input buffer is broken")),s|=n<<r,r+=8;return e.g=s>>>i,e.e=r-i,e.c=a,s&(1<<i)-1}function f(e,i){for(var n,s=e.g,r=e.e,o=e.input,a=e.c,c=i[0],h=i[1];r<h;)(n=o[a++])===T&&t(Error("input buffer is broken")),s|=n<<r,r+=8;return c=(o=c[s&(1<<h)-1])>>>16,e.g=s>>c,e.e=r-c,e.c=a,65535&o}function p(t){function e(t,e,i){var n,s,r,o;for(o=0;o<t;)switch(n=f(this,e),n){case 16:for(r=3+g(this,2);r--;)i[o++]=s;break;case 17:for(r=3+g(this,3);r--;)i[o++]=0;s=0;break;case 18:for(r=11+g(this,7);r--;)i[o++]=0;s=0;break;default:s=i[o++]=n}return i}var i,n=g(t,5)+257,s=g(t,5)+1,o=g(t,4)+4,a=new(C?Uint8Array:Array)(k.length);for(i=0;i<o;++i)a[k[i]]=g(t,3);o=r(a),a=new(C?Uint8Array:Array)(n),i=new(C?Uint8Array:Array)(s),t.o(r(e.call(t,n,o,a)),r(e.call(t,s,o,i)))}function m(e,i){var n,s;if(this.input=e,this.c=0,!i&&(i={})||(i.index&&(this.c=i.index),i.verify&&(this.M=i.verify)),n=e[this.c++],s=e[this.c++],(15&n)===V)this.method=V;else t(Error("unsupported compression method"));0!=((n<<8)+s)%31&&t(Error("invalid fcheck flag:"+((n<<8)+s)%31)),32&s&&t(Error("fdict flag is not supported")),this.A=new _(e,{index:this.c,bufferSize:i.bufferSize,bufferType:i.bufferType,resize:i.resize})}var T=void 0,S=!0,y=this,C="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array;n.prototype.f=function(){var t,e=this.buffer,i=e.length,n=new(C?Uint8Array:Array)(i<<1);if(C)n.set(e);else for(t=0;t<i;++t)n[t]=e[t];return this.buffer=n},n.prototype.d=function(t,e,i){var n=this.buffer,s=this.index,r=this.i,o=n[s];if(i&&1<e&&(t=8<e?(x[255&t]<<24|x[t>>>8&255]<<16|x[t>>>16&255]<<8|x[t>>>24&255])>>32-e:x[t]>>8-e),8>e+r)o=o<<e|t,r+=e;else for(i=0;i<e;++i)o=o<<1|t>>e-i-1&1,8==++r&&(r=0,n[s++]=x[o],o=0,s===n.length&&(n=this.f()));n[s]=o,this.buffer=n,this.i=r,this.index=s},n.prototype.finish=function(){var t,e=this.buffer,i=this.index;return 0<this.i&&(e[i]<<=8-this.i,e[i]=x[e[i]],i++),C?t=e.subarray(0,i):(e.length=i,t=e),t};var E,A=new(C?Uint8Array:Array)(256);for(E=0;256>E;++E){for(var b=I=E,v=7,I=I>>>1;I;I>>>=1)b<<=1,b|=1&I,--v;A[E]=(b<<v&255)>>>0}var x=A;A=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];C&&new Uint32Array(A),s.prototype.getParent=function(t){return 2*((t-2)/4|0)},s.prototype.push=function(t,e){var i,n,s,r=this.buffer;for(i=this.length,r[this.length++]=e,r[this.length++]=t;0<i&&(n=this.getParent(i),r[i]>r[n]);)s=r[i],r[i]=r[n],r[n]=s,s=r[i+1],r[i+1]=r[n+1],r[n+1]=s,i=n;return this.length},s.prototype.pop=function(){var t,e,i,n,s,r=this.buffer;for(e=r[0],t=r[1],this.length-=2,r[0]=r[this.length],r[1]=r[this.length+1],s=0;!((n=2*s+2)>=this.length)&&(n+2<this.length&&r[n+2]>r[n]&&(n+=2),r[n]>r[s]);)i=r[s],r[s]=r[n],r[n]=i,i=r[s+1],r[s+1]=r[n+1],r[n+1]=i,s=n;return{index:t,value:e,length:this.length}};var R,P=2,w=(A={NONE:0,r:1,j:P,N:3},[]);for(E=0;288>E;E++)switch(S){case 143>=E:w.push([E+48,8]);break;case 255>=E:w.push([E-144+400,9]);break;case 279>=E:w.push([E-256+0,7]);break;case 287>=E:w.push([E-280+192,8]);break;default:t("invalid literal: "+E)}for(o.prototype.n=function(){var e,i,s,r,o=this.input;switch(this.h){case 0:for(s=0,r=o.length;s<r;){var a=(s+=(i=C?o.subarray(s,s+65535):o.slice(s,s+65535)).length)===r,c=T,d=c=T,_=(d=c=T,this.a),g=this.b;if(C){for(_=new Uint8Array(this.a.buffer);_.length<=g+i.length+5;)_=new Uint8Array(_.length<<1);_.set(this.a)}if(c=a?1:0,_[g++]=0|c,d=65536+~(c=i.length)&65535,_[g++]=255&c,_[g++]=c>>>8&255,_[g++]=255&d,_[g++]=d>>>8&255,C)_.set(i,g),g+=i.length,_=_.subarray(0,g);else{for(c=0,d=i.length;c<d;++c)_[g++]=i[c];_.length=g}this.b=g,this.a=_}break;case 1:for((s=new n(new Uint8Array(this.a.buffer),this.b)).d(1,1,S),s.d(1,2,S),i=0,a=(o=h(this,o)).length;i<a;i++)if(r=o[i],n.prototype.d.apply(s,w[r]),256<r)s.d(o[++i],o[++i],S),s.d(o[++i],5),s.d(o[++i],o[++i],S);else if(256===r)break;this.a=s.finish(),this.b=this.a.length;break;case P:r=new n(new Uint8Array(this.a),this.b);var f,p,m,y,E,A,b=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];c=Array(19),_=P;for(r.d(1,1,S),r.d(_,2,S),o=h(this,o),y=u(d=l(this.L,15)),g=u(_=l(this.K,7)),f=286;257<f&&0===d[f-1];f--);for(p=30;1<p&&0===_[p-1];p--);var v=f,I=p;e=new(C?Uint32Array:Array)(v+I);var x,R,B=new(C?Uint32Array:Array)(316);for(E=new(C?Uint8Array:Array)(19),A=m=0;A<v;A++)e[m++]=d[A];for(A=0;A<I;A++)e[m++]=_[A];if(!C)for(A=0,I=E.length;A<I;++A)E[A]=0;for(A=x=0,I=e.length;A<I;A+=m){for(m=1;A+m<I&&e[A+m]===e[A];++m);if(v=m,0===e[A])if(3>v)for(;0<v--;)B[x++]=0,E[0]++;else for(;0<v;)(R=138>v?v:138)>v-3&&R<v&&(R=v-3),10>=R?(B[x++]=17,B[x++]=R-3,E[17]++):(B[x++]=18,B[x++]=R-11,E[18]++),v-=R;else if(B[x++]=e[A],E[e[A]]++,3>--v)for(;0<v--;)B[x++]=e[A],E[e[A]]++;else for(;0<v;)(R=6>v?v:6)>v-3&&R<v&&(R=v-3),B[x++]=16,B[x++]=R-3,E[16]++,v-=R}for(e=C?B.subarray(0,x):B.slice(0,x),E=l(E,7),A=0;19>A;A++)c[A]=E[b[A]];for(m=19;4<m&&0===c[m-1];m--);for(b=u(E),r.d(f-257,5,S),r.d(p-1,5,S),r.d(m-4,4,S),A=0;A<m;A++)r.d(c[A],3,S);for(A=0,c=e.length;A<c;A++)if(i=e[A],r.d(b[i],E[i],S),16<=i){switch(A++,i){case 16:a=2;break;case 17:a=3;break;case 18:a=7;break;default:t("invalid code: "+i)}r.d(e[A],a,S)}for(g=[g,_],i=(a=[y,d])[0],a=a[1],_=g[0],y=g[1],g=0,c=o.length;g<c;++g)if(s=o[g],r.d(i[s],a[s],S),256<s)r.d(o[++g],o[++g],S),d=o[++g],r.d(_[d],y[d],S),r.d(o[++g],o[++g],S);else if(256===s)break;this.a=r.finish(),this.b=this.a.length;break;default:t("invalid compression type")}return this.a},E=[],R=3;258>=R;R++)I=c(),E[R]=I[2]<<24|I[1]<<16|I[0];var B=C?new Uint32Array(E):E,L=A;d.prototype.n=function(){var e,n,s,r,o=0;if(r=this.a,(e=V)===V)n=Math.LOG2E*Math.log(32768)-8;else t(Error("invalid compression method"));if(n=n<<4|e,r[o++]=n,e===V)switch(this.h){case L.NONE:s=0;break;case L.r:s=1;break;case L.j:s=2;break;default:t(Error("unsupported compression type"))}else t(Error("invalid compression method"));return e=s<<6|0,r[o++]=e|31-(256*n+e)%31,e=i(this.input),this.z.b=o,o=(r=this.z.n()).length,C&&((r=new Uint8Array(r.buffer)).length<=o+4&&(this.a=new Uint8Array(r.length+4),this.a.set(r),r=this.a),r=r.subarray(0,o+4)),r[o++]=e>>24&255,r[o++]=e>>16&255,r[o++]=e>>8&255,r[o++]=255&e,r},e("Zlib.Deflate",d),e("Zlib.Deflate.compress",(function(t,e){return new d(t,e).n()})),e("Zlib.Deflate.CompressionType",L),e("Zlib.Deflate.CompressionType.NONE",L.NONE),e("Zlib.Deflate.CompressionType.FIXED",L.r),e("Zlib.Deflate.CompressionType.DYNAMIC",L.j);var O=0,N=1;A={D:O,C:N};_.prototype.p=function(){for(;!this.s;){switch(1&(e=g(this,3))&&(this.s=S),e>>>=1){case 0:var e=this.input,i=this.c,n=this.a,s=this.b,r=T,o=T,a=T,c=n.length;r=T;switch(this.e=this.g=0,(r=e[i++])===T&&t(Error("invalid uncompressed block header: LEN (first byte)")),o=r,(r=e[i++])===T&&t(Error("invalid uncompressed block header: LEN (second byte)")),o|=r<<8,(r=e[i++])===T&&t(Error("invalid uncompressed block header: NLEN (first byte)")),a=r,(r=e[i++])===T&&t(Error("invalid uncompressed block header: NLEN (second byte)")),o===~(a|=r<<8)&&t(Error("invalid uncompressed block header: length verify")),i+o>e.length&&t(Error("input buffer is broken")),this.m){case O:for(;s+o>n.length;){if(o-=r=c-s,C)n.set(e.subarray(i,i+r),s),s+=r,i+=r;else for(;r--;)n[s++]=e[i++];this.b=s,n=this.f(),s=this.b}break;case N:for(;s+o>n.length;)n=this.f({v:2});break;default:t(Error("invalid inflate mode"))}if(C)n.set(e.subarray(i,i+o),s),s+=o,i+=o;else for(;o--;)n[s++]=e[i++];this.c=i,this.b=s,this.a=n;break;case 1:this.o(W,z);break;case 2:p(this);break;default:t(Error("unknown BTYPE: "+e))}}return this.t()},E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var k=C?new Uint16Array(E):E;E=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258];var D=C?new Uint16Array(E):E;E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0];var M=C?new Uint8Array(E):E;E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];var F=C?new Uint16Array(E):E;E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var G=C?new Uint8Array(E):E;for(I=0,b=(E=new(C?Uint8Array:Array)(288)).length;I<b;++I)E[I]=143>=I?8:255>=I?9:279>=I?7:8;var W=r(E);for(I=0,b=(E=new(C?Uint8Array:Array)(30)).length;I<b;++I)E[I]=5;var z=r(E);for(_.prototype.o=function(t,e){var i=this.a,n=this.b;this.u=t;for(var s,r,o,a=i.length-258;256!==(s=f(this,t));)if(256>s)n>=a&&(this.b=n,i=this.f(),n=this.b),i[n++]=s;else for(o=D[s-=257],0<M[s]&&(o+=g(this,M[s])),s=f(this,e),r=F[s],0<G[s]&&(r+=g(this,G[s])),n>=a&&(this.b=n,i=this.f(),n=this.b);o--;)i[n]=i[n++-r];for(;8<=this.e;)this.e-=8,this.c--;this.b=n},_.prototype.I=function(t,e){var i=this.a,n=this.b;this.u=t;for(var s,r,o,a=i.length;256!==(s=f(this,t));)if(256>s)n>=a&&(a=(i=this.f()).length),i[n++]=s;else for(o=D[s-=257],0<M[s]&&(o+=g(this,M[s])),s=f(this,e),r=F[s],0<G[s]&&(r+=g(this,G[s])),n+o>a&&(a=(i=this.f()).length);o--;)i[n]=i[n++-r];for(;8<=this.e;)this.e-=8,this.c--;this.b=n},_.prototype.f=function(){var t,e,i=new(C?Uint8Array:Array)(this.b-32768),n=this.b-32768,s=this.a;if(C)i.set(s.subarray(32768,i.length));else for(t=0,e=i.length;t<e;++t)i[t]=s[t+32768];if(this.k.push(i),this.q+=i.length,C)s.set(s.subarray(n,n+32768));else for(t=0;32768>t;++t)s[t]=s[n+t];return this.b=32768,s},_.prototype.J=function(t){var e,i,n,s=this.input.length/this.c+1|0,r=this.input,o=this.a;return t&&("number"==typeof t.v&&(s=t.v),"number"==typeof t.F&&(s+=t.F)),2>s?i=(n=(r.length-this.c)/this.u[2]/2*258|0)<o.length?o.length+n:o.length<<1:i=o.length*s,C?(e=new Uint8Array(i)).set(o):e=o,this.a=e},_.prototype.t=function(){var t,e,i,n,s,r=0,o=this.a,a=this.k,c=new(C?Uint8Array:Array)(this.q+(this.b-32768));if(0===a.length)return C?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(e=0,i=a.length;e<i;++e)for(n=0,s=(t=a[e]).length;n<s;++n)c[r++]=t[n];for(e=32768,i=this.b;e<i;++e)c[r++]=o[e];return this.k=[],this.buffer=c},_.prototype.H=function(){var t,e=this.b;return C?this.B?(t=new Uint8Array(e)).set(this.a.subarray(0,e)):t=this.a.subarray(0,e):(this.a.length>e&&(this.a.length=e),t=this.a),this.buffer=t},m.prototype.p=function(){var e,n=this.input;return e=this.A.p(),this.c=this.A.c,this.M&&((n[this.c++]<<24|n[this.c++]<<16|n[this.c++]<<8|n[this.c++])>>>0!==i(e)&&t(Error("invalid adler-32 checksum"))),e},e("Zlib.Inflate",m),e("Zlib.Inflate.BufferType",A),A.ADAPTIVE=A.C,A.BLOCK=A.D,e("Zlib.Inflate.prototype.decompress",m.prototype.p),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C&&new Uint16Array(A),A=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],C&&new Uint16Array(A),A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],C&&new Uint8Array(A),A=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],C&&new Uint16Array(A),A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C&&new Uint8Array(A),E=0,I=(A=new(C?Uint8Array:Array)(288)).length;E<I;++E)A[E]=143>=E?8:255>=E?9:279>=E?7:8;for(r(A),E=0,I=(A=new(C?Uint8Array:Array)(30)).length;E<I;++E)A[E]=5;r(A);var V=8}.call(this),_p=window,_p=_p.Zlib=_p.Zlib,_p.Deflate=_p.Deflate,_p.Deflate.compress=_p.Deflate.compress,_p.Inflate=_p.Inflate,_p.Inflate.BufferType=_p.Inflate.BufferType,_p.Inflate.prototype.decompress=_p.Inflate.prototype.decompress,cc.TGA_OK=0,cc.TGA_ERROR_FILE_OPEN=1,cc.TGA_ERROR_READING_FILE=2,cc.TGA_ERROR_INDEXED_COLOR=3,cc.TGA_ERROR_MEMORY=4,cc.TGA_ERROR_COMPRESSED_FILE=5,cc.ImageTGA=function(t,e,i,n,s,r,o){this.status=t||0,this.type=e||0,this.pixelDepth=i||0,this.width=n||0,this.height=s||0,this.imageData=r||[],this.flipped=o||0},cc.tgaLoadHeader=function(t,e,i){var n=2;return!(n+1>e)&&((t=new cc.BinaryStreamReader(t)).setOffset(n),i.type=t.readByte(),!((n+=10)+4+1>e)&&(t.setOffset(n),i.width=t.readUnsignedShort(),i.height=t.readUnsignedInteger(),i.pixelDepth=t.readByte(),!(n+5+1>e)&&(e=t.readByte(),i.flipped=0,32&e&&(i.flipped=1),!0)))},cc.tgaLoadImageData=function(t,e,i){var n,s;if(n=0|i.pixelDepth/2,18+(s=i.height*i.width*n)>e)return!1;if(i.imageData=cc.__getSubArray(t,18,18+s),3<=n)for(t=0;t<s;t+=n)e=i.imageData[t],i.imageData[t]=i.imageData[t+2],i.imageData[t+2]=e;return!0},cc.tgaRGBtogreyscale=function(t){var e,i;if(8!==t.pixelDepth){var n=t.pixelDepth/8,s=new Uint8Array(t.height*t.width);if(null!==s){for(i=e=0;i<t.width*t.height;e+=n,i++)s[i]=.3*t.imageData[e]+.59*t.imageData[e+1]+.11*t.imageData[e+2];t.pixelDepth=8,t.type=3,t.imageData=s}}},cc.tgaDestroy=function(t){t&&(t.imageData=null)},cc.tgaLoadRLEImageData=function(t,e,i){var n,s,r,o=0,a=0,c=0,h=[],l=0,u=18;for(n=i.pixelDepth/8,s=i.height*i.width,r=0;r<s;r++){if(0!==l)l--,a=0!==c;else{if(u+1>e)break;l=t[u],u+=1,(c=128&l)&&(l-=128),a=0}if(!a){if(u+n>e)break;h=cc.__getSubArray(t,u,u+n),u+=n,3<=n&&(a=h[0],h[0]=h[2],h[2]=a)}for(a=0;a<n;a++)i.imageData[o+a]=h[a];o+=n}return!0},cc.tgaFlipImage=function(t){for(var e=t.pixelDepth/8*t.width,i=0;i<t.height/2;i++){var n=cc.__getSubArray(t.imageData,i*e,i*e+e);cc.__setDataToArray(cc.__getSubArray(t.imageData,(t.height-(i+1))*e,e),t.imageData,i*e),cc.__setDataToArray(n,t.imageData,(t.height-(i+1))*e)}t.flipped=0},cc.__getSubArray=function(t,e,i){return t instanceof Array?t.slice(e,i):t.subarray(e,i)},cc.__setDataToArray=function(t,e,i){for(var n=0;n<t.length;n++)e[i+n]=t[n]},cc.BinaryStreamReader=cc.Class.extend({_binaryData:null,_offset:0,ctor:function(t){this._binaryData=t},setBinaryData:function(t){this._binaryData=t,this._offset=0},getBinaryData:function(){return this._binaryData},_checkSize:function(t){if(!(this._offset+Math.ceil(t/8)<this._data.length))throw Error("Index out of bound")},_decodeFloat:function(t,e){var i=(n=t+e+1)>>3;this._checkSize(n);var n=Math.pow(2,e-1)-1,s=this._readBits(t+e,1,i),r=this._readBits(t,e,i),o=0,a=2,c=0;do{for(var h=this._readByte(++c,i),l=t%8||8,u=1<<l;u>>=1;)h&u&&(o+=1/a),a*=2}while(t-=l);return this._offset+=i,r===1+(n<<1)?o?NaN:s?-1/0:1/0:(1+-2*s)*(r||o?r?Math.pow(2,r-n)*(1+o):Math.pow(2,1-n)*o:0)},_readByte:function(t,e){return this._data[this._offset+e-t-1]},_decodeInt:function(t,e){var i=this._readBits(0,t,t/8),n=Math.pow(2,t);return this._offset+=t/8,e&&i>=n/2?i-n:i},_shl:function(t,e){for(++e;--e;t=1073741824==(1073741824&(t%=2147483648))?2*t:2*(t-1073741824)+2147483648);return t},_readBits:function(t,e,i){var n=(t+e)%8,s=t%8,r=i-(t>>3)-1,o=r-(t=i+(-(t+e)>>3));for(e=this._readByte(r,i)>>s&(1<<(o?8-s:e))-1,o&&n&&(e+=(this._readByte(t++,i)&(1<<n)-1)<<(o--<<3)-s);o;)e+=this._shl(this._readByte(t++,i),(o--<<3)-s);return e},readInteger:function(){return this._decodeInt(32,!0)},readUnsignedInteger:function(){return this._decodeInt(32,!1)},readSingle:function(){return this._decodeFloat(23,8)},readShort:function(){return this._decodeInt(16,!0)},readUnsignedShort:function(){return this._decodeInt(16,!1)},readByte:function(){var t=this._data[this._offset];return this._offset+=1,t},readData:function(t,e){return this._binaryData instanceof Array?this._binaryData.slice(t,e):this._binaryData.subarray(t,e)},setOffset:function(t){this._offset=t},getOffset:function(){return this._offset}}),cc.TMX_ORIENTATION_ORTHO=0,cc.TMX_ORIENTATION_HEX=1,cc.TMX_ORIENTATION_ISO=2,cc.TMXTiledMap=cc.Node.extend({properties:null,mapOrientation:null,objectGroups:null,_mapSize:null,_tileSize:null,_tileProperties:null,_className:"TMXTiledMap",ctor:function(t,e){cc.Node.prototype.ctor.call(this),this._mapSize=cc.size(0,0),this._tileSize=cc.size(0,0),void 0!==e?this.initWithXML(t,e):void 0!==t&&this.initWithTMXFile(t)},getMapSize:function(){return cc.size(this._mapSize.width,this._mapSize.height)},setMapSize:function(t){this._mapSize.width=t.width,this._mapSize.height=t.height},_getMapWidth:function(){return this._mapSize.width},_setMapWidth:function(t){this._mapSize.width=t},_getMapHeight:function(){return this._mapSize.height},_setMapHeight:function(t){this._mapSize.height=t},getTileSize:function(){return cc.size(this._tileSize.width,this._tileSize.height)},setTileSize:function(t){this._tileSize.width=t.width,this._tileSize.height=t.height},_getTileWidth:function(){return this._tileSize.width},_setTileWidth:function(t){this._tileSize.width=t},_getTileHeight:function(){return this._tileSize.height},_setTileHeight:function(t){this._tileSize.height=t},getMapOrientation:function(){return this.mapOrientation},setMapOrientation:function(t){this.mapOrientation=t},getObjectGroups:function(){return this.objectGroups},setObjectGroups:function(t){this.objectGroups=t},getProperties:function(){return this.properties},setProperties:function(t){this.properties=t},initWithTMXFile:function(t){if(!t||0===t.length)throw Error("cc.TMXTiledMap.initWithTMXFile(): tmxFile should be non-null or non-empty string.");if(this.height=this.width=0,!(t=new cc.TMXMapInfo(t)))return!1;var e=t.getTilesets();return e&&0!==e.length||cc.log("cc.TMXTiledMap.initWithTMXFile(): Map not found. Please check the filename."),this._buildWithMapInfo(t),!0},initWithXML:function(t,e){this.height=this.width=0;var i=new cc.TMXMapInfo(t,e),n=i.getTilesets();return n&&0!==n.length||cc.log("cc.TMXTiledMap.initWithXML(): Map not found. Please check the filename."),this._buildWithMapInfo(i),!0},_buildWithMapInfo:function(t){this._mapSize=t.getMapSize(),this._tileSize=t.getTileSize(),this.mapOrientation=t.orientation,this.objectGroups=t.getObjectGroups(),this.properties=t.properties,this._tileProperties=t.getTileProperties();var e=0,i=t.getLayers();if(i)for(var n=null,s=0,r=i.length;s<r;s++)(n=i[s])&&n.visible&&(n=this._parseLayer(n,t),this.addChild(n,e,e),this.width=Math.max(this.width,n.width),this.height=Math.max(this.height,n.height),e++)},allLayers:function(){for(var t=[],e=this._children,i=0,n=e.length;i<n;i++){var s=e[i];s&&s instanceof cc.TMXLayer&&t.push(s)}return t},getLayer:function(t){if(!t||0===t.length)throw Error("cc.TMXTiledMap.getLayer(): layerName should be non-null or non-empty string.");for(var e=this._children,i=0;i<e.length;i++){var n=e[i];if(n&&n.layerName===t)return n}return null},getObjectGroup:function(t){if(!t||0===t.length)throw Error("cc.TMXTiledMap.getObjectGroup(): groupName should be non-null or non-empty string.");if(this.objectGroups)for(var e=0;e<this.objectGroups.length;e++){var i=this.objectGroups[e];if(i&&i.groupName===t)return i}return null},getProperty:function(t){return this.properties[t.toString()]},propertiesForGID:function(t){return cc.log("propertiesForGID is deprecated. Please use getPropertiesForGID instead."),this.getPropertiesForGID[t]},getPropertiesForGID:function(t){return this._tileProperties[t]},_parseLayer:function(t,e){var i=this._tilesetForLayer(t,e);i=new cc.TMXLayer(i,t,e);return t.ownTiles=!1,i},_tilesetForLayer:function(t,e){var i=t._layerSize,n=e.getTilesets();if(n)for(var s=n.length-1;0<=s;s--){var r=n[s];if(r)for(var o=0;o<i.height;o++)for(var a=0;a<i.width;a++){var c=t._tiles[a+i.width*o];if(0!==c&&(c&cc.TMX_TILE_FLIPPED_MASK)>>>0>=r.firstGid)return r}}return cc.log("cocos2d: Warning: TMX Layer "+t.name+" has no tiles"),null}}),_p=cc.TMXTiledMap.prototype,cc.defineGetterSetter(_p,"mapWidth",_p._getMapWidth,_p._setMapWidth),cc.defineGetterSetter(_p,"mapHeight",_p._getMapHeight,_p._setMapHeight),cc.defineGetterSetter(_p,"tileWidth",_p._getTileWidth,_p._setTileWidth),cc.defineGetterSetter(_p,"tileHeight",_p._getTileHeight,_p._setTileHeight),cc.TMXTiledMap.create=function(t,e){return new cc.TMXTiledMap(t,e)},cc.TMX_PROPERTY_NONE=0,cc.TMX_PROPERTY_MAP=1,cc.TMX_PROPERTY_LAYER=2,cc.TMX_PROPERTY_OBJECTGROUP=3,cc.TMX_PROPERTY_OBJECT=4,cc.TMX_PROPERTY_TILE=5,cc.TMX_TILE_HORIZONTAL_FLAG=2147483648,cc.TMX_TILE_VERTICAL_FLAG=1073741824,cc.TMX_TILE_DIAGONAL_FLAG=536870912,cc.TMX_TILE_FLIPPED_ALL=(cc.TMX_TILE_HORIZONTAL_FLAG|cc.TMX_TILE_VERTICAL_FLAG|cc.TMX_TILE_DIAGONAL_FLAG)>>>0,cc.TMX_TILE_FLIPPED_MASK=~cc.TMX_TILE_FLIPPED_ALL>>>0,cc.TMXLayerInfo=cc.Class.extend({properties:null,name:"",_layerSize:null,_tiles:null,visible:null,_opacity:null,ownTiles:!0,_minGID:1e5,_maxGID:0,offset:null,ctor:function(){this.properties=[],this.name="",this._tiles=this._layerSize=null,this.visible=!0,this._opacity=0,this.ownTiles=!0,this._minGID=1e5,this._maxGID=0,this.offset=cc.p(0,0)},getProperties:function(){return this.properties},setProperties:function(t){this.properties=t}}),cc.TMXTilesetInfo=cc.Class.extend({name:"",firstGid:0,_tileSize:null,spacing:0,margin:0,sourceImage:"",imageSize:null,ctor:function(){this._tileSize=cc.size(0,0),this.imageSize=cc.size(0,0)},rectForGID:function(t,e){var i=e||cc.rect(0,0,0,0);i.width=this._tileSize.width,i.height=this._tileSize.height,t&=cc.TMX_TILE_FLIPPED_MASK,t-=parseInt(this.firstGid,10);var n=parseInt((this.imageSize.width-2*this.margin+this.spacing)/(this._tileSize.width+this.spacing),10);return i.x=parseInt(t%n*(this._tileSize.width+this.spacing)+this.margin,10),i.y=parseInt(parseInt(t/n,10)*(this._tileSize.height+this.spacing)+this.margin,10),i}}),cc.TMXMapInfo=cc.SAXParser.extend({properties:null,orientation:null,parentElement:null,parentGID:null,layerAttrs:0,storingCharacters:!1,tmxFileName:null,currentString:null,_objectGroups:null,_mapSize:null,_tileSize:null,_layers:null,_tilesets:null,_tileProperties:null,_resources:"",_currentFirstGID:0,ctor:function(t,e){cc.SAXParser.prototype.ctor.apply(this),this._mapSize=cc.size(0,0),this._tileSize=cc.size(0,0),this._layers=[],this._tilesets=[],this._objectGroups=[],this.properties=[],this._tileProperties={},this._currentFirstGID=0,void 0!==e?this.initWithXML(t,e):void 0!==t&&this.initWithTMXFile(t)},getOrientation:function(){return this.orientation},setOrientation:function(t){this.orientation=t},getMapSize:function(){return cc.size(this._mapSize.width,this._mapSize.height)},setMapSize:function(t){this._mapSize.width=t.width,this._mapSize.height=t.height},_getMapWidth:function(){return this._mapSize.width},_setMapWidth:function(t){this._mapSize.width=t},_getMapHeight:function(){return this._mapSize.height},_setMapHeight:function(t){this._mapSize.height=t},getTileSize:function(){return cc.size(this._tileSize.width,this._tileSize.height)},setTileSize:function(t){this._tileSize.width=t.width,this._tileSize.height=t.height},_getTileWidth:function(){return this._tileSize.width},_setTileWidth:function(t){this._tileSize.width=t},_getTileHeight:function(){return this._tileSize.height},_setTileHeight:function(t){this._tileSize.height=t},getLayers:function(){return this._layers},setLayers:function(t){this._layers.push(t)},getTilesets:function(){return this._tilesets},setTilesets:function(t){this._tilesets.push(t)},getObjectGroups:function(){return this._objectGroups},setObjectGroups:function(t){this._objectGroups.push(t)},getParentElement:function(){return this.parentElement},setParentElement:function(t){this.parentElement=t},getParentGID:function(){return this.parentGID},setParentGID:function(t){this.parentGID=t},getLayerAttribs:function(){return this.layerAttrs},setLayerAttribs:function(t){this.layerAttrs=t},getStoringCharacters:function(){return this.storingCharacters},setStoringCharacters:function(t){this.storingCharacters=t},getProperties:function(){return this.properties},setProperties:function(t){this.properties=t},initWithTMXFile:function(t){return this._internalInit(t,null),this.parseXMLFile(t)},initWithXML:function(t,e){return this._internalInit(null,e),this.parseXMLString(t)},parseXMLFile:function(t,e){var i,n,s;if(!(s=(e=e||!1)?t:cc.loader.getRes(t)))throw Error("Please load the resource first : "+t);if(i=(s=this._parseXML(s).documentElement).getAttribute("version"),n=s.getAttribute("orientation"),"map"===s.nodeName&&("1.0"!==i&&null!==i&&cc.log("cocos2d: TMXFormat: Unsupported TMX version:"+i),"orthogonal"===n?this.orientation=cc.TMX_ORIENTATION_ORTHO:"isometric"===n?this.orientation=cc.TMX_ORIENTATION_ISO:"hexagonal"===n?this.orientation=cc.TMX_ORIENTATION_HEX:null!==n&&cc.log("cocos2d: TMXFomat: Unsupported orientation:"+n),(i=cc.size(0,0)).width=parseFloat(s.getAttribute("width")),i.height=parseFloat(s.getAttribute("height")),this.setMapSize(i),(i=cc.size(0,0)).width=parseFloat(s.getAttribute("tilewidth")),i.height=parseFloat(s.getAttribute("tileheight")),this.setTileSize(i),n=s.querySelectorAll("map > properties >  property"))){var r={};for(i=0;i<n.length;i++)r[n[i].getAttribute("name")]=n[i].getAttribute("value");this.properties=r}for(r=s.getElementsByTagName("tileset"),"map"!==s.nodeName&&(r=[]).push(s),i=0;i<r.length;i++){var o=(n=r[i]).getAttribute("source");if(o)n=e?cc.path.join(this._resources,o):cc.path.changeBasename(t,o),this.parseXMLFile(n);else{(o=new cc.TMXTilesetInfo).name=n.getAttribute("name")||"",o.firstGid=parseInt(n.getAttribute("firstgid"))||0,o.spacing=parseInt(n.getAttribute("spacing"))||0,o.margin=parseInt(n.getAttribute("margin"))||0,(a=cc.size(0,0)).width=parseFloat(n.getAttribute("tilewidth")),a.height=parseFloat(n.getAttribute("tileheight")),o._tileSize=a;var a=n.getElementsByTagName("image")[0].getAttribute("source"),c=-1;if(this.tmxFileName&&(c=this.tmxFileName.lastIndexOf("/")),-1!==c?(c=this.tmxFileName.substr(0,c+1),o.sourceImage=c+a):o.sourceImage=this._resources+(this._resources?"/":"")+a,this.setTilesets(o),a=n.getElementsByTagName("tile"))for(c=0;c<a.length;c++){n=a[c],this.parentGID=parseInt(o.firstGid)+parseInt(n.getAttribute("id")||0);var h=n.querySelectorAll("properties > property");if(h){var l={};for(n=0;n<h.length;n++){var u=h[n].getAttribute("name");l[u]=h[n].getAttribute("value")}this._tileProperties[this.parentGID]=l}}}}if(r=s.getElementsByTagName("layer"))for(i=0;i<r.length;i++){for(h=(c=r[i]).getElementsByTagName("data")[0],(o=new cc.TMXLayerInfo).name=c.getAttribute("name"),(n=cc.size(0,0)).width=parseFloat(c.getAttribute("width")),n.height=parseFloat(c.getAttribute("height")),o._layerSize=n,n=c.getAttribute("visible"),o.visible="0"!=n,n=c.getAttribute("opacity")||1,o._opacity=n?parseInt(255*parseFloat(n)):255,o.offset=cc.p(parseFloat(c.getAttribute("x"))||0,parseFloat(c.getAttribute("y"))||0),l="",n=0;n<h.childNodes.length;n++)l+=h.childNodes[n].nodeValue;if(l=l.trim(),n=h.getAttribute("compression"),u=h.getAttribute("encoding"),n&&"gzip"!==n&&"zlib"!==n)return cc.log("cc.TMXMapInfo.parseXMLFile(): unsupported compression method"),null;switch(n){case"gzip":a=cc.unzipBase64AsArray(l,4);break;case"zlib":a=new Zlib.Inflate(cc.Codec.Base64.decodeAsArray(l,1)),a=cc.uint8ArrayToUint32Array(a.decompress());break;case null:case"":if("base64"===u)a=cc.Codec.Base64.decodeAsArray(l,4);else if("csv"===u)for(a=[],n=l.split(","),h=0;h<n.length;h++)a.push(parseInt(n[h]));else for(n=h.getElementsByTagName("tile"),a=[],h=0;h<n.length;h++)a.push(parseInt(n[h].getAttribute("gid")));break;default:this.layerAttrs===cc.TMXLayerInfo.ATTRIB_NONE&&cc.log("cc.TMXMapInfo.parseXMLFile(): Only base64 and/or gzip/zlib maps are supported")}if(a&&(o._tiles=new Uint32Array(a)),c=c.querySelectorAll("properties > property")){for(h={},n=0;n<c.length;n++)h[c[n].getAttribute("name")]=c[n].getAttribute("value");o.properties=h}this.setLayers(o)}if(a=s.getElementsByTagName("objectgroup"))for(i=0;i<a.length;i++){if(o=a[i],(r=new cc.TMXObjectGroup).groupName=o.getAttribute("name"),r.setPositionOffset(cc.p(parseFloat(o.getAttribute("x"))*this.getTileSize().width||0,parseFloat(o.getAttribute("y"))*this.getTileSize().height||0)),c=o.querySelectorAll("objectgroup > properties > property"))for(n=0;n<c.length;n++)(h={})[c[n].getAttribute("name")]=c[n].getAttribute("value"),r.properties=h;if(o=o.querySelectorAll("object"),c=cc.director.getContentScaleFactor(),o)for(n=0;n<o.length;n++){if(l=o[n],(h={}).name=l.getAttribute("name")||"",h.type=l.getAttribute("type")||"",h.width=parseInt(l.getAttribute("width"))||0,h.height=parseInt(l.getAttribute("height"))||0,h.x=((0|(l.getAttribute("x")||0))+r.getPositionOffset().x)/c,u=(0|(l.getAttribute("y")||0))+r.getPositionOffset().y/c,h.y=(parseInt(this.getMapSize().height*this.getTileSize().height)-u-h.height)/cc.director.getContentScaleFactor(),h.rotation=parseInt(l.getAttribute("rotation"))||0,u=l.querySelectorAll("properties > property"))for(var d=0;d<u.length;d++)h[u[d].getAttribute("name")]=u[d].getAttribute("value");(u=l.querySelectorAll("polygon"))&&0<u.length&&(u=u[0].getAttribute("points"))&&(h.points=this._parsePointsString(u)),(l=l.querySelectorAll("polyline"))&&0<l.length&&(l=l[0].getAttribute("points"))&&(h.polylinePoints=this._parsePointsString(l)),r.setObjects(h)}this.setObjectGroups(r)}return s},_parsePointsString:function(t){if(!t)return null;var e=[];t=t.split(" ");for(var i=0;i<t.length;i++){var n=t[i].split(",");e.push({x:n[0],y:n[1]})}return e},parseXMLString:function(t){return this.parseXMLFile(t,!0)},getTileProperties:function(){return this._tileProperties},setTileProperties:function(t){this._tileProperties.push(t)},getCurrentString:function(){return this.currentString},setCurrentString:function(t){this.currentString=t},getTMXFileName:function(){return this.tmxFileName},setTMXFileName:function(t){this.tmxFileName=t},_internalInit:function(t,e){this._tilesets.length=0,this._layers.length=0,this.tmxFileName=t,e&&(this._resources=e),this._objectGroups.length=0,this.properties.length=0,this._tileProperties.length=0,this.currentString="",this.storingCharacters=!1,this.layerAttrs=cc.TMXLayerInfo.ATTRIB_NONE,this.parentElement=cc.TMX_PROPERTY_NONE,this._currentFirstGID=0}}),_p=cc.TMXMapInfo.prototype,cc.defineGetterSetter(_p,"mapWidth",_p._getMapWidth,_p._setMapWidth),cc.defineGetterSetter(_p,"mapHeight",_p._getMapHeight,_p._setMapHeight),cc.defineGetterSetter(_p,"tileWidth",_p._getTileWidth,_p._setTileWidth),cc.defineGetterSetter(_p,"tileHeight",_p._getTileHeight,_p._setTileHeight),cc.TMXMapInfo.create=function(t,e){return new cc.TMXMapInfo(t,e)},cc.loader.register(["tmx","tsx"],cc._txtLoader),cc.TMXLayerInfo.ATTRIB_NONE=1,cc.TMXLayerInfo.ATTRIB_BASE64=2,cc.TMXLayerInfo.ATTRIB_GZIP=4,cc.TMXLayerInfo.ATTRIB_ZLIB=8,cc.TMXObjectGroup=cc.Class.extend({properties:null,groupName:"",_positionOffset:null,_objects:null,ctor:function(){this.groupName="",this._positionOffset=cc.p(0,0),this.properties=[],this._objects=[]},getPositionOffset:function(){return cc.p(this._positionOffset)},setPositionOffset:function(t){this._positionOffset.x=t.x,this._positionOffset.y=t.y},getProperties:function(){return this.properties},setProperties:function(t){this.properties.push(t)},getGroupName:function(){return this.groupName.toString()},setGroupName:function(t){this.groupName=t},propertyNamed:function(t){return this.properties[t]},objectNamed:function(t){return this.getObject(t)},getObject:function(t){if(this._objects&&0<this._objects.length)for(var e=this._objects,i=0,n=e.length;i<n;i++){var s=e[i].name;if(s&&s===t)return e[i]}return null},getObjects:function(){return this._objects},setObjects:function(t){this._objects.push(t)}}),cc.TMXLayer=cc.SpriteBatchNode.extend({tiles:null,tileset:null,layerOrientation:null,properties:null,layerName:"",_textures:null,_texGrids:null,_spriteTiles:null,_layerSize:null,_mapTileSize:null,_opacity:255,_minGID:null,_maxGID:null,_vertexZvalue:null,_useAutomaticVertexZ:null,_reusedTile:null,_atlasIndexArray:null,_contentScaleFactor:null,_className:"TMXLayer",ctor:function(t,e,i){cc.SpriteBatchNode.prototype.ctor.call(this),this._descendants=[],this._layerSize=cc.size(0,0),this._mapTileSize=cc.size(0,0),this._spriteTiles={},void 0!==i&&this.initWithTilesetInfo(t,e,i)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.TMXLayer.CanvasRenderCmd(this):new cc.TMXLayer.WebGLRenderCmd(this)},_fillTextureGrids:function(t,e){if((r=this._textures[e]).isLoaded()){t.imageSize.width&&t.imageSize.height||(t.imageSize.width=r.width,t.imageSize.height=r.height);for(var i=t._tileSize.width,n=t._tileSize.height,s=r._contentSize.width,r=r._contentSize.height,o=t.spacing,a=t.margin,c=t.firstGid,h=(o=t.firstGid+Math.floor((r-2*a+o)/(n+o))*Math.floor((s-2*a+o)/(i+o)),null),l=!!(a=this._texGrids)[c];c<o&&(l&&!a[c]&&(l=!1),l||!a[c]);++c)h={texId:e,x:0,y:0,width:i,height:n,t:0,l:0,r:0,b:0},t.rectForGID(c,h),h.t=h.y/r,h.l=h.x/s,h.r=(h.x+h.width)/s,h.b=(h.y+h.height)/r,a[c]=h}else r.addEventListener("load",(function(){this._fillTextureGrids(t,e)}),this)},initWithTilesetInfo:function(t,e,i){var n=e._layerSize;if(parseInt(n.width*n.height),this.layerName=e.name,this.tiles=e._tiles,this.properties=e.properties,this._layerSize=n,this._minGID=e._minGID,this._maxGID=e._maxGID,this._opacity=e._opacity,this.tileset=t,this.layerOrientation=i.orientation,this._mapTileSize=i.getTileSize(),i=i._tilesets){this._textures=[],this._texGrids=[];var s,r,o=i.length;for(n=0;n<o;++n)s=i[n],r=cc.textureCache.addImage(s.sourceImage),this._textures.push(r),this._fillTextureGrids(s,n),s===t&&(this._texture=r)}return t=this._calculateLayerOffset(e.offset),this.setPosition(cc.pointPixelsToPoints(t)),this._parseInternalProperties(),this.setContentSize(cc.sizePixelsToPoints(cc.size(this._layerSize.width*this._mapTileSize.width,this._layerSize.height*this._mapTileSize.height))),this._useAutomaticVertexZ=!1,this._vertexZvalue=0,!0},getLayerSize:function(){return cc.size(this._layerSize.width,this._layerSize.height)},setLayerSize:function(t){this._layerSize.width=t.width,this._layerSize.height=t.height},_getLayerWidth:function(){return this._layerSize.width},_setLayerWidth:function(t){this._layerSize.width=t},_getLayerHeight:function(){return this._layerSize.height},_setLayerHeight:function(t){this._layerSize.height=t},getMapTileSize:function(){return cc.size(this._mapTileSize.width,this._mapTileSize.height)},setMapTileSize:function(t){this._mapTileSize.width=t.width,this._mapTileSize.height=t.height},_getTileWidth:function(){return this._mapTileSize.width},_setTileWidth:function(t){this._mapTileSize.width=t},_getTileHeight:function(){return this._mapTileSize.height},_setTileHeight:function(t){this._mapTileSize.height=t},getTiles:function(){return this.tiles},setTiles:function(t){this.tiles=t},getTileset:function(){return this.tileset},setTileset:function(t){this.tileset=t},getLayerOrientation:function(){return this.layerOrientation},setLayerOrientation:function(t){this.layerOrientation=t},getProperties:function(){return this.properties},setProperties:function(t){this.properties=t},getProperty:function(t){return this.properties[t]},getLayerName:function(){return this.layerName},setLayerName:function(t){this.layerName=t},releaseMap:function(){this._spriteTiles={}},getTileAt:function(t,e){if(void 0===t)throw Error("cc.TMXLayer.getTileAt(): pos should be non-null");var i=t;if(void 0===e&&(i=t.x,e=t.y),i>=this._layerSize.width||e>=this._layerSize.height||0>i||0>e)throw Error("cc.TMXLayer.getTileAt(): invalid position");if(!this.tiles)return cc.log("cc.TMXLayer.getTileAt(): TMXLayer: the tiles map has been released"),null;var n=null,s=this.getTileGIDAt(i,e);if(0===s)return n;var r=0|i+e*this._layerSize.width;return(n=this._spriteTiles[r])||(n=this._texGrids[s],s=this._textures[n.texId],n=cc.rectPixelsToPoints(n),(n=new cc.Sprite(s,n)).setPosition(this.getPositionAt(i,e)),i=this._vertexZForPos(i,e),n.setVertexZ(i),n.setAnchorPoint(0,0),n.setOpacity(this._opacity),this.addChild(n,i,r)),n},getTileGIDAt:function(t,e){if(void 0===t)throw Error("cc.TMXLayer.getTileGIDAt(): pos should be non-null");var i=t;if(void 0===e&&(i=t.x,e=t.y),i>=this._layerSize.width||e>=this._layerSize.height||0>i||0>e)throw Error("cc.TMXLayer.getTileGIDAt(): invalid position");return this.tiles?(this.tiles[0|i+e*this._layerSize.width]&cc.TMX_TILE_FLIPPED_MASK)>>>0:(cc.log("cc.TMXLayer.getTileGIDAt(): TMXLayer: the tiles map has been released"),null)},setTileGID:function(t,e,i,n){if(void 0===e)throw Error("cc.TMXLayer.setTileGID(): pos should be non-null");if(void 0!==n?e=cc.p(e,i):n=i,e.x>=this._layerSize.width||e.y>=this._layerSize.height||0>e.x||0>e.y)throw Error("cc.TMXLayer.setTileGID(): invalid position");if(this.tiles)if(0!==t&&t<this.tileset.firstGid)cc.log("cc.TMXLayer.setTileGID(): invalid gid:"+t);else{if(n=n||0,i=this.getTileFlagsAt(e),(s=this.getTileGIDAt(e))!==t||i!==n)if(i=(t|n)>>>0,0===t)this.removeTileAt(e);else if(0===s)this._updateTileForGID(i,e);else{var s=e.x+e.y*this._layerSize.width,r=this.getChildByTag(s);if(r){t=this._texGrids[t];var o=this._textures[t.texId];t=cc.rectPixelsToPoints(t),r.setTexture(o),r.setTextureRect(t,!1),null!=n&&this._setupTileSprite(r,e,i),this.tiles[s]=i}else this._updateTileForGID(i,e)}}else cc.log("cc.TMXLayer.setTileGID(): TMXLayer: the tiles map has been released")},addChild:function(t,e,i){cc.Node.prototype.addChild.call(this,t,e,i),void 0!==i&&(this._spriteTiles[i]=t,t._vertexZ=this._vertexZ+cc.renderer.assignedZStep*i/this.tiles.length)},removeChild:function(t,e){this._spriteTiles[t.tag]&&(this._spriteTiles[t.tag]=null),cc.Node.prototype.removeChild.call(this,t,e)},getTileFlagsAt:function(t,e){if(!t)throw Error("cc.TMXLayer.getTileFlagsAt(): pos should be non-null");if(void 0!==e&&(t=cc.p(t,e)),t.x>=this._layerSize.width||t.y>=this._layerSize.height||0>t.x||0>t.y)throw Error("cc.TMXLayer.getTileFlagsAt(): invalid position");return this.tiles?(this.tiles[0|t.x+t.y*this._layerSize.width]&cc.TMX_TILE_FLIPPED_ALL)>>>0:(cc.log("cc.TMXLayer.getTileFlagsAt(): TMXLayer: the tiles map has been released"),null)},removeTileAt:function(t,e){if(!t)throw Error("cc.TMXLayer.removeTileAt(): pos should be non-null");if(void 0!==e&&(t=cc.p(t,e)),t.x>=this._layerSize.width||t.y>=this._layerSize.height||0>t.x||0>t.y)throw Error("cc.TMXLayer.removeTileAt(): invalid position");if(this.tiles){if(0!==this.getTileGIDAt(t)){var i=0|t.x+t.y*this._layerSize.width;this.tiles[i]=0,(i=this._spriteTiles[i])&&this.removeChild(i,!0)}}else cc.log("cc.TMXLayer.removeTileAt(): TMXLayer: the tiles map has been released")},getPositionAt:function(t,e){void 0!==e&&(t=cc.p(t,e));var i=cc.p(0,0);switch(this.layerOrientation){case cc.TMX_ORIENTATION_ORTHO:i=this._positionForOrthoAt(t);break;case cc.TMX_ORIENTATION_ISO:i=this._positionForIsoAt(t);break;case cc.TMX_ORIENTATION_HEX:i=this._positionForHexAt(t)}return cc.pointPixelsToPoints(i)},_positionForIsoAt:function(t){return cc.p(this._mapTileSize.width/2*(this._layerSize.width+t.x-t.y-1),this._mapTileSize.height/2*(2*this._layerSize.height-t.x-t.y-2))},_positionForOrthoAt:function(t){return cc.p(t.x*this._mapTileSize.width,(this._layerSize.height-t.y-1)*this._mapTileSize.height)},_positionForHexAt:function(t){return cc.p(t.x*this._mapTileSize.width*3/4,(this._layerSize.height-t.y-1)*this._mapTileSize.height+(1==t.x%2?-this._mapTileSize.height/2:0))},_calculateLayerOffset:function(t){var e=cc.p(0,0);switch(this.layerOrientation){case cc.TMX_ORIENTATION_ORTHO:e=cc.p(t.x*this._mapTileSize.width,-t.y*this._mapTileSize.height);break;case cc.TMX_ORIENTATION_ISO:e=cc.p(this._mapTileSize.width/2*(t.x-t.y),this._mapTileSize.height/2*(-t.x-t.y));break;case cc.TMX_ORIENTATION_HEX:0===t.x&&0===t.y||cc.log("offset for hexagonal map not implemented yet")}return e},_updateTileForGID:function(t,e){if(this._texGrids[t]){var i=0|e.x+e.y*this._layerSize.width;i<this.tiles.length&&(this.tiles[i]=t)}},_parseInternalProperties:function(){if(t=this.getProperty("cc_vertexz"))if("automatic"===t){this._useAutomaticVertexZ=!0;var t,e=0;(t=this.getProperty("cc_alpha_func"))&&(e=parseFloat(t)),cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(this.shaderProgram=cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST),this.shaderProgram.use(),this.shaderProgram.setUniformLocationWith1f(cc.UNIFORM_ALPHA_TEST_VALUE_S,e))}else this._vertexZvalue=parseInt(t,10)},_setupTileSprite:function(t,e,i){var n=this.getPositionAt(e);t.setPosition(n),t.setVertexZ(this._vertexZForPos(e)),t.setAnchorPoint(0,0),t.setOpacity(this._opacity),t.setFlippedX(!1),t.setFlippedY(!1),t.setRotation(0),(i&cc.TMX_TILE_DIAGONAL_FLAG)>>>0?(t.setAnchorPoint(.5,.5),t.setPosition(n.x+t.width/2,n.y+t.height/2),(e=(i&(cc.TMX_TILE_HORIZONTAL_FLAG|cc.TMX_TILE_VERTICAL_FLAG)>>>0)>>>0)===cc.TMX_TILE_HORIZONTAL_FLAG?t.setRotation(90):e===cc.TMX_TILE_VERTICAL_FLAG?t.setRotation(270):(e===(cc.TMX_TILE_VERTICAL_FLAG|cc.TMX_TILE_HORIZONTAL_FLAG)>>>0?t.setRotation(90):t.setRotation(270),t.setFlippedX(!0))):((i&cc.TMX_TILE_HORIZONTAL_FLAG)>>>0&&t.setFlippedX(!0),(i&cc.TMX_TILE_VERTICAL_FLAG)>>>0&&t.setFlippedY(!0))},_vertexZForPos:function(t,e){void 0===e&&(e=t.y,t=t.x);var i=0;if(this._useAutomaticVertexZ)switch(this.layerOrientation){case cc.TMX_ORIENTATION_ISO:i=-(this._layerSize.width+this._layerSize.height-(t+e));break;case cc.TMX_ORIENTATION_ORTHO:i=-(this._layerSize.height-e);break;case cc.TMX_ORIENTATION_HEX:cc.log("TMX Hexa zOrder not supported");break;default:cc.log("TMX invalid value")}else i=this._vertexZvalue;return i}}),_p=cc.TMXLayer.prototype,cc.defineGetterSetter(_p,"layerWidth",_p._getLayerWidth,_p._setLayerWidth),cc.defineGetterSetter(_p,"layerHeight",_p._getLayerHeight,_p._setLayerHeight),cc.defineGetterSetter(_p,"tileWidth",_p._getTileWidth,_p._setTileWidth),cc.defineGetterSetter(_p,"tileHeight",_p._getTileHeight,_p._setTileHeight),cc.TMXLayer.create=function(t,e,i){return new cc.TMXLayer(t,e,i)},function(){cc.TMXLayer.CanvasRenderCmd=function(t){this._rootCtor(t),this._needDraw=!0};var t=cc.TMXLayer.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);t.constructor=cc.TMXLayer.CanvasRenderCmd,t.visit=function(t){var e=this._node,i=cc.renderer;if((t=t||this.getParentRenderCmd())&&(this._curLevel=t._curLevel+1),e._visible){isNaN(e._customZ)&&(e._vertexZ=i.assignedZ,i.assignedZ+=i.assignedZStep),this._syncStatus(t),t=e._children;var n,s=e._spriteTiles,r=t.length;if(0<r){for(e.sortAllChildren(),n=0;n<r&&0>(e=t[n])._localZOrder;n++)e._renderCmd.visit(this);for(i.pushRenderCommand(this);n<r;n++)0===(e=t[n])._localZOrder&&s[e.tag]?(isNaN(e._customZ)&&(e._vertexZ=i.assignedZ,i.assignedZ+=i.assignedZStep),e._renderCmd.updateStatus()):e._renderCmd.visit(this)}else i.pushRenderCommand(this);this._dirtyFlag=0}},t.rendering=function(t,e,i){var n=this._node,s=n._rotationX||n._rotationY,r=n.layerOrientation,o=n._opacity/255;if(n.tiles&&!(0>=o)){var a=n._mapTileSize.width,c=n._mapTileSize.height,h=n.tileset._tileSize.width/cc.director._contentScaleFactor,l=n.tileset._tileSize.height/cc.director._contentScaleFactor,u=h-a,d=l-c,_=cc.winSize.width,g=cc.winSize.height,f=n._layerSize.height,p=n._layerSize.width,m=n._texGrids,T=n._spriteTiles,S=this._worldTransform,y=-n._contentSize.width*n._anchorPoint.x,C=-n._contentSize.height*n._anchorPoint.y,E=S.a,A=S.d,b=y*E+C*S.c+S.tx,v=(y=y*S.b+C*A+S.ty,(C=t||cc._renderContext).getContext()),I=0,x=0,R=p,P=f;s||r!==cc.TMX_ORIENTATION_ORTHO||(0>(I=Math.floor(-(b-u*E)/(a*E)))&&(I=0),0>(x=Math.floor((y-d*A+c*f*A-g)/(c*A)))&&(x=0),(R=Math.ceil((_-b+u*E)/(a*E)))>p&&(R=p),(P=f-Math.floor(-(y+d*A)/(c*A)))>f&&(P=f));u=x*p;var w,B,L,O,N,k,D,M,F,G,W=cc.TMX_TILE_FLIPPED_MASK,z=h*E,V=l*A,U=!1,H=!1;d=u+I;for(w in T)if(w<d&&T[w])L=T[w]._renderCmd,0===T[w]._localZOrder&&L.rendering&&L.rendering(t,e,i);else if(w>=d)break;for(C.setTransform(S,e,i),C.setGlobalAlpha(o);x<P;++x){for(B=I;B<R;++B)if(T[d=u+B])L=T[d]._renderCmd,0===T[d]._localZOrder&&L.rendering&&(L.rendering(t,e,i),C.setTransform(S,e,i),C.setGlobalAlpha(o));else if((O=m[((L=n.tiles[d])&W)>>>0])&&(N=n._textures[O.texId])&&N._htmlElementObj){switch(r){case cc.TMX_ORIENTATION_ORTHO:D=B*a,M=-(f-x-1)*c;break;case cc.TMX_ORIENTATION_ISO:D=a/2*(p+B-x-1),M=-c/2*(2*f-B-x-2);break;case cc.TMX_ORIENTATION_HEX:D=B*a*3/4,M=-(f-x-1)*c+(1==B%2?-c/2:0)}if(F=D+h,k=M-l,!s&&r===cc.TMX_ORIENTATION_ISO){if((G=M*A-y)<-g-V){B+=Math.floor(2*(-g-G)/V)-1;continue}if((G=b+F*E)<-z){B+=Math.floor(2*-G/z)-1;continue}if(G=k*A-y,b+D*E>_||0<G){B=R;continue}}L>cc.TMX_TILE_DIAGONAL_FLAG&&(U=(L&cc.TMX_TILE_HORIZONTAL_FLAG)>>>0,H=(L&cc.TMX_TILE_VERTICAL_FLAG)>>>0),U&&(D=-F,v.scale(-1,1)),H&&(k=-M,v.scale(1,-1)),v.drawImage(N._htmlElementObj,O.x,O.y,O.width,O.height,D,k,h,l),U&&v.scale(-1,1),H&&v.scale(1,-1),cc.g_NumberOfDraws++}u+=p}for(w in T)w>d&&T[w]&&(L=T[w]._renderCmd,0===T[w]._localZOrder&&L.rendering&&L.rendering(t,e,i))}}}(),function(){cc.TMXLayer.WebGLRenderCmd=function(t){this._rootCtor(t),this._needDraw=!0,this._vertices=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],this._color=new Uint32Array(1),this._shaderProgram=cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST),t=90*Math.PI/180,this._sin90=Math.sin(t),this._cos90=Math.cos(t),t*=3,this._sin270=Math.sin(t),this._cos270=Math.cos(t)};var t=cc.TMXLayer.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);t.constructor=cc.TMXLayer.WebGLRenderCmd,t.uploadData=function(t,e,i){var n=this._node,s=n._rotationX||n._rotationY,r=n.layerOrientation,o=n.tiles;if(!o)return 0;var a=n._mapTileSize.width,c=n._mapTileSize.height,h=n.tileset._tileSize.width/cc.director._contentScaleFactor,l=n.tileset._tileSize.height/cc.director._contentScaleFactor,u=h-a,d=l-c,_=cc.winSize.width,g=cc.winSize.height,f=n._layerSize.height,p=n._layerSize.width,m=n._texGrids,T=n._spriteTiles,S=(b=this._worldTransform).a,y=b.b,C=b.c,E=b.d,A=b.tx,b=b.ty,v=(I=-n._contentSize.width*n._anchorPoint.x)*S+(x=-n._contentSize.height*n._anchorPoint.y)*C+A,I=I*y+x*E+b,x=n._opacity,R=this._displayedColor.r,P=this._displayedColor.g,w=this._displayedColor.b;if(n._opacityModifyRGB)R=R*(z=x/255),P=P*z,w=w*z;this._color[0]=x<<24|w<<16|P<<8|R;var B=x=0;R=p,P=f;s||r!==cc.TMX_ORIENTATION_ORTHO||(0>(x=Math.floor(-(v-u*S)/(a*S)))&&(x=0),0>(B=Math.floor((I-d*E+c*f*E-g)/(c*E)))&&(B=0),(R=Math.ceil((_-v+u*S)/(a*S)))>p&&(R=p),(P=f-Math.floor(-(I+d*E)/(c*E)))>f&&(P=f));u=i,d=B*p,w=cc.TMX_TILE_FLIPPED_MASK;for(var L,O,N,k,D,M,F,G,W,z=h*S,V=l*E,U=S,H=y,Y=C,j=E,X=A,q=b,Z=!1,Q=!1,K=!1,J=this._vertices;B<P;++B){for(L=x;L<R;++L)if(u+24>t.length&&(cc.renderer._increaseBatchingSize((u-i)/6),cc.renderer._batchRendering(),u=i=0),!T[O=d+L]&&(k=m[((N=n.tiles[O])&w)>>>0])){switch(r){case cc.TMX_ORIENTATION_ORTHO:M=L*a,F=(f-B-1)*c,O=n._vertexZ+cc.renderer.assignedZStep*O/o.length;break;case cc.TMX_ORIENTATION_ISO:M=a/2*(p+L-B-1),F=c/2*(2*f-L-B-2),O=n._vertexZ+cc.renderer.assignedZStep*(n.height-F)/n.height;break;case cc.TMX_ORIENTATION_HEX:M=L*a*3/4,F=(f-B-1)*c+(1==L%2?-c/2:0),O=n._vertexZ+cc.renderer.assignedZStep*(n.height-F)/n.height}if(G=M+h,D=F+l,!s&&r===cc.TMX_ORIENTATION_ISO){if((W=I+F*E)>g+V){L+=Math.floor(2*(W-g)/V)-1;continue}if((W=v+G*S)<-z){L+=Math.floor(2*-W/z)-1;continue}if(W=I+D*E,v+M*S>_||0>W){L=R;continue}}for(N>cc.TMX_TILE_DIAGONAL_FLAG&&(Z=!0,Q=(N&cc.TMX_TILE_HORIZONTAL_FLAG)>>>0,K=(N&cc.TMX_TILE_VERTICAL_FLAG)>>>0),J[0].x=M*U+D*Y+X,J[0].y=M*H+D*j+q,J[1].x=M*U+F*Y+X,J[1].y=M*H+F*j+q,J[2].x=G*U+D*Y+X,J[2].y=G*H+D*j+q,J[3].x=G*U+F*Y+X,J[3].y=G*H+F*j+q,N=0;4>N;++N){switch(t[u]=J[N].x,t[u+1]=J[N].y,t[u+2]=O,e[u+3]=this._color[0],N){case 0:t[u+4]=Q?k.r:k.l,t[u+5]=K?k.b:k.t;break;case 1:t[u+4]=Q?k.r:k.l,t[u+5]=K?k.t:k.b;break;case 2:t[u+4]=Q?k.l:k.r,t[u+5]=K?k.b:k.t;break;case 3:t[u+4]=Q?k.l:k.r,t[u+5]=K?k.t:k.b}u+=6}Z&&(U=S,H=y,Y=C,j=E,X=A,q=b,Z=K=Q=!1)}d+=p}return(u-i)/6}}(),cc.PointObject=cc.Class.extend({_ratio:null,_offset:null,_child:null,ctor:function(t,e){this.initWithCCPoint(t,e)},getRatio:function(){return this._ratio},setRatio:function(t){this._ratio=t},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t},getChild:function(){return this._child},setChild:function(t){this._child=t},initWithCCPoint:function(t,e){return this._ratio=t,this._offset=e,this._child=null,!0}}),cc.PointObject.create=function(t,e){return new cc.PointObject(t,e)},cc.ParallaxNode=cc.Node.extend({parallaxArray:null,_lastPosition:null,_className:"ParallaxNode",getParallaxArray:function(){return this.parallaxArray},setParallaxArray:function(t){this.parallaxArray=t},ctor:function(){cc.Node.prototype.ctor.call(this),this.parallaxArray=[],this._lastPosition=cc.p(-100,-100)},addChild:function(t,e,i,n){if(3===arguments.length)cc.log("ParallaxNode: use addChild(child, z, ratio, offset) instead");else{if(!t)throw Error("cc.ParallaxNode.addChild(): child should be non-null");var s=new cc.PointObject(i,n);s.setChild(t),this.parallaxArray.push(s),t.setPosition(this._position.x*i.x+n.x,this._position.y*i.y+n.y),cc.Node.prototype.addChild.call(this,t,e,t.tag)}},removeChild:function(t,e){for(var i=this.parallaxArray,n=0;n<i.length;n++)if(i[n].getChild()===t){i.splice(n,1);break}cc.Node.prototype.removeChild.call(this,t,e)},removeAllChildren:function(t){this.parallaxArray.length=0,cc.Node.prototype.removeAllChildren.call(this,t)},_updateParallaxPosition:function(){var t=this._absolutePosition();if(!cc.pointEqualToPoint(t,this._lastPosition)){for(var e=this.parallaxArray,i=0,n=e.length;i<n;i++){var s=e[i];s.getChild().setPosition(-t.x+t.x*s.getRatio().x+s.getOffset().x,-t.y+t.y*s.getRatio().y+s.getOffset().y)}this._lastPosition=t}},_absolutePosition:function(){for(var t=this._position,e=this;null!==e.parent;)e=e.parent,t=cc.pAdd(t,e.getPosition());return t},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.ParallaxNode.CanvasRenderCmd(this):new cc.ParallaxNode.WebGLRenderCmd(this)}}),cc.ParallaxNode.create=function(){return new cc.ParallaxNode},function(){cc.ParallaxNode.CanvasRenderCmd=function(t){this._rootCtor(t),this._needDraw=!1};var t=cc.ParallaxNode.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);t.constructor=cc.ParallaxNode.CanvasRenderCmd,t.updateStatus=function(){this._node._updateParallaxPosition(),this.originUpdateStatus()},t._syncStatus=function(t){this._node._updateParallaxPosition(),this._originSyncStatus(t)}}(),cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,(function(){if(cc._renderType===cc.game.RENDER_TYPE_WEBGL){cc.ParallaxNode.WebGLRenderCmd=function(t){this._rootCtor(t),this._needDraw=!1};var t=cc.ParallaxNode.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);t.constructor=cc.ParallaxNode.WebGLRenderCmd,t.updateStatus=function(){this._node._updateParallaxPosition(),this.originUpdateStatus()},t._syncStatus=function(t){this._node._updateParallaxPosition(),this._originSyncStatus(t)}}})),function(){var t=cc.sys,e={ONLY_ONE:!1,WEB_AUDIO:!!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext),DELAY_CREATE_CTX:!1,ONE_SOURCE:!1};t.browserType===t.BROWSER_TYPE_FIREFOX&&(e.DELAY_CREATE_CTX=!0,e.USE_LOADER_EVENT="canplay"),t.os===t.OS_IOS&&(e.USE_LOADER_EVENT="loadedmetadata"),t.os===t.OS_ANDROID&&t.browserType===t.BROWSER_TYPE_UC&&(e.ONE_SOURCE=!0),window.__audioSupport=e}(),cc.Audio=cc.Class.extend({interruptPlay:!1,src:null,_element:null,_AUDIO_TYPE:"AUDIO",ctor:function(t){this.src=t},setBuffer:function(t){this._AUDIO_TYPE="WEBAUDIO",this._element=new cc.Audio.WebAudio(t)},setElement:function(t){this._AUDIO_TYPE="AUDIO",this._element=t,t.addEventListener("ended",(function(){t.loop||(t.paused=!0)}))},play:function(t,e){this._element?(this._element.loop=e,this._element.play(),"AUDIO"===this._AUDIO_TYPE&&this._element.paused&&(this.stop(),cc.Audio.touchPlayList.push({loop:e,offset:t,audio:this._element})),!1===cc.Audio.bindTouch&&(cc.Audio.bindTouch=!0,cc.game.canvas.addEventListener("touchstart",cc.Audio.touchStart))):this.interruptPlay=!1},getPlaying:function(){return!this._element||!this._element.paused},stop:function(){if(this._element){this._element.pause();try{this._element.currentTime=0}catch(t){}}else this.interruptPlay=!0},pause:function(){this._element?this._element.pause():this.interruptPlay=!0},resume:function(){this._element?this._element.play():this.interruptPlay=!1},setVolume:function(t){this._element&&(this._element.volume=t)},getVolume:function(){if(this._element)return this._element.volume},cloneNode:function(){var t=new cc.Audio(this.src);if("AUDIO"===this._AUDIO_TYPE){for(var e=document.createElement("audio"),i=e.getElementsByTagName("source"),n=0;n<i.length;n++)e.appendChild(i[n]);e.src=this.src,t.setElement(e)}else t.setBuffer(this._element.buffer);return t}}),cc.Audio.touchPlayList=[],cc.Audio.bindTouch=!1,cc.Audio.touchStart=function(){for(var t=cc.Audio.touchPlayList,e=null;e=t.pop();)e.audio.loop=!!e.loop,e.audio.play(e.offset)},cc.Audio.WebAudio=function(t){this.buffer=t,this.context=cc.Audio._context,(t=this.context.createGain()).gain.value=1,t.connect(this.context.destination),this._volume=t,this._loop=!1,this._startTime=-1,this._currentSource=null,this.playedLength=0,this._currextTimer=null},cc.Audio.WebAudio.prototype={constructor:cc.Audio.WebAudio,get paused(){return(!this._currentSource||!this._currentSource.loop)&&(-1===this._startTime||this.context.currentTime-this._startTime>this.buffer.duration)},set paused(t){},get loop(){return this._loop},set loop(t){return this._loop=t},get volume(){return this._volume.gain.value},set volume(t){return this._volume.gain.value=t},get currentTime(){return this.playedLength},set currentTime(t){return this.playedLength=t},play:function(t){this._currentSource&&!this.paused&&(this._currentSource.stop(0),this.playedLength=0);var e=this.context.createBufferSource();e.buffer=this.buffer,e.connect(this._volume),e.loop=this._loop,this._startTime=this.context.currentTime,t=t||this.playedLength;var i=this.buffer.duration;if(this._loop?e.start?e.start(0):e.notoGrainOn?e.noteGrainOn(0):e.noteOn(0):e.start?e.start(0,t,i-t):e.notoGrainOn?e.noteGrainOn(0,t,i-t):e.noteOn(0,t,i-t),this._currentSource=e,0===this.context.currentTime){var n=this;clearTimeout(this._currextTimer),this._currextTimer=setTimeout((function(){0===n.context.currentTime&&cc.Audio.touchPlayList.push({offset:t,audio:n})}),10)}},pause:function(){this.playedLength=this.context.currentTime-this._startTime,this.playedLength%=this.buffer.duration;var t=this._currentSource;this._currentSource=null,this._startTime=-1,t&&t.stop(0)}},function(t){var e=t.WEB_AUDIO,i=t.ONLY_ONE,n=[];!function(){var t=document.createElement("audio");if(t.canPlayType){var e=t.canPlayType('audio/ogg; codecs="vorbis"');e&&""!==e&&n.push(".ogg"),(e=t.canPlayType("audio/mpeg"))&&""!==e&&n.push(".mp3"),(e=t.canPlayType('audio/wav; codecs="1"'))&&""!==e&&n.push(".wav"),(e=t.canPlayType("audio/mp4"))&&""!==e&&n.push(".mp4"),(t=t.canPlayType("audio/x-m4a"))&&""!==t&&n.push(".m4a")}}();try{if(e){var s=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext);if(cc.Audio._context=s,!(s.createBufferSource&&s.createGain&&s.destination&&s.decodeAudioData))throw"context is incomplete";t.DELAY_CREATE_CTX&&setTimeout((function(){s=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext),cc.Audio._context=s}),0)}}catch(t){e=!1,cc.log("browser don't support web audio")}var r={cache:{},useWebAudio:!0,loadBuffer:function(t,i){if(e){var n=cc.loader.getXMLHttpRequest();n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){0<=n._timeoutId&&clearTimeout(n._timeoutId),s.decodeAudioData(n.response,(function(t){i(null,t)}),(function(){i("decode error - "+t)}))},n.onerror=function(){i("request error - "+t)},void 0===n.ontimeout&&(n._timeoutId=setTimeout((function(){n.ontimeout()}),n.timeout)),n.ontimeout=function(){i("request timeout - "+t)},n.send()}},load:function(t,e,i,s){if(0===n.length)return s("can not support audio!");var r=cc.loader.getRes(e);if(r)return s(null,r);cc.loader.audioPath&&(t=cc.path.join(cc.loader.audioPath,t)),i=[r=cc.path.extname(t)];for(var o=0;o<n.length;o++)r!==n[o]&&i.push(n[o]);return r=new cc.Audio(t),cc.loader.cache[e]=r,this.loadAudioFromExtList(t,i,r,s),r},loadAudioFromExtList:function(i,s,r,o){if(0===s.length){var a=(a="can not found the resource of audio! Last match url is : ")+i.replace(/\.(.*)?$/,"(");return n.forEach((function(t){a+=t+"|"})),a=a.replace(/\|$/,")"),o({status:520,errorMessage:a},null)}if(e&&this.useWebAudio)this.loadBuffer(i,(function(t,e){t&&cc.log(t),e&&r.setBuffer(e),o(null,r)}));else{for(var c=t.ONE_SOURCE?1:s.length,h=document.createElement("audio"),l=0;l<c;l++){var u=document.createElement("source");u.src=cc.path.changeExtname(i,s[l]),h.appendChild(u)}r.setElement(h);var d=setTimeout((function(){0===h.readyState?g():_()}),8e3),_=function(){h.removeEventListener("canplaythrough",_,!1),h.removeEventListener("error",g,!1),h.removeEventListener("emptied",_,!1),t.USE_LOADER_EVENT&&h.removeEventListener(t.USE_LOADER_EVENT,_,!1),clearTimeout(d),o(null,r)},g=function(){cc.log("load audio failure - "+i),_()};h.addEventListener("canplaythrough",_,!1),h.addEventListener("error",g,!1),t.USE_LOADER_EVENT&&h.addEventListener(t.USE_LOADER_EVENT,_,!1)}}};cc.loader.register(["mp3","ogg","wav","mp4","m4a"],r),cc.audioEngine={_currMusic:null,_musicVolume:1,features:t,willPlayMusic:function(){return!1},playMusic:function(t,e){var i=this._currMusic;i&&i.getPlaying()&&i.stop();var n=this._musicVolume,s=cc.loader.getRes(t);s||(cc.loader.load(t,(function(){s.getPlaying()||s.interruptPlay||(s.setVolume(n),s.play(0,e||!1))})),s=cc.loader.getRes(t)),s.setVolume(n),s.play(0,e||!1),this._currMusic=s},stopMusic:function(t){var e=this._currMusic;if(e){for(var i=cc.Audio.touchPlayList,n=i.length-1;0<=n;--n)this[n]&&this[n].audio===e._element&&i.splice(n,1);e.stop(),this._currMusic=null,t&&cc.loader.release(e.src)}},pauseMusic:function(){var t=this._currMusic;t&&t.pause()},resumeMusic:function(){var t=this._currMusic;t&&t.resume()},rewindMusic:function(){var t=this._currMusic;t&&(t.stop(),t.play())},getMusicVolume:function(){return this._musicVolume},setMusicVolume:function(t){t-=0,isNaN(t)&&(t=1),1<t&&(t=1),0>t&&(t=0),this._musicVolume=t;var e=this._currMusic;e&&e.setVolume(t)},isMusicPlaying:function(){var t=this._currMusic;return!!t&&t.getPlaying()},_audioPool:{},_maxAudioInstance:10,_effectVolume:1,playEffect:function(t,n){if(i&&this._currMusic&&this._currMusic.getPlaying())return cc.log("Browser is only allowed to play one audio"),null;var s,o=this._audioPool[t];o||(o=this._audioPool[t]=[]);for(var a=0;a<o.length&&o[a].getPlaying();a++);if(!e&&a>this._maxAudioInstance&&((a=o.shift()).stop(),o.push(a),a=o.length-1),o[a])return(s=o[a]).setVolume(this._effectVolume),s.play(0,n||!1),s;if((s=cc.loader.getRes(t))&&e&&"AUDIO"===s._AUDIO_TYPE&&(cc.loader.release(t),s=null),s){if(!e||"AUDIO"!==s._AUDIO_TYPE)return(s=s.cloneNode()).setVolume(this._effectVolume),s.play(0,n||!1),o.push(s),s;r.loadBuffer(t,(function(t,e){s.setBuffer(e),s.setVolume(cc.audioEngine._effectVolume),s.getPlaying()||s.play(0,n||!1)}))}return a=r.useWebAudio,r.useWebAudio=!0,cc.loader.load(t,(function(e){(e=(e=cc.loader.getRes(t)).cloneNode()).setVolume(cc.audioEngine._effectVolume),e.play(0,n||!1),o.push(e)})),r.useWebAudio=a,s},setEffectsVolume:function(t){t-=0,isNaN(t)&&(t=1),1<t&&(t=1),0>t&&(t=0),this._effectVolume=t;var e,i=this._audioPool;for(e in i){var n=i[e];if(Array.isArray(n))for(var s=0;s<n.length;s++)n[s].setVolume(t)}},getEffectsVolume:function(){return this._effectVolume},pauseEffect:function(t){t&&t.pause()},pauseAllEffects:function(){var t,e=this._audioPool;for(t in e)for(var i=e[t],n=0;n<e[t].length;n++)i[n].getPlaying()&&i[n].pause()},resumeEffect:function(t){t&&t.resume()},resumeAllEffects:function(){var t,e=this._audioPool;for(t in e)for(var i=e[t],n=0;n<e[t].length;n++)i[n].resume()},stopEffect:function(t){t&&t.stop()},stopAllEffects:function(){var t,e=this._audioPool;for(t in e){for(var i=e[t],n=0;n<i.length;n++)i[n].stop();i.length=0}e.length=0},unloadEffect:function(t){if(t){cc.loader.release(t);var e=this._audioPool[t];if(e){for(var i=0;i<e.length;i++)e[i].stop();e.length=0}delete this._audioPool[t]}},end:function(){this.stopMusic(),this.stopAllEffects()},_pauseCache:[],_pausePlaying:function(){(e=this._currMusic)&&e.getPlaying()&&(e.pause(),this._pauseCache.push(e));var t,e=this._audioPool;for(t in e)for(var i=e[t],n=0;n<e[t].length;n++)i[n].getPlaying()&&(i[n].pause(),this._pauseCache.push(i[n]))},_resumePlaying:function(){for(var t=this._pauseCache,e=0;e<t.length;e++)t[e].resume();t.length=0}}}(window.__audioSupport),cc.CONTROL_EVENT_TOTAL_NUMBER=9,cc.CONTROL_EVENT_TOUCH_DOWN=1,cc.CONTROL_EVENT_TOUCH_DRAG_INSIDE=2,cc.CONTROL_EVENT_TOUCH_DRAG_OUTSIDE=4,cc.CONTROL_EVENT_TOUCH_DRAG_ENTER=8,cc.CONTROL_EVENT_TOUCH_DRAG_EXIT=16,cc.CONTROL_EVENT_TOUCH_UP_INSIDE=32,cc.CONTROL_EVENT_TOUCH_UP_OUTSIDE=64,cc.CONTROL_EVENT_TOUCH_CANCEL=128,cc.CONTROL_EVENT_VALUECHANGED=256,cc.CONTROL_STATE_NORMAL=1,cc.CONTROL_STATE_HIGHLIGHTED=2,cc.CONTROL_STATE_DISABLED=4,cc.CONTROL_STATE_SELECTED=8,cc.CONTROL_STATE_INITIAL=8,cc.Control=cc.Layer.extend({_isOpacityModifyRGB:!1,_hasVisibleParents:!1,_touchListener:null,_className:"Control",isOpacityModifyRGB:function(){return this._isOpacityModifyRGB},setOpacityModifyRGB:function(t){this._isOpacityModifyRGB=t;for(var e=this.getChildren(),i=0,n=e.length;i<n;i++){var s=e[i];s&&s.setOpacityModifyRGB(t)}},_state:cc.CONTROL_STATE_NORMAL,getState:function(){return this._state},_enabled:!1,_selected:!1,_highlighted:!1,_dispatchTable:null,setEnabled:function(t){this._state=(this._enabled=t)?cc.CONTROL_STATE_NORMAL:cc.CONTROL_STATE_DISABLED,this.needsLayout()},isEnabled:function(){return this._enabled},setSelected:function(t){this._selected=t,this.needsLayout()},isSelected:function(){return this._selected},setHighlighted:function(t){this._highlighted=t,this.needsLayout()},isHighlighted:function(){return this._highlighted},hasVisibleParents:function(){for(var t=this.getParent();null!=t;t=t.getParent())if(!t.isVisible())return!1;return!0},ctor:function(){cc.Layer.prototype.ctor.call(this),this._dispatchTable={},this._color=cc.color.WHITE},init:function(){this._state=cc.CONTROL_STATE_NORMAL,this._enabled=!0,this._highlighted=this._selected=!1;var t=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0});return this.onTouchBegan&&(t.onTouchBegan=this.onTouchBegan.bind(this)),this.onTouchMoved&&(t.onTouchMoved=this.onTouchMoved.bind(this)),this.onTouchEnded&&(t.onTouchEnded=this.onTouchEnded.bind(this)),this.onTouchCancelled&&(t.onTouchCancelled=this.onTouchCancelled.bind(this)),this._touchListener=t,!0},onEnter:function(){var t=this._touchListener;t._isRegistered()||cc.eventManager.addListener(t,this),cc.Node.prototype.onEnter.call(this)},sendActionsForControlEvents:function(t){for(var e=0,i=cc.CONTROL_EVENT_TOTAL_NUMBER;e<i;e++)if(t&1<<e)for(var n=this._dispatchListforControlEvent(1<<e),s=0,r=n.length;s<r;s++)n[s].invoke(this)},addTargetWithActionForControlEvents:function(t,e,i){for(var n=0,s=cc.CONTROL_EVENT_TOTAL_NUMBER;n<s;n++)i&1<<n&&this._addTargetWithActionForControlEvent(t,e,1<<n)},removeTargetWithActionForControlEvents:function(t,e,i){for(var n=0,s=cc.CONTROL_EVENT_TOTAL_NUMBER;n<s;n++)i&1<<n&&this._removeTargetWithActionForControlEvent(t,e,1<<n)},getTouchLocation:function(t){return t=t.getLocation(),this.convertToNodeSpace(t)},isTouchInside:function(t){return t=t.getLocation(),t=this.getParent().convertToNodeSpace(t),cc.rectContainsPoint(this.getBoundingBox(),t)},_invocationWithTargetAndActionForControlEvent:function(t,e,i){return null},_dispatchListforControlEvent:function(t){return t=t.toString(),this._dispatchTable[t]||(this._dispatchTable[t]=[]),this._dispatchTable[t]},_addTargetWithActionForControlEvent:function(t,e,i){t=new cc.Invocation(t,e,i),this._dispatchListforControlEvent(i).push(t)},_removeTargetWithActionForControlEvent:function(t,e,i){if(i=this._dispatchListforControlEvent(i),t||e)for(var n=0;n<i.length;){var s=i[n],r=!0;t&&(r=t===s.getTarget()),e&&(r=r&&e===s.getAction()),r?cc.arrayRemoveObject(i,s):n++}else i.length=0},needsLayout:function(){}}),_p=cc.Control.prototype,cc.defineGetterSetter(_p,"state",_p.getState),cc.defineGetterSetter(_p,"enabled",_p.isEnabled,_p.setEnabled),cc.defineGetterSetter(_p,"selected",_p.isSelected,_p.setSelected),cc.defineGetterSetter(_p,"highlighted",_p.isHighlighted,_p.setHighlighted),_p=null,cc.Control.create=function(){var t=new cc.Control;return t&&t.init()?t:null},cc.CONTROL_ZOOM_ACTION_TAG=3435855873,cc.ControlButton=cc.Control.extend({_doesAdjustBackgroundImage:!1,zoomOnTouchDown:!1,_preferredSize:null,_labelAnchorPoint:null,_currentTitle:null,_currentTitleColor:null,_titleLabel:null,_backgroundSprite:null,_opacity:0,_isPushed:!1,_titleDispatchTable:null,_titleColorDispatchTable:null,_titleLabelDispatchTable:null,_backgroundSpriteDispatchTable:null,_parentInited:!1,_marginV:0,_marginH:0,_className:"ControlButton",ctor:function(t,e,i){cc.Control.prototype.ctor.call(this),this._preferredSize=cc.size(0,0),this._labelAnchorPoint=cc.p(0,0),this._currentTitle="",this._currentTitleColor=cc.color.WHITE,this._titleDispatchTable={},this._titleColorDispatchTable={},this._titleLabelDispatchTable={},this._backgroundSpriteDispatchTable={},null!=i?this.initWithTitleAndFontNameAndFontSize(t,e,i):null!=e?this.initWithLabelAndBackgroundSprite(t,e):null!=t?this.initWithBackgroundSprite(t):this.init()},init:function(){return this.initWithLabelAndBackgroundSprite(new cc.LabelTTF("","Arial",12),new cc.Scale9Sprite)},needsLayout:function(){if(this._parentInited){this._titleLabel&&this._titleLabel.setVisible(!1),this._backgroundSprite&&this._backgroundSprite.setVisible(!1),this.setLabelAnchorPoint(this._labelAnchorPoint);var t=this._state;this._currentTitle=this.getTitleForState(t),this._currentTitleColor=this.getTitleColorForState(t);var e=this._titleLabel=this.getTitleLabelForState(t);e&&e.setString&&e.setString(this._currentTitle),e&&e.setColor(this._currentTitleColor);var i=this.getContentSize();if(e&&e.setPosition(i.width/2,i.height/2),(t=this._backgroundSprite=this.getBackgroundSpriteForState(t))&&t.setPosition(i.width/2,i.height/2),i=cc.size(0,0),e){var n=e.getBoundingBox();i.width=n.width,i.height=n.height}this._doesAdjustBackgroundImage?t&&t.setContentSize(i.width+2*this._marginH,i.height+2*this._marginV):t&&(n=t.getPreferredSize(),0>=(n=cc.size(n.width,n.height)).width&&(n.width=i.width),0>=n.height&&(n.height=i.height),t.setContentSize(n)),i=e?e.getBoundingBox():cc.rect(0,0,0,0),n=t?t.getBoundingBox():cc.rect(0,0,0,0),i=cc.rectUnion(i,n),this.setContentSize(i.width,i.height),i=this.getContentSize(),e&&(e.setPosition(i.width/2,i.height/2),e.setVisible(!0)),t&&(t.setPosition(i.width/2,i.height/2),t.setVisible(!0))}},initWithLabelAndBackgroundSprite:function(t,e){if(!t)throw Error("cc.ControlButton.initWithLabelAndBackgroundSprite(): label should be non-null");if(!e)throw Error("cc.ControlButton.initWithLabelAndBackgroundSprite(): backgroundSprite should be non-null");if(cc.Control.prototype.init.call(this,!0)){this._parentInited=!0,this._titleDispatchTable={},this._titleColorDispatchTable={},this._titleLabelDispatchTable={},this._backgroundSpriteDispatchTable={},this._isPushed=!1,this.zoomOnTouchDown=!0,this._currentTitle=null,this.setAdjustBackgroundImage(!0),this.setPreferredSize(cc.size(0,0)),this.zoomOnTouchDown=!0,this.ignoreAnchorPointForPosition(!1),this.setAnchorPoint(.5,.5),this._titleLabel=t,this._backgroundSprite=e,this.setOpacity(255),this.setOpacityModifyRGB(!0);var i=t.getString();return this.setTitleForState(i,cc.CONTROL_STATE_NORMAL),this.setTitleColorForState(t.getColor(),cc.CONTROL_STATE_NORMAL),this.setTitleLabelForState(t,cc.CONTROL_STATE_NORMAL),this.setBackgroundSpriteForState(e,cc.CONTROL_STATE_NORMAL),this._state=cc.CONTROL_STATE_NORMAL,this._marginH=24,this._marginV=12,this._labelAnchorPoint=cc.p(.5,.5),this.setPreferredSize(cc.size(0,0)),this.needsLayout(),!0}return!1},initWithTitleAndFontNameAndFontSize:function(t,e,i){return t=new cc.LabelTTF(t,e,i),this.initWithLabelAndBackgroundSprite(t,new cc.Scale9Sprite)},initWithBackgroundSprite:function(t){var e=new cc.LabelTTF("","Arial",30);return this.initWithLabelAndBackgroundSprite(e,t)},doesAdjustBackgroundImage:function(){return this._doesAdjustBackgroundImage},setAdjustBackgroundImage:function(t){this._doesAdjustBackgroundImage=t,this.needsLayout()},getZoomOnTouchDown:function(){return this.zoomOnTouchDown},setZoomOnTouchDown:function(t){return this.zoomOnTouchDown=t},getPreferredSize:function(){return this._preferredSize},setPreferredSize:function(t){if(0===t.width&&0===t.height)this._doesAdjustBackgroundImage=!0;else{this._doesAdjustBackgroundImage=!1;var e,i=this._backgroundSpriteDispatchTable;for(e in i)i[e].setPreferredSize(t)}this._preferredSize=t,this.needsLayout()},getLabelAnchorPoint:function(){return this._labelAnchorPoint},setLabelAnchorPoint:function(t){this._labelAnchorPoint=t,this._titleLabel&&this._titleLabel.setAnchorPoint(t)},_getCurrentTitle:function(){return this._currentTitle},_getCurrentTitleColor:function(){return this._currentTitleColor},getOpacity:function(){return this._opacity},setOpacity:function(t){cc.Control.prototype.setOpacity.call(this,t);var e,i=this._backgroundSpriteDispatchTable;for(e in i)i[e].setOpacity(t)},setColor:function(t){cc.Control.prototype.setColor.call(this,t);var e,i=this._backgroundSpriteDispatchTable;for(e in i)i[e].setColor(t)},getColor:function(){var t=this._realColor;return cc.color(t.r,t.g,t.b,t.a)},isPushed:function(){return this._isPushed},_getVerticalMargin:function(){return this._marginV},_getHorizontalOrigin:function(){return this._marginH},setMargins:function(t,e){this._marginV=e,this._marginH=t,this.needsLayout()},setEnabled:function(t){cc.Control.prototype.setEnabled.call(this,t),this.needsLayout()},setSelected:function(t){cc.Control.prototype.setSelected.call(this,t),this.needsLayout()},setHighlighted:function(t){this._state=t?cc.CONTROL_STATE_HIGHLIGHTED:cc.CONTROL_STATE_NORMAL,cc.Control.prototype.setHighlighted.call(this,t),(t=this.getActionByTag(cc.CONTROL_ZOOM_ACTION_TAG))&&this.stopAction(t),this.zoomOnTouchDown&&(t=this.isHighlighted()&&this.isEnabled()&&!this.isSelected()?1.1:1,(t=cc.scaleTo(.05,t)).setTag(cc.CONTROL_ZOOM_ACTION_TAG),this.runAction(t))},onTouchBegan:function(t,e){return!!(this.isTouchInside(t)&&this.isEnabled()&&this.isVisible()&&this.hasVisibleParents())&&(this._isPushed=!0,this.setHighlighted(!0),this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DOWN),!0)},onTouchMoved:function(t,e){if(this._enabled&&this._isPushed&&!this._selected){var i=this.isTouchInside(t);i&&!this._highlighted?(this.setHighlighted(!0),this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_ENTER)):i&&this._highlighted?this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_INSIDE):!i&&this._highlighted?(this.setHighlighted(!1),this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_EXIT)):i||this._highlighted||this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_OUTSIDE)}else this._highlighted&&this.setHighlighted(!1)},onTouchEnded:function(t,e){this._isPushed=!1,this.setHighlighted(!1),this.isTouchInside(t)?this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_UP_INSIDE):this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_UP_OUTSIDE)},onTouchCancelled:function(t,e){this._isPushed=!1,this.setHighlighted(!1),this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_CANCEL)},getTitleForState:function(t){var e=this._titleDispatchTable;return e?e[t]?e[t]:e[cc.CONTROL_STATE_NORMAL]:""},setTitleForState:function(t,e){this._titleDispatchTable[e]=t||"",this.getState()===e&&this.needsLayout()},getTitleColorForState:function(t){return(t=this._titleColorDispatchTable[t])||(t=this._titleColorDispatchTable[cc.CONTROL_STATE_NORMAL])?t:cc.color.WHITE},setTitleColorForState:function(t,e){this._titleColorDispatchTable[e]=t,this.getState()===e&&this.needsLayout()},getTitleLabelForState:function(t){var e=this._titleLabelDispatchTable;return e[t]?e[t]:e[cc.CONTROL_STATE_NORMAL]},setTitleLabelForState:function(t,e){var i=this._titleLabelDispatchTable;if(i[e]){var n=i[e];n&&this.removeChild(n,!0)}i[e]=t,t.setVisible(!1),t.setAnchorPoint(.5,.5),this.addChild(t,1),this.getState()===e&&this.needsLayout()},setTitleTTFForState:function(t,e){var i=this.getTitleForState(e);i||(i=""),this.setTitleLabelForState(new cc.LabelTTF(i,t,12),e)},getTitleTTFForState:function(t){return null!=(t=this.getTitleLabelForState(t))&&t instanceof cc.LabelTTF?t.getFontName():""},setTitleTTFSizeForState:function(t,e){var i=this.getTitleLabelForState(e);null!=i&&i instanceof cc.LabelTTF&&i.setFontSize(t)},getTitleTTFSizeForState:function(t){return null!=(t=this.getTitleLabelForState(t))&&t instanceof cc.LabelTTF?t.getFontSize():0},setTitleBMFontForState:function(t,e){var i=this.getTitleForState(e);i||(i=""),this.setTitleLabelForState(new cc.LabelBMFont(i,t),e)},getTitleBMFontForState:function(t){return null!=(t=this.getTitleLabelForState(t))&&t instanceof cc.LabelBMFont?t.getFntFile():""},getBackgroundSpriteForState:function(t){var e=this._backgroundSpriteDispatchTable;return e[t]?e[t]:e[cc.CONTROL_STATE_NORMAL]},setBackgroundSpriteForState:function(t,e){var i=this._backgroundSpriteDispatchTable;if(i[e]){var n=i[e];n&&this.removeChild(n,!0)}i[e]=t,t.setVisible(!1),t.setAnchorPoint(.5,.5),this.addChild(t),0===(i=this._preferredSize).width&&0===i.height||t.setPreferredSize(i),this._state===e&&this.needsLayout()},setBackgroundSpriteFrameForState:function(t,e){var i=cc.Scale9Sprite.createWithSpriteFrame(t);this.setBackgroundSpriteForState(i,e)}}),_p=cc.ControlButton.prototype,cc.defineGetterSetter(_p,"adjustBackground",_p.getAdjustBackgroundImage,_p.setAdjustBackgroundImage),cc.defineGetterSetter(_p,"preferredSize",_p.getPreferredSize,_p.setPreferredSize),cc.defineGetterSetter(_p,"labelAnchor",_p.getLabelAnchorPoint,_p.setLabelAnchorPoint),_p=null,cc.ControlButton.create=function(t,e,i){return new cc.ControlButton(t,e,i)},cc.RGBA=function(t,e,i,n){this.r=t,this.g=e,this.b=i,this.a=n},cc.HSV=function(t,e,i){this.h=t,this.s=e,this.v=i},cc.ControlUtils={},cc.ControlUtils.addSpriteToTargetWithPosAndAnchor=function(t,e,i,n){return(t=new cc.Sprite("#"+t))?(t.setPosition(i),t.setAnchorPoint(n),e.addChild(t),t):null},cc.ControlUtils.HSVfromRGB=function(t){var e,i,n=new cc.HSV;return e=(e=t.r<t.g?t.r:t.g)<t.b?e:t.b,i=(i=t.r>t.g?t.r:t.g)>t.b?i:t.b,n.v=i,e=i-e,0<i?(n.s=e/i,n.h=t.r>=i?(t.g-t.b)/e:t.g>=i?2+(t.b-t.r)/e:4+(t.r-t.g)/e,n.h*=60,0>n.h&&(n.h+=360),n):(n.s=0,n.h=-1,n)},cc.ControlUtils.RGBfromHSV=function(t){var e,i,n,s,r=new cc.RGBA;if(r.a=1,0>=t.s)return t.h?(r.r=0,r.g=0,r.b=0,r):(r.r=t.v,r.g=t.v,r.b=t.v,r);switch(360<=(e=t.h)&&(e=0),n=(e/=60)-(s=0|e),e=t.v*(1-t.s),i=t.v*(1-t.s*n),n=t.v*(1-t.s*(1-n)),s){case 0:r.r=t.v,r.g=n,r.b=e;break;case 1:r.r=i,r.g=t.v,r.b=e;break;case 2:r.r=e,r.g=t.v,r.b=n;break;case 3:r.r=e,r.g=i,r.b=t.v;break;case 4:r.r=n,r.g=e,r.b=t.v;break;default:r.r=t.v,r.g=e,r.b=i}return r},cc.ControlUtils.CCRectUnion=function(t,e){return cc.rectUnion(t,e)},cc.Invocation=cc.Class.extend({_action:null,_target:null,_controlEvent:null,ctor:function(t,e,i){this._target=t,this._action=e,this._controlEvent=i},getAction:function(){return this._action},getTarget:function(){return this._target},getControlEvent:function(){return this._controlEvent},invoke:function(t){this._target&&this._action&&(cc.isString(this._action)?this._target[this._action](t,this._controlEvent):this._action.call(this._target,t,this._controlEvent))}}),cc.Spacer=cc.Layer.extend({}),cc.Spacer.verticalSpacer=function(t){var e=new cc.Spacer;return e.init(),e.setContentSize(0,t),e};cc.Spacer.horizontalSpacer=function(t){var e=new cc.Spacer;return e.init(),e.setContentSize(t,0),e},cc.MenuPassive=cc.Layer.extend({_color:null,_opacity:0,_className:"MenuPassive",ctor:function(){},getColor:function(){var t=this._color;return cc.color(t.r,t.g,t.b,t.a)},setColor:function(t){var e=this._color;if(e.r=t.r,e.g=t.g,e.b=t.b,this._children&&0<this._children.length)for(e=0;e<this._children.length;e++)this._children[e]&&this._children[e].setColor(t);void 0===t.a||t.a_undefined||this.setOpacity(t.a)},getOpacity:function(){return this._opacity},setOpacity:function(t){if(this._opacity=t,this._children&&0<this._children.length)for(var e=0;e<this._children.length;e++)this._children[e]&&this._children[e].setOpacity(t);this._color.a=t},initWithItems:function(t,e){if(this.init()){var i=cc.director.getWinSize();if(this.ignoreAnchorPointForPosition(!0),this.setAnchorPoint(.5,.5),this.setContentSize(i),this.setPosition(i.width/2,i.height/2),i=0,t){this.addChild(t,i);for(var n=0;n<e.length;n++)e[n]&&(i++,this.addChild(e[n],i))}return!0}return!1},alignItemsVertically:function(){this.alignItemsVerticallyWithPadding(cc.DEFAULT_PADDING)},alignItemsVerticallyWithPadding:function(t){var e,i=-t;if(this._children&&0<this._children.length)for(e=0;e<this._children.length;e++)this._children[e]&&(i+=this._children[e].getContentSize().height*this._children[e].getScaleY()+t);var n=0,s=i/2;if(this._children&&0<this._children.length)for(e=0;e<this._children.length;e++)this._children[e]&&(n=Math.max(n,this._children[e].getContentSize().width),this._children[e].setPosition(0,s-this._children[e].getContentSize().height*this._children[e].getScaleY()/2),s-=this._children[e].getContentSize().height*this._children[e].getScaleY()+t);this.setContentSize(n,i)},alignItemsHorizontally:function(){this.alignItemsHorizontallyWithPadding(cc.DEFAULT_PADDING)},alignItemsHorizontallyWithPadding:function(t){var e,i=-t;if(this._children&&0<this._children.length)for(e=0;e<this._children.length;e++)this._children[e]&&(i+=this._children[e].getContentSize().width*this._children[e].getScaleX()+t);var n=0,s=-i/2;if(this._children&&0<this._children.length)for(e=0;e<this._children.length;e++)this._children[e]&&(n=Math.max(n,this._children[e].getContentSize().height),this._children[e].setPosition(s+this._children[e].getContentSize().width*this._children[e].getScaleX()/2,0),s+=this._children[e].getContentSize().width*this._children[e].getScaleX()+t);this.setContentSize(i,n)},alignItemsInColumns:function(t){var e,i=[];for(e=1;e<arguments.length;e++)i.push(arguments[e]);var n,s,r=-5,o=0,a=0,c=0;if(this._children&&0<this._children.length)for(e=0;e<this._children.length;e++)this._children[e]&&(o>=i.length?cc.log("cc.MenuPassive.alignItemsInColumns(): invalid row index"):(n=i[o])?(a=0|(a>=(s=this._children[e].getContentSize().height)||null==s?a:s),++c>=n&&(r+=a+5,a=c=0,++o)):cc.log("cc.MenuPassive.alignItemsInColumns(): can not have zero columns on a row"));var h=cc.director.getWinSize(),l=n=a=o=0,u=0;r/=2;if(this._children&&0<this._children.length)for(e=0;e<this._children.length;e++)this._children[e]&&(0===n&&(n=i[o],u=l=h.width/(1+n)),a=0|(a>=(s=this._children[e].getContentSize().height)||null==s?a:s),this._children[e].setPosition(u-h.width/2,r-this._children[e].getContentSize().height/2),u+=l,++c>=n&&(r-=a+5,a=n=c=0,++o))},alignItemsInRows:function(t){var e,i=[];for(e=1;e<arguments.length;e++)i.push(arguments[e]);var n,s,r=[],o=[],a=-10,c=-5,h=0,l=0,u=0;if(this._children&&0<this._children.length)for(e=0;e<this._children.length;e++)this._children[e]&&(h>=i.length?cc.log("cc.MenuPassive.alignItemsInRows(): invalid row index"):(n=i[h])?(l=0|(l>=(s=this._children[e].getContentSize().width)||null==s?l:s),c+=0|this._children[e].getContentSize().height+5,++u>=n&&(r.push(l),o.push(c),a+=l+10,l=u=0,c=-5,++h)):cc.log("cc.MenuPassive.alignItemsInColumns(): can't have zero rows on a column"));c=cc.director.getWinSize(),l=h=0,n=null;a=-a/2;var d=0;if(this._children&&0<this._children.length)for(e=0;e<this._children.length;e++)this._children[e]&&(null==n&&(n=i[h],d=o[h]),l=0|(l>=(s=this._children[e].getContentSize().width)||null==s?l:s),this._children[e].setPosition(a+r[h]/2,d-c.height/2),d-=this._children[e].getContentSize().height+10,++u>=n&&(a+=l+5,l=n=u=0,++h))},setOpacityModifyRGB:function(t){},isOpacityModifyRGB:function(){return!1}}),cc.MenuPassive.create=function(t){t||(t=null);for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);return(i=new cc.MenuPassive)&&i.initWithItems(t,e)?i:null},cc.MenuPassive.createWithItem=function(t){return cc.MenuPassive.create(t,null)},cc.ControlSaturationBrightnessPicker=cc.Control.extend({_saturation:0,_brightness:0,_background:null,_overlay:null,_shadow:null,_slider:null,_startPos:null,_boxPos:0,_boxSize:0,_className:"ControlSaturationBrightnessPicker",ctor:function(t,e){cc.Control.prototype.ctor.call(this),e&&this.initWithTargetAndPos(t,e)},getSaturation:function(){return this._saturation},getBrightness:function(){return this._brightness},getBackground:function(){return this._background},getOverlay:function(){return this._brightness},getShadow:function(){return this._shadow},getSlider:function(){return this._slider},getStartPos:function(){return this._startPos},initWithTargetAndPos:function(t,e){return!!cc.Control.prototype.init.call(this)&&(this._background=cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("colourPickerBackground.png",t,e,cc.p(0,0)),this._overlay=cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("colourPickerOverlay.png",t,e,cc.p(0,0)),this._shadow=cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("colourPickerShadow.png",t,e,cc.p(0,0)),this._slider=cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("colourPicker.png",t,e,cc.p(.5,.5)),this._startPos=e,this._boxPos=35,this._boxSize=this._background.getContentSize().width/2,!0)},setEnabled:function(t){cc.Control.prototype.setEnabled.call(this,t),this._slider&&this._slider.setOpacity(t?255:128)},updateWithHSV:function(t){var e=new cc.HSV;e.s=1,e.h=t.h,e.v=1,t=cc.ControlUtils.RGBfromHSV(e),this._background.setColor(cc.color(0|255*t.r,0|255*t.g,0|255*t.b))},updateDraggerWithHSV:function(t){t=cc.p(this._startPos.x+this._boxPos+this._boxSize*(1-t.s),this._startPos.y+this._boxPos+this._boxSize*t.v),this._updateSliderPosition(t)},_updateSliderPosition:function(t){var e=this._startPos.x+.5*this._background.getBoundingBox().width,i=this._startPos.y+.5*this._background.getBoundingBox().height,n=t.x-e,s=t.y-i,r=Math.sqrt(n*n+s*s);n=Math.atan2(s,n);r>(s=.5*this._background.getBoundingBox().width)&&(t.x=e+s*Math.cos(n),t.y=i+s*Math.sin(n)),this._slider.setPosition(t),t.x<this._startPos.x+this._boxPos?t.x=this._startPos.x+this._boxPos:t.x>this._startPos.x+this._boxPos+this._boxSize-1&&(t.x=this._startPos.x+this._boxPos+this._boxSize-1),t.y<this._startPos.y+this._boxPos?t.y=this._startPos.y+this._boxPos:t.y>this._startPos.y+this._boxPos+this._boxSize&&(t.y=this._startPos.y+this._boxPos+this._boxSize),this._saturation=1-Math.abs((this._startPos.x+this._boxPos-t.x)/this._boxSize),this._brightness=Math.abs((this._startPos.y+this._boxPos-t.y)/this._boxSize)},_checkSliderPosition:function(t){var e=this._startPos.x+.5*this._background.getBoundingBox().width,i=this._startPos.y+.5*this._background.getBoundingBox().height;e=t.x-e,i=t.y-i;return Math.sqrt(e*e+i*i)<=.5*this._background.getBoundingBox().width&&(this._updateSliderPosition(t),this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED),!0)},onTouchBegan:function(t,e){if(!this.isEnabled()||!this.isVisible())return!1;var i=this.getTouchLocation(t);return this._checkSliderPosition(i)},onTouchMoved:function(t,e){var i=this.getTouchLocation(t);this._checkSliderPosition(i)}}),_p=cc.ControlSaturationBrightnessPicker.prototype,cc.defineGetterSetter(_p,"saturation",_p.getSaturation),cc.defineGetterSetter(_p,"brightness",_p.getBrightness),cc.defineGetterSetter(_p,"background",_p.getBackground),cc.defineGetterSetter(_p,"overlay",_p.getOverlay),cc.defineGetterSetter(_p,"shadow",_p.getShadow),cc.defineGetterSetter(_p,"slider",_p.getSlider),cc.defineGetterSetter(_p,"startPos",_p.getStartPos),_p=null,cc.ControlSaturationBrightnessPicker.create=function(t,e){return new cc.ControlSaturationBrightnessPicker(t,e)},cc.ControlHuePicker=cc.Control.extend({_hue:0,_huePercentage:0,_background:null,_slider:null,_startPos:null,_className:"ControlHuePicker",ctor:function(t,e){cc.Control.prototype.ctor.call(this),e&&this.initWithTargetAndPos(t,e)},getHue:function(){return this._hue},setHue:function(t){this._hue=t,this.setHuePercentage(this._hue/360)},getHuePercentage:function(){return this._huePercentage},setHuePercentage:function(t){this._huePercentage=t,this._hue=360*this._huePercentage;var e=this._background.getBoundingBox(),i=this._startPos.x+.5*e.width;t=this._startPos.y+.5*e.height;e=.5*e.width-15;var n=cc.degreesToRadians(360*this._huePercentage-180);i+=e*Math.cos(n);t+=e*Math.sin(n),this._slider.setPosition(i,t)},setEnabled:function(t){cc.Control.prototype.setEnabled.call(this,t),this._slider&&this._slider.setOpacity(t?255:128)},getBackground:function(){return this._background},getSlider:function(){return this._slider},getStartPos:function(){return this._startPos},initWithTargetAndPos:function(t,e){return!!cc.Control.prototype.init.call(this)&&(this._background=cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("huePickerBackground.png",t,e,cc.p(0,0)),this._slider=cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("colourPicker.png",t,e,cc.p(.5,.5)),this._slider.setPosition(e.x,e.y+.5*this._background.getBoundingBox().height),this._startPos=e,this._huePercentage=this._hue=0,!0)},_updateSliderPosition:function(t){var e=this._background.getBoundingBox();t=Math.atan2(t.y-(this._startPos.y+.5*e.height),t.x-(this._startPos.x+.5*e.width)),t=cc.radiansToDegrees(t)+180,this.setHue(t),this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)},_checkSliderPosition:function(t){var e=Math.sqrt(Math.pow(t.x+10,2)+Math.pow(t.y,2));return 80>e&&59<e&&(this._updateSliderPosition(t),!0)},onTouchBegan:function(t,e){if(!this.isEnabled()||!this.isVisible())return!1;var i=this.getTouchLocation(t);return this._checkSliderPosition(i)},onTouchMoved:function(t,e){var i=this.getTouchLocation(t);this._checkSliderPosition(i)}}),_p=cc.ControlHuePicker.prototype,cc.defineGetterSetter(_p,"hue",_p.getHue,_p.setHue),cc.defineGetterSetter(_p,"huePercent",_p.getHuePercentage,_p.setHuePercentage),cc.defineGetterSetter(_p,"background",_p.getBackground),cc.defineGetterSetter(_p,"slider",_p.getSlider),cc.defineGetterSetter(_p,"startPos",_p.getStartPos),_p=null,cc.ControlHuePicker.create=function(t,e){return new cc.ControlHuePicker(t,e)},cc.ControlColourPicker=cc.Control.extend({_hsv:null,_colourPicker:null,_huePicker:null,_background:null,_className:"ControlColourPicker",ctor:function(){cc.Control.prototype.ctor.call(this),this.init()},hueSliderValueChanged:function(t,e){this._hsv.h=t.getHue();var i=cc.ControlUtils.RGBfromHSV(this._hsv);cc.Control.prototype.setColor.call(this,cc.color(0|255*i.r,0|255*i.g,0|255*i.b)),this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED),this._updateControlPicker()},colourSliderValueChanged:function(t,e){this._hsv.s=t.getSaturation(),this._hsv.v=t.getBrightness();var i=cc.ControlUtils.RGBfromHSV(this._hsv);cc.Control.prototype.setColor.call(this,cc.color(0|255*i.r,0|255*i.g,0|255*i.b)),this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)},setColor:function(t){cc.Control.prototype.setColor.call(this,t);var e=new cc.RGBA;e.r=t.r/255,e.g=t.g/255,e.b=t.b/255,e.a=1,this._hsv=cc.ControlUtils.HSVfromRGB(e),this._updateHueAndControlPicker()},getBackground:function(){return this._background},init:function(){if(cc.Control.prototype.init.call(this)){cc.spriteFrameCache.addSpriteFrames(res.CCControlColourPickerSpriteSheet_plist);var t=new cc.SpriteBatchNode(res.CCControlColourPickerSpriteSheet_png);this.addChild(t),this._hsv=new cc.HSV(0,0,0),this._background=cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("menuColourPanelBackground.png",t,cc.p(0,0),cc.p(.5,.5));var e=cc.pSub(this._background.getPosition(),cc.p(this._background.getContentSize().width/2,this._background.getContentSize().height/2));return this._huePicker=new cc.ControlHuePicker(t,cc.p(e.x+8,e.y+8)),this._colourPicker=new cc.ControlSaturationBrightnessPicker(t,cc.p(e.x+28,e.y+28)),this._huePicker.addTargetWithActionForControlEvents(this,this.hueSliderValueChanged,cc.CONTROL_EVENT_VALUECHANGED),this._colourPicker.addTargetWithActionForControlEvents(this,this.colourSliderValueChanged,cc.CONTROL_EVENT_VALUECHANGED),this._updateHueAndControlPicker(),this.addChild(this._huePicker),this.addChild(this._colourPicker),this.setContentSize(this._background.getContentSize()),!0}return!1},_updateControlPicker:function(){this._huePicker.setHue(this._hsv.h),this._colourPicker.updateWithHSV(this._hsv)},_updateHueAndControlPicker:function(){this._huePicker.setHue(this._hsv.h),this._colourPicker.updateWithHSV(this._hsv),this._colourPicker.updateDraggerWithHSV(this._hsv)},setEnabled:function(t){cc.Control.prototype.setEnabled.call(this,t),null!==this._huePicker&&this._huePicker.setEnabled(t),this._colourPicker&&this._colourPicker.setEnabled(t)},onTouchBegan:function(){return!1}}),_p=cc.ControlColourPicker.prototype,cc.defineGetterSetter(_p,"background",_p.getBackground),_p=null,cc.ControlColourPicker.create=function(){return new cc.ControlColourPicker};var res=res||{};res.CCControlColourPickerSpriteSheet_plist=res.CCControlColourPickerSpriteSheet_plist||"res/extensions/CCControlColourPickerSpriteSheet.plist",res.CCControlColourPickerSpriteSheet_png=res.CCControlColourPickerSpriteSheet_png||"res/extensions/CCControlColourPickerSpriteSheet.png",cc.SLIDER_MARGIN_H=24,cc.SLIDER_MARGIN_V=8,cc.ControlSlider=cc.Control.extend({_value:0,_minimumValue:0,_maximumValue:0,_minimumAllowedValue:0,_maximumAllowedValue:0,_thumbSprite:null,_progressSprite:null,_backgroundSprite:null,_className:"ControlSlider",ctor:function(t,e,i){cc.Control.prototype.ctor.call(this),null!=i&&(t=new cc.Sprite(t),e=new cc.Sprite(e),i=new cc.Sprite(i),this.initWithSprites(t,e,i))},getValue:function(){return this._value},setValue:function(t){t=Math.max(t,this._minimumValue),this._value=t=Math.min(t,this._maximumValue),this.needsLayout(),this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)},getMinimumValue:function(){return this._minimumValue},setMinimumValue:function(t){this._minimumAllowedValue=this._minimumValue=t,this._minimumValue>=this._maximumValue&&(this._maximumValue=this._minimumValue+1),this.setValue(this._value)},getMaximumValue:function(){return this._maximumValue},setMaximumValue:function(t){this._maximumAllowedValue=this._maximumValue=t,this._maximumValue<=this._minimumValue&&(this._minimumValue=this._maximumValue-1),this.setValue(this._value)},isTouchInside:function(t){t=t.getLocation(),t=this.getParent().convertToNodeSpace(t);var e=this.getBoundingBox();return e.width+=this._thumbSprite.getContentSize().width,e.x-=this._thumbSprite.getContentSize().width/2,cc.rectContainsPoint(e,t)},locationFromTouch:function(t){return t=t.getLocation(),0>(t=this.convertToNodeSpace(t)).x?t.x=0:t.x>this._backgroundSprite.getContentSize().width&&(t.x=this._backgroundSprite.getContentSize().width),t},getMinimumAllowedValue:function(){return this._minimumAllowedValue},setMinimumAllowedValue:function(t){this._minimumAllowedValue=t},getMaximumAllowedValue:function(){return this._maximumAllowedValue},setMaximumAllowedValue:function(t){this._maximumAllowedValue=t},getThumbSprite:function(){return this._thumbSprite},getProgressSprite:function(){return this._progressSprite},getBackgroundSprite:function(){return this._backgroundSprite},initWithSprites:function(t,e,i){return!!cc.Control.prototype.init.call(this)&&(this.ignoreAnchorPointForPosition(!1),this._backgroundSprite=t,this._progressSprite=e,this._thumbSprite=i,t=cc.ControlUtils.CCRectUnion(t.getBoundingBox(),i.getBoundingBox()),this.setContentSize(t.width,t.height),this._backgroundSprite.setAnchorPoint(.5,.5),this._backgroundSprite.setPosition(t.width/2,t.height/2),this.addChild(this._backgroundSprite),this._progressSprite.setAnchorPoint(0,.5),this._progressSprite.setPosition(0,t.height/2),this.addChild(this._progressSprite),this._thumbSprite.setPosition(0,t.height/2),this.addChild(this._thumbSprite),this._minimumValue=0,this._maximumValue=1,this.setValue(this._minimumValue),!0)},setEnabled:function(t){cc.Control.prototype.setEnabled.call(this,t),this._thumbSprite&&this._thumbSprite.setOpacity(t?255:128)},sliderBegan:function(t){this.setSelected(!0),this._thumbSprite.setColor(cc.color.GRAY),this.setValue(this.valueForLocation(t))},sliderMoved:function(t){this.setValue(this.valueForLocation(t))},sliderEnded:function(t){this.isSelected()&&this.setValue(this.valueForLocation(this._thumbSprite.getPosition())),this._thumbSprite.setColor(cc.color.WHITE),this.setSelected(!1)},getTouchLocationInControl:function(t){return t=t.getLocation(),0>(t=this.convertToNodeSpace(t)).x?t.x=0:t.x>this._backgroundSprite.getContentSize().width+cc.SLIDER_MARGIN_H&&(t.x=this._backgroundSprite.getContentSize().width+cc.SLIDER_MARGIN_H),t},onTouchBegan:function(t,e){if(!this.isTouchInside(t)||!this.isEnabled()||!this.isVisible())return!1;var i=this.locationFromTouch(t);return this.sliderBegan(i),!0},onTouchMoved:function(t,e){var i=this.locationFromTouch(t);this.sliderMoved(i)},onTouchEnded:function(t,e){this.sliderEnded(cc.p(0,0))},needsLayout:function(){this._thumbSprite.setPositionX((this._value-this._minimumValue)/(this._maximumValue-this._minimumValue)*this._backgroundSprite.getContentSize().width);var t=this._progressSprite.getTextureRect();t=cc.rect(t.x,t.y,this._thumbSprite.getPositionX(),t.height);this._progressSprite.setTextureRect(t,this._progressSprite.isTextureRectRotated()),this._thumbSprite._renderCmd.transform(this._renderCmd)},valueForLocation:function(t){return t=t.x/this._backgroundSprite.getContentSize().width,Math.max(Math.min(this._minimumValue+t*(this._maximumValue-this._minimumValue),this._maximumAllowedValue),this._minimumAllowedValue)}}),_p=cc.ControlSlider.prototype,cc.defineGetterSetter(_p,"value",_p.getValue,_p.setValue),cc.defineGetterSetter(_p,"minValue",_p.getMinimumValue,_p.setMinimumValue),cc.defineGetterSetter(_p,"maxValue",_p.getMaximumValue,_p.setMaximumValue),cc.defineGetterSetter(_p,"minAllowedValue",_p.getMinimumAllowedValue,_p.setMinimumAllowedValue),cc.defineGetterSetter(_p,"maxAllowedValue",_p.getMaximumAllowedValue,_p.setMaximumAllowedValue),cc.defineGetterSetter(_p,"thumbSprite",_p.getThumbSprite),cc.defineGetterSetter(_p,"progressSprite",_p.getProgressSprite),cc.defineGetterSetter(_p,"backgroundSprite",_p.getBackgroundSprite),_p=null,cc.ControlSlider.create=function(t,e,i){return new cc.ControlSlider(t,e,i)},cc.ControlSwitch=cc.Control.extend({_switchSprite:null,_initialTouchXPosition:0,_moved:!1,_on:!1,_className:"ControlSwitch",ctor:function(t,e,i,n,s,r){cc.Control.prototype.ctor.call(this),r&&this.initWithMaskSprite(t,e,i,n,s,r)},initWithMaskSprite:function(t,e,i,n,s,r){if(!t)throw Error("cc.ControlSwitch.initWithMaskSprite(): maskSprite should be non-null.");if(!e)throw Error("cc.ControlSwitch.initWithMaskSprite(): onSprite should be non-null.");if(!i)throw Error("cc.ControlSwitch.initWithMaskSprite(): offSprite should be non-null.");if(!n)throw Error("cc.ControlSwitch.initWithMaskSprite(): thumbSprite should be non-null.");return!!this.init()&&(this._on=!0,this._switchSprite=new cc.ControlSwitchSprite,this._switchSprite.initWithMaskSprite(t,e,i,n,s,r),this._switchSprite.setPosition(this._switchSprite.getContentSize().width/2,this._switchSprite.getContentSize().height/2),this.addChild(this._switchSprite),this.ignoreAnchorPointForPosition(!1),this.setAnchorPoint(.5,.5),this.setContentSize(this._switchSprite.getContentSize()),!0)},setOn:function(t,e){e=e||!1;var i=(this._on=t)?this._switchSprite.getOnPosition():this._switchSprite.getOffPosition();e?this._switchSprite.runAction(new cc.ActionTween(.2,"sliderXPosition",this._switchSprite.getSliderXPosition(),i)):this._switchSprite.setSliderXPosition(i),this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)},isOn:function(){return this._on},hasMoved:function(){return this._moved},setEnabled:function(t){this._enabled=t,this._switchSprite.setOpacity(t?255:128)},locationFromTouch:function(t){return t=t.getLocation(),this.convertToNodeSpace(t)},onTouchBegan:function(t,e){return!!(this.isTouchInside(t)&&this.isEnabled()&&this.isVisible())&&(this._moved=!1,this._initialTouchXPosition=this.locationFromTouch(t).x-this._switchSprite.getSliderXPosition(),this._switchSprite.getThumbSprite().setColor(cc.color.GRAY),this._switchSprite.needsLayout(),!0)},onTouchMoved:function(t,e){var i=this.locationFromTouch(t);i=cc.p(i.x-this._initialTouchXPosition,0);this._moved=!0,this._switchSprite.setSliderXPosition(i.x)},onTouchEnded:function(t,e){var i=this.locationFromTouch(t);this._switchSprite.getThumbSprite().setColor(cc.color.WHITE),this.hasMoved()?this.setOn(!(i.x<this._switchSprite.getContentSize().width/2),!0):this.setOn(!this._on,!0)},onTouchCancelled:function(t,e){var i=this.locationFromTouch(t);this._switchSprite.getThumbSprite().setColor(cc.color.WHITE),this.hasMoved()?this.setOn(!(i.x<this._switchSprite.getContentSize().width/2),!0):this.setOn(!this._on,!0)}}),cc.ControlSwitch.create=function(t,e,i,n,s,r){return new cc.ControlSwitch(t,e,i,n,s,r)},cc.ControlSwitchSprite=cc.Sprite.extend({_sliderXPosition:0,_onPosition:0,_offPosition:0,_textureLocation:0,_maskLocation:0,_maskSize:null,_onSprite:null,_offSprite:null,_thumbSprite:null,_onLabel:null,_offLabel:null,_clipper:null,_stencil:null,_backRT:null,ctor:function(){cc.Sprite.prototype.ctor.call(this),this._maskLocation=this._offPosition=this._onPosition=this._sliderXPosition=0,this._maskSize=cc.size(0,0),this._offLabel=this._onLabel=this._thumbSprite=this._offSprite=this._onSprite=null},initWithMaskSprite:function(t,e,i,n,s,r){return!!cc.Sprite.prototype.init.call(this)&&(this.setSpriteFrame(t.displayFrame()),this._onPosition=0,this._offPosition=-e.getContentSize().width+n.getContentSize().width/2,this._sliderXPosition=this._onPosition,this.setOnSprite(e),this.setOffSprite(i),this.setThumbSprite(n),this.setOnLabel(s),this.setOffLabel(r),this._stencil=t,t=this._maskSize=this._stencil.getContentSize(),this._stencil.setPosition(0,0),this._clipper=new cc.ClippingNode,this._clipper.setAnchorPoint(.5,.5),this._clipper.setPosition(t.width/2,t.height/2),this._clipper.setStencil(this._stencil),this.addChild(this._clipper),this._clipper.addChild(e),this._clipper.addChild(i),this._clipper.addChild(s),this._clipper.addChild(r),this.addChild(this._thumbSprite),this.needsLayout(),!0)},needsLayout:function(){var t=this._maskSize;this._onSprite.setPosition(this._onSprite.getContentSize().width/2+this._sliderXPosition-t.width/2,this._onSprite.getContentSize().height/2-t.height/2),this._offSprite.setPosition(this._onSprite.getContentSize().width+this._offSprite.getContentSize().width/2+this._sliderXPosition-t.width/2,this._offSprite.getContentSize().height/2-t.height/2),this._onLabel&&this._onLabel.setPosition(this._onSprite.getPositionX()-this._thumbSprite.getContentSize().width/6,this._onSprite.getContentSize().height/2-t.height/2),this._offLabel&&this._offLabel.setPosition(this._offSprite.getPositionX()+this._thumbSprite.getContentSize().width/6,this._offSprite.getContentSize().height/2-t.height/2),this._thumbSprite.setPosition(this._onSprite.getContentSize().width+this._sliderXPosition,this._maskSize.height/2)},setSliderXPosition:function(t){t<=this._offPosition?t=this._offPosition:t>=this._onPosition&&(t=this._onPosition),this._sliderXPosition=t,this.needsLayout()},getSliderXPosition:function(){return this._sliderXPosition},_getOnSideWidth:function(){return this._onSprite.getContentSize().width},_getOffSideWidth:function(){return this._offSprite.getContentSize().height},updateTweenAction:function(t,e){"sliderXPosition"===e&&this.setSliderXPosition(t)},setOnPosition:function(t){this._onPosition=t},getOnPosition:function(){return this._onPosition},setOffPosition:function(t){this._offPosition=t},getOffPosition:function(){return this._offPosition},setMaskTexture:function(t){this._stencil.setTexture(t)},getMaskTexture:function(){return this._stencil.getTexture()},setTextureLocation:function(t){this._textureLocation=t},getTextureLocation:function(){return this._textureLocation},setMaskLocation:function(t){this._maskLocation=t},getMaskLocation:function(){return this._maskLocation},setOnSprite:function(t){this._onSprite=t},getOnSprite:function(){return this._onSprite},setOffSprite:function(t){this._offSprite=t},getOffSprite:function(){return this._offSprite},setThumbSprite:function(t){this._thumbSprite=t},getThumbSprite:function(){return this._thumbSprite},setOnLabel:function(t){this._onLabel=t},getOnLabel:function(){return this._onLabel},setOffLabel:function(t){this._offLabel=t},getOffLabel:function(){return this._offLabel}}),_p=cc.ControlSwitchSprite.prototype,cc.defineGetterSetter(_p,"sliderX",_p.getSliderXPosition,_p.setSliderXPosition),cc.defineGetterSetter(_p,"onPos",_p.getOnPosition,_p.setOnPosition),cc.defineGetterSetter(_p,"offPos",_p.getOffPosition,_p.setOffPosition),cc.defineGetterSetter(_p,"maskTexture",_p.getMaskTexture,_p.setMaskTexture),cc.defineGetterSetter(_p,"maskPos",_p.getMaskLocation,_p.setMaskLocation),cc.defineGetterSetter(_p,"onSprite",_p.getOnSprite,_p.setOnSprite),cc.defineGetterSetter(_p,"offSprite",_p.getOffSprite,_p.setOffSprite),cc.defineGetterSetter(_p,"thumbSprite",_p.getThumbSprite,_p.setThumbSprite),cc.defineGetterSetter(_p,"onLabel",_p.getOnLabel,_p.setOnLabel),cc.defineGetterSetter(_p,"offLabel",_p.getOffLabel,_p.setOffLabel),cc.defineGetterSetter(_p,"onSideWidth",_p._getOnSideWidth),cc.defineGetterSetter(_p,"offSideWidth",_p._getOffSideWidth),_p=null,cc.CONTROL_STEPPER_PARTMINUS=0,cc.CONTROL_STEPPER_PARTPLUS=1,cc.CONTROL_STEPPER_PARTNONE=2,cc.CONTROL_STEPPER_LABELCOLOR_ENABLED=cc.color(55,55,55),cc.CONTROL_STEPPER_LABELCOLOR_DISABLED=cc.color(147,147,147),cc.CONTROL_STEPPER_LABELFONT="CourierNewPSMT",cc.AUTOREPEAT_DELTATIME=.15,cc.AUTOREPEAT_INCREASETIME_INCREMENT=12,cc.ControlStepper=cc.Control.extend({_minusSprite:null,_plusSprite:null,_minusLabel:null,_plusLabel:null,_value:0,_continuous:!1,_autorepeat:!1,_wraps:!1,_minimumValue:0,_maximumValue:0,_stepValue:0,_touchInsideFlag:!1,_touchedPart:cc.CONTROL_STEPPER_PARTNONE,_autorepeatCount:0,_className:"ControlStepper",ctor:function(t,e){cc.Control.prototype.ctor.call(this),this._plusLabel=this._minusLabel=this._plusSprite=this._minusSprite=null,this._value=0,this._wraps=this._autorepeat=this._continuous=!1,this._stepValue=this._maximumValue=this._minimumValue=0,this._touchInsideFlag=!1,this._touchedPart=cc.CONTROL_STEPPER_PARTNONE,this._autorepeatCount=0,e&&this.initWithMinusSpriteAndPlusSprite(t,e)},initWithMinusSpriteAndPlusSprite:function(t,e){if(!t)throw Error("cc.ControlStepper.initWithMinusSpriteAndPlusSprite(): Minus sprite should be non-null.");if(!e)throw Error("cc.ControlStepper.initWithMinusSpriteAndPlusSprite(): Plus sprite should be non-null.");if(this.init()){this._continuous=this._autorepeat=!0,this._minimumValue=0,this._maximumValue=100,this._value=0,this._stepValue=1,this._wraps=!1,this.ignoreAnchorPointForPosition(!1),this.setMinusSprite(t),this._minusSprite.setPosition(t.getContentSize().width/2,t.getContentSize().height/2),this.addChild(this._minusSprite),this.setMinusLabel(new cc.LabelTTF("-",cc.CONTROL_STEPPER_LABELFONT,40,cc.size(40,40),cc.TEXT_ALIGNMENT_CENTER,cc.VERTICAL_TEXT_ALIGNMENT_CENTER)),this._minusLabel.setColor(cc.CONTROL_STEPPER_LABELCOLOR_DISABLED),this._minusLabel.setPosition(this._minusSprite.getContentSize().width/2,this._minusSprite.getContentSize().height/2),this._minusSprite.addChild(this._minusLabel),this.setPlusSprite(e),this._plusSprite.setPosition(t.getContentSize().width+e.getContentSize().width/2,t.getContentSize().height/2),this.addChild(this._plusSprite),this.setPlusLabel(new cc.LabelTTF("+",cc.CONTROL_STEPPER_LABELFONT,40,cc.size(40,40),cc.TEXT_ALIGNMENT_CENTER,cc.VERTICAL_TEXT_ALIGNMENT_CENTER)),this._plusLabel.setColor(cc.CONTROL_STEPPER_LABELCOLOR_ENABLED),this._plusLabel.setPosition(this._plusSprite.getContentSize().width/2,this._plusSprite.getContentSize().height/2),this._plusSprite.addChild(this._plusLabel);var i=cc.ControlUtils.CCRectUnion(this._minusSprite.getBoundingBox(),this._plusSprite.getBoundingBox());return this.setContentSize(this._minusSprite.getContentSize().width+this._plusSprite.getContentSize().height,i.height),!0}return!1},setWraps:function(t){(this._wraps=t)&&(this._minusLabel.setColor(cc.CONTROL_STEPPER_LABELCOLOR_ENABLED),this._plusLabel.setColor(cc.CONTROL_STEPPER_LABELCOLOR_ENABLED)),this.setValue(this._value)},getWraps:function(){return this._wraps},setMinimumValue:function(t){if(t>=this._maximumValue)throw Error("cc.ControlStepper.setMinimumValue(): minimumValue should be numerically less than maximumValue.");this._minimumValue=t,this.setValue(this._value)},getMinimumValue:function(){return this._minimumValue},setMaximumValue:function(t){if(t<=this._minimumValue)throw Error("cc.ControlStepper.setMaximumValue(): maximumValue should be numerically less than maximumValue.");this._maximumValue=t,this.setValue(this._value)},getMaximumValue:function(){return this._maximumValue},setValue:function(t){this.setValueWithSendingEvent(t,!0)},getValue:function(){return this._value},setStepValue:function(t){if(0>=t)throw Error("cc.ControlStepper.setMaximumValue(): stepValue should be numerically greater than 0.");this._stepValue=t},getStepValue:function(){return this._stepValue},isContinuous:function(){return this._continuous},setValueWithSendingEvent:function(t,e){t<this._minimumValue?t=this._wraps?this._maximumValue:this._minimumValue:t>this._maximumValue&&(t=this._wraps?this._minimumValue:this._maximumValue),this._value=t,this._wraps||(this._minusLabel.setColor(t===this._minimumValue?cc.CONTROL_STEPPER_LABELCOLOR_DISABLED:cc.CONTROL_STEPPER_LABELCOLOR_ENABLED),this._plusLabel.setColor(t===this._maximumValue?cc.CONTROL_STEPPER_LABELCOLOR_DISABLED:cc.CONTROL_STEPPER_LABELCOLOR_ENABLED)),e&&this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)},startAutorepeat:function(){this._autorepeatCount=-1,this.schedule(this.update,cc.AUTOREPEAT_DELTATIME,cc.REPEAT_FOREVER,3*cc.AUTOREPEAT_DELTATIME)},stopAutorepeat:function(){this.unschedule(this.update)},update:function(t){this._autorepeatCount++,this._autorepeatCount<cc.AUTOREPEAT_INCREASETIME_INCREMENT&&0!=this._autorepeatCount%3||(this._touchedPart===cc.CONTROL_STEPPER_PARTMINUS?this.setValueWithSendingEvent(this._value-this._stepValue,this._continuous):this._touchedPart===cc.CONTROL_STEPPER_PARTPLUS&&this.setValueWithSendingEvent(this._value+this._stepValue,this._continuous))},updateLayoutUsingTouchLocation:function(t){t.x<this._minusSprite.getContentSize().width&&this._value>this._minimumValue?(this._touchedPart=cc.CONTROL_STEPPER_PARTMINUS,this._minusSprite.setColor(cc.color.GRAY),this._plusSprite.setColor(cc.color.WHITE)):t.x>=this._minusSprite.getContentSize().width&&this._value<this._maximumValue?(this._touchedPart=cc.CONTROL_STEPPER_PARTPLUS,this._minusSprite.setColor(cc.color.WHITE),this._plusSprite.setColor(cc.color.GRAY)):(this._touchedPart=cc.CONTROL_STEPPER_PARTNONE,this._minusSprite.setColor(cc.color.WHITE),this._plusSprite.setColor(cc.color.WHITE))},onTouchBegan:function(t,e){if(!this.isTouchInside(t)||!this.isEnabled()||!this.isVisible())return!1;var i=this.getTouchLocation(t);return this.updateLayoutUsingTouchLocation(i),this._touchInsideFlag=!0,this._autorepeat&&this.startAutorepeat(),!0},onTouchMoved:function(t,e){if(this.isTouchInside(t)){var i=this.getTouchLocation(t);this.updateLayoutUsingTouchLocation(i),this._touchInsideFlag||(this._touchInsideFlag=!0,this._autorepeat&&this.startAutorepeat())}else this._touchInsideFlag=!1,this._touchedPart=cc.CONTROL_STEPPER_PARTNONE,this._minusSprite.setColor(cc.color.WHITE),this._plusSprite.setColor(cc.color.WHITE),this._autorepeat&&this.stopAutorepeat()},onTouchEnded:function(t,e){if(this._minusSprite.setColor(cc.color.WHITE),this._plusSprite.setColor(cc.color.WHITE),this._autorepeat&&this.stopAutorepeat(),this.isTouchInside(t)){var i=this.getTouchLocation(t);this.setValue(this._value+(i.x<this._minusSprite.getContentSize().width?0-this._stepValue:this._stepValue))}},setMinusSprite:function(t){this._minusSprite=t},getMinusSprite:function(){return this._minusSprite},setPlusSprite:function(t){this._plusSprite=t},getPlusSprite:function(){return this._plusSprite},setMinusLabel:function(t){this._minusLabel=t},getMinusLabel:function(){return this._minusLabel},setPlusLabel:function(t){this._plusLabel=t},getPlusLabel:function(){return this._plusLabel}}),_p=cc.ControlStepper.prototype,cc.defineGetterSetter(_p,"wraps",_p.getWraps,_p.setWraps),cc.defineGetterSetter(_p,"value",_p.getValue,_p.setValue),cc.defineGetterSetter(_p,"minValue",_p.getMinimumValue,_p.setMinimumValue),cc.defineGetterSetter(_p,"maxValue",_p.getMaximumValue,_p.setMaximumValue),cc.defineGetterSetter(_p,"stepValue",_p.getStepValue,_p.setStepValue),cc.defineGetterSetter(_p,"continuous",_p.isContinuous),cc.defineGetterSetter(_p,"minusSprite",_p.getMinusSprite,_p.setMinusSprite),cc.defineGetterSetter(_p,"plusSprite",_p.getPlusSprite,_p.setPlusSprite),cc.defineGetterSetter(_p,"minusLabel",_p.getMinusLabel,_p.setMinusLabel),cc.defineGetterSetter(_p,"plusLabel",_p.getPlusLabel,_p.setPlusLabel),_p=null,cc.ControlStepper.create=function(t,e){return new cc.ControlStepper(t,e)},cc.ControlPotentiometer=cc.Control.extend({_thumbSprite:null,_progressTimer:null,_previousLocation:null,_value:0,_minimumValue:0,_maximumValue:1,_className:"ControlPotentiometer",ctor:function(t,e,i){cc.Control.prototype.ctor.call(this),null!=i&&(t=new cc.Sprite(t),i=new cc.Sprite(i),e=new cc.ProgressTimer(new cc.Sprite(e)),this.initWithTrackSprite_ProgressTimer_ThumbSprite(t,e,i))},initWithTrackSprite_ProgressTimer_ThumbSprite:function(t,e,i){return!!this.init()&&(this.setProgressTimer(e),this.setThumbSprite(i),this._thumbSprite.setPosition(e.getPosition()),this.addChild(i,2),this.addChild(e,1),this.addChild(t),this.setContentSize(t.getContentSize()),this._minimumValue=0,this._maximumValue=1,this.setValue(this._minimumValue),!0)},setEnabled:function(t){this.setEnabled(t),null!==this._thumbSprite&&this._thumbSprite.setOpacity(t?255:128)},setValue:function(t){t<this._minimumValue&&(t=this._minimumValue),t>this._maximumValue&&(t=this._maximumValue),this._value=t,t=(t-this._minimumValue)/(this._maximumValue-this._minimumValue),this._progressTimer.setPercentage(100*t),this._thumbSprite.setRotation(360*t),this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)},getValue:function(){return this._value},setMinimumValue:function(t){this._minimumValue=t,this._minimumValue>=this._maximumValue&&(this._maximumValue=this._minimumValue+1),this.setValue(this._maximumValue)},getMinimumValue:function(){return this._minimumValue},setMaximumValue:function(t){this._maximumValue=t,this._maximumValue<=this._minimumValue&&(this._minimumValue=this._maximumValue-1),this.setValue(this._minimumValue)},getMaximumValue:function(){return this._maximumValue},isTouchInside:function(t){return t=this.getTouchLocation(t),this.distanceBetweenPointAndPoint(this._progressTimer.getPosition(),t)<Math.min(this.getContentSize().width/2,this.getContentSize().height/2)},onTouchBegan:function(t,e){return!!(this.isTouchInside(t)&&this.isEnabled()&&this.isVisible())&&(this._previousLocation=this.getTouchLocation(t),this.potentiometerBegan(this._previousLocation),!0)},onTouchMoved:function(t,e){var i=this.getTouchLocation(t);this.potentiometerMoved(i)},onTouchEnded:function(t,e){this.potentiometerEnded(cc.p(0,0))},distanceBetweenPointAndPoint:function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},angleInDegreesBetweenLineFromPoint_toPoint_toLineFromPoint_toPoint:function(t,e,i,n){var s=n.x-i.x;return i=n.y-i.y,180*((t=Math.atan2(e.x-t.x,e.y-t.y))-(s=Math.atan2(s,i)))/Math.PI},potentiometerBegan:function(t){this.setSelected(!0),this.getThumbSprite().setColor(cc.color.GRAY)},potentiometerMoved:function(t){var e=this.angleInDegreesBetweenLineFromPoint_toPoint_toLineFromPoint_toPoint(this._progressTimer.getPosition(),t,this._progressTimer.getPosition(),this._previousLocation);180<e?e-=360:-180>e&&(e+=360),this.setValue(this._value+e/360*(this._maximumValue-this._minimumValue)),this._previousLocation=t},potentiometerEnded:function(t){this.getThumbSprite().setColor(cc.color.WHITE),this.setSelected(!1)},setThumbSprite:function(t){this._thumbSprite=t},getThumbSprite:function(){return this._thumbSprite},setProgressTimer:function(t){this._progressTimer=t},getProgressTimer:function(){return this._progressTimer},setPreviousLocation:function(t){this._previousLocation=t},getPreviousLocation:function(){return this._previousLocation}}),_p=cc.ControlPotentiometer.prototype,cc.defineGetterSetter(_p,"value",_p.getValue,_p.setValue),cc.defineGetterSetter(_p,"minValue",_p.getMinimumValue,_p.setMinimumValue),cc.defineGetterSetter(_p,"maxValue",_p.getMaximumValue,_p.setMaximumValue),cc.defineGetterSetter(_p,"progressTimer",_p.getProgressTimer,_p.setProgressTimer),cc.defineGetterSetter(_p,"thumbSprite",_p.getThumbSprite,_p.setThumbSprite),cc.defineGetterSetter(_p,"prevLocation",_p.getPreviousLocation,_p.setPreviousLocation),_p=null,cc.ControlPotentiometer.create=function(t,e,i){return new cc.ControlPotentiometer(t,e,i)},cc.SCROLLVIEW_DIRECTION_NONE=-1,cc.SCROLLVIEW_DIRECTION_HORIZONTAL=0,cc.SCROLLVIEW_DIRECTION_VERTICAL=1,cc.SCROLLVIEW_DIRECTION_BOTH=2;var SCROLL_DEACCEL_RATE=.95,SCROLL_DEACCEL_DIST=1,BOUNCE_DURATION=.15,INSET_RATIO=.2,MOVE_INCH=.04375,BOUNCE_BACK_FACTOR=.35;cc.convertDistanceFromPointToInch=function(t){var e;return t*(e=((e=cc.view).getScaleX()+e.getScaleY())/2)/160},cc.ScrollViewDelegate=cc.Class.extend({scrollViewDidScroll:function(t){},scrollViewDidZoom:function(t){}}),cc.ScrollView=cc.Layer.extend({_zoomScale:0,_minZoomScale:0,_maxZoomScale:0,_delegate:null,_direction:cc.SCROLLVIEW_DIRECTION_BOTH,_dragging:!1,_contentOffset:null,_container:null,_touchMoved:!1,_maxInset:null,_minInset:null,_bounceable:!1,_clippingToBounds:!1,_scrollDistance:null,_touchPoint:null,_touchLength:0,_touches:null,_viewSize:null,_minScale:0,_maxScale:0,_parentScissorRect:null,_scissorRestored:!1,_tmpViewRect:null,_touchListener:null,_className:"ScrollView",ctor:function(t,e){cc.Layer.prototype.ctor.call(this),this._contentOffset=cc.p(0,0),this._maxInset=cc.p(0,0),this._minInset=cc.p(0,0),this._scrollDistance=cc.p(0,0),this._touchPoint=cc.p(0,0),this._touches=[],this._viewSize=cc.size(0,0),this._parentScissorRect=new cc.Rect(0,0,0,0),this._tmpViewRect=new cc.Rect(0,0,0,0),null!=e?this.initWithViewSize(t,e):this.initWithViewSize(cc.size(200,200),null)},init:function(){return this.initWithViewSize(cc.size(200,200),null)},initWithViewSize:function(t,e){var i=cc.p(0,0);return!!cc.Layer.prototype.init.call(this)&&(e||this._container||(e=new cc.Layer),e&&this.setContainer(e),this.setViewSize(t),this.setTouchEnabled(!0),this._touches.length=0,this._delegate=null,this._clippingToBounds=this._bounceable=!0,this._direction=cc.SCROLLVIEW_DIRECTION_BOTH,this._container.setPosition(i),this._touchLength=0,this._minScale=this._maxScale=1,!0)},visit:function(t){var e=this._renderCmd,i=t?t._renderCmd:null;if(this._visible){t=cc.renderer,e.visit(i),this._clippingToBounds&&t.pushRenderCommand(e.startCmd);var n=this._children,s=n.length;if(0<s)for(this._reorderChildDirty&&this.sortAllChildren(),i=0;i<s;i++)n[i].visit(this);this._clippingToBounds&&t.pushRenderCommand(e.endCmd),e._dirtyFlag=0}else e._propagateFlagsDown(i)},setContentOffset:function(t,e){if(e)this.setContentOffsetInDuration(t,BOUNCE_DURATION);else{if(!this._bounceable){var i=this.minContainerOffset(),n=this.maxContainerOffset();t.x=Math.max(i.x,Math.min(n.x,t.x)),t.y=Math.max(i.y,Math.min(n.y,t.y))}this._container.setPosition(t),null!=(i=this._delegate)&&i.scrollViewDidScroll&&i.scrollViewDidScroll(this)}},getContentOffset:function(){var t=this._container.getPosition();return cc.p(t.x,t.y)},setContentOffsetInDuration:function(t,e){var i=cc.moveTo(e,t),n=cc.callFunc(this._stoppedAnimatedScroll,this);this._container.runAction(cc.sequence(i,n)),this.schedule(this._performedAnimatedScroll)},setZoomScale:function(t,e){if(e)this.setZoomScaleInDuration(t,BOUNCE_DURATION);else{var i,n,s=this._container;if(s.getScale()!==t)0===this._touchLength?(n=this._viewSize,n=cc.p(.5*n.width,.5*n.height),n=this.convertToWorldSpace(n)):n=this._touchPoint,i=s.convertToNodeSpace(n),s.setScale(Math.max(this._minScale,Math.min(this._maxScale,t))),i=s.convertToWorldSpace(i),n=cc.pSub(n,i),this._delegate&&this._delegate.scrollViewDidZoom&&this._delegate.scrollViewDidZoom(this),this.setContentOffset(cc.pAdd(s.getPosition(),n))}},getZoomScale:function(){return this._container.getScale()},setZoomScaleInDuration:function(t,e){if(0<e){var i=this._container.getScale();i!==t&&(i=cc.actionTween(e,"zoomScale",i,t),this.runAction(i))}else this.setZoomScale(t)},minContainerOffset:function(){var t=this._container,e=t.getContentSize(),i=this._viewSize;return cc.p(i.width-e.width*t.getScaleX(),i.height-e.height*t.getScaleY())},maxContainerOffset:function(){return cc.p(0,0)},isNodeVisible:function(t){var e=this.getContentOffset(),i=this.getViewSize(),n=this.getZoomScale();e=cc.rect(-e.x/n,-e.y/n,i.width/n,i.height/n);return cc.rectIntersectsRect(e,t.getBoundingBox())},pause:function(t){this._container.pause(),t=this._container.getChildren();for(var e=0;e<t.length;e++)t[e].pause();this._super()},resume:function(t){for(var e=0,i=(t=this._container.getChildren()).length;e<i;e++)t[e].resume();this._container.resume(),this._super()},isDragging:function(){return this._dragging},isTouchMoved:function(){return this._touchMoved},isBounceable:function(){return this._bounceable},setBounceable:function(t){this._bounceable=t},getViewSize:function(){return this._viewSize},setViewSize:function(t){this._viewSize=t,cc.Node.prototype.setContentSize.call(this,t)},getContainer:function(){return this._container},setContainer:function(t){t&&(this.removeAllChildren(!0),this._container=t,t.ignoreAnchorPointForPosition(!1),t.setAnchorPoint(0,0),this.addChild(t),this.setViewSize(this._viewSize))},getDirection:function(){return this._direction},setDirection:function(t){this._direction=t},getDelegate:function(){return this._delegate},setDelegate:function(t){this._delegate=t},onTouchBegan:function(t,e){for(var i=this;null!=i;i=i.parent)if(!i.isVisible())return!1;i=this._getViewRect();var n=this._container,s=n.convertToWorldSpace(n.convertTouchToNodeSpace(t)),r=this._touches;return!(2<r.length||this._touchMoved||!cc.rectContainsPoint(i,s))&&(r.push(t),1===r.length?(this._touchPoint=this.convertTouchToNodeSpace(t),this._touchMoved=!1,this._dragging=!0,this._scrollDistance.x=0,this._touchLength=this._scrollDistance.y=0):2===r.length&&(this._touchPoint=cc.pMidpoint(this.convertTouchToNodeSpace(r[0]),this.convertTouchToNodeSpace(r[1])),this._touchLength=cc.pDistance(n.convertTouchToNodeSpace(r[0]),n.convertTouchToNodeSpace(r[1])),this._dragging=!1),!0)},onTouchMoved:function(t,e){if(this.isVisible())if(this.setNodeDirty(),1===this._touches.length&&this._dragging){this._touchMoved=!0,this._getViewRect();var i,n=this.convertTouchToNodeSpace(t),s=cc.pSub(n,this._touchPoint),r=0,o=this._direction;if(o===cc.SCROLLVIEW_DIRECTION_VERTICAL)r=s.y,i=this._container.getPositionY(),this.minContainerOffset().y<=i&&i<=this.maxContainerOffset().y||(s.y*=BOUNCE_BACK_FACTOR);else if(o===cc.SCROLLVIEW_DIRECTION_HORIZONTAL)r=s.x,i=this._container.getPositionX(),this.minContainerOffset().x<=i&&i<=this.maxContainerOffset().x||(s.x*=BOUNCE_BACK_FACTOR);else{r=Math.sqrt(s.x*s.x+s.y*s.y),i=this._container.getPositionY();var a=this.minContainerOffset(),c=this.maxContainerOffset();a.y<=i&&i<=c.y||(s.y*=BOUNCE_BACK_FACTOR),i=this._container.getPositionX(),a.x<=i&&i<=c.x||(s.x*=BOUNCE_BACK_FACTOR)}if((this._touchMoved||!(Math.abs(cc.convertDistanceFromPointToInch(r))<MOVE_INCH))&&(this._touchMoved||(s.x=0,s.y=0),this._touchPoint=n,this._touchMoved=!0,this._dragging)){switch(o){case cc.SCROLLVIEW_DIRECTION_VERTICAL:s.x=0;break;case cc.SCROLLVIEW_DIRECTION_HORIZONTAL:s.y=0}n=(r=this._container.getPosition()).x+s.x,r=r.y+s.y,this._scrollDistance=s,this.setContentOffset(cc.p(n,r))}}else 2!==this._touches.length||this._dragging||(s=cc.pDistance(this._container.convertTouchToNodeSpace(this._touches[0]),this._container.convertTouchToNodeSpace(this._touches[1])),this.setZoomScale(this.getZoomScale()*s/this._touchLength))},onTouchEnded:function(t,e){this.isVisible()&&(1===this._touches.length&&this._touchMoved&&this.schedule(this._deaccelerateScrolling),this._touches.length=0,this._touchMoved=this._dragging=!1)},onTouchCancelled:function(t,e){this.isVisible()&&(this._touches.length=0,this._touchMoved=this._dragging=!1)},setContentSize:function(t,e){null!==this.getContainer()&&(void 0===e?this.getContainer().setContentSize(t):this.getContainer().setContentSize(t,e),this.updateInset())},_setWidth:function(t){var e=this.getContainer();null!==e&&(e._setWidth(t),this.updateInset())},_setHeight:function(t){var e=this.getContainer();null!==e&&(e._setHeight(t),this.updateInset())},getContentSize:function(){return this._container.getContentSize()},updateInset:function(){if(null!==this.getContainer()){var t=this._viewSize,e=this.maxContainerOffset();this._maxInset.x=e.x+t.width*INSET_RATIO,this._maxInset.y=e.y+t.height*INSET_RATIO,e=this.minContainerOffset(),this._minInset.x=e.x-t.width*INSET_RATIO,this._minInset.y=e.y-t.height*INSET_RATIO}},isClippingToBounds:function(){return this._clippingToBounds},setClippingToBounds:function(t){this._clippingToBounds=t},addChild:function(t,e,i){if(!t)throw Error("child must not nil!");e=e||t.getLocalZOrder(),i=i||t.getTag(),this._container!==t?this._container.addChild(t,e,i):cc.Layer.prototype.addChild.call(this,t,e,i)},isTouchEnabled:function(){return null!==this._touchListener},setTouchEnabled:function(t){this._touchListener&&cc.eventManager.removeListener(this._touchListener),this._touchListener=null,t?(t=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE}),this.onTouchBegan&&(t.onTouchBegan=this.onTouchBegan.bind(this)),this.onTouchMoved&&(t.onTouchMoved=this.onTouchMoved.bind(this)),this.onTouchEnded&&(t.onTouchEnded=this.onTouchEnded.bind(this)),this.onTouchCancelled&&(t.onTouchCancelled=this.onTouchCancelled.bind(this)),this._touchListener=t,cc.eventManager.addListener(t,this)):(this._touchMoved=this._dragging=!1,this._touches.length=0)},_initWithViewSize:function(t){return null},_relocateContainer:function(t){var e=this.minContainerOffset(),i=this.maxContainerOffset(),n=this._direction,s=this._container.getPosition(),r=s.x,o=s.y;n!==cc.SCROLLVIEW_DIRECTION_BOTH&&n!==cc.SCROLLVIEW_DIRECTION_HORIZONTAL||(r=Math.max(r,e.x),r=Math.min(r,i.x)),n!==cc.SCROLLVIEW_DIRECTION_BOTH&&n!==cc.SCROLLVIEW_DIRECTION_VERTICAL||(o=Math.min(o,i.y),o=Math.max(o,e.y)),o===s.y&&r===s.x||this.setContentOffset(cc.p(r,o),t)},_deaccelerateScrolling:function(t){if(this._dragging)this.unschedule(this._deaccelerateScrolling);else{var e,i;e=this._container.getPosition(),t=this._scrollDistance,this._container.setPosition(e.x+t.x,e.y+t.y),this._bounceable?(e=this._maxInset,i=this._minInset):(e=this.maxContainerOffset(),i=this.minContainerOffset());var n=this._container.getPositionX(),s=this._container.getPositionY();t.x*=SCROLL_DEACCEL_RATE,t.y*=SCROLL_DEACCEL_RATE,this.setContentOffset(cc.p(n,s)),(Math.abs(t.x)<=SCROLL_DEACCEL_DIST&&Math.abs(t.y)<=SCROLL_DEACCEL_DIST||s>e.y||s<i.y||n>e.x||n<i.x||n===e.x||n===i.x||s===e.y||s===i.y)&&(this.unschedule(this._deaccelerateScrolling),this._relocateContainer(!0))}},_performedAnimatedScroll:function(t){this._dragging?this.unschedule(this._performedAnimatedScroll):this._delegate&&this._delegate.scrollViewDidScroll&&this._delegate.scrollViewDidScroll(this)},_stoppedAnimatedScroll:function(t){this.unschedule(this._performedAnimatedScroll),this._delegate&&this._delegate.scrollViewDidScroll&&this._delegate.scrollViewDidScroll(this)},_handleZoom:function(){},_getViewRect:function(){for(var t=this.convertToWorldSpace(cc.p(0,0)),e=this._viewSize,i=this.getScaleX(),n=this.getScaleY(),s=this._parent;null!=s;s=s.getParent())i*=s.getScaleX(),n*=s.getScaleY();return 0>i&&(t.x+=e.width*i,i=-i),0>n&&(t.y+=e.height*n,n=-n),(s=this._tmpViewRect).x=t.x,s.y=t.y,s.width=e.width*i,s.height=e.height*n,s},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.ScrollView.CanvasRenderCmd(this):new cc.ScrollView.WebGLRenderCmd(this)}}),_p=cc.ScrollView.prototype,cc.defineGetterSetter(_p,"minOffset",_p.minContainerOffset),cc.defineGetterSetter(_p,"maxOffset",_p.maxContainerOffset),cc.defineGetterSetter(_p,"bounceable",_p.isBounceable,_p.setBounceable),cc.defineGetterSetter(_p,"viewSize",_p.getViewSize,_p.setViewSize),cc.defineGetterSetter(_p,"container",_p.getContainer,_p.setContainer),cc.defineGetterSetter(_p,"direction",_p.getDirection,_p.setDirection),cc.defineGetterSetter(_p,"delegate",_p.getDelegate,_p.setDelegate),cc.defineGetterSetter(_p,"clippingToBounds",_p.isClippingToBounds,_p.setClippingToBounds),_p=null,cc.ScrollView.create=function(t,e){return new cc.ScrollView(t,e)},function(){cc.ScrollView.CanvasRenderCmd=function(t){this._layerCmdCtor(t),this._needDraw=!1,this.startCmd=new cc.CustomRenderCmd(this,this._startCmd),this.startCmd._canUseDirtyRegion=!0,this.endCmd=new cc.CustomRenderCmd(this,this._endCmd),this.endCmd._canUseDirtyRegion=!0};var t=cc.ScrollView.CanvasRenderCmd.prototype=Object.create(cc.Layer.CanvasRenderCmd.prototype);t.constructor=cc.ScrollView.CanvasRenderCmd,t._startCmd=function(t,e,i){var n=this._node,s=t||cc._renderContext;t=s.getContext(),s.save(),n._clippingToBounds&&(this._scissorRestored=!1,s.setTransform(this._worldTransform,e,i),i=n.getScaleX(),e=n.getScaleY(),i*=n._viewSize.width,n=n._viewSize.height*e,t.beginPath(),t.rect(0,0,i,-n),t.closePath(),t.clip())},t._endCmd=function(t){(t=t||cc._renderContext).restore()}}(),function(){cc.ScrollView.WebGLRenderCmd=function(t){this._layerCmdCtor(t),this._needDraw=!1,this.startCmd=new cc.CustomRenderCmd(this,this._startCmd),this.endCmd=new cc.CustomRenderCmd(this,this._endCmd)};var t=cc.ScrollView.WebGLRenderCmd.prototype=Object.create(cc.Layer.WebGLRenderCmd.prototype);t.constructor=cc.ScrollView.WebGLRenderCmd,t._startCmd=function(){var t=this._node,e=cc.view,i=t._getViewRect();if(e.isScissorEnabled()){if(t._scissorRestored=!0,t._parentScissorRect=e.getScissorRect(),cc.rectIntersection(i,t._parentScissorRect)){var n=t._parentScissorRect,s=(t=Math.max(i.x,n.x),Math.max(i.y,n.y)),r=Math.min(i.x+i.width,n.x+n.width);i=Math.min(i.y+i.height,n.y+n.height);e.setScissorInPoints(t,s,r-t,i-s)}}else(t=cc._renderContext).enable(t.SCISSOR_TEST),e.setScissorInPoints(i.x,i.y,i.width,i.height)},t._endCmd=function(){var t=this._node;t._scissorRestored?(t=t._parentScissorRect,cc.view.setScissorInPoints(t.x,t.y,t.width,t.height)):(t=cc._renderContext).disable(t.SCISSOR_TEST)}}(),cc.SortableObject=cc.Class.extend({setObjectID:function(t){},getObjectID:function(){return 0}}),cc.SortedObject=cc.SortableObject.extend({_objectID:0,ctor:function(){this._objectID=0},setObjectID:function(t){this._objectID=t},getObjectID:function(){return this._objectID}});var _compareObject=function(t,e){return t.getObjectID()-e.getObjectID()};cc.ArrayForObjectSorting=cc.Class.extend({_saveObjectArr:null,ctor:function(){this._saveObjectArr=[]},insertSortedObject:function(t){if(!t)throw Error("cc.ArrayForObjectSorting.insertSortedObject(): addObject should be non-null.");var e=this.indexOfSortedObject(t);this.insertObject(t,e)},removeSortedObject:function(t){if(0!==this.count()){var e=this.indexOfSortedObject(t);e<this.count()&&e!==cc.INVALID_INDEX&&this.objectAtIndex(e).getObjectID()===t.getObjectID()&&this.removeObjectAtIndex(e)}},setObjectID_ofSortedObject:function(t,e){var i=this.indexOfSortedObject(e);if(i<this.count()&&i!==cc.INVALID_INDEX){var n=this.objectAtIndex(i);n.getObjectID()===e.getObjectID()&&(this.removeObjectAtIndex(i),n.setObjectID(t),this.insertSortedObject(n))}},objectWithObjectID:function(t){if(0===this.count())return null;var e=new cc.SortedObject;e.setObjectID(t);var i=this.indexOfSortedObject(e);return i<this.count()&&i!==cc.INVALID_INDEX&&((e=this.objectAtIndex(i)).getObjectID()!==t&&(e=null)),e},getObjectWithObjectID:function(t){return null},indexOfSortedObject:function(t){var e=0;if(t){var i=0;t=t.getObjectID();for(var n=this._saveObjectArr,s=0;s<n.length;s++){var r=n[s].getObjectID();if(t===r||t>=i&&t<r)break;i=r,e++}}else e=cc.INVALID_INDEX;return e},count:function(){return this._saveObjectArr.length},lastObject:function(){var t=this._saveObjectArr;return 0===t.length?null:t[t.length-1]},objectAtIndex:function(t){return this._saveObjectArr[t]},addObject:function(t){this._saveObjectArr.push(t),this._saveObjectArr.sort(_compareObject)},removeObjectAtIndex:function(t){this._saveObjectArr.splice(t,1),this._saveObjectArr.sort(_compareObject)},insertObject:function(t,e){this._saveObjectArr.splice(e,0,t),this._saveObjectArr.sort(_compareObject)}}),cc.TABLEVIEW_FILL_TOPDOWN=0,cc.TABLEVIEW_FILL_BOTTOMUP=1,cc.TableViewCell=cc.Node.extend({_idx:0,_className:"TableViewCell",getIdx:function(){return this._idx},setIdx:function(t){this._idx=t},reset:function(){this._idx=cc.INVALID_INDEX},setObjectID:function(t){this._idx=t},getObjectID:function(){return this._idx}}),_p=cc.TableViewCell.prototype,cc.defineGetterSetter(_p,"objectId",_p.getObjectID,_p.setObjectID),_p=null,cc.TableViewDelegate=cc.ScrollViewDelegate.extend({tableCellTouched:function(t,e){},tableCellHighlight:function(t,e){},tableCellUnhighlight:function(t,e){},tableCellWillRecycle:function(t,e){}}),cc.TableViewDataSource=cc.Class.extend({tableCellSizeForIndex:function(t,e){return this.cellSizeForTable(t)},cellSizeForTable:function(t){return cc.size(0,0)},tableCellAtIndex:function(t,e){return null},numberOfCellsInTableView:function(t){return 0}}),cc.TableView=cc.ScrollView.extend({_vOrdering:null,_indices:null,_cellsFreed:null,_dataSource:null,_tableViewDelegate:null,_oldDirection:null,_cellsPositions:null,_touchedCell:null,ctor:function(t,e,i){cc.ScrollView.prototype.ctor.call(this),this._oldDirection=cc.SCROLLVIEW_DIRECTION_NONE,this._cellsPositions=[],this.initWithViewSize(e,i),this.setDataSource(t),this._updateCellPositions(),this._updateContentSize()},__indexFromOffset:function(t){var e=0,i=this._dataSource.numberOfCellsInTableView(this)-1;if(this.getDirection()===cc.SCROLLVIEW_DIRECTION_HORIZONTAL)t=t.x;else t=t.y;for(var n=this._cellsPositions;i>=e;){var s=0|e+(i-e)/2,r=n[s],o=n[s+1];if(t>=r&&t<=o)return s;t<r?i=s-1:e=s+1}return 0>=e?0:-1},_indexFromOffset:function(t){var e={x:t.x,y:t.y};return t=this._dataSource.numberOfCellsInTableView(this)-1,this._vOrdering===cc.TABLEVIEW_FILL_TOPDOWN&&(e.y=this.getContainer().getContentSize().height-e.y),-1!==(e=this.__indexFromOffset(e))&&((e=Math.max(0,e))>t&&(e=cc.INVALID_INDEX)),e},__offsetFromIndex:function(t){if(this.getDirection()===cc.SCROLLVIEW_DIRECTION_HORIZONTAL)t=cc.p(this._cellsPositions[t],0);else t=cc.p(0,this._cellsPositions[t]);return t},_offsetFromIndex:function(t){var e=this.__offsetFromIndex(t);return t=this._dataSource.tableCellSizeForIndex(this,t),this._vOrdering===cc.TABLEVIEW_FILL_TOPDOWN&&(e.y=this.getContainer().getContentSize().height-e.y-t.height),e},_updateCellPositions:function(){var t=this._dataSource.numberOfCellsInTableView(this),e=this._cellsPositions;if(0<t){for(var i,n=0,s=this._dataSource,r=0;r<t;r++)if(e[r]=n,i=s.tableCellSizeForIndex(this,r),this.getDirection()===cc.SCROLLVIEW_DIRECTION_HORIZONTAL)n+=i.width;else n+=i.height;this._cellsPositions[t]=n}},_updateContentSize:function(){var t=cc.size(0,0),e=this._dataSource.numberOfCellsInTableView(this);if(0<e)if(t=this._cellsPositions[e],this.getDirection()===cc.SCROLLVIEW_DIRECTION_HORIZONTAL)t=cc.size(t,this._viewSize.height);else t=cc.size(this._viewSize.width,t);this.setContentSize(t),this._oldDirection!==this._direction&&(this._direction===cc.SCROLLVIEW_DIRECTION_HORIZONTAL?this.setContentOffset(cc.p(0,0)):this.setContentOffset(cc.p(0,this.minContainerOffset().y)),this._oldDirection=this._direction)},_moveCellOutOfSight:function(t){this._tableViewDelegate&&this._tableViewDelegate.tableCellWillRecycle&&this._tableViewDelegate.tableCellWillRecycle(this,t),this._cellsFreed.addObject(t),this._cellsUsed.removeSortedObject(t),cc.arrayRemoveObject(this._indices,t.getIdx()),t.reset(),t.getParent()===this.getContainer()&&this.getContainer().removeChild(t,!0)},_setIndexForCell:function(t,e){e.setAnchorPoint(0,0),e.setPosition(this._offsetFromIndex(t)),e.setIdx(t)},_addCellIfNecessary:function(t){t.getParent()!==this.getContainer()&&this.getContainer().addChild(t),this._cellsUsed.insertSortedObject(t);var e=this._indices;t=t.getIdx(),-1===e.indexOf(t)&&(e.push(t),e.sort((function(t,e){return t-e})))},getDataSource:function(){return this._dataSource},setDataSource:function(t){this._dataSource=t},getDelegate:function(){return this._tableViewDelegate},setDelegate:function(t){this._tableViewDelegate=t},setVerticalFillOrder:function(t){this._vOrdering!==t&&(this._vOrdering=t,0<this._cellsUsed.count()&&this.reloadData())},getVerticalFillOrder:function(){return this._vOrdering},initWithViewSize:function(t,e){return!!cc.ScrollView.prototype.initWithViewSize.call(this,t,e)&&(this._cellsUsed=new cc.ArrayForObjectSorting,this._cellsFreed=new cc.ArrayForObjectSorting,this._indices=[],this._tableViewDelegate=null,this._vOrdering=cc.TABLEVIEW_FILL_BOTTOMUP,this.setDirection(cc.SCROLLVIEW_DIRECTION_VERTICAL),cc.ScrollView.prototype.setDelegate.call(this,this),!0)},updateCellAtIndex:function(t){if(!(t===cc.INVALID_INDEX||t>this._dataSource.numberOfCellsInTableView(this)-1)){var e=this.cellAtIndex(t);e&&this._moveCellOutOfSight(e),e=this._dataSource.tableCellAtIndex(this,t),this._setIndexForCell(t,e),this._addCellIfNecessary(e)}},insertCellAtIndex:function(t){if(!(t===cc.INVALID_INDEX||t>this._dataSource.numberOfCellsInTableView(this)-1)){var e,i=this._cellsUsed;if(e=i.objectWithObjectID(t))for(var n=e=i.indexOfSortedObject(e);n<i.count();n++)e=i.objectAtIndex(n),this._setIndexForCell(e.getIdx()+1,e);e=this._dataSource.tableCellAtIndex(this,t),this._setIndexForCell(t,e),this._addCellIfNecessary(e),this._updateCellPositions(),this._updateContentSize()}},removeCellAtIndex:function(t){if(!(t===cc.INVALID_INDEX||t>this._dataSource.numberOfCellsInTableView(this)-1)){var e=this.cellAtIndex(t);if(e){var i=this._cellsUsed,n=i.indexOfSortedObject(e);for(this._moveCellOutOfSight(e),cc.arrayRemoveObject(this._indices,t),this._updateCellPositions(),t=i.count()-1;t>n;t--)e=i.objectAtIndex(t),this._setIndexForCell(e.getIdx()-1,e)}}},reloadData:function(){this._oldDirection=cc.SCROLLVIEW_DIRECTION_NONE;for(var t=this._cellsUsed,e=this._cellsFreed,i=this.getContainer(),n=0,s=t.count();n<s;n++){var r=t.objectAtIndex(n);this._tableViewDelegate&&this._tableViewDelegate.tableCellWillRecycle&&this._tableViewDelegate.tableCellWillRecycle(this,r),e.addObject(r),r.reset(),r.getParent()===i&&i.removeChild(r,!0)}this._indices=[],this._cellsUsed=new cc.ArrayForObjectSorting,this._updateCellPositions(),this._updateContentSize(),0<this._dataSource.numberOfCellsInTableView(this)&&this.scrollViewDidScroll(this),this.setNodeDirty()},dequeueCell:function(){if(0===this._cellsFreed.count())return null;var t=this._cellsFreed.objectAtIndex(0);return this._cellsFreed.removeObjectAtIndex(0),t},cellAtIndex:function(t){return-1===this._indices.indexOf(t)?null:this._cellsUsed.objectWithObjectID(t)},scrollViewDidScroll:function(t){var e=this._dataSource.numberOfCellsInTableView(this);if(0!==e){null!==this._tableViewDelegate&&this._tableViewDelegate.scrollViewDidScroll&&this._tableViewDelegate.scrollViewDidScroll(this);var i=0,n=this._viewSize,s=(i=this.getContainer(),this.getContentOffset());s.x*=-1,s.y*=-1;var r=Math.max(e-1,0);if(this._vOrdering===cc.TABLEVIEW_FILL_TOPDOWN&&(s.y+=n.height/i.getScaleY()),(t=this._indexFromOffset(s))===cc.INVALID_INDEX&&(t=e-1),s.y=this._vOrdering===cc.TABLEVIEW_FILL_TOPDOWN?s.y-n.height/i.getScaleY():s.y+n.height/i.getScaleY(),s.x+=n.width/i.getScaleX(),(n=this._indexFromOffset(s))===cc.INVALID_INDEX&&(n=e-1),0<(s=this._cellsUsed).count())for(i=(e=s.objectAtIndex(0)).getIdx();i<t&&(this._moveCellOutOfSight(e),0<s.count());)i=(e=s.objectAtIndex(0)).getIdx();if(0<s.count())for(i=(e=s.lastObject()).getIdx();i<=r&&i>n&&(this._moveCellOutOfSight(e),0<s.count());)i=(e=s.lastObject()).getIdx();for(r=this._indices;t<=n;t++)-1===r.indexOf(t)&&this.updateCellAtIndex(t)}},scrollViewDidZoom:function(t){},onTouchEnded:function(t,e){if(this.isVisible()){if(this._touchedCell){var i=this.getBoundingBox(),n=cc.p(i.x,i.y);n=this._parent.convertToWorldSpace(n);i.x=n.x,i.y=n.y,n=this._tableViewDelegate,cc.rectContainsPoint(i,t.getLocation())&&null!==n&&(n.tableCellUnhighlight&&n.tableCellUnhighlight(this,this._touchedCell),n.tableCellTouched&&n.tableCellTouched(this,this._touchedCell)),this._touchedCell=null}cc.ScrollView.prototype.onTouchEnded.call(this,t,e)}},onTouchBegan:function(t,e){for(var i=this;null!=i;i=i.parent)if(!i.isVisible())return!1;var n;(i=cc.ScrollView.prototype.onTouchBegan.call(this,t,e),1===this._touches.length)?(n=this.getContainer().convertTouchToNodeSpace(t),n=this._indexFromOffset(n),(this._touchedCell=n===cc.INVALID_INDEX?null:this.cellAtIndex(n))&&null!==this._tableViewDelegate&&this._tableViewDelegate.tableCellHighlight&&this._tableViewDelegate.tableCellHighlight(this,this._touchedCell)):this._touchedCell&&(null!==this._tableViewDelegate&&this._tableViewDelegate.tableCellUnhighlight&&this._tableViewDelegate.tableCellUnhighlight(this,this._touchedCell),this._touchedCell=null);return i},onTouchMoved:function(t,e){cc.ScrollView.prototype.onTouchMoved.call(this,t,e),this._touchedCell&&this.isTouchMoved()&&null!==this._tableViewDelegate&&this._tableViewDelegate.tableCellUnhighlight&&this._tableViewDelegate.tableCellUnhighlight(this,this._touchedCell)},onTouchCancelled:function(t,e){cc.ScrollView.prototype.onTouchCancelled.call(this,t,e),this._touchedCell&&(null!==this._tableViewDelegate&&this._tableViewDelegate.tableCellUnhighlight&&this._tableViewDelegate.tableCellUnhighlight(this,this._touchedCell),this._touchedCell=null)}}),_p=cc.TableView.prototype,cc.defineGetterSetter(_p,"dataSource",_p.getDataSource,_p.setDataSource),cc.defineGetterSetter(_p,"delegate",_p.getDelegate,_p.setDelegate),cc.defineGetterSetter(_p,"verticalFillOrder",_p.getVerticalFillOrder,_p.setVerticalFillOrder),_p=null,cc.TableView.create=function(t,e,i){return new cc.TableView(t,e,i)};var PROPERTY_POSITION="position",PROPERTY_CONTENTSIZE="contentSize",PROPERTY_SKEW="skew",PROPERTY_ANCHORPOINT="anchorPoint",PROPERTY_SCALE="scale",PROPERTY_ROTATION="rotation",PROPERTY_TAG="tag",PROPERTY_IGNOREANCHORPOINTFORPOSITION="ignoreAnchorPointForPosition",PROPERTY_VISIBLE="visible",ASSERT_FAIL_UNEXPECTED_PROPERTY=function(t){cc.log("Unexpected property: '"+t+"'!")},ASSERT_FAIL_UNEXPECTED_PROPERTYTYPE=function(t){cc.log("Unexpected property type: '"+t+"'!")};function BlockData(t,e){this.selMenuHander=t,this.target=e}function BlockCCControlData(t,e,i){this.selCCControlHandler=t,this.target=e,this.controlEvents=i}cc.NodeLoader=cc.Class.extend({_customProperties:null,_pt:null,_size:null,_arr2:null,ctor:function(){this._customProperties=new cc._Dictionary,this._pt=cc.p(),this._size=cc.size(),this._arr2=Array(2),this._blockControlData={selCCControlHandler:null,target:null,controlEvents:null}},loadCCNode:function(t,e){return this._createCCNode(t,e)},parseProperties:function(t,e,i){for(var n=i.readInt(!1),s=n+(s=i.readInt(!1)),r=0;r<s;r++){var o=r>=n,a=i.readInt(!1),c=i.readCachedString(),h=!1,l=i._data[i._currentByte++];switch(l!==CCB_PLATFORM_ALL&&l!==CCB_PLATFORM_IOS&&l!==CCB_PLATFORM_MAC||(h=!0),o&&(t.ccbFileNode?h=-1!==(t=t.ccbFileNode).userObject.indexOf(c):t===i._animationManager.getRootNode()&&((o=t.userObject)||(o=[],t.userObject=o),o.push(c))),a){case CCB_PROPTYPE_POSITION:a=this.parsePropTypePosition(t,e,i,c),h&&this.onHandlePropTypePosition(t,e,c,a,i);break;case CCB_PROPTYPE_POINT:a=this.parsePropTypePoint(t,e,i),h&&this.onHandlePropTypePoint(t,e,c,a,i);break;case CCB_PROPTYPE_POINTLOCK:a=this.parsePropTypePointLock(t,e,i),h&&this.onHandlePropTypePointLock(t,e,c,a,i);break;case CCB_PROPTYPE_SIZE:a=this.parsePropTypeSize(t,e,i),h&&this.onHandlePropTypeSize(t,e,c,a,i);break;case CCB_PROPTYPE_SCALELOCK:a=this.parsePropTypeScaleLock(t,e,i,c),h&&this.onHandlePropTypeScaleLock(t,e,c,a,i);break;case CCB_PROPTYPE_FLOATXY:a=this.parsePropTypeFloatXY(t,e,i),h&&this.onHandlePropTypeFloatXY(t,e,c,a,i);break;case CCB_PROPTYPE_FLOAT:a=this.parsePropTypeFloat(t,e,i),h&&this.onHandlePropTypeFloat(t,e,c,a,i);break;case CCB_PROPTYPE_DEGREES:a=this.parsePropTypeDegrees(t,e,i,c),h&&this.onHandlePropTypeDegrees(t,e,c,a,i);break;case CCB_PROPTYPE_FLOATSCALE:a=this.parsePropTypeFloatScale(t,e,i),h&&this.onHandlePropTypeFloatScale(t,e,c,a,i);break;case CCB_PROPTYPE_INTEGER:a=this.parsePropTypeInteger(t,e,i),h&&this.onHandlePropTypeInteger(t,e,c,a,i);break;case CCB_PROPTYPE_INTEGERLABELED:a=this.parsePropTypeIntegerLabeled(t,e,i),h&&this.onHandlePropTypeIntegerLabeled(t,e,c,a,i);break;case CCB_PROPTYPE_FLOATVAR:a=this.parsePropTypeFloatVar(t,e,i),h&&this.onHandlePropTypeFloatVar(t,e,c,a,i);break;case CCB_PROPTYPE_CHECK:a=this.parsePropTypeCheck(t,e,i,c),h&&this.onHandlePropTypeCheck(t,e,c,a,i);break;case CCB_PROPTYPE_SPRITEFRAME:a=this.parsePropTypeSpriteFrame(t,e,i,c),h&&this.onHandlePropTypeSpriteFrame(t,e,c,a,i);break;case CCB_PROPTYPE_ANIMATION:a=this.parsePropTypeAnimation(t,e,i),h&&this.onHandlePropTypeAnimation(t,e,c,a,i);break;case CCB_PROPTYPE_TEXTURE:a=this.parsePropTypeTexture(t,e,i),h&&this.onHandlePropTypeTexture(t,e,c,a,i);break;case CCB_PROPTYPE_BYTE:a=this.parsePropTypeByte(t,e,i,c),h&&this.onHandlePropTypeByte(t,e,c,a,i);break;case CCB_PROPTYPE_COLOR3:a=this.parsePropTypeColor3(t,e,i,c),h&&this.onHandlePropTypeColor3(t,e,c,a,i);break;case CCB_PROPTYPE_COLOR4VAR:a=this.parsePropTypeColor4FVar(t,e,i),h&&this.onHandlePropTypeColor4FVar(t,e,c,a,i);break;case CCB_PROPTYPE_FLIP:a=this.parsePropTypeFlip(t,e,i),h&&this.onHandlePropTypeFlip(t,e,c,a,i);break;case CCB_PROPTYPE_BLENDMODE:a=this.parsePropTypeBlendFunc(t,e,i),h&&this.onHandlePropTypeBlendFunc(t,e,c,a,i);break;case CCB_PROPTYPE_FNTFILE:a=i.getCCBRootPath()+this.parsePropTypeFntFile(t,e,i),h&&this.onHandlePropTypeFntFile(t,e,c,a,i);break;case CCB_PROPTYPE_FONTTTF:a=this.parsePropTypeFontTTF(t,e,i),h&&this.onHandlePropTypeFontTTF(t,e,c,a,i);break;case CCB_PROPTYPE_STRING:a=this.parsePropTypeString(t,e,i),h&&this.onHandlePropTypeString(t,e,c,a,i);break;case CCB_PROPTYPE_TEXT:a=this.parsePropTypeText(t,e,i),h&&this.onHandlePropTypeText(t,e,c,a,i);break;case CCB_PROPTYPE_BLOCK:a=this.parsePropTypeBlock(t,e,i),h&&this.onHandlePropTypeBlock(t,e,c,a,i);break;case CCB_PROPTYPE_BLOCKCCCONTROL:a=this.parsePropTypeBlockCCControl(t,e,i),h&&null!=a&&this.onHandlePropTypeBlockCCControl(t,e,c,a,i);break;case CCB_PROPTYPE_CCBFILE:a=this.parsePropTypeCCBFile(t,e,i),h&&this.onHandlePropTypeCCBFile(t,e,c,a,i);break;default:ASSERT_FAIL_UNEXPECTED_PROPERTYTYPE(a)}}},getCustomProperties:function(){return this._customProperties},_createCCNode:function(t,e){return new cc.Node},parsePropTypePosition:function(t,e,i,n){var s=i.readFloat(),r=i.readFloat(),o=i.readInt(!1);return cc.getAbsolutePosition(s,r,o,e?e._contentSize:i._animationManager._rootContainerSize,n,this._pt),t.setPosition(this._pt),-1<i._animatedProps.indexOf(n)&&i._animationManager.setBaseValue([s,r,o],t,n),this._pt},parsePropTypePoint:function(t,e,i){return this._pt.x=i.readFloat(),this._pt.y=i.readFloat(),this._pt},parsePropTypePointLock:function(t,e,i){return this._pt.x=i.readFloat(),this._pt.y=i.readFloat(),this._pt},parsePropTypeSize:function(t,e,i){t=i.readFloat();var n=i.readFloat(),s=i.readInt(!1);switch(e=e?e._contentSize:i._animationManager._rootContainerSize,s){case CCB_SIZETYPE_ABSOLUTE:break;case CCB_SIZETYPE_RELATIVE_CONTAINER:t=e.width-t,n=e.height-n;break;case CCB_SIZETYPE_PERCENT:t=e.width*t/100,n=e.height*n/100;break;case CCB_SIZETYPE_HORIZONTAL_PERCENT:t=e.width*t/100;break;case CCB_SIZETYPE_VERTICAL_PERCENT:n=e.height*n/100;break;case CCB_SIZETYPE_MULTIPLY_RESOLUTION:t*=e=cc.BuilderReader.getResolutionScale(),n*=e;break;default:cc.log("Unknown CCB type.")}return this._size.width=t,this._size.height=n,this._size},parsePropTypeScaleLock:function(t,e,i,n){e=i.readFloat();var s=i.readFloat(),r=i.readInt(!1);return-1<i._animatedProps.indexOf(n)&&i._animationManager.setBaseValue([e,s,r],t,n),r===CCB_SCALETYPE_MULTIPLY_RESOLUTION&&(e*=t=cc.BuilderReader.getResolutionScale(),s*=t),this._pt.x=e,this._pt.y=s,this._pt},parsePropTypeFloat:function(t,e,i){return i.readFloat()},parsePropTypeDegrees:function(t,e,i,n){return e=i.readFloat(),-1<i._animatedProps.indexOf(n)&&i._animationManager.setBaseValue(e,t,n),e},parsePropTypeFloatScale:function(t,e,i){return t=i.readFloat(),i.readInt(!1)===CCB_SCALETYPE_MULTIPLY_RESOLUTION&&(t*=cc.BuilderReader.getResolutionScale()),t},parsePropTypeInteger:function(t,e,i){return i.readInt(!0)},parsePropTypeIntegerLabeled:function(t,e,i){return i.readInt(!0)},parsePropTypeFloatVar:function(t,e,i){return this._arr2[0]=i.readFloat(),this._arr2[1]=i.readFloat(),this._arr2},parsePropTypeCheck:function(t,e,i,n){return e=!!i._data[i._currentByte++],-1<i._animatedProps.indexOf(n)&&i._animationManager.setBaseValue(e,t,n),e},parsePropTypeSpriteFrame:function(t,e,i,n){e=i.readCachedString();var s,r=i.readCachedString();return r&&(0===e.length?(r=i._ccbRootPath+r,r=(e=cc.textureCache.addImage(r)).getContentSize(),r=cc.rect(0,0,r.width,r.height),s=new cc.SpriteFrame(e,r)):(s=cc.spriteFrameCache,e=i._ccbRootPath+e,-1===i._loadedSpriteSheets.indexOf(e)&&(s.addSpriteFrames(e),i._loadedSpriteSheets.push(e)),s=s.getSpriteFrame(r)),-1<i._animatedProps.indexOf(n)&&i._animationManager.setBaseValue(s,t,n)),s},parsePropTypeAnimation:function(t,e,i){return t=i._ccbRootPath+i.readCachedString(),i=i.readCachedString(),e=null,i=cc.BuilderReader.lastPathComponent(i),t=cc.BuilderReader.lastPathComponent(t),i&&((e=cc.animationCache).addAnimations(t),e=e.getAnimation(i)),e},parsePropTypeTexture:function(t,e,i){return(t=i._ccbRootPath+i.readCachedString())?cc.textureCache.addImage(t):null},parsePropTypeByte:function(t,e,i,n){return e=i._data[i._currentByte++],-1<i._animatedProps.indexOf(n)&&i._animationManager.setBaseValue(e,t,n),e},parsePropTypeColor3:function(t,e,i,n){e=i._data[i._currentByte++];var s=i._data[i._currentByte++],r=i._data[i._currentByte++];return e=cc.color(e,s,r),-1<i._animatedProps.indexOf(n)&&i._animationManager.setBaseValue(e,t,n),e},parsePropTypeColor4FVar:function(t,e,i){t=0|255*i.readFloat(),e=0|255*i.readFloat();var n=0|255*i.readFloat(),s=1>=(s=i.readFloat())?0|255*s:s,r=0|255*i.readFloat(),o=0|255*i.readFloat(),a=0|255*i.readFloat();return i=i.readFloat(),this._arr2[0]={r:t,g:e,b:n,a:s},this._arr2[1]={r:r,g:o,b:a,a:1>=i?0|255*i:i},this._arr2},parsePropTypeFlip:function(t,e,i){return this._arr2[0]=!!i._data[i._currentByte++],this._arr2[1]=!!i._data[i._currentByte++],this._arr2},parsePropTypeBlendFunc:function(t,e,i){return t=i.readInt(!1),i=i.readInt(!1),new cc.BlendFunc(t,i)},parsePropTypeFntFile:function(t,e,i){return i.readCachedString()},parsePropTypeString:function(t,e,i){return i.readCachedString()},parsePropTypeText:function(t,e,i){return i.readCachedString()},parsePropTypeFontTTF:function(t,e,i){return i.readCachedString()},parsePropTypeBlock:function(t,e,i){e=i.readCachedString();var n=i.readInt(!1);if(n!==CCB_TARGETTYPE_NONE){var s=null;if(i._jsControlled)n===CCB_TARGETTYPE_DOCUMENTROOT?(i.addDocumentCallbackNode(t),i.addDocumentCallbackName(e),i.addDocumentCallbackControlEvents(0)):(i.addOwnerCallbackNode(t),i.addOwnerCallbackName(e),i.addOwnerCallbackControlEvents(0));else if(n===CCB_TARGETTYPE_DOCUMENTROOT?s=i._animationManager._rootNode:n===CCB_TARGETTYPE_OWNER&&(s=i._owner),null!==s)if(0<e.length){if(t=0,s.onResolveCCBCCMenuItemSelector&&(t=s.onResolveCCBCCMenuItemSelector(s,e)),0===t&&(i=i._ccbSelectorResolver)&&(t=i.onResolveCCBCCMenuItemSelector(s,e)),0!==t)return new BlockData(t,s);cc.log("Skipping selector '"+e+"' since no CCBSelectorResolver is present.")}else cc.log("Unexpected empty selector.");else cc.log("Unexpected NULL target for selector.")}return null},parsePropTypeBlockCCControl:function(t,e,i){e=i.readCachedString();var n=i.readInt(!1),s=i.readInt(!1);if(n!==CCB_TARGETTYPE_NONE)if(i._jsControlled)n===CCB_TARGETTYPE_DOCUMENTROOT?(i.addDocumentCallbackNode(t),i.addDocumentCallbackName(e),i.addDocumentCallbackControlEvents(s)):(i.addOwnerCallbackNode(t),i.addOwnerCallbackName(e),i.addOwnerCallbackControlEvents(s));else if(t=null,n===CCB_TARGETTYPE_DOCUMENTROOT?t=i._animationManager._rootNode:n===CCB_TARGETTYPE_OWNER&&(t=i._owner),null!==t)if(0<e.length){if(n=0,t.onResolveCCBCCControlSelector&&(n=t.onResolveCCBCCControlSelector(t,e)),0===n&&(null!=(i=i._ccbSelectorResolver)&&(n=i.onResolveCCBCCControlSelector(t,e))),0!==n)return this._blockControlData.selCCControlHandler=n,this._blockControlData.target=t,this._blockControlData.controlEvents=s,this._blockControlData;cc.log("Skipping selector '"+e+"' since no CCBSelectorResolver is present.")}else cc.log("Unexpected empty selector.");else cc.log("Unexpected NULL target for selector.");return null},parsePropTypeCCBFile:function(t,e,i){var n=i._ccbRootPath+i.readCachedString();n=cc.BuilderReader.deletePathExtension(n)+".ccbi";t=new cc.BuilderReader(i);var s=cc.loader.getRes(n);return s||(s=cc.loader.getUrl(n),s=hlddz.convertToDownloadURL(s),s=cc.loader.loadBinarySync(s),cc.loader.cache[n]=s),t.initWithData(s,i._owner),t._animationManager.setRootContainerSize(e._contentSize),t.setAnimationManagers(i._animationManagers),t._animationManager.setOwner(i._owner),e=t.readFileWithCleanUp(!1),i.setAnimationManagers(t._animationManagers),e&&-1!==t._animationManager._autoPlaySequenceId&&t._animationManager.runAnimations(t._animationManager._autoPlaySequenceId,0),e},parsePropTypeFloatXY:function(t,e,i){return this._pt.x=i.readFloat(),this._pt.y=i.readFloat(),this._pt},onHandlePropTypePosition:function(t,e,i,n,s){i===PROPERTY_POSITION?t.setPosition(n):ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypePoint:function(t,e,i,n,s){i===PROPERTY_ANCHORPOINT?t.setAnchorPoint(n):ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypePointLock:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeSize:function(t,e,i,n,s){i===PROPERTY_CONTENTSIZE?t.setContentSize(n):ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeScaleLock:function(t,e,i,n,s){i===PROPERTY_SCALE?t.setScale(n.x,n.y):ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeFloatXY:function(t,e,i,n,s){i===PROPERTY_SKEW?(t._skewX=n.x,t._skewY=n.y):(s=i+"Y",t[e=i+"X"]&&t[s]||ASSERT_FAIL_UNEXPECTED_PROPERTY(i),t[e](n.x),t[s](n.y))},onHandlePropTypeFloat:function(t,e,i,n,s){this._customProperties.setObject(n,i)},onHandlePropTypeDegrees:function(t,e,i,n,s){i===PROPERTY_ROTATION?t.setRotation(n):ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeFloatScale:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeInteger:function(t,e,i,n,s){i===PROPERTY_TAG?t.tag=n:ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeIntegerLabeled:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeFloatVar:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeCheck:function(t,e,i,n,s){i===PROPERTY_VISIBLE?t._visible=n:i===PROPERTY_IGNOREANCHORPOINTFORPOSITION?t._ignoreAnchorPointForPosition=n:ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeSpriteFrame:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeAnimation:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeTexture:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeByte:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeColor3:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeColor4FVar:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeFlip:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeBlendFunc:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeFntFile:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeString:function(t,e,i,n,s){this._customProperties.setObject(n,i)},onHandlePropTypeText:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeFontTTF:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeBlock:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeBlockCCControl:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)},onHandlePropTypeCCBFile:function(t,e,i,n,s){ASSERT_FAIL_UNEXPECTED_PROPERTY(i)}}),cc.NodeLoader.loader=function(){return new cc.NodeLoader},cc.NodeLoaderListener=cc.Class.extend({onNodeLoaded:function(t,e){}}),cc.BuilderSelectorResolver=cc.Class.extend({onResolveCCBCCMenuItemSelector:function(t,e){},onResolveCCBCCCallFuncSelector:function(t,e){},onResolveCCBCCControlSelector:function(t,e){}}),cc.BuilderScriptOwnerProtocol=cc.Class.extend({createNew:function(){}}),cc.BuilderMemberVariableAssigner=cc.Class.extend({onAssignCCBMemberVariable:function(t,e,i){return!1},onAssignCCBCustomProperty:function(t,e,i){return!1}});var PROPERTY_CCBFILE="ccbFile";cc.BuilderFileLoader=cc.NodeLoader.extend({_createCCNode:function(t,e){var i=new cc.Node;return i.ccbFileNode=null,i},onHandlePropTypeCCBFile:function(t,e,i,n,s){i===PROPERTY_CCBFILE?t.ccbFileNode=n:cc.NodeLoader.prototype.onHandlePropTypeCCBFile.call(this,t,e,i,n,s)}}),cc.BuilderFileLoader.loader=function(){return new cc.BuilderFileLoader};var PROPERTY_ENABLED="enabled",PROPERTY_SELECTED="selected",PROPERTY_CCCONTROL="ccControl";cc.ControlLoader=cc.NodeLoader.extend({_createCCNode:function(t,e){},onHandlePropTypeBlockCCControl:function(t,e,i,n,s){i===PROPERTY_CCCONTROL?t.addTargetWithActionForControlEvents(n.target,n.selCCControlHandler,n.controlEvents):cc.NodeLoader.prototype.onHandlePropTypeBlockCCControl.call(this,t,e,i,n,s)},onHandlePropTypeCheck:function(t,e,i,n,s){i===PROPERTY_ENABLED?t.setEnabled(n):i===PROPERTY_SELECTED?t.setSelected(n):cc.NodeLoader.prototype.onHandlePropTypeCheck.call(this,t,e,i,n,s)}});var PROPERTY_ZOOMONTOUCHDOWN="zoomOnTouchDown",PROPERTY_TITLE_NORMAL="title|1",PROPERTY_TITLE_HIGHLIGHTED="title|2",PROPERTY_TITLE_DISABLED="title|3",PROPERTY_TITLECOLOR_NORMAL="titleColor|1",PROPERTY_TITLECOLOR_HIGHLIGHTED="titleColor|2",PROPERTY_TITLECOLOR_DISABLED="titleColor|3",PROPERTY_TITLETTF_NORMAL="titleTTF|1",PROPERTY_TITLETTF_HIGHLIGHTED="titleTTF|2",PROPERTY_TITLETTF_DISABLED="titleTTF|3",PROPERTY_TITLETTFSIZE_NORMAL="titleTTFSize|1",PROPERTY_TITLETTFSIZE_HIGHLIGHTED="titleTTFSize|2",PROPERTY_TITLETTFSIZE_DISABLED="titleTTFSize|4",PROPERTY_LABELANCHORPOINT="labelAnchorPoint",PROPERTY_PREFEREDSIZE="preferedSize",PROPERTY_BACKGROUNDSPRITEFRAME_NORMAL="backgroundSpriteFrame|1",PROPERTY_BACKGROUNDSPRITEFRAME_HIGHLIGHTED="backgroundSpriteFrame|2",PROPERTY_BACKGROUNDSPRITEFRAME_DISABLED="backgroundSpriteFrame|3";cc.ControlButtonLoader=cc.ControlLoader.extend({_createCCNode:function(t,e){return new cc.ControlButton},onHandlePropTypeCheck:function(t,e,i,n,s){i===PROPERTY_ZOOMONTOUCHDOWN?t.zoomOnTouchDown=n:cc.ControlLoader.prototype.onHandlePropTypeCheck.call(this,t,e,i,n,s)},onHandlePropTypeString:function(t,e,i,n,s){i===PROPERTY_TITLE_NORMAL?t.setTitleForState(n,cc.CONTROL_STATE_NORMAL):i===PROPERTY_TITLE_HIGHLIGHTED?t.setTitleForState(n,cc.CONTROL_STATE_HIGHLIGHTED):i===PROPERTY_TITLE_DISABLED?t.setTitleForState(n,cc.CONTROL_STATE_DISABLED):cc.ControlLoader.prototype.onHandlePropTypeString.call(this,t,e,i,n,s)},onHandlePropTypeFontTTF:function(t,e,i,n,s){i===PROPERTY_TITLETTF_NORMAL?t.setTitleTTFForState(n,cc.CONTROL_STATE_NORMAL):i===PROPERTY_TITLETTF_HIGHLIGHTED?t.setTitleTTFForState(n,cc.CONTROL_STATE_HIGHLIGHTED):i===PROPERTY_TITLETTF_DISABLED?t.setTitleTTFForState(n,cc.CONTROL_STATE_DISABLED):cc.ControlLoader.prototype.onHandlePropTypeFontTTF.call(this,t,e,i,n,s)},onHandlePropTypeFloatScale:function(t,e,i,n,s){i===PROPERTY_TITLETTFSIZE_NORMAL?t.setTitleTTFSizeForState(n,cc.CONTROL_STATE_NORMAL):i===PROPERTY_TITLETTFSIZE_HIGHLIGHTED?t.setTitleTTFSizeForState(n,cc.CONTROL_STATE_HIGHLIGHTED):i===PROPERTY_TITLETTFSIZE_DISABLED?t.setTitleTTFSizeForState(n,cc.CONTROL_STATE_DISABLED):cc.ControlLoader.prototype.onHandlePropTypeFloatScale.call(this,t,e,i,n,s)},onHandlePropTypePoint:function(t,e,i,n,s){i===PROPERTY_LABELANCHORPOINT?t.setLabelAnchorPoint(n):cc.ControlLoader.prototype.onHandlePropTypePoint.call(this,t,e,i,n,s)},onHandlePropTypeSize:function(t,e,i,n,s){i===PROPERTY_PREFEREDSIZE?t.setPreferredSize(n):cc.ControlLoader.prototype.onHandlePropTypeSize.call(this,t,e,i,n,s)},onHandlePropTypeSpriteFrame:function(t,e,i,n,s){i===PROPERTY_BACKGROUNDSPRITEFRAME_NORMAL?null!=n&&t.setBackgroundSpriteFrameForState(n,cc.CONTROL_STATE_NORMAL):i===PROPERTY_BACKGROUNDSPRITEFRAME_HIGHLIGHTED?null!=n&&t.setBackgroundSpriteFrameForState(n,cc.CONTROL_STATE_HIGHLIGHTED):i===PROPERTY_BACKGROUNDSPRITEFRAME_DISABLED?null!=n&&t.setBackgroundSpriteFrameForState(n,cc.CONTROL_STATE_DISABLED):cc.ControlLoader.prototype.onHandlePropTypeSpriteFrame.call(this,t,e,i,n,s)},onHandlePropTypeColor3:function(t,e,i,n,s){i===PROPERTY_TITLECOLOR_NORMAL?t.setTitleColorForState(n,cc.CONTROL_STATE_NORMAL):i===PROPERTY_TITLECOLOR_HIGHLIGHTED?t.setTitleColorForState(n,cc.CONTROL_STATE_HIGHLIGHTED):i===PROPERTY_TITLECOLOR_DISABLED?t.setTitleColorForState(n,cc.CONTROL_STATE_DISABLED):cc.ControlLoader.prototype.onHandlePropTypeColor3.call(this,t,e,i,n,s)}}),cc.ControlButtonLoader.loader=function(){return new cc.ControlButtonLoader};var PROPERTY_CONTAINER="container",PROPERTY_DIRECTION="direction",PROPERTY_CLIPSTOBOUNDS="clipsToBounds",PROPERTY_BOUNCES="bounces",PROPERTY_SCALE="scale";cc.ScrollViewLoader=cc.NodeLoader.extend({_createCCNode:function(t,e){return new cc.ScrollView},onHandlePropTypeSize:function(t,e,i,n,s){i===PROPERTY_CONTENTSIZE?t.setViewSize(n):cc.NodeLoader.prototype.onHandlePropTypeSize.call(this,t,e,i,n,s)},onHandlePropTypeCCBFile:function(t,e,i,n,s){i===PROPERTY_CONTAINER?(t.setContainer(n),t.updateInset()):cc.NodeLoader.prototype.onHandlePropTypeCCBFile.call(this,t,e,i,n,s)},onHandlePropTypeCheck:function(t,e,i,n,s){i===PROPERTY_CLIPSTOBOUNDS?t.setClippingToBounds(n):i===PROPERTY_BOUNCES?t.setBounceable(n):cc.NodeLoader.prototype.onHandlePropTypeCheck.call(this,t,e,i,n,s)},onHandlePropTypeFloat:function(t,e,i,n,s){i===PROPERTY_SCALE?t.setScale(n):cc.NodeLoader.prototype.onHandlePropTypeFloat.call(this,t,e,i,n,s)},onHandlePropTypeIntegerLabeled:function(t,e,i,n,s){i===PROPERTY_DIRECTION?t.setDirection(n):cc.NodeLoader.prototype.onHandlePropTypeIntegerLabeled.call(this,t,e,i,n,s)}}),cc.ScrollViewLoader.loader=function(){return new cc.ScrollViewLoader};var PROPERTY_CONTENTSIZE="contentSize",PROPERTY_SPRITEFRAME="spriteFrame",PROPERTY_COLOR="color",PROPERTY_OPACITY="opacity",PROPERTY_BLENDFUNC="blendFunc",PROPERTY_INSETLEFT="insetLeft",PROPERTY_INSETTOP="insetTop",PROPERTY_INSETRIGHT="insetRight",PROPERTY_INSETBOTTOM="insetBottom";cc.Scale9SpriteLoader=cc.NodeLoader.extend({_createCCNode:function(t,e){var i=new cc.Scale9Sprite;return i.setAnchorPoint(0,0),i},onHandlePropTypeColor3:function(t,e,i,n,s){i===PROPERTY_COLOR?255===n.r&&255===n.g&&255===n.b||t.setColor(n):cc.NodeLoader.prototype.onHandlePropTypeColor3.call(this,t,e,i,n,s)},onHandlePropTypeByte:function(t,e,i,n,s){i===PROPERTY_OPACITY?t.setOpacity(n):cc.NodeLoader.prototype.onHandlePropTypeByte.call(this,t,e,i,n,s)},onHandlePropTypeBlendFunc:function(t,e,i,n,s){i!==PROPERTY_BLENDFUNC&&cc.NodeLoader.prototype.onHandlePropTypeBlendFunc.call(this,t,e,i,n,s)},onHandlePropTypeSpriteFrame:function(t,e,i,n,s){i===PROPERTY_SPRITEFRAME?t.setSpriteFrame(n):cc.NodeLoader.prototype.onHandlePropTypeSpriteFrame.call(this,t,e,i,n,s)},onHandlePropTypeSize:function(t,e,i,n,s){i!==PROPERTY_CONTENTSIZE&&(i===PROPERTY_PREFEREDSIZE?t.setPreferredSize(n):cc.NodeLoader.prototype.onHandlePropTypeSize.call(this,t,e,i,n,s))},onHandlePropTypeFloat:function(t,e,i,n,s){i===PROPERTY_INSETLEFT?t.setInsetLeft(n):i===PROPERTY_INSETTOP?t.setInsetTop(n):i===PROPERTY_INSETRIGHT?t.setInsetRight(n):i===PROPERTY_INSETBOTTOM?t.setInsetBottom(n):cc.NodeLoader.prototype.onHandlePropTypeFloat.call(this,t,e,i,n,s)}}),cc.Scale9SpriteLoader.loader=function(){return new cc.Scale9SpriteLoader};var PROPERTY_FLIP="flip",PROPERTY_DISPLAYFRAME="displayFrame",PROPERTY_COLOR="color",PROPERTY_OPACITY="opacity",PROPERTY_BLENDFUNC="blendFunc";cc.SpriteLoader=cc.NodeLoader.extend({_createCCNode:function(t,e){return new cc.Sprite},onHandlePropTypeColor3:function(t,e,i,n,s){i===PROPERTY_COLOR?255===n.r&&255===n.g&&255===n.b||t.setColor(n):cc.NodeLoader.prototype.onHandlePropTypeColor3.call(this,t,e,i,n,s)},onHandlePropTypeByte:function(t,e,i,n,s){i===PROPERTY_OPACITY?t.setOpacity(n):cc.NodeLoader.prototype.onHandlePropTypeByte.call(this,t,e,i,n,s)},onHandlePropTypeBlendFunc:function(t,e,i,n,s){i===PROPERTY_BLENDFUNC?t.setBlendFunc(n):cc.NodeLoader.prototype.onHandlePropTypeBlendFunc.call(this,t,e,i,n,s)},onHandlePropTypeSpriteFrame:function(t,e,i,n,s){i===PROPERTY_DISPLAYFRAME?n?t.setSpriteFrame(n):cc.log("ERROR: SpriteFrame is null"):cc.NodeLoader.prototype.onHandlePropTypeSpriteFrame.call(this,t,e,i,n,s)},onHandlePropTypeFlip:function(t,e,i,n,s){i===PROPERTY_FLIP?(t.setFlippedX(n[0]),t.setFlippedY(n[1])):cc.NodeLoader.prototype.onHandlePropTypeFlip.call(this,t,e,i,n,s)}}),cc.SpriteLoader.loader=function(){return new cc.SpriteLoader};var PROPERTY_TOUCH_ENABLED="touchEnabled",PROPERTY_IS_TOUCH_ENABLED="isTouchEnabled",PROPERTY_ACCELEROMETER_ENABLED="accelerometerEnabled",PROPERTY_IS_ACCELEROMETER_ENABLED="isAccelerometerEnabled",PROPERTY_IS_MOUSE_ENABLED="isMouseEnabled",PROPERTY_MOUSE_ENABLED="mouseEnabled",PROPERTY_KEYBOARD_ENABLED="keyboardEnabled",PROPERTY_IS_KEYBOARD_ENABLED="isKeyboardEnabled";cc.LayerLoader=cc.NodeLoader.extend({_createCCNode:function(t,e){var i=new cc.Layer;return i.setContentSize(0,0),i},onHandlePropTypeCheck:function(t,e,i,n,s){i!==PROPERTY_TOUCH_ENABLED&&i!==PROPERTY_IS_TOUCH_ENABLED&&i!==PROPERTY_ACCELEROMETER_ENABLED&&i!==PROPERTY_IS_ACCELEROMETER_ENABLED&&i!==PROPERTY_MOUSE_ENABLED&&i!==PROPERTY_IS_MOUSE_ENABLED&&(i===PROPERTY_KEYBOARD_ENABLED||i===PROPERTY_IS_KEYBOARD_ENABLED?t.setKeyboardEnabled&&!cc.sys.isNative?t.setKeyboardEnabled(n):cc.log("The property '"+PROPERTY_IS_KEYBOARD_ENABLED+"' is not supported!"):cc.NodeLoader.prototype.onHandlePropTypeCheck.call(this,t,e,i,n,s))}}),cc.LayerLoader.loader=function(){return new cc.LayerLoader},cc.LayerColorLoader=cc.LayerLoader.extend({_createCCNode:function(t,e){return new cc.LayerColor},onHandlePropTypeColor3:function(t,e,i,n,s){i===PROPERTY_COLOR?t.setColor(n):cc.LayerLoader.prototype.onHandlePropTypeColor3.call(this,t,e,i,n,s)},onHandlePropTypeByte:function(t,e,i,n,s){i===PROPERTY_OPACITY?t.setOpacity(n):cc.LayerLoader.prototype.onHandlePropTypeByte.call(this,t,e,i,n,s)},onHandlePropTypeBlendFunc:function(t,e,i,n,s){i===PROPERTY_BLENDFUNC?t.setBlendFunc(n):cc.LayerLoader.prototype.onHandlePropTypeBlendFunc.call(this,t,e,i,n,s)}}),cc.LayerColorLoader.loader=function(){return new cc.LayerColorLoader};var PROPERTY_STARTCOLOR="startColor",PROPERTY_ENDCOLOR="endColor",PROPERTY_STARTOPACITY="startOpacity",PROPERTY_ENDOPACITY="endOpacity",PROPERTY_VECTOR="vector";cc.LayerGradientLoader=cc.LayerLoader.extend({_createCCNode:function(t,e){return new cc.LayerGradient},onHandlePropTypeColor3:function(t,e,i,n,s){i===PROPERTY_STARTCOLOR?t.setStartColor(n):i===PROPERTY_ENDCOLOR?t.setEndColor(n):cc.LayerLoader.prototype.onHandlePropTypeColor3.call(this,t,e,i,n,s)},onHandlePropTypeByte:function(t,e,i,n,s){i===PROPERTY_STARTOPACITY?t.setStartOpacity(n):i===PROPERTY_ENDOPACITY?t.setEndOpacity(n):cc.LayerLoader.prototype.onHandlePropTypeByte.call(this,t,e,i,n,s)},onHandlePropTypePoint:function(t,e,i,n,s){i===PROPERTY_VECTOR?t.setVector(n):cc.LayerLoader.prototype.onHandlePropTypePoint.call(this,t,e,i,n,s)},onHandlePropTypeBlendFunc:function(t,e,i,n,s){i===PROPERTY_BLENDFUNC?t.setBlendFunc(n):cc.LayerLoader.prototype.onHandlePropTypeBlendFunc.call(this,t,e,i,n,s)}}),cc.LayerGradientLoader.loader=function(){return new cc.LayerGradientLoader},cc.MenuLoader=cc.LayerLoader.extend({_createCCNode:function(t,e){var i=new cc.Menu;return i.setContentSize(0,0),i}}),cc.MenuLoader.loader=function(){return new cc.MenuLoader};var PROPERTY_BLOCK="block",PROPERTY_ISENABLED="isEnabled";cc.MenuItemLoader=cc.NodeLoader.extend({_createCCNode:function(t,e){return null},onHandlePropTypeBlock:function(t,e,i,n,s){i===PROPERTY_BLOCK?null!=n&&t.setTarget(n.selMenuHander,n.target):cc.NodeLoader.prototype.onHandlePropTypeBlock.call(this,t,e,i,n,s)},onHandlePropTypeCheck:function(t,e,i,n,s){i===PROPERTY_ISENABLED?t.setEnabled(n):cc.NodeLoader.prototype.onHandlePropTypeCheck.call(this,t,e,i,n,s)}});var PROPERTY_NORMALDISPLAYFRAME="normalSpriteFrame",PROPERTY_SELECTEDDISPLAYFRAME="selectedSpriteFrame",PROPERTY_DISABLEDDISPLAYFRAME="disabledSpriteFrame";cc.MenuItemImageLoader=cc.MenuItemLoader.extend({_createCCNode:function(t,e){return new cc.MenuItemImage},onHandlePropTypeSpriteFrame:function(t,e,i,n,s){i===PROPERTY_NORMALDISPLAYFRAME?null!=n&&t.setNormalSpriteFrame(n):i===PROPERTY_SELECTEDDISPLAYFRAME?null!=n&&t.setSelectedSpriteFrame(n):i===PROPERTY_DISABLEDDISPLAYFRAME?null!=n&&t.setDisabledSpriteFrame(n):cc.MenuItemLoader.prototype.onHandlePropTypeSpriteFrame.call(this,t,e,i,n,s)}}),cc.MenuItemImageLoader.loader=function(){return new cc.MenuItemImageLoader};var PROPERTY_FONTNAME="fontName",PROPERTY_FONTSIZE="fontSize",PROPERTY_HORIZONTALALIGNMENT="horizontalAlignment",PROPERTY_VERTICALALIGNMENT="verticalAlignment",PROPERTY_STRING="string",PROPERTY_DIMENSIONS="dimensions";cc.LabelTTFLoader=cc.NodeLoader.extend({_createCCNode:function(t,e){return new cc.LabelTTF},onHandlePropTypeColor3:function(t,e,i,n,s){i===PROPERTY_COLOR?255===n.r&&255===n.g&&255===n.b||t.setColor(n):cc.NodeLoader.prototype.onHandlePropTypeColor3.call(this,t,e,i,n,s)},onHandlePropTypeByte:function(t,e,i,n,s){i===PROPERTY_OPACITY?t.setOpacity(n):cc.NodeLoader.prototype.onHandlePropTypeByte.call(this,t,e,i,n,s)},onHandlePropTypeBlendFunc:function(t,e,i,n,s){i===PROPERTY_BLENDFUNC?t.setBlendFunc(n):cc.NodeLoader.prototype.onHandlePropTypeBlendFunc.call(this,t,e,i,n,s)},onHandlePropTypeFontTTF:function(t,e,i,n,s){i===PROPERTY_FONTNAME?t.setFontName(n):cc.NodeLoader.prototype.onHandlePropTypeFontTTF.call(this,t,e,i,n,s)},onHandlePropTypeText:function(t,e,i,n,s){i===PROPERTY_STRING?t.setString(n):cc.NodeLoader.prototype.onHandlePropTypeText.call(this,t,e,i,n,s)},onHandlePropTypeFloatScale:function(t,e,i,n,s){i===PROPERTY_FONTSIZE?t.setFontSize(n):cc.NodeLoader.prototype.onHandlePropTypeFloatScale.call(this,t,e,i,n,s)},onHandlePropTypeIntegerLabeled:function(t,e,i,n,s){i===PROPERTY_HORIZONTALALIGNMENT?t.setHorizontalAlignment(n):i===PROPERTY_VERTICALALIGNMENT?t.setVerticalAlignment(n):cc.NodeLoader.prototype.onHandlePropTypeIntegerLabeled.call(this,t,e,i,n,s)},onHandlePropTypeSize:function(t,e,i,n,s){i===PROPERTY_DIMENSIONS?t.setDimensions(n):cc.NodeLoader.prototype.onHandlePropTypeSize.call(this,t,e,i,n,s)}}),cc.LabelTTFLoader.loader=function(){return new cc.LabelTTFLoader};var PROPERTY_FNTFILE="fntFile";cc.LabelBMFontLoader=cc.NodeLoader.extend({_createCCNode:function(t,e){return new cc.LabelBMFont},onHandlePropTypeColor3:function(t,e,i,n,s){i===PROPERTY_COLOR?255===n.r&&255===n.g&&255===n.b||t.setColor(n):cc.NodeLoader.prototype.onHandlePropTypeColor3.call(this,t,e,i,n,s)},onHandlePropTypeByte:function(t,e,i,n,s){i===PROPERTY_OPACITY?t.setOpacity(n):cc.NodeLoader.prototype.onHandlePropTypeByte.call(this,t,e,i,n,s)},onHandlePropTypeBlendFunc:function(t,e,i,n,s){i===PROPERTY_BLENDFUNC?t.setBlendFunc(n):cc.NodeLoader.prototype.onHandlePropTypeBlendFunc.call(this,t,e,i,n,s)},onHandlePropTypeFntFile:function(t,e,i,n,s){i===PROPERTY_FNTFILE?t.setFntFile(n):cc.NodeLoader.prototype.onHandlePropTypeFntFile.call(this,t,e,i,n,s)},onHandlePropTypeText:function(t,e,i,n,s){i===PROPERTY_STRING?t.setString(n):cc.NodeLoader.prototype.onHandlePropTypeText.call(this,t,e,i,n,s)}}),cc.LabelBMFontLoader.loader=function(){return new cc.LabelBMFontLoader};var PROPERTY_EMITERMODE="emitterMode",PROPERTY_POSVAR="posVar",PROPERTY_EMISSIONRATE="emissionRate",PROPERTY_DURATION="duration",PROPERTY_TOTALPARTICLES="totalParticles",PROPERTY_LIFE="life",PROPERTY_STARTSIZE="startSize",PROPERTY_ENDSIZE="endSize",PROPERTY_STARTSPIN="startSpin",PROPERTY_ENDSPIN="endSpin",PROPERTY_ANGLE="angle",PROPERTY_GRAVITY="gravity",PROPERTY_SPEED="speed",PROPERTY_TANGENTIALACCEL="tangentialAccel",PROPERTY_RADIALACCEL="radialAccel",PROPERTY_TEXTURE="texture",PROPERTY_STARTRADIUS="startRadius",PROPERTY_ENDRADIUS="endRadius",PROPERTY_ROTATEPERSECOND="rotatePerSecond";cc.ParticleSystemLoader=cc.NodeLoader.extend({_createCCNode:function(t,e){return new cc.ParticleSystem},onHandlePropTypeIntegerLabeled:function(t,e,i,n,s){i===PROPERTY_EMITERMODE?t.setEmitterMode(n):cc.NodeLoader.prototype.onHandlePropTypeIntegerLabeled.call(this,t,e,i,n,s)},onHandlePropTypePoint:function(t,e,i,n,s){i===PROPERTY_POSVAR?t.setPosVar(n):i===PROPERTY_GRAVITY?t.setGravity(n):cc.NodeLoader.prototype.onHandlePropTypePoint.call(this,t,e,i,n,s)},onHandlePropTypeFloat:function(t,e,i,n,s){i===PROPERTY_EMISSIONRATE?t.setEmissionRate(n):i===PROPERTY_DURATION?t.setDuration(n):cc.NodeLoader.prototype.onHandlePropTypeFloat.call(this,t,e,i,n,s)},onHandlePropTypeInteger:function(t,e,i,n,s){i===PROPERTY_TOTALPARTICLES?t.setTotalParticles(n):cc.NodeLoader.prototype.onHandlePropTypeInteger.call(this,t,e,i,n,s)},onHandlePropTypeFloatVar:function(t,e,i,n,s){i===PROPERTY_LIFE?(t.setLife(n[0]),t.setLifeVar(n[1])):i===PROPERTY_STARTSIZE?(t.setStartSize(n[0]),t.setStartSizeVar(n[1])):i===PROPERTY_ENDSIZE?(t.setEndSize(n[0]),t.setEndSizeVar(n[1])):i===PROPERTY_STARTSPIN?(t.setStartSpin(n[0]),t.setStartSpinVar(n[1])):i===PROPERTY_ENDSPIN?(t.setEndSpin(n[0]),t.setEndSpinVar(n[1])):i===PROPERTY_ANGLE?(t.setAngle(n[0]),t.setAngleVar(n[1])):i===PROPERTY_SPEED?(t.setSpeed(n[0]),t.setSpeedVar(n[1])):i===PROPERTY_TANGENTIALACCEL?(t.setTangentialAccel(n[0]),t.setTangentialAccelVar(n[1])):i===PROPERTY_RADIALACCEL?(t.setRadialAccel(n[0]),t.setRadialAccelVar(n[1])):i===PROPERTY_STARTRADIUS?(t.setStartRadius(n[0]),t.setStartRadiusVar(n[1])):i===PROPERTY_ENDRADIUS?(t.setEndRadius(n[0]),t.setEndRadiusVar(n[1])):i===PROPERTY_ROTATEPERSECOND?(t.setRotatePerSecond(n[0]),t.setRotatePerSecondVar(n[1])):cc.NodeLoader.prototype.onHandlePropTypeFloatVar.call(this,t,e,i,n,s)},onHandlePropTypeColor4FVar:function(t,e,i,n,s){i===PROPERTY_STARTCOLOR?(t.setStartColor(n[0]),t.setStartColorVar(n[1])):i===PROPERTY_ENDCOLOR?(t.setEndColor(n[0]),t.setEndColorVar(n[1])):cc.NodeLoader.prototype.onHandlePropTypeColor4FVar.call(this,t,e,i,n,s)},onHandlePropTypeBlendFunc:function(t,e,i,n,s){i===PROPERTY_BLENDFUNC?t.setBlendFunc(n):cc.NodeLoader.prototype.onHandlePropTypeBlendFunc.call(this,t,e,i,n,s)},onHandlePropTypeTexture:function(t,e,i,n,s){i===PROPERTY_TEXTURE?t.setTexture(n):cc.NodeLoader.prototype.onHandlePropTypeTexture.call(this,t,e,i,n,s)}}),cc.ParticleSystemLoader.loader=function(){return new cc.ParticleSystemLoader},cc.NodeLoaderLibrary=cc.Class.extend({_ccNodeLoaders:null,ctor:function(){this._ccNodeLoaders={}},registerDefaultCCNodeLoaders:function(){this.registerCCNodeLoader("CCNode",cc.NodeLoader.loader()),this.registerCCNodeLoader("CCLayer",cc.LayerLoader.loader()),this.registerCCNodeLoader("CCLayerColor",cc.LayerColorLoader.loader()),this.registerCCNodeLoader("CCLayerGradient",cc.LayerGradientLoader.loader()),this.registerCCNodeLoader("CCSprite",cc.SpriteLoader.loader()),this.registerCCNodeLoader("CCLabelBMFont",cc.LabelBMFontLoader.loader()),this.registerCCNodeLoader("CCLabelTTF",cc.LabelTTFLoader.loader()),this.registerCCNodeLoader("CCScale9Sprite",cc.Scale9SpriteLoader.loader()),this.registerCCNodeLoader("CCScrollView",cc.ScrollViewLoader.loader()),this.registerCCNodeLoader("CCBFile",cc.BuilderFileLoader.loader()),this.registerCCNodeLoader("CCMenu",cc.MenuLoader.loader()),this.registerCCNodeLoader("CCMenuItemImage",cc.MenuItemImageLoader.loader()),this.registerCCNodeLoader("CCControlButton",cc.ControlButtonLoader.loader()),this.registerCCNodeLoader("CCParticleSystemQuad",cc.ParticleSystemLoader.loader())},registerCCNodeLoader:function(t,e){this._ccNodeLoaders[t]=e},unregisterCCNodeLoader:function(t){this._ccNodeLoaders[t]&&delete this._ccNodeLoaders[t]},getCCNodeLoader:function(t){return this._ccNodeLoaders[t]?this._ccNodeLoaders[t]:null},purge:function(t){if(t)for(var e in this._ccNodeLoaders)delete this._ccNodeLoaders[e];this._ccNodeLoaders={}}}),cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary=null,cc.NodeLoaderLibrary.library=function(){return new cc.NodeLoaderLibrary},cc.NodeLoaderLibrary.sharedCCNodeLoaderLibrary=function(){return null==cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary&&(cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary=new cc.NodeLoaderLibrary,cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary.registerDefaultCCNodeLoaders()),cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary},cc.NodeLoaderLibrary.purgeSharedCCNodeLoaderLibrary=function(){cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary=null},cc.NodeLoaderLibrary.newDefaultCCNodeLoaderLibrary=function(){var t=cc.NodeLoaderLibrary.library();return t.registerDefaultCCNodeLoaders(),t};var CCB_VERSION=5,CCB_PROPTYPE_POSITION=0,CCB_PROPTYPE_SIZE=1,CCB_PROPTYPE_POINT=2,CCB_PROPTYPE_POINTLOCK=3,CCB_PROPTYPE_SCALELOCK=4,CCB_PROPTYPE_DEGREES=5,CCB_PROPTYPE_INTEGER=6,CCB_PROPTYPE_FLOAT=7,CCB_PROPTYPE_FLOATVAR=8,CCB_PROPTYPE_CHECK=9,CCB_PROPTYPE_SPRITEFRAME=10,CCB_PROPTYPE_TEXTURE=11,CCB_PROPTYPE_BYTE=12,CCB_PROPTYPE_COLOR3=13,CCB_PROPTYPE_COLOR4VAR=14,CCB_PROPTYPE_FLIP=15,CCB_PROPTYPE_BLENDMODE=16,CCB_PROPTYPE_FNTFILE=17,CCB_PROPTYPE_TEXT=18,CCB_PROPTYPE_FONTTTF=19,CCB_PROPTYPE_INTEGERLABELED=20,CCB_PROPTYPE_BLOCK=21,CCB_PROPTYPE_ANIMATION=22,CCB_PROPTYPE_CCBFILE=23,CCB_PROPTYPE_STRING=24,CCB_PROPTYPE_BLOCKCCCONTROL=25,CCB_PROPTYPE_FLOATSCALE=26,CCB_PROPTYPE_FLOATXY=27,CCB_FLOAT0=0,CCB_FLOAT1=1,CCB_FLOAT_MINUS1=2,CCB_FLOAT05=3,CCB_FLOAT_INTEGER=4,CCB_FLOAT_FULL=5,CCB_PLATFORM_ALL=0,CCB_PLATFORM_IOS=1,CCB_PLATFORM_MAC=2,CCB_TARGETTYPE_NONE=0,CCB_TARGETTYPE_DOCUMENTROOT=1,CCB_TARGETTYPE_OWNER=2,CCB_KEYFRAME_EASING_INSTANT=0,CCB_KEYFRAME_EASING_LINEAR=1,CCB_KEYFRAME_EASING_CUBIC_IN=2,CCB_KEYFRAME_EASING_CUBIC_OUT=3,CCB_KEYFRAME_EASING_CUBIC_INOUT=4,CCB_KEYFRAME_EASING_ELASTIC_IN=5,CCB_KEYFRAME_EASING_ELASTIC_OUT=6,CCB_KEYFRAME_EASING_ELASTIC_INOUT=7,CCB_KEYFRAME_EASING_BOUNCE_IN=8,CCB_KEYFRAME_EASING_BOUNCE_OUT=9,CCB_KEYFRAME_EASING_BOUNCE_INOUT=10,CCB_KEYFRAME_EASING_BACK_IN=11,CCB_KEYFRAME_EASING_BACK_OUT=12,CCB_KEYFRAME_EASING_BACK_INOUT=13,CCB_POSITIONTYPE_RELATIVE_BOTTOM_LEFT=0,CCB_POSITIONTYPE_RELATIVE_TOP_LEFT=1,CCB_POSITIONTYPE_RELATIVE_TOP_RIGHT=2,CCB_POSITIONTYPE_RELATIVE_BOTTOM_RIGHT=3,CCB_POSITIONTYPE_PERCENT=4,CCB_POSITIONTYPE_MULTIPLY_RESOLUTION=5,CCB_SIZETYPE_ABSOLUTE=0,CCB_SIZETYPE_PERCENT=1,CCB_SIZETYPE_RELATIVE_CONTAINER=2,CCB_SIZETYPE_HORIZONTAL_PERCENT=3,CCB_SIZETYPE_VERTICAL_PERCENT=4,CCB_SIZETYPE_MULTIPLY_RESOLUTION=5,CCB_SCALETYPE_ABSOLUTE=0,CCB_SCALETYPE_MULTIPLY_RESOLUTION=1;cc.BuilderReader=cc.Class.extend({_jsControlled:!1,_data:null,_ccbRootPath:"",_bytes:0,_currentByte:0,_currentBit:0,_stringCache:null,_loadedSpriteSheets:null,_owner:null,_animationManager:null,_animationManagers:null,_animatedProps:null,_ccNodeLoaderLibrary:null,_ccNodeLoaderListener:null,_ccbMemberVariableAssigner:null,_ccbSelectorResolver:null,_ownerOutletNames:null,_ownerOutletNodes:null,_nodesWithAnimationManagers:null,_animationManagerForNodes:null,_ownerCallbackNames:null,_ownerCallbackNodes:null,_ownerCallbackEvents:null,_readNodeGraphFromData:!1,ctor:function(t,e,i,n){this._stringCache=[],this._loadedSpriteSheets=[],this._currentByte=this._currentBit=-1,0!==arguments.length&&(t instanceof cc.BuilderReader?(this._loadedSpriteSheets=t._loadedSpriteSheets,this._ccNodeLoaderLibrary=t._ccNodeLoaderLibrary,this._ccbMemberVariableAssigner=t._ccbMemberVariableAssigner,this._ccbSelectorResolver=t._ccbSelectorResolver,this._ccNodeLoaderListener=t._ccNodeLoaderListener,this._ownerCallbackNames=t._ownerCallbackNames,this._ownerCallbackNodes=t._ownerCallbackNodes,this._ownerCallbackEvents=t._ownerCallbackEvents,this._ownerOutletNames=t._ownerOutletNames,this._ownerOutletNodes=t._ownerOutletNodes,this._ccbRootPath=t._ccbRootPath):(this._ccNodeLoaderLibrary=t,this._ccbMemberVariableAssigner=e,this._ccbSelectorResolver=i,this._ccNodeLoaderListener=n))},getCCBRootPath:function(){return this._ccbRootPath},setCCBRootPath:function(t){this._ccbRootPath=t},initWithData:function(t,e){return this._animationManager=new cc.BuilderAnimationManager,this._data=t,this._bytes=t.length,this._currentByte=this._currentBit=0,this._owner=e,this._animationManager.setRootContainerSize(cc.director.getWinSize()),!0},_loadBinarySync:function(t){var e=this.getXMLHttpRequest(),i="load "+t+" failed!";e.open("GET",t,!1);var n=null;if(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)){if(e.setRequestHeader("Accept-Charset","x-user-defined"),e.send(null),200!==e.status)return cc.log(i),null;(e=cc._convertResponseBodyToText(e.responseBody))&&(n=this._stringConvertToArray(e),this._fileDataCache[t]=n)}else{if(e.overrideMimeType&&e.overrideMimeType("text/plain; charset=x-user-defined"),e.send(null),200!==e.status)return cc.log(i),null;n=this._stringConvertToArray(e.responseText),this._fileDataCache[t]=n}return n},readNodeGraphFromFile:function(t,e,i,n){null==i?i=cc.director.getWinSize():i instanceof cc.BuilderAnimationManager&&(n=i,i=cc.director.getWinSize());var s=cc.loader.getRes(t);return s||(s=cc.loader.getUrl(t),s=cc.loader.loadBinarySync(s),cc.loader.cache[t]=s),this.readNodeGraphFromData(s,e,i,n)},readNodeGraphFromData:function(t,e,i){if(this.initWithData(t,e),(t=this._animationManager).setRootContainerSize(i),t.setOwner(e),this._ownerOutletNames=[],this._ownerOutletNodes=[],this._ownerCallbackNames=[],this._ownerCallbackNodes=[],this._ownerCallbackEvents=[],this._animationManagers=new cc._Dictionary,(e=this.readFileWithCleanUp(!0))&&-1!==t.getAutoPlaySequenceId()&&t.runAnimations(t.getAutoPlaySequenceId(),0),this._jsControlled){i=[],t=[];for(var n=this._animationManagers,s=n.allKeys(),r=0;r<s.length;r++)i.push(s[r]),t.push(n.objectForKey(s[r]));this._nodesWithAnimationManagers=i,this._animationManagerForNodes=t}return e},createSceneWithNodeGraphFromFile:function(t,e,i,n){return t=this.readNodeGraphFromFile(t,e,i,n),(e=new cc.Scene).addChild(t),e},getCCBMemberVariableAssigner:function(){return this._ccbMemberVariableAssigner},getCCBSelectorResolver:function(){return this._ccbSelectorResolver},getAnimationManager:function(){return this._animationManager},setAnimationManager:function(t){this._animationManager=t},getAnimatedProperties:function(){return this._animatedProps},getLoadedSpriteSheet:function(){return this._loadedSpriteSheets},getOwner:function(){return this._owner},readInt:function(t){for(var e=0,i=this._data[this._currentByte],n=!!(i&1<<this._currentBit++);!n;)if(e++,n=!!(i&1<<this._currentBit++),8<=this._currentBit&&(this._currentBit=0,this._currentByte++,i=this._data[this._currentByte],this._currentByte>this._data.length))throw Error("out of the data bound");for(var s=0,r=e-1;0<=r;r--){if(n=!!(i&1<<this._currentBit++),8<=this._currentBit&&(this._currentBit=0,this._currentByte++,i=this._data[this._currentByte],this._currentByte>this._data.length))throw Error("out of the data bound");n&&(s|=1<<r)}return s|=1<<e,this._currentBit&&(this._currentBit=0,this._currentByte++),t?s%2?0|s/2:0|-s/2:s-1},readByte:function(){var t=this._data[this._currentByte];return this._currentByte++,t},readBool:function(){return!!this._data[this._currentByte++]},readFloat:function(){switch(this._data[this._currentByte++]){case CCB_FLOAT0:return 0;case CCB_FLOAT1:return 1;case CCB_FLOAT_MINUS1:return-1;case CCB_FLOAT05:return.5;case CCB_FLOAT_INTEGER:return this.readInt(!0);default:return this._decodeFloat(23,8)}},_decodeFloat:function(t,e){var i=t+e+1>>3;if(this._currentByte+i>=this._data.length)throw Error("Index out of bound");var n=Math.pow(2,e-1)-1,s=this._readBitsOnly(t+e,1,i),r=this._readBitsOnly(t,e,i),o=0,a=2,c=0;do{for(var h=this._data[this._currentByte+i-++c-1],l=t%8||8,u=1<<l;u>>=1;)h&u&&(o+=1/a),a*=2}while(t-=l);return this._currentByte+=i,r===1+(n<<1)?o?NaN:s?-1/0:1/0:(1+-2*s)*(r||o?r?Math.pow(2,r-n)*(1+o):Math.pow(2,1-n)*o:0)},_readBitsOnly:function(t,e,i){var n=(t+e)%8,s=t%8,r=i-(t>>3)-1,o=r-(t=i+(-(t+e)>>3));for(e=this._data[this._currentByte+i-r-1]>>s&(1<<(o?8-s:e))-1,o&&n&&(e+=(this._data[this._currentByte+i-t-1]&(1<<n)-1)<<(o--<<3)-s,t++);o;)e+=this._shl(this._data[this._currentByte+i-t-1],(o--<<3)-s),t++;return e},_shl:function(t,e){for(++e;--e;t=1073741824==(1073741824&(t%=2147483648))?2*t:2*(t-1073741824)+2147483648);return t},readCachedString:function(){return this._stringCache[this.readInt(!1)]},isJSControlled:function(){return this._jsControlled},getOwnerCallbackNames:function(){return this._ownerCallbackNames},getOwnerCallbackNodes:function(){return this._ownerCallbackNodes},getOwnerCallbackControlEvents:function(){return this._ownerCallbackEvents},getOwnerOutletNames:function(){return this._ownerOutletNames},getOwnerOutletNodes:function(){return this._ownerOutletNodes},getNodesWithAnimationManagers:function(){return this._nodesWithAnimationManagers},getAnimationManagersForNodes:function(){return this._animationManagerForNodes},getAnimationManagers:function(){return this._animationManagers},setAnimationManagers:function(t){this._animationManagers=t},addOwnerCallbackName:function(t){this._ownerCallbackNames.push(t)},addOwnerCallbackNode:function(t){this._ownerCallbackNodes.push(t)},addOwnerCallbackControlEvents:function(t){this._ownerCallbackEvents.push(t)},addDocumentCallbackName:function(t){this._animationManager.addDocumentCallbackName(t)},addDocumentCallbackNode:function(t){this._animationManager.addDocumentCallbackNode(t)},addDocumentCallbackControlEvents:function(t){this._animationManager.addDocumentCallbackControlEvents(t)},readFileWithCleanUp:function(t){if(!this._readHeader()||!this._readStringCache()||!this._readSequences())return null;var e=this._readNodeGraph();return this._animationManagers.setObject(this._animationManager,e),t&&this._cleanUpNodeGraph(e),e},addOwnerOutletName:function(t){this._ownerOutletNames.push(t)},addOwnerOutletNode:function(t){null!=t&&this._ownerOutletNodes.push(t)},_cleanUpNodeGraph:function(t){t.userObject=null;for(var e=0,i=(t=t.getChildren()).length;e<i;e++)this._cleanUpNodeGraph(t[e])},_readCallbackKeyframesForSeq:function(t){var e=this.readInt(!1);if(!e)return!0;for(var i=new cc.BuilderSequenceProperty,n=this._jsControlled,s=this._animationManager,r=i.getKeyframes(),o=0;o<e;o++){var a=this.readFloat(),c=this.readCachedString(),h=this.readInt(!1),l=[c,h],u=new cc.BuilderKeyframe;u.setTime(a),u.setValue(l),n&&s.getKeyframeCallbacks().push(h+":"+c),r.push(u)}return t.setCallbackChannel(i),!0},_readSoundKeyframesForSeq:function(t){var e=this.readInt(!1);if(!e)return!0;for(var i=new cc.BuilderSequenceProperty,n=i.getKeyframes(),s=0;s<e;s++){var r,o=this.readFloat(),a=[a=this.readCachedString(),r=this.readFloat(),this.readFloat(),this.readFloat()];(r=new cc.BuilderKeyframe).setTime(o),r.setValue(a),n.push(r)}return t.setSoundChannel(i),!0},_readSequences:function(){for(var t=this._animationManager.getSequences(),e=this.readInt(!1),i=0;i<e;i++){var n=new cc.BuilderSequence;if(n.setDuration(this.readFloat()),n.setName(this.readCachedString()),n.setSequenceId(this.readInt(!1)),n.setChainedSequenceId(this.readInt(!0)),!this._readCallbackKeyframesForSeq(n)||!this._readSoundKeyframesForSeq(n))return!1;t.push(n)}return this._animationManager.setAutoPlaySequenceId(this.readInt(!0)),!0},readKeyframe:function(t){var e=new cc.BuilderKeyframe;e.setTime(this.readFloat());var i=this.readInt(!1),n=0,s=null;return i!==CCB_KEYFRAME_EASING_CUBIC_IN&&i!==CCB_KEYFRAME_EASING_CUBIC_OUT&&i!==CCB_KEYFRAME_EASING_CUBIC_INOUT&&i!==CCB_KEYFRAME_EASING_ELASTIC_IN&&i!==CCB_KEYFRAME_EASING_ELASTIC_OUT&&i!==CCB_KEYFRAME_EASING_ELASTIC_INOUT||(n=this.readFloat()),e.setEasingType(i),e.setEasingOpt(n),t===CCB_PROPTYPE_CHECK?s=!!this._data[this._currentByte++]:t===CCB_PROPTYPE_BYTE?s=this._data[this._currentByte++]:t===CCB_PROPTYPE_COLOR3?s=cc.color(this._data[this._currentByte++],this._data[this._currentByte++],this._data[this._currentByte++]):t===CCB_PROPTYPE_FLOATXY?s=[this.readFloat(),this.readFloat()]:t===CCB_PROPTYPE_DEGREES?s=this.readFloat():t===CCB_PROPTYPE_SCALELOCK||t===CCB_PROPTYPE_POSITION||t===CCB_PROPTYPE_FLOATXY?s=[this.readFloat(),this.readFloat()]:t===CCB_PROPTYPE_SPRITEFRAME&&(t=this.readCachedString(),i=this.readCachedString(),""===t?(i=this._ccbRootPath+i,i=(t=cc.textureCache.addImage(i)).getContentSize(),i=cc.rect(0,0,i.width,i.height),s=new cc.SpriteFrame(t,i)):(t=this._ccbRootPath+t,n=cc.spriteFrameCache,-1===this._loadedSpriteSheets.indexOf(t)&&(n.addSpriteFrames(t),this._loadedSpriteSheets.push(t)),s=n.getSpriteFrame(i))),e.setValue(s),e},_readHeader:function(){if(!this._data)return!1;var t=this._readStringFromBytes(this._currentByte,4,!0);return this._currentByte+=4,"ccbi"===t&&((t=this.readInt(!1))!==CCB_VERSION?(cc.log("WARNING! Incompatible ccbi file version (file: "+t+" reader: "+CCB_VERSION+")"),!1):(this._jsControlled=!!this._data[this._currentByte++],this._animationManager._jsControlled=this._jsControlled,!0))},_readStringFromBytes:function(t,e,i){var n="",s=this._data;if(i)for(i=e-1;0<=i;i--)n+=String.fromCharCode(s[t+i]);else for(i=0;i<e;i++)n+=String.fromCharCode(s[t+i]);return n},_readStringCache:function(){for(var t=this.readInt(!1),e=0;e<t;e++)this._readStringCacheEntry();return!0},_readStringCacheEntry:function(){for(var t=(t=this._data[this._currentByte++])<<8|(e=this._data[this._currentByte++]),e="",i=this._data,n=this._currentByte,s=0;s<t;s++){var r;e=e+"%"+(r=1<(r=i[n+s].toString("16").toUpperCase()).length?r:"0"+r)}e=decodeURIComponent(e),this._currentByte+=t,this._stringCache.push(e)},_readNodeGraph:function(t){var e,i=this.readCachedString(),n=this._jsControlled,s=this._animationManager;n&&(e=this.readCachedString());var r,o=this.readInt(!1);o!==CCB_TARGETTYPE_NONE&&(r=this.readCachedString()),(i=this._ccNodeLoaderLibrary.getCCNodeLoader(i))||(i=this._ccNodeLoaderLibrary.getCCNodeLoader("CCNode"));var a=i.loadCCNode(t,this);s.getRootNode()||s.setRootNode(a),n&&a===s.getRootNode()&&s.setDocumentControllerName(e);var c=new cc._Dictionary,h=this._animatedProps=[],l=this.readInt(!1);for(e=0;e<l;++e){for(var u=this.readInt(!1),d=new cc._Dictionary,_=this.readInt(!1),g=0;g<_;++g){var f=new cc.BuilderSequenceProperty;f.setName(this.readCachedString()),f.setType(this.readInt(!1)),h.push(f.getName());for(var p=this.readInt(!1),m=f.getKeyframes(),T=0;T<p;++T){var S=this.readKeyframe(f.getType());m.push(S)}d.setObject(f,f.getName())}c.setObject(d,u)}if(0<c.count()&&s.addNode(a,c),i.parseProperties(a,t,this),(t=!!a.ccbFileNode)&&((e=a.ccbFileNode).setPosition(a.getPosition()),e.setRotation(a.getRotation()),e.setScaleX(a.getScaleX()),e.setScaleY(a.getScaleY()),e.setTag(a.getTag()),e.setVisible(!0),s.moveAnimationsFromNode(a,e),a.ccbFileNode=null,a=e),h=c=null,o!==CCB_TARGETTYPE_NONE&&(n?o===CCB_TARGETTYPE_DOCUMENTROOT?(s.addDocumentOutletName(r),s.addDocumentOutletNode(a)):(this._ownerOutletNames.push(r),this._ownerOutletNodes.push(a)):(o===CCB_TARGETTYPE_DOCUMENTROOT?c=s.getRootNode():o===CCB_TARGETTYPE_OWNER&&(c=this._owner),c||(e=!1,c.onAssignCCBMemberVariable&&(e=c.onAssignCCBMemberVariable(c,r,a)),h=this._ccbMemberVariableAssigner,e||null==h||!h.onAssignCCBMemberVariable)||h.onAssignCCBMemberVariable(c,r,a))),0<i.getCustomProperties().length&&(r=!1,!n&&(null!=(c=a)&&null!=c.onAssignCCBCustomProperty)))for(s=(n=i.getCustomProperties()).allKeys(),e=0;e<s.length;e++)o=n.objectForKey(s[e]),r=c.onAssignCCBCustomProperty(c,s[e],o),h=this._ccbMemberVariableAssigner,r||null==h||null==h.onAssignCCBCustomProperty||h.onAssignCCBCustomProperty(c,s[e],o);for(this._animatedProps=null,n=this.readInt(!1),e=0;e<n;e++)r=this._readNodeGraph(a),a.addChild(r);return t||(null!=a&&a.onNodeLoaded?a.onNodeLoaded(a,i):null!=this._ccNodeLoaderListener&&this._ccNodeLoaderListener.onNodeLoaded(a,i)),a},_readUTF8:function(){}}),cc.BuilderReader._ccbResolutionScale=1,cc.BuilderReader.setResolutionScale=function(t){cc.BuilderReader._ccbResolutionScale=t},cc.BuilderReader.getResolutionScale=function(){return cc.BuilderReader._ccbResolutionScale},cc.BuilderReader.loadAsScene=function(t,e,i,n){return n=n||cc.BuilderReader.getResourcePath(),t=cc.BuilderReader.load(t,e,i,n),(e=new cc.Scene).addChild(t),e},cc.BuilderReader._controllerClassCache={},cc.BuilderReader.registerController=function(t,e){cc.BuilderReader._controllerClassCache[t]=cc.Class.extend(e)},cc.BuilderReader.load=function(t,e,i,n){n=n||cc.BuilderReader.getResourcePath();var s,r,o,a=new cc.BuilderReader(cc.NodeLoaderLibrary.newDefaultCCNodeLoaderLibrary());if(a.setCCBRootPath(n),(5>t.length||t.toLowerCase().lastIndexOf(".ccbi")!==t.length-5)&&(t+=".ccbi"),t=a.readNodeGraphFromFile(t,e,i),e){n=a.getOwnerCallbackNames();var c=a.getOwnerCallbackNodes(),h=a.getOwnerCallbackControlEvents();for(i=0;i<n.length;i++)s=n[i],r=c[i],o=h[i],r instanceof cc.ControlButton?r.addTargetWithActionForControlEvents(e,e[s],o):r.setCallback(e[s],e);for(n=a.getOwnerOutletNames(),c=a.getOwnerOutletNodes(),i=0;i<n.length;i++)s=n[i],r=c[i],e[s]=r}if(n=a.getNodesWithAnimationManagers(),a=a.getAnimationManagersForNodes(),!n||!a)return t;for(c=cc.BuilderReader._controllerClassCache,i=0;i<n.length;i++){var l=n[i],u=a[i];if(l.animationManager=u,s=u.getDocumentControllerName()){if(!(h=c[s]))throw Error("Can not find controller : "+s);(h=new h).controllerName=s,l.controller=h,h.rootNode=l;var d=u.getDocumentCallbackNames(),_=u.getDocumentCallbackNodes(),g=u.getDocumentCallbackControlEvents();for(l=0;l<d.length;l++)s=d[l],r=_[l],o=g[l],r instanceof cc.ControlButton?r.addTargetWithActionForControlEvents(h,h[s],o):r.setCallback(h[s],h);for(o=u.getDocumentOutletNames(),d=u.getDocumentOutletNodes(),l=0;l<o.length;l++)s=o[l],r=d[l],h[s]=r;for(h.onDidLoadFromCCB&&cc.isFunction(h.onDidLoadFromCCB)&&h.onDidLoadFromCCB(),s=u.getKeyframeCallbacks(),l=0;l<s.length;l++)r=(o=s[l].split(":"))[0],o=o[1],1==r?u.setCallFunc(cc.callFunc(h[o],h),s[l]):2==r&&e&&u.setCallFunc(cc.callFunc(e[o],e),s[l])}}return u.runAnimations(u.getAutoPlaySequenceId(),0),t},cc.BuilderReader._resourcePath="",cc.BuilderReader.setResourcePath=function(t){cc.BuilderReader._resourcePath=t},cc.BuilderReader.getResourcePath=function(){return cc.BuilderReader._resourcePath},cc.BuilderReader.lastPathComponent=function(t){var e=t.lastIndexOf("/");return-1!==e?t.substring(e+1,t.length-e):t},cc.BuilderReader.deletePathExtension=function(t){var e=t.lastIndexOf(".");return-1!==e?t.substring(0,e):t},cc.BuilderReader.toLowerCase=function(t){return t.toLowerCase()},cc.BuilderReader.endsWith=function(t,e){return t.length>=e.length&&0===t.lastIndexOf(e)},cc.BuilderReader.concat=function(t,e){return t+e},cc.loader.register(["ccbi"],cc._binaryLoader),cc.INT_VALUE=0,cc.FLOAT_VALUE=1,cc.POINTER_VALUE=2,cc.BOOL_VALUE=3,cc.UNSIGNEDCHAR_VALUE=4,cc.BuilderValue=cc.Class.extend({_value:null,_type:0,getIntValue:function(){},getFloatValue:function(){},getBoolValue:function(){},getByteValue:function(){},getPointer:function(){},getValue:function(){return this._value}}),cc.BuilderValue.create=function(t){return new cc.BuilderValue},cc.BuilderKeyframe=cc.Class.extend({_value:null,_time:0,_easingType:0,_easingOpt:0,getValue:function(){return this._value},setValue:function(t){this._value=t},getTime:function(){return this._time},setTime:function(t){this._time=t},getEasingType:function(){return this._easingType},setEasingType:function(t){this._easingType=t},getEasingOpt:function(){return this._easingOpt},setEasingOpt:function(t){this._easingOpt=t}}),cc.BuilderSequence=cc.Class.extend({_duration:0,_name:"",_sequenceId:0,_chainedSequenceId:0,_callbackChannel:null,_soundChannel:null,ctor:function(){this._name=""},getDuration:function(){return this._duration},setDuration:function(t){this._duration=t},getName:function(){return this._name},setName:function(t){this._name=t},getSequenceId:function(){return this._sequenceId},setSequenceId:function(t){this._sequenceId=t},getChainedSequenceId:function(){return this._chainedSequenceId},setChainedSequenceId:function(t){this._chainedSequenceId=t},getCallbackChannel:function(){return this._callbackChannel},setCallbackChannel:function(t){this._callbackChannel=t},getSoundChannel:function(){return this._soundChannel},setSoundChannel:function(t){this._soundChannel=t}}),cc.BuilderSequenceProperty=cc.Class.extend({_name:null,_type:0,_keyFrames:null,ctor:function(){this.init()},init:function(){this._keyFrames=[],this._name=""},getName:function(){return this._name},setName:function(t){this._name=t},getType:function(){return this._type},setType:function(t){this._type=t},getKeyframes:function(){return this._keyFrames}}),cc.getAbsolutePosition=function(t,e,i,n,s,r){return s=r||cc.p(0,0),i===CCB_POSITIONTYPE_RELATIVE_BOTTOM_LEFT?(s.x=t,s.y=e):i===CCB_POSITIONTYPE_RELATIVE_TOP_LEFT?(s.x=t,s.y=n.height-e):i===CCB_POSITIONTYPE_RELATIVE_TOP_RIGHT?(s.x=n.width-t,s.y=n.height-e):i===CCB_POSITIONTYPE_RELATIVE_BOTTOM_RIGHT?(s.x=n.width-t,s.y=e):i===CCB_POSITIONTYPE_PERCENT?(s.x=n.width*t/100,s.y=n.height*e/100):i===CCB_POSITIONTYPE_MULTIPLY_RESOLUTION&&(i=cc.BuilderReader.getResolutionScale(),s.x=t*i,s.y=e*i),s},cc.setRelativeScale=function(t,e,i,n,s){if(!t)throw Error("cc.setRelativeScale(): node should be non-null");n===CCB_POSITIONTYPE_MULTIPLY_RESOLUTION&&(e*=n=cc.BuilderReader.getResolutionScale(),i*=n),t.setScale(e,i)},function(){var t=cc.p();cc.BuilderAnimationManagerDelegate=cc.Class.extend({completedAnimationSequenceNamed:function(t){}}),cc.BuilderAnimationManager=cc.Class.extend({_sequences:null,_nodeSequences:null,_baseValues:null,_autoPlaySequenceId:0,_rootNode:null,_owner:null,_rootContainerSize:null,_delegate:null,_runningSequence:null,_documentOutletNames:null,_documentOutletNodes:null,_documentCallbackNames:null,_documentCallbackNodes:null,_documentCallbackControlEvents:null,_documentControllerName:"",_lastCompletedSequenceName:"",_keyframeCallbacks:null,_keyframeCallFuncs:null,_animationCompleteCallbackFunc:null,_target:null,_jsControlled:!1,ctor:function(){this._rootContainerSize=cc.size(0,0),this.init()},init:function(){return this._sequences=[],this._nodeSequences=new cc._Dictionary,this._baseValues=new cc._Dictionary,this._documentOutletNames=[],this._documentOutletNodes=[],this._documentCallbackNames=[],this._documentCallbackNodes=[],this._documentCallbackControlEvents=[],this._keyframeCallbacks=[],this._keyframeCallFuncs={},!0},getSequences:function(){return this._sequences},setSequences:function(t){this._sequences=t},getAutoPlaySequenceId:function(){return this._autoPlaySequenceId},setAutoPlaySequenceId:function(t){this._autoPlaySequenceId=t},getRootNode:function(){return this._rootNode},setRootNode:function(t){this._rootNode=t},getOwner:function(){return this._owner},setOwner:function(t){this._owner=t},addDocumentCallbackNode:function(t){this._documentCallbackNodes.push(t)},addDocumentCallbackName:function(t){this._documentCallbackNames.push(t)},addDocumentCallbackControlEvents:function(t){this._documentCallbackControlEvents.push(t)},addDocumentOutletNode:function(t){this._documentOutletNodes.push(t)},addDocumentOutletName:function(t){this._documentOutletNames.push(t)},setDocumentControllerName:function(t){this._documentControllerName=t},getDocumentControllerName:function(){return this._documentControllerName},getDocumentCallbackNames:function(){return this._documentCallbackNames},getDocumentCallbackNodes:function(){return this._documentCallbackNodes},getDocumentCallbackControlEvents:function(){return this._documentCallbackControlEvents},getDocumentOutletNames:function(){return this._documentOutletNames},getDocumentOutletNodes:function(){return this._documentOutletNodes},getLastCompletedSequenceName:function(){return this._lastCompletedSequenceName},getKeyframeCallbacks:function(){return this._keyframeCallbacks},getRootContainerSize:function(){return this._rootContainerSize},setRootContainerSize:function(t){this._rootContainerSize=cc.size(t.width,t.height)},getDelegate:function(){return this._delegate},setDelegate:function(t){this._delegate=t},getRunningSequenceName:function(){return this._runningSequence?this._runningSequence.getName():null},getContainerSize:function(t){return t?t.getContentSize():this._rootContainerSize},addNode:function(t,e){this._nodeSequences.setObject(e,t)},setBaseValue:function(t,e,i){var n=this._baseValues.objectForKey(e);n||(n=new cc._Dictionary,this._baseValues.setObject(n,e)),n.setObject(t,i)},moveAnimationsFromNode:function(t,e){var i=this._baseValues,n=i.objectForKey(t);null!==n&&(i.setObject(n,e),i.removeObjectForKey(t)),null!=(n=(i=this._nodeSequences).objectForKey(t))&&(i.setObject(n,e),i.removeObjectForKey(t))},getActionForCallbackChannel:function(t){for(var e=0,i=[],n=(t=t.getKeyframes()).length,s=0;s<n;++s){var r,o=t[s],a=o.getTime()-e;e=o.getTime();if(0<a&&i.push(cc.delayTime(a)),a=o.getValue(),o=a[0],a=a[1],this._jsControlled)null!=(o=this._keyframeCallFuncs[a+":"+o])&&i.push(o);else a===CCB_TARGETTYPE_DOCUMENTROOT?r=this._rootNode:a===CCB_TARGETTYPE_OWNER&&(r=this._owner),null!=r&&(0<o.length?(a=0,null!=r.onResolveCCBCCCallFuncSelector&&(a=r.onResolveCCBCCCallFuncSelector(r,o)),0===a?cc.log("Skipping selector '"+o+"' since no CCBSelectorResolver is present."):i.push(cc.callFunc(a,r))):cc.log("Unexpected empty selector."))}return 1>i.length?null:cc.sequence(i)},getActionForSoundChannel:function(t){for(var e=0,i=[],n=(t=t.getKeyframes()).length,s=0;s<n;++s){var r=(a=t[s]).getTime()-e;e=a.getTime();0<r&&i.push(cc.delayTime(r));var o=a.getValue(),a=cc.BuilderReader.getResourcePath()+o[0],c=(r=parseFloat(o[1]),parseFloat(o[2]));o=parseFloat(o[3]);i.push(cc.BuilderSoundEffect.create(a,r,c,o))}return 1>i.length?null:cc.sequence(i)},runAnimationsForSequenceNamed:function(t){this.runAnimationsForSequenceIdTweenDuration(this._getSequenceId(t),0)},runAnimationsForSequenceNamedTweenDuration:function(t,e){this.runAnimationsForSequenceIdTweenDuration(this._getSequenceId(t),e)},runAnimationsForSequenceIdTweenDuration:function(t,e){if(-1===t)throw Error("cc.BuilderAnimationManager.runAnimationsForSequenceIdTweenDuration(): Sequence id should not be -1");e=e||0,this._rootNode.stopAllActions();for(var i=this._nodeSequences.allKeys(),n=0,s=i.length;n<s;n++){var r=i[n];r.stopAllActions();var o,a=this._nodeSequences.objectForKey(r).objectForKey(t),c=[];if(a){var h=a.allKeys();for(o=0;o<h.length;o++){var l=h[o],u=a.objectForKey(l);c.push(l),this._setFirstFrame(r,u,e),this._runAction(r,u,e)}}if(a=this._baseValues.objectForKey(r))for(h=a.allKeys(),o=0;o<h.length;o++)l=h[o],-1===c.indexOf(l)&&(null!=(u=a.objectForKey(l))&&this._setAnimatedProperty(l,r,u,e))}i=this._getSequence(t),n=cc.sequence(cc.delayTime(i.getDuration()+e),cc.callFunc(this._sequenceCompleted,this)),this._rootNode.runAction(n),i.getCallbackChannel()&&(n=this.getActionForCallbackChannel(i.getCallbackChannel()))&&this._rootNode.runAction(n),i.getSoundChannel()&&(n=this.getActionForSoundChannel(i.getSoundChannel()))&&this._rootNode.runAction(n),this._runningSequence=this._getSequence(t)},runAnimations:function(t,e){var i;e=e||0,i=cc.isString(t)?this._getSequenceId(t):t,this.runAnimationsForSequenceIdTweenDuration(i,e)},setAnimationCompletedCallback:function(t,e){this._target=t,this._animationCompleteCallbackFunc=e},setCompletedAnimationCallback:function(t,e){this.setAnimationCompletedCallback(t,e)},setCallFunc:function(t,e){this._keyframeCallFuncs[e]=t},debug:function(){},_getBaseValue:function(t,e){var i=this._baseValues.objectForKey(t);return i?i.objectForKey(e):null},_getSequenceId:function(t){for(var e=null,i=this._sequences,n=0,s=i.length;n<s;n++)if((e=i[n])&&e.getName()===t)return e.getSequenceId();return-1},_getSequence:function(t){for(var e=null,i=this._sequences,n=0,s=i.length;n<s;n++)if((e=i[n])&&e.getSequenceId()===t)return e;return null},_getAction:function(t,e,i,n){var s,r;return t=e.getTime()-(t?t.getTime():0),"rotation"===i?cc.BuilderRotateTo.create(t,e.getValue()):"rotationX"===i?cc.BuilderRotateXTo.create(t,e.getValue()):"rotationY"===i?cc.BuilderRotateYTo.create(t,e.getValue()):"opacity"===i?cc.fadeTo(t,e.getValue()):"color"===i?(i=e.getValue(),cc.tintTo(t,i.r,i.g,i.b)):"visible"===i?e.getValue()?cc.sequence(cc.delayTime(t),cc.show()):cc.sequence(cc.delayTime(t),cc.hide()):"displayFrame"===i?cc.sequence(cc.delayTime(t),cc.BuilderSetSpriteFrame.create(e.getValue())):"position"===i?(s=(s=this._getBaseValue(n,i))[2],r=e.getValue(),e=r[0],r=r[1],n=this.getContainerSize(n.getParent()),i=cc.getAbsolutePosition(e,r,s,n,i),cc.moveTo(t,i)):"scale"===i?(s=(s=this._getBaseValue(n,i))[2],r=e.getValue(),e=r[0],r=r[1],s===CCB_SCALETYPE_MULTIPLY_RESOLUTION&&(e*=i=cc.BuilderReader.getResolutionScale(),r*=i),cc.scaleTo(t,e,r)):"skew"===i?(r=e.getValue(),e=r[0],r=r[1],cc.skewTo(t,e,r)):(cc.log("BuilderReader: Failed to create animation for property: "+i),null)},_setAnimatedProperty:function(e,i,n,s){if(0<s){var r=new cc.BuilderKeyframe;r.setValue(n),r.setTime(s),r.setEasingType(CCB_KEYFRAME_EASING_LINEAR),e=this._getAction(null,r,e,i),i.runAction(e)}else{if("position"===e)s=(s=this._getBaseValue(i,e))[2],r=n[0],n=n[1],cc.getAbsolutePosition(r,n,s,this.getContainerSize(i.getParent()),e,t),i._position.x=t.x,i._position.y=t.y;else if("scale"===e)s=(s=this._getBaseValue(i,e))[2],r=n[0],n=n[1],cc.setRelativeScale(i,r,n,s,e);else if("skew"===e)r=n[0],n=n[1],i._skewX=r,i._skewY=n;else if("rotation"===e)i.setRotation(n);else if("rotationX"===e)i._rotationX=n;else if("rotationY"===e)i._rotationY=n;else if("opacity"===e)i._realOpacity=n;else if("displayFrame"===e)i.setSpriteFrame(n);else if("color"===e)255===n.r&&255===n.g&&255===n.b||i.setColor(n);else{if("visible"!==e)return void cc.log("unsupported property name is "+e);i.setVisible(n||!1)}i.setNodeDirty()}},_setFirstFrame:function(t,e,i){var n=e.getKeyframes();0===n.length?((n=this._getBaseValue(t,e.getName()))||cc.log("cc.BuilderAnimationManager._setFirstFrame(): No baseValue found for property"),this._setAnimatedProperty(e.getName(),t,n,i)):(n=n[0],this._setAnimatedProperty(e.getName(),t,n.getValue(),i))},_getEaseAction:function(t,e,i){return e===CCB_KEYFRAME_EASING_LINEAR||e===CCB_KEYFRAME_EASING_INSTANT?t:e===CCB_KEYFRAME_EASING_CUBIC_IN?t.easing(cc.easeIn(i)):e===CCB_KEYFRAME_EASING_CUBIC_OUT?t.easing(cc.easeOut(i)):e===CCB_KEYFRAME_EASING_CUBIC_INOUT?t.easing(cc.easeInOut(i)):e===CCB_KEYFRAME_EASING_BACK_IN?t.easing(cc.easeBackIn()):e===CCB_KEYFRAME_EASING_BACK_OUT?t.easing(cc.easeBackOut()):e===CCB_KEYFRAME_EASING_BACK_INOUT?t.easing(cc.easeBackInOut()):e===CCB_KEYFRAME_EASING_BOUNCE_IN?t.easing(cc.easeBounceIn()):e===CCB_KEYFRAME_EASING_BOUNCE_OUT?t.easing(cc.easeBounceOut()):e===CCB_KEYFRAME_EASING_BOUNCE_INOUT?t.easing(cc.easeBounceInOut()):e===CCB_KEYFRAME_EASING_ELASTIC_IN?t.easing(cc.easeElasticIn(i)):e===CCB_KEYFRAME_EASING_ELASTIC_OUT?t.easing(cc.easeElasticOut(i)):e===CCB_KEYFRAME_EASING_ELASTIC_INOUT?t.easing(cc.easeElasticInOut(i)):(cc.log("BuilderReader: Unknown easing type "+e),t)},_runAction:function(t,e,i){var n=e.getKeyframes(),s=n.length;if(1<s){var r=[];for(0<(i=n[0].getTime()+i)&&r.push(cc.delayTime(i)),i=0;i<s-1;++i){var o=n[i],a=this._getAction(o,n[i+1],e.getName(),t);a&&(a=this._getEaseAction(a,o.getEasingType(),o.getEasingOpt()),r.push(a))}t.runAction(cc.sequence(r))}},_sequenceCompleted:function(){var t=this._runningSequence,e=t.getName();this._lastCompletedSequenceName!=t.getName()&&(this._lastCompletedSequenceName=t.getName()),t=t.getChainedSequenceId(),this._runningSequence=null,-1!==t&&this.runAnimations(t,0),this._delegate&&this._delegate.completedAnimationSequenceNamed(e),this._target&&this._animationCompleteCallbackFunc&&this._animationCompleteCallbackFunc.call(this._target)}}),cc.BuilderSetSpriteFrame=cc.ActionInstant.extend({_spriteFrame:null,initWithSpriteFrame:function(t){return this._spriteFrame=t,!0},update:function(t){this.target.setSpriteFrame(this._spriteFrame)}}),cc.BuilderSetSpriteFrame.create=function(t){var e=new cc.BuilderSetSpriteFrame;return e&&e.initWithSpriteFrame(t)?e:null},cc.BuilderRotateTo=cc.ActionInterval.extend({_startAngle:0,_dstAngle:0,_diffAngle:0,initWithDuration:function(t,e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(this._dstAngle=e,!0)},update:function(t){this.target.setRotation(this._startAngle+this._diffAngle*t)},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),this._startAngle=this.target.getRotation(),this._diffAngle=this._dstAngle-this._startAngle}}),cc.BuilderRotateTo.create=function(t,e){var i=new cc.BuilderRotateTo;return i&&i.initWithDuration(t,e)?i:null},cc.BuilderRotateXTo=cc.ActionInterval.extend({}),cc.BuilderRotateXTo.create=function(t,e){throw Error("rotationX has not been implemented in cocos2d-html5")},cc.BuilderRotateYTo=cc.ActionInterval.extend({}),cc.BuilderRotateYTo.create=function(t,e){throw Error("rotationY has not been implemented in cocos2d-html5")},cc.BuilderSoundEffect=cc.ActionInstant.extend({init:function(t){return this._file=t,!0},update:function(t){cc.audioEngine.playEffect(this._file)}}),cc.BuilderSoundEffect.create=function(t,e,i,n){return(e=new cc.BuilderSoundEffect)&&e.init(t)?e:null}}(),cc.KEYBOARD_RETURNTYPE_DEFAULT=0,cc.KEYBOARD_RETURNTYPE_DONE=1,cc.KEYBOARD_RETURNTYPE_SEND=2,cc.KEYBOARD_RETURNTYPE_SEARCH=3,cc.KEYBOARD_RETURNTYPE_GO=4,cc.EDITBOX_INPUT_MODE_ANY=0,cc.EDITBOX_INPUT_MODE_EMAILADDR=1,cc.EDITBOX_INPUT_MODE_NUMERIC=2,cc.EDITBOX_INPUT_MODE_PHONENUMBER=3,cc.EDITBOX_INPUT_MODE_URL=4,cc.EDITBOX_INPUT_MODE_DECIMAL=5,cc.EDITBOX_INPUT_MODE_SINGLELINE=6,cc.EDITBOX_INPUT_FLAG_PASSWORD=0,cc.EDITBOX_INPUT_FLAG_SENSITIVE=1,cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_WORD=2,cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_SENTENCE=3,cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_ALL_CHARACTERS=4,cc.EditBoxDelegate=cc.Class.extend({editBoxEditingDidBegin:function(t){},editBoxEditingDidEnd:function(t){},editBoxTextChanged:function(t,e){},editBoxReturn:function(t){}}),cc.EditBox=cc.Node.extend({_backgroundSprite:null,_delegate:null,_editBoxInputMode:cc.EDITBOX_INPUT_MODE_ANY,_editBoxInputFlag:cc.EDITBOX_INPUT_FLAG_SENSITIVE,_keyboardReturnType:cc.KEYBOARD_RETURNTYPE_DEFAULT,_maxLength:50,_text:"",_textColor:null,_placeholderText:"",_placeholderFontName:"",_placeholderFontSize:14,_placeholderColor:null,_className:"EditBox",_touchListener:null,_touchEnabled:!0,ctor:function(t,e){cc.Node.prototype.ctor.call(this),this._anchorPoint=cc.p(.5,.5),this._textColor=cc.color.WHITE,this._placeholderColor=cc.color.GRAY,this._renderCmd._createLabels(),this.createDomElementIfNeeded(),this.initWithSizeAndBackgroundSprite(t,e),this._touchListener=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:this._onTouchBegan.bind(this),onTouchEnded:this._onTouchEnded.bind(this)}),cc.eventManager.addListener(this._touchListener,this),this.setInputFlag(this._editBoxInputFlag)},setTouchEnabled:function(t){this._touchEnabled!==t&&((this._touchEnabled=t)?cc.eventManager.addListener(this._touchListener,this):cc.eventManager.removeListener(this._touchListener))},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.EditBox.CanvasRenderCmd(this):new cc.EditBox.WebGLRenderCmd(this)},setContentSize:function(t,e){void 0!==t.width&&void 0!==t.height&&(e=t.height,t=t.width),cc.Node.prototype.setContentSize.call(this,t,e),this._updateEditBoxSize(t,e)},setVisible:function(t){cc.Node.prototype.setVisible.call(this,t),this._renderCmd.updateVisibility()},createDomElementIfNeeded:function(){this._renderCmd._edTxt||this._renderCmd._createDomTextArea()},setTabIndex:function(t){this._renderCmd._edTxt&&(this._renderCmd._edTxt.tabIndex=t)},getTabIndex:function(){return this._renderCmd._edTxt?this._renderCmd._edTxt.tabIndex:(cc.warn("The dom control is not created!"),-1)},setFocus:function(){this._renderCmd._edTxt&&this._renderCmd._edTxt.focus()},isFocused:function(){return this._renderCmd._edTxt?document.activeElement===this._renderCmd._edTxt:(cc.warn("The dom control is not created!"),!1)},stayOnTop:function(t){this._alwaysOnTop!==t&&(this._alwaysOnTop=t,this._renderCmd.stayOnTop(this._alwaysOnTop))},cleanup:function(){this._super(),this._renderCmd._removeDomFromGameContainer()},_isAncestorsVisible:function(t){return null==t||!((t=t.getParent())&&!t.isVisible())&&this._isAncestorsVisible(t)},_onTouchBegan:function(t){if(this.isVisible()&&this._isAncestorsVisible(this)){t=t.getLocation();var e=cc.rect(0,0,this._contentSize.width,this._contentSize.height);return!!cc.rectContainsPoint(e,this.convertToNodeSpace(t))||(this._renderCmd._endEditing(),!1)}},_onTouchEnded:function(){this.isVisible()&&this._isAncestorsVisible(this)&&this._renderCmd._beginEditing()},_updateBackgroundSpriteSize:function(t,e){this._backgroundSprite&&this._backgroundSprite.setContentSize(t,e)},_updateEditBoxSize:function(t,e){var i="number"==typeof t.width?t.width:t,n="number"==typeof t.height?t.height:e;this._updateBackgroundSpriteSize(i,n),this._renderCmd.updateSize(i,n)},setLineHeight:function(t){this._renderCmd.setLineHeight(t)},setFont:function(t,e){this._renderCmd.setFont(t,e)},_setFont:function(t){this._renderCmd._setFont(t)},getBackgroundSprite:function(){return this._backgroundSprite},setFontName:function(t){this._renderCmd.setFontName(t)},setFontSize:function(t){this._renderCmd.setFontSize(t)},setString:function(t){t.length>=this._maxLength&&(t=t.slice(0,this._maxLength)),this._text=t,this._renderCmd.setString(t)},setFontColor:function(t){this._textColor=t,this._renderCmd.setFontColor(t)},setMaxLength:function(t){isNaN(t)||(0>t&&(t=65535),this._maxLength=t,this._renderCmd.setMaxLength(t))},getMaxLength:function(){return this._maxLength},setPlaceHolder:function(t){null!==t&&(this._renderCmd.setPlaceHolder(t),this._placeholderText=t)},setPlaceholderFont:function(t,e){this._placeholderFontName=t,this._placeholderFontSize=e,this._renderCmd._updateDOMPlaceholderFontStyle()},_setPlaceholderFont:function(t){(t=cc.LabelTTF._fontStyleRE.exec(t))&&(this._placeholderFontName=t[2],this._placeholderFontSize=parseInt(t[1]),this._renderCmd._updateDOMPlaceholderFontStyle())},setPlaceholderFontName:function(t){this._placeholderFontName=t,this._renderCmd._updateDOMPlaceholderFontStyle()},setPlaceholderFontSize:function(t){this._placeholderFontSize=t,this._renderCmd._updateDOMPlaceholderFontStyle()},setPlaceholderFontColor:function(t){this._placeholderColor=t,this._renderCmd.setPlaceholderFontColor(t)},setInputFlag:function(t){this._editBoxInputFlag=t,this._renderCmd.setInputFlag(t)},getString:function(){return this._text},initWithSizeAndBackgroundSprite:function(t,e){return this._backgroundSprite&&this._backgroundSprite.removeFromParent(),this._backgroundSprite=e,this.setContentSize(t),this._backgroundSprite&&!this._backgroundSprite.parent&&(this._backgroundSprite.setAnchorPoint(cc.p(0,0)),this.addChild(this._backgroundSprite),this._updateBackgroundSpriteSize(t.width,t.height)),this.y=this.x=0,!0},setDelegate:function(t){this._delegate=t},getPlaceHolder:function(){return this._placeholderText},setInputMode:function(t){if(this._editBoxInputMode!==t){var e=this.getString();this._editBoxInputMode=t,this._renderCmd.setInputMode(t),this._renderCmd.transform(),this.setString(e),this._renderCmd._updateLabelPosition(this.getContentSize())}},setReturnType:function(t){this._keyboardReturnType=t,this._renderCmd._updateDomInputType()},initWithBackgroundColor:function(t,e){this._edWidth=t.width,this.dom.style.width=this._edWidth.toString()+"px",this._edHeight=t.height,this.dom.style.height=this._edHeight.toString()+"px",this.dom.style.backgroundColor=cc.colorToHex(e)}}),_p=cc.EditBox.prototype,cc.defineGetterSetter(_p,"font",null,_p._setFont),cc.defineGetterSetter(_p,"fontName",null,_p.setFontName),cc.defineGetterSetter(_p,"fontSize",null,_p.setFontSize),cc.defineGetterSetter(_p,"fontColor",null,_p.setFontColor),cc.defineGetterSetter(_p,"string",_p.getString,_p.setString),cc.defineGetterSetter(_p,"maxLength",_p.getMaxLength,_p.setMaxLength),cc.defineGetterSetter(_p,"placeholder",_p.getPlaceHolder,_p.setPlaceHolder),cc.defineGetterSetter(_p,"placeholderFont",null,_p._setPlaceholderFont),cc.defineGetterSetter(_p,"placeholderFontName",null,_p.setPlaceholderFontName),cc.defineGetterSetter(_p,"placeholderFontSize",null,_p.setPlaceholderFontSize),cc.defineGetterSetter(_p,"placeholderFontColor",null,_p.setPlaceholderFontColor),cc.defineGetterSetter(_p,"inputFlag",null,_p.setInputFlag),cc.defineGetterSetter(_p,"delegate",null,_p.setDelegate),cc.defineGetterSetter(_p,"inputMode",null,_p.setInputMode),cc.defineGetterSetter(_p,"returnType",null,_p.setReturnType),_p=null,cc.EditBox.create=function(t,e,i,n){return new cc.EditBox(t,e,i,n)},function(t){t._polyfill={zoomInvalid:!1},cc.sys.OS_ANDROID!==cc.sys.os||cc.sys.browserType!==cc.sys.BROWSER_TYPE_SOUGOU&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_360||(t._polyfill.zoomInvalid=!0)}(cc.EditBox),function(t){function e(t){var e=t.convertToWorldSpace(cc.p(0,0)),s=cc.visibleRect.height,r=.5;cc.visibleRect.width>s&&(r=.7),setTimeout((function(){if(window.scrollY<i&&e.y<s*r){var t=s*r-e.y-window.scrollY;35>t&&(t=35),320<t&&(t=320),window.scrollTo(t,t)}}),n)}var i=40,n=400,s=function(){}.prototype=Object.create(Object.prototype);s.updateMatrix=function(){if(this._edTxt){var e=this._node,i=cc.view._scaleX,n=cc.view._scaleY,s=cc.view._devicePixelRatio,r=this._worldTransform,o=(i=i/s,n=n/s,cc.game.container),a=(s=r.a*i,r.b),c=r.c,h=r.d*n,l=o&&o.style.paddingLeft&&parseInt(o.style.paddingLeft);o=o&&o.style.paddingBottom&&parseInt(o.style.paddingBottom),i=r.tx*i+l,n=r.ty*n+o;t.zoomInvalid&&(this.updateSize(e._contentSize.width*s,e._contentSize.height*h),h=s=1),e="matrix("+s+","+-a+","+-c+","+h+","+i+","+-n+")",this._edTxt.style.transform=e,this._edTxt.style["-webkit-transform"]=e,this._edTxt.style["transform-origin"]="0px 100% 0px",this._edTxt.style["-webkit-transform-origin"]="0px 100% 0px"}},s.updateVisibility=function(){this._edTxt&&(this._edTxt.style.visibility=this._node.visible?"visible":"hidden")},s.stayOnTop=function(t){t?(this._removeLabels(),this._edTxt.style.display=""):(this._createLabels(),this._edTxt.style.display="none",this._showLabels())},s._beginEditingOnMobile=function(t){this.__orientationChanged=function(){e(t)},window.addEventListener("orientationchange",this.__orientationChanged),cc.view.isAutoFullScreenEnabled()?(this.__fullscreen=!0,cc.view.enableAutoFullScreen(!1),cc.screen.exitFullScreen()):this.__fullscreen=!1,this.__autoResize=cc.view.__resizeWithBrowserSize,cc.view.resizeWithBrowserSize(!1)},s._endEditingOnMobile=function(){if(this.__rotateScreen){(t=cc.game.container.style)["-webkit-transform"]="rotate(90deg)",t.transform="rotate(90deg)";var t,e=(t=cc.view)._originalDesignResolutionSize.width,i=t._originalDesignResolutionSize.height;0<e&&t.setDesignResolutionSize(e,i,t._resolutionPolicy),this.__rotateScreen=!1}window.removeEventListener("orientationchange",this.__orientationChanged),window.scrollTo(0,0),this.__fullscreen&&cc.view.enableAutoFullScreen(!0),this.__autoResize&&cc.view.resizeWithBrowserSize(!0)},s._onFocusOnMobile=function(t){if(cc.view._isRotated){var i=cc.game.container.style;i["-webkit-transform"]="rotate(0deg)",i.transform="rotate(0deg)",i.margin="0px",window.scrollTo(35,35),this.__rotateScreen=!0}else this.__rotateScreen=!1;e(t)},s._createDomInput=function(){this._removeDomFromGameContainer();var t=this,e=this._edTxt=document.createElement("input");return e.type="text",e.style.fontFamily=this._edFontName,e.style.fontSize=this._edFontSize+"px",e.style.color="#000000",e.style.border=0,e.style.background="transparent",e.style.width="100%",e.style.height="100%",e.style.active=0,e.style.outline="medium",e.style.padding="0",e.style.textTransform="uppercase",e.style.display="none",e.style.position="absolute",e.style.bottom="0px",e.style.left="2px",e.style.className="cocosEditBox",this.setMaxLength(t._editBox._maxLength),e.addEventListener("input",(function(){var e=t._editBox;this.value.length>this.maxLength&&(this.value=this.value.slice(0,this.maxLength)),e._delegate&&e._delegate.editBoxTextChanged&&e._text!==this.value&&(e._text=this.value,t._updateDomTextCases(),e._delegate.editBoxTextChanged(e,e._text))})),e.addEventListener("keypress",(function(e){var i=t._editBox;e.keyCode===cc.KEY.enter&&(e.stopPropagation(),e.preventDefault(),""===this.value&&(this.style.fontSize=i._placeholderFontSize+"px",this.style.color=cc.colorToHex(i._placeholderColor)),i._text=this.value,t._updateDomTextCases(),t._endEditing(),i._delegate&&i._delegate.editBoxReturn&&i._delegate.editBoxReturn(i),cc._canvas.focus())})),e.addEventListener("focus",(function(){var e=t._editBox;this.style.fontSize=t._edFontSize+"px",this.style.color=cc.colorToHex(e._textColor),t._hiddenLabels(),cc.sys.isMobile&&t._onFocusOnMobile(e),e._delegate&&e._delegate.editBoxEditingDidBegin&&e._delegate.editBoxEditingDidBegin(e)})),e.addEventListener("blur",(function(){var e=t._editBox;e._text=this.value,t._updateDomTextCases(),e._delegate&&e._delegate.editBoxEditingDidEnd&&e._delegate.editBoxEditingDidEnd(e),""===this.value&&(this.style.fontSize=e._placeholderFontSize+"px",this.style.color=cc.colorToHex(e._placeholderColor)),t._endEditing()})),this._addDomToGameContainer(),e},s._createDomTextArea=function(){this._removeDomFromGameContainer();var t=this,e=this._edTxt=document.createElement("textarea");return e.type="text",e.style.fontFamily=this._edFontName,e.style.fontSize=this._edFontSize+"px",e.style.color="#000000",e.style.border=0,e.style.background="transparent",e.style.width="100%",e.style.height="100%",e.style.active=0,e.style.outline="medium",e.style.padding="0",e.style.resize="none",e.style.textTransform="uppercase",e.style.overflow_y="scroll",e.style.display="none",e.style.position="absolute",e.style.bottom="0px",e.style.left="2px",e.style.className="cocosEditBox",this.setMaxLength(t._editBox._maxLength),e.addEventListener("input",(function(){this.value.length>this.maxLength&&(this.value=this.value.slice(0,this.maxLength));var e=t._editBox;e._delegate&&e._delegate.editBoxTextChanged&&e._text.toLowerCase()!==this.value.toLowerCase()&&(e._text=this.value,t._updateDomTextCases(),e._delegate.editBoxTextChanged(e,e._text))})),e.addEventListener("focus",(function(){var e=t._editBox;t._hiddenLabels(),this.style.fontSize=t._edFontSize+"px",this.style.color=cc.colorToHex(e._textColor),cc.sys.isMobile&&t._onFocusOnMobile(e),e._delegate&&e._delegate.editBoxEditingDidBegin&&e._delegate.editBoxEditingDidBegin(e)})),e.addEventListener("keypress",(function(e){var i=t._editBox;e.keyCode===cc.KEY.enter&&(e.stopPropagation(),i._delegate&&i._delegate.editBoxReturn&&i._delegate.editBoxReturn(i))})),e.addEventListener("blur",(function(){var e=t._editBox;e._text=this.value,t._updateDomTextCases(),e._delegate&&e._delegate.editBoxEditingDidEnd&&e._delegate.editBoxEditingDidEnd(e),""===this.value&&(this.style.fontSize=e._placeholderFontSize+"px",this.style.color=cc.colorToHex(e._placeholderColor)),t._endEditing()})),this._addDomToGameContainer(),e},s._createLabels=function(){var t=this._editBox.getContentSize();this._textLabel||(this._textLabel=new cc.LabelTTF,this._textLabel.setAnchorPoint(cc.p(0,1)),this._editBox.addChild(this._textLabel,100)),this._placeholderLabel||(this._placeholderLabel=new cc.LabelTTF,this._placeholderLabel.setAnchorPoint(cc.p(0,1)),this._placeholderLabel.setColor(cc.color.GRAY),this._editBox.addChild(this._placeholderLabel,100)),this._updateLabelPosition(t)},s._removeLabels=function(){this._textLabel&&(this._editBox.removeChild(this._textLabel),this._textLabel=null)},s._updateLabelPosition=function(t){if(this._textLabel&&this._placeholderLabel){var e=cc.size(t.width-2,t.height);this._textLabel.setContentSize(e),this._textLabel.setDimensions(e),this._placeholderLabel.setLineHeight(t.height),e=this._placeholderLabel.getContentSize(),this._editBox._editBoxInputMode===cc.EDITBOX_INPUT_MODE_ANY?(this._textLabel.setPosition(2,t.height),this._placeholderLabel.setPosition(2,t.height),this._placeholderLabel.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_TOP),this._textLabel.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_TOP)):(this._textLabel.setPosition(2,t.height),this._placeholderLabel.setPosition(2,(t.height+e.height)/2),this._placeholderLabel.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),this._textLabel.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER))}},s.setLineHeight=function(t){this._textLabel&&this._textLabel.setLineHeight(t)},s._hiddenLabels=function(){this._textLabel&&this._textLabel.setVisible(!1),this._placeholderLabel&&this._placeholderLabel.setVisible(!1)},s._updateDomTextCases=function(){if((e=this._editBox._editBoxInputFlag)===cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_ALL_CHARACTERS)this._editBox._text=this._editBox._text.toUpperCase();else if(e===cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_WORD)this._editBox._text=function(t){return t.replace(/(?:^|\s)\S/g,(function(t){return t.toUpperCase()}))}(this._editBox._text);else if(e===cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_SENTENCE){var t,e=this._editBox;t=(t=this._editBox._text).charAt(0).toUpperCase()+t.slice(1),e._text=t}},s._updateLabelStringStyle=function(){if("password"===this._edTxt.type){for(var t="",e=this._editBox._text.length,i=0;i<e;++i)t+="●";this._textLabel&&this._textLabel.setString(t)}else this._updateDomTextCases(),this._textLabel&&this._textLabel.setString(this._editBox._text)},s._showLabels=function(){this._hiddenLabels(),""===this._edTxt.value?this._placeholderLabel&&(this._placeholderLabel.setVisible(!0),this._placeholderLabel.setString(this._editBox._placeholderText)):this._textLabel&&(this._textLabel.setVisible(!0),this._textLabel.setString(this._editBox._text)),this._updateLabelStringStyle()},s._beginEditing=function(){this._editBox._alwaysOnTop||"none"!==this._edTxt.style.display||(this._edTxt.style.display="",this._edTxt.focus()),cc.sys.isMobile&&!this._editingMode&&this._beginEditingOnMobile(this._editBox),this._editingMode=!0},s._endEditing=function(){if(this._editBox._alwaysOnTop||(this._edTxt.style.display="none"),this._showLabels(),cc.sys.isMobile&&this._editingMode){var t=this;setTimeout((function(){t._endEditingOnMobile()}),n)}this._editingMode=!1},s._setFont=function(t){var e=(t=cc.LabelTTF._fontStyleRE.exec(t))[2],i=parseInt(t[1]);t&&this.setFont(e,i)},s.setFont=function(t,e){this._edFontName=t||this._edFontName,this._edFontSize=e||this._edFontSize,this._updateDOMFontStyle()},s.setFontName=function(t){this._edFontName=t||this._edFontName,this._updateDOMFontStyle()},s.setFontSize=function(t){this._edFontSize=t||this._edFontSize,this._updateDOMFontStyle()},s.setFontColor=function(t){this._edTxt&&(this._edTxt.value!==this._editBox._placeholderText&&(this._edTxt.style.color=cc.colorToHex(t)),this._textLabel&&this._textLabel.setColor(t))},s.setPlaceHolder=function(t){this._placeholderLabel.setString(t)},s.setMaxLength=function(t){this._edTxt&&(this._edTxt.maxLength=t)},s._updateDOMPlaceholderFontStyle=function(){this._placeholderLabel.setFontName(this._editBox._placeholderFontName),this._placeholderLabel.setFontSize(this._editBox._placeholderFontSize)},s.setPlaceholderFontColor=function(t){this._placeholderLabel.setColor(t)},s._updateDomInputType=function(){var t=this._editBox._editBoxInputMode;t===cc.EDITBOX_INPUT_MODE_EMAILADDR?this._edTxt.type="email":t===cc.EDITBOX_INPUT_MODE_DECIMAL||t===cc.EDITBOX_INPUT_MODE_NUMERIC?this._edTxt.type="number":t===cc.EDITBOX_INPUT_MODE_PHONENUMBER?(this._edTxt.type="number",this._edTxt.pattern="[0-9]*"):t===cc.EDITBOX_INPUT_MODE_URL?this._edTxt.type="url":(this._edTxt.type="text",this._editBox._keyboardReturnType===cc.KEYBOARD_RETURNTYPE_SEARCH&&(this._edTxt.type="search")),this._editBox._editBoxInputFlag===cc.EDITBOX_INPUT_FLAG_PASSWORD&&(this._edTxt.type="password")},s.setInputFlag=function(t){this._edTxt&&(this._updateDomInputType(),this._edTxt.style.textTransform="none",t===cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_ALL_CHARACTERS?this._edTxt.style.textTransform="uppercase":t===cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_WORD&&(this._edTxt.style.textTransform="capitalize"),this._updateLabelStringStyle())},s.setInputMode=function(t){t===cc.EDITBOX_INPUT_MODE_ANY?this._createDomTextArea():this._createDomInput(),this._updateDomInputType(),t=this._node.getContentSize(),this.updateSize(t.width,t.height)},s.setString=function(t){this._edTxt&&null!==t&&(this._edTxt.value=t,""===t?(this._placeholderLabel&&(this._placeholderLabel.setString(this._editBox._placeholderText),this._placeholderLabel.setColor(this._editBox._placeholderColor)),this._editingMode||(this._placeholderLabel&&this._placeholderLabel.setVisible(!0),this._textLabel&&this._textLabel.setVisible(!1))):(this._edTxt.style.color=cc.colorToHex(this._editBox._textColor),this._textLabel&&this._textLabel.setColor(this._editBox._textColor),this._editingMode||(this._placeholderLabel&&this._placeholderLabel.setVisible(!1),this._textLabel&&this._textLabel.setVisible(!0)),this._updateLabelStringStyle()))},s._updateDOMFontStyle=function(){this._edTxt&&(""!==this._edTxt.value&&(this._edTxt.style.fontFamily=this._edFontName,this._edTxt.style.fontSize=this._edFontSize+"px"),this._textLabel&&(this._textLabel.setFontSize(this._edFontSize),this._textLabel.setFontName(this._edFontName)))},s.updateSize=function(t,e){var i=this._edTxt;i&&(i.style.width=t+"px",i.style.height=e+"px",this._updateLabelPosition(cc.size(t,e)))},s._addDomToGameContainer=function(){cc.game.container.appendChild(this._edTxt)},s._removeDomFromGameContainer=function(){var t=this._edTxt;if(t){("contains"in cc.game.container?cc.game.container.contains(t):cc.game.container.compareDocumentPosition(t)%16)&&cc.game.container.removeChild(t)}this._edTxt=null},s.initializeRenderCmd=function(t){this._editBox=t,this._edFontSize=14,this._edFontName="Arial",this._placeholderLabel=this._textLabel=null,this.__rotateScreen=this.__autoResize=this.__fullscreen=this._editingMode=!1,this.__orientationChanged=null},cc.EditBox.CanvasRenderCmd=function(t){this._rootCtor(t),this.initializeRenderCmd(t)};var r=cc.EditBox.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);cc.inject(s,r),r.constructor=cc.EditBox.CanvasRenderCmd,r.transform=function(t,e){this.originTransform(t,e),this.updateMatrix()},cc.EditBox.WebGLRenderCmd=function(t){this._rootCtor(t),this.initializeRenderCmd(t)},r=cc.EditBox.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype),cc.inject(s,r),r.constructor=cc.EditBox.WebGLRenderCmd,r.transform=function(t,e){this.originTransform(t,e),this.updateMatrix()}}(cc.EditBox._polyfill),cc.ProtectedNode=cc.Node.extend({_protectedChildren:null,_reorderProtectedChildDirty:!1,_insertProtectedChild:function(t,e){this._reorderProtectedChildDirty=!0,this._protectedChildren.push(t),t._setLocalZOrder(e)},ctor:function(){cc.Node.prototype.ctor.call(this),this._protectedChildren=[]},visit:function(t){var e=this._renderCmd,i=t?t._renderCmd:null;if(this._visible){t=cc.renderer;var n,s,r=this._children,o=r.length,a=this._protectedChildren,c=a.length;e.visit(i);var h=this.grid;for(h&&h._active&&h.beforeDraw(),this._reorderChildDirty&&this.sortAllChildren(),this._reorderProtectedChildDirty&&this.sortAllProtectedChildren(),i=0;i<o&&0>(n=r[i])._localZOrder;i++)n.visit(this);for(n=0;n<c&&((s=a[n])&&0>s._localZOrder);n++)e._changeProtectedChild(s),s.visit(this);for(t.pushRenderCommand(e);i<o;i++)r[i].visit(this);for(;n<c;n++)(s=a[n])&&(e._changeProtectedChild(s),s.visit(this));h&&h._active&&h.afterDraw(this),e._dirtyFlag=0}else e._propagateFlagsDown(i)},addProtectedChild:function(t,e,i){cc.assert(null!=t,"child must be non-nil"),cc.assert(!t.parent,"child already added. It can't be added again"),e=e||t.getLocalZOrder(),i&&t.setTag(i),this._insertProtectedChild(t,e),t.setParent(this),t.setOrderOfArrival(cc.s_globalOrderOfArrival),this._running&&(t._performRecursive(cc.Node._stateCallbackType.onEnter),this._isTransitionFinished&&t._performRecursive(cc.Node._stateCallbackType.onEnterTransitionDidFinish)),this._cascadeColorEnabled&&this._renderCmd.setCascadeColorEnabledDirty(),this._cascadeOpacityEnabled&&this._renderCmd.setCascadeOpacityEnabledDirty()},getProtectedChildByTag:function(t){cc.assert(t!==cc.NODE_TAG_INVALID,"Invalid tag");for(var e=this._protectedChildren,i=0,n=e.length;i<n;i++)if(e.getTag()===t)return e[i];return null},removeProtectedChild:function(t,e){null==e&&(e=!0);var i=this._protectedChildren;if(0!==i.length){var n=i.indexOf(t);-1<n&&(this._running&&(t._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart),t._performRecursive(cc.Node._stateCallbackType.onExit)),e&&t._performRecursive(cc.Node._stateCallbackType.cleanup),t.setParent(null),i.splice(n,1))}},removeProtectedChildByTag:function(t,e){cc.assert(t!==cc.NODE_TAG_INVALID,"Invalid tag"),null==e&&(e=!0);var i=this.getProtectedChildByTag(t);null==i?cc.log("cocos2d: removeChildByTag(tag = %d): child not found!",t):this.removeProtectedChild(i,e)},removeAllProtectedChildren:function(){this.removeAllProtectedChildrenWithCleanup(!0)},removeAllProtectedChildrenWithCleanup:function(t){null==t&&(t=!0);for(var e=this._protectedChildren,i=0,n=e.length;i<n;i++){var s=e[i];this._running&&(s._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart),s._performRecursive(cc.Node._stateCallbackType.onExit)),t&&s._performRecursive(cc.Node._stateCallbackType.cleanup),s.setParent(null)}e.length=0},reorderProtectedChild:function(t,e){cc.assert(null!=t,"Child must be non-nil"),this._reorderProtectedChildDirty=!0,t.setOrderOfArrival(cc.s_globalOrderOfArrival++),t._setLocalZOrder(e)},sortAllProtectedChildren:function(){if(this._reorderProtectedChildDirty){var t,e,i,n=this._protectedChildren,s=n.length;for(t=1;t<s;t++){for(i=n[t],e=t-1;0<=e;){if(i._localZOrder<n[e]._localZOrder)n[e+1]=n[e];else{if(!(i._localZOrder===n[e]._localZOrder&&i.arrivalOrder<n[e].arrivalOrder))break;n[e+1]=n[e]}e--}n[e+1]=i}this._reorderProtectedChildDirty=!1}},_changePosition:function(){},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.ProtectedNode.CanvasRenderCmd(this):new cc.ProtectedNode.WebGLRenderCmd(this)}}),cc.ProtectedNode.create=function(){return new cc.ProtectedNode},function(){cc.ProtectedNode.RenderCmd={_updateDisplayColor:function(t){var e,i,n=this._node,s=this._displayedColor,r=n._realColor;if(this._cascadeColorEnabledDirty&&!n._cascadeColorEnabled){for(s.r=r.r,s.g=r.g,s.b=r.b,s=new cc.Color(255,255,255,255),r=0,t=(e=n._children).length;r<t;r++)(i=e[r])&&i._renderCmd&&i._renderCmd._updateDisplayColor(s);this._cascadeColorEnabledDirty=!1}else{if(void 0===t&&(t=(t=n._parent)&&t._cascadeColorEnabled?t.getDisplayedColor():cc.color.WHITE),s.r=0|r.r*t.r/255,s.g=0|r.g*t.g/255,s.b=0|r.b*t.b/255,n._cascadeColorEnabled)for(r=0,t=(e=n._children).length;r<t;r++)(i=e[r])&&i._renderCmd&&(i._renderCmd._updateDisplayColor(s),i._renderCmd._updateColor());for(r=0,t=(e=n._protectedChildren).length;r<t;r++)(i=e[r])&&i._renderCmd&&(i._renderCmd._updateDisplayColor(s),i._renderCmd._updateColor())}this._dirtyFlag^=this._dirtyFlag&cc.Node._dirtyFlags.colorDirty},_updateDisplayOpacity:function(t){var e,i,n,s=this._node;if(this._cascadeOpacityEnabledDirty&&!s._cascadeOpacityEnabled){for(this._displayedOpacity=s._realOpacity,t=0,e=(i=s._children).length;t<e;t++)(n=i[t])&&n._renderCmd&&n._renderCmd._updateDisplayOpacity(255);this._cascadeOpacityEnabledDirty=!1}else{if(void 0===t&&(t=255,(e=s._parent)&&e._cascadeOpacityEnabled&&(t=e.getDisplayedOpacity())),this._displayedOpacity=s._realOpacity*t/255,s._cascadeOpacityEnabled)for(t=0,e=(i=s._children).length;t<e;t++)(n=i[t])&&n._renderCmd&&(n._renderCmd._updateDisplayOpacity(this._displayedOpacity),n._renderCmd._updateColor());for(t=0,e=(i=s._protectedChildren).length;t<e;t++)(n=i[t])&&n._renderCmd&&(n._renderCmd._updateDisplayOpacity(this._displayedOpacity),n._renderCmd._updateColor())}this._dirtyFlag^=this._dirtyFlag&cc.Node._dirtyFlags.opacityDirty},_changeProtectedChild:function(t){var e=(t=t._renderCmd)._dirtyFlag,i=cc.Node._dirtyFlags;this._dirtyFlag&i.colorDirty&&(e|=i.colorDirty),this._dirtyFlag&i.opacityDirty&&(e|=i.opacityDirty);var n=e&i.colorDirty;e&=i.opacityDirty;n&&t._updateDisplayColor(this._displayedColor),e&&t._updateDisplayOpacity(this._displayedOpacity),(n||e)&&t._updateColor()}},cc.ProtectedNode.CanvasRenderCmd=function(t){this._rootCtor(t),this._cachedParent=null,this._cacheDirty=!1};var t=cc.ProtectedNode.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);cc.inject(cc.ProtectedNode.RenderCmd,t),t.constructor=cc.ProtectedNode.CanvasRenderCmd,t._pNodeCmdCtor=cc.ProtectedNode.CanvasRenderCmd,t.transform=function(t,e){var i=this._node;i._changePosition&&i._changePosition(),this.originTransform(t,e);var n,s=i._protectedChildren;if(e&&s&&0!==s.length)for(i=0,n=s.length;i<n;i++)s[i]._renderCmd.transform(this,e)},t.pNodeTransform=t.transform}(),function(){if(cc.Node.WebGLRenderCmd){cc.ProtectedNode.WebGLRenderCmd=function(t){this._rootCtor(t)};var t=cc.ProtectedNode.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);cc.inject(cc.ProtectedNode.RenderCmd,t),t.constructor=cc.ProtectedNode.WebGLRenderCmd,t._pNodeCmdCtor=cc.ProtectedNode.WebGLRenderCmd,t.transform=function(t,e){this.originTransform(t,e);var i,n,s=this._node._protectedChildren;if(e&&s&&0!==s.length)for(i=0,n=s.length;i<n;i++)s[i]._renderCmd.transform(this,e)},t.pNodeTransform=t.transform}}();var ccui=ccui||{};ccui.Class=ccui.Class||cc.Class,ccui.Class.extend=ccui.Class.extend||cc.Class.extend,ccui.Node=ccui.Node||cc.Node,ccui.Node.extend=ccui.Node.extend||cc.Node.extend,ccui.ProtectedNode=ccui.ProtectedNode||cc.ProtectedNode,ccui.ProtectedNode.extend=ccui.ProtectedNode.extend||cc.ProtectedNode.extend,ccui.cocosGUIVersion="CocosGUI v1.0.0.0",ccui._FocusNavigationController=cc.Class.extend({_keyboardListener:null,_firstFocusedWidget:null,_enableFocusNavigation:!1,_keyboardEventPriority:1,enableFocusNavigation:function(t){this._enableFocusNavigation!==t&&((this._enableFocusNavigation=t)?this._addKeyboardEventListener():this._removeKeyboardEventListener())},_setFirstFocsuedWidget:function(t){this._firstFocusedWidget=t},_onKeyPressed:function(t,e){this._enableFocusNavigation&&this._firstFocusedWidget&&(t===cc.KEY.dpadDown&&(this._firstFocusedWidget=this._firstFocusedWidget.findNextFocusedWidget(ccui.Widget.DOWN,this._firstFocusedWidget)),t===cc.KEY.dpadUp&&(this._firstFocusedWidget=this._firstFocusedWidget.findNextFocusedWidget(ccui.Widget.UP,this._firstFocusedWidget)),t===cc.KEY.dpadLeft&&(this._firstFocusedWidget=this._firstFocusedWidget.findNextFocusedWidget(ccui.Widget.LEFT,this._firstFocusedWidget)),t===cc.KEY.dpadRight&&(this._firstFocusedWidget=this._firstFocusedWidget.findNextFocusedWidget(ccui.Widget.RIGHT,this._firstFocusedWidget)))},_addKeyboardEventListener:function(){this._keyboardListener||(this._keyboardListener=cc.EventListener.create({event:cc.EventListener.KEYBOARD,onKeyReleased:this._onKeyPressed.bind(this)}),cc.eventManager.addListener(this._keyboardListener,this._keyboardEventPriority))},_removeKeyboardEventListener:function(){this._keyboardListener&&(cc.eventManager.removeEventListener(this._keyboardListener),this._keyboardListener=null)}}),ccui.__LAYOUT_COMPONENT_NAME="__ui_layout",ccui.Widget=ccui.ProtectedNode.extend({_enabled:!0,_bright:!0,_touchEnabled:!1,_brightStyle:null,_touchBeganPosition:null,_touchMovePosition:null,_touchEndPosition:null,_touchEventListener:null,_touchEventSelector:null,_name:"default",_widgetType:null,_actionTag:0,_customSize:null,_layoutParameterDictionary:null,_layoutParameterType:0,_focused:!1,_focusEnabled:!0,_ignoreSize:!1,_affectByClipping:!1,_sizeType:null,_sizePercent:null,_positionType:null,_positionPercent:null,_hit:!1,_nodes:null,_touchListener:null,_className:"Widget",_flippedX:!1,_flippedY:!1,_opacity:255,_highlight:!1,_touchEventCallback:null,_clickEventListener:null,_propagateTouchEvents:!0,_unifySize:!1,_callbackName:null,_callbackType:null,_usingLayoutComponent:!1,_inViewRect:!0,ctor:function(){cc.ProtectedNode.prototype.ctor.call(this),this._brightStyle=ccui.Widget.BRIGHT_STYLE_NONE,this._touchBeganPosition=cc.p(0,0),this._touchMovePosition=cc.p(0,0),this._touchEndPosition=cc.p(0,0),this._widgetType=ccui.Widget.TYPE_WIDGET,this._customSize=cc.size(0,0),this._layoutParameterDictionary={},this._sizeType=ccui.Widget.SIZE_ABSOLUTE,this._sizePercent=cc.p(0,0),this._positionType=ccui.Widget.POSITION_ABSOLUTE,this._positionPercent=cc.p(0,0),this._nodes=[],this._layoutParameterType=ccui.LayoutParameter.NONE,ccui.Widget.prototype.init.call(this)},init:function(){return this._layoutParameterDictionary={},this._initRenderer(),this.setBright(!0),this.onFocusChanged=this.onFocusChange,this.onNextFocusedWidget=null,this.setAnchorPoint(cc.p(.5,.5)),this.ignoreContentAdaptWithSize(!0),!0},onEnter:function(){var t=this._touchListener;t&&!t._isRegistered()&&this._touchEnabled&&cc.eventManager.addListener(t,this),this._usingLayoutComponent||this.updateSizeAndPosition(),this._sizeDirty&&this._onSizeChanged(),cc.ProtectedNode.prototype.onEnter.call(this)},onExit:function(){this.unscheduleUpdate(),cc.ProtectedNode.prototype.onExit.call(this)},_getOrCreateLayoutComponent:function(){var t=this.getComponent(ccui.__LAYOUT_COMPONENT_NAME);return null==t&&(t=new ccui.LayoutComponent,this.addComponent(t)),t},getWidgetParent:function(){var t=this.getParent();return t instanceof ccui.Widget?t:null},_updateContentSizeWithTextureSize:function(t){this._unifySize?this.setContentSize(t):this.setContentSize(this._ignoreSize?t:this._customSize)},_isAncestorsEnabled:function(){var t=this._getAncensterWidget(this);return null==t||!(t&&!t.isEnabled())&&t._isAncestorsEnabled()},setPropagateTouchEvents:function(t){this._propagateTouchEvents=t},isPropagateTouchEvents:function(){return this._propagateTouchEvents},setSwallowTouches:function(t){this._touchListener&&this._touchListener.setSwallowTouches(t)},isSwallowTouches:function(){return!!this._touchListener&&this._touchListener.isSwallowTouches()},_getAncensterWidget:function(t){return null==t||null==(t=t.getParent())?null:t instanceof ccui.Widget?t:this._getAncensterWidget(t.getParent())},_isAncestorsVisible:function(t){return null==t||!((t=t.getParent())&&!t.isVisible())&&this._isAncestorsVisible(t)},setEnabled:function(t){this._enabled=t,this.setBright(t)},_initRenderer:function(){},setContentSize:function(t,e){cc.Node.prototype.setContentSize.call(this,t,e);var i=this._contentSize.width,n=this._contentSize.height;if(this._customSize.width=i,this._customSize.height=n,!this._unifySize&&this._ignoreSize&&(this._contentSize=this.getVirtualRendererSize()),!this._usingLayoutComponent&&this._running){var s=(s=this.getWidgetParent())?s.getContentSize():this._parent.getContentSize();this._sizePercent.x=0<s.width?i/s.width:0,this._sizePercent.y=0<s.height?n/s.height:0}this._running?this._onSizeChanged():this._sizeDirty=!0},_setWidth:function(t){t!==this._contentSize.width&&(cc.Node.prototype._setWidth.call(this,t),this._customSize.width=t,!this._unifySize&&this._ignoreSize&&(this._contentSize=this.getVirtualRendererSize()),!this._usingLayoutComponent&&this._running&&(t=(t=this.getWidgetParent())?t.width:this._parent.width,this._sizePercent.x=0<t?this._customSize.width/t:0),this._running?this._onSizeChanged():this._sizeDirty=!0)},_setHeight:function(t){t!==this._contentSize.height&&(cc.Node.prototype._setHeight.call(this,t),this._customSize.height=t,!this._unifySize&&this._ignoreSize&&(this._contentSize=this.getVirtualRendererSize()),!this._usingLayoutComponent&&this._running&&(t=(t=this.getWidgetParent())?t.height:this._parent.height,this._sizePercent.y=0<t?this._customSize.height/t:0),this._running?this._onSizeChanged():this._sizeDirty=!0)},setSizePercent:function(t){if(this._usingLayoutComponent){(e=this._getOrCreateLayoutComponent()).setUsingPercentContentSize(!0),e.setPercentContentSize(t),e.refreshLayout()}else{this._sizePercent.x=t.x,this._sizePercent.y=t.y;var e=this._customSize.width,i=this._customSize.height;this._running&&((i=this.getWidgetParent())?(e=i.width*t.x,i=i.height*t.y):(e=this._parent.width*t.x,i=this._parent.height*t.y)),this._ignoreSize?this.setContentSize(this.getVirtualRendererSize()):this.setContentSize(e,i),this._customSize.width=e,this._customSize.height=i}},_setWidthPercent:function(t){this._sizePercent.x=t;var e=this._customSize.width;this._running&&(e=((e=this.getWidgetParent())?e.width:this._parent.width)*t),this._ignoreSize?this._setWidth(this.getVirtualRendererSize().width):this._setWidth(e),this._customSize.width=e},_setHeightPercent:function(t){this._sizePercent.y=t;var e=this._customSize.height;this._running&&(e=((e=this.getWidgetParent())?e.height:this._parent.height)*t),this._ignoreSize?this._setHeight(this.getVirtualRendererSize().height):this._setHeight(e),this._customSize.height=e},updateSizeAndPosition:function(t){switch(t||(t=(t=this.getWidgetParent())?t.getLayoutSize():this._parent.getContentSize()),this._sizeType){case ccui.Widget.SIZE_ABSOLUTE:this._ignoreSize?this.setContentSize(this.getVirtualRendererSize()):this.setContentSize(this._customSize),this._sizePercent.x=0<t.width?this._customSize.width/t.width:0,this._sizePercent.y=0<t.height?this._customSize.height/t.height:0;break;case ccui.Widget.SIZE_PERCENT:var e=cc.size(t.width*this._sizePercent.x,t.height*this._sizePercent.y);this._ignoreSize?this.setContentSize(this.getVirtualRendererSize()):this.setContentSize(e),this._customSize.width=e.width,this._customSize.height=e.height}switch(this._onSizeChanged(),e=this.getPosition(),this._positionType){case ccui.Widget.POSITION_ABSOLUTE:0>=t.width||0>=t.height?this._positionPercent.x=this._positionPercent.y=0:(this._positionPercent.x=e.x/t.width,this._positionPercent.y=e.y/t.height);break;case ccui.Widget.POSITION_PERCENT:e=cc.p(t.width*this._positionPercent.x,t.height*this._positionPercent.y)}this._parent instanceof ccui.ImageView&&(t=this._parent._imageRenderer)&&!t._textureLoaded||this.setPosition(e)},setSizeType:function(t){this._sizeType=t,this._usingLayoutComponent&&this._getOrCreateLayoutComponent().setUsingPercentContentSize(this._sizeType===ccui.SIZE_PERCENT)},getSizeType:function(){return this._sizeType},ignoreContentAdaptWithSize:function(t){this._unifySize?this.setContentSize(this._customSize):this._ignoreSize!==t&&(this._ignoreSize=t,this.setContentSize(t?this.getVirtualRendererSize():this._customSize))},isIgnoreContentAdaptWithSize:function(){return this._ignoreSize},getCustomSize:function(){return cc.size(this._customSize)},getLayoutSize:function(){return cc.size(this._contentSize)},getSizePercent:function(){return this._usingLayoutComponent&&(this._sizePercent=this._getOrCreateLayoutComponent().getPercentContentSize()),this._sizePercent},_getWidthPercent:function(){return this._sizePercent.x},_getHeightPercent:function(){return this._sizePercent.y},getWorldPosition:function(){return this.convertToWorldSpace(cc.p(this._anchorPoint.x*this._contentSize.width,this._anchorPoint.y*this._contentSize.height))},getVirtualRenderer:function(){return this},getVirtualRendererSize:function(){return cc.size(this._contentSize)},_onSizeChanged:function(){if(!this._usingLayoutComponent){for(var t=this.getChildren(),e=0,i=t.length;e<i;e++){var n=t[e];n instanceof ccui.Widget&&n.updateSizeAndPosition()}this._sizeDirty=!1}},setTouchEnabled:function(t){this._touchEnabled!==t&&((this._touchEnabled=t)?(this._touchListener||(this._touchListener=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:this.onTouchBegan.bind(this),onTouchMoved:this.onTouchMoved.bind(this),onTouchEnded:this.onTouchEnded.bind(this)})),cc.eventManager.addListener(this._touchListener,this)):cc.eventManager.removeListener(this._touchListener))},isTouchEnabled:function(){return this._touchEnabled},isHighlighted:function(){return this._highlight},setHighlighted:function(t){t!==this._highlight&&(this._highlight=t,this._bright?this._highlight?this.setBrightStyle(ccui.Widget.BRIGHT_STYLE_HIGH_LIGHT):this.setBrightStyle(ccui.Widget.BRIGHT_STYLE_NORMAL):this._onPressStateChangedToDisabled())},isFocused:function(){return this._focused},setFocused:function(t){(this._focused=t)&&(ccui.Widget._focusedWidget=this,ccui.Widget._focusNavigationController&&ccui.Widget._focusNavigationController._setFirstFocsuedWidget(this))},isFocusEnabled:function(){return this._focusEnabled},setFocusEnabled:function(t){this._focusEnabled=t},findNextFocusedWidget:function(t,e){if(null===this.onNextFocusedWidget||null==this.onNextFocusedWidget(t)){var i=e instanceof ccui.Layout;if(this.isFocused()||i){var n=this.getParent();return null!==n&&n instanceof ccui.Layout?n.findNextFocusedWidget(t,e):i?e.findNextFocusedWidget(t,e):e}return e}return i=this.onNextFocusedWidget(t),this.dispatchFocusEvent(this,i),i},requestFocus:function(){this!==ccui.Widget._focusedWidget&&this.dispatchFocusEvent(ccui.Widget._focusedWidget,this)},getCurrentFocusedWidget:function(){return ccui.Widget._focusedWidget},onFocusChanged:null,onNextFocusedWidget:null,interceptTouchEvent:function(t,e,i){var n=this.getWidgetParent();n&&n.interceptTouchEvent(t,e,i)},onFocusChange:function(t,e){t&&t.setFocused(!1),e&&e.setFocused(!0)},dispatchFocusEvent:function(t,e){t&&!t.isFocused()&&(t=ccui.Widget._focusedWidget),e!==t&&(e&&e.onFocusChanged&&e.onFocusChanged(t,e),t&&e.onFocusChanged&&t.onFocusChanged(t,e),cc.eventManager.dispatchEvent(new cc.EventFocus(t,e)))},setBright:function(t){(this._bright=t)?(this._brightStyle=ccui.Widget.BRIGHT_STYLE_NONE,this.setBrightStyle(ccui.Widget.BRIGHT_STYLE_NORMAL)):this._onPressStateChangedToDisabled()},setBrightStyle:function(t){if(this._brightStyle!==t)switch(this._brightStyle=t=t||ccui.Widget.BRIGHT_STYLE_NORMAL,this._brightStyle){case ccui.Widget.BRIGHT_STYLE_NORMAL:this._onPressStateChangedToNormal();break;case ccui.Widget.BRIGHT_STYLE_HIGH_LIGHT:this._onPressStateChangedToPressed()}},_onPressStateChangedToNormal:function(){},_onPressStateChangedToPressed:function(){},_onPressStateChangedToDisabled:function(){},_updateChildrenDisplayedRGBA:function(){this.setColor(this.getColor()),this.setOpacity(this.getOpacity())},didNotSelectSelf:function(){},onTouchBegan:function(t,e){if(this._hit=!1,this.isVisible()&&this.isEnabled()&&this._isAncestorsEnabled()&&this._isAncestorsVisible(this)){var i=t.getLocation();this._touchBeganPosition.x=i.x,this._touchBeganPosition.y=i.y,this.hitTest(this._touchBeganPosition)&&this.isClippingParentContainsPoint(this._touchBeganPosition)&&(this._hit=!0)}return!!this._hit&&(this.setHighlighted(!0),this._propagateTouchEvents&&this.propagateTouchEvent(ccui.Widget.TOUCH_BEGAN,this,t),this._pushDownEvent(),!0)},propagateTouchEvent:function(t,e,i){var n=this.getWidgetParent();n&&n.interceptTouchEvent(t,e,i)},onTouchMoved:function(t,e){var i=t.getLocation();this._touchMovePosition.x=i.x,this._touchMovePosition.y=i.y,this.setHighlighted(this.hitTest(i)),this._propagateTouchEvents&&this.propagateTouchEvent(ccui.Widget.TOUCH_MOVED,this,t),this._moveEvent()},onTouchEnded:function(t,e){var i=t.getLocation();this._touchEndPosition.x=i.x,this._touchEndPosition.y=i.y,this._propagateTouchEvents&&this.propagateTouchEvent(ccui.Widget.TOUCH_ENDED,this,t),i=this._highlight,this.setHighlighted(!1),i?this._releaseUpEvent():this._cancelUpEvent()},onTouchCancelled:function(t){this.setHighlighted(!1),this._cancelUpEvent()},onTouchLongClicked:function(t){this.longClickEvent()},_pushDownEvent:function(){this._touchEventCallback&&this._touchEventCallback(this,ccui.Widget.TOUCH_BEGAN),this._touchEventListener&&this._touchEventSelector&&this._touchEventSelector.call(this._touchEventListener,this,ccui.Widget.TOUCH_BEGAN)},_moveEvent:function(){this._touchEventCallback&&this._touchEventCallback(this,ccui.Widget.TOUCH_MOVED),this._touchEventListener&&this._touchEventSelector&&this._touchEventSelector.call(this._touchEventListener,this,ccui.Widget.TOUCH_MOVED)},_releaseUpEvent:function(){this._touchEventCallback&&this._touchEventCallback(this,ccui.Widget.TOUCH_ENDED),this._touchEventListener&&this._touchEventSelector&&this._touchEventSelector.call(this._touchEventListener,this,ccui.Widget.TOUCH_ENDED),this._clickEventListener&&this._clickEventListener(this)},_cancelUpEvent:function(){this._touchEventCallback&&this._touchEventCallback(this,ccui.Widget.TOUCH_CANCELED),this._touchEventListener&&this._touchEventSelector&&this._touchEventSelector.call(this._touchEventListener,this,ccui.Widget.TOUCH_CANCELED)},longClickEvent:function(){},addTouchEventListener:function(t,e){void 0===e?this._touchEventCallback=t:(this._touchEventSelector=t,this._touchEventListener=e)},addClickEventListener:function(t){this._clickEventListener=t},hitTest:function(t){var e=cc.rect(0,0,this._contentSize.width,this._contentSize.height);return cc.rectContainsPoint(e,this.convertToNodeSpace(t))},isClippingParentContainsPoint:function(t){this._affectByClipping=!1;for(var e=this.getParent(),i=null;e;){if(e instanceof ccui.Layout&&e.isClippingEnabled()){this._affectByClipping=!0,i=e;break}e=e.getParent()}return!this._affectByClipping||(!i||!!i.hitTest(t)&&i.isClippingParentContainsPoint(t))},checkChildInfo:function(t,e,i){var n=this.getWidgetParent();n&&n.checkChildInfo(t,e,i)},setPosition:function(t,e){if(!this._usingLayoutComponent&&this._running){var i=this.getWidgetParent();i&&(0>=(i=i.getContentSize()).width||0>=i.height?(this._positionPercent.x=0,this._positionPercent.y=0):void 0===e?(this._positionPercent.x=t.x/i.width,this._positionPercent.y=t.y/i.height):(this._positionPercent.x=t/i.width,this._positionPercent.y=e/i.height))}cc.Node.prototype.setPosition.call(this,t,e)},setPositionX:function(t){if(this._running){var e=this.getWidgetParent();e&&(e=e.width,this._positionPercent.x=0>=e?0:t/e)}cc.Node.prototype.setPositionX.call(this,t)},setPositionY:function(t){if(this._running){var e=this.getWidgetParent();e&&(e=e.height,this._positionPercent.y=0>=e?0:t/e)}cc.Node.prototype.setPositionY.call(this,t)},setPositionPercent:function(t){if(this._usingLayoutComponent){var e=this._getOrCreateLayoutComponent();e.setPositionPercentX(t.x),e.setPositionPercentY(t.y),e.refreshLayout()}else this._setXPercent(t.x),this._setYPercent(t.y),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},_setXPercent:function(t){if(this._usingLayoutComponent){var e=this._getOrCreateLayoutComponent();e.setPositionPercentX(t.x),e.refreshLayout()}else this._positionPercent.x=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},_setYPercent:function(t){if(this._usingLayoutComponent){var e=this._getOrCreateLayoutComponent();e.setPositionPercentY(t.x),e.refreshLayout()}else this._positionPercent.y=t,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getPositionPercent:function(){if(this._usingLayoutComponent){var t=this._getOrCreateLayoutComponent();this._positionPercent.x=t.getPositionPercentX(),this._positionPercent.y=t.getPositionPercentY()}return cc.p(this._positionPercent)},_getXPercent:function(){if(this._usingLayoutComponent){var t=this._getOrCreateLayoutComponent();this._positionPercent.x=t.getPositionPercentX(),this._positionPercent.y=t.getPositionPercentY()}return this._positionPercent.x},_getYPercent:function(){if(this._usingLayoutComponent){var t=this._getOrCreateLayoutComponent();this._positionPercent.x=t.getPositionPercentX(),this._positionPercent.y=t.getPositionPercentY()}return this._positionPercent.y},setPositionType:function(t){if(this._positionType=t,this._usingLayoutComponent){var e=this._getOrCreateLayoutComponent();t===ccui.POSITION_ABSOLUTE?(e.setPositionPercentXEnabled(!1),e.setPositionPercentYEnabled(!1)):(e.setPositionPercentXEnabled(!0),e.setPositionPercentYEnabled(!0))}this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getPositionType:function(){return this._positionType},setFlippedX:function(t){var e=this.getScaleX();this._flippedX=t,this.setScaleX(e)},isFlippedX:function(){return this._flippedX},setFlippedY:function(t){var e=this.getScaleY();this._flippedY=t,this.setScaleY(e)},isFlippedY:function(){return this._flippedY},_adaptRenderers:function(){},isBright:function(){return this._bright},isEnabled:function(){return this._enabled},getLeftBoundary:function(){return this.getPositionX()-this._getAnchorX()*this._contentSize.width},getBottomBoundary:function(){return this.getPositionY()-this._getAnchorY()*this._contentSize.height},getRightBoundary:function(){return this.getLeftBoundary()+this._contentSize.width},getTopBoundary:function(){return this.getBottomBoundary()+this._contentSize.height},getTouchBeganPosition:function(){return cc.p(this._touchBeganPosition)},getTouchMovePosition:function(){return cc.p(this._touchMovePosition)},getTouchEndPosition:function(){return cc.p(this._touchEndPosition)},getWidgetType:function(){return this._widgetType},setLayoutParameter:function(t){t&&(this._layoutParameterDictionary[t.getLayoutType()]=t,this._layoutParameterType=t.getLayoutType())},getLayoutParameter:function(t){return t=t||this._layoutParameterType,this._layoutParameterDictionary[t]},getDescription:function(){return"Widget"},clone:function(){var t=this._createCloneInstance();return t._copyProperties(this),t._copyClonedWidgetChildren(this),t},_createCloneInstance:function(){return new ccui.Widget},_copyClonedWidgetChildren:function(t){t=t.getChildren();for(var e=0;e<t.length;e++){var i=t[e];i instanceof ccui.Widget&&this.addChild(i.clone())}},_copySpecialProperties:function(t){},_copyProperties:function(t){for(var e in this.setEnabled(t.isEnabled()),this.setVisible(t.isVisible()),this.setBright(t.isBright()),this.setTouchEnabled(t.isTouchEnabled()),this.setLocalZOrder(t.getLocalZOrder()),this.setTag(t.getTag()),this.setName(t.getName()),this.setActionTag(t.getActionTag()),this._ignoreSize=t._ignoreSize,this.setContentSize(t._contentSize),this._customSize.width=t._customSize.width,this._customSize.height=t._customSize.height,this._copySpecialProperties(t),this._sizeType=t.getSizeType(),this._sizePercent.x=t._sizePercent.x,this._sizePercent.y=t._sizePercent.y,this._positionType=t._positionType,this._positionPercent.x=t._positionPercent.x,this._positionPercent.y=t._positionPercent.y,this.setPosition(t.getPosition()),this.setAnchorPoint(t.getAnchorPoint()),this.setScaleX(t.getScaleX()),this.setScaleY(t.getScaleY()),this.setRotation(t.getRotation()),this.setRotationX(t.getRotationX()),this.setRotationY(t.getRotationY()),this.setFlippedX(t.isFlippedX()),this.setFlippedY(t.isFlippedY()),this.setColor(t.getColor()),this.setOpacity(t.getOpacity()),this._touchEventCallback=t._touchEventCallback,this._touchEventListener=t._touchEventListener,this._touchEventSelector=t._touchEventSelector,this._clickEventListener=t._clickEventListener,this._focused=t._focused,this._focusEnabled=t._focusEnabled,this._propagateTouchEvents=t._propagateTouchEvents,t._layoutParameterDictionary){var i=t._layoutParameterDictionary[e];i&&this.setLayoutParameter(i.clone())}},setActionTag:function(t){this._actionTag=t},getActionTag:function(){return this._actionTag},getLeftInParent:function(){return cc.log("getLeftInParent is deprecated. Please use getLeftBoundary instead."),this.getLeftBoundary()},getBottomInParent:function(){return cc.log("getBottomInParent is deprecated. Please use getBottomBoundary instead."),this.getBottomBoundary()},getRightInParent:function(){return cc.log("getRightInParent is deprecated. Please use getRightBoundary instead."),this.getRightBoundary()},getTopInParent:function(){return cc.log("getTopInParent is deprecated. Please use getTopBoundary instead."),this.getTopBoundary()},getTouchEndPos:function(){return cc.log("getTouchEndPos is deprecated. Please use getTouchEndPosition instead."),this.getTouchEndPosition()},getTouchMovePos:function(){return cc.log("getTouchMovePos is deprecated. Please use getTouchMovePosition instead."),this.getTouchMovePosition()},clippingParentAreaContainPoint:function(t){cc.log("clippingParentAreaContainPoint is deprecated. Please use isClippingParentContainsPoint instead."),this.isClippingParentContainsPoint(t)},getTouchStartPos:function(){return cc.log("getTouchStartPos is deprecated. Please use getTouchBeganPosition instead."),this.getTouchBeganPosition()},setSize:function(t){this.setContentSize(t)},getSize:function(){return this.getContentSize()},addNode:function(t,e,i){t instanceof ccui.Widget?cc.log("Please use addChild to add a Widget."):(cc.Node.prototype.addChild.call(this,t,e,i),this._nodes.push(t))},getNodeByTag:function(t){for(var e=this._nodes,i=0;i<e.length;i++){var n=e[i];if(n&&n.getTag()===t)return n}return null},getNodes:function(){return this._nodes},removeNode:function(t,e){cc.Node.prototype.removeChild.call(this,t,e),cc.arrayRemoveObject(this._nodes,t)},_getNormalGLProgram:function(){return cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR)},_getGrayGLProgram:function(){return cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY)},removeNodeByTag:function(t,e){var i=this.getChildByTag(t);i?this.removeChild(i,e):cc.log("cocos2d: removeNodeByTag(tag = %d): child not found!",t)},removeAllNodes:function(){for(var t=0;t<this._nodes.length;t++)cc.Node.prototype.removeChild.call(this,this._nodes[t]);this._nodes.length=0},_findLayout:function(){cc.renderer.childrenOrderDirty=!0;for(var t=this._parent;t;){if(t._doLayout){t._doLayoutDirty=!0;break}t=t._parent}},isUnifySizeEnabled:function(){return this._unifySize},setUnifySizeEnabled:function(t){this._unifySize=t},_ccEventCallback:null,addCCSEventListener:function(t){this._ccEventCallback=t},setScaleX:function(t){this._flippedX&&(t*=-1),cc.Node.prototype.setScaleX.call(this,t)},setScaleY:function(t){this._flippedY&&(t*=-1),cc.Node.prototype.setScaleY.call(this,t)},setScale:function(t,e){void 0===e&&(e=t),this.setScaleX(t),this.setScaleY(e)},getScaleX:function(){var t=cc.Node.prototype.getScaleX.call(this);return this._flippedX&&(t*=-1),t},getScaleY:function(){var t=cc.Node.prototype.getScaleY.call(this);return this._flippedY&&(t*=-1),t},getScale:function(){return this.getScaleX()!==this.getScaleY()&&cc.log("Widget#scale. ScaleX != ScaleY. Don't know which one to return"),this.getScaleX()},setCallbackName:function(t){this._callbackName=t},getCallbackName:function(){return this._callbackName},setCallbackType:function(t){this._callbackType=t},getCallbackType:function(){return this._callbackType},setLayoutComponentEnabled:function(t){this._usingLayoutComponent=t},isLayoutComponentEnabled:function(){return this._usingLayoutComponent},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?new ccui.Widget.WebGLRenderCmd(this):new ccui.Widget.CanvasRenderCmd(this)}}),_p=ccui.Widget.prototype,cc.defineGetterSetter(_p,"xPercent",_p._getXPercent,_p._setXPercent),cc.defineGetterSetter(_p,"yPercent",_p._getYPercent,_p._setYPercent),cc.defineGetterSetter(_p,"widthPercent",_p._getWidthPercent,_p._setWidthPercent),cc.defineGetterSetter(_p,"heightPercent",_p._getHeightPercent,_p._setHeightPercent),cc.defineGetterSetter(_p,"widgetParent",_p.getWidgetParent),cc.defineGetterSetter(_p,"enabled",_p.isEnabled,_p.setEnabled),cc.defineGetterSetter(_p,"focused",_p.isFocused,_p.setFocused),cc.defineGetterSetter(_p,"sizeType",_p.getSizeType,_p.setSizeType),cc.defineGetterSetter(_p,"widgetType",_p.getWidgetType),cc.defineGetterSetter(_p,"touchEnabled",_p.isTouchEnabled,_p.setTouchEnabled),cc.defineGetterSetter(_p,"updateEnabled",_p.isUpdateEnabled,_p.setUpdateEnabled),cc.defineGetterSetter(_p,"bright",_p.isBright,_p.setBright),cc.defineGetterSetter(_p,"name",_p.getName,_p.setName),cc.defineGetterSetter(_p,"actionTag",_p.getActionTag,_p.setActionTag),cc.defineGetterSetter(_p,"opacity",_p.getOpacity,_p.setOpacity),_p=null,ccui.Widget.create=function(){return new ccui.Widget},ccui.Widget._focusedWidget=null,ccui.Widget._focusNavigationController=null,ccui.Widget.enableDpadNavigation=function(t){t?(null==ccui.Widget._focusNavigationController&&(ccui.Widget._focusNavigationController=new ccui._FocusNavigationController,ccui.Widget._focusedWidget&&ccui.Widget._focusNavigationController._setFirstFocsuedWidget(ccui.Widget._focusedWidget)),ccui.Widget._focusNavigationController.enableFocusNavigation(!0)):ccui.Widget._focusNavigationController&&(ccui.Widget._focusNavigationController.enableFocusNavigation(!1),ccui.Widget._focusNavigationController=null)},ccui.Widget.getCurrentFocusedWidget=function(){return ccui.Widget._focusedWidget},ccui.Widget.BRIGHT_STYLE_NONE=-1,ccui.Widget.BRIGHT_STYLE_NORMAL=0,ccui.Widget.BRIGHT_STYLE_HIGH_LIGHT=1,ccui.Widget.TYPE_WIDGET=0,ccui.Widget.TYPE_CONTAINER=1,ccui.Widget.LEFT=0,ccui.Widget.RIGHT=1,ccui.Widget.UP=2,ccui.Widget.DOWN=3,ccui.Widget.LOCAL_TEXTURE=0,ccui.Widget.PLIST_TEXTURE=1,ccui.Widget.TOUCH_BEGAN=0,ccui.Widget.TOUCH_MOVED=1,ccui.Widget.TOUCH_ENDED=2,ccui.Widget.TOUCH_CANCELED=3,ccui.Widget.SIZE_ABSOLUTE=0,ccui.Widget.SIZE_PERCENT=1,ccui.Widget.POSITION_ABSOLUTE=0,ccui.Widget.POSITION_PERCENT=1,cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,(function(){if(cc._renderType===cc.game.RENDER_TYPE_CANVAS){ccui.Widget.CanvasRenderCmd=function(t){this._pNodeCmdCtor(t),this._needDraw=!1};var t=ccui.Widget.CanvasRenderCmd.prototype=Object.create(cc.ProtectedNode.CanvasRenderCmd.prototype);t.constructor=ccui.Widget.CanvasRenderCmd,t.visit=function(t){var e=this._node,i=cc.renderer;(t=t||this.getParentRenderCmd())&&(this._curLevel=t._curLevel+1),isNaN(e._customZ)&&(e._vertexZ=i.assignedZ,i.assignedZ+=i.assignedZStep),e._adaptRenderers(),this._syncStatus(t)},t.transform=function(t,e){this._transform||(this._transform={a:1,b:0,c:0,d:1,tx:0,ty:0},this._worldTransform={a:1,b:0,c:0,d:1,tx:0,ty:0});var i=this._node;if(i._visible&&i._running){if(i._adaptRenderers(),!this._usingLayoutComponent){var n=i.getWidgetParent();n&&(0!==(n=n.getContentSize()).width&&0!==n.height&&(i._position.x=n.width*i._positionPercent.x,i._position.y=n.height*i._positionPercent.y))}this.pNodeTransform(t,e)}}}else ccui.Widget.WebGLRenderCmd=function(t){this._pNodeCmdCtor(t),this._needDraw=!1},(t=ccui.Widget.WebGLRenderCmd.prototype=Object.create(cc.ProtectedNode.WebGLRenderCmd.prototype)).constructor=ccui.Widget.WebGLRenderCmd,t.visit=function(t){var e=this._node,i=cc.renderer;(t=t||this.getParentRenderCmd())&&(this._curLevel=t._curLevel+1),isNaN(e._customZ)&&(e._vertexZ=i.assignedZ,i.assignedZ+=i.assignedZStep),e._adaptRenderers(),this._syncStatus(t)},t.transform=function(t,e){this._transform||(this._transform={a:1,b:0,c:0,d:1,tx:0,ty:0},this._worldTransform={a:1,b:0,c:0,d:1,tx:0,ty:0});var i=this._node;if(i._visible&&i._running){if(i._adaptRenderers(),!this._usingLayoutComponent){var n=i.getWidgetParent();n&&(0!==(n=n.getContentSize()).width&&0!==n.height&&(i._position.x=n.width*i._positionPercent.x,i._position.y=n.height*i._positionPercent.y))}this.pNodeTransform(t,e)}};t.widgetTransform=t.transform})),function(){var t,e={_pool:{},_lengths:[],put:function(t){var e=t.length;this._pool[e]?this._pool[e].push(t):(this._pool[e]=[t],this._lengths.push(e),this._lengths.sort())},get:function(t){for(var e,i=0;i<this._lengths.length;i++)if(this._lengths[i]>=t){e=this._lengths[i];break}if(e)return this._pool[e].pop()}},i=cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL,n={_rebuildQuads_base:function(i,n,s,r){var o,a,c,h=i._vertices,l=i._renderCmd._worldTransform;if(r)a=o=0,c=s.width,s=s.height;else{o=n._originalSize;var u=n._rect,d=n._offset;c=s.width/o.width,r=s.height/o.height;var _=d.x-(o.width-u.width)/2;a=d.y+(o.height-u.height)/2;var g=d.y-(o.height-u.height)/2;o=(d.x+(o.width-u.width)/2)*c,a*=r,c=s.width+_*c,s=s.height+g*r}8>h.length&&(e.put(h),h=e.get(8)||new Float32Array(8),i._vertices=h),t?(h[0]=o*l.a+a*l.c+l.tx,h[1]=o*l.b+a*l.d+l.ty,h[2]=c*l.a+a*l.c+l.tx,h[3]=c*l.b+a*l.d+l.ty,h[4]=o*l.a+s*l.c+l.tx,h[5]=o*l.b+s*l.d+l.ty,h[6]=c*l.a+s*l.c+l.tx,h[7]=c*l.b+s*l.d+l.ty):(h[0]=o,h[1]=a,h[2]=c,h[3]=a,h[4]=o,h[5]=s,h[6]=c,h[7]=s),i._uvsDirty&&this._calculateUVs(i,n),i._vertCount=4},_calculateUVs:function(t,n){var s=t._uvs,r=n._texture._pixelsWide,o=n._texture._pixelsHigh,a=n._rect;a=cc.rectPointsToPixels(a);8>s.length&&(e.put(s),s=e.get(8)||new Float32Array(8),t._uvs=s);var c,h,l=i?.5:0;n._rotated?(c=(a.x+l)/r,h=(a.y+a.width-l)/o,r=(a.x+a.height-l)/r,o=(a.y+l)/o,s[0]=c,s[1]=o,s[2]=c,s[3]=h,s[4]=r,s[5]=o,s[6]=r,s[7]=h):(c=(a.x+l)/r,h=(a.y+a.height-l)/o,r=(a.x+a.width-l)/r,o=(a.y+l)/o,s[0]=c,s[1]=h,s[2]=r,s[3]=h,s[4]=c,s[5]=o,s[6]=r,s[7]=o)}},s={x:Array(4),y:Array(4),_rebuildQuads_base:function(i,n,s,r,o,a,c){var h=i._vertices,l=i._renderCmd._worldTransform,u=s.width-r-o,d=s.height-a-c,_=s.width/(r+o),g=s.height/(a+c),f=this.x,p=this.y;if(f[0]=0,f[1]=r*(1<_?1:_),f[2]=f[1]+(0>u?0:u),f[3]=s.width,p[0]=0,p[1]=c*(1<g?1:g),p[2]=p[1]+(0>d?0:d),p[3]=s.height,32>h.length&&(e.put(h),h=e.get(32)||new Float32Array(32),i._vertices=h),s=0,t)for(u=0;4>u;u++)for(d=0;4>d;d++)h[s]=f[d]*l.a+p[u]*l.c+l.tx,h[s+1]=f[d]*l.b+p[u]*l.d+l.ty,s+=2;else for(u=0;4>u;u++)for(d=0;4>d;d++)h[s]=f[d],h[s+1]=p[u],s+=2;i._uvsDirty&&this._calculateUVs(i,n,r,o,a,c)},_calculateUVs:function(t,n,s,r,o,a){var c,h=t._uvs,l=n._rect,u=n._texture._pixelsWide,d=n._texture._pixelsHigh,_=n._rect;_=cc.rectPointsToPixels(_),l=cc.rectPointsToPixels(l);s*=f=cc.contentScaleFactor(),r=l.width-s-r*f,o*=f,a*=f,c=l.height-o-a,32>h.length&&(e.put(h),h=e.get(32)||new Float32Array(32),t._uvs=h),t=this.x;l=this.y;var g=i?.5:0,f=0;if(n._rotated)for(t[0]=(_.x+g)/u,t[1]=(a+_.x)/u,t[2]=(a+c+_.x)/u,t[3]=(_.x+_.height-g)/u,l[3]=(_.y+g)/d,l[2]=(s+_.y)/d,l[1]=(s+r+_.y)/d,l[0]=(_.y+_.width-g)/d,n=0;4>n;n++)for(u=0;4>u;u++)h[f]=t[n],h[f+1]=l[3-u],f+=2;else for(t[0]=(_.x+g)/u,t[1]=(s+_.x)/u,t[2]=(s+r+_.x)/u,t[3]=(_.x+_.width-g)/u,l[3]=(_.y+g)/d,l[2]=(o+_.y)/d,l[1]=(o+c+_.y)/d,l[0]=(_.y+_.height-g)/d,n=0;4>n;n++)for(u=0;4>u;u++)h[f]=t[u],h[f+1]=l[n],f+=2}};ccui.Scale9Sprite=cc.Scale9Sprite=cc.Node.extend({_spriteFrame:null,_scale9Image:null,_insetLeft:0,_insetRight:0,_insetTop:0,_insetBottom:0,_blendFunc:null,_renderingType:1,_brightState:0,_opacityModifyRGB:!1,_rawVerts:null,_rawUvs:null,_vertices:null,_uvs:null,_vertCount:0,_quadsDirty:!0,_uvsDirty:!0,_isTriangle:!1,_isTrimmedContentSize:!1,_textureLoaded:!1,_flippedX:!1,_flippedY:!1,_className:"Scale9Sprite",ctor:function(i,n,s){if(cc.Node.prototype.ctor.call(this),this._loader=new cc.Sprite.LoadManager,this._renderCmd.setState(this._brightState),this._blendFunc=cc.BlendFunc._alphaPremultiplied(),this.setAnchorPoint(cc.p(.5,.5)),this._rawUvs=this._rawVerts=null,this._vertices=e.get(8)||new Float32Array(8),this._uvs=e.get(8)||new Float32Array(8),void 0!==i)if(i instanceof cc.SpriteFrame)this.initWithSpriteFrame(i,n);else{var r=cc.spriteFrameCache.getSpriteFrame(i);r?this.initWithSpriteFrame(r,n):this.initWithFile(i,n,s)}void 0===t&&(t=cc._renderType===cc.game.RENDER_TYPE_WEBGL)},textureLoaded:function(){return this._textureLoaded},getCapInsets:function(){return cc.rect(this._capInsetsInternal)},_asyncSetCapInsets:function(){this.removeEventListener("load",this._asyncSetCapInsets,this),this.setCapInsets(this._cacheCapInsets),this._cacheCapInsets=null},setCapInsets:function(t){if(!this.loaded())return this._cacheCapInsets=t,this.removeEventListener("load",this._asyncSetCapInsets,this),this.addEventListener("load",this._asyncSetCapInsets,this),!1;this._capInsetsInternal=t,this._updateCapInsets(this._spriteFrame._rect,this._capInsetsInternal)},_updateCapInsets:function(t,e){e&&t&&!cc._rectEqualToZero(e)?this._capInsetsInternal=e:(t=t||{x:0,y:0,width:this._contentSize.width,height:this._contentSize.height},this._capInsetsInternal=cc.rect(t.width/3,t.height/3,t.width/3,t.height/3)),cc._rectEqualToZero(t)||(this._insetLeft=this._capInsetsInternal.x,this._insetTop=this._capInsetsInternal.y,this._insetRight=t.width-this._insetLeft-this._capInsetsInternal.width,this._insetBottom=t.height-this._insetTop-this._capInsetsInternal.height)},initWithFile:function(t,e,i){if(t instanceof cc.Rect?(i=t=e,e=cc.rect(0,0,0,0)):(e=e||cc.rect(0,0,0,0),i=i||cc.rect(0,0,0,0)),!t)throw Error("ccui.Scale9Sprite.initWithFile(): file should be non-null");var n=cc.textureCache.getTextureForKey(t);n||(n=cc.textureCache.addImage(t));var s=n.isLoaded();return this._textureLoaded=s,this._loader.clear(),s?(cc._rectEqualToZero(e)&&(s=n.getContentSize(),e=cc.rect(0,0,s.width,s.height)),this.setTexture(n,e),this._updateCapInsets(e,i),!0):(this._loader.once(n,(function(){this.initWithFile(t,e,i),this.dispatchEvent("load")}),this),!1)},updateWithBatchNode:function(t,e,i,n){if(!t)return!1;var s=t.getTexture();return this._loader.clear(),s.isLoaded()?(this.setTexture(s,e),this._updateCapInsets(e,n),!0):(this._loader.once(s,(function(){this.updateWithBatchNode(t,e,i,n),this.dispatchEvent("load")}),this),!1)},initWithSpriteFrame:function(t,e){this.setSpriteFrame(t),e=e||cc.rect(0,0,0,0),this._updateCapInsets(t._rect,e)},initWithSpriteFrameName:function(t,e){if(!t)throw Error("ccui.Scale9Sprite.initWithSpriteFrameName(): spriteFrameName should be non-null");e=e||cc.rect(0,0,0,0);var i=cc.spriteFrameCache.getSpriteFrame(t);if(null==i)return cc.log("ccui.Scale9Sprite.initWithSpriteFrameName(): can't find the sprite frame by spriteFrameName"),!1;this.setSpriteFrame(i),e=e||cc.rect(0,0,0,0),this._updateCapInsets(i._rect,e)},loaded:function(){return null!==this._spriteFrame&&this._spriteFrame.textureLoaded()},setTexture:function(t,e){var i=new cc.SpriteFrame(t,e);this.setSpriteFrame(i)},_updateBlendFunc:function(){var t=this._blendFunc;this._spriteFrame&&this._spriteFrame._texture.hasPremultipliedAlpha()?(t.src===cc.SRC_ALPHA&&t.dst===cc.BLEND_DST&&(t.src=cc.ONE),this._opacityModifyRGB=!0):(t.src===cc.ONE&&t.dst===cc.BLEND_DST&&(t.src=cc.SRC_ALPHA),this._opacityModifyRGB=!1)},setOpacityModifyRGB:function(t){this._opacityModifyRGB!==t&&(this._opacityModifyRGB=t,this._renderCmd._setColorDirty())},isOpacityModifyRGB:function(){return this._opacityModifyRGB},setSpriteFrame:function(t){if(t){this._spriteFrame=t,this._uvsDirty=this._quadsDirty=!0;var e=this,i=function(){cc.sizeEqualToSize(e._contentSize,cc.size(0,0))&&e.setContentSize(e._spriteFrame._rect),e._textureLoaded=!0,e._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty),cc.renderer.childrenOrderDirty=!0};e._textureLoaded=t.textureLoaded(),e._textureLoaded?i():(this._loader.clear(),this._loader.once(t,(function(){i(),this.dispatchEvent("load")}),this))}},setBlendFunc:function(t,e){void 0===e?(this._blendFunc.src=t.src||cc.BLEND_SRC,this._blendFunc.dst=t.dst||cc.BLEND_DST):(this._blendFunc.src=t||cc.BLEND_SRC,this._blendFunc.dst=e||cc.BLEND_DST),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty)},getBlendFunc:function(){return new cc.BlendFunc(this._blendFunc.src,this._blendFunc.dst)},setPreferredSize:function(t){t&&!cc.sizeEqualToSize(this._contentSize,t)&&this.setContentSize(t)},getPreferredSize:function(){return this.getContentSize()},setContentSize:function(t,e){void 0===e&&(e=t.height,t=t.width),t===this._contentSize.width&&e===this._contentSize.height||(cc.Node.prototype.setContentSize.call(this,t,e),this._quadsDirty=!0)},getContentSize:function(){return this._renderingType===ccui.Scale9Sprite.RenderingType.SIMPLE&&this._spriteFrame?this._spriteFrame._originalSize:cc.size(this._contentSize)},_setWidth:function(t){cc.Node.prototype._setWidth.call(this,t),this._quadsDirty=!0},_setHeight:function(t){cc.Node.prototype._setHeight.call(this,t),this._quadsDirty=!0},setState:function(t){this._brightState=t,this._renderCmd.setState(t),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty)},getState:function(){return this._brightState},setRenderingType:function(t){this._renderingType!==t&&(this._renderingType=t,this._uvsDirty=this._quadsDirty=!0,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty))},getRenderingType:function(){return this._renderingType},setInsetLeft:function(t){this._insetLeft=t,this._uvsDirty=this._quadsDirty=!0,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty)},getInsetLeft:function(){return this._insetLeft},setInsetTop:function(t){this._insetTop=t,this._uvsDirty=this._quadsDirty=!0,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty)},getInsetTop:function(){return this._insetTop},setInsetRight:function(t){this._insetRight=t,this._uvsDirty=this._quadsDirty=!0,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty)},getInsetRight:function(){return this._insetRight},setInsetBottom:function(t){this._insetBottom=t,this._uvsDirty=this._quadsDirty=!0,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty)},getInsetBottom:function(){return this._insetBottom},_rebuildQuads:function(){if(this._spriteFrame&&this._spriteFrame._textureLoaded){switch(this._updateBlendFunc(),this._isTriangle=!1,this._renderingType){case o.SIMPLE:n._rebuildQuads_base(this,this._spriteFrame,this._contentSize,this._isTrimmedContentSize);break;case o.SLICED:s._rebuildQuads_base(this,this._spriteFrame,this._contentSize,this._insetLeft,this._insetRight,this._insetTop,this._insetBottom);break;default:return this._uvsDirty=this._quadsDirty=!1,void cc.error("Can not generate quad")}this._uvsDirty=this._quadsDirty=!1}},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new ccui.Scale9Sprite.CanvasRenderCmd(this):new ccui.Scale9Sprite.WebGLRenderCmd(this)}});var r=ccui.Scale9Sprite.prototype;cc.EventHelper.prototype.apply(r),cc.defineGetterSetter(r,"preferredSize",r.getPreferredSize,r.setPreferredSize),cc.defineGetterSetter(r,"capInsets",r.getCapInsets,r.setCapInsets),cc.defineGetterSetter(r,"insetLeft",r.getInsetLeft,r.setInsetLeft),cc.defineGetterSetter(r,"insetTop",r.getInsetTop,r.setInsetTop),cc.defineGetterSetter(r,"insetRight",r.getInsetRight,r.setInsetRight),cc.defineGetterSetter(r,"insetBottom",r.getInsetBottom,r.setInsetBottom),r=null,ccui.Scale9Sprite.create=function(t,e,i){return new ccui.Scale9Sprite(t,e,i)},ccui.Scale9Sprite.createWithSpriteFrame=function(t,e){return new ccui.Scale9Sprite(t,e)},ccui.Scale9Sprite.createWithSpriteFrameName=function(t,e){return new ccui.Scale9Sprite(t,e)},ccui.Scale9Sprite.POSITIONS_CENTRE=0,ccui.Scale9Sprite.POSITIONS_TOP=1,ccui.Scale9Sprite.POSITIONS_LEFT=2,ccui.Scale9Sprite.POSITIONS_RIGHT=3,ccui.Scale9Sprite.POSITIONS_BOTTOM=4,ccui.Scale9Sprite.POSITIONS_TOPRIGHT=5,ccui.Scale9Sprite.POSITIONS_TOPLEFT=6,ccui.Scale9Sprite.POSITIONS_BOTTOMRIGHT=7,ccui.Scale9Sprite.state={NORMAL:0,GRAY:1};var o=ccui.Scale9Sprite.RenderingType={SIMPLE:0,SLICED:1}}(),function(){ccui.Scale9Sprite.CanvasRenderCmd=function(t){cc.Node.CanvasRenderCmd.call(this,t),this._needDraw=!0,this._state=ccui.Scale9Sprite.state.NORMAL,this._originalTexture=this._textureToRender=null};var t=ccui.Scale9Sprite.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);t.constructor=ccui.Scale9Sprite.CanvasRenderCmd,t.transform=function(t,e){this.originTransform(t,e),this._node._rebuildQuads()},t.needDraw=function(){return this._needDraw&&this._node.loaded()},t._updateDisplayColor=function(t){cc.Node.RenderCmd.prototype._updateDisplayColor.call(this,t),this._originalTexture=this._textureToRender=null},t.setState=function(t){this._state!==t&&(this._state=t,this._originalTexture=this._textureToRender=null)},t._setColorDirty=function(){this.setDirtyFlag(cc.Node._dirtyFlags.colorDirty|cc.Node._dirtyFlags.opacityDirty)},t.rendering=function(t,e,i){var n=this._node,s=(_=this._displayedOpacity)/255,r=null;if(n._spriteFrame&&(r=n._spriteFrame._texture),n.loaded()&&0!==_&&(null!==this._textureToRender&&this._originalTexture===r||(this._textureToRender=this._originalTexture=r,cc.Scale9Sprite.state.GRAY===this._state&&(this._textureToRender=this._textureToRender._generateGrayTexture()),_=n.getDisplayedColor(),!r||255===_.r&&255===_.g&&255===_.b||(this._textureToRender=this._textureToRender._generateColorTexture(_.r,_.g,_.b))),t=(r=t||cc._renderContext).getContext(),r.setTransform(this._worldTransform,e,i),r.setCompositeOperation(cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc(n._blendFunc)),r.setGlobalAlpha(s),this._textureToRender)){var o,a,c,h,l,u,d;n._quadsDirty&&n._rebuildQuads(),e=this._textureToRender._pixelsWide,i=this._textureToRender._pixelsHigh;s=this._textureToRender._htmlElementObj;var _=n._vertices,g=n._uvs,f=0,p=0;if(n._renderingType===cc.Scale9Sprite.RenderingType.SLICED){for(r=0;3>r;++r)for(f=0;3>f;++f)h=_[p=8*r+2*f],l=_[p+1],u=_[p+10]-h,l=-l-(d=_[p+11]-l),n=g[p]*e,o=g[p+11]*i,a=(g[p+10]-g[p])*e,c=(g[p+1]-g[p+11])*i,0<a&&0<c&&0<u&&0<d&&t.drawImage(s,n,o,a,c,h,l,u,d);cc.g_NumberOfDraws+=9}else{var m=Math.floor(n._vertCount/4);for(p=f=0;f<m;f++)h=_[p],l=_[p+1],u=_[p+6]-h,l=-l-(d=_[p+7]-l),n=g[p]*e,o=g[p+7]*i,a=(g[p+6]-g[p])*e,c=(g[p+1]-g[p+7])*i,""!==this._textureToRender._pattern?(r.setFillStyle(t.createPattern(s,this._textureToRender._pattern)),t.fillRect(h,l,u,d)):0<a&&0<c&&0<u&&0<d&&t.drawImage(s,n,o,a,c,h,l,u,d),p+=8;cc.g_NumberOfDraws+=m}}}}(),function(){if(cc.Node.WebGLRenderCmd){ccui.Scale9Sprite.WebGLRenderCmd=function(t){cc.Node.WebGLRenderCmd.call(this,t),this._needDraw=!0,this._color=new Uint32Array(1),this._dirty=!1,this._shaderProgram=cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR)};var t=ccui.Scale9Sprite,e=ccui.Scale9Sprite.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);e.constructor=ccui.Scale9Sprite.WebGLRenderCmd,e.needDraw=function(){return this._needDraw&&this._node.loaded()},e._uploadSliced=function(t,e,i,n,s,r,o){for(var a,c=0;3>c;++c)for(var h=0;3>h;++h)a=8*c+2*h,s[o]=t[a],s[o+1]=t[a+1],s[o+2]=n,r[o+3]=i[0],s[o+4]=e[a],s[o+5]=e[a+1],s[o+=6]=t[a+2],s[o+1]=t[a+3],s[o+2]=n,r[o+3]=i[0],s[o+4]=e[a+2],s[o+5]=e[a+3],s[o+=6]=t[a+8],s[o+1]=t[a+9],s[o+2]=n,r[o+3]=i[0],s[o+4]=e[a+8],s[o+5]=e[a+9],s[o+=6]=t[a+10],s[o+1]=t[a+11],s[o+2]=n,r[o+3]=i[0],s[o+4]=e[a+10],s[o+5]=e[a+11],o+=6;return 36},e.transform=function(t,e){this.originTransform(t,e),this._node._rebuildQuads()},e._setColorDirty=function(){},e.uploadData=function(e,i,n){var s=this._node;if(0===this._displayedOpacity)return 0;s._quadsDirty&&s._rebuildQuads();var r=this._displayedOpacity,o=this._displayedColor.r,a=this._displayedColor.g,c=this._displayedColor.b;if(s._opacityModifyRGB){var h=r/255;o=o*h,a=a*h,c=c*h}switch(this._color[0]=r<<24|c<<16|a<<8|o,r=s._vertexZ,o=s._vertices,a=s._uvs,h=t.RenderingType,c=0,s._renderingType){case h.SIMPLE:for(c=this._node._vertCount,h=s=0;s<c;s++,h+=2)e[n]=o[h],e[n+1]=o[h+1],e[n+2]=r,i[n+3]=this._color[0],e[n+4]=a[h],e[n+5]=a[h+1],n+=6;break;case h.SLICED:c=this._uploadSliced(o,a,this._color,r,e,i,n)}return c},e.setState=function(e){e===t.state.NORMAL?this._shaderProgram=cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR):e===t.state.GRAY&&(this._shaderProgram=cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY))}}}(),ccui.Layout=ccui.Widget.extend({_clippingEnabled:!1,_backGroundScale9Enabled:null,_backGroundImage:null,_backGroundImageFileName:null,_backGroundImageCapInsets:null,_colorType:null,_bgImageTexType:ccui.Widget.LOCAL_TEXTURE,_colorRender:null,_gradientRender:null,_color:null,_startColor:null,_endColor:null,_alongVector:null,_opacity:255,_backGroundImageTextureSize:null,_layoutType:null,_doLayoutDirty:!0,_clippingRectDirty:!0,_clippingType:null,_clippingStencil:null,_scissorRectDirty:!1,_clippingRect:null,_clippingParent:null,_className:"Layout",_backGroundImageColor:null,_finalPositionX:0,_finalPositionY:0,_backGroundImageOpacity:0,_loopFocus:!1,__passFocusToChild:!0,_isFocusPassing:!1,_isInterceptTouch:!1,ctor:function(){this._layoutType=ccui.Layout.ABSOLUTE,this._widgetType=ccui.Widget.TYPE_CONTAINER,this._clippingType=ccui.Layout.CLIPPING_SCISSOR,this._colorType=ccui.Layout.BG_COLOR_NONE,ccui.Widget.prototype.ctor.call(this),this.ignoreContentAdaptWithSize(!1),this.setContentSize(cc.size(0,0)),this.setAnchorPoint(0,0),this.onPassFocusToChild=this._findNearestChildWidgetIndex.bind(this),this._backGroundImageCapInsets=cc.rect(0,0,0,0),this._color=cc.color(255,255,255,255),this._startColor=cc.color(255,255,255,255),this._endColor=cc.color(255,255,255,255),this._alongVector=cc.p(0,-1),this._backGroundImageTextureSize=cc.size(0,0),this._clippingRect=cc.rect(0,0,0,0),this._backGroundImageColor=cc.color(255,255,255,255)},onEnter:function(){ccui.Widget.prototype.onEnter.call(this),this._clippingStencil&&this._clippingStencil._performRecursive(cc.Node._stateCallbackType.onEnter),this._clippingRectDirty=this._doLayoutDirty=!0},onExit:function(){ccui.Widget.prototype.onExit.call(this),this._clippingStencil&&this._clippingStencil._performRecursive(cc.Node._stateCallbackType.onExit)},visit:function(t){var e=this._renderCmd,i=t?t._renderCmd:null;if(this._visible){this._adaptRenderers(),this._doLayout(),e.visit(i),t=this._clippingEnabled&&this._clippingType===ccui.Layout.CLIPPING_STENCIL;var n=this._clippingEnabled&&this._clippingType===ccui.Layout.CLIPPING_SCISSOR;t?e.stencilClippingVisit(i):n&&e.scissorClippingVisit(i);var s,r,o=this._children,a=o.length,c=this._protectedChildren,h=c.length;for(this._reorderChildDirty&&this.sortAllChildren(),this._reorderProtectedChildDirty&&this.sortAllProtectedChildren(),i=0;i<a&&0>(s=o[i])._localZOrder;i++)s.visit(this);for(s=0;s<h&&0>(r=c[s])._localZOrder;s++)e._changeProtectedChild(r),r.visit(this);for(;i<a;i++)o[i].visit(this);for(;s<h;s++)r=c[s],e._changeProtectedChild(r),r.visit(this);t?e.postStencilVisit():n&&e.postScissorVisit(),e._dirtyFlag=0}else e._propagateFlagsDown(i)},setLoopFocus:function(t){this._loopFocus=t},isLoopFocus:function(){return this._loopFocus},setPassFocusToChild:function(t){this.__passFocusToChild=t},isPassFocusToChild:function(){return this.__passFocusToChild},findNextFocusedWidget:function(t,e){if(this._isFocusPassing||this.isFocused()){var i=this.getParent();if(this._isFocusPassing=!1,this.__passFocusToChild){var n=this._passFocusToChild(t,e);return n instanceof ccui.Layout&&i?(i._isFocusPassing=!0,i.findNextFocusedWidget(t,this)):n}return null!=i&&i instanceof ccui.Layout?(i._isFocusPassing=!0,i.findNextFocusedWidget(t,this)):this}if(!(e.isFocused()||e instanceof ccui.Layout))return e;if(this._layoutType===ccui.Layout.LINEAR_HORIZONTAL)switch(t){case ccui.Widget.LEFT:return this._getPreviousFocusedWidget(t,e);case ccui.Widget.RIGHT:return this._getNextFocusedWidget(t,e);case ccui.Widget.DOWN:case ccui.Widget.UP:return this._isLastWidgetInContainer(this,t)?this._isWidgetAncestorSupportLoopFocus(e,t)?ccui.Widget.prototype.findNextFocusedWidget.call(this,t,this):e:ccui.Widget.prototype.findNextFocusedWidget.call(this,t,this);default:return cc.assert(0,"Invalid Focus Direction"),e}else{if(this._layoutType!==ccui.Layout.LINEAR_VERTICAL)return cc.assert(0,"Un Supported Layout type, please use VBox and HBox instead!!!"),e;switch(t){case ccui.Widget.LEFT:case ccui.Widget.RIGHT:return this._isLastWidgetInContainer(this,t)?this._isWidgetAncestorSupportLoopFocus(e,t)?ccui.Widget.prototype.findNextFocusedWidget.call(this,t,this):e:ccui.Widget.prototype.findNextFocusedWidget.call(this,t,this);case ccui.Widget.DOWN:return this._getNextFocusedWidget(t,e);case ccui.Widget.UP:return this._getPreviousFocusedWidget(t,e);default:return cc.assert(0,"Invalid Focus Direction"),e}}},onPassFocusToChild:null,addChild:function(t,e,i){t instanceof ccui.Widget&&this._supplyTheLayoutParameterLackToChild(t),ccui.Widget.prototype.addChild.call(this,t,e,i),this._doLayoutDirty=!0},removeChild:function(t,e){ccui.Widget.prototype.removeChild.call(this,t,e),this._doLayoutDirty=!0},removeAllChildren:function(t){ccui.Widget.prototype.removeAllChildren.call(this,t),this._doLayoutDirty=!0},removeAllChildrenWithCleanup:function(t){ccui.Widget.prototype.removeAllChildrenWithCleanup.call(this,t),this._doLayoutDirty=!0},isClippingEnabled:function(){return this._clippingEnabled},setClippingEnabled:function(t){if(t!==this._clippingEnabled)switch(this._clippingEnabled=t,this._clippingType){case ccui.Layout.CLIPPING_SCISSOR:case ccui.Layout.CLIPPING_STENCIL:t?(this._clippingStencil=new cc.DrawNode,this._renderCmd.rebindStencilRendering(this._clippingStencil),this._running&&this._clippingStencil._performRecursive(cc.Node._stateCallbackType.onEnter),this._setStencilClippingSize(this._contentSize)):(this._running&&this._clippingStencil&&this._clippingStencil._performRecursive(cc.Node._stateCallbackType.onExit),this._clippingStencil=null)}},setClippingType:function(t){if(t!==this._clippingType){var e=this.isClippingEnabled();this.setClippingEnabled(!1),this._clippingType=t,this.setClippingEnabled(e)}},getClippingType:function(){return this._clippingType},_setStencilClippingSize:function(t){if(this._clippingEnabled){var e=[];e[0]=cc.p(0,0),e[1]=cc.p(t.width,0),e[2]=cc.p(t.width,t.height),e[3]=cc.p(0,t.height);var i=cc.color.GREEN;this._clippingStencil.clear(),this._clippingStencil.setLocalBB&&this._clippingStencil.setLocalBB(0,0,t.width,t.height),this._clippingStencil.drawPoly(e,null,0,i)}},_getClippingRect:function(){if(this._clippingRectDirty){var t,e=this.convertToWorldSpace(cc.p(0,0)),i=this.getNodeToWorldTransform(),n=this._contentSize.width*i.a;i=this._contentSize.height*i.d;for(t=this;t;)if((t=t.getParent())&&t instanceof ccui.Layout&&t.isClippingEnabled()){this._clippingParent=t;break}this._clippingParent?(t=this._clippingParent._getClippingRect(),this._clippingRect.x=Math.max(e.x,t.x),this._clippingRect.y=Math.max(e.y,t.y),n=Math.min(e.x+n,t.x+t.width),e=Math.min(e.y+i,t.y+t.height),this._clippingRect.width=Math.max(0,n-this._clippingRect.x),this._clippingRect.height=Math.max(0,e-this._clippingRect.y)):(this._clippingRect.x=e.x,this._clippingRect.y=e.y,this._clippingRect.width=n,this._clippingRect.height=i),this._clippingRectDirty=!1}return this._clippingRect},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this);var t=this._contentSize;this._setStencilClippingSize(t),this._clippingRectDirty=this._doLayoutDirty=!0,this._backGroundImage&&(this._backGroundImage.setPosition(.5*t.width,.5*t.height),this._backGroundScale9Enabled&&this._backGroundImage instanceof ccui.Scale9Sprite&&this._backGroundImage.setPreferredSize(t)),this._colorRender&&this._colorRender.setContentSize(t),this._gradientRender&&this._gradientRender.setContentSize(t)},setBackGroundImageScale9Enabled:function(t){this._backGroundScale9Enabled!==t&&(this.removeProtectedChild(this._backGroundImage),this._backGroundImage=null,this._backGroundScale9Enabled=t,this._addBackGroundImage(),this.setBackGroundImage(this._backGroundImageFileName,this._bgImageTexType),this.setBackGroundImageCapInsets(this._backGroundImageCapInsets))},isBackGroundImageScale9Enabled:function(){return this._backGroundScale9Enabled},setBackGroundImage:function(t,e){if(t){e=e||ccui.Widget.LOCAL_TEXTURE,null===this._backGroundImage&&(this._addBackGroundImage(),this.setBackGroundImageScale9Enabled(this._backGroundScale9Enabled)),this._backGroundImageFileName=t,this._bgImageTexType=e;var i=this._backGroundImage;switch(this._bgImageTexType){case ccui.Widget.LOCAL_TEXTURE:i.initWithFile(t);break;case ccui.Widget.PLIST_TEXTURE:i.initWithSpriteFrameName(t)}this._backGroundScale9Enabled&&i.setPreferredSize(this._contentSize),this._backGroundImageTextureSize=i.getContentSize(),i.setPosition(.5*this._contentSize.width,.5*this._contentSize.height),this._updateBackGroundImageColor()}},setBackGroundImageCapInsets:function(t){if(t){var e=this._backGroundImageCapInsets;e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,this._backGroundScale9Enabled&&this._backGroundImage.setCapInsets(t)}},getBackGroundImageCapInsets:function(){return cc.rect(this._backGroundImageCapInsets)},_supplyTheLayoutParameterLackToChild:function(t){if(t)switch(this._layoutType){case ccui.Layout.LINEAR_HORIZONTAL:case ccui.Layout.LINEAR_VERTICAL:var e=t.getLayoutParameter(ccui.LayoutParameter.LINEAR);e||t.setLayoutParameter(new ccui.LinearLayoutParameter);break;case ccui.Layout.RELATIVE:(e=t.getLayoutParameter(ccui.LayoutParameter.RELATIVE))||t.setLayoutParameter(new ccui.RelativeLayoutParameter)}},_addBackGroundImage:function(){var t=this._contentSize;this._backGroundScale9Enabled?(this._backGroundImage=new ccui.Scale9Sprite,this._backGroundImage.setPreferredSize(t)):this._backGroundImage=new cc.Sprite,this.addProtectedChild(this._backGroundImage,ccui.Layout.BACKGROUND_IMAGE_ZORDER,-1),this._backGroundImage.setPosition(.5*t.width,.5*t.height)},removeBackGroundImage:function(){this._backGroundImage&&(this.removeProtectedChild(this._backGroundImage),this._backGroundImage=null,this._backGroundImageFileName="",this._backGroundImageTextureSize.width=0,this._backGroundImageTextureSize.height=0)},setBackGroundColorType:function(t){if(this._colorType!==t){switch(this._colorType){case ccui.Layout.BG_COLOR_NONE:this._colorRender&&(this.removeProtectedChild(this._colorRender),this._colorRender=null),this._gradientRender&&(this.removeProtectedChild(this._gradientRender),this._gradientRender=null);break;case ccui.Layout.BG_COLOR_SOLID:this._colorRender&&(this.removeProtectedChild(this._colorRender),this._colorRender=null);break;case ccui.Layout.BG_COLOR_GRADIENT:this._gradientRender&&(this.removeProtectedChild(this._gradientRender),this._gradientRender=null)}switch(this._colorType=t,this._colorType){case ccui.Layout.BG_COLOR_SOLID:this._colorRender=new cc.LayerColor,this._colorRender.setContentSize(this._contentSize),this._colorRender.setOpacity(this._opacity),this._colorRender.setColor(this._color),this.addProtectedChild(this._colorRender,ccui.Layout.BACKGROUND_RENDERER_ZORDER,-1);break;case ccui.Layout.BG_COLOR_GRADIENT:this._gradientRender=new cc.LayerGradient(cc.color(255,0,0,255),cc.color(0,255,0,255)),this._gradientRender.setContentSize(this._contentSize),this._gradientRender.setOpacity(this._opacity),this._gradientRender.setStartColor(this._startColor),this._gradientRender.setEndColor(this._endColor),this._gradientRender.setVector(this._alongVector),this.addProtectedChild(this._gradientRender,ccui.Layout.BACKGROUND_RENDERER_ZORDER,-1)}}},getBackGroundColorType:function(){return this._colorType},setBackGroundColor:function(t,e){e?(this._startColor.r=t.r,this._startColor.g=t.g,this._startColor.b=t.b,this._gradientRender&&this._gradientRender.setStartColor(t),this._endColor.r=e.r,this._endColor.g=e.g,this._endColor.b=e.b,this._gradientRender&&this._gradientRender.setEndColor(e)):(this._color.r=t.r,this._color.g=t.g,this._color.b=t.b,this._colorRender&&this._colorRender.setColor(t))},getBackGroundColor:function(){var t=this._color;return cc.color(t.r,t.g,t.b,t.a)},getBackGroundStartColor:function(){var t=this._startColor;return cc.color(t.r,t.g,t.b,t.a)},getBackGroundEndColor:function(){var t=this._endColor;return cc.color(t.r,t.g,t.b,t.a)},setBackGroundColorOpacity:function(t){switch(this._opacity=t,this._colorType){case ccui.Layout.BG_COLOR_SOLID:this._colorRender.setOpacity(t);break;case ccui.Layout.BG_COLOR_GRADIENT:this._gradientRender.setOpacity(t)}},getBackGroundColorOpacity:function(){return this._opacity},setBackGroundColorVector:function(t){this._alongVector.x=t.x,this._alongVector.y=t.y,this._gradientRender&&this._gradientRender.setVector(t)},getBackGroundColorVector:function(){return this._alongVector},setBackGroundImageColor:function(t){this._backGroundImageColor.r=t.r,this._backGroundImageColor.g=t.g,this._backGroundImageColor.b=t.b,this._updateBackGroundImageColor()},setBackGroundImageOpacity:function(t){this._backGroundImageColor.a=t,this.getBackGroundImageColor()},getBackGroundImageColor:function(){var t=this._backGroundImageColor;return cc.color(t.r,t.g,t.b,t.a)},getBackGroundImageOpacity:function(){return this._backGroundImageColor.a},_updateBackGroundImageColor:function(){this._backGroundImage&&this._backGroundImage.setColor(this._backGroundImageColor)},getBackGroundImageTextureSize:function(){return this._backGroundImageTextureSize},setLayoutType:function(t){this._layoutType=t,t=this._children;for(var e=null,i=0;i<t.length;i++)(e=t[i])instanceof ccui.Widget&&this._supplyTheLayoutParameterLackToChild(e);this._doLayoutDirty=!0},getLayoutType:function(){return this._layoutType},requestDoLayout:function(){this._doLayoutDirty=!0},_doLayout:function(){if(this._doLayoutDirty){this.sortAllChildren();var t=ccui.getLayoutManager(this._layoutType);t&&t._doLayout(this),this._doLayoutDirty=!1}},_getLayoutContentSize:function(){return this.getContentSize()},_getLayoutElements:function(){return this.getChildren()},_updateBackGroundImageOpacity:function(){this._backGroundImage&&this._backGroundImage.setOpacity(this._backGroundImageOpacity)},_updateBackGroundImageRGBA:function(){this._backGroundImage&&(this._backGroundImage.setColor(this._backGroundImageColor),this._backGroundImage.setOpacity(this._backGroundImageOpacity))},_getLayoutAccumulatedSize:function(){for(var t,e=this.getChildren(),i=cc.size(0,0),n=0,s=0,r=e.length;s<r;s++)if(null!==(t=e[s])&&t instanceof ccui.Layout)t=t._getLayoutAccumulatedSize(),i.width+=t.width,i.height+=t.height;else if(t instanceof ccui.Widget){n++;var o=t.getLayoutParameter().getMargin();t=t.getContentSize(),i.width+=t.width+.5*(o.right+o.left),i.height+=t.height+.5*(o.top+o.bottom)}return(e=this.getLayoutType())===ccui.Layout.LINEAR_HORIZONTAL&&(i.height-=i.height/n*(n-1)),e===ccui.Layout.LINEAR_VERTICAL&&(i.width-=i.width/n*(n-1)),i},_findNearestChildWidgetIndex:function(t,e){if(null==e||e===this)return this._findFirstFocusEnabledWidgetIndex();var i,n=0,s=this.getChildren(),r=s.length,o=cc.FLT_MAX,a=0;if(t===ccui.Widget.LEFT||t===ccui.Widget.RIGHT||t===ccui.Widget.DOWN||t===ccui.Widget.UP){for(i=this._getWorldCenterPoint(e);n<r;){var c=s[n];c&&c instanceof ccui.Widget&&c.isFocusEnabled()&&((c=c instanceof ccui.Layout?c._calculateNearestDistance(e):cc.pLength(cc.pSub(this._getWorldCenterPoint(c),i)))<o&&(a=n,o=c)),n++}return a}return cc.log("invalid focus direction!"),0},_findFarthestChildWidgetIndex:function(t,e){if(null==e||e===this)return this._findFirstFocusEnabledWidgetIndex();var i=0,n=this.getChildren(),s=n.length,r=-cc.FLT_MAX,o=0;if(t===ccui.Widget.LEFT||t===ccui.Widget.RIGHT||t===ccui.Widget.DOWN||t===ccui.Widget.UP){for(var a=this._getWorldCenterPoint(e);i<s;){var c=n[i];c&&c instanceof ccui.Widget&&c.isFocusEnabled()&&((c=c instanceof ccui.Layout?c._calculateFarthestDistance(e):cc.pLength(cc.pSub(this._getWorldCenterPoint(c),a)))>r&&(o=i,r=c)),i++}return o}return cc.log("invalid focus direction!!!"),0},_calculateNearestDistance:function(t){for(var e=cc.FLT_MAX,i=this._getWorldCenterPoint(t),n=this._children,s=0,r=n.length;s<r;s++){var o=n[s];if(o instanceof ccui.Layout)o=o._calculateNearestDistance(t);else{if(!(o instanceof ccui.Widget&&o.isFocusEnabled()))continue;o=cc.pLength(cc.pSub(this._getWorldCenterPoint(o),i))}o<e&&(e=o)}return e},_calculateFarthestDistance:function(t){for(var e=-cc.FLT_MAX,i=this._getWorldCenterPoint(t),n=this._children,s=0,r=n.length;s<r;s++){var o=n[s];if(o instanceof ccui.Layout)o=o._calculateFarthestDistance(t);else{if(!(o instanceof ccui.Widget&&o.isFocusEnabled()))continue;o=this._getWorldCenterPoint(o),o=cc.pLength(cc.pSub(o,i))}o>e&&(e=o)}return e},_findProperSearchingFunctor:function(t,e){if(void 0!==e){var i=this._getWorldCenterPoint(e),n=this._getWorldCenterPoint(this._findFirstNonLayoutWidget());t===ccui.Widget.LEFT?this.onPassFocusToChild=i.x>n.x?this._findNearestChildWidgetIndex:this._findFarthestChildWidgetIndex:t===ccui.Widget.RIGHT?this.onPassFocusToChild=i.x>n.x?this._findFarthestChildWidgetIndex:this._findNearestChildWidgetIndex:t===ccui.Widget.DOWN?this.onPassFocusToChild=i.y>n.y?this._findNearestChildWidgetIndex:this._findFarthestChildWidgetIndex:t===ccui.Widget.UP?this.onPassFocusToChild=i.y<n.y?this._findNearestChildWidgetIndex:this._findFarthestChildWidgetIndex:cc.log("invalid direction!")}},_findFirstNonLayoutWidget:function(){for(var t=this._children,e=0,i=t.length;e<i;e++){var n=t[e];if(n instanceof ccui.Layout){if(n=n._findFirstNonLayoutWidget())return n}else if(n instanceof ccui.Widget)return n}return null},_findFirstFocusEnabledWidgetIndex:function(){for(var t=0,e=this.getChildren(),i=e.length;t<i;){var n=e[t];if(n&&n instanceof ccui.Widget&&n.isFocusEnabled())return t;t++}return 0},_findFocusEnabledChildWidgetByIndex:function(t){var e=this._getChildWidgetByIndex(t);return e?e.isFocusEnabled()?e:this._findFocusEnabledChildWidgetByIndex(t+1):null},_getWorldCenterPoint:function(t){var e=t instanceof ccui.Layout?t._getLayoutAccumulatedSize():t.getContentSize();return t.convertToWorldSpace(cc.p(e.width/2,e.height/2))},_getNextFocusedWidget:function(t,e){var i,n=null;return(i=(i=(n=this._children).indexOf(e))+1)<n.length?(n=this._getChildWidgetByIndex(i))?n.isFocusEnabled()?n instanceof ccui.Layout?(n._isFocusPassing=!0,n.findNextFocusedWidget(t,n)):(this.dispatchFocusEvent(e,n),n):this._getNextFocusedWidget(t,n):e:this._loopFocus?this._checkFocusEnabledChild()?(n=this._getChildWidgetByIndex(0)).isFocusEnabled()?n instanceof ccui.Layout?(n._isFocusPassing=!0,n.findNextFocusedWidget(t,n)):(this.dispatchFocusEvent(e,n),n):this._getNextFocusedWidget(t,n):e instanceof ccui.Layout?e:ccui.Widget._focusedWidget:this._isLastWidgetInContainer(e,t)?this._isWidgetAncestorSupportLoopFocus(this,t)?ccui.Widget.prototype.findNextFocusedWidget.call(this,t,this):e instanceof ccui.Layout?e:ccui.Widget._focusedWidget:ccui.Widget.prototype.findNextFocusedWidget.call(this,t,this)},_getPreviousFocusedWidget:function(t,e){var i,n=null;return 0<=(i=(i=(n=this._children).indexOf(e))-1)?(n=this._getChildWidgetByIndex(i)).isFocusEnabled()?n instanceof ccui.Layout?(n._isFocusPassing=!0,n.findNextFocusedWidget(t,n)):(this.dispatchFocusEvent(e,n),n):this._getPreviousFocusedWidget(t,n):this._loopFocus?this._checkFocusEnabledChild()?(i=n.length-1,(n=this._getChildWidgetByIndex(i)).isFocusEnabled()?n instanceof ccui.Layout?(n._isFocusPassing=!0,n.findNextFocusedWidget(t,n)):(this.dispatchFocusEvent(e,n),n):this._getPreviousFocusedWidget(t,n)):e instanceof ccui.Layout?e:ccui.Widget._focusedWidget:this._isLastWidgetInContainer(e,t)?this._isWidgetAncestorSupportLoopFocus(this,t)?ccui.Widget.prototype.findNextFocusedWidget.call(this,t,this):e instanceof ccui.Layout?e:ccui.Widget._focusedWidget:ccui.Widget.prototype.findNextFocusedWidget.call(this,t,this)},_getChildWidgetByIndex:function(t){for(var e=this._children,i=e.length,n=t;t<i;){var s=e[t];if(s&&s instanceof ccui.Widget)return s;t++}for(t=0;t<n;){if((i=e[t])&&i instanceof ccui.Widget)return i;t++}return null},_isLastWidgetInContainer:function(t,e){var i=t.getParent();if(null==i||!(i instanceof ccui.Layout))return!0;var n=i.getChildren(),s=n.indexOf(t);if(i.getLayoutType()===ccui.Layout.LINEAR_HORIZONTAL){if(e===ccui.Widget.LEFT)return 0===s&&this._isLastWidgetInContainer(i,e);if(e===ccui.Widget.RIGHT)return s===n.length-1&&this._isLastWidgetInContainer(i,e);if(e===ccui.Widget.DOWN||e===ccui.Widget.UP)return this._isLastWidgetInContainer(i,e)}else{if(i.getLayoutType()!==ccui.Layout.LINEAR_VERTICAL)return cc.log("invalid layout Type"),!1;if(e===ccui.Widget.UP)return 0===s&&this._isLastWidgetInContainer(i,e);if(e===ccui.Widget.DOWN)return s===n.length-1&&this._isLastWidgetInContainer(i,e);if(e===ccui.Widget.LEFT||e===ccui.Widget.RIGHT)return this._isLastWidgetInContainer(i,e)}},_isWidgetAncestorSupportLoopFocus:function(t,e){var i=t.getParent();if(null==i||!(i instanceof ccui.Layout))return!1;if(i.isLoopFocus()){var n=i.getLayoutType();return n===ccui.Layout.LINEAR_HORIZONTAL?e===ccui.Widget.LEFT||e===ccui.Widget.RIGHT||this._isWidgetAncestorSupportLoopFocus(i,e):n===ccui.Layout.LINEAR_VERTICAL?e===ccui.Widget.DOWN||e===ccui.Widget.UP||this._isWidgetAncestorSupportLoopFocus(i,e):(cc.assert(0,"invalid layout type"),!1)}return this._isWidgetAncestorSupportLoopFocus(i,e)},_passFocusToChild:function(t,e){if(this._checkFocusEnabledChild()){var i=ccui.Widget.getCurrentFocusedWidget();return this._findProperSearchingFunctor(t,i),i=this.onPassFocusToChild(t,i),(i=this._getChildWidgetByIndex(i))instanceof ccui.Layout?(i._isFocusPassing=!0,i.findNextFocusedWidget(t,i)):(this.dispatchFocusEvent(e,i),i)}return this},_checkFocusEnabledChild:function(){for(var t=this._children,e=0,i=t.length;e<i;e++){var n=t[e];if(n&&n instanceof ccui.Widget&&n.isFocusEnabled())return!0}return!1},getDescription:function(){return"Layout"},_createCloneInstance:function(){return new ccui.Layout},_copyClonedWidgetChildren:function(t){ccui.Widget.prototype._copyClonedWidgetChildren.call(this,t)},_copySpecialProperties:function(t){t instanceof ccui.Layout&&(this.setBackGroundImageScale9Enabled(t._backGroundScale9Enabled),this.setBackGroundImage(t._backGroundImageFileName,t._bgImageTexType),this.setBackGroundImageCapInsets(t._backGroundImageCapInsets),this.setBackGroundColorType(t._colorType),this.setBackGroundColor(t._color),this.setBackGroundColor(t._startColor,t._endColor),this.setBackGroundColorOpacity(t._opacity),this.setBackGroundColorVector(t._alongVector),this.setLayoutType(t._layoutType),this.setClippingEnabled(t._clippingEnabled),this.setClippingType(t._clippingType),this._loopFocus=t._loopFocus,this.__passFocusToChild=t.__passFocusToChild,this._isInterceptTouch=t._isInterceptTouch)},forceDoLayout:function(){this.requestDoLayout(),this._doLayout()},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?new ccui.Layout.WebGLRenderCmd(this):new ccui.Layout.CanvasRenderCmd(this)}}),_p=ccui.Layout.prototype,cc.defineGetterSetter(_p,"clippingEnabled",_p.isClippingEnabled,_p.setClippingEnabled),cc.defineGetterSetter(_p,"clippingType",null,_p.setClippingType),cc.defineGetterSetter(_p,"layoutType",_p.getLayoutType,_p.setLayoutType),_p=null,ccui.Layout.create=function(){return new ccui.Layout},ccui.Layout.BG_COLOR_NONE=0,ccui.Layout.BG_COLOR_SOLID=1,ccui.Layout.BG_COLOR_GRADIENT=2,ccui.Layout.ABSOLUTE=0,ccui.Layout.LINEAR_VERTICAL=1,ccui.Layout.LINEAR_HORIZONTAL=2,ccui.Layout.RELATIVE=3,ccui.Layout.CLIPPING_STENCIL=0,ccui.Layout.CLIPPING_SCISSOR=1,ccui.Layout.BACKGROUND_IMAGE_ZORDER=-1,ccui.Layout.BACKGROUND_RENDERER_ZORDER=-2,function(){ccui.Layout.CanvasRenderCmd=function(t){this._pNodeCmdCtor(t),this._needDraw=!1,this._rendererRestoreCmd=this._rendererClipCmd=this._rendererSaveCmd=null};var t=ccui.Layout.CanvasRenderCmd.prototype=Object.create(ccui.ProtectedNode.CanvasRenderCmd.prototype);t.constructor=ccui.Layout.CanvasRenderCmd,t._layoutCmdCtor=ccui.Layout.CanvasRenderCmd,t._onRenderSaveCmd=function(t,e,i){var n=t||cc._renderContext;for(t=n.getContext(),n.save(),n.save(),n.setTransform(this._worldTransform,e,i),i=0,n=(e=this._node._clippingStencil._renderCmd._buffer).length;i<n;i++){var s=e[i].verts,r=s[0];t.beginPath(),t.moveTo(r.x,-r.y);r=1;for(var o=s.length;r<o;r++)t.lineTo(s[r].x,-s[r].y);for(r=1,o=s.length;r<o;r++)t.lineTo(s[r].x,-s[r].y);t.closePath()}},t._onRenderClipCmd=function(t){var e=(t=t||cc._renderContext).getContext();t.restore(),e.clip()},t._onRenderRestoreCmd=function(t){(t=t||cc._renderContext).getContext(),t.restore()},t.rebindStencilRendering=function(t){t._renderCmd.rendering=this.__stencilDraw,t._renderCmd._canUseDirtyRegion=!0},t.__stencilDraw=function(t,e,i){},t.stencilClippingVisit=t.scissorClippingVisit=function(t){(t=this._node)._clippingStencil&&t._clippingStencil.isVisible()&&(this._rendererSaveCmd||(this._rendererSaveCmd=new cc.CustomRenderCmd(this,this._onRenderSaveCmd),this._rendererClipCmd=new cc.CustomRenderCmd(this,this._onRenderClipCmd),this._rendererRestoreCmd=new cc.CustomRenderCmd(this,this._onRenderRestoreCmd)),cc.renderer.pushRenderCommand(this._rendererSaveCmd),t._clippingStencil.visit(this),cc.renderer.pushRenderCommand(this._rendererClipCmd))},t.postStencilVisit=t.postScissorVisit=function(){cc.renderer.pushRenderCommand(this._rendererRestoreCmd)},ccui.Layout.CanvasRenderCmd._getSharedCache=function(){return cc.ClippingNode._sharedCache||(cc.ClippingNode._sharedCache=document.createElement("canvas"))}}(),function(){if(ccui.ProtectedNode.WebGLRenderCmd){ccui.Layout.WebGLRenderCmd=function(t){this._pNodeCmdCtor(t),this._needDraw=!1,this._currentStencilEnabled=0,this._scissorOldState=!1,this._clippingOldRect=null,this._mask_layer_le=0,this._afterVisitCmdScissor=this._beforeVisitCmdScissor=this._afterVisitCmdStencil=this._afterDrawStencilCmd=this._beforeVisitCmdStencil=null};var t=ccui.Layout.WebGLRenderCmd.prototype=Object.create(ccui.ProtectedNode.WebGLRenderCmd.prototype);t.constructor=ccui.Layout.WebGLRenderCmd,t._layoutCmdCtor=ccui.Layout.CanvasRenderCmd,t._syncStatus=function(t){this._originSyncStatus(t),t&&t._dirtyFlag&cc.Node._dirtyFlags.transformDirty&&(this._node._clippingRectDirty=!0)},t._onBeforeVisitStencil=function(t){t=t||cc._renderContext,ccui.Layout.WebGLRenderCmd._layer++;var e=1<<ccui.Layout.WebGLRenderCmd._layer;this._mask_layer_le=e|e-1,this._currentStencilEnabled=t.isEnabled(t.STENCIL_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.depthMask(!1),t.stencilFunc(t.NEVER,e,e),t.stencilOp(t.REPLACE,t.KEEP,t.KEEP),t.stencilMask(e),t.clear(t.STENCIL_BUFFER_BIT)},t._onAfterDrawStencil=function(t){(t=t||cc._renderContext).depthMask(!0),t.stencilFunc(t.EQUAL,this._mask_layer_le,this._mask_layer_le),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},t._onAfterVisitStencil=function(t){if(t=t||cc._renderContext,ccui.Layout.WebGLRenderCmd._layer--,this._currentStencilEnabled){var e=1<<ccui.Layout.WebGLRenderCmd._layer,i=e|e-1;t.stencilMask(e),t.stencilFunc(t.EQUAL,i,i)}else t.disable(t.STENCIL_TEST)},t._onBeforeVisitScissor=function(t){this._node._clippingRectDirty=!0;var e=this._node._getClippingRect();t=t||cc._renderContext,(this._scissorOldState=t.isEnabled(t.SCISSOR_TEST))?(this._clippingOldRect=cc.view.getScissorRect(),cc.rectEqualToRect(this._clippingOldRect,e)||cc.view.setScissorInPoints(e.x,e.y,e.width,e.height)):(t.enable(t.SCISSOR_TEST),cc.view.setScissorInPoints(e.x,e.y,e.width,e.height))},t._onAfterVisitScissor=function(t){t=t||cc._renderContext,this._scissorOldState?cc.rectEqualToRect(this._clippingOldRect,this._node._clippingRect)||cc.view.setScissorInPoints(this._clippingOldRect.x,this._clippingOldRect.y,this._clippingOldRect.width,this._clippingOldRect.height):t.disable(t.SCISSOR_TEST)},t.rebindStencilRendering=function(t){},t.transform=function(t,e){var i=this._node;this.pNodeTransform(t,e),i._clippingStencil&&i._clippingStencil._renderCmd.transform(this,e)},t.stencilClippingVisit=function(t){if((t=this._node)._clippingStencil&&t._clippingStencil.isVisible())if(ccui.Layout.WebGLRenderCmd._layer+1===cc.stencilBits)ccui.Layout.WebGLRenderCmd._visit_once=!0,ccui.Layout.WebGLRenderCmd._visit_once&&(cc.log("Nesting more than "+cc.stencilBits+"stencils is not supported. Everything will be drawn without stencil for this node and its childs."),ccui.Layout.WebGLRenderCmd._visit_once=!1);else{this._beforeVisitCmdStencil||(this._beforeVisitCmdStencil=new cc.CustomRenderCmd(this,this._onBeforeVisitStencil),this._afterDrawStencilCmd=new cc.CustomRenderCmd(this,this._onAfterDrawStencil),this._afterVisitCmdStencil=new cc.CustomRenderCmd(this,this._onAfterVisitStencil)),cc.renderer.pushRenderCommand(this._beforeVisitCmdStencil);var e=cc.current_stack;e.stack.push(e.top),e.top=this._stackMatrix,t._clippingStencil.visit(this),cc.renderer.pushRenderCommand(this._afterDrawStencilCmd)}},t.postStencilVisit=function(){renderer.pushRenderCommand(cmd._afterVisitCmdStencil),cc.current_stack.top=cc.current_stack.stack.pop()},t.scissorClippingVisit=function(t){this._beforeVisitCmdScissor||(this._beforeVisitCmdScissor=new cc.CustomRenderCmd(this,this._onBeforeVisitScissor),this._afterVisitCmdScissor=new cc.CustomRenderCmd(this,this._onAfterVisitScissor)),cc.renderer.pushRenderCommand(this._beforeVisitCmdScissor)},t.postScissorVisit=function(){cc.renderer.pushRenderCommand(this._afterVisitCmdScissor)},ccui.Layout.WebGLRenderCmd._layer=-1,ccui.Layout.WebGLRenderCmd._visit_once=null}}(),ccui.Margin=ccui.Class.extend({left:0,top:0,right:0,bottom:0,ctor:function(t,e,i,n){void 0!==t&&void 0===e&&(this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom),void 0!==n&&(this.left=t,this.top=e,this.right=i,this.bottom=n)},setMargin:function(t,e,i,n){this.left=t,this.top=e,this.right=i,this.bottom=n},equals:function(t){return this.left===t.left&&this.top===t.top&&this.right===t.right&&this.bottom===t.bottom}}),ccui.MarginZero=function(){return new ccui.Margin(0,0,0,0)},ccui.LayoutParameter=ccui.Class.extend({_margin:null,_layoutParameterType:null,ctor:function(){this._margin=new ccui.Margin,this._layoutParameterType=ccui.LayoutParameter.NONE},setMargin:function(t,e,i,n){cc.isObject(t)?(this._margin.left=t.left,this._margin.top=t.top,this._margin.right=t.right,this._margin.bottom=t.bottom):(this._margin.left=t,this._margin.top=e,this._margin.right=i,this._margin.bottom=n)},getMargin:function(){return this._margin},getLayoutType:function(){return this._layoutParameterType},clone:function(){var t=this._createCloneInstance();return t._copyProperties(this),t},_createCloneInstance:function(){return new ccui.LayoutParameter},_copyProperties:function(t){this._margin.bottom=t._margin.bottom,this._margin.left=t._margin.left,this._margin.right=t._margin.right,this._margin.top=t._margin.top}}),ccui.LayoutParameter.create=function(){return new ccui.LayoutParameter},ccui.LayoutParameter.NONE=0,ccui.LayoutParameter.LINEAR=1,ccui.LayoutParameter.RELATIVE=2,ccui.LinearLayoutParameter=ccui.LayoutParameter.extend({_linearGravity:null,ctor:function(){ccui.LayoutParameter.prototype.ctor.call(this),this._linearGravity=ccui.LinearLayoutParameter.NONE,this._layoutParameterType=ccui.LayoutParameter.LINEAR},setGravity:function(t){this._linearGravity=t},getGravity:function(){return this._linearGravity},_createCloneInstance:function(){return new ccui.LinearLayoutParameter},_copyProperties:function(t){ccui.LayoutParameter.prototype._copyProperties.call(this,t),t instanceof ccui.LinearLayoutParameter&&this.setGravity(t._linearGravity)}}),ccui.LinearLayoutParameter.create=function(){return new ccui.LinearLayoutParameter},ccui.LinearLayoutParameter.NONE=0,ccui.LinearLayoutParameter.LEFT=1,ccui.LinearLayoutParameter.TOP=2,ccui.LinearLayoutParameter.RIGHT=3,ccui.LinearLayoutParameter.BOTTOM=4,ccui.LinearLayoutParameter.CENTER_VERTICAL=5,ccui.LinearLayoutParameter.CENTER_HORIZONTAL=6,ccui.RelativeLayoutParameter=ccui.LayoutParameter.extend({_relativeAlign:null,_relativeWidgetName:"",_relativeLayoutName:"",_put:!1,ctor:function(){ccui.LayoutParameter.prototype.ctor.call(this),this._relativeAlign=ccui.RelativeLayoutParameter.NONE,this._relativeLayoutName=this._relativeWidgetName="",this._put=!1,this._layoutParameterType=ccui.LayoutParameter.RELATIVE},setAlign:function(t){this._relativeAlign=t},getAlign:function(){return this._relativeAlign},setRelativeToWidgetName:function(t){this._relativeWidgetName=t},getRelativeToWidgetName:function(){return this._relativeWidgetName},setRelativeName:function(t){this._relativeLayoutName=t},getRelativeName:function(){return this._relativeLayoutName},_createCloneInstance:function(){return new ccui.RelativeLayoutParameter},_copyProperties:function(t){ccui.LayoutParameter.prototype._copyProperties.call(this,t),t instanceof ccui.RelativeLayoutParameter&&(this.setAlign(t._relativeAlign),this.setRelativeToWidgetName(t._relativeWidgetName),this.setRelativeName(t._relativeLayoutName))}}),ccui.RelativeLayoutParameter.create=function(){return new ccui.RelativeLayoutParameter},ccui.RelativeLayoutParameter.NONE=0,ccui.RelativeLayoutParameter.PARENT_TOP_LEFT=1,ccui.RelativeLayoutParameter.PARENT_TOP_CENTER_HORIZONTAL=2,ccui.RelativeLayoutParameter.PARENT_TOP_RIGHT=3,ccui.RelativeLayoutParameter.PARENT_LEFT_CENTER_VERTICAL=4,ccui.RelativeLayoutParameter.CENTER_IN_PARENT=5,ccui.RelativeLayoutParameter.PARENT_RIGHT_CENTER_VERTICAL=6,ccui.RelativeLayoutParameter.PARENT_LEFT_BOTTOM=7,ccui.RelativeLayoutParameter.PARENT_BOTTOM_CENTER_HORIZONTAL=8,ccui.RelativeLayoutParameter.PARENT_RIGHT_BOTTOM=9,ccui.RelativeLayoutParameter.LOCATION_ABOVE_LEFTALIGN=10,ccui.RelativeLayoutParameter.LOCATION_ABOVE_CENTER=11,ccui.RelativeLayoutParameter.LOCATION_ABOVE_RIGHTALIGN=12,ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_TOPALIGN=13,ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_CENTER=14,ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_BOTTOMALIGN=15,ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_TOPALIGN=16,ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_CENTER=17,ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_BOTTOMALIGN=18,ccui.RelativeLayoutParameter.LOCATION_BELOW_LEFTALIGN=19,ccui.RelativeLayoutParameter.LOCATION_BELOW_CENTER=20,ccui.RelativeLayoutParameter.LOCATION_BELOW_RIGHTALIGN=21,ccui.LINEAR_GRAVITY_NONE=0,ccui.LINEAR_GRAVITY_LEFT=1,ccui.LINEAR_GRAVITY_TOP=2,ccui.LINEAR_GRAVITY_RIGHT=3,ccui.LINEAR_GRAVITY_BOTTOM=4,ccui.LINEAR_GRAVITY_CENTER_VERTICAL=5,ccui.LINEAR_GRAVITY_CENTER_HORIZONTAL=6,ccui.RELATIVE_ALIGN_NONE=0,ccui.RELATIVE_ALIGN_PARENT_TOP_LEFT=1,ccui.RELATIVE_ALIGN_PARENT_TOP_CENTER_HORIZONTAL=2,ccui.RELATIVE_ALIGN_PARENT_TOP_RIGHT=3,ccui.RELATIVE_ALIGN_PARENT_LEFT_CENTER_VERTICAL=4,ccui.RELATIVE_ALIGN_PARENT_CENTER=5,ccui.RELATIVE_ALIGN_PARENT_RIGHT_CENTER_VERTICAL=6,ccui.RELATIVE_ALIGN_PARENT_LEFT_BOTTOM=7,ccui.RELATIVE_ALIGN_PARENT_BOTTOM_CENTER_HORIZONTAL=8,ccui.RELATIVE_ALIGN_PARENT_RIGHT_BOTTOM=9,ccui.RELATIVE_ALIGN_LOCATION_ABOVE_LEFT=10,ccui.RELATIVE_ALIGN_LOCATION_ABOVE_CENTER=11,ccui.RELATIVE_ALIGN_LOCATION_ABOVE_RIGHT=12,ccui.RELATIVE_ALIGN_LOCATION_LEFT_TOP=13,ccui.RELATIVE_ALIGN_LOCATION_LEFT_CENTER=14,ccui.RELATIVE_ALIGN_LOCATION_LEFT_BOTTOM=15,ccui.RELATIVE_ALIGN_LOCATION_RIGHT_TOP=16,ccui.RELATIVE_ALIGN_LOCATION_RIGHT_CENTER=17,ccui.RELATIVE_ALIGN_LOCATION_RIGHT_BOTTOM=18,ccui.RELATIVE_ALIGN_LOCATION_BELOW_TOP=19,ccui.RELATIVE_ALIGN_LOCATION_BELOW_CENTER=20,ccui.RELATIVE_ALIGN_LOCATION_BELOW_BOTTOM=21,ccui.getLayoutManager=function(t){switch(t){case ccui.Layout.LINEAR_VERTICAL:return ccui.linearVerticalLayoutManager;case ccui.Layout.LINEAR_HORIZONTAL:return ccui.linearHorizontalLayoutManager;case ccui.Layout.RELATIVE:return ccui.relativeLayoutManager}return null},ccui.linearVerticalLayoutManager={_doLayout:function(t){var e=t._getLayoutContentSize();t=t._getLayoutElements();for(var i=e.height,n=0,s=t.length;n<s;n++){var r=t[n];if(r){var o=r.getLayoutParameter();if(o){var a=o.getGravity(),c=r.getAnchorPoint(),h=r.getContentSize(),l=c.x*h.width;i=i-(1-c.y)*h.height;switch(a){case ccui.LinearLayoutParameter.RIGHT:l=e.width-(1-c.x)*h.width;break;case ccui.LinearLayoutParameter.CENTER_HORIZONTAL:l=e.width/2-h.width*(.5-c.x)}l+=(o=o.getMargin()).left,i-=o.top,r.setPosition(l,i),i=r.getPositionY()-c.y*h.height-o.bottom}}}}},ccui.linearHorizontalLayoutManager={_doLayout:function(t){for(var e=t._getLayoutContentSize(),i=0,n=0,s=(t=t._getLayoutElements()).length;n<s;n++){var r=t[n];if(r){var o=r.getLayoutParameter();if(o){var a=o.getGravity(),c=r.getAnchorPoint(),h=r.getContentSize(),l=(i=i+c.x*h.width,e.height-(1-c.y)*h.height);switch(a){case ccui.LinearLayoutParameter.BOTTOM:l=c.y*h.height;break;case ccui.LinearLayoutParameter.CENTER_VERTICAL:l=e.height/2-h.height*(.5-c.y)}i+=(o=o.getMargin()).left,l-=o.top,r.setPosition(i,l),i=r.getRightBoundary()+o.right}}}}},ccui.relativeLayoutManager={_unlayoutChildCount:0,_widgetChildren:[],_widget:null,_finalPositionX:0,_finalPositionY:0,_relativeWidgetLP:null,_doLayout:function(t){for(var e=this._widgetChildren=this._getAllWidgets(t);0<this._unlayoutChildCount;){for(var i=0,n=e.length;i<n;i++){this._widget=e[i];var s=this._widget.getLayoutParameter();s&&!s._put&&this._calculateFinalPositionWithRelativeWidget(t)&&(this._calculateFinalPositionWithRelativeAlign(),this._widget.setPosition(this._finalPositionX,this._finalPositionY),s._put=!0)}this._unlayoutChildCount--}this._widgetChildren.length=0},_getAllWidgets:function(t){t=t._getLayoutElements();for(var e=this._widgetChildren,i=e.length=0,n=t.length;i<n;i++){var s=t[i];s&&s instanceof ccui.Widget&&(s.getLayoutParameter()._put=!1,this._unlayoutChildCount++,e.push(s))}return e},_getRelativeWidget:function(t){var e=null;if((t=t.getLayoutParameter().getRelativeToWidgetName())&&0!==t.length)for(var i=this._widgetChildren,n=0,s=i.length;n<s;n++){var r=i[n];if(r){var o=r.getLayoutParameter();if(o&&o.getRelativeName()===t){e=r,this._relativeWidgetLP=o;break}}}return e},_calculateFinalPositionWithRelativeWidget:function(t){var e=(s=this._widget).getAnchorPoint(),i=s.getContentSize();this._finalPositionY=this._finalPositionX=0;var n=this._getRelativeWidget(s),s=s.getLayoutParameter().getAlign();switch(t=t._getLayoutContentSize(),s){case ccui.RelativeLayoutParameter.NONE:case ccui.RelativeLayoutParameter.PARENT_TOP_LEFT:this._finalPositionX=e.x*i.width,this._finalPositionY=t.height-(1-e.y)*i.height;break;case ccui.RelativeLayoutParameter.PARENT_TOP_CENTER_HORIZONTAL:this._finalPositionX=.5*t.width-i.width*(.5-e.x),this._finalPositionY=t.height-(1-e.y)*i.height;break;case ccui.RelativeLayoutParameter.PARENT_TOP_RIGHT:this._finalPositionX=t.width-(1-e.x)*i.width,this._finalPositionY=t.height-(1-e.y)*i.height;break;case ccui.RelativeLayoutParameter.PARENT_LEFT_CENTER_VERTICAL:this._finalPositionX=e.x*i.width,this._finalPositionY=.5*t.height-i.height*(.5-e.y);break;case ccui.RelativeLayoutParameter.CENTER_IN_PARENT:this._finalPositionX=.5*t.width-i.width*(.5-e.x),this._finalPositionY=.5*t.height-i.height*(.5-e.y);break;case ccui.RelativeLayoutParameter.PARENT_RIGHT_CENTER_VERTICAL:this._finalPositionX=t.width-(1-e.x)*i.width,this._finalPositionY=.5*t.height-i.height*(.5-e.y);break;case ccui.RelativeLayoutParameter.PARENT_LEFT_BOTTOM:this._finalPositionX=e.x*i.width,this._finalPositionY=e.y*i.height;break;case ccui.RelativeLayoutParameter.PARENT_BOTTOM_CENTER_HORIZONTAL:this._finalPositionX=.5*t.width-i.width*(.5-e.x),this._finalPositionY=e.y*i.height;break;case ccui.RelativeLayoutParameter.PARENT_RIGHT_BOTTOM:this._finalPositionX=t.width-(1-e.x)*i.width,this._finalPositionY=e.y*i.height;break;case ccui.RelativeLayoutParameter.LOCATION_ABOVE_LEFTALIGN:if(n){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;this._finalPositionY=n.getTopBoundary()+e.y*i.height,this._finalPositionX=n.getLeftBoundary()+e.x*i.width}break;case ccui.RelativeLayoutParameter.LOCATION_ABOVE_CENTER:if(n){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;t=n.getContentSize(),this._finalPositionY=n.getTopBoundary()+e.y*i.height,this._finalPositionX=n.getLeftBoundary()+.5*t.width+e.x*i.width-.5*i.width}break;case ccui.RelativeLayoutParameter.LOCATION_ABOVE_RIGHTALIGN:if(n){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;this._finalPositionY=n.getTopBoundary()+e.y*i.height,this._finalPositionX=n.getRightBoundary()-(1-e.x)*i.width}break;case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_TOPALIGN:if(n){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;this._finalPositionY=n.getTopBoundary()-(1-e.y)*i.height,this._finalPositionX=n.getLeftBoundary()-(1-e.x)*i.width}break;case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_CENTER:if(n){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;t=n.getContentSize(),this._finalPositionX=n.getLeftBoundary()-(1-e.x)*i.width,this._finalPositionY=n.getBottomBoundary()+.5*t.height+e.y*i.height-.5*i.height}break;case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_BOTTOMALIGN:if(n){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;this._finalPositionY=n.getBottomBoundary()+e.y*i.height,this._finalPositionX=n.getLeftBoundary()-(1-e.x)*i.width}break;case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_TOPALIGN:if(n){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;this._finalPositionY=n.getTopBoundary()-(1-e.y)*i.height,this._finalPositionX=n.getRightBoundary()+e.x*i.width}break;case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_CENTER:if(n){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;t=n.getContentSize(),this._finalPositionX=n.getRightBoundary()+e.x*i.width,this._finalPositionY=n.getBottomBoundary()+.5*t.height+e.y*i.height-.5*i.height}break;case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_BOTTOMALIGN:if(n){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;this._finalPositionY=n.getBottomBoundary()+e.y*i.height,this._finalPositionX=n.getRightBoundary()+e.x*i.width}break;case ccui.RelativeLayoutParameter.LOCATION_BELOW_LEFTALIGN:if(n){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;this._finalPositionY=n.getBottomBoundary()-(1-e.y)*i.height,this._finalPositionX=n.getLeftBoundary()+e.x*i.width}break;case ccui.RelativeLayoutParameter.LOCATION_BELOW_CENTER:if(n){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;t=n.getContentSize(),this._finalPositionY=n.getBottomBoundary()-(1-e.y)*i.height,this._finalPositionX=n.getLeftBoundary()+.5*t.width+e.x*i.width-.5*i.width}break;case ccui.RelativeLayoutParameter.LOCATION_BELOW_RIGHTALIGN:if(n){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;this._finalPositionY=n.getBottomBoundary()-(1-e.y)*i.height,this._finalPositionX=n.getRightBoundary()-(1-e.x)*i.width}}return!0},_calculateFinalPositionWithRelativeAlign:function(){var t=this._widget.getLayoutParameter(),e=t.getMargin();switch(t.getAlign()){case ccui.RelativeLayoutParameter.NONE:case ccui.RelativeLayoutParameter.PARENT_TOP_LEFT:this._finalPositionX+=e.left,this._finalPositionY-=e.top;break;case ccui.RelativeLayoutParameter.PARENT_TOP_CENTER_HORIZONTAL:this._finalPositionY-=e.top;break;case ccui.RelativeLayoutParameter.PARENT_TOP_RIGHT:this._finalPositionX-=e.right,this._finalPositionY-=e.top;break;case ccui.RelativeLayoutParameter.PARENT_LEFT_CENTER_VERTICAL:this._finalPositionX+=e.left;break;case ccui.RelativeLayoutParameter.PARENT_RIGHT_CENTER_VERTICAL:this._finalPositionX-=e.right;break;case ccui.RelativeLayoutParameter.PARENT_LEFT_BOTTOM:this._finalPositionX+=e.left,this._finalPositionY+=e.bottom;break;case ccui.RelativeLayoutParameter.PARENT_BOTTOM_CENTER_HORIZONTAL:this._finalPositionY+=e.bottom;break;case ccui.RelativeLayoutParameter.PARENT_RIGHT_BOTTOM:this._finalPositionX-=e.right,this._finalPositionY+=e.bottom;break;case ccui.RelativeLayoutParameter.LOCATION_ABOVE_LEFTALIGN:this._finalPositionY+=e.bottom,this._finalPositionX+=e.left;break;case ccui.RelativeLayoutParameter.LOCATION_ABOVE_RIGHTALIGN:this._finalPositionY+=e.bottom,this._finalPositionX-=e.right;break;case ccui.RelativeLayoutParameter.LOCATION_ABOVE_CENTER:this._finalPositionY+=e.bottom;break;case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_TOPALIGN:this._finalPositionX-=e.right,this._finalPositionY-=e.top;break;case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_BOTTOMALIGN:this._finalPositionX-=e.right,this._finalPositionY+=e.bottom;break;case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_CENTER:this._finalPositionX-=e.right;break;case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_TOPALIGN:this._finalPositionX+=e.left,this._finalPositionY-=e.top;break;case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_BOTTOMALIGN:this._finalPositionX+=e.left,this._finalPositionY+=e.bottom;break;case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_CENTER:this._finalPositionX+=e.left;break;case ccui.RelativeLayoutParameter.LOCATION_BELOW_LEFTALIGN:this._finalPositionY-=e.top,this._finalPositionX+=e.left;break;case ccui.RelativeLayoutParameter.LOCATION_BELOW_RIGHTALIGN:this._finalPositionY-=e.top,this._finalPositionX-=e.right;break;case ccui.RelativeLayoutParameter.LOCATION_BELOW_CENTER:this._finalPositionY-=e.top}}},ccui.HBox=ccui.Layout.extend({ctor:function(t){ccui.Layout.prototype.ctor.call(this),this.setLayoutType(ccui.Layout.LINEAR_HORIZONTAL),t&&this.setContentSize(t)}}),ccui.HBox.create=function(t){return new ccui.HBox(t)},ccui.RelativeBox=ccui.Layout.extend({ctor:function(t){ccui.Layout.prototype.ctor.call(this),this.setLayoutType(ccui.Layout.RELATIVE),t&&this.setContentSize(t)}}),ccui.RelativeBox.create=function(t){return new ccui.RelativeBox(t)},ccui.VBox=ccui.Layout.extend({ctor:function(t){ccui.Layout.prototype.ctor.call(this),this.setLayoutType(ccui.Layout.LINEAR_VERTICAL),t&&this.setContentSize(t)},initWithSize:function(t){return!!this.init()}}),ccui.VBox.create=function(t){return new ccui.VBox(t)},ccui.helper={seekWidgetByTag:function(t,e){if(!t)return null;if(t.getTag()===e)return t;for(var i=t.getChildren(),n=i.length,s=0;s<n;s++){var r=ccui.helper.seekWidgetByTag(i[s],e);if(null!==r)return r}return null},seekWidgetByName:function(t,e){if(!t)return null;if(t.getName()===e)return t;for(var i=t.getChildren(),n=i.length,s=0;s<n;s++){var r=ccui.helper.seekWidgetByName(i[s],e);if(null!==r)return r}return null},seekWidgetByRelativeName:function(t,e){if(!t)return null;for(var i=t.getChildren(),n=i.length,s=0;s<n;s++){var r=i[s],o=r.getLayoutParameter(ccui.LayoutParameter.RELATIVE);if(o&&o.getRelativeName()===e)return r}return null},seekActionWidgetByActionTag:function(t,e){if(!t)return null;if(t.getActionTag()===e)return t;for(var i=t.getChildren(),n=0;n<i.length;n++){var s=ccui.helper.seekActionWidgetByActionTag(i[n],e);if(null!==s)return s}return null},_activeLayout:!0,doLayout:function(t){if(this._activeLayout)for(var e,i=0,n=(t=t.getChildren()).length;i<n;i++){var s=(e=t[i]).getComponent(ccui.LayoutComponent.NAME);e=e.getParent(),null!=s&&null!==e&&s.refreshLayout&&s.refreshLayout()}},changeLayoutSystemActiveState:function(t){this._activeLayout=t},restrictCapInsetRect:function(t,e){var i=t.x,n=t.y,s=t.width,r=t.height;return e.width<s&&(s=i=0),e.height<r&&(r=n=0),cc.rect(i,n,s,r)},_createSpriteFromBase64:function(t,e){var i=cc.textureCache.getTextureForKey(e);return i||((i=new Image).src=t,cc.textureCache.cacheImage(e,i),i=cc.textureCache.getTextureForKey(e)),new cc.Sprite(i)}},ccui.Button=ccui.Widget.extend({_buttonScale9Renderer:null,_buttonNormalSpriteFrame:null,_buttonClickedSpriteFrame:null,_buttonDisableSpriteFrame:null,_titleRenderer:null,_normalFileName:"",_clickedFileName:"",_disabledFileName:"",_prevIgnoreSize:!0,_scale9Enabled:!1,_capInsetsNormal:null,_normalTexType:ccui.Widget.LOCAL_TEXTURE,_pressedTexType:ccui.Widget.LOCAL_TEXTURE,_disabledTexType:ccui.Widget.LOCAL_TEXTURE,_normalTextureSize:null,pressedActionEnabled:!1,_titleColor:null,_zoomScale:.1,_normalTextureLoaded:!1,_pressedTextureLoaded:!1,_disabledTextureLoaded:!1,_className:"Button",_normalTextureAdaptDirty:!0,_fontName:"Thonburi",_fontSize:12,_type:0,ctor:function(t,e,i,n){this._capInsetsNormal=cc.rect(0,0,0,0),this._normalTextureSize=cc.size(0,0),ccui.Widget.prototype.ctor.call(this),this.setTouchEnabled(!0),this._normalLoader=new cc.Sprite.LoadManager,this._clickedLoader=new cc.Sprite.LoadManager,this._disabledLoader=new cc.Sprite.LoadManager,t&&this.loadTextures(t,e,i,n)},_createTitleRendererIfNeeded:function(){this._titleRenderer||(this._titleRenderer=new cc.LabelTTF(""),this._titleRenderer.setAnchorPoint(.5,.5),this._titleColor=cc.color.WHITE,this._titleRenderer.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),this.addProtectedChild(this._titleRenderer,ccui.Button.TITLE_RENDERER_ZORDER,-1))},_initRenderer:function(){this._buttonScale9Renderer=new ccui.Scale9Sprite,this._buttonScale9Renderer.setRenderingType(ccui.Scale9Sprite.RenderingType.SIMPLE),this.addProtectedChild(this._buttonScale9Renderer,ccui.Button.DISABLED_RENDERER_ZORDER,-1)},setScale9Enabled:function(t){this._scale9Enabled!==t&&(this._brightStyle=ccui.Widget.BRIGHT_STYLE_NONE,(this._scale9Enabled=t)?this._buttonScale9Renderer.setRenderingType(ccui.Scale9Sprite.RenderingType.SLICED):this._buttonScale9Renderer.setRenderingType(ccui.Scale9Sprite.RenderingType.SIMPLE),this._scale9Enabled?(t=this._ignoreSize,this.ignoreContentAdaptWithSize(!1),this._prevIgnoreSize=t):this.ignoreContentAdaptWithSize(this._prevIgnoreSize),this.setCapInsets(this._capInsetsNormal),this.setBright(this._bright),this._normalTextureAdaptDirty=!0)},isScale9Enabled:function(){return this._scale9Enabled},ignoreContentAdaptWithSize:function(t){this._unifySize?this._updateContentSize():(!this._scale9Enabled||this._scale9Enabled&&!t)&&(ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this,t),this._prevIgnoreSize=t)},getVirtualRendererSize:function(){return this._unifySize?this._getNormalSize():!this._normalTextureLoaded&&this._titleRenderer&&0<this._titleRenderer.getString().length?this._titleRenderer.getContentSize():cc.size(this._normalTextureSize)},loadTextures:function(t,e,i,n){this.loadTextureNormal(t,n),this.loadTexturePressed(e,n),this.loadTextureDisabled(i,n)},_createSpriteFrameWithFile:function(t){var e=cc.textureCache.getTextureForKey(t);return e||(e=cc.textureCache.addImage(t)),e._textureLoaded?(t=e.getContentSize(),t=cc.rect(0,0,t.width,t.height),new cc.SpriteFrame(e,t)):e},_createSpriteFrameWithName:function(t){return null==(t=cc.spriteFrameCache.getSpriteFrame(t))?(cc.log("ccui.Scale9Sprite.initWithSpriteFrameName(): can't find the sprite frame by spriteFrameName"),null):t},loadTextureNormal:function(t,e){if(t){var i;switch(e=e||ccui.Widget.LOCAL_TEXTURE,this._normalFileName=t,this._normalTexType=e,this._normalTexType){case ccui.Widget.LOCAL_TEXTURE:i=this._createSpriteFrameWithFile(t);break;case ccui.Widget.PLIST_TEXTURE:"#"===t[0]&&(t=t.substr(1,t.length-1)),i=this._createSpriteFrameWithName(t)}i&&(i._textureLoaded?(this._normalTextureLoaded=i._textureLoaded,this._buttonNormalSpriteFrame=i,this._buttonScale9Renderer.setSpriteFrame(i),this._scale9Enabled&&this._buttonScale9Renderer.setCapInsets(this._capInsetsNormal),!this._ignoreSize&&cc.sizeEqualToSize(this._customSize,cc.size(0,0))&&(this._customSize=this._buttonScale9Renderer.getContentSize()),this._normalTextureSize=this._buttonScale9Renderer.getContentSize(),this._updateChildrenDisplayedRGBA(),this._unifySize?this._scale9Enabled&&(this._buttonScale9Renderer.setCapInsets(this._capInsetsNormal),this._updateContentSizeWithTextureSize(this._getNormalSize())):this._updateContentSizeWithTextureSize(this._normalTextureSize),this._normalTextureAdaptDirty=!0,this._findLayout()):(this._normalLoader.clear(),this._normalLoader.once(i,(function(){this.loadTextureNormal(this._normalFileName,this._normalTexType)}),this)))}},loadTexturePressed:function(t,e){if(t){var i;switch(e=e||ccui.Widget.LOCAL_TEXTURE,this._clickedFileName=t,this._pressedTexType=e,this._pressedTexType){case ccui.Widget.LOCAL_TEXTURE:i=this._createSpriteFrameWithFile(t);break;case ccui.Widget.PLIST_TEXTURE:"#"===t[0]&&(t=t.substr(1,t.length-1)),i=this._createSpriteFrameWithName(t)}i&&(i._textureLoaded?(this._buttonClickedSpriteFrame=i,this._updateChildrenDisplayedRGBA(),this._pressedTextureLoaded=!0):(this._clickedLoader.clear(),this._clickedLoader.once(i,(function(){this.loadTexturePressed(this._clickedFileName,this._pressedTexType)}),this)))}},loadTextureDisabled:function(t,e){if(t){var i;switch(e=e||ccui.Widget.LOCAL_TEXTURE,this._disabledFileName=t,this._disabledTexType=e,this._disabledTexType){case ccui.Widget.LOCAL_TEXTURE:i=this._createSpriteFrameWithFile(t);break;case ccui.Widget.PLIST_TEXTURE:"#"===t[0]&&(t=t.substr(1,t.length-1)),i=this._createSpriteFrameWithName(t)}i&&(i._textureLoaded?(this._buttonDisableSpriteFrame=i,this._updateChildrenDisplayedRGBA(),this._disabledTextureLoaded=!0,this._findLayout()):(this._disabledLoader.clear(),this._disabledLoader.once(i,(function(){this.loadTextureDisabled(this._disabledFileName,this._disabledTexType)}),this)))}},setCapInsets:function(t){this.setCapInsetsNormalRenderer(t)},setCapInsetsNormalRenderer:function(t){if(t&&this._scale9Enabled){var e=t.x,i=t.y,n=t.width;t=t.height,this._normalTextureSize.width<n&&(n=e=0),this._normalTextureSize.height<t&&(t=i=0);var s=this._capInsetsNormal;s.x=e,s.y=i,s.width=n,s.height=t,this._capInsetsNormal=s,this._buttonScale9Renderer.setCapInsets(s)}},getCapInsetsNormalRenderer:function(){return cc.rect(this._capInsetsNormal)},setCapInsetsPressedRenderer:function(t){this.setCapInsetsNormalRenderer(t)},getCapInsetsPressedRenderer:function(){return cc.rect(this._capInsetsNormal)},setCapInsetsDisabledRenderer:function(t){this.setCapInsetsNormalRenderer(t)},getCapInsetsDisabledRenderer:function(){return cc.rect(this._capInsetsNormal)},_onPressStateChangedToNormal:function(){if(this._buttonScale9Renderer.setSpriteFrame(this._buttonNormalSpriteFrame),this._buttonScale9Renderer.setState(ccui.Scale9Sprite.state.NORMAL),this._pressedTextureLoaded){if(this.pressedActionEnabled&&(this._buttonScale9Renderer.stopAllActions(),this._buttonScale9Renderer.setScale(1),this._titleRenderer))if(this._titleRenderer.stopAllActions(),this._unifySize){var t=cc.scaleTo(ccui.Button.ZOOM_ACTION_TIME_STEP,1,1);this._titleRenderer.runAction(t)}else this._titleRenderer.setScaleX(1),this._titleRenderer.setScaleY(1)}else this._buttonScale9Renderer.stopAllActions(),this._buttonScale9Renderer.setScale(1),this._scale9Enabled&&this._buttonScale9Renderer.setColor(cc.color.WHITE),this._titleRenderer&&(this._titleRenderer.stopAllActions(),this._titleRenderer.setScaleX(1),this._titleRenderer.setScaleY(1))},_onPressStateChangedToPressed:function(){if(this._buttonScale9Renderer.setState(ccui.Scale9Sprite.state.NORMAL),this._pressedTextureLoaded){if(this._buttonScale9Renderer.setSpriteFrame(this._buttonClickedSpriteFrame),this.pressedActionEnabled){this._buttonScale9Renderer.stopAllActions();var t=cc.scaleTo(ccui.Button.ZOOM_ACTION_TIME_STEP,1+this._zoomScale,1+this._zoomScale);this._buttonScale9Renderer.runAction(t),this._titleRenderer&&(this._titleRenderer.stopAllActions(),this._titleRenderer.runAction(cc.scaleTo(ccui.Button.ZOOM_ACTION_TIME_STEP,1+this._zoomScale,1+this._zoomScale)))}}else this._buttonScale9Renderer.setSpriteFrame(this._buttonClickedSpriteFrame),this._buttonScale9Renderer.stopAllActions(),this._buttonScale9Renderer.setScale(1+this._zoomScale,1+this._zoomScale),this._titleRenderer&&(this._titleRenderer.stopAllActions(),this._titleRenderer.setScaleX(1+this._zoomScale),this._titleRenderer.setScaleY(1+this._zoomScale))},_onPressStateChangedToDisabled:function(){this._disabledTextureLoaded?this._buttonScale9Renderer.setSpriteFrame(this._buttonDisableSpriteFrame):this._normalTextureLoaded&&this._buttonScale9Renderer.setState(ccui.Scale9Sprite.state.GRAY),this._buttonScale9Renderer.setScale(1)},_updateContentSize:function(){if(this._unifySize){if(this._scale9Enabled)ccui.ProtectedNode.setContentSize(this._customSize);else{var t=this._getNormalSize();ccui.ProtectedNode.setContentSize(t)}this._onSizeChanged()}else this._ignoreSize&&this.setContentSize(this.getVirtualRendererSize())},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._titleRenderer&&this._updateTitleLocation(),this._normalTextureAdaptDirty=!0},getVirtualRenderer:function(){return this._buttonScale9Renderer},_normalTextureScaleChangedWithSize:function(){this._buttonScale9Renderer.setContentSize(this._contentSize),this._buttonScale9Renderer.setPosition(this._contentSize.width/2,this._contentSize.height/2)},_adaptRenderers:function(){this._normalTextureAdaptDirty&&(this._normalTextureScaleChangedWithSize(),this._normalTextureAdaptDirty=!1)},_updateTitleLocation:function(){this._titleRenderer.setPosition(.5*this._contentSize.width,.5*this._contentSize.height)},setPressedActionEnabled:function(t){this.pressedActionEnabled=t},setTitleText:function(t){t!==this.getTitleText()&&(this._createTitleRendererIfNeeded(),this._titleRenderer.setString(t),this._ignoreSize?(t=this.getVirtualRendererSize(),this.setContentSize(t)):this._titleRenderer._renderCmd._updateTTF())},getTitleText:function(){return this._titleRenderer?this._titleRenderer.getString():""},setTitleColor:function(t){this._createTitleRendererIfNeeded(),this._titleRenderer.setFontFillColor(t)},getTitleColor:function(){return this._titleRenderer?this._titleRenderer._getFillStyle():cc.color.WHITE},setTitleFontSize:function(t){this._createTitleRendererIfNeeded(),this._titleRenderer.setFontSize(t),this._fontSize=t},getTitleFontSize:function(){return this._titleRenderer?this._titleRenderer.getFontSize():this._fontSize},setZoomScale:function(t){this._zoomScale=t},getZoomScale:function(){return this._zoomScale},getNormalTextureSize:function(){return this._normalTextureSize},setTitleFontName:function(t){this._createTitleRendererIfNeeded(),this._titleRenderer.setFontName(t),this._fontName=t},getTitleRenderer:function(){return this._titleRenderer},getTitleFontName:function(){return this._titleRenderer?this._titleRenderer.getFontName():this._fontName},_setTitleFont:function(t){this._titleRenderer.font=t},_getTitleFont:function(){return this._titleRenderer.font},getDescription:function(){return"Button"},_createCloneInstance:function(){return new ccui.Button},_copySpecialProperties:function(t){this._prevIgnoreSize=t._prevIgnoreSize,this._capInsetsNormal=t._capInsetsNormal,this.setScale9Enabled(t._scale9Enabled),this.loadTextureNormal(t._normalFileName,t._normalTexType),this.loadTexturePressed(t._clickedFileName,t._pressedTexType),this.loadTextureDisabled(t._disabledFileName,t._disabledTexType),t._titleRenderer&&t._titleRenderer._string&&(this.setTitleText(t.getTitleText()),this.setTitleFontName(t.getTitleFontName()),this.setTitleFontSize(t.getTitleFontSize()),this.setTitleColor(t.getTitleColor())),this.setPressedActionEnabled(t.pressedActionEnabled),this.setZoomScale(t._zoomScale)},_getNormalSize:function(){var t;null!==this._titleRenderer&&(t=this._titleRenderer.getContentSize());var e=this._buttonScale9Renderer.getContentSize();return cc.size(t.width>e.width?t.width:e.width,t.height>e.height?t.height:e.height)}}),_p=ccui.Button.prototype,cc.defineGetterSetter(_p,"titleText",_p.getTitleText,_p.setTitleText),cc.defineGetterSetter(_p,"titleFont",_p._getTitleFont,_p._setTitleFont),cc.defineGetterSetter(_p,"titleFontSize",_p.getTitleFontSize,_p.setTitleFontSize),cc.defineGetterSetter(_p,"titleFontName",_p.getTitleFontName,_p.setTitleFontName),cc.defineGetterSetter(_p,"titleColor",_p.getTitleColor,_p.setTitleColor),_p=null,ccui.Button.create=function(t,e,i,n){return new ccui.Button(t,e,i,n)},ccui.Button.NORMAL_RENDERER_ZORDER=-2,ccui.Button.PRESSED_RENDERER_ZORDER=-2,ccui.Button.DISABLED_RENDERER_ZORDER=-2,ccui.Button.TITLE_RENDERER_ZORDER=-1,ccui.Button.ZOOM_ACTION_TIME_STEP=.05,ccui.Button.SYSTEM=0,ccui.Button.TTF=1,ccui.CheckBox=ccui.Widget.extend({_backGroundBoxRenderer:null,_backGroundSelectedBoxRenderer:null,_frontCrossRenderer:null,_backGroundBoxDisabledRenderer:null,_frontCrossDisabledRenderer:null,_isSelected:!0,_checkBoxEventListener:null,_checkBoxEventSelector:null,_backGroundTexType:ccui.Widget.LOCAL_TEXTURE,_backGroundSelectedTexType:ccui.Widget.LOCAL_TEXTURE,_frontCrossTexType:ccui.Widget.LOCAL_TEXTURE,_backGroundDisabledTexType:ccui.Widget.LOCAL_TEXTURE,_frontCrossDisabledTexType:ccui.Widget.LOCAL_TEXTURE,_backGroundFileName:"",_backGroundSelectedFileName:"",_frontCrossFileName:"",_backGroundDisabledFileName:"",_frontCrossDisabledFileName:"",_className:"CheckBox",_zoomScale:.1,_backgroundTextureScaleX:.1,_backgroundTextureScaleY:.1,_backGroundBoxRendererAdaptDirty:!0,_backGroundSelectedBoxRendererAdaptDirty:!0,_frontCrossRendererAdaptDirty:!0,_backGroundBoxDisabledRendererAdaptDirty:!0,_frontCrossDisabledRendererAdaptDirty:!0,ctor:function(t,e,i,n,s,r){ccui.Widget.prototype.ctor.call(this),this.setTouchEnabled(!0);for(var o=0,a=0;a<arguments.length;a++){var c=typeof arguments[a];"string"===c?isNaN(arguments[a]-0)?o++:(r=arguments[a],arguments[a]=void 0):"number"===c&&o++}if(2===o)r=i,i=e,e=void 0;r=void 0===r?0:r,this._isSelected=!0,this.setSelected(!1),this.loadTextures(t,e,i,n,s,r)},_initRenderer:function(){this._backGroundBoxRenderer=new cc.Sprite,this._backGroundSelectedBoxRenderer=new cc.Sprite,this._frontCrossRenderer=new cc.Sprite,this._backGroundBoxDisabledRenderer=new cc.Sprite,this._frontCrossDisabledRenderer=new cc.Sprite,this.addProtectedChild(this._backGroundBoxRenderer,ccui.CheckBox.BOX_RENDERER_ZORDER,-1),this.addProtectedChild(this._backGroundSelectedBoxRenderer,ccui.CheckBox.BOX_SELECTED_RENDERER_ZORDER,-1),this.addProtectedChild(this._frontCrossRenderer,ccui.CheckBox.FRONT_CROSS_RENDERER_ZORDER,-1),this.addProtectedChild(this._backGroundBoxDisabledRenderer,ccui.CheckBox.BOX_DISABLED_RENDERER_ZORDER,-1),this.addProtectedChild(this._frontCrossDisabledRenderer,ccui.CheckBox.FRONT_CROSS_DISABLED_RENDERER_ZORDER,-1)},loadTextures:function(t,e,i,n,s,r){t&&this.loadTextureBackGround(t,r),e&&this.loadTextureBackGroundSelected(e,r),i&&this.loadTextureFrontCross(i,r),n&&this.loadTextureBackGroundDisabled(n,r),s&&this.loadTextureFrontCrossDisabled(s,r)},loadTextureBackGround:function(t,e){if(t){e=e||ccui.Widget.LOCAL_TEXTURE,this._backGroundFileName=t,this._backGroundTexType=e;var i=this._backGroundBoxRenderer;switch(i._textureLoaded?this._backGroundBoxRenderer.setContentSize(this._customSize):i.addEventListener("load",(function(){this._updateContentSizeWithTextureSize(this._backGroundBoxRenderer.getContentSize()),this.loadTextureBackGround(this._backGroundFileName,this._backGroundTexType)}),this),this._backGroundTexType){case ccui.Widget.LOCAL_TEXTURE:i.initWithFile(t);break;case ccui.Widget.PLIST_TEXTURE:i.initWithSpriteFrameName(t)}this._updateChildrenDisplayedRGBA(),this._updateContentSizeWithTextureSize(this._backGroundBoxRenderer.getContentSize()),this._backGroundBoxRendererAdaptDirty=!0,this._findLayout()}},loadTextureBackGroundSelected:function(t,e){if(t){e=e||ccui.Widget.LOCAL_TEXTURE,this._backGroundSelectedFileName=t,this._backGroundSelectedTexType=e;var i=this._backGroundSelectedBoxRenderer;switch(i._textureLoaded||i.addEventListener("load",(function(){this.loadTextureBackGroundSelected(this._backGroundSelectedFileName,this._backGroundSelectedTexType)}),this),this._backGroundSelectedTexType){case ccui.Widget.LOCAL_TEXTURE:i.initWithFile(t);break;case ccui.Widget.PLIST_TEXTURE:i.initWithSpriteFrameName(t)}this._updateChildrenDisplayedRGBA(),this._backGroundSelectedBoxRendererAdaptDirty=!0,this._findLayout()}},loadTextureFrontCross:function(t,e){if(t){e=e||ccui.Widget.LOCAL_TEXTURE,this._frontCrossFileName=t,this._frontCrossTexType=e;var i=this._frontCrossRenderer;switch(i._textureLoaded||i.addEventListener("load",(function(){this.loadTextureFrontCross(this._frontCrossFileName,this._frontCrossTexType)}),this),this._frontCrossTexType){case ccui.Widget.LOCAL_TEXTURE:i.initWithFile(t);break;case ccui.Widget.PLIST_TEXTURE:i.initWithSpriteFrameName(t)}this._updateChildrenDisplayedRGBA(),this._frontCrossRendererAdaptDirty=!0,this._findLayout()}},loadTextureBackGroundDisabled:function(t,e){if(t){e=e||ccui.Widget.LOCAL_TEXTURE,this._backGroundDisabledFileName=t,this._backGroundDisabledTexType=e;var i=this._backGroundBoxDisabledRenderer;switch(i._textureLoaded||i.addEventListener("load",(function(){this.loadTextureBackGroundDisabled(this._backGroundDisabledFileName,this._backGroundDisabledTexType)}),this),this._backGroundDisabledTexType){case ccui.Widget.LOCAL_TEXTURE:i.initWithFile(t);break;case ccui.Widget.PLIST_TEXTURE:i.initWithSpriteFrameName(t)}this._updateChildrenDisplayedRGBA(),this._backGroundBoxDisabledRendererAdaptDirty=!0,this._findLayout()}},loadTextureFrontCrossDisabled:function(t,e){if(t){e=e||ccui.Widget.LOCAL_TEXTURE,this._frontCrossDisabledFileName=t,this._frontCrossDisabledTexType=e;var i=this._frontCrossDisabledRenderer;switch(i._textureLoaded||i.addEventListener("load",(function(){this.loadTextureFrontCrossDisabled(this._frontCrossDisabledFileName,this._frontCrossDisabledTexType)}),this),this._frontCrossDisabledTexType){case ccui.Widget.LOCAL_TEXTURE:i.initWithFile(t);break;case ccui.Widget.PLIST_TEXTURE:i.initWithSpriteFrameName(t)}this._updateChildrenDisplayedRGBA(),this._frontCrossDisabledRendererAdaptDirty=!0,this._findLayout()}},_onPressStateChangedToNormal:function(){this._backGroundBoxRenderer.setVisible(!0),this._backGroundSelectedBoxRenderer.setVisible(!1),this._backGroundBoxDisabledRenderer.setVisible(!1),this._frontCrossDisabledRenderer.setVisible(!1),this._backGroundBoxRenderer.setScale(this._backgroundTextureScaleX,this._backgroundTextureScaleY),this._frontCrossRenderer.setScale(this._backgroundTextureScaleX,this._backgroundTextureScaleY),this._isSelected&&(this._frontCrossRenderer.setVisible(!0),this._frontCrossRendererAdaptDirty=!0)},_onPressStateChangedToPressed:function(){this._backGroundSelectedFileName?(this._backGroundBoxRenderer.setVisible(!1),this._backGroundSelectedBoxRenderer.setVisible(!0),this._backGroundBoxDisabledRenderer.setVisible(!1),this._frontCrossDisabledRenderer.setVisible(!1)):(this._backGroundBoxRenderer.setScale(this._backgroundTextureScaleX+this._zoomScale,this._backgroundTextureScaleY+this._zoomScale),this._frontCrossRenderer.setScale(this._backgroundTextureScaleX+this._zoomScale,this._backgroundTextureScaleY+this._zoomScale))},_onPressStateChangedToDisabled:function(){this._backGroundDisabledFileName&&this._frontCrossDisabledFileName&&(this._backGroundBoxRenderer.setVisible(!1),this._backGroundBoxDisabledRenderer.setVisible(!0)),this._backGroundSelectedBoxRenderer.setVisible(!1),this._frontCrossRenderer.setVisible(!1),this._backGroundBoxRenderer.setScale(this._backgroundTextureScaleX,this._backgroundTextureScaleY),this._frontCrossRenderer.setScale(this._backgroundTextureScaleX,this._backgroundTextureScaleY),this._isSelected&&(this._frontCrossDisabledRenderer.setVisible(!0),this._frontCrossDisabledRendererAdaptDirty=!0)},setZoomScale:function(t){this._zoomScale=t},getZoomScale:function(){return this._zoomScale},setSelectedState:function(t){this.setSelected(t)},setSelected:function(t){t!==this._isSelected&&(this._isSelected=t,this._frontCrossRenderer.setVisible(this._isSelected))},getSelectedState:function(){return this.isSelected()},isSelected:function(){return this._isSelected},_selectedEvent:function(){this._checkBoxEventSelector&&(this._checkBoxEventListener?this._checkBoxEventSelector.call(this._checkBoxEventListener,this,ccui.CheckBox.EVENT_SELECTED):this._checkBoxEventSelector(this,ccui.CheckBox.EVENT_SELECTED))},_unSelectedEvent:function(){this._checkBoxEventSelector&&(this._checkBoxEventListener?this._checkBoxEventSelector.call(this._checkBoxEventListener,this,ccui.CheckBox.EVENT_UNSELECTED):this._checkBoxEventSelector(this,ccui.CheckBox.EVENT_UNSELECTED))},_releaseUpEvent:function(){ccui.Widget.prototype._releaseUpEvent.call(this),this._isSelected?(this.setSelected(!1),this._unSelectedEvent()):(this.setSelected(!0),this._selectedEvent())},addEventListenerCheckBox:function(t,e){this.addEventListener(t,e)},addEventListener:function(t,e){this._checkBoxEventSelector=t,this._checkBoxEventListener=e},getVirtualRendererSize:function(){return this._backGroundBoxRenderer.getContentSize()},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._frontCrossDisabledRendererAdaptDirty=this._backGroundBoxDisabledRendererAdaptDirty=this._frontCrossRendererAdaptDirty=this._backGroundSelectedBoxRendererAdaptDirty=this._backGroundBoxRendererAdaptDirty=!0},getVirtualRenderer:function(){return this._backGroundBoxRenderer},_backGroundTextureScaleChangedWithSize:function(){var t=this._backGroundBoxRenderer,e=this._contentSize;if(this._ignoreSize)t.setScale(1),this._backgroundTextureScaleX=this._backgroundTextureScaleY=1;else{if(0>=(n=t.getContentSize()).width||0>=n.height)return t.setScale(1),void(this._backgroundTextureScaleX=this._backgroundTextureScaleY=1);var i=e.width/n.width,n=e.height/n.height;this._backgroundTextureScaleX=i,this._backgroundTextureScaleY=n,t.setScaleX(i),t.setScaleY(n)}t.setPosition(.5*e.width,.5*e.height)},_backGroundSelectedTextureScaleChangedWithSize:function(){var t=this._backGroundSelectedBoxRenderer,e=this._contentSize;if(this._ignoreSize)t.setScale(1);else{var i=t.getContentSize();if(0>=i.width||0>=i.height)return void t.setScale(1);var n=e.height/i.height;t.setScaleX(e.width/i.width),t.setScaleY(n)}t.setPosition(.5*e.width,.5*e.height)},_frontCrossTextureScaleChangedWithSize:function(){var t=this._frontCrossRenderer,e=this._contentSize;if(this._ignoreSize)t.setScale(1);else{var i=t.getContentSize();if(0>=i.width||0>=i.height)return void t.setScale(1);var n=e.height/i.height;t.setScaleX(e.width/i.width),t.setScaleY(n)}t.setPosition(.5*e.width,.5*e.height)},_backGroundDisabledTextureScaleChangedWithSize:function(){var t=this._backGroundBoxDisabledRenderer,e=this._contentSize;if(this._ignoreSize)t.setScale(1);else{var i=t.getContentSize();if(0>=i.width||0>=i.height)return void t.setScale(1);var n=e.height/i.height;t.setScaleX(e.width/i.width),t.setScaleY(n)}t.setPosition(.5*e.width,.5*e.height)},_frontCrossDisabledTextureScaleChangedWithSize:function(){var t=this._frontCrossDisabledRenderer,e=this._contentSize;if(this._ignoreSize)t.setScale(1);else{var i=t.getContentSize();if(0>=i.width||0>=i.height)return void t.setScale(1);var n=e.height/i.height;t.setScaleX(e.width/i.width),t.setScaleY(n)}t.setPosition(.5*e.width,.5*e.height)},getDescription:function(){return"CheckBox"},_createCloneInstance:function(){return new ccui.CheckBox},_copySpecialProperties:function(t){t instanceof ccui.CheckBox&&(this.loadTextureBackGround(t._backGroundFileName,t._backGroundTexType),this.loadTextureBackGroundSelected(t._backGroundSelectedFileName,t._backGroundSelectedTexType),this.loadTextureFrontCross(t._frontCrossFileName,t._frontCrossTexType),this.loadTextureBackGroundDisabled(t._backGroundDisabledFileName,t._backGroundDisabledTexType),this.loadTextureFrontCrossDisabled(t._frontCrossDisabledFileName,t._frontCrossDisabledTexType),this.setSelected(t._isSelected),this._checkBoxEventListener=t._checkBoxEventListener,this._checkBoxEventSelector=t._checkBoxEventSelector,this._ccEventCallback=t._ccEventCallback,this._zoomScale=t._zoomScale,this._backgroundTextureScaleX=t._backgroundTextureScaleX,this._backgroundTextureScaleY=t._backgroundTextureScaleY)},_adaptRenderers:function(){this._backGroundBoxRendererAdaptDirty&&(this._backGroundTextureScaleChangedWithSize(),this._backGroundBoxRendererAdaptDirty=!1),this._backGroundSelectedBoxRendererAdaptDirty&&(this._backGroundSelectedTextureScaleChangedWithSize(),this._backGroundSelectedBoxRendererAdaptDirty=!1),this._frontCrossRendererAdaptDirty&&(this._frontCrossTextureScaleChangedWithSize(),this._frontCrossRendererAdaptDirty=!1),this._backGroundBoxDisabledRendererAdaptDirty&&(this._backGroundDisabledTextureScaleChangedWithSize(),this._backGroundBoxDisabledRendererAdaptDirty=!1),this._frontCrossDisabledRendererAdaptDirty&&(this._frontCrossDisabledTextureScaleChangedWithSize(),this._frontCrossDisabledRendererAdaptDirty=!1)}}),_p=ccui.CheckBox.prototype,cc.defineGetterSetter(_p,"selected",_p.isSelected,_p.setSelected),_p=null,ccui.CheckBox.create=function(t,e,i,n,s,r){return new ccui.CheckBox(t,e,i,n,s,r)},ccui.CheckBox.EVENT_SELECTED=0,ccui.CheckBox.EVENT_UNSELECTED=1,ccui.CheckBox.BOX_RENDERER_ZORDER=-1,ccui.CheckBox.BOX_SELECTED_RENDERER_ZORDER=-1,ccui.CheckBox.BOX_DISABLED_RENDERER_ZORDER=-1,ccui.CheckBox.FRONT_CROSS_RENDERER_ZORDER=-1,ccui.CheckBox.FRONT_CROSS_DISABLED_RENDERER_ZORDER=-1,ccui.ImageView=ccui.Widget.extend({_scale9Enabled:!1,_prevIgnoreSize:!0,_capInsets:null,_imageRenderer:null,_textureFile:"",_imageTexType:ccui.Widget.LOCAL_TEXTURE,_imageTextureSize:null,_className:"ImageView",_imageRendererAdaptDirty:!0,ctor:function(t,e){this._capInsets=cc.rect(0,0,0,0),this._imageTextureSize=cc.size(this._capInsets.width,this._capInsets.height),ccui.Widget.prototype.ctor.call(this),t?this.loadTexture(t,void 0===e?0:e):this._imageTexType=ccui.Widget.LOCAL_TEXTURE},_initRenderer:function(){this._imageRenderer=new ccui.Scale9Sprite,this._imageRenderer.setRenderingType(ccui.Scale9Sprite.RenderingType.SIMPLE),this.addProtectedChild(this._imageRenderer,ccui.ImageView.RENDERER_ZORDER,-1)},loadTexture:function(t,e){if(t&&(this._textureFile!=t||this._imageTexType!=e)){var i=this;e=e||ccui.Widget.LOCAL_TEXTURE,this._textureFile=t,this._imageTexType=e;var n=i._imageRenderer;switch(i._imageTexType){case ccui.Widget.LOCAL_TEXTURE:i._scale9Enabled?(n.initWithFile(t),n.setCapInsets(i._capInsets)):n.initWithFile(t);break;case ccui.Widget.PLIST_TEXTURE:i._scale9Enabled?(n.initWithSpriteFrameName(t),n.setCapInsets(i._capInsets)):n.initWithSpriteFrameName(t)}if(!n._textureLoaded){var s=function(){n.removeEventListener("load",s),!i._ignoreSize&&cc.sizeEqualToSize(i._customSize,cc.size(0,0))&&(i._customSize=i._imageRenderer.getContentSize()),i._imageTextureSize=n.getContentSize(),i._updateChildrenDisplayedRGBA(),i._updateContentSizeWithTextureSize(i._imageTextureSize)};n.addEventListener("load",s)}!this._ignoreSize&&cc.sizeEqualToSize(this._customSize,cc.size(0,0))&&(this._customSize=this._imageRenderer.getContentSize()),i._imageTextureSize=n.getContentSize(),this._updateChildrenDisplayedRGBA(),i._updateContentSizeWithTextureSize(i._imageTextureSize),i._imageRendererAdaptDirty=!0,i._findLayout()}},setTextureRect:function(){cc.warn("ImageView.setTextureRect  is deprecated!")},setScale9Enabled:function(t){this._scale9Enabled!==t&&((this._scale9Enabled=t)?this._imageRenderer.setRenderingType(ccui.Scale9Sprite.RenderingType.SLICED):this._imageRenderer.setRenderingType(ccui.Scale9Sprite.RenderingType.SIMPLE),this._scale9Enabled?(t=this._ignoreSize,this.ignoreContentAdaptWithSize(!1),this._prevIgnoreSize=t):this.ignoreContentAdaptWithSize(this._prevIgnoreSize),this.setCapInsets(this._capInsets),this._imageRendererAdaptDirty=!0)},isScale9Enabled:function(){return this._scale9Enabled},ignoreContentAdaptWithSize:function(t){(!this._scale9Enabled||this._scale9Enabled&&!t)&&(ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this,t),this._prevIgnoreSize=t)},setCapInsets:function(t){if(t){var e=this._capInsets;e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,this._scale9Enabled&&this._imageRenderer.setCapInsets(t)}},getCapInsets:function(){return cc.rect(this._capInsets)},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._imageRendererAdaptDirty=!0},_adaptRenderers:function(){this._imageRendererAdaptDirty&&(this._imageTextureScaleChangedWithSize(),this._imageRendererAdaptDirty=!1)},getVirtualRendererSize:function(){return cc.size(this._imageTextureSize)},getVirtualRenderer:function(){return this._imageRenderer},_imageTextureScaleChangedWithSize:function(){this._imageRenderer.setContentSize(this._contentSize),this._imageRenderer.setPosition(this._contentSize.width/2,this._contentSize.height/2)},getDescription:function(){return"ImageView"},_createCloneInstance:function(){return new ccui.ImageView},_copySpecialProperties:function(t){t instanceof ccui.ImageView&&(this._prevIgnoreSize=t._prevIgnoreSize,this._capInsets=t._capInsets,this.loadTexture(t._textureFile,t._imageTexType),this.setScale9Enabled(t._scale9Enabled))},setContentSize:function(t,e){e&&(t=cc.size(t,e)),ccui.Widget.prototype.setContentSize.call(this,t),this._imageRenderer.setContentSize(t)}}),ccui.ImageView.create=function(t,e){return new ccui.ImageView(t,e)},ccui.ImageView.RENDERER_ZORDER=-1,ccui.LoadingBar=ccui.Widget.extend({_direction:null,_percent:100,_totalLength:0,_barRenderer:null,_renderBarTexType:ccui.Widget.LOCAL_TEXTURE,_barRendererTextureSize:null,_scale9Enabled:!1,_prevIgnoreSize:!0,_capInsets:null,_textureFile:"",_isTextureLoaded:!1,_className:"LoadingBar",_barRendererAdaptDirty:!0,ctor:function(t,e){this._direction=ccui.LoadingBar.TYPE_LEFT,this._barRendererTextureSize=cc.size(0,0),this._capInsets=cc.rect(0,0,0,0),ccui.Widget.prototype.ctor.call(this),void 0!==t&&this.loadTexture(t),void 0!==e&&this.setPercent(e)},_initRenderer:function(){this._barRenderer=new cc.Sprite,this.addProtectedChild(this._barRenderer,ccui.LoadingBar.RENDERER_ZORDER,-1),this._barRenderer.setAnchorPoint(0,.5)},setDirection:function(t){if(this._direction!==t)switch(this._direction=t,this._direction){case ccui.LoadingBar.TYPE_LEFT:this._barRenderer.setAnchorPoint(0,.5),this._barRenderer.setPosition(0,.5*this._contentSize.height),this._scale9Enabled||this._barRenderer.setFlippedX(!1);break;case ccui.LoadingBar.TYPE_RIGHT:this._barRenderer.setAnchorPoint(1,.5),this._barRenderer.setPosition(this._totalLength,.5*this._contentSize.height),this._scale9Enabled||this._barRenderer.setFlippedX(!0)}},getDirection:function(){return this._direction},loadTexture:function(t,e){if(t){this._renderBarTexType=e=e||ccui.Widget.LOCAL_TEXTURE,this._textureFile=t;var i=this._barRenderer,n=this;switch(i._textureLoaded||i.addEventListener("load",(function(){n.loadTexture(n._textureFile,n._renderBarTexType),n._setPercent(n._percent)})),this._renderBarTexType){case ccui.Widget.LOCAL_TEXTURE:i.initWithFile(t);break;case ccui.Widget.PLIST_TEXTURE:i.initWithSpriteFrameName(t)}var s=i.getContentSize();switch(this._barRendererTextureSize.width=s.width,this._barRendererTextureSize.height=s.height,this._direction){case ccui.LoadingBar.TYPE_LEFT:i.setAnchorPoint(0,.5),this._scale9Enabled||i.setFlippedX(!1);break;case ccui.LoadingBar.TYPE_RIGHT:i.setAnchorPoint(1,.5),this._scale9Enabled||i.setFlippedX(!0)}this._scale9Enabled&&i.setCapInsets(this._capInsets),this._updateChildrenDisplayedRGBA(),this._barRendererScaleChangedWithSize(),this._updateContentSizeWithTextureSize(this._barRendererTextureSize),this._barRendererAdaptDirty=!0,this._findLayout()}},setScale9Enabled:function(t){this._scale9Enabled!==t&&(this._scale9Enabled=t,this.removeProtectedChild(this._barRenderer),this._barRenderer=this._scale9Enabled?new ccui.Scale9Sprite:new cc.Sprite,this.loadTexture(this._textureFile,this._renderBarTexType),this.addProtectedChild(this._barRenderer,ccui.LoadingBar.RENDERER_ZORDER,-1),this._scale9Enabled?(t=this._ignoreSize,this.ignoreContentAdaptWithSize(!1),this._prevIgnoreSize=t):this.ignoreContentAdaptWithSize(this._prevIgnoreSize),this.setCapInsets(this._capInsets),this.setPercent(this._percent),this._barRendererAdaptDirty=!0)},isScale9Enabled:function(){return this._scale9Enabled},setCapInsets:function(t){if(t){var e=this._capInsets;e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,this._scale9Enabled&&this._barRenderer.setCapInsets(t)}},getCapInsets:function(){return cc.rect(this._capInsets)},setPercent:function(t){100<t&&(t=100),0>t&&(t=0),t!==this._percent&&(this._percent=t,this._setPercent(t))},_setPercent:function(){var t,e,i,n;0>=this._totalLength||(t=this._percent/100,this._scale9Enabled?this._setScale9Scale():(i=this._barRenderer,n=this._barRendererTextureSize,(e=i.getTextureRect()).width=n.width*t,i.setTextureRect(cc.rect(e.x,e.y,n.width*t,n.height),i._rectRotated)))},setContentSize:function(t,e){ccui.Widget.prototype.setContentSize.call(this,t,e),this._totalLength=void 0===e?t.width:t},getPercent:function(){return this._percent},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._barRendererAdaptDirty=!0},_adaptRenderers:function(){this._barRendererAdaptDirty&&(this._barRendererScaleChangedWithSize(),this._barRendererAdaptDirty=!1)},ignoreContentAdaptWithSize:function(t){(!this._scale9Enabled||this._scale9Enabled&&!t)&&(ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this,t),this._prevIgnoreSize=t)},getVirtualRendererSize:function(){return cc.size(this._barRendererTextureSize)},getVirtualRenderer:function(){return this._barRenderer},_barRendererScaleChangedWithSize:function(){var t=this._barRenderer,e=this._contentSize;if(this._unifySize)this._totalLength=this._contentSize.width,this.setPercent(this._percent);else if(this._ignoreSize)this._scale9Enabled||(this._totalLength=this._barRendererTextureSize.width,t.setScale(1));else if(this._totalLength=e.width,this._scale9Enabled)this._setScale9Scale(),t.setScale(1);else{var i=this._barRendererTextureSize;if(0>=i.width||0>=i.height)return void t.setScale(1);var n=e.height/i.height;t.setScaleX(e.width/i.width),t.setScaleY(n)}switch(this._direction){case ccui.LoadingBar.TYPE_LEFT:t.setPosition(0,.5*e.height);break;case ccui.LoadingBar.TYPE_RIGHT:t.setPosition(this._totalLength,.5*e.height)}},_setScale9Scale:function(){this._barRenderer.setPreferredSize(cc.size(this._percent/100*this._totalLength,this._contentSize.height))},getDescription:function(){return"LoadingBar"},_createCloneInstance:function(){return new ccui.LoadingBar},_copySpecialProperties:function(t){t instanceof ccui.LoadingBar&&(this._prevIgnoreSize=t._prevIgnoreSize,this.setScale9Enabled(t._scale9Enabled),this.loadTexture(t._textureFile,t._renderBarTexType),this.setCapInsets(t._capInsets),this.setPercent(t._percent),this.setDirection(t._direction))}}),_p=ccui.LoadingBar.prototype,cc.defineGetterSetter(_p,"direction",_p.getDirection,_p.setDirection),cc.defineGetterSetter(_p,"percent",_p.getPercent,_p.setPercent),_p=null,ccui.LoadingBar.create=function(t,e){return new ccui.LoadingBar(t,e)},ccui.LoadingBar.TYPE_LEFT=0,ccui.LoadingBar.TYPE_RIGHT=1,ccui.LoadingBar.RENDERER_ZORDER=-1,ccui.Slider=ccui.Widget.extend({_barRenderer:null,_progressBarRenderer:null,_barTextureSize:null,_progressBarTextureSize:null,_slidBallNormalRenderer:null,_slidBallPressedRenderer:null,_slidBallDisabledRenderer:null,_slidBallRenderer:null,_barLength:0,_percent:0,_scale9Enabled:!1,_prevIgnoreSize:!0,_textureFile:"",_progressBarTextureFile:"",_slidBallNormalTextureFile:"",_slidBallPressedTextureFile:"",_slidBallDisabledTextureFile:"",_capInsetsBarRenderer:null,_capInsetsProgressBarRenderer:null,_sliderEventListener:null,_sliderEventSelector:null,_barTexType:ccui.Widget.LOCAL_TEXTURE,_progressBarTexType:ccui.Widget.LOCAL_TEXTURE,_ballNTexType:ccui.Widget.LOCAL_TEXTURE,_ballPTexType:ccui.Widget.LOCAL_TEXTURE,_ballDTexType:ccui.Widget.LOCAL_TEXTURE,_isTextureLoaded:!1,_className:"Slider",_barRendererAdaptDirty:!0,_progressBarRendererDirty:!0,_unifySize:!1,_zoomScale:.1,_sliderBallNormalTextureScaleX:1,_sliderBallNormalTextureScaleY:1,ctor:function(t,e,i){this._barTextureSize=cc.size(0,0),this._progressBarTextureSize=cc.size(0,0),this._capInsetsBarRenderer=cc.rect(0,0,0,0),this._capInsetsProgressBarRenderer=cc.rect(0,0,0,0),ccui.Widget.prototype.ctor.call(this),i=i||0,this.setTouchEnabled(!0),t&&this.loadBarTexture(t,i),e&&this.loadSlidBallTextures(e,i)},_initRenderer:function(){this._barRenderer=new cc.Sprite,this._progressBarRenderer=new cc.Sprite,this._progressBarRenderer.setAnchorPoint(0,.5),this.addProtectedChild(this._barRenderer,ccui.Slider.BASEBAR_RENDERER_ZORDER,-1),this.addProtectedChild(this._progressBarRenderer,ccui.Slider.PROGRESSBAR_RENDERER_ZORDER,-1),this._slidBallNormalRenderer=new cc.Sprite,this._slidBallPressedRenderer=new cc.Sprite,this._slidBallPressedRenderer.setVisible(!1),this._slidBallDisabledRenderer=new cc.Sprite,this._slidBallDisabledRenderer.setVisible(!1),this._slidBallRenderer=new cc.Node,this._slidBallRenderer.addChild(this._slidBallNormalRenderer),this._slidBallRenderer.addChild(this._slidBallPressedRenderer),this._slidBallRenderer.addChild(this._slidBallDisabledRenderer),this._slidBallRenderer.setCascadeColorEnabled(!0),this._slidBallRenderer.setCascadeOpacityEnabled(!0),this.addProtectedChild(this._slidBallRenderer,ccui.Slider.BALL_RENDERER_ZORDER,-1)},loadBarTexture:function(t,e){if(t){e=e||ccui.Widget.LOCAL_TEXTURE,this._textureFile=t,this._barTexType=e;var i=this._barRenderer,n=this;switch(i._textureLoaded||i.addEventListener("load",(function(){n.loadBarTexture(n._textureFile,n._barTexType)})),this._barTexType){case ccui.Widget.LOCAL_TEXTURE:i.initWithFile(t);break;case ccui.Widget.PLIST_TEXTURE:i.initWithSpriteFrameName(t)}this._updateChildrenDisplayedRGBA(),this._progressBarRendererDirty=this._barRendererAdaptDirty=!0,this._updateContentSizeWithTextureSize(this._barRenderer.getContentSize()),this._findLayout(),this._barTextureSize=this._barRenderer.getContentSize()}},loadProgressBarTexture:function(t,e){if(t){e=e||ccui.Widget.LOCAL_TEXTURE,this._progressBarTextureFile=t,this._progressBarTexType=e;var i=this._progressBarRenderer,n=this;switch(i._textureLoaded||i.addEventListener("load",(function(){n.loadProgressBarTexture(n._progressBarTextureFile,n._progressBarTexType)})),this._progressBarTexType){case ccui.Widget.LOCAL_TEXTURE:i.initWithFile(t);break;case ccui.Widget.PLIST_TEXTURE:i.initWithSpriteFrameName(t)}this._updateChildrenDisplayedRGBA(),this._progressBarRenderer.setAnchorPoint(cc.p(0,.5)),i=this._progressBarRenderer.getContentSize(),this._progressBarTextureSize={width:i.width,height:i.height},this._progressBarRendererDirty=!0,this._findLayout()}},setScale9Enabled:function(t){this._scale9Enabled!==t&&(this._scale9Enabled=t,this.removeProtectedChild(this._barRenderer,!0),this.removeProtectedChild(this._progressBarRenderer,!0),this._progressBarRenderer=this._barRenderer=null,this._scale9Enabled?(this._barRenderer=new ccui.Scale9Sprite,this._progressBarRenderer=new ccui.Scale9Sprite):(this._barRenderer=new cc.Sprite,this._progressBarRenderer=new cc.Sprite),this.loadBarTexture(this._textureFile,this._barTexType),this.loadProgressBarTexture(this._progressBarTextureFile,this._progressBarTexType),this.addProtectedChild(this._barRenderer,ccui.Slider.BASEBAR_RENDERER_ZORDER,-1),this.addProtectedChild(this._progressBarRenderer,ccui.Slider.PROGRESSBAR_RENDERER_ZORDER,-1),this._scale9Enabled?(t=this._ignoreSize,this.ignoreContentAdaptWithSize(!1),this._prevIgnoreSize=t):this.ignoreContentAdaptWithSize(this._prevIgnoreSize),this.setCapInsetsBarRenderer(this._capInsetsBarRenderer),this.setCapInsetProgressBarRenderer(this._capInsetsProgressBarRenderer),this._progressBarRendererDirty=this._barRendererAdaptDirty=!0)},isScale9Enabled:function(){return this._scale9Enabled},ignoreContentAdaptWithSize:function(t){(!this._scale9Enabled||this._scale9Enabled&&!t)&&(ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this,t),this._prevIgnoreSize=t)},setCapInsets:function(t){this.setCapInsetsBarRenderer(t),this.setCapInsetProgressBarRenderer(t)},setCapInsetsBarRenderer:function(t){if(t){var e=this._capInsetsBarRenderer;e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,this._scale9Enabled&&this._barRenderer.setCapInsets(t)}},getCapInsetsBarRenderer:function(){return cc.rect(this._capInsetsBarRenderer)},setCapInsetProgressBarRenderer:function(t){if(t){var e=this._capInsetsProgressBarRenderer;e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,this._scale9Enabled&&this._progressBarRenderer.setCapInsets(t)}},getCapInsetsProgressBarRenderer:function(){return cc.rect(this._capInsetsProgressBarRenderer)},loadSlidBallTextures:function(t,e,i,n){this.loadSlidBallTextureNormal(t,n),this.loadSlidBallTexturePressed(e,n),this.loadSlidBallTextureDisabled(i,n)},loadSlidBallTextureNormal:function(t,e){if(t){e=e||ccui.Widget.LOCAL_TEXTURE,this._slidBallNormalTextureFile=t,this._ballNTexType=e;var i=this;switch(this._slidBallNormalRenderer._textureLoaded||this._slidBallNormalRenderer.addEventListener("load",(function(){i.loadSlidBallTextureNormal(i._slidBallNormalTextureFile,i._ballNTexType)})),this._ballNTexType){case ccui.Widget.LOCAL_TEXTURE:this._slidBallNormalRenderer.initWithFile(t);break;case ccui.Widget.PLIST_TEXTURE:this._slidBallNormalRenderer.initWithSpriteFrameName(t)}this._updateChildrenDisplayedRGBA(),this._findLayout()}},loadSlidBallTexturePressed:function(t,e){if(t){e=e||ccui.Widget.LOCAL_TEXTURE,this._slidBallPressedTextureFile=t,this._ballPTexType=e;var i=this;switch(this._slidBallPressedRenderer._textureLoaded||this._slidBallPressedRenderer.addEventListener("load",(function(){i.loadSlidBallTexturePressed(i._slidBallPressedTextureFile,i._ballPTexType)})),this._ballPTexType){case ccui.Widget.LOCAL_TEXTURE:this._slidBallPressedRenderer.initWithFile(t);break;case ccui.Widget.PLIST_TEXTURE:this._slidBallPressedRenderer.initWithSpriteFrameName(t)}this._updateChildrenDisplayedRGBA(),this._findLayout()}},loadSlidBallTextureDisabled:function(t,e){if(t){e=e||ccui.Widget.LOCAL_TEXTURE,this._slidBallDisabledTextureFile=t,this._ballDTexType=e;var i=this;switch(this._slidBallDisabledRenderer._textureLoaded||this._slidBallDisabledRenderer.addEventListener("load",(function(){i.loadSlidBallTextureDisabled(i._slidBallDisabledTextureFile,i._ballDTexType)})),this._ballDTexType){case ccui.Widget.LOCAL_TEXTURE:this._slidBallDisabledRenderer.initWithFile(t);break;case ccui.Widget.PLIST_TEXTURE:this._slidBallDisabledRenderer.initWithSpriteFrameName(t)}this._updateChildrenDisplayedRGBA(),this._findLayout()}},setPercent:function(t){if(100<t&&(t=100),0>t&&(t=0),this._percent=t,t=t/100*this._barLength,this._slidBallRenderer.setPosition(t,this._contentSize.height/2),this._scale9Enabled)this._progressBarRenderer.setPreferredSize(cc.size(t,this._contentSize.height));else{var e=this._progressBarRenderer,i=e.getTextureRect();e.setTextureRect(cc.rect(i.x,i.y,t/e._scaleX,i.height),e.isTextureRectRotated())}},hitTest:function(t){t=this._slidBallNormalRenderer.convertToNodeSpace(t);var e=this._slidBallNormalRenderer.getContentSize();e=cc.rect(0,0,e.width,e.height);return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height},onTouchBegan:function(t,e){var i=ccui.Widget.prototype.onTouchBegan.call(this,t,e);if(this._hit){var n=this.convertToNodeSpace(this._touchBeganPosition);this.setPercent(this._getPercentWithBallPos(n.x)),this._percentChangedEvent()}return i},onTouchMoved:function(t,e){var i=t.getLocation();i=this.convertToNodeSpace(i);this.setPercent(this._getPercentWithBallPos(i.x)),this._percentChangedEvent()},onTouchEnded:function(t,e){ccui.Widget.prototype.onTouchEnded.call(this,t,e)},onTouchCancelled:function(t,e){ccui.Widget.prototype.onTouchCancelled.call(this,t,e)},_getPercentWithBallPos:function(t){return t/this._barLength*100},addEventListenerSlider:function(t,e){this.addEventListener(t,e)},addEventListener:function(t,e){this._sliderEventSelector=t,this._sliderEventListener=e},_percentChangedEvent:function(){this._sliderEventSelector&&(this._sliderEventListener?this._sliderEventSelector.call(this._sliderEventListener,this,ccui.Slider.EVENT_PERCENT_CHANGED):this._sliderEventSelector(this,ccui.Slider.EVENT_PERCENT_CHANGED)),this._ccEventCallback&&this._ccEventCallback(this,ccui.Slider.EVENT_PERCENT_CHANGED)},getPercent:function(){return this._percent},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._progressBarRendererDirty=this._barRendererAdaptDirty=!0},_adaptRenderers:function(){this._barRendererAdaptDirty&&(this._barRendererScaleChangedWithSize(),this._barRendererAdaptDirty=!1),this._progressBarRendererDirty&&(this._progressBarRendererScaleChangedWithSize(),this._progressBarRendererDirty=!1)},getVirtualRendererSize:function(){return this._barRenderer.getContentSize()},getVirtualRenderer:function(){return this._barRenderer},_barRendererScaleChangedWithSize:function(){if(this._unifySize)this._barLength=this._contentSize.width,this._barRenderer.setPreferredSize(this._contentSize);else if(this._ignoreSize)this._barRenderer.setScale(1),this._barLength=this._contentSize.width;else if(this._barLength=this._contentSize.width,this._scale9Enabled)this._barRenderer.setPreferredSize(this._contentSize),this._barRenderer.setScale(1);else{var t=this._barTextureSize;if(0>=t.width||0>=t.height)this._barRenderer.setScale(1);else{var e=this._contentSize.height/t.height;this._barRenderer.setScaleX(this._contentSize.width/t.width),this._barRenderer.setScaleY(e)}}this._barRenderer.setPosition(this._contentSize.width/2,this._contentSize.height/2),this.setPercent(this._percent)},_progressBarRendererScaleChangedWithSize:function(){if(this._unifySize)this._progressBarRenderer.setPreferredSize(this._contentSize);else if(this._ignoreSize){if(!this._scale9Enabled){var t=this._progressBarTextureSize,e=this._contentSize.width/t.width;t=this._contentSize.height/t.height;this._progressBarRenderer.setScaleX(e),this._progressBarRenderer.setScaleY(t)}}else if(this._scale9Enabled)this._progressBarRenderer.setPreferredSize(this._contentSize),this._progressBarRenderer.setScale(1);else{if(0>=(t=this._progressBarTextureSize).width||0>=t.height)return void this._progressBarRenderer.setScale(1);e=this._contentSize.width/t.width,t=this._contentSize.height/t.height,this._progressBarRenderer.setScaleX(e),this._progressBarRenderer.setScaleY(t)}this._progressBarRenderer.setPosition(0,this._contentSize.height/2),this.setPercent(this._percent)},_onPressStateChangedToNormal:function(){this._slidBallNormalRenderer.setVisible(!0),this._slidBallPressedRenderer.setVisible(!1),this._slidBallDisabledRenderer.setVisible(!1),this._slidBallNormalRenderer.setScale(this._sliderBallNormalTextureScaleX,this._sliderBallNormalTextureScaleY),cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(this._slidBallNormalRenderer._renderCmd._shaderProgram=this._getNormalGLProgram())},_onPressStateChangedToPressed:function(){this._slidBallPressedTextureFile?(this._slidBallNormalRenderer.setVisible(!1),this._slidBallPressedRenderer.setVisible(!0),this._slidBallDisabledRenderer.setVisible(!1)):this._slidBallNormalRenderer.setScale(this._sliderBallNormalTextureScaleX+this._zoomScale,this._sliderBallNormalTextureScaleY+this._zoomScale),cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(this._slidBallNormalRenderer._renderCmd._shaderProgram=this._getNormalGLProgram())},_onPressStateChangedToDisabled:function(){this._slidBallDisabledTextureFile?(this._slidBallNormalRenderer.setVisible(!1),this._slidBallDisabledRenderer.setVisible(!0)):(this._slidBallNormalRenderer.setVisible(!0),cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(this._slidBallNormalRenderer._renderCmd._shaderProgram=this._getGrayGLProgram())),this._slidBallNormalRenderer.setScale(this._sliderBallNormalTextureScaleX,this._sliderBallNormalTextureScaleY),this._slidBallPressedRenderer.setVisible(!1)},setZoomScale:function(t){this._zoomScale=t},getZoomScale:function(){return this._zoomScale},getSlidBallNormalRenderer:function(){return this._slidBallNormalRenderer},getSlidBallPressedRenderer:function(){return this._slidBallPressedRenderer},getSlidBallDisabledRenderer:function(){return this._slidBallDisabledRenderer},getSlidBallRenderer:function(){return this._slidBallRenderer},getDescription:function(){return"Slider"},_createCloneInstance:function(){return new ccui.Slider},_copySpecialProperties:function(t){this._prevIgnoreSize=t._prevIgnoreSize,this.setScale9Enabled(t._scale9Enabled),this.loadBarTexture(t._textureFile,t._barTexType),this.loadProgressBarTexture(t._progressBarTextureFile,t._progressBarTexType),this.loadSlidBallTextureNormal(t._slidBallNormalTextureFile,t._ballNTexType),this.loadSlidBallTexturePressed(t._slidBallPressedTextureFile,t._ballPTexType),this.loadSlidBallTextureDisabled(t._slidBallDisabledTextureFile,t._ballDTexType),this.setPercent(t.getPercent()),this._sliderEventListener=t._sliderEventListener,this._sliderEventSelector=t._sliderEventSelector,this._zoomScale=t._zoomScale,this._ccEventCallback=t._ccEventCallback}}),_p=ccui.Slider.prototype,cc.defineGetterSetter(_p,"percent",_p.getPercent,_p.setPercent),_p=null,ccui.Slider.create=function(t,e,i){return new ccui.Slider(t,e,i)},ccui.Slider.EVENT_PERCENT_CHANGED=0,ccui.Slider.BASEBAR_RENDERER_ZORDER=-3,ccui.Slider.PROGRESSBAR_RENDERER_ZORDER=-2,ccui.Slider.BALL_RENDERER_ZORDER=-1,ccui.Text=ccui.Widget.extend({_touchScaleChangeEnabled:!1,_normalScaleValueX:1,_normalScaleValueY:1,_fontName:"Arial",_fontSize:16,_onSelectedScaleOffset:.5,_labelRenderer:null,_textAreaSize:null,_textVerticalAlignment:0,_textHorizontalAlignment:0,_className:"Text",_type:null,_labelRendererAdaptDirty:!0,ctor:function(t,e,i){this._type=ccui.Text.Type.SYSTEM,this._textAreaSize=cc.size(0,0),ccui.Widget.prototype.ctor.call(this),void 0!==i?(this.setFontName(e),this.setFontSize(i),this.setString(t)):this.setFontName(this._fontName)},_initRenderer:function(){this._labelRenderer=new cc.LabelTTF,this.addProtectedChild(this._labelRenderer,ccui.Text.RENDERER_ZORDER,-1)},setText:function(t){cc.log("Please use the setString"),this.setString(t)},setString:function(t){t!==this._labelRenderer.getString()&&(this._setString(t),this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize()))},_setString:function(t){this._labelRenderer.setString(t),this._labelRendererAdaptDirty=!0},getStringValue:function(){return cc.log("Please use the getString"),this._labelRenderer.getString()},getString:function(){return this._labelRenderer.getString()},getStringLength:function(){return this._labelRenderer.getStringLength()},setFontSize:function(t){this._setFontSize(t),this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize())},_setFontSize:function(t){this._labelRenderer.setFontSize(t),this._fontSize=t,this._labelRendererAdaptDirty=!0},getFontSize:function(){return this._fontSize},setFontName:function(t){this._setFontName(t),this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize())},_setFontName:function(t){this._fontName=t,this._labelRenderer.setFontName(t),this._labelRendererAdaptDirty=!0},_updateUITextContentSize:function(){this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize())},getFontName:function(){return this._fontName},_setFont:function(t){var e=cc.LabelTTF._fontStyleRE.exec(t);e&&(this._fontSize=parseInt(e[1]),this._fontName=e[2],this._labelRenderer._setFont(t),this._labelScaleChangedWithSize())},_getFont:function(){return this._labelRenderer._getFont()},getType:function(){return this._type},setTextAreaSize:function(t){this._setTextAreaSize(t),this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize())},_setTextAreaSize:function(t){this._labelRenderer.setDimensions(t),this._ignoreSize||(this._customSize=t),this._labelRendererAdaptDirty=!0},getTextAreaSize:function(){return this._labelRenderer.getDimensions()},setTextHorizontalAlignment:function(t){this._setTextHorizontalAlignment(t),this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize())},_setTextHorizontalAlignment:function(t){this._labelRenderer.setHorizontalAlignment(t),this._labelRendererAdaptDirty=!0},getTextHorizontalAlignment:function(){return this._labelRenderer.getHorizontalAlignment()},setTextVerticalAlignment:function(t){this._setTextVerticalAlignment(t),this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize())},_setTextVerticalAlignment:function(t){this._labelRenderer.setVerticalAlignment(t),this._labelRendererAdaptDirty=!0},getTextVerticalAlignment:function(){return this._labelRenderer.getVerticalAlignment()},setTouchScaleChangeEnabled:function(t){this._touchScaleChangeEnabled=t},isTouchScaleChangeEnabled:function(){return this._touchScaleChangeEnabled},_onPressStateChangedToNormal:function(){this._touchScaleChangeEnabled&&(this._labelRenderer.setScaleX(this._normalScaleValueX),this._labelRenderer.setScaleY(this._normalScaleValueY))},_onPressStateChangedToPressed:function(){this._touchScaleChangeEnabled&&(this._labelRenderer.setScaleX(this._normalScaleValueX+this._onSelectedScaleOffset),this._labelRenderer.setScaleY(this._normalScaleValueY+this._onSelectedScaleOffset))},_onPressStateChangedToDisabled:function(){},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._labelRendererAdaptDirty=!0},_adaptRenderers:function(){this._labelRendererAdaptDirty&&(this._labelScaleChangedWithSize(),this._labelRendererAdaptDirty=!1)},getVirtualRendererSize:function(){return this._labelRenderer.getContentSize()},getVirtualRenderer:function(){return this._labelRenderer},getAutoRenderSize:function(){var t=this._labelRenderer.getContentSize();return this._ignoreSize||(this._labelRenderer.setDimensions(0,0),t=this._labelRenderer.getContentSize(),this._labelRenderer.setDimensions(this._contentSize.width,this._contentSize.height)),t},_labelScaleChangedWithSize:function(){var t=this._contentSize;if(this._ignoreSize)this._labelRenderer.setScale(1),this._normalScaleValueX=this._normalScaleValueY=1;else{if(this._labelRenderer.setDimensions(cc.size(t.width,t.height)),0>=(i=this._labelRenderer.getContentSize()).width||0>=i.height)return void this._labelRenderer.setScale(1);var e=t.width/i.width,i=t.height/i.height;this._labelRenderer.setScaleX(e),this._labelRenderer.setScaleY(i),this._normalScaleValueX=e,this._normalScaleValueY=i}this._labelRenderer.setPosition(t.width/2,t.height/2)},getDescription:function(){return"Label"},enableShadow:function(t,e,i){this._labelRenderer.enableShadow(t,e,i)},enableOutline:function(t,e){this._labelRenderer.enableStroke(t,e)},enableGlow:function(t){this._type===ccui.Text.Type.TTF&&this._labelRenderer.enableGlow(t)},disableEffect:function(){this._labelRenderer.disableEffect&&this._labelRenderer.disableEffect()},_createCloneInstance:function(){return new ccui.Text},_copySpecialProperties:function(t){t instanceof ccui.Text&&(this.setFontName(t._fontName),this.setFontSize(t.getFontSize()),this.setString(t.getString()),this.setTouchScaleChangeEnabled(t.touchScaleEnabled),this.setTextAreaSize(t._textAreaSize),this.setTextHorizontalAlignment(t._labelRenderer.getHorizontalAlignment()),this.setTextVerticalAlignment(t._labelRenderer.getVerticalAlignment()),this.setContentSize(t.getContentSize()),this.setTextColor(t.getTextColor()))},_setBoundingWidth:function(t){this._textAreaSize.width=t,this._labelRenderer._setBoundingWidth(t),this._labelScaleChangedWithSize()},_setBoundingHeight:function(t){this._textAreaSize.height=t,this._labelRenderer._setBoundingHeight(t),this._labelScaleChangedWithSize()},_getBoundingWidth:function(){return this._textAreaSize.width},_getBoundingHeight:function(){return this._textAreaSize.height},_changePosition:function(){this._adaptRenderers()},setColor:function(t){cc.ProtectedNode.prototype.setColor.call(this,t),this._labelRenderer.setColor(t)},setTextColor:function(t){this._labelRenderer.setFontFillColor(t)},getTextColor:function(){return this._labelRenderer._getFillStyle()}}),_p=ccui.Text.prototype,cc.defineGetterSetter(_p,"boundingWidth",_p._getBoundingWidth,_p._setBoundingWidth),cc.defineGetterSetter(_p,"boundingHeight",_p._getBoundingHeight,_p._setBoundingHeight),cc.defineGetterSetter(_p,"string",_p.getString,_p.setString),cc.defineGetterSetter(_p,"stringLength",_p.getStringLength),cc.defineGetterSetter(_p,"font",_p._getFont,_p._setFont),cc.defineGetterSetter(_p,"fontSize",_p.getFontSize,_p.setFontSize),cc.defineGetterSetter(_p,"fontName",_p.getFontName,_p.setFontName),cc.defineGetterSetter(_p,"textAlign",_p.getTextHorizontalAlignment,_p.setTextHorizontalAlignment),cc.defineGetterSetter(_p,"verticalAlign",_p.getTextVerticalAlignment,_p.setTextVerticalAlignment),_p=null,ccui.Label=ccui.Text.create=function(t,e,i){return new ccui.Text(t,e,i)},ccui.Text.RENDERER_ZORDER=-1,ccui.Text.Type={SYSTEM:0,TTF:1},ccui.TextAtlas=ccui.Widget.extend({_labelAtlasRenderer:null,_stringValue:"",_charMapFileName:"",_itemWidth:0,_itemHeight:0,_startCharMap:"",_className:"TextAtlas",_labelAtlasRendererAdaptDirty:null,ctor:function(t,e,i,n,s){ccui.Widget.prototype.ctor.call(this),void 0!==s&&this.setProperty(t,e,i,n,s)},_initRenderer:function(){this._labelAtlasRenderer=new cc.LabelAtlas,this._labelAtlasRenderer.setAnchorPoint(cc.p(.5,.5)),this.addProtectedChild(this._labelAtlasRenderer,ccui.TextAtlas.RENDERER_ZORDER,-1),this._labelAtlasRenderer.addEventListener("load",(function(){this._updateContentSizeWithTextureSize(this._labelAtlasRenderer.getContentSize()),this._findLayout()}),this)},setProperty:function(t,e,i,n,s){this._stringValue=t,this._charMapFileName=e,this._itemWidth=i,this._itemHeight=n,this._startCharMap=s,this._labelAtlasRenderer.initWithString(t,this._charMapFileName,this._itemWidth,this._itemHeight,this._startCharMap[0]),this._updateContentSizeWithTextureSize(this._labelAtlasRenderer.getContentSize()),this._labelAtlasRendererAdaptDirty=!0},setString:function(t){t!==this._labelAtlasRenderer.getString()&&(this._stringValue=t,this._labelAtlasRenderer.setString(t),this._updateContentSizeWithTextureSize(this._labelAtlasRenderer.getContentSize()),this._labelAtlasRendererAdaptDirty=!0)},setStringValue:function(t){cc.log("Please use the setString"),this.setString(t)},getStringValue:function(){return cc.log("Please use the getString"),this.getString()},getString:function(){return this._labelAtlasRenderer.getString()},getStringLength:function(){return this._labelAtlasRenderer.getStringLength()},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._labelAtlasRendererAdaptDirty=!0},_adaptRenderers:function(){this._labelAtlasRendererAdaptDirty&&(this._labelAtlasScaleChangedWithSize(),this._labelAtlasRendererAdaptDirty=!1)},getVirtualRendererSize:function(){return this._labelAtlasRenderer.getContentSize()},getVirtualRenderer:function(){return this._labelAtlasRenderer},_labelAtlasScaleChangedWithSize:function(){var t=this._labelAtlasRenderer;if(this._ignoreSize)t.setScale(1);else{var e=t.getContentSize();if(0>=e.width||0>=e.height)return void t.setScale(1);t.setScaleX(this._contentSize.width/e.width),t.setScaleY(this._contentSize.height/e.height)}t.setPosition(this._contentSize.width/2,this._contentSize.height/2)},getDescription:function(){return"LabelAtlas"},_copySpecialProperties:function(t){t&&this.setProperty(t._stringValue,t._charMapFileName,t._itemWidth,t._itemHeight,t._startCharMap)},_createCloneInstance:function(){return new ccui.TextAtlas}}),_p=ccui.TextAtlas.prototype,cc.defineGetterSetter(_p,"string",_p.getString,_p.setString),_p=null,ccui.TextAtlas.create=function(t,e,i,n,s){return new ccui.TextAtlas(t,e,i,n,s)},ccui.TextAtlas.RENDERER_ZORDER=-1,ccui.LabelBMFont=ccui.TextBMFont=ccui.Widget.extend({_labelBMFontRenderer:null,_fntFileHasInit:!1,_fntFileName:"",_stringValue:"",_className:"TextBMFont",_labelBMFontRendererAdaptDirty:!0,ctor:function(t,e){ccui.Widget.prototype.ctor.call(this),this._loader=new cc.Sprite.LoadManager,void 0!==e&&(this.setFntFile(e),this.setString(t))},_initRenderer:function(){this._labelBMFontRenderer=new cc.LabelBMFont,this.addProtectedChild(this._labelBMFontRenderer,ccui.TextBMFont.RENDERER_ZORDER,-1)},setFntFile:function(t){if(t){this._fntFileName=t,this._fntFileHasInit=!0,this._labelBMFontRenderer.initWithString(this._stringValue,t),this._updateContentSizeWithTextureSize(this._labelBMFontRenderer.getContentSize()),this._labelBMFontRendererAdaptDirty=!0;var e=this;(t=e._labelBMFontRenderer)._textureLoaded||t.addEventListener("load",(function(){e.setFntFile(e._fntFileName)}))}},setText:function(t){cc.log("Please use the setString"),this.setString(t)},setString:function(t){this._loader.clear(),this._labelBMFontRenderer._textureLoaded?t!==this._labelBMFontRenderer.getString()&&(this._stringValue=t,this._labelBMFontRenderer.setString(t),this._fntFileHasInit&&(this._updateContentSizeWithTextureSize(this._labelBMFontRenderer.getContentSize()),this._labelBMFontRendererAdaptDirty=!0)):this._loader.add(this._labelBMFontRenderer,(function(){this.setString(t)}),this)},getString:function(){return this._stringValue},getStringLength:function(){return this._labelBMFontRenderer.getStringLength()},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._labelBMFontRendererAdaptDirty=!0},_adaptRenderers:function(){this._labelBMFontRendererAdaptDirty&&(this._labelBMFontScaleChangedWithSize(),this._labelBMFontRendererAdaptDirty=!1)},getVirtualRendererSize:function(){return this._labelBMFontRenderer.getContentSize()},getVirtualRenderer:function(){return this._labelBMFontRenderer},_labelBMFontScaleChangedWithSize:function(){var t=this._labelBMFontRenderer;if(this._ignoreSize)t.setScale(1);else{var e=t.getContentSize();if(0>=e.width||0>=e.height)return void t.setScale(1);t.setScaleX(this._contentSize.width/e.width),t.setScaleY(this._contentSize.height/e.height)}t.setPosition(this._contentSize.width/2,this._contentSize.height/2)},getDescription:function(){return"TextBMFont"},_createCloneInstance:function(){return new ccui.TextBMFont},_copySpecialProperties:function(t){this.setFntFile(t._fntFileName),this.setString(t._stringValue)}}),_p=ccui.TextBMFont.prototype,cc.defineGetterSetter(_p,"string",_p.getString,_p.setString),_p=null,ccui.TextBMFont.create=function(t,e){return new ccui.TextBMFont(t,e)},ccui.TextBMFont.RENDERER_ZORDER=-1,ccui._TextFieldRenderer=cc.TextFieldTTF.extend({_maxLengthEnabled:!1,_maxLength:0,_passwordEnabled:!1,_passwordStyleText:"",_attachWithIME:!1,_detachWithIME:!1,_insertText:!1,_deleteBackward:!1,_className:"_TextFieldRenderer",ctor:function(){cc.TextFieldTTF.prototype.ctor.call(this),this._maxLengthEnabled=!1,this._maxLength=0,this._passwordEnabled=!1,this._passwordStyleText="*",this._deleteBackward=this._insertText=this._detachWithIME=this._attachWithIME=!1},onEnter:function(){cc.TextFieldTTF.prototype.onEnter.call(this),cc.TextFieldTTF.prototype.setDelegate.call(this,this)},onTextFieldAttachWithIME:function(t){return this.setAttachWithIME(!0),!1},onTextFieldInsertText:function(t,e,i){return(1!==i||"\n"!==e)&&(this.setInsertText(!0),this._maxLengthEnabled&&cc.TextFieldTTF.prototype.getCharCount.call(this)>=this._maxLength)},onTextFieldDeleteBackward:function(t,e,i){return this.setDeleteBackward(!0),!1},onTextFieldDetachWithIME:function(t){return this.setDetachWithIME(!0),!1},insertText:function(t,e){"\n"!==t&&this._maxLengthEnabled&&this.getString().length>=this._maxLength?this._passwordEnabled&&this.setPasswordText(this.getString()):(cc.TextFieldTTF.prototype.insertText.call(this,t,e),this._passwordEnabled&&0<cc.TextFieldTTF.prototype.getCharCount.call(this)&&this.setPasswordText(this.getString()))},deleteBackward:function(){cc.TextFieldTTF.prototype.deleteBackward.call(this),0<cc.TextFieldTTF.prototype.getCharCount.call(this)&&this._passwordEnabled&&this.setPasswordText(this._inputText)},openIME:function(){cc.TextFieldTTF.prototype.attachWithIME.call(this)},closeIME:function(){cc.TextFieldTTF.prototype.detachWithIME.call(this)},setMaxLengthEnabled:function(t){this._maxLengthEnabled=t},isMaxLengthEnabled:function(){return this._maxLengthEnabled},setMaxLength:function(t){this._maxLength=t},getMaxLength:function(){return this._maxLength},getCharCount:function(){return cc.TextFieldTTF.prototype.getCharCount.call(this)},setPasswordEnabled:function(t){this._passwordEnabled=t},isPasswordEnabled:function(){return this._passwordEnabled},setPasswordStyleText:function(t){if(!(1<t.length)){var e=t.charCodeAt(0);33>e||126<e||(this._passwordStyleText=t)}},setPasswordText:function(t){var e="",i=t.length;for(t=i,this._maxLengthEnabled&&i>this._maxLength&&(t=this._maxLength),i=0;i<t;++i)e+=this._passwordStyleText;cc.LabelTTF.prototype.setString.call(this,e)},setAttachWithIME:function(t){this._attachWithIME=t},getAttachWithIME:function(){return this._attachWithIME},setDetachWithIME:function(t){this._detachWithIME=t},getDetachWithIME:function(){return this._detachWithIME},setInsertText:function(t){this._insertText=t},getInsertText:function(){return this._insertText},setDeleteBackward:function(t){this._deleteBackward=t},getDeleteBackward:function(){return this._deleteBackward},onDraw:function(t){return!1}}),ccui._TextFieldRenderer.create=function(t,e,i){var n=new ccui._TextFieldRenderer;return n&&n.initWithString("",e,i)?(t&&n.setPlaceHolder(t),n):null},ccui.TextField=ccui.Widget.extend({_textFieldRenderer:null,_touchWidth:0,_touchHeight:0,_useTouchArea:!1,_textFieldEventListener:null,_textFieldEventSelector:null,_passwordStyleText:"",_textFieldRendererAdaptDirty:!0,_fontName:"",_fontSize:12,_ccEventCallback:null,ctor:function(t,e,i){ccui.Widget.prototype.ctor.call(this),this.setTouchEnabled(!0),e&&this.setFontName(e),i&&this.setFontSize(i),t&&this.setPlaceHolder(t)},onEnter:function(){ccui.Widget.prototype.onEnter.call(this),this.scheduleUpdate()},_initRenderer:function(){this._textFieldRenderer=ccui._TextFieldRenderer.create("input words here","Thonburi",20),this.addProtectedChild(this._textFieldRenderer,ccui.TextField.RENDERER_ZORDER,-1)},setTouchSize:function(t){this._touchWidth=t.width,this._touchHeight=t.height},setTouchAreaEnabled:function(t){this._useTouchArea=t},hitTest:function(t){if(this._useTouchArea){t=this.convertToNodeSpace(t);var e=cc.rect(-this._touchWidth*this._anchorPoint.x,-this._touchHeight*this._anchorPoint.y,this._touchWidth,this._touchHeight);return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height}return ccui.Widget.prototype.hitTest.call(this,t)},getTouchSize:function(){return cc.size(this._touchWidth,this._touchHeight)},setText:function(t){cc.log("Please use the setString"),this.setString(t)},setString:function(t){null!=t&&(t=String(t),this.isMaxLengthEnabled()&&(t=t.substr(0,this.getMaxLength())),this.isPasswordEnabled()?(this._textFieldRenderer.setPasswordText(t),this._textFieldRenderer.setString(""),this._textFieldRenderer.insertText(t,t.length)):this._textFieldRenderer.setString(t),this._textFieldRendererAdaptDirty=!0,this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize()))},setPlaceHolder:function(t){this._textFieldRenderer.setPlaceHolder(t),this._textFieldRendererAdaptDirty=!0,this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize())},getPlaceHolder:function(){return this._textFieldRenderer.getPlaceHolder()},getPlaceHolderColor:function(){return this._textFieldRenderer.getPlaceHolderColor()},setPlaceHolderColor:function(t){this._textFieldRenderer.setColorSpaceHolder(t)},setTextColor:function(t){this._textFieldRenderer.setTextColor(t)},setFontSize:function(t){this._textFieldRenderer.setFontSize(t),this._fontSize=t,this._textFieldRendererAdaptDirty=!0,this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize())},getFontSize:function(){return this._fontSize},setFontName:function(t){this._textFieldRenderer.setFontName(t),this._fontName=t,this._textFieldRendererAdaptDirty=!0,this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize())},getFontName:function(){return this._fontName},didNotSelectSelf:function(){this._textFieldRenderer.detachWithIME()},getStringValue:function(){return cc.log("Please use the getString"),this.getString()},getString:function(){return this._textFieldRenderer.getString()},getStringLength:function(){return this._textFieldRenderer.getStringLength()},onTouchBegan:function(t,e){var i=this,n=ccui.Widget.prototype.onTouchBegan.call(i,t,e);return i._hit?setTimeout((function(){i._textFieldRenderer.attachWithIME()}),0):setTimeout((function(){i._textFieldRenderer.detachWithIME()}),0),n},setMaxLengthEnabled:function(t){this._textFieldRenderer.setMaxLengthEnabled(t)},isMaxLengthEnabled:function(){return this._textFieldRenderer.isMaxLengthEnabled()},setMaxLength:function(t){this._textFieldRenderer.setMaxLength(t),this.setString(this.getString())},getMaxLength:function(){return this._textFieldRenderer.getMaxLength()},setPasswordEnabled:function(t){this._textFieldRenderer.setPasswordEnabled(t)},isPasswordEnabled:function(){return this._textFieldRenderer.isPasswordEnabled()},setPasswordStyleText:function(t){this._textFieldRenderer.setPasswordStyleText(t),this._passwordStyleText=t,this.setString(this.getString())},getPasswordStyleText:function(){return this._passwordStyleText},update:function(t){this.getDetachWithIME()&&(this._detachWithIMEEvent(),this.setDetachWithIME(!1)),this.getAttachWithIME()&&(this._attachWithIMEEvent(),this.setAttachWithIME(!1)),this.getInsertText()&&(this._textFieldRendererAdaptDirty=!0,this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize()),this._insertTextEvent(),this.setInsertText(!1)),this.getDeleteBackward()&&(this._textFieldRendererAdaptDirty=!0,this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize()),this._deleteBackwardEvent(),this.setDeleteBackward(!1))},getAttachWithIME:function(){return this._textFieldRenderer.getAttachWithIME()},setAttachWithIME:function(t){this._textFieldRenderer.setAttachWithIME(t)},getDetachWithIME:function(){return this._textFieldRenderer.getDetachWithIME()},setDetachWithIME:function(t){this._textFieldRenderer.setDetachWithIME(t)},getInsertText:function(){return this._textFieldRenderer.getInsertText()},setInsertText:function(t){this._textFieldRenderer.setInsertText(t)},getDeleteBackward:function(){return this._textFieldRenderer.getDeleteBackward()},setDeleteBackward:function(t){this._textFieldRenderer.setDeleteBackward(t)},_attachWithIMEEvent:function(){this._textFieldEventSelector&&(this._textFieldEventListener?this._textFieldEventSelector.call(this._textFieldEventListener,this,ccui.TextField.EVENT_ATTACH_WITH_IME):this._textFieldEventSelector(this,ccui.TextField.EVENT_ATTACH_WITH_IME)),this._ccEventCallback&&this._ccEventCallback(this,ccui.TextField.EVENT_ATTACH_WITH_IME)},_detachWithIMEEvent:function(){this._textFieldEventSelector&&(this._textFieldEventListener?this._textFieldEventSelector.call(this._textFieldEventListener,this,ccui.TextField.EVENT_DETACH_WITH_IME):this._textFieldEventSelector(this,ccui.TextField.EVENT_DETACH_WITH_IME)),this._ccEventCallback&&this._ccEventCallback(this,ccui.TextField.EVENT_DETACH_WITH_IME)},_insertTextEvent:function(){this._textFieldEventSelector&&(this._textFieldEventListener?this._textFieldEventSelector.call(this._textFieldEventListener,this,ccui.TextField.EVENT_INSERT_TEXT):this._textFieldEventSelector(this,ccui.TextField.EVENT_INSERT_TEXT)),this._ccEventCallback&&this._ccEventCallback(this,ccui.TextField.EVENT_INSERT_TEXT)},_deleteBackwardEvent:function(){this._textFieldEventSelector&&(this._textFieldEventListener?this._textFieldEventSelector.call(this._textFieldEventListener,this,ccui.TextField.EVENT_DELETE_BACKWARD):this._textFieldEventSelector(this,ccui.TextField.EVENT_DELETE_BACKWARD)),this._ccEventCallback&&this._ccEventCallback(this,ccui.TextField.EVENT_DELETE_BACKWARD)},addEventListenerTextField:function(t,e){this.addEventListener(t,e)},addEventListener:function(t,e){this._textFieldEventSelector=t,this._textFieldEventListener=e},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._textFieldRendererAdaptDirty=!0},_adaptRenderers:function(){this._textFieldRendererAdaptDirty&&(this._textfieldRendererScaleChangedWithSize(),this._textFieldRendererAdaptDirty=!1)},_textfieldRendererScaleChangedWithSize:function(){this._ignoreSize||this._textFieldRenderer.setDimensions(this._contentSize),this._textFieldRenderer.setPosition(this._contentSize.width/2,this._contentSize.height/2)},getAutoRenderSize:function(){var t=this._textFieldRenderer.getContentSize();return this._ignoreSize||(this._textFieldRenderer.setDimensions(0,0),t=this._textFieldRenderer.getContentSize(),this._textFieldRenderer.setDimensions(this._contentSize.width,this._contentSize.height)),t},getVirtualRendererSize:function(){return this._textFieldRenderer.getContentSize()},getVirtualRenderer:function(){return this._textFieldRenderer},getDescription:function(){return"TextField"},attachWithIME:function(){this._textFieldRenderer.attachWithIME()},_createCloneInstance:function(){return new ccui.TextField},_copySpecialProperties:function(t){this.setString(t._textFieldRenderer.getString()),this.setPlaceHolder(t.getString()),this.setFontSize(t._textFieldRenderer.getFontSize()),this.setFontName(t._textFieldRenderer.getFontName()),this.setMaxLengthEnabled(t.isMaxLengthEnabled()),this.setMaxLength(t.getMaxLength()),this.setPasswordEnabled(t.isPasswordEnabled()),this.setPasswordStyleText(t._passwordStyleText),this.setAttachWithIME(t.getAttachWithIME()),this.setDetachWithIME(t.getDetachWithIME()),this.setInsertText(t.getInsertText()),this.setDeleteBackward(t.getDeleteBackward()),this._ccEventCallback=t._ccEventCallback,this._textFieldEventListener=t._textFieldEventListener,this._textFieldEventSelector=t._textFieldEventSelector},setTextAreaSize:function(t){this.setContentSize(t)},setTextHorizontalAlignment:function(t){this._textFieldRenderer.setHorizontalAlignment(t)},setTextVerticalAlignment:function(t){this._textFieldRenderer.setVerticalAlignment(t)},_setFont:function(t){this._textFieldRenderer._setFont(t),this._textFieldRendererAdaptDirty=!0},_getFont:function(){return this._textFieldRenderer._getFont()},_changePosition:function(){this._adaptRenderers()}}),ccui.TextField.create=function(t,e,i){return new ccui.TextField(t,e,i)},_p=ccui.TextField.prototype,cc.defineGetterSetter(_p,"string",_p.getString,_p.setString),cc.defineGetterSetter(_p,"placeHolder",_p.getPlaceHolder,_p.setPlaceHolder),cc.defineGetterSetter(_p,"font",_p._getFont,_p._setFont),cc.defineGetterSetter(_p,"fontSize",_p.getFontSize,_p.setFontSize),cc.defineGetterSetter(_p,"fontName",_p.getFontName,_p.setFontName),cc.defineGetterSetter(_p,"maxLengthEnabled",_p.isMaxLengthEnabled,_p.setMaxLengthEnabled),cc.defineGetterSetter(_p,"maxLength",_p.getMaxLength,_p.setMaxLength),cc.defineGetterSetter(_p,"passwordEnabled",_p.isPasswordEnabled,_p.setPasswordEnabled),_p=null,ccui.TextField.EVENT_ATTACH_WITH_IME=0,ccui.TextField.EVENT_DETACH_WITH_IME=1,ccui.TextField.EVENT_INSERT_TEXT=2,ccui.TextField.EVENT_DELETE_BACKWARD=3,ccui.TextField.RENDERER_ZORDER=-1,ccui.VideoPlayer=ccui.Widget.extend({_played:!1,_playing:!1,_stopped:!0,ctor:function(t){ccui.Widget.prototype.ctor.call(this),this._EventList={},t&&this.setURL(t)},_createRenderCmd:function(){return new ccui.VideoPlayer.RenderCmd(this)},visit:function(){var t=this._renderCmd,e=cc.container,i=cc.eventManager;if(this._visible)e.appendChild(t._video),null===this._listener&&(this._listener=cc.eventManager.addCustomListener(cc.game.EVENT_RESIZE,(function(){t.resize()})));else{("contains"in e?e.contains(t._video):e.compareDocumentPosition(t._video)%16)&&e.removeChild(t._video),i.removeListener(t._listener),t._listener=null}t.updateStatus(),t.resize()},setURL:function(t){this._renderCmd.updateURL(t)},getURL:function(){return this._renderCmd._url},play:function(){var t=this,e=this._renderCmd._video;e&&(this._played=!0,e.pause(),!1===this._stopped&&!1===this._playing&&!0===this._played||(e.currentTime=0),ccui.VideoPlayer._polyfill.autoplayAfterOperation?setTimeout((function(){e.play(),t._playing=!0,t._stopped=!1}),20):(e.play(),this._playing=!0,this._stopped=!1))},pause:function(){var t=this._renderCmd._video;t&&!0===this._playing&&!1===this._stopped&&(t.pause(),this._playing=!1)},resume:function(){!1===this._stopped&&!1===this._playing&&!0===this._played&&this.play()},stop:function(){var t=this,e=this._renderCmd._video;e&&(e.pause(),e.currentTime=0,this._playing=!1,this._stopped=!0),setTimeout((function(){t._dispatchEvent(ccui.VideoPlayer.EventType.STOPPED)}),0)},seekTo:function(t){var e=this._renderCmd._video;e&&(e.currentTime=t,ccui.VideoPlayer._polyfill.autoplayAfterOperation&&this.isPlaying()&&setTimeout((function(){e.play()}),20))},isPlaying:function(){return ccui.VideoPlayer._polyfill.autoplayAfterOperation&&this._playing&&setTimeout((function(){video.play()}),20),this._playing},setKeepAspectRatioEnabled:function(t){cc.log("On the web is always keep the aspect ratio")},isKeepAspectRatioEnabled:function(){return!1},setFullScreenEnabled:function(t){var e=this._renderCmd._video;e&&(t?cc.screen.requestFullScreen(e):cc.screen.exitFullScreen(e))},isFullScreenEnabled:function(){cc.log("Can't know status")},setEventListener:function(t,e){this._EventList[t]=e},removeEventListener:function(t){this._EventList[t]=null},_dispatchEvent:function(t){(t=this._EventList[t])&&t.call(this,this,this._renderCmd._video.src)},onPlayEvent:function(){var t=this._EventList[ccui.VideoPlayer.EventType.PLAYING];if(t)for(var e=0;e<t.length;e++)t[e].call(this,this,this._renderCmd._video.src)},setContentSize:function(t,e){ccui.Widget.prototype.setContentSize.call(this,t,e),void 0===e&&(e=t.height,t=t.width),this._renderCmd.changeSize(t,e)},cleanup:function(){this._renderCmd.removeDom(),this.stopAllActions(),this.unscheduleAllCallbacks()},onEnter:function(){ccui.Widget.prototype.onEnter.call(this);var t=ccui.VideoPlayer.elements;-1===t.indexOf(this)&&t.push(this)},onExit:function(){ccui.Widget.prototype.onExit.call(this);var t=ccui.VideoPlayer.elements,e=t.indexOf(this);-1!==e&&t.splice(e,1)}}),ccui.VideoPlayer.elements=[],ccui.VideoPlayer.pauseElements=[],cc.eventManager.addCustomListener(cc.game.EVENT_HIDE,(function(){for(var t,e=ccui.VideoPlayer.elements,i=0;i<e.length;i++)t=e[i],e[i]._playing&&(t.pause(),ccui.VideoPlayer.pauseElements.push(t))})),cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,(function(){for(var t=ccui.VideoPlayer.pauseElements,e=t.pop();e;)e.play(),e=t.pop()})),ccui.VideoPlayer.EventType={PLAYING:"play",PAUSED:"pause",STOPPED:"stop",COMPLETED:"complete"},function(t){t._polyfill={devicePixelRatio:!1,event:"canplay",canPlayType:[]};var e=document.createElement("video");e.canPlayType("video/ogg")&&(t._polyfill.canPlayType.push(".ogg"),t._polyfill.canPlayType.push(".ogv")),e.canPlayType("video/mp4")&&t._polyfill.canPlayType.push(".mp4"),e.canPlayType("video/webm")&&t._polyfill.canPlayType.push(".webm"),cc.sys.OS_IOS===cc.sys.os&&(t._polyfill.devicePixelRatio=!0,t._polyfill.event="progress"),cc.sys.browserType===cc.sys.BROWSER_TYPE_FIREFOX&&(t._polyfill.autoplayAfterOperation=!0),(t=document.createElement("style")).innerHTML=".cocosVideo:-moz-full-screen{transform:matrix(1,0,0,1,0,0) !important;}.cocosVideo:full-screen{transform:matrix(1,0,0,1,0,0) !important;}.cocosVideo:-webkit-full-screen{transform:matrix(1,0,0,1,0,0) !important;}",document.head.appendChild(t)}(ccui.VideoPlayer),function(t){var e=null;e=cc._renderType===cc.game.RENDER_TYPE_WEBGL?cc.Node.WebGLRenderCmd:cc.Node.CanvasRenderCmd;ccui.VideoPlayer.RenderCmd=function(t){this._rootCtor(t),this._listener=null,this._url="",this.initStyle()},(e=ccui.VideoPlayer.RenderCmd.prototype=Object.create(e.prototype)).constructor=ccui.VideoPlayer.RenderCmd,e.transform=function(t,e){this.originTransform(t,e),this.updateMatrix(this._worldTransform,cc.view._scaleX,cc.view._scaleY)},e.updateStatus=function(){t.devicePixelRatio=cc.view.isRetinaEnabled();var e=cc.Node._dirtyFlags,i=this._dirtyFlag;i&e.transformDirty&&(this.transform(this.getParentRenderCmd(),!0),this.updateMatrix(this._worldTransform,cc.view._scaleX,cc.view._scaleY),this._dirtyFlag^=this._dirtyFlag&cc.Node._dirtyFlags.transformDirty),i&e.orderDirty&&(this._dirtyFlag^=this._dirtyFlag&e.orderDirty)},e.resize=function(t){t=t||cc.view;var e=this._node,i=cc.eventManager;e._parent&&e._visible?this.updateMatrix(this._worldTransform,t._scaleX,t._scaleY):(i.removeListener(this._listener),this._listener=null)},e.updateMatrix=function(e,i,n){var s=this._node;t.devicePixelRatio&&(i/=o=cc.view.getDevicePixelRatio(),n/=o);if(!1!==this._loaded){var r=cc.game.container.style,o=parseInt(r.paddingLeft),a=(r=parseInt(r.paddingBottom),s._contentSize.width),c=s._contentSize.height;e="matrix("+e.a*i+","+e.b+","+e.c+","+e.d*n+","+(o+e.tx*i-a/2+a*s._scaleX/2*i)+","+-(r+e.ty*n-c/2+c*s._scaleY/2*n)+")",this._video.style.transform=e,this._video.style["-webkit-transform"]=e}},e.updateURL=function(e){var i,n,s,r=this._node;if(this._url!=e){this._url=e,cc.loader.resPath&&!/^http/.test(e)&&(e=cc.path.join(cc.loader.resPath,e)),i=!1,(i="contains"in(s=cc.container)?s.contains(this._video):s.compareDocumentPosition(this._video)%16)&&s.removeChild(this._video),n=this._video=document.createElement("video"),this.bindEvent();var o=this,a=function(){1!=o._loaded&&(o._loaded=!0,o.changeSize(),o.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),n.removeEventListener(t.event,a),n.currentTime=0,n.style.visibility="visible",n.play(),r._played||(n.pause(),n.currentTime=0))};n.addEventListener(t.event,a),n.preload="metadata",n.style.visibility="hidden",this._loaded=!1,r._played=!1,r._playing=!1,r._stopped=!0,this.initStyle(),this._node.visit(),(i=document.createElement("source")).src=e,n.appendChild(i),s=cc.path.extname(e);for(var c=0;c<t.canPlayType.length;c++)s!==t.canPlayType[c]&&((i=document.createElement("source")).src=e.replace(s,t.canPlayType[c]),n.appendChild(i))}},e.bindEvent=function(){var t=this,e=this._node,i=this._video;i.addEventListener("ended",(function(){e._renderCmd.updateMatrix(t._worldTransform,cc.view._scaleX,cc.view._scaleY),e._playing=!1,e._dispatchEvent(ccui.VideoPlayer.EventType.COMPLETED)})),i.addEventListener("play",(function(){e._dispatchEvent(ccui.VideoPlayer.EventType.PLAYING)})),i.addEventListener("pause",(function(){e._dispatchEvent(ccui.VideoPlayer.EventType.PAUSED)}))},e.initStyle=function(){if(this._video){var t=this._video;t.style.position="absolute",t.style.bottom="0px",t.style.left="0px",t.className="cocosVideo"}},e.changeSize=function(t,e){var i=this._node._contentSize;t=t||i.width,e=e||i.height,(i=this._video)&&(0!==t&&(i.width=t),0!==e&&(i.height=e))},e.removeDom=function(){var t=this._video;if(t){("contains"in cc.container?cc.container.contains(t):cc.container.compareDocumentPosition(t)%16)&&cc.container.removeChild(t)}}}(ccui.VideoPlayer._polyfill),ccui.RichElement=ccui.Class.extend({_type:0,_tag:0,_color:null,_opacity:0,ctor:function(t,e,i){this._type=0,this._tag=t||0,this._color=cc.color(255,255,255,255),e&&(this._color.r=e.r,this._color.g=e.g,this._color.b=e.b),this._opacity=i||0,this._color.a=void 0===i?e.a:i}}),ccui.RichElementText=ccui.RichElement.extend({_text:"",_fontName:"",_fontSize:0,_fontDefinition:null,ctor:function(t,e,i,n,s,r){var o=e;e&&e instanceof cc.FontDefinition&&(o=e.fillStyle,s=e.fontName,r=e.fontSize,this._fontDefinition=e),ccui.RichElement.prototype.ctor.call(this,t,o,i),this._type=ccui.RichElement.TEXT,this._text=n,this._fontName=s,this._fontSize=r}}),ccui.RichElementText.create=function(t,e,i,n,s,r){return new ccui.RichElementText(t,e,i,n,s,r)},ccui.RichElementImage=ccui.RichElement.extend({_filePath:"",_textureRect:null,_textureType:0,ctor:function(t,e,i,n){ccui.RichElement.prototype.ctor.call(this,t,e,i),this._type=ccui.RichElement.IMAGE,this._filePath=n||"",this._textureRect=cc.rect(0,0,0,0),this._textureType=0}}),ccui.RichElementImage.create=function(t,e,i,n){return new ccui.RichElementImage(t,e,i,n)},ccui.RichElementCustomNode=ccui.RichElement.extend({_customNode:null,ctor:function(t,e,i,n){ccui.RichElement.prototype.ctor.call(this,t,e,i),this._type=ccui.RichElement.CUSTOM,this._customNode=n||null}}),ccui.RichElementCustomNode.create=function(t,e,i,n){return new ccui.RichElementCustomNode(t,e,i,n)},ccui.RichText=ccui.Widget.extend({_formatTextDirty:!1,_richElements:null,_elementRenders:null,_leftSpaceWidth:0,_verticalSpace:0,_elementRenderersContainer:null,_lineBreakOnSpace:!1,_textHorizontalAlignment:null,_textVerticalAlignment:null,ctor:function(){ccui.Widget.prototype.ctor.call(this),this._formatTextDirty=!1,this._richElements=[],this._elementRenders=[],this._verticalSpace=this._leftSpaceWidth=0,this._textHorizontalAlignment=cc.TEXT_ALIGNMENT_LEFT,this._textVerticalAlignment=cc.VERTICAL_TEXT_ALIGNMENT_TOP},_initRenderer:function(){this._elementRenderersContainer=new cc.Node,this._elementRenderersContainer.setAnchorPoint(.5,.5),this.addProtectedChild(this._elementRenderersContainer,0,-1)},insertElement:function(t,e){this._richElements.splice(e,0,t),this._formatTextDirty=!0},pushBackElement:function(t){this._richElements.push(t),this._formatTextDirty=!0},removeElement:function(t){cc.isNumber(t)?this._richElements.splice(t,1):cc.arrayRemoveObject(this._richElements,t),this._formatTextDirty=!0},formatText:function(){if(this._formatTextDirty){this._elementRenderersContainer.removeAllChildren(),this._elementRenders.length=0;var t,e,i=this._richElements;if(this._ignoreSize)for(this._addNewLine(),t=0;t<i.length;t++){var n=null;switch((e=i[t])._type){case ccui.RichElement.TEXT:n=e._fontDefinition?new cc.LabelTTF(e._text,e._fontDefinition):new cc.LabelTTF(e._text,e._fontName,e._fontSize);break;case ccui.RichElement.IMAGE:n=new cc.Sprite(e._filePath);break;case ccui.RichElement.CUSTOM:n=e._customNode}n.setColor(e._color),n.setOpacity(e._color.a),this._pushToContainer(n)}else for(this._addNewLine(),t=0;t<i.length;t++)switch(e=i[t],e._type){case ccui.RichElement.TEXT:e._fontDefinition?this._handleTextRenderer(e._text,e._fontDefinition,e._fontDefinition.fontSize,e._fontDefinition.fillStyle):this._handleTextRenderer(e._text,e._fontName,e._fontSize,e._color);break;case ccui.RichElement.IMAGE:this._handleImageRenderer(e._filePath,e._color,e._color.a);break;case ccui.RichElement.CUSTOM:this._handleCustomRenderer(e._customNode)}this.formatRenderers(),this._formatTextDirty=!1}},_handleTextRenderer:function(t,e,i,n){if(""!==t)if("\n"===t)this._addNewLine();else{var s=(r=e instanceof cc.FontDefinition?new cc.LabelTTF(t,e):new cc.LabelTTF(t,e,i)).getContentSize().width;if(this._leftSpaceWidth-=s,0>this._leftSpaceWidth){var r=t.length*(1- -this._leftSpaceWidth/s),o=(s=t.substr(0,r),t.substr(r,t.length-1)),a=0<r;this._lineBreakOnSpace&&(r=-1===(o=s.lastIndexOf(" "))?r:o+1,o=t.substr(r,t.length-1),a=0<r&&" "!==o),a&&(t=null,e instanceof cc.FontDefinition?(t=new cc.LabelTTF(s.substr(0,r),e)).setOpacity(e.fillStyle.a):((t=new cc.LabelTTF(s.substr(0,r),e,i)).setColor(n),t.setOpacity(n.a)),this._pushToContainer(t)),this._addNewLine(),this._handleTextRenderer(o,e,i,n)}else e instanceof cc.FontDefinition?r.setOpacity(e.fillStyle.a):(r.setColor(n),r.setOpacity(n.a)),this._pushToContainer(r)}},_handleImageRenderer:function(t,e,i){t=new cc.Sprite(t),this._handleCustomRenderer(t)},_handleCustomRenderer:function(t){var e=t.getContentSize();this._leftSpaceWidth-=e.width,0>this._leftSpaceWidth?(this._addNewLine(),this._pushToContainer(t),this._leftSpaceWidth-=e.width):this._pushToContainer(t)},_addNewLine:function(){this._leftSpaceWidth=this._customSize.width,this._elementRenders.push([])},formatRenderers:function(){var t,e,i,n,s,r,o=0,a=this._elementRenderersContainer,c=this._elementRenders;if(this._ignoreSize){for(t=0,i=c[0],e=n=0;e<i.length;e++)(s=i[e]).setAnchorPoint(cc.p(0,0)),s.setPosition(n,0),a.addChild(s,1,e),r=s.getLineHeight?s.getLineHeight():o,t+=(s=s.getContentSize()).width,o=Math.max(Math.min(o,r),s.height),n+=s.width;if(this._textHorizontalAlignment!==cc.TEXT_ALIGNMENT_LEFT)for(r=0,this._textHorizontalAlignment===cc.TEXT_ALIGNMENT_RIGHT?r=this._contentSize.width-n:this._textHorizontalAlignment===cc.TEXT_ALIGNMENT_CENTER&&(r=(this._contentSize.width-n)/2),e=0;e<i.length;e++)i[e].x+=r;a.setContentSize(t,o)}else{var h=[];for(t=0;t<c.length;t++){for(i=c[t],e=n=0;e<i.length;e++)r=(s=i[e]).getLineHeight?s.getLineHeight():s.getContentSize().height,n=Math.max(Math.min(s.getContentSize().height,r),n);h[t]=n,o+=h[t]}var l=this._customSize.height;for(t=0;t<c.length;t++){for(i=c[t],n=0,l-=h[t]+this._verticalSpace,e=0;e<i.length;e++)(s=i[e]).setAnchorPoint(cc.p(0,0)),s.setPosition(cc.p(n,l)),a.addChild(s,1),n+=s.getContentSize().width;if(this._textHorizontalAlignment!==cc.TEXT_ALIGNMENT_LEFT||this._textVerticalAlignment!==cc.VERTICAL_TEXT_ALIGNMENT_TOP)for(r=0,this._textHorizontalAlignment===cc.TEXT_ALIGNMENT_RIGHT?r=this._contentSize.width-n:this._textHorizontalAlignment===cc.TEXT_ALIGNMENT_CENTER&&(r=(this._contentSize.width-n)/2),n=0,this._textVerticalAlignment===cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM?n=this._customSize.height-o:this._textVerticalAlignment===cc.VERTICAL_TEXT_ALIGNMENT_CENTER&&(n=(this._customSize.height-o)/2),e=0;e<i.length;e++)(s=i[e]).x+=r,s.y-=n}a.setContentSize(this._contentSize)}for(o=c.length,t=0;t<o;t++)c[t].length=0;this._elementRenders.length=0,this.setContentSize(this._ignoreSize?this.getVirtualRendererSize():this._customSize),this._updateContentSizeWithTextureSize(this._contentSize),a.setPosition(.5*this._contentSize.width,.5*this._contentSize.height)},_pushToContainer:function(t){0>=this._elementRenders.length||this._elementRenders[this._elementRenders.length-1].push(t)},_adaptRenderers:function(){this.formatText()},setVerticalSpace:function(t){this._verticalSpace=t},setAnchorPoint:function(t){ccui.Widget.prototype.setAnchorPoint.call(this,t),this._elementRenderersContainer.setAnchorPoint(t)},_setAnchorX:function(t){ccui.Widget.prototype._setAnchorX.call(this,t),this._elementRenderersContainer._setAnchorX(t)},_setAnchorY:function(t){ccui.Widget.prototype._setAnchorY.call(this,t),this._elementRenderersContainer._setAnchorY(t)},getVirtualRendererSize:function(){return this._elementRenderersContainer.getContentSize()},ignoreContentAdaptWithSize:function(t){this._ignoreSize!==t&&(this._formatTextDirty=!0,ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this,t))},getContentSize:function(){return this.formatText(),cc.Node.prototype.getContentSize.call(this)},_getWidth:function(){return this.formatText(),cc.Node.prototype._getWidth.call(this)},_getHeight:function(){return this.formatText(),cc.Node.prototype._getHeight.call(this)},setContentSize:function(t,e){ccui.Widget.prototype.setContentSize.call(this,void 0===e?t.width:t,void 0===e?t.height:e),this._formatTextDirty=!0},getDescription:function(){return"RichText"},setCascadeOpacityEnabled:function(t){ccui.Widget.prototype.setCascadeOpacityEnabled.call(this,t),this._elementRenderersContainer.setCascadeOpacityEnabled(t)},setLineBreakOnSpace:function(t){this._lineBreakOnSpace=t,this._formatTextDirty=!0,this.formatText()},setTextHorizontalAlignment:function(t){t!==this._textHorizontalAlignment&&(this._textHorizontalAlignment=t,this.formatText())},setTextVerticalAlignment:function(t){t!==this._textVerticalAlignment&&(this._textVerticalAlignment=t,this.formatText())}}),ccui.RichText.create=function(){return new ccui.RichText},ccui.RichElement.TEXT=0,ccui.RichElement.IMAGE=1,ccui.RichElement.CUSTOM=2,ccui.WebView=ccui.Widget.extend({ctor:function(t){ccui.Widget.prototype.ctor.call(this),this._EventList={},t&&this.loadURL(t)},visit:function(){var t=this._renderCmd,e=t._div,i=cc.container,n=cc.eventManager;if(this._visible)i.appendChild(e),null===this._listener&&(this._listener=n.addCustomListener(cc.game.EVENT_RESIZE,(function(){t.resize()})));else{("contains"in i?i.contains(e):i.compareDocumentPosition(e)%16)&&i.removeChild(e),e=n._listenersMap[cc.game.EVENT_RESIZE].getFixedPriorityListeners(),n._removeListenerInVector(e,t._listener),t._listener=null}t.updateStatus(),t.resize(cc.view)},setJavascriptInterfaceScheme:function(t){},loadData:function(t,e,i,n){},loadHTMLString:function(t,e){},loadURL:function(t){this._renderCmd.updateURL(t),this._dispatchEvent(ccui.WebView.EventType.LOADING)},stopLoading:function(){cc.log("Web does not support loading")},reload:function(){var t=this._renderCmd._iframe;t&&(t=t.contentWindow)&&t.location&&t.location.reload()},canGoBack:function(){return cc.log("Web does not support query history"),!0},canGoForward:function(){return cc.log("Web does not support query history"),!0},goBack:function(){try{if(ccui.WebView._polyfill.closeHistory)return cc.log("The current browser does not support the GoBack");var t=this._renderCmd._iframe;if(t){var e=t.contentWindow;if(e&&e.location)try{e.history.back.call(e)}catch(t){e.history.back()}}}catch(t){cc.log(t)}},goForward:function(){try{if(ccui.WebView._polyfill.closeHistory)return cc.log("The current browser does not support the GoForward");var t=this._renderCmd._iframe;if(t){var e=t.contentWindow;if(e&&e.location)try{e.history.forward.call(e)}catch(t){e.history.forward()}}}catch(t){cc.log(t)}},evaluateJS:function(t){var e=this._renderCmd._iframe;if(e){e=e.contentWindow;try{e.eval(t),this._dispatchEvent(ccui.WebView.EventType.JS_EVALUATED)}catch(t){console.error(t)}}},setScalesPageToFit:function(){cc.log("Web does not support zoom")},setEventListener:function(t,e){this._EventList[t]=e},removeEventListener:function(t){this._EventList[t]=null},_dispatchEvent:function(t){(t=this._EventList[t])&&t.call(this,this,this._renderCmd._iframe.src)},_createRenderCmd:function(){return new ccui.WebView.RenderCmd(this)},setContentSize:function(t,e){ccui.Widget.prototype.setContentSize.call(this,t,e),void 0===e&&(e=t.height,t=t.width),this._renderCmd.changeSize(t,e)},cleanup:function(){this._renderCmd.removeDom(),this.stopAllActions(),this.unscheduleAllCallbacks()}}),ccui.WebView.EventType={LOADING:"loading",LOADED:"load",ERROR:"error",JS_EVALUATED:"js"},function(){var t=ccui.WebView._polyfill={devicePixelRatio:!1,enableDiv:!1};cc.sys.os===cc.sys.OS_IOS&&(t.enableDiv=!0),cc.sys.isMobile?cc.sys.browserType===cc.sys.BROWSER_TYPE_FIREFOX&&(t.enableBG=!0):cc.sys.browserType===cc.sys.BROWSER_TYPE_IE&&(t.closeHistory=!0)}(),function(t){var e=null;e=cc._renderType===cc.game.RENDER_TYPE_WEBGL?cc.Node.WebGLRenderCmd:cc.Node.CanvasRenderCmd;ccui.WebView.RenderCmd=function(e){this._rootCtor(e),this._iframe=this._div=null,t.enableDiv?(this._div=document.createElement("div"),this._div.style["-webkit-overflow"]="auto",this._div.style["-webkit-overflow-scrolling"]="touch",this._iframe=document.createElement("iframe"),this._iframe.style.width="100%",this._iframe.style.height="100%",this._div.appendChild(this._iframe)):this._div=this._iframe=document.createElement("iframe"),t.enableBG&&(this._div.style.background="#FFF"),this._iframe.addEventListener("load",(function(){e._dispatchEvent(ccui.WebView.EventType.LOADED)})),this._iframe.addEventListener("error",(function(){e._dispatchEvent(ccui.WebView.EventType.ERROR)})),this._div.style.background="#FFF",this._div.style.height="200px",this._div.style.width="300px",this._div.style.overflow="scroll",this._div.style.border="none",this._listener=null,this.initStyle()},(e=ccui.WebView.RenderCmd.prototype=Object.create(e.prototype)).constructor=ccui.WebView.RenderCmd,e.transform=function(t,e){this.originTransform(t,e),this.updateMatrix(this._worldTransform,cc.view._scaleX,cc.view._scaleY)},e.updateStatus=function(){t.devicePixelRatio=cc.view.isRetinaEnabled();var e=cc.Node._dirtyFlags,i=this._dirtyFlag;i&e.transformDirty&&(this.transform(this.getParentRenderCmd(),!0),this.updateMatrix(this._worldTransform,cc.view._scaleX,cc.view._scaleY),this._dirtyFlag^=this._dirtyFlag&cc.Node._dirtyFlags.transformDirty),i&e.orderDirty&&(this._dirtyFlag^=this._dirtyFlag&e.orderDirty)},e.resize=function(t){t=t||cc.view;var e=this._node,i=cc.eventManager;e._parent&&e._visible?this.updateMatrix(this._worldTransform,t._scaleX,t._scaleY):(t=i._listenersMap[cc.game.EVENT_RESIZE].getFixedPriorityListeners(),i._removeListenerInVector(t,this._listener),this._listener=null)},e.updateMatrix=function(e,i,n){var s=this._node;t.devicePixelRatio&&(i/=o=cc.view.getDevicePixelRatio(),n/=o);if(!1!==this._loaded){var r=cc.game.container.style,o=parseInt(r.paddingLeft),a=(r=parseInt(r.paddingBottom),s._contentSize.width),c=s._contentSize.height;e="matrix("+e.a*i+","+e.b+","+e.c+","+e.d*n+","+(o+e.tx*i-a/2+a*s._scaleX/2*i)+","+-(r+e.ty*n-c/2+c*s._scaleY/2*n)+")",this._div.style.transform=e,this._div.style["-webkit-transform"]=e}},e.initStyle=function(){if(this._div){var t=this._div;t.style.position="absolute",t.style.bottom="0px",t.style.left="0px"}},e.updateURL=function(t){var e=this._iframe;e.src=t;var i=this,n=function(){i._loaded=!0,e.removeEventListener("load",n)};e.addEventListener("load",n)},e.changeSize=function(t,e){var i=this._div;i&&(i.style.width=t+"px",i.style.height=e+"px")},e.removeDom=function(){var t=this._div;if(t){("contains"in cc.container?cc.container.contains(t):cc.container.compareDocumentPosition(t)%16)&&cc.container.removeChild(t)}}}(ccui.WebView._polyfill),ccui.ScrollViewBar=ccui.ProtectedNode.extend({_parentScroll:null,_direction:null,_upperHalfCircle:null,_lowerHalfCircle:null,_body:null,_opacity:255,_marginFromBoundary:0,_marginForLength:0,_touching:!1,_autoHideEnabled:!0,autoHideTime:0,_autoHideRemainingTime:0,_className:"ScrollViewBar",ctor:function(t,e){cc.ProtectedNode.prototype.ctor.call(this),this._direction=e,this._parentScroll=t,this._marginForLength=this._marginFromBoundary=ccui.ScrollViewBar.DEFAULT_MARGIN,this.opacity=255*ccui.ScrollViewBar.DEFAULT_SCROLLBAR_OPACITY,this.autoHideTime=ccui.ScrollViewBar.DEFAULT_AUTO_HIDE_TIME,this._autoHideEnabled=!0,ccui.ScrollViewBar.prototype.init.call(this),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0)},init:function(){this._upperHalfCircle=ccui.helper._createSpriteFromBase64(ccui.ScrollViewBar.HALF_CIRCLE_IMAGE,ccui.ScrollViewBar.HALF_CIRCLE_IMAGE_KEY),this._upperHalfCircle.setAnchorPoint(cc.p(.5,0)),this._lowerHalfCircle=ccui.helper._createSpriteFromBase64(ccui.ScrollViewBar.HALF_CIRCLE_IMAGE,ccui.ScrollViewBar.HALF_CIRCLE_IMAGE_KEY),this._lowerHalfCircle.setAnchorPoint(cc.p(.5,0)),this._lowerHalfCircle.setScaleY(-1),this.addProtectedChild(this._upperHalfCircle),this.addProtectedChild(this._lowerHalfCircle),this._body=ccui.helper._createSpriteFromBase64(ccui.ScrollViewBar.BODY_IMAGE_1_PIXEL_HEIGHT,ccui.ScrollViewBar.BODY_IMAGE_1_PIXEL_HEIGHT_KEY),this._body.setAnchorPoint(cc.p(.5,0)),this.addProtectedChild(this._body),this.setColor(ccui.ScrollViewBar.DEFAULT_COLOR),this.onScrolled(cc.p(0,0)),cc.ProtectedNode.prototype.setOpacity.call(this,0),this._autoHideRemainingTime=0,this._direction===ccui.ScrollView.DIR_HORIZONTAL&&this.setRotation(90)},setPositionFromCorner:function(t){this._direction===ccui.ScrollView.DIR_VERTICAL?(this._marginForLength=t.y,this._marginFromBoundary=t.x):(this._marginForLength=t.x,this._marginFromBoundary=t.y)},onEnter:function(){cc.ProtectedNode.prototype.onEnter.call(this),this.scheduleUpdate()},getPositionFromCorner:function(){return this._direction===ccui.ScrollView.DIR_VERTICAL?cc.p(this._marginFromBoundary,this._marginForLength):cc.p(this._marginForLength,this._marginFromBoundary)},setWidth:function(t){t/=this._body.width,this._body.setScaleX(t),this._upperHalfCircle.setScale(t),this._lowerHalfCircle.setScale(-t)},getWidth:function(){return this._body.getBoundingBox().width},setAutoHideEnabled:function(t){this._autoHideEnabled=t,!this._autoHideEnabled&&!this._touching&&0>=this._autoHideRemainingTime?cc.ProtectedNode.prototype.setOpacity.call(this,this.opacity):cc.ProtectedNode.prototype.setOpacity.call(this,0)},isAutoHideEnabled:function(){return this._autoHideEnabled},setOpacity:function(t){this._opacity=t},getOpacity:function(){return this._opacity},_updateLength:function(t){var e=t/this._body.getTextureRect().height;this._body.setScaleY(e),this._upperHalfCircle.setPositionY(this._body.getPositionY()+t)},_processAutoHide:function(t){!this._autoHideEnabled||0>=this._autoHideRemainingTime||this._touching||(this._autoHideRemainingTime-=t,this._autoHideRemainingTime<=this.autoHideTime&&(this._autoHideRemainingTime=Math.max(0,this._autoHideRemainingTime),cc.ProtectedNode.prototype.setOpacity.call(this,this._autoHideRemainingTime/this.autoHideTime*this._opacity)))},update:function(t){this._processAutoHide(t)},onTouchBegan:function(){this._autoHideEnabled&&(this._touching=!0)},onTouchEnded:function(){this._autoHideEnabled&&(this._touching=!1,0>=this._autoHideRemainingTime||(this._autoHideRemainingTime=this.autoHideTime))},onScrolled:function(t){this._autoHideEnabled&&(this._autoHideRemainingTime=this.autoHideTime,cc.ProtectedNode.prototype.setOpacity.call(this,this.opacity));var e=this._parentScroll.getInnerContainer(),i=0,n=0,s=0,r=0;this._direction===ccui.ScrollView.DIR_VERTICAL?(i=e.height,n=this._parentScroll.height,s=t.y,r=-e.getPositionY()):this._direction===ccui.ScrollView.DIR_HORIZONTAL&&(i=e.width,n=this._parentScroll.width,s=t.x,r=-e.getPositionX()),t=this._calculateLength(i,n,s),i=this._calculatePosition(i,n,r,s,t),this._updateLength(t),this.setPosition(i)},_calculateLength:function(t,e,i){return 0!==i&&(t+=20*(0<i?i:-i)),i=e/t,Math.abs(e-2*this._marginForLength)*i},_calculatePosition:function(t,e,i,n,s){return t-=e,0!==n&&(t+=Math.abs(n)),n=0,0!==t&&(n=Math.max(i/t,0),n=Math.min(n,1)),e=(e-s-2*this._marginForLength)*n+this._marginForLength,this._direction===ccui.ScrollView.DIR_VERTICAL?cc.p(this._parentScroll.width-this._marginFromBoundary,e):cc.p(e,this._marginFromBoundary)}}),_p=ccui.ScrollViewBar.prototype,cc.defineGetterSetter(_p,"opacity",_p.getOpacity,_p.setOpacity),cc.defineGetterSetter(_p,"autoHideEnabled",_p.isAutoHideEnabled,_p.setAutoHideEnabled),ccui.ScrollViewBar.DEFAULT_COLOR=cc.color(52,65,87),ccui.ScrollViewBar.DEFAULT_MARGIN=20,ccui.ScrollViewBar.DEFAULT_AUTO_HIDE_TIME=.2,ccui.ScrollViewBar.DEFAULT_SCROLLBAR_OPACITY=.4,ccui.ScrollViewBar.HALF_CIRCLE_IMAGE_KEY="/__half_circle_image",ccui.ScrollViewBar.HALF_CIRCLE_IMAGE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAGCAMAAADAMI+zAAAAJ1BMVEX///////////////////////////////////////////////////9Ruv0SAAAADHRSTlMABgcbbW7Hz9Dz+PmlcJP5AAAAMElEQVR4AUXHwQ2AQAhFwYcLH1H6r1djzDK3ASxUpTBeK/uTCyz7dx54b44m4p5cD1MwAooEJyk3AAAAAElFTkSuQmCC",ccui.ScrollViewBar.BODY_IMAGE_1_PIXEL_HEIGHT_KEY="/__body_image_height",ccui.ScrollViewBar.BODY_IMAGE_1_PIXEL_HEIGHT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAABCAMAAADdNb8LAAAAA1BMVEX///+nxBvIAAAACklEQVR4AWNABgAADQABYc2cpAAAAABJRU5ErkJggg==",ccui.ScrollView=ccui.Layout.extend({_innerContainer:null,_direction:null,_topBoundary:0,_bottomBoundary:0,_leftBoundary:0,_rightBoundary:0,_touchMoveDisplacements:null,_touchMoveTimeDeltas:null,_touchMovePreviousTimestamp:0,_touchTotalTimeThreshold:.5,_autoScrolling:!1,_autoScrollTargetDelta:null,_autoScrollAttenuate:!0,_autoScrollStartPosition:null,_autoScrollTotalTime:0,_autoScrollAccumulatedTime:0,_autoScrollCurrentlyOutOfBoundary:!1,_autoScrollBraking:!1,_autoScrollBrakingStartPosition:null,_bePressed:!1,_childFocusCancelOffset:0,bounceEnabled:!1,_outOfBoundaryAmount:null,_outOfBoundaryAmountDirty:!0,inertiaScrollEnabled:!1,_scrollBarEnabled:!0,_verticalScrollBar:null,_horizontalScrollBar:null,_scrollViewEventListener:null,_scrollViewEventSelector:null,_className:"ScrollView",ctor:function(){ccui.Layout.prototype.ctor.call(this),this.setClippingEnabled(!0),this._innerContainer.setTouchEnabled(!1),this._direction=ccui.ScrollView.DIR_NONE,this._childFocusCancelOffset=5,this.inertiaScrollEnabled=!0,this._outOfBoundaryAmount=cc.p(0,0),this._autoScrollTargetDelta=cc.p(0,0),this._autoScrollStartPosition=cc.p(0,0),this._autoScrollBrakingStartPosition=cc.p(0,0),this._touchMoveDisplacements=[],this._touchMoveTimeDeltas=[],this._touchMovePreviousTimestamp=0,this._scrollBarEnabled=!0,this._initScrollBar(),this.setTouchEnabled(!0)},onEnter:function(){ccui.Layout.prototype.onEnter.call(this),this.scheduleUpdate()},onExit:function(){cc.renderer._removeCache(this.__instanceId),ccui.Layout.prototype.onExit.call(this)},visit:function(t){var e=this._renderCmd,i=t?t._renderCmd:null;if(this._visible){this._adaptRenderers(),this._doLayout(),t=cc.renderer,e.visit(i),t.pushRenderCommand(e),e instanceof ccui.ScrollView.WebGLRenderCmd&&t._turnToCacheMode(this.__instanceId);var n=this._clippingEnabled&&this._clippingType===ccui.Layout.CLIPPING_STENCIL,s=this._clippingEnabled&&this._clippingType===ccui.Layout.CLIPPING_SCISSOR;n?e.stencilClippingVisit(i):s&&e.scissorClippingVisit(i);var r,o,a=this._children,c=a.length,h=(i=this._protectedChildren).length;for(this._reorderChildDirty&&this.sortAllChildren(),this._reorderProtectedChildDirty&&this.sortAllProtectedChildren(),r=0;r<c;r++)(o=a[r])&&o._visible&&o.visit(this);for(r=0;r<h;r++)(a=i[r])&&a._visible&&(e._changeProtectedChild(a),a.visit(this));n?e.postStencilVisit():s&&e.postScissorVisit(),e instanceof ccui.ScrollView.WebGLRenderCmd&&t._turnToNormalMode(),this.updateChildren(),e._dirtyFlag=0}else e._propagateFlagsDown(i)},findNextFocusedWidget:function(t,e){return this.getLayoutType()===ccui.Layout.LINEAR_VERTICAL||this.getLayoutType()===ccui.Layout.LINEAR_HORIZONTAL?this._innerContainer.findNextFocusedWidget(t,e):ccui.Widget.prototype.findNextFocusedWidget.call(this,t,e)},_initRenderer:function(){ccui.Layout.prototype._initRenderer.call(this),this._innerContainer=new ccui.Layout,this._innerContainer.setColor(cc.color(255,255,255)),this._innerContainer.setOpacity(255),this._innerContainer.setCascadeColorEnabled(!0),this._innerContainer.setCascadeOpacityEnabled(!0),this.addProtectedChild(this._innerContainer,1,1)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?new ccui.ScrollView.WebGLRenderCmd(this):new ccui.ScrollView.CanvasRenderCmd(this)},_onSizeChanged:function(){ccui.Layout.prototype._onSizeChanged.call(this);var t=this._contentSize;this._topBoundary=t.height,this._rightBoundary=t.width;var e=this._innerContainer.getContentSize();this._innerContainer.setContentSize(cc.size(Math.max(e.width,t.width),Math.max(e.height,t.height))),this._innerContainer.setPosition(0,t.height-this._innerContainer.getContentSize().height),this._verticalScrollBar&&this._verticalScrollBar.onScrolled(this._getHowMuchOutOfBoundary()),this._horizontalScrollBar&&this._horizontalScrollBar.onScrolled(this._getHowMuchOutOfBoundary())},setInnerContainerSize:function(t){var e=this._innerContainer,i=this._contentSize,n=i.width,s=i.height;t.width<i.width?cc.log("Inner width <= ScrollView width, it will be force sized!"):n=t.width,t.height<i.height?cc.log("Inner height <= ScrollView height, it will be force sized!"):s=t.height,e.setContentSize(cc.size(n,s)),t=this._innerContainer.getPosition(),e=this._innerContainer.getAnchorPoint(),0!=this._innerContainer.getLeftBoundary()&&(t.x=e.x*n),this._innerContainer.getTopBoundary()!=this._contentSize.height&&(t.y=this._contentSize.height-(1-e.y)*s),this.setInnerContainerPosition(t),this._updateScrollBar(cc.p(0,0))},_setInnerWidth:function(t){var e=this._contentSize.width,i=e,n=this._innerContainer,s=n.width;switch(t<e?cc.log("Inner width <= scrollview width, it will be force sized!"):i=t,n.width=i,this._direction){case ccui.ScrollView.DIR_HORIZONTAL:case ccui.ScrollView.DIR_BOTH:n.getRightBoundary()<=e&&this._scrollChildren(s-n.width,0)}t=n.anchorX,0<n.getLeftBoundary()&&(n.x=t*i),n.getRightBoundary()<e&&(n.x=e-(1-t)*i)},_setInnerHeight:function(t){var e=this._contentSize.height,i=e,n=this._innerContainer,s=n.height;switch(t<e?cc.log("Inner height <= scrollview height, it will be force sized!"):i=t,n.height=i,this._direction){case ccui.ScrollView.DIR_VERTICAL:case ccui.ScrollView.DIR_BOTH:this._scrollChildren(0,s-i)}t=n.anchorY,0<n.getLeftBoundary()&&(n.y=t*i),n.getRightBoundary()<e&&(n.y=e-(1-t)*i)},setInnerContainerPosition:function(t){if(t.x!==this._innerContainer.getPositionX()||t.y!==this._innerContainer.getPositionY()){if(this._innerContainer.setPosition(t),this._outOfBoundaryAmountDirty=!0,this.bounceEnabled)for(t=ccui.ScrollView.MOVEDIR_TOP;t<ccui.ScrollView.MOVEDIR_RIGHT;++t)this._isOutOfBoundary(t)&&this._processScrollEvent(t,!0);this._dispatchEvent(ccui.ScrollView.EVENT_CONTAINER_MOVED)}},getInnerContainerPosition:function(){return this._innerContainer.getPosition()},getInnerContainerSize:function(){return this._innerContainer.getContentSize()},_getInnerWidth:function(){return this._innerContainer.width},_getInnerHeight:function(){return this._innerContainer.height},_isInContainer:function(t){if(!this._clippingEnabled)return!0;var e=t._position,i=t._contentSize;t=t._anchorPoint;var n,s=this._customSize,r=this._innerContainer._position,o=0;return!((n=e.y-t.y*i.height)>=s.height-r.y||n+i.height<=-r.y||(o=e.x-t.x*i.width)>=s.width-r.x||o+i.width<=-r.x)},updateChildren:function(){var t,e,i,n=this._innerContainer._children;for(e=0,i=n.length;e<i;e++)!0===(t=n[e])._inViewRect&&!1===this._isInContainer(t)?t._inViewRect=!1:!1===t._inViewRect&&!0===this._isInContainer(t)&&(t._inViewRect=!0)},addChild:function(t,e,i){return!!t&&(!1===this._isInContainer(t)&&(t._inViewRect=!1),e=e||t.getLocalZOrder(),i=i||t.getTag(),this._innerContainer.addChild(t,e,i))},removeAllChildren:function(){this.removeAllChildrenWithCleanup(!0)},removeAllChildrenWithCleanup:function(t){this._innerContainer.removeAllChildrenWithCleanup(t)},removeChild:function(t,e){return this._innerContainer.removeChild(t,e)},getChildren:function(){return this._innerContainer.getChildren()},getChildrenCount:function(){return this._innerContainer.getChildrenCount()},getChildByTag:function(t){return this._innerContainer.getChildByTag(t)},getChildByName:function(t){return this._innerContainer.getChildByName(t)},_flattenVectorByDirection:function(t){var e=cc.p(0,0);return e.x=this._direction===ccui.ScrollView.DIR_VERTICAL?0:t.x,e.y=this._direction===ccui.ScrollView.DIR_HORIZONTAL?0:t.y,e},_getHowMuchOutOfBoundary:function(t){if(void 0===t&&(t=cc.p(0,0)),0===t.x&&0===t.y&&!this._outOfBoundaryAmountDirty)return this._outOfBoundaryAmount;var e=cc.p(0,0);return this._innerContainer.getLeftBoundary()+t.x>this._leftBoundary?e.x=this._leftBoundary-(this._innerContainer.getLeftBoundary()+t.x):this._innerContainer.getRightBoundary()+t.x<this._rightBoundary&&(e.x=this._rightBoundary-(this._innerContainer.getRightBoundary()+t.x)),this._innerContainer.getTopBoundary()+t.y<this._topBoundary?e.y=this._topBoundary-(this._innerContainer.getTopBoundary()+t.y):this._innerContainer.getBottomBoundary()+t.y>this._bottomBoundary&&(e.y=this._bottomBoundary-(this._innerContainer.getBottomBoundary()+t.y)),0===t.x&&0===t.y&&(this._outOfBoundaryAmount=e,this._outOfBoundaryAmountDirty=!1),e},_isOutOfBoundary:function(t){var e=this._getHowMuchOutOfBoundary();if(void 0===t)return!this._fltEqualZero(e);switch(t){case ccui.ScrollView.MOVEDIR_TOP:return 0<e.y;case ccui.ScrollView.MOVEDIR_BOTTOM:return 0>e.y;case ccui.ScrollView.MOVEDIR_LEFT:return 0>e.x;case ccui.ScrollView.MOVEDIR_RIGHT:return 0<e.x}return!1},_moveInnerContainer:function(t,e){var i=this._flattenVectorByDirection(t);this.setInnerContainerPosition(cc.pAdd(this.getInnerContainerPosition(),i)),i=this._getHowMuchOutOfBoundary(),this._updateScrollBar(i),this.bounceEnabled&&e&&this._startBounceBackIfNeeded()},_updateScrollBar:function(t){this._verticalScrollBar&&this._verticalScrollBar.onScrolled(t),this._horizontalScrollBar&&this._horizontalScrollBar.onScrolled(t)},_calculateTouchMoveVelocity:function(){for(var t=0,e=0;e<this._touchMoveTimeDeltas.length;++e)t+=this._touchMoveTimeDeltas[e];if(0==t||t>=this._touchTotalTimeThreshold)return cc.p(0,0);var i=cc.p(0,0);for(e=0;e<this._touchMoveDisplacements.length;++e)i.x+=this._touchMoveDisplacements[e].x,i.y+=this._touchMoveDisplacements[e].y;return cc.pMult(i,1/t)},setTouchTotalTimeThreshold:function(t){this._touchTotalTimeThreshold=t},getTouchTotalTimeThreshold:function(){return this._touchTotalTimeThreshold},_startInertiaScroll:function(t){var e=cc.pMult(t,.7);this._startAttenuatingAutoScroll(e,t)},_startBounceBackIfNeeded:function(){if(!this.bounceEnabled)return!1;var t=this._getHowMuchOutOfBoundary();return!this._fltEqualZero(t)&&(this._startAutoScroll(t,1,!0),!0)},_startAutoScrollToDestination:function(t,e,i){this._startAutoScroll(cc.pSub(t,this._innerContainer.getPosition()),e,i)},_calculateAutoScrollTimeByInitialSpeed:function(t){return Math.sqrt(Math.sqrt(t/5))},_startAttenuatingAutoScroll:function(t,e){var i=this._calculateAutoScrollTimeByInitialSpeed(cc.pLength(e));this._startAutoScroll(t,i,!0)},_startAutoScroll:function(t,e,i){t=this._flattenVectorByDirection(t),this._autoScrolling=!0,this._autoScrollTargetDelta=t,this._autoScrollAttenuate=i,this._autoScrollStartPosition=this._innerContainer.getPosition(),this._autoScrollTotalTime=e,this._autoScrollAccumulatedTime=0,this._autoScrollBraking=!1,this._autoScrollBrakingStartPosition=cc.p(0,0),e=this._getHowMuchOutOfBoundary(),!this._fltEqualZero(e)&&(this._autoScrollCurrentlyOutOfBoundary=!0,i=this._getHowMuchOutOfBoundary(t),0<e.x*i.x||0<e.y*i.y)&&(this._autoScrollBraking=!0)},stopAutoScroll:function(){this._autoScrolling=!1,this._autoScrollAttenuate=!0,this._autoScrollAccumulatedTime=this._autoScrollTotalTime=0},_isNecessaryAutoScrollBrake:function(){if(this._autoScrollBraking)return!0;if(this._isOutOfBoundary()){if(!this._autoScrollCurrentlyOutOfBoundary)return this._autoScrollBraking=this._autoScrollCurrentlyOutOfBoundary=!0,this._autoScrollBrakingStartPosition=this.getInnerContainerPosition(),!0}else this._autoScrollCurrentlyOutOfBoundary=!1;return!1},_getAutoScrollStopEpsilon:function(){return 1e-4},_fltEqualZero:function(t){return 1e-4>=Math.abs(t.x)&&1e-4>=Math.abs(t.y)},_processAutoScrolling:function(t){var e=this._isNecessaryAutoScrollBrake()?.05:1;this._autoScrollAccumulatedTime+=1/e*t;var i=Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime);this._autoScrollAttenuate&&(i=(i-=1)*i*i*i*i+1),t=cc.pAdd(this._autoScrollStartPosition,cc.pMult(this._autoScrollTargetDelta,i)),i=Math.abs(i-1)<=this._getAutoScrollStopEpsilon(),this.bounceEnabled?t=cc.pAdd(this._autoScrollBrakingStartPosition,cc.pMult(cc.pSub(t,this._autoScrollBrakingStartPosition),e)):(e=cc.pSub(t,this.getInnerContainerPosition()),e=this._getHowMuchOutOfBoundary(e),this._fltEqualZero(e)||(t.x+=e.x,t.y+=e.y,i=!0)),i&&(this._autoScrolling=!1,this._dispatchEvent(ccui.ScrollView.EVENT_AUTOSCROLL_ENDED)),this._moveInnerContainer(cc.pSub(t,this.getInnerContainerPosition()),i)},_jumpToDestination:function(t,e){void 0===t.x&&(t=cc.p(t,e)),this._autoScrolling=!1,this._moveInnerContainer(cc.pSub(t,this.getInnerContainerPosition()),!0)},_scrollChildren:function(t){if(this.bounceEnabled){var e=this._getHowMuchOutOfBoundary();t.x*=0==e.x?1:.5,t.y*=0==e.y?1:.5}this.bounceEnabled||(e=this._getHowMuchOutOfBoundary(t),t.x+=e.x,t.y+=e.y);var i=e=!1,n=!1,s=!1;0<t.y?this._innerContainer.getBottomBoundary()+t.y>=this._bottomBoundary&&(s=!0):0>t.y&&this._innerContainer.getTopBoundary()+t.y<=this._topBoundary&&(n=!0),0>t.x?this._innerContainer.getRightBoundary()+t.x<=this._rightBoundary&&(i=!0):0<t.x&&this._innerContainer.getLeftBoundary()+t.x>=this._leftBoundary&&(e=!0),this._moveInnerContainer(t,!1),0==t.x&&0==t.y||this._processScrollingEvent(),s&&this._processScrollEvent(ccui.ScrollView.MOVEDIR_BOTTOM,!1),n&&this._processScrollEvent(ccui.ScrollView.MOVEDIR_TOP,!1),e&&this._processScrollEvent(ccui.ScrollView.MOVEDIR_LEFT,!1),i&&this._processScrollEvent(ccui.ScrollView.MOVEDIR_RIGHT,!1)},scrollToBottom:function(t,e){this._startAutoScrollToDestination(cc.p(this._innerContainer.getPositionX(),0),t,e)},scrollToTop:function(t,e){this._startAutoScrollToDestination(cc.p(this._innerContainer.getPositionX(),this._contentSize.height-this._innerContainer.getContentSize().height),t,e)},scrollToLeft:function(t,e){this._startAutoScrollToDestination(cc.p(0,this._innerContainer.getPositionY()),t,e)},scrollToRight:function(t,e){this._startAutoScrollToDestination(cc.p(this._contentSize.width-this._innerContainer.getContentSize().width,this._innerContainer.getPositionY()),t,e)},scrollToTopLeft:function(t,e){this._direction!==ccui.ScrollView.DIR_BOTH?cc.log("Scroll direction is not both!"):this._startAutoScrollToDestination(cc.p(0,this._contentSize.height-this._innerContainer.getContentSize().height),t,e)},scrollToTopRight:function(t,e){if(this._direction!==ccui.ScrollView.DIR_BOTH)cc.log("Scroll direction is not both!");else{var i=this._innerContainer.getContentSize();this._startAutoScrollToDestination(cc.p(this._contentSize.width-i.width,this._contentSize.height-i.height),t,e)}},scrollToBottomLeft:function(t,e){this._direction!==ccui.ScrollView.DIR_BOTH?cc.log("Scroll direction is not both!"):this._startAutoScrollToDestination(cc.p(0,0),t,e)},scrollToBottomRight:function(t,e){this._direction!==ccui.ScrollView.DIR_BOTH?cc.log("Scroll direction is not both!"):this._startAutoScrollToDestination(cc.p(this._contentSize.width-this._innerContainer.getContentSize().width,0),t,e)},scrollToPercentVertical:function(t,e,i){var n=this._contentSize.height-this._innerContainer.getContentSize().height,s=-n;this._startAutoScrollToDestination(cc.p(this._innerContainer.getPositionX(),n+t*s/100),e,i)},scrollToPercentHorizontal:function(t,e,i){var n=this._innerContainer.getContentSize().width-this._contentSize.width;this._startAutoScrollToDestination(cc.p(-t*n/100,this._innerContainer.getPositionY()),e,i)},scrollToPercentBothDirection:function(t,e,i){if(this._direction===ccui.ScrollView.DIR_BOTH){var n=this._contentSize.height-this._innerContainer.getContentSize().height,s=-n,r=this._innerContainer.getContentSize().width-this._contentSize.width;this._startAutoScrollToDestination(cc.p(-t.x*r/100,n+t.y*s/100),e,i)}},jumpToBottom:function(){this._jumpToDestination(this._innerContainer.getPositionX(),0)},jumpToTop:function(){this._jumpToDestination(this._innerContainer.getPositionX(),this._contentSize.height-this._innerContainer.getContentSize().height)},jumpToLeft:function(){this._jumpToDestination(0,this._innerContainer.getPositionY())},jumpToRight:function(){this._jumpToDestination(this._contentSize.width-this._innerContainer.getContentSize().width,this._innerContainer.getPositionY())},jumpToTopLeft:function(){this._direction!==ccui.ScrollView.DIR_BOTH?cc.log("Scroll _direction is not both!"):this._jumpToDestination(0,this._contentSize.height-this._innerContainer.getContentSize().height)},jumpToTopRight:function(){if(this._direction!==ccui.ScrollView.DIR_BOTH)cc.log("Scroll _direction is not both!");else{var t=this._innerContainer.getContentSize();this._jumpToDestination(this._contentSize.width-t.width,this._contentSize.height-t.height)}},jumpToBottomLeft:function(){this._direction!==ccui.ScrollView.DIR_BOTH?cc.log("Scroll _direction is not both!"):this._jumpToDestination(0,0)},jumpToBottomRight:function(){this._direction!==ccui.ScrollView.DIR_BOTH?cc.log("Scroll _direction is not both!"):this._jumpToDestination(this._contentSize.width-this._innerContainer.getContentSize().width,0)},jumpToPercentVertical:function(t){var e=this._contentSize.height-this._innerContainer.getContentSize().height,i=-e;this._jumpToDestination(this._innerContainer.getPositionX(),e+t*i/100)},jumpToPercentHorizontal:function(t){var e=this._innerContainer.getContentSize().width-this._contentSize.width;this._jumpToDestination(-t*e/100,this._innerContainer.getPositionY())},jumpToPercentBothDirection:function(t){if(this._direction===ccui.ScrollView.DIR_BOTH){var e=this._innerContainer.getContentSize(),i=this._contentSize.height-e.height;this._jumpToDestination(-t.x*(e.width-this._contentSize.width)/100,i+t.y*-i/100)}},_gatherTouchMove:function(t){for(;5<=this._touchMoveDisplacements.length;)this._touchMoveDisplacements.splice(0,1),this._touchMoveTimeDeltas.splice(0,1);this._touchMoveDisplacements.push(t),t=(new Date).getTime(),this._touchMoveTimeDeltas.push((t-this._touchMovePreviousTimestamp)/1e3),this._touchMovePreviousTimestamp=t},_handlePressLogic:function(t){this._bePressed=!0,this._autoScrolling=!1,this._touchMovePreviousTimestamp=(new Date).getTime(),this._touchMoveDisplacements.length=0,this._touchMoveTimeDeltas.length=0,this._verticalScrollBar&&this._verticalScrollBar.onTouchBegan(),this._horizontalScrollBar&&this._horizontalScrollBar.onTouchBegan()},_handleMoveLogic:function(t){var e=this.convertToNodeSpace(t.getLocation());t=this.convertToNodeSpace(t.getPreviousLocation()),e=cc.pSub(e,t),this._scrollChildren(e),this._gatherTouchMove(e)},_handleReleaseLogic:function(t){var e=this.convertToNodeSpace(t.getLocation());t=this.convertToNodeSpace(t.getPreviousLocation()),e=cc.pSub(e,t),this._gatherTouchMove(e),this._bePressed=!1,!this._startBounceBackIfNeeded()&&this.inertiaScrollEnabled&&(0===(e=this._calculateTouchMoveVelocity()).x&&0===e.y||this._startInertiaScroll(e)),this._verticalScrollBar&&this._verticalScrollBar.onTouchEnded(),this._horizontalScrollBar&&this._horizontalScrollBar.onTouchEnded()},onTouchBegan:function(t,e){var i=ccui.Layout.prototype.onTouchBegan.call(this,t,e);return this._isInterceptTouch||this._hit&&this._handlePressLogic(t),i},onTouchMoved:function(t,e){ccui.Layout.prototype.onTouchMoved.call(this,t,e),this._isInterceptTouch||this._handleMoveLogic(t)},onTouchEnded:function(t,e){ccui.Layout.prototype.onTouchEnded.call(this,t,e),this._isInterceptTouch||this._handleReleaseLogic(t),this._isInterceptTouch=!1},onTouchCancelled:function(t,e){ccui.Layout.prototype.onTouchCancelled.call(this,t,e),this._isInterceptTouch||this._handleReleaseLogic(t),this._isInterceptTouch=!1},update:function(t){this._autoScrolling&&this._processAutoScrolling(t)},interceptTouchEvent:function(t,e,i){if(this._touchEnabled){if(this._direction!==ccui.ScrollView.DIR_NONE){var n=i.getLocation();switch(t){case ccui.Widget.TOUCH_BEGAN:this._isInterceptTouch=!0,this._touchBeganPosition.x=n.x,this._touchBeganPosition.y=n.y,this._handlePressLogic(i);break;case ccui.Widget.TOUCH_MOVED:t=cc.pLength(cc.pSub(e.getTouchBeganPosition(),n)),this._touchMovePosition.x=n.x,this._touchMovePosition.y=n.y,t>this._childFocusCancelOffset&&(e.setHighlighted(!1),this._handleMoveLogic(i));break;case ccui.Widget.TOUCH_CANCELED:case ccui.Widget.TOUCH_ENDED:this._touchEndPosition.x=n.x,this._touchEndPosition.y=n.y,this._handleReleaseLogic(i),e.isSwallowTouches()&&(this._isInterceptTouch=!1)}}}else ccui.Layout.prototype.interceptTouchEvent.call(this,t,e,i)},_processScrollEvent:function(t,e){var i=0;switch(t){case ccui.ScrollView.MOVEDIR_TOP:i=e?ccui.ScrollView.EVENT_BOUNCE_TOP:ccui.ScrollView.EVENT_SCROLL_TO_TOP;break;case ccui.ScrollView.MOVEDIR_BOTTOM:i=e?ccui.ScrollView.EVENT_BOUNCE_BOTTOM:ccui.ScrollView.EVENT_SCROLL_TO_BOTTOM;break;case ccui.ScrollView.MOVEDIR_LEFT:i=e?ccui.ScrollView.EVENT_BOUNCE_LEFT:ccui.ScrollView.EVENT_SCROLL_TO_LEFT;break;case ccui.ScrollView.MOVEDIR_RIGHT:i=e?ccui.ScrollView.EVENT_BOUNCE_RIGHT:ccui.ScrollView.EVENT_SCROLL_TO_RIGHT}this._dispatchEvent(i)},_processScrollingEvent:function(){this._dispatchEvent(ccui.ScrollView.EVENT_SCROLLING)},_dispatchEvent:function(t){this._scrollViewEventSelector&&(this._scrollViewEventListener?this._scrollViewEventSelector.call(this._scrollViewEventListener,this,t):this._scrollViewEventSelector(this,t)),this._ccEventCallback&&this._ccEventCallback(this,t)},addEventListenerScrollView:function(t,e){this._scrollViewEventSelector=t,this._scrollViewEventListener=e},addEventListener:function(t){this._ccEventCallback=t},setDirection:function(t){this._direction=t,this._scrollBarEnabled&&(this._removeScrollBar(),this._initScrollBar())},getDirection:function(){return this._direction},setBounceEnabled:function(t){this.bounceEnabled=t},isBounceEnabled:function(){return this.bounceEnabled},setInertiaScrollEnabled:function(t){this.inertiaScrollEnabled=t},isInertiaScrollEnabled:function(){return this.inertiaScrollEnabled},setScrollBarEnabled:function(t){this._scrollBarEnabled!==t&&(this._scrollBarEnabled&&this._removeScrollBar(),(this._scrollBarEnabled=t)&&this._initScrollBar())},isScrollBarEnabled:function(){return this._scrollBarEnabled},setScrollBarPositionFromCorner:function(t){this._direction!==ccui.ScrollView.DIR_HORIZONTAL&&this.setScrollBarPositionFromCornerForVertical(t),this._direction!==ccui.ScrollView.DIR_VERTICAL&&this.setScrollBarPositionFromCornerForHorizontal(t)},setScrollBarPositionFromCornerForVertical:function(t){cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),cc.assert(this._direction!==ccui.ScrollView.DIR_HORIZONTAL,"Scroll view doesn't have a vertical scroll bar!"),this._verticalScrollBar.setPositionFromCorner(t)},getScrollBarPositionFromCornerForVertical:function(){return cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),cc.assert(this._direction!==ccui.ScrollView.DIR_HORIZONTAL,"Scroll view doesn't have a vertical scroll bar!"),this._verticalScrollBar.getPositionFromCorner()},setScrollBarPositionFromCornerForHorizontal:function(t){cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),cc.assert(this._direction!==ccui.ScrollView.DIR_VERTICAL,"Scroll view doesn't have a horizontal scroll bar!"),this._horizontalScrollBar.setPositionFromCorner(t)},getScrollBarPositionFromCornerForHorizontal:function(){return cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),cc.assert(this._direction!==ccui.ScrollView.DIR_VERTICAL,"Scroll view doesn't have a horizontal scroll bar!"),this._horizontalScrollBar.getPositionFromCorner()},setScrollBarWidth:function(t){cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar&&this._verticalScrollBar.setWidth(t),this._horizontalScrollBar&&this._horizontalScrollBar.setWidth(t)},getScrollBarWidth:function(){return cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar?this._verticalScrollBar.getWidth():this._horizontalScrollBar?this._horizontalScrollBar.getWidth():0},setScrollBarColor:function(t){cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar&&this._verticalScrollBar.setColor(t),this._horizontalScrollBar&&this._horizontalScrollBar.setColor(t)},getScrollBarColor:function(){return cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar&&this._verticalScrollBar.getColor(),this._horizontalScrollBar&&this._horizontalScrollBar.getColor(),cc.color.WHITE},setScrollBarOpacity:function(t){cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar&&(this._verticalScrollBar.opacity=t),this._horizontalScrollBar&&(this._horizontalScrollBar.opacity=t)},getScrollBarOpacity:function(){return cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar?this._verticalScrollBar.opacity:this._horizontalScrollBar?this._horizontalScrollBar.opacity:-1},setScrollBarAutoHideEnabled:function(t){cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar&&(this._verticalScrollBar.autoHideEnabled=t),this._horizontalScrollBar&&(this._horizontalScrollBar.autoHideEnabled=t)},isScrollBarAutoHideEnabled:function(){return cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar?this._verticalScrollBar.autoHideEnabled:!!this._horizontalScrollBar&&this._horizontalScrollBar.autoHideEnabled},setScrollBarAutoHideTime:function(t){cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar&&(this._verticalScrollBar.autoHideTime=t),this._horizontalScrollBar&&(this._horizontalScrollBar.autoHideTime=t)},getScrollBarAutoHideTime:function(){return cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar?this._verticalScrollBar.autoHideTime:this._horizontalScrollBar?this._horizontalScrollBar.autoHideTime:0},getInnerContainer:function(){return this._innerContainer},setLayoutType:function(t){this._innerContainer.setLayoutType(t)},getLayoutType:function(){return this._innerContainer.getLayoutType()},_doLayout:function(){this._doLayoutDirty&&(this._doLayoutDirty=!1)},getDescription:function(){return"ScrollView"},_createCloneInstance:function(){return new ccui.ScrollView},_copyClonedWidgetChildren:function(t){ccui.Layout.prototype._copyClonedWidgetChildren.call(this,t)},_copySpecialProperties:function(t){t instanceof ccui.ScrollView&&(ccui.Layout.prototype._copySpecialProperties.call(this,t),this.setInnerContainerSize(t.getInnerContainerSize()),this.setInnerContainerPosition(t.getInnerContainerPosition()),this.setDirection(t._direction),this._topBoundary=t._topBoundary,this._bottomBoundary=t._bottomBoundary,this._leftBoundary=t._leftBoundary,this._rightBoundary=t._rightBoundary,this._bePressed=t._bePressed,this._childFocusCancelOffset=t._childFocusCancelOffset,this._touchMoveDisplacements=t._touchMoveDisplacements,this._touchMoveTimeDeltas=t._touchMoveTimeDeltas,this._touchMovePreviousTimestamp=t._touchMovePreviousTimestamp,this._autoScrolling=t._autoScrolling,this._autoScrollAttenuate=t._autoScrollAttenuate,this._autoScrollStartPosition=t._autoScrollStartPosition,this._autoScrollTargetDelta=t._autoScrollTargetDelta,this._autoScrollTotalTime=t._autoScrollTotalTime,this._autoScrollAccumulatedTime=t._autoScrollAccumulatedTime,this._autoScrollCurrentlyOutOfBoundary=t._autoScrollCurrentlyOutOfBoundary,this._autoScrollBraking=t._autoScrollBraking,this._autoScrollBrakingStartPosition=t._autoScrollBrakingStartPosition,this.setBounceEnabled(t.bounceEnabled),this.setInertiaScrollEnabled(t.inertiaScrollEnabled),this._scrollViewEventListener=t._scrollViewEventListener,this._scrollViewEventSelector=t._scrollViewEventSelector,this._ccEventCallback=t._ccEventCallback,this.setScrollBarEnabled(t.isScrollBarEnabled()),this.isScrollBarEnabled()&&(this._direction!==ccui.ScrollView.DIR_HORIZONTAL&&this.setScrollBarPositionFromCornerForVertical(t.getScrollBarPositionFromCornerForVertical()),this._direction!==ccui.ScrollView.DIR_VERTICAL&&this.setScrollBarPositionFromCornerForHorizontal(t.getScrollBarPositionFromCornerForHorizontal()),this.setScrollBarWidth(t.getScrollBarWidth()),this.setScrollBarColor(t.getScrollBarColor()),this.setScrollBarAutoHideEnabled(t.isScrollBarAutoHideEnabled()),this.setScrollBarAutoHideTime(t.getScrollBarAutoHideTime())))},_initScrollBar:function(){this._direction===ccui.ScrollView.DIR_HORIZONTAL||this._verticalScrollBar||(this._verticalScrollBar=new ccui.ScrollViewBar(this,ccui.ScrollView.DIR_VERTICAL),this.addProtectedChild(this._verticalScrollBar,2)),this._direction===ccui.ScrollView.DIR_VERTICAL||this._horizontalScrollBar||(this._horizontalScrollBar=new ccui.ScrollViewBar(this,ccui.ScrollView.DIR_HORIZONTAL),this.addProtectedChild(this._horizontalScrollBar,2))},_removeScrollBar:function(){this._verticalScrollBar&&(this.removeProtectedChild(this._verticalScrollBar),this._verticalScrollBar=null),this._horizontalScrollBar&&(this.removeProtectedChild(this._horizontalScrollBar),this._horizontalScrollBar=null)},getNodeByTag:function(t){return this._innerContainer.getNodeByTag(t)},getNodes:function(){return this._innerContainer.getNodes()},removeNode:function(t){this._innerContainer.removeNode(t)},removeNodeByTag:function(t){this._innerContainer.removeNodeByTag(t)},removeAllNodes:function(){this._innerContainer.removeAllNodes()},addNode:function(t,e,i){this._innerContainer.addNode(t,e,i)}}),_p=ccui.ScrollView.prototype,cc.defineGetterSetter(_p,"innerWidth",_p._getInnerWidth,_p._setInnerWidth),cc.defineGetterSetter(_p,"innerHeight",_p._getInnerHeight,_p._setInnerHeight),cc.defineGetterSetter(_p,"direction",_p.getDirection,_p.setDirection),cc.defineGetterSetter(_p,"touchTotalTimeThreshold",_p.getTouchTotalTimeThreshold,_p.setTouchTotalTimeThreshold),_p=null,ccui.ScrollView.create=function(){return new ccui.ScrollView},ccui.ScrollView.DIR_NONE=0,ccui.ScrollView.DIR_VERTICAL=1,ccui.ScrollView.DIR_HORIZONTAL=2,ccui.ScrollView.DIR_BOTH=3,ccui.ScrollView.EVENT_SCROLL_TO_TOP=0,ccui.ScrollView.EVENT_SCROLL_TO_BOTTOM=1,ccui.ScrollView.EVENT_SCROLL_TO_LEFT=2,ccui.ScrollView.EVENT_SCROLL_TO_RIGHT=3,ccui.ScrollView.EVENT_SCROLLING=4,ccui.ScrollView.EVENT_BOUNCE_TOP=5,ccui.ScrollView.EVENT_BOUNCE_BOTTOM=6,ccui.ScrollView.EVENT_BOUNCE_LEFT=7,ccui.ScrollView.EVENT_BOUNCE_RIGHT=8,ccui.ScrollView.EVENT_CONTAINER_MOVED=9,ccui.ScrollView.EVENT_AUTOSCROLL_ENDED=10,ccui.ScrollView.MOVEDIR_TOP=0,ccui.ScrollView.MOVEDIR_BOTTOM=1,ccui.ScrollView.MOVEDIR_LEFT=2,ccui.ScrollView.MOVEDIR_RIGHT=3,ccui.ListView=ccui.ScrollView.extend({_model:null,_items:null,_gravity:null,_itemsMargin:0,_curSelectedIndex:0,_refreshViewDirty:!0,_listViewEventListener:null,_listViewEventSelector:null,_ccListViewEventCallback:null,_magneticAllowedOutOfBoundary:!0,_magneticType:0,_className:"ListView",ctor:function(){this._items=[],ccui.ScrollView.prototype.ctor.call(this),this._gravity=ccui.ListView.GRAVITY_CENTER_VERTICAL,this.setTouchEnabled(!0),this.setDirection(ccui.ScrollView.DIR_VERTICAL)},setItemModel:function(t){t?this._model=t:cc.log("Can't set a null to item model!")},_handleReleaseLogic:function(t){ccui.ScrollView.prototype._handleReleaseLogic.call(this,t),this._autoScrolling||this._startMagneticScroll()},_onItemListChanged:function(){this._outOfBoundaryAmountDirty=!0},_updateInnerContainerSize:function(){var t,e,i=this._items;switch(this.direction){case ccui.ScrollView.DIR_VERTICAL:var n=((e=i.length)-1)*this._itemsMargin;for(t=0;t<e;t++)n+=i[t].getContentSize().height;this.setInnerContainerSize(cc.size(this._contentSize.width,n));break;case ccui.ScrollView.DIR_HORIZONTAL:for(n=((e=i.length)-1)*this._itemsMargin,t=0;t<e;t++)n+=i[t].getContentSize().width;this.setInnerContainerSize(cc.size(n,this._contentSize.height))}},_remedyLayoutParameter:function(t){cc.assert(null!=t,"ListView Item can't be nil!");var e=t.getLayoutParameter(ccui.LayoutParameter.LINEAR),i=!0;e||(e=new ccui.LinearLayoutParameter,i=!1);var n=this.getIndex(t);switch(this.direction){case ccui.ScrollView.DIR_VERTICAL:this._remedyVerticalLayoutParameter(e,n);break;case ccui.ScrollView.DIR_HORIZONTAL:this._remedyHorizontalLayoutParameter(e,n)}i||t.setLayoutParameter(e)},_remedyVerticalLayoutParameter:function(t,e){switch(cc.assert(null!=t,"Layout parameter can't be nil!"),this._gravity){case ccui.ListView.GRAVITY_LEFT:t.setGravity(ccui.LinearLayoutParameter.LEFT);break;case ccui.ListView.GRAVITY_RIGHT:t.setGravity(ccui.LinearLayoutParameter.RIGHT);break;case ccui.ListView.GRAVITY_CENTER_HORIZONTAL:t.setGravity(ccui.LinearLayoutParameter.CENTER_HORIZONTAL)}0===e?t.setMargin(ccui.MarginZero()):t.setMargin(new ccui.Margin(0,this._itemsMargin,0,0))},_remedyHorizontalLayoutParameter:function(t,e){switch(cc.assert(null!=t,"Layout parameter can't be nil!"),this._gravity){case ccui.ListView.GRAVITY_TOP:t.setGravity(ccui.LinearLayoutParameter.TOP);break;case ccui.ListView.GRAVITY_BOTTOM:t.setGravity(ccui.LinearLayoutParameter.BOTTOM);break;case ccui.ListView.GRAVITY_CENTER_VERTICAL:t.setGravity(ccui.LinearLayoutParameter.CENTER_VERTICAL)}0===e?t.setMargin(ccui.MarginZero()):t.setMargin(new ccui.Margin(this._itemsMargin,0,0,0))},pushBackDefaultItem:function(){if(null!=this._model){var t=this._model.clone();this._remedyLayoutParameter(t),this.addChild(t),this._refreshViewDirty=!0}},insertDefaultItem:function(t){if(null!=this._model){var e=this._model.clone();this._items.splice(t,0,e),ccui.ScrollView.prototype.addChild.call(this,e),this._remedyLayoutParameter(e),this._refreshViewDirty=!0}},pushBackCustomItem:function(t){this._remedyLayoutParameter(t),this.addChild(t),this._refreshViewDirty=!0},addChild:function(t,e,i){t&&(e=e||t.getLocalZOrder(),i=i||t.getName(),ccui.ScrollView.prototype.addChild.call(this,t,e,i),t instanceof ccui.Widget&&(this._items.push(t),this._onItemListChanged()))},removeChild:function(t,e){if(t){var i=this._items.indexOf(t);-1<i&&this._items.splice(i,1),this._onItemListChanged(),ccui.ScrollView.prototype.removeChild.call(this,t,e)}},removeAllChildren:function(){this.removeAllChildrenWithCleanup(!0)},removeAllChildrenWithCleanup:function(t){ccui.ScrollView.prototype.removeAllChildrenWithCleanup.call(this,t),this._items=[],this._onItemListChanged()},insertCustomItem:function(t,e){this._items.splice(e,0,t),this._onItemListChanged(),ccui.ScrollView.prototype.addChild.call(this,t),this._remedyLayoutParameter(t),this._refreshViewDirty=!0},removeItem:function(t){null!=(t=this.getItem(t))&&(this.removeChild(t,!0),this._refreshViewDirty=!0)},removeLastItem:function(){this.removeItem(this._items.length-1)},removeAllItems:function(){this.removeAllChildren()},getItem:function(t){return 0>t||t>=this._items.length?null:this._items[t]},getItems:function(){return this._items},getIndex:function(t){return null==t?-1:this._items.indexOf(t)},setGravity:function(t){this._gravity!==t&&(this._gravity=t,this._refreshViewDirty=!0)},setMagneticType:function(t){this._magneticType=t,this._onItemListChanged(),this._startMagneticScroll()},getMagneticType:function(){return this._magneticType},setMagneticAllowedOutOfBoundary:function(t){this._magneticAllowedOutOfBoundary=t},getMagneticAllowedOutOfBoundary:function(){return this._magneticAllowedOutOfBoundary},setItemsMargin:function(t){this._itemsMargin!==t&&(this._itemsMargin=t,this._refreshViewDirty=!0)},getItemsMargin:function(){return this._itemsMargin},setDirection:function(t){switch(t){case ccui.ScrollView.DIR_VERTICAL:this.setLayoutType(ccui.Layout.LINEAR_VERTICAL);break;case ccui.ScrollView.DIR_HORIZONTAL:this.setLayoutType(ccui.Layout.LINEAR_HORIZONTAL);break;case ccui.ScrollView.DIR_BOTH:default:return}ccui.ScrollView.prototype.setDirection.call(this,t)},_getHowMuchOutOfBoundary:function(t){if(void 0===t&&(t=cc.p(0,0)),!this._magneticAllowedOutOfBoundary||0===this._items.length)return ccui.ScrollView.prototype._getHowMuchOutOfBoundary.call(this,t);if(this._magneticType===ccui.ListView.MAGNETIC_NONE||this._magneticType===ccui.ListView.MAGNETIC_BOTH_END)return ccui.ScrollView.prototype._getHowMuchOutOfBoundary.call(this,t);if(0===t.x&&0===t.y&&!this._outOfBoundaryAmountDirty)return this._outOfBoundaryAmount;var e=this._leftBoundary,i=this._rightBoundary,n=this._topBoundary,s=this._bottomBoundary,r=this._items.length-1,o=this.getContentSize(),a=cc.p(0,0),c=cc.p(0,0);switch(this._magneticType){case ccui.ListView.MAGNETIC_CENTER:a.x=(o.width-this._items[0].width)/2,a.y=(o.height-this._items[0].height)/2,c.x=(o.width-this._items[r].width)/2,c.y=(o.height-this._items[r].height)/2;break;case ccui.ListView.MAGNETIC_LEFT:case ccui.ListView.MAGNETIC_TOP:c.x=o.width-this._items[r].width,c.y=o.height-this._items[r].height;break;case ccui.ListView.MAGNETIC_RIGHT:case ccui.ListView.MAGNETIC_BOTTOM:a.x=o.width-this._items[0].width,a.y=o.height-this._items[0].height}return e+=a.x,i-=c.x,n-=a.y,s+=c.y,r=cc.p(0,0),this._innerContainer.getLeftBoundary()+t.x>e?r.x=e-(this._innerContainer.getLeftBoundary()+t.x):this._innerContainer.getRightBoundary()+t.x<i&&(r.x=i-(this._innerContainer.getRightBoundary()+t.x)),this._innerContainer.getTopBoundary()+t.y<n?r.y=n-(this._innerContainer.getTopBoundary()+t.y):this._innerContainer.getBottomBoundary()+t.y>s&&(r.y=s-(this._innerContainer.getBottomBoundary()+t.y)),0===t.x&&0===t.y&&(this._outOfBoundaryAmount=r,this._outOfBoundaryAmountDirty=!1),r},_calculateItemPositionWithAnchor:function(t,e){var i=cc.p(t.getLeftBoundary(),t.getBottomBoundary()),n=t.getContentSize();return cc.p(i.x+n.width*e.x,i.y+n.height*e.y)},_findClosestItem:function(t,e,i,n,s,r,o){if(cc.assert(0<=n&&r<e.length&&n<=r,""),n===r)return e[n];if(1==r-n)return s<=o?e[n]:e[r];var a=Math.floor((n+r)/2),c=this._calculateItemPositionWithAnchor(e[a],i);c=cc.pLength(cc.pSub(t,c));return s<=o?this._findClosestItem(t,e,i,n,s,a,c):this._findClosestItem(t,e,i,a,c,r,o)},getClosestItemToPosition:function(t,e){if(0===this._items.length)return null;var i=this._calculateItemPositionWithAnchor(this._items[0],e),n=(i=cc.pLength(cc.pSub(t,i)),this._items.length-1),s=this._calculateItemPositionWithAnchor(this._items[n],e);s=cc.pLength(cc.pSub(t,s));return this._findClosestItem(t,this._items,e,0,i,n,s)},getClosestItemToPositionInCurrentView:function(t,e){var i=this.getContentSize(),n=cc.pMult(this._innerContainer.getPosition(),-1);return n.x+=i.width*t.x,n.y+=i.height*t.y,this.getClosestItemToPosition(n,e)},getCenterItemInCurrentView:function(){return this.getClosestItemToPositionInCurrentView(cc.p(.5,.5),cc.p(.5,.5))},getLeftmostItemInCurrentView:function(){return this._direction===ccui.ScrollView.DIR_HORIZONTAL?this.getClosestItemToPositionInCurrentView(cc.p(0,.5),cc.p(.5,.5)):null},getRightmostItemInCurrentView:function(){return this._direction===ccui.ScrollView.DIR_HORIZONTAL?this.getClosestItemToPositionInCurrentView(cc.p(1,.5),cc.p(.5,.5)):null},getTopmostItemInCurrentView:function(){return this._direction===ccui.ScrollView.DIR_VERTICAL?this.getClosestItemToPositionInCurrentView(cc.p(.5,1),cc.p(.5,.5)):null},getBottommostItemInCurrentView:function(){return this._direction===ccui.ScrollView.DIR_VERTICAL?this.getClosestItemToPositionInCurrentView(cc.p(.5,0),cc.p(.5,.5)):null},_calculateItemDestination:function(t,e,i){var n=this.getContentSize(),s=cc.p(0,0);return s.x+=n.width*t.x,s.y+=n.height*t.y,t=this._calculateItemPositionWithAnchor(e,i),cc.pMult(cc.pSub(t,s),-1)},jumpToBottom:function(){this.doLayout(),ccui.ScrollView.prototype.jumpToBottom.call(this)},jumpToTop:function(){this.doLayout(),ccui.ScrollView.prototype.jumpToTop.call(this)},jumpToLeft:function(){this.doLayout(),ccui.ScrollView.prototype.jumpToLeft.call(this)},jumpToRight:function(){this.doLayout(),ccui.ScrollView.prototype.jumpToRight.call(this)},jumpToTopLeft:function(){this.doLayout(),ccui.ScrollView.prototype.jumpToTopLeft.call(this)},jumpToTopRight:function(){this.doLayout(),ccui.ScrollView.prototype.jumpToTopRight.call(this)},jumpToBottomLeft:function(){this.doLayout(),ccui.ScrollView.prototype.jumpToBottomLeft.call(this)},jumpToBottomRight:function(){this.doLayout(),ccui.ScrollView.prototype.jumpToBottomRight.call(this)},jumpToPercentVertical:function(t){this.doLayout(),ccui.ScrollView.prototype.jumpToPercentVertical.call(this,t)},jumpToPercentHorizontal:function(t){this.doLayout(),ccui.ScrollView.prototype.jumpToPercentHorizontal.call(this,t)},jumpToPercentBothDirection:function(t){this.doLayout(),ccui.ScrollView.prototype.jumpToPercentBothDirection.call(this,t)},jumpToItem:function(t,e,i){(t=this.getItem(t))&&(this.doLayout(),e=this._calculateItemDestination(e,t,i),this.bounceEnabled||(i=cc.pSub(e,this._innerContainer.getPosition()),i=this._getHowMuchOutOfBoundary(i),e.x+=i.x,e.y+=i.y),this._jumpToDestination(e))},scrollToItem:function(t,e,i,n){void 0===n&&(n=1),(t=this.getItem(t))&&(e=this._calculateItemDestination(e,t,i),this._startAutoScrollToDestination(e,n,!0))},requestRefreshView:function(){this._refreshViewDirty=!0},refreshView:function(){this.forceDoLayout()},doLayout:function(){this._doLayout()},requestDoLayout:function(){this._refreshViewDirty=!0},_doLayout:function(){if(this._refreshViewDirty){for(var t=this._items,e=0;e<t.length;e++){var i=t[e];i.setLocalZOrder(e),this._remedyLayoutParameter(i)}this._updateInnerContainerSize(),this._innerContainer.forceDoLayout(),this._refreshViewDirty=!1}},addEventListenerListView:function(t,e){this._listViewEventListener=e,this._listViewEventSelector=t},addEventListener:function(t){this._ccListViewEventCallback=t},_selectedItemEvent:function(t){t=t===ccui.Widget.TOUCH_BEGAN?ccui.ListView.ON_SELECTED_ITEM_START:ccui.ListView.ON_SELECTED_ITEM_END,this._listViewEventSelector&&(this._listViewEventListener?this._listViewEventSelector.call(this._listViewEventListener,this,t):this._listViewEventSelector(this,t)),this._ccListViewEventCallback&&this._ccListViewEventCallback(this,t)},interceptTouchEvent:function(t,e,i){if(ccui.ScrollView.prototype.interceptTouchEvent.call(this,t,e,i),this._touchEnabled&&t!==ccui.Widget.TOUCH_MOVED){for(i=e;i;){if(i&&i.getParent()===this._innerContainer){this._curSelectedIndex=this.getIndex(i);break}i=i.getParent()}e.isHighlighted()&&this._selectedItemEvent(t)}},getCurSelectedIndex:function(){return this._curSelectedIndex},_onSizeChanged:function(){ccui.ScrollView.prototype._onSizeChanged.call(this),this._refreshViewDirty=!0},getDescription:function(){return"ListView"},_createCloneInstance:function(){return new ccui.ListView},_copyClonedWidgetChildren:function(t){t=t.getItems();for(var e=0;e<t.length;e++)this.pushBackCustomItem(t[e].clone())},_copySpecialProperties:function(t){t instanceof ccui.ListView&&(ccui.ScrollView.prototype._copySpecialProperties.call(this,t),this.setItemModel(t._model),this.setItemsMargin(t._itemsMargin),this.setGravity(t._gravity),this._listViewEventListener=t._listViewEventListener,this._listViewEventSelector=t._listViewEventSelector)},_startAttenuatingAutoScroll:function(t,e){var i=t;if(0!==this._items.length&&this._magneticType!==ccui.ListView.MAGNETIC_NONE){i=this._flattenVectorByDirection(i);if(0===(n=this._getHowMuchOutOfBoundary(i)).x&&0===n.y){(n=this._magneticType)===ccui.ListView.MAGNETIC_BOTH_END&&(this._direction===ccui.ScrollView.DIR_HORIZONTAL?n=0<i.x?ccui.ListView.MAGNETIC_LEFT:ccui.ListView.MAGNETIC_RIGHT:this._direction===ccui.ScrollView.DIR_VERTICAL&&(n=0<i.y?ccui.ListView.MAGNETIC_BOTTOM:ccui.ListView.MAGNETIC_TOP));var n,s=this._getAnchorPointByMagneticType(n);(n=cc.pMult(this._innerContainer.getPosition(),-1)).x+=this.width*s.x,n.y+=this.height*s.y,i=this.getClosestItemToPosition(cc.pSub(n,i),s),i=this._calculateItemPositionWithAnchor(i,s),i=cc.pSub(n,i)}}ccui.ScrollView.prototype._startAttenuatingAutoScroll.call(this,i,e)},_getAnchorPointByMagneticType:function(t){switch(t){case ccui.ListView.MAGNETIC_BOTH_END:return cc.p(0,1);case ccui.ListView.MAGNETIC_CENTER:return cc.p(.5,.5);case ccui.ListView.MAGNETIC_LEFT:return cc.p(0,.5);case ccui.ListView.MAGNETIC_RIGHT:return cc.p(1,.5);case ccui.ListView.MAGNETIC_TOP:return cc.p(.5,1);case ccui.ListView.MAGNETIC_BOTTOM:return cc.p(.5,0)}return cc.p(0,0)},_startMagneticScroll:function(){if(0!==this._items.length&&this._magneticType!==ccui.ListView.MAGNETIC_NONE){var t=this._getAnchorPointByMagneticType(this._magneticType),e=cc.pMult(this._innerContainer.getPosition(),-1);e.x+=this.width*t.x,e.y+=this.height*t.y,e=this.getClosestItemToPosition(e,t),this.scrollToItem(this.getIndex(e),t,t)}}}),ccui.ListView.create=function(){return new ccui.ListView},ccui.ListView.EVENT_SELECTED_ITEM=0,ccui.ListView.ON_SELECTED_ITEM_START=0,ccui.ListView.ON_SELECTED_ITEM_END=1,ccui.ListView.GRAVITY_LEFT=0,ccui.ListView.GRAVITY_RIGHT=1,ccui.ListView.GRAVITY_CENTER_HORIZONTAL=2,ccui.ListView.GRAVITY_TOP=3,ccui.ListView.GRAVITY_BOTTOM=4,ccui.ListView.GRAVITY_CENTER_VERTICAL=5,ccui.ListView.MAGNETIC_NONE=0,ccui.ListView.MAGNETIC_CENTER=1,ccui.ListView.MAGNETIC_BOTH_END=2,ccui.ListView.MAGNETIC_LEFT=3,ccui.ListView.MAGNETIC_RIGHT=4,ccui.ListView.MAGNETIC_TOP=5,ccui.ListView.MAGNETIC_BOTTOM=6,ccui.PageView=ccui.ListView.extend({_curPageIdx:0,_childFocusCancelOffset:0,_pageViewEventListener:null,_pageViewEventSelector:null,_className:"PageView",_indicator:null,_indicatorPositionAsAnchorPoint:null,ctor:function(){ccui.ListView.prototype.ctor.call(this),this._childFocusCancelOffset=5,this._indicatorPositionAsAnchorPoint=cc.p(.5,.1),this._pageViewEventSelector=this._pageViewEventListener=null,this.setDirection(ccui.ScrollView.DIR_HORIZONTAL),this.setMagneticType(ccui.ListView.MAGNETIC_CENTER),this.setScrollBarEnabled(!1)},addWidgetToPage:function(t,e,i){this.insertCustomItem(t,e)},addPage:function(t){this.pushBackCustomItem(t)},insertPage:function(t,e){this.insertCustomItem(t,e)},removePage:function(t){this.removeItem(this.getIndex(t))},removePageAtIndex:function(t){this.removeItem(t)},removeAllPages:function(){this.removeAllItems()},scrollToItem:function(t){ccui.ListView.prototype.scrollToItem.call(this,t,cc.p(.5,.5),cc.p(.5,.5))},scrollToPage:function(t){this.scrollToItem(t)},_doLayout:function(){if(this._refreshViewDirty){if(ccui.ListView.prototype._doLayout.call(this),this._indicator){var t=this.getIndex(this.getCenterItemInCurrentView());this._indicator.indicate(t)}this._refreshViewDirty=!1}},setDirection:function(t){ccui.ListView.prototype.setDirection.call(this,t),t===ccui.ScrollView.DIR_HORIZONTAL?this._indicatorPositionAsAnchorPoint=cc.p(.5,.1):t===ccui.ScrollView.DIR_VERTICAL&&(this._indicatorPositionAsAnchorPoint=cc.p(.1,.5)),this._indicator&&(this._indicator.setDirection(t),this._refreshIndicatorPosition())},setCustomScrollThreshold:function(t){},getCustomScrollThreshold:function(){return 0},setUsingCustomScrollThreshold:function(t){},isUsingCustomScrollThreshold:function(){return!1},_moveInnerContainer:function(t,e){ccui.ListView.prototype._moveInnerContainer.call(this,t,e),this._curPageIdx=this.getIndex(this.getCenterItemInCurrentView()),this._indicator&&this._indicator.indicate(this._curPageIdx)},_onItemListChanged:function(){ccui.ListView.prototype._onItemListChanged.call(this),this._indicator&&this._indicator.reset(this._items.length)},_onSizeChanged:function(){ccui.ListView.prototype._onSizeChanged.call(this),this._refreshIndicatorPosition()},_remedyLayoutParameter:function(t){t.setContentSize(this.getContentSize()),ccui.ListView.prototype._remedyLayoutParameter.call(this,t)},_refreshIndicatorPosition:function(){if(this._indicator){var t=this.getContentSize();this._indicator.setPosition(cc.p(t.width*this._indicatorPositionAsAnchorPoint.x,t.height*this._indicatorPositionAsAnchorPoint.y))}},_handleReleaseLogic:function(t){if(ccui.ScrollView.prototype._handleReleaseLogic.call(this,t),!(0>=this._items.length))if(t=this._flattenVectorByDirection(this._calculateTouchMoveVelocity()),500>cc.pLength(t))this._startMagneticScroll();else{var e=this.getItem(this._curPageIdx);e=this._calculateItemDestination(cc.p(.5,.5),e,cc.p(.5,.5)),e=cc.pSub(e,this.getInnerContainerPosition()),e=this._flattenVectorByDirection(e);0<t.x*e.x||0<t.y*e.y?this._startMagneticScroll():(0>t.x||0<t.y?++this._curPageIdx:--this._curPageIdx,this._curPageIdx=Math.min(this._curPageIdx,this._items.length),this._curPageIdx=Math.max(this._curPageIdx,0),this.scrollToItem(this._curPageIdx))}},_getAutoScrollStopEpsilon:function(){return.001},_pageTurningEvent:function(){this._pageViewEventSelector&&(this._pageViewEventListener?this._pageViewEventSelector.call(this._pageViewEventListener,this,ccui.PageView.EVENT_TURNING):this._pageViewEventSelector(this,ccui.PageView.EVENT_TURNING)),this._ccEventCallback&&this._ccEventCallback(this,ccui.PageView.EVENT_TURNING)},addEventListenerPageView:function(t,e){this._pageViewEventSelector=t,this._pageViewEventListener=e},addEventListener:function(t){this._ccEventCallback=function(e,i){i==ccui.ScrollView.EVENT_AUTOSCROLL_ENDED&&t(this,i)}},setCurrentPageIndex:function(t){this.jumpToItem(t,cc.p(.5,.5),cc.p(.5,.5))},setCurPageIndex:function(t){this.setCurrentPageIndex(t)},getCurrentPageIndex:function(){return this._curPageIdx},getCurPageIndex:function(){var t=this.getCenterItemInCurrentView();return this.getIndex(t)},getPages:function(){return this.getItems()},getPage:function(t){return this.getItem(t)},getDescription:function(){return"PageView"},_createCloneInstance:function(){return new ccui.PageView},_copyClonedWidgetChildren:function(t){t=t.getPages();for(var e=0;e<t.length;e++)this.addPage(t[e].clone())},_copySpecialProperties:function(t){ccui.ListView.prototype._copySpecialProperties.call(this,t),this._ccEventCallback=t._ccEventCallback,this._pageViewEventListener=t._pageViewEventListener,this._pageViewEventSelector=t._pageViewEventSelector,this._customScrollThreshold=t._customScrollThreshold},setIndicatorEnabled:function(t){t!=(null!==this._indicator)&&(t?(this._indicator=new ccui.PageViewIndicator,this._indicator.setDirection(this.getDirection()),this.addProtectedChild(this._indicator,1e4),this.setIndicatorSelectedIndexColor(cc.color(100,100,255)),this._refreshIndicatorPosition()):(this.removeProtectedChild(this._indicator),this._indicator=null))},getIndicatorEnabled:function(){return null!==this._indicator},setIndicatorPositionAsAnchorPoint:function(t){this._indicatorPositionAsAnchorPoint=t,this._refreshIndicatorPosition()},getIndicatorPositionAsAnchorPoint:function(){return this._indicatorPositionAsAnchorPoint},setIndicatorPosition:function(t){if(this._indicator){var e=this.getContentSize();this._indicatorPositionAsAnchorPoint.x=t.x/e.width,this._indicatorPositionAsAnchorPoint.y=t.y/e.height,this._indicator.setPosition(t)}},getIndicatorPosition:function(){return cc.assert(null!==this._indicator,""),this._indicator.getPosition()},setIndicatorSpaceBetweenIndexNodes:function(t){this._indicator&&this._indicator.setSpaceBetweenIndexNodes(t)},getIndicatorSpaceBetweenIndexNodes:function(){return cc.assert(null!==this._indicator,""),this._indicator.getSpaceBetweenIndexNodes()},setIndicatorSelectedIndexColor:function(t){this._indicator&&this._indicator.setSelectedIndexColor(t)},getIndicatorSelectedIndexColor:function(){return cc.assert(null!==this._indicator,""),this._indicator.getSelectedIndexColor()},setIndicatorIndexNodesColor:function(t){this._indicator&&this._indicator.setIndexNodesColor(t)},getIndicatorIndexNodesColor:function(){return cc.assert(null!==this._indicator,""),this._indicator.getIndexNodesColor()},setIndicatorIndexNodesScale:function(t){this._indicator&&(this._indicator.setIndexNodesScale(t),this._indicator.indicate(this._curPageIdx))},getIndicatorIndexNodesScale:function(){return cc.assert(null!==this._indicator,""),this._indicator.getIndexNodesScale()},setIndicatorIndexNodesTexture:function(t,e){this._indicator&&(this._indicator.setIndexNodesTexture(t,e),this._indicator.indicate(this._curPageIdx))}}),ccui.PageView.create=function(){return new ccui.PageView},ccui.PageView.EVENT_TURNING=0,ccui.PageView.TOUCH_DIR_LEFT=0,ccui.PageView.TOUCH_DIR_RIGHT=1,ccui.PageView.DIRECTION_LEFT=0,ccui.PageView.DIRECTION_RIGHT=1,ccui.PageViewIndicator=ccui.ProtectedNode.extend({_direction:null,_indexNodes:null,_currentIndexNode:null,_spaceBetweenIndexNodes:0,_indexNodesScale:1,_indexNodesColor:null,_useDefaultTexture:!0,_indexNodesTextureFile:"",_indexNodesTexType:ccui.Widget.LOCAL_TEXTURE,_className:"PageViewIndicator",ctor:function(){cc.ProtectedNode.prototype.ctor.call(this),this._direction=ccui.ScrollView.DIR_HORIZONTAL,this._indexNodes=[],this._spaceBetweenIndexNodes=ccui.PageViewIndicator.SPACE_BETWEEN_INDEX_NODES_DEFAULT,this._indexNodesColor=cc.color.WHITE,this._currentIndexNode=ccui.helper._createSpriteFromBase64(ccui.PageViewIndicator.CIRCLE_IMAGE,ccui.PageViewIndicator.CIRCLE_IMAGE_KEY),this._currentIndexNode.setVisible(!1),this.addProtectedChild(this._currentIndexNode,1)},setDirection:function(t){this._direction=t,this._rearrange()},reset:function(t){for(;this._indexNodes.length<t;)this._increaseNumberOfPages();for(;this._indexNodes.length>t;)this._decreaseNumberOfPages();this._rearrange(),this._currentIndexNode.setVisible(0<this._indexNodes.length)},indicate:function(t){0>t||t>=this._indexNodes.length||this._currentIndexNode.setPosition(this._indexNodes[t].getPosition())},_rearrange:function(){if(0!==this._indexNodes.length)for(var t=this._direction===ccui.ScrollView.DIR_HORIZONTAL,e=this._indexNodes[0].getContentSize(),i=t?e.width:e.height,n=-(i*(n=this._indexNodes.length)+this._spaceBetweenIndexNodes*(n-1))/2+i/2,s=0;s<this._indexNodes.length;++s){var r;r=t?cc.p(n,e.height/2):cc.p(e.width/2,-n),this._indexNodes[s].setPosition(r),n+=i+this._spaceBetweenIndexNodes}},setSpaceBetweenIndexNodes:function(t){this._spaceBetweenIndexNodes!==t&&(this._spaceBetweenIndexNodes=t,this._rearrange())},getSpaceBetweenIndexNodes:function(){return this._spaceBetweenIndexNodes},setSelectedIndexColor:function(t){this._currentIndexNode.setColor(t)},getSelectedIndexColor:function(){return this._currentIndexNode.getColor()},setIndexNodesColor:function(t){this._indexNodesColor=t;for(var e=0;e<this._indexNodes.length;++e)this._indexNodes[e].setColor(t)},getIndexNodesColor:function(){var t=this._indexNodesColor;return cc.color(t.r,t.g,t.b,t.a)},setIndexNodesScale:function(t){if(this._indexNodesScale!==t){for(this._indexNodesScale=t,this._currentIndexNode.setScale(t),t=0;t<this._indexNodes.length;++t)this._indexNodes[t].setScale(this,_indexNodesScale);this._rearrange()}},getIndexNodesScale:function(){return this._indexNodesScale},setIndexNodesTexture:function(t,e){switch(void 0===e&&(e=ccui.Widget.LOCAL_TEXTURE),this._useDefaultTexture=!1,this._indexNodesTextureFile=t,this._indexNodesTexType=e,e){case ccui.Widget.LOCAL_TEXTURE:this._currentIndexNode.setTexture(t);for(var i=0;i<this._indexNodes.length;++i)this._indexNodes[i].setTexture(t);break;case ccui.Widget.PLIST_TEXTURE:for(this._currentIndexNode.setSpriteFrame(t),i=0;i<this._indexNodes.length;++i)this._indexNodes[i].setSpriteFrame(t)}this._rearrange()},_increaseNumberOfPages:function(){var t;if(this._useDefaultTexture)t=ccui.helper._createSpriteFromBase64(ccui.PageViewIndicator.CIRCLE_IMAGE,ccui.PageViewIndicator.CIRCLE_IMAGE_KEY);else switch(t=new cc.Sprite,this._indexNodesTexType){case ccui.Widget.LOCAL_TEXTURE:t.initWithFile(this._indexNodesTextureFile);break;case ccui.Widget.PLIST_TEXTURE:t.initWithSpriteFrameName(this._indexNodesTextureFile)}t.setColor(this._indexNodesColor),t.setScale(this._indexNodesScale),this.addProtectedChild(t),this._indexNodes.push(t)},_decreaseNumberOfPages:function(){0!==this._indexNodes.length&&(this.removeProtectedChild(this._indexNodes[0]),this._indexNodes.splice(0,1))},clear:function(){for(var t=0;t<this._indexNodes.length;++t)this.removeProtectedChild(this._indexNodes[t]);this._indexNodes.length=0,this._currentIndexNode.setVisible(!1)}}),_p=ccui.PageViewIndicator.prototype,cc.defineGetterSetter(_p,"spaceBetweenIndexNodes",_p.getSpaceBetweenIndexNodes,_p.setSpaceBetweenIndexNodes),ccui.PageViewIndicator.SPACE_BETWEEN_INDEX_NODES_DEFAULT=23,ccui.PageViewIndicator.CIRCLE_IMAGE_KEY="/__circle_image",ccui.PageViewIndicator.CIRCLE_IMAGE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAA8ElEQVRIx62VyRGCQBBF+6gWRCEmYDIQkhiBCgHhSclC8YqWzOV5oVzKAYZp3r1/9fpbxAIBMTsKrjx5cqVgR0wgLhCRUWOjJiPqD56xoaGPhpRZV/iSEy6crHmw5oIrF9b/lVeMofrJgjlnxlIy/wik+JB+mme8BExbBhm+5CJC2LE2LtSEQoyGWDioBA5CoRIohJtK4CYDxzNEM4GAugR1E9VjVC+SZpXvhCJCrjomESLvc17pDGX7bWmlh6UtpjPVCWy9zaJ0TD7qfm3pwERMz2trRVZk3K3BD/L34AY+dEDCniMVBkPFkT2J/b2/AIV+dRpFLOYoAAAAAElFTkSuQmCC",function(){if(ccui.ProtectedNode.CanvasRenderCmd){ccui.ScrollView.CanvasRenderCmd=function(t){this._layoutCmdCtor(t),this._dirty=!1};var t=ccui.ScrollView.CanvasRenderCmd.prototype=Object.create(ccui.Layout.CanvasRenderCmd.prototype);t.constructor=ccui.ScrollView.CanvasRenderCmd,t.rendering=function(t){var e,i=cc.renderer._cacheToCanvasCmds[this._node.__instanceId],n=cc.view.getScaleX(),s=cc.view.getScaleY(),r=t||cc._renderContext;for(r.computeRealOffsetY(),this._node.updateChildren(),t=0,e=i.length;t<e;t++){var o=i[t]._node;o instanceof ccui.ScrollView||o&&o._parent&&!1===o._parent._inViewRect||i[t].rendering(r,n,s)}}}}(),function(){if(ccui.ProtectedNode.WebGLRenderCmd){ccui.ScrollView.WebGLRenderCmd=function(t){this._layoutCmdCtor(t),this._needDraw=!0,this._dirty=!1};var t=ccui.ScrollView.WebGLRenderCmd.prototype=Object.create(ccui.Layout.WebGLRenderCmd.prototype);t.constructor=ccui.ScrollView.WebGLRenderCmd,t.rendering=function(t){var e,i,n,s=cc.renderer._cacheToBufferCmds[this._node.__instanceId],r=t||cc._renderContext;if(s)for(this._node.updateChildren(),r.bindBuffer(gl.ARRAY_BUFFER,null),t=0,e=s.length;t<e;t++)(i=(n=s[t])._node)&&i._parent&&!1===i._parent._inViewRect||(n.uploadData?cc.renderer._uploadBufferData(n):(0<n._batchingSize&&cc.renderer._batchRendering(),n.rendering(r)),cc.renderer._batchRendering())}}}(),cc.Component=cc.Class.extend({_owner:null,_name:"",_enabled:!0,ctor:function(){this._owner=null,this._name="",this._enabled=!0},init:function(){return!0},onEnter:function(){},onExit:function(){},update:function(t){},serialize:function(t){},isEnabled:function(){return this._enabled},setEnabled:function(t){this._enabled=t},getName:function(){return this._name},setName:function(t){this._name=t},setOwner:function(t){this._owner=t},getOwner:function(){return this._owner}}),cc.Component.create=function(){return new cc.Component},cc.ComponentContainer=cc.Class.extend({_components:null,_owner:null,ctor:function(t){this._components=null,this._owner=t},getComponent:function(t){if(!t)throw Error("cc.ComponentContainer.getComponent(): name should be non-null");return t=t.trim(),this._components||(this._components={}),this._components[t]},add:function(t){if(!t)throw Error("cc.ComponentContainer.add(): component should be non-null");return t.getOwner()?(cc.log("cc.ComponentContainer.add(): Component already added. It can't be added again"),!1):(null==this._components&&(this._components={},this._owner.scheduleUpdate()),this._components[t.getName()]?(cc.log("cc.ComponentContainer.add(): Component already added. It can't be added again"),!1):(t.setOwner(this._owner),this._components[t.getName()]=t,t.onEnter(),!0))},remove:function(t){if(!t)throw Error("cc.ComponentContainer.remove(): name should be non-null");return!!this._components&&(t instanceof cc.Component?this._removeByComponent(t):(t=t.trim(),this._removeByComponent(this._components[t])))},_removeByComponent:function(t){return!!t&&(t.onExit(),t.setOwner(null),delete this._components[t.getName()],!0)},removeAll:function(){if(this._components){var t,e=this._components;for(t in e){var i=e[t];i.onExit(),i.setOwner(null),delete e[t]}this._owner.unscheduleUpdate(),this._components=null}},_alloc:function(){this._components={}},visit:function(t){if(this._components){var e,i=this._components;for(e in i)i[e].update(t)}},isEmpty:function(){return!this._components||0===this._components.length}}),ccui.LayoutComponent_ReferencePoint={BOTTOM_LEFT:0,TOP_LEFT:1,BOTTOM_RIGHT:2,TOP_RIGHT:3},ccui.LayoutComponent_PositionType={Position:0,RelativePosition:1,PreRelativePosition:2,PreRelativePositionEnable:3},ccui.LayoutComponent_SizeType={Size:0,PreSize:1,PreSizeEnable:2},ccui.LayoutComponent=cc.Component.extend({_horizontalEdge:0,_verticalEdge:0,_leftMargin:0,_rightMargin:0,_bottomMargin:0,_topMargin:0,_usingPositionPercentX:!1,_positionPercentX:0,_usingPositionPercentY:!1,_positionPercentY:0,_usingStretchWidth:!1,_usingStretchHeight:!1,_percentWidth:0,_usingPercentWidth:!1,_percentHeight:0,_usingPercentHeight:!1,_actived:!0,_isPercentOnly:!1,ctor:function(){this._name=ccui.LayoutComponent.NAME},init:function(){return!!cc.Component.prototype.init.call(this)},getPercentContentSize:function(){return cc.p(this._percentWidth,this._percentHeight)},setPercentContentSize:function(t){this.setPercentWidth(t.x),this.setPercentHeight(t.y)},setUsingPercentContentSize:function(t){this._usingPercentWidth=this._usingPercentHeight=t},SetActiveEnable:function(t){this._actived=t},getUsingPercentContentSize:function(){return this._usingPercentWidth&&this._usingPercentHeight},getAnchorPosition:function(){return this._owner.getAnchorPoint()},setAnchorPosition:function(t,e){var i=this._owner.getBoundingBox();this._owner.setAnchorPoint(t,e);var n=this._owner.getBoundingBox(),s=i.x-n.x;i=i.y-n.y;(n=this._owner.getPosition()).x+=s,n.y+=i,this.setPosition(n)},getPosition:function(){return this._owner.getPosition()},setPosition:function(t,e){var i,n=this._getOwnerParent();null!=n?(void 0===e?(i=t.x,e=t.y):i=t,0!==(n=n.getContentSize()).width?this._positionPercentX=i/n.width:(this._positionPercentX=0,this._usingPositionPercentX&&(i=0)),0!==n.height?this._positionPercentY=e/n.height:(this._positionPercentY=0,this._usingPositionPercentY&&(e=0)),this._owner.setPosition(i,e),this._refreshHorizontalMargin(),this._refreshVerticalMargin()):this._owner.setPosition(t,e)},isPositionPercentXEnabled:function(){return this._usingPositionPercentX},setPositionPercentXEnabled:function(t){(this._usingPositionPercentX=t)&&(this._horizontalEdge=ccui.LayoutComponent.horizontalEdge.NONE)},getPositionPercentX:function(){return this._positionPercentX},setPositionPercentX:function(t){this._positionPercentX=t,null!==(t=this._getOwnerParent())&&(this._owner.setPositionX(t.width*this._positionPercentX),this._refreshHorizontalMargin())},isPositionPercentYEnabled:function(){return this._usingPositionPercentY},setPositionPercentYEnabled:function(t){(this._usingPositionPercentY=t)&&(this._verticalEdge=ccui.LayoutComponent.verticalEdge.NONE)},getPositionPercentY:function(){return this._positionPercentY},setPositionPercentY:function(t){this._positionPercentY=t,null!==(t=this._getOwnerParent())&&(this._owner.setPositionY(t.height*this._positionPercentY),this._refreshVerticalMargin())},getHorizontalEdge:function(){return this._horizontalEdge},setHorizontalEdge:function(t){this._horizontalEdge=t,this._horizontalEdge!==ccui.LayoutComponent.horizontalEdge.NONE&&(this._usingPositionPercentX=!1);var e=this._getOwnerParent();null!==e&&(t=this._owner.getPosition(),0!==(e=e.getContentSize()).width?this._positionPercentX=t.x/e.width:(this._positionPercentX=0,t.x=0,this._usingPositionPercentX&&this._owner.setPosition(t)),this._refreshHorizontalMargin())},getVerticalEdge:function(){return this._verticalEdge},setVerticalEdge:function(t){this._verticalEdge=t,this._verticalEdge!==ccui.LayoutComponent.verticalEdge.NONE&&(this._usingPositionPercentY=!1);var e=this._getOwnerParent();null!==e&&(t=this._owner.getPosition(),0!==(e=e.getContentSize()).height?this._positionPercentY=t.y/e.height:(this._positionPercentY=0,t.y=0,this._usingPositionPercentY&&this._owner.setPosition(t)),this._refreshVerticalMargin())},getLeftMargin:function(){return this._leftMargin},setLeftMargin:function(t){this._leftMargin=t},getRightMargin:function(){return this._rightMargin},setRightMargin:function(t){this._rightMargin=t},getTopMargin:function(){return this._topMargin},setTopMargin:function(t){this._topMargin=t},getBottomMargin:function(){return this._bottomMargin},setBottomMargin:function(t){this._bottomMargin=t},getSize:function(){return this.getOwner().getContentSize()},setSize:function(t){var e=this._getOwnerParent();null!==e?(0!==(e=e.getContentSize()).width?this._percentWidth=t.width/e.width:(this._percentWidth=0,this._usingPercentWidth&&(t.width=0)),0!==e.height?this._percentHeight=t.height/e.height:(this._percentHeight=0,this._usingPercentHeight&&(t.height=0)),this._owner.setContentSize(t),this._refreshHorizontalMargin(),this._refreshVerticalMargin()):this._owner.setContentSize(t)},isPercentWidthEnabled:function(){return this._usingPercentWidth},setPercentWidthEnabled:function(t){(this._usingPercentWidth=t)&&(this._usingStretchWidth=!1)},getSizeWidth:function(){return this._owner.width},setSizeWidth:function(t){var e=this._owner.getContentSize();e.width=t,null!==(t=this._getOwnerParent())?(0!==(t=t.getContentSize()).width?this._percentWidth=e.width/t.width:(this._percentWidth=0,this._usingPercentWidth&&(e.width=0)),this._owner.setContentSize(e),this._refreshHorizontalMargin()):this._owner.setContentSize(e)},getPercentWidth:function(){return this._percentWidth},setPercentWidth:function(t){if(this._percentWidth=t,null!==(t=this._getOwnerParent())){var e=this._owner.getContentSize();e.width=t.width*this._percentWidth,this._owner.setContentSize(e),this._refreshHorizontalMargin()}},isPercentHeightEnabled:function(){return this._usingPercentHeight},setPercentHeightEnabled:function(t){(this._usingPercentHeight=t)&&(this._usingStretchHeight=!1)},getSizeHeight:function(){return this._owner.height},setSizeHeight:function(t){var e=this._owner.getContentSize();e.height=t,null!==(t=this._getOwnerParent())?(0!==(t=t.getContentSize()).height?this._percentHeight=e.height/t.height:(this._percentHeight=0,this._usingPercentHeight&&(e.height=0)),this._owner.setContentSize(e),this._refreshVerticalMargin()):this._owner.setContentSize(e)},getPercentHeight:function(){return this._percentHeight},setPercentHeight:function(t){if(this._percentHeight=t,null!==(t=this._getOwnerParent())){var e=this._owner.getContentSize();e.height=t.height*this._percentHeight,this._owner.setContentSize(e),this._refreshVerticalMargin()}},isStretchWidthEnabled:function(){return this._usingStretchWidth},setStretchWidthEnabled:function(t){(this._usingStretchWidth=t)&&(this._usingPercentWidth=!1)},isStretchHeightEnabled:function(){return this._usingStretchHeight},setStretchHeightEnabled:function(t){(this._usingStretchHeight=t)&&(this._usingPercentHeight=!1)},setPercentOnlyEnabled:function(t){this._isPercentOnly=t},setActiveEnabled:function(t){this._actived=t},refreshLayout:function(){if(this._actived&&null!==(t=this._getOwnerParent())){var t=t.getContentSize(),e=this._owner,i=e.getAnchorPoint(),n=e.getContentSize(),s=e.getPosition();switch(this._horizontalEdge){case ccui.LayoutComponent.horizontalEdge.NONE:this._usingStretchWidth&&!this._isPercentOnly?(n.width=t.width*this._percentWidth,s.x=this._leftMargin+i.x*n.width):(this._usingPositionPercentX&&(s.x=t.width*this._positionPercentX),this._usingPercentWidth&&(n.width=t.width*this._percentWidth));break;case ccui.LayoutComponent.horizontalEdge.LEFT:if(this._isPercentOnly)break;(this._usingPercentWidth||this._usingStretchWidth)&&(n.width=t.width*this._percentWidth),s.x=this._leftMargin+i.x*n.width;break;case ccui.LayoutComponent.horizontalEdge.RIGHT:if(this._isPercentOnly)break;(this._usingPercentWidth||this._usingStretchWidth)&&(n.width=t.width*this._percentWidth),s.x=t.width-(this._rightMargin+(1-i.x)*n.width);break;case ccui.LayoutComponent.horizontalEdge.CENTER:if(this._isPercentOnly)break;this._usingStretchWidth?(n.width=t.width-this._leftMargin-this._rightMargin,0>n.width&&(n.width=0),s.x=this._leftMargin+i.x*n.width):(this._usingPercentWidth&&(n.width=t.width*this._percentWidth),s.x=t.width*this._positionPercentX)}switch(this._verticalEdge){case ccui.LayoutComponent.verticalEdge.NONE:this._usingStretchHeight&&!this._isPercentOnly?(n.height=t.height*this._percentHeight,s.y=this._bottomMargin+i.y*n.height):(this._usingPositionPercentY&&(s.y=t.height*this._positionPercentY),this._usingPercentHeight&&(n.height=t.height*this._percentHeight));break;case ccui.LayoutComponent.verticalEdge.BOTTOM:if(this._isPercentOnly)break;(this._usingPercentHeight||this._usingStretchHeight)&&(n.height=t.height*this._percentHeight),s.y=this._bottomMargin+i.y*n.height;break;case ccui.LayoutComponent.verticalEdge.TOP:if(this._isPercentOnly)break;(this._usingPercentHeight||this._usingStretchHeight)&&(n.height=t.height*this._percentHeight),s.y=t.height-(this._topMargin+(1-i.y)*n.height);break;case ccui.LayoutComponent.verticalEdge.CENTER:if(this._isPercentOnly)break;this._usingStretchHeight?(n.height=t.height-this._topMargin-this._bottomMargin,0>n.height&&(n.height=0),s.y=this._bottomMargin+i.y*n.height):(this._usingPercentHeight&&(n.height=t.height*this._percentHeight),s.y=t.height*this._positionPercentY)}if(e.setPosition(s),e.setContentSize(n),e instanceof ccui.PageView)for(e.forceDoLayout(),t=e.getPages(),e=0;e<t.length;e++)ccui.helper.doLayout(t[e]);else ccui.helper.doLayout(e)}},_getOwnerParent:function(){return this._owner?this._owner.getParent():null},_refreshHorizontalMargin:function(){if(null!==(n=this._getOwnerParent())){var t=this._owner.getPosition(),e=this._owner.getAnchorPoint(),i=this._owner.getContentSize(),n=n.getContentSize();this._leftMargin=t.x-e.x*i.width,this._rightMargin=n.width-(t.x+(1-e.x)*i.width)}},_refreshVerticalMargin:function(){if(null!==(n=this._getOwnerParent())){var t=this._owner.getPosition(),e=this._owner.getAnchorPoint(),i=this._owner.getContentSize(),n=n.getContentSize();this._bottomMargin=t.y-e.y*i.height,this._topMargin=n.height-(t.y+(1-e.y)*i.height)}}}),ccui.LayoutComponent.horizontalEdge={NONE:0,LEFT:1,RIGHT:2,CENTER:3},ccui.LayoutComponent.verticalEdge={NONE:0,BOTTOM:1,TOP:2,CENTER:3},ccui.LayoutComponent.NAME="__ui_layout",ccui.LayoutComponent.bindLayoutComponent=function(t){var e=t.getComponent(ccui.LayoutComponent.NAME);return void 0!==e||((e=new ccui.LayoutComponent).init(),t.addComponent(e),t instanceof ccui.Widget||t.addEventListener&&t.addEventListener("load",(function(){e.refreshLayout()}),this)),e};var ccs=ccs||{};ccs.Class=ccs.Class||cc.Class,ccs.Class.extend=ccs.Class.extend||cc.Class.extend,ccs.Node=ccs.Node||cc.Node,ccs.Node.extend=ccs.Node.extend||cc.Node.extend,ccs.Sprite=ccs.Sprite||cc.Sprite,ccs.Sprite.extend=ccs.Sprite.extend||cc.Sprite.extend,ccs.Component=ccs.Component||cc.Component,ccs.Component.extend=ccs.Component.extend||cc.Component.extend,ccs.cocostudioVersion="v1.3.0.0",ccs.VERSION_COMBINED=.3,ccs.VERSION_CHANGE_ROTATION_RANGE=1,ccs.VERSION_COLOR_READING=1.1,ccs.MAX_VERTEXZ_VALUE=5e6,ccs.ARMATURE_MAX_CHILD=50,ccs.ARMATURE_MAX_ZORDER=100,ccs.ARMATURE_MAX_COUNT=ccs.MAX_VERTEXZ_VALUE/ccs.ARMATURE_MAX_CHILD/ccs.ARMATURE_MAX_ZORDER,ccs.AUTO_ADD_SPRITE_FRAME_NAME_PREFIX=!1,ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT=!1,ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX=!1,ccs.armatureVersion=function(){return"v1.1.0.0"},ccs.CONST_VERSION="version",ccs.CONST_VERSION_2_0=2,ccs.CONST_VERSION_COMBINED=.3,ccs.CONST_ARMATURES="armatures",ccs.CONST_ARMATURE="armature",ccs.CONST_BONE="b",ccs.CONST_DISPLAY="d",ccs.CONST_ANIMATIONS="animations",ccs.CONST_ANIMATION="animation",ccs.CONST_MOVEMENT="mov",ccs.CONST_FRAME="f",ccs.CONST_TEXTURE_ATLAS="TextureAtlas",ccs.CONST_SUB_TEXTURE="SubTexture",ccs.CONST_SKELETON="skeleton",ccs.CONST_A_NAME="name",ccs.CONST_A_DURATION="dr",ccs.CONST_A_FRAME_INDEX="fi",ccs.CONST_A_DURATION_TO="to",ccs.CONST_A_DURATION_TWEEN="drTW",ccs.CONST_A_LOOP="lp",ccs.CONST_A_MOVEMENT_SCALE="sc",ccs.CONST_A_MOVEMENT_DELAY="dl",ccs.CONST_A_DISPLAY_INDEX="dI",ccs.CONST_A_PLIST="plist",ccs.CONST_A_PARENT="parent",ccs.CONST_A_SKEW_X="kX",ccs.CONST_A_SKEW_Y="kY",ccs.CONST_A_SCALE_X="cX",ccs.CONST_A_SCALE_Y="cY",ccs.CONST_A_Z="z",ccs.CONST_A_EVENT="evt",ccs.CONST_A_SOUND="sd",ccs.CONST_A_SOUND_EFFECT="sdE",ccs.CONST_A_TWEEN_EASING="twE",ccs.CONST_A_EASING_PARAM="twEP",ccs.CONST_A_TWEEN_ROTATE="twR",ccs.CONST_A_IS_ARMATURE="isArmature",ccs.CONST_A_DISPLAY_TYPE="displayType",ccs.CONST_A_MOVEMENT="mov",ccs.CONST_A_X="x",ccs.CONST_A_Y="y",ccs.CONST_A_COCOS2DX_X="cocos2d_x",ccs.CONST_A_COCOS2DX_Y="cocos2d_y",ccs.CONST_A_WIDTH="width",ccs.CONST_A_HEIGHT="height",ccs.CONST_A_PIVOT_X="pX",ccs.CONST_A_PIVOT_Y="pY",ccs.CONST_A_COCOS2D_PIVOT_X="cocos2d_pX",ccs.CONST_A_COCOS2D_PIVOT_Y="cocos2d_pY",ccs.CONST_A_BLEND_TYPE="bd",ccs.CONST_A_BLEND_SRC="bd_src",ccs.CONST_A_BLEND_DST="bd_dst",ccs.CONST_A_ALPHA="a",ccs.CONST_A_RED="r",ccs.CONST_A_GREEN="g",ccs.CONST_A_BLUE="b",ccs.CONST_A_ALPHA_OFFSET="aM",ccs.CONST_A_RED_OFFSET="rM",ccs.CONST_A_GREEN_OFFSET="gM",ccs.CONST_A_BLUE_OFFSET="bM",ccs.CONST_A_COLOR_TRANSFORM="colorTransform",ccs.CONST_A_TWEEN_FRAME="tweenFrame",ccs.CONST_CONTOUR="con",ccs.CONST_CONTOUR_VERTEX="con_vt",ccs.CONST_FL_NAN="NaN",ccs.CONST_FRAME_DATA="frame_data",ccs.CONST_MOVEMENT_BONE_DATA="mov_bone_data",ccs.CONST_MOVEMENT_DATA="mov_data",ccs.CONST_ANIMATION_DATA="animation_data",ccs.CONST_DISPLAY_DATA="display_data",ccs.CONST_SKIN_DATA="skin_data",ccs.CONST_BONE_DATA="bone_data",ccs.CONST_ARMATURE_DATA="armature_data",ccs.CONST_CONTOUR_DATA="contour_data",ccs.CONST_TEXTURE_DATA="texture_data",ccs.CONST_VERTEX_POINT="vertex",ccs.CONST_COLOR_INFO="color",ccs.CONST_CONFIG_FILE_PATH="config_file_path",ccs.CONST_CONTENT_SCALE="content_scale",ccs.DataInfo=function(){this.asyncStruct=null,this.configFileQueue=[],this.contentScale=1,this.baseFilePath=this.filename="",this.cocoStudioVersion=this.flashToolVersion=0},ccs.dataReaderHelper={ConfigType:{DragonBone_XML:0,CocoStudio_JSON:1,CocoStudio_Binary:2},_configFileList:[],_flashToolVersion:ccs.CONST_VERSION_2_0,_positionReadScale:1,_asyncRefCount:0,_asyncRefTotalCount:0,_dataQueue:null,setPositionReadScale:function(t){this._positionReadScale=t},getPositionReadScale:function(){return this._positionReadScale},addDataFromFile:function(t){if(-1===this._configFileList.indexOf(t)){this._configFileList.push(t);var e=this._initBaseFilePath(t),i=cc.path.extname(t).toLowerCase(),n=new ccs.DataInfo;n.filename=t,n.basefilePath=e,".xml"===i?ccs.dataReaderHelper.addDataFromXML(t,n):".json"===i||".exportjson"===i?ccs.dataReaderHelper.addDataFromJson(t,n):".csb"===i&&ccs.dataReaderHelper.addDataFromBinaryCache(t,n)}},addDataFromFileAsync:function(t,e,i,n,s){if(-1!==this._configFileList.indexOf(i))s&&n&&(0===this._asyncRefTotalCount&&0===this._asyncRefCount?this._asyncCallBack(n,s,1):this._asyncCallBack(n,s,(this._asyncRefTotalCount-this._asyncRefCount)/this._asyncRefTotalCount));else{this._asyncRefTotalCount++,this._asyncRefCount++;var r=this;cc.director.getScheduler().schedule((function(){r.addDataFromFile(i),r._asyncRefCount--,r._asyncCallBack(n,s,(r._asyncRefTotalCount-r._asyncRefCount)/r._asyncRefTotalCount)}),this,.1,!1,0,!1,"armatrueDataHelper")}},removeConfigFile:function(t){for(var e=this._configFileList,i=e.length,n=e[i],s=0;s<i;s++)e[s]===t&&(n=s);n!==e[i]&&cc.arrayRemoveObject(e,t)},addDataFromCache:function(t,e){if(t){e.flashToolVersion=parseFloat(t.getAttribute(ccs.CONST_VERSION));var i,n=t.querySelectorAll(ccs.CONST_SKELETON+" > "+ccs.CONST_ARMATURES+" >  "+ccs.CONST_ARMATURE),s=ccs.armatureDataManager;for(i=0;i<n.length;i++){var r=this.decodeArmature(n[i],e);s.addArmatureData(r.name,r,e.filename)}for(n=t.querySelectorAll(ccs.CONST_SKELETON+" > "+ccs.CONST_ANIMATIONS+" >  "+ccs.CONST_ANIMATION),i=0;i<n.length;i++)r=this.decodeAnimation(n[i],e),s.addAnimationData(r.name,r,e.filename);for(n=t.querySelectorAll(ccs.CONST_SKELETON+" > "+ccs.CONST_TEXTURE_ATLAS+" >  "+ccs.CONST_SUB_TEXTURE),i=0;i<n.length;i++)r=this.decodeTexture(n[i],e),s.addTextureData(r.name,r,e.filename)}else cc.log("XML error  or  XML is empty.")},decodeArmature:function(t,e){var i=new ccs.ArmatureData;i.init(),i.name=t.getAttribute(ccs.CONST_A_NAME);for(var n=t.querySelectorAll(ccs.CONST_ARMATURE+" > "+ccs.CONST_BONE),s=0;s<n.length;s++){var r=n[s],o=r.getAttribute(ccs.CONST_A_PARENT),a=null;if(o)for(var c=0;c<n.length&&(a=n[c],o!=n[c].getAttribute(ccs.CONST_A_NAME));c++);r=this.decodeBone(r,a,e),i.addBoneData(r)}return i},decodeArmatureFromJSON:function(t,e){var i=new ccs.ArmatureData;i.init(),(n=t[ccs.CONST_A_NAME])&&(i.name=n),e.cocoStudioVersion=i.dataVersion=t[ccs.CONST_VERSION]||.1;for(var n=t[ccs.CONST_BONE_DATA],s=0;s<n.length;s++){var r=this.decodeBoneFromJson(n[s],e);i.addBoneData(r)}return i},decodeBone:function(t,e,i){(e=new ccs.BoneData).init(),e.name=t.getAttribute(ccs.CONST_A_NAME),e.parentName=t.getAttribute(ccs.CONST_A_PARENT)||"",e.zOrder=parseInt(t.getAttribute(ccs.CONST_A_Z))||0,t=t.querySelectorAll(ccs.CONST_BONE+" > "+ccs.CONST_DISPLAY);for(var n=0;n<t.length;n++){var s=this.decodeBoneDisplay(t[n],i);e.addDisplayData(s)}return e},decodeBoneFromJson:function(t,e){var i=new ccs.BoneData;i.init(),this.decodeNodeFromJson(i,t,e),i.name=t[ccs.CONST_A_NAME]||"",i.parentName=t[ccs.CONST_A_PARENT]||"";for(var n=t[ccs.CONST_DISPLAY_DATA]||[],s=0;s<n.length;s++){var r=this.decodeBoneDisplayFromJson(n[s],e);i.addDisplayData(r)}return i},decodeBoneDisplay:function(t,e){var i=null;1===(parseFloat(t.getAttribute(ccs.CONST_A_IS_ARMATURE))||0)?(i=new ccs.ArmatureDisplayData).displayType=ccs.DISPLAY_TYPE_ARMATURE:(i=new ccs.SpriteDisplayData).displayType=ccs.DISPLAY_TYPE_SPRITE;var n=t.getAttribute(ccs.CONST_A_NAME)||"";return n&&(i.displayName=n),i},decodeBoneDisplayFromJson:function(t,e){var i=t[ccs.CONST_A_DISPLAY_TYPE]||ccs.DISPLAY_TYPE_SPRITE,n=null;switch(i){case ccs.DISPLAY_TYPE_SPRITE:n=new ccs.SpriteDisplayData;var s=t[ccs.CONST_A_NAME];if(null!=s&&(n.displayName=s),s=(t[ccs.CONST_SKIN_DATA]||[])[0]){var r=n.skinData;r.x=s[ccs.CONST_A_X]*this._positionReadScale,r.y=s[ccs.CONST_A_Y]*this._positionReadScale,r.scaleX=null==s[ccs.CONST_A_SCALE_X]?1:s[ccs.CONST_A_SCALE_X],r.scaleY=null==s[ccs.CONST_A_SCALE_Y]?1:s[ccs.CONST_A_SCALE_Y],r.skewX=null==s[ccs.CONST_A_SKEW_X]?1:s[ccs.CONST_A_SKEW_X],r.skewY=null==s[ccs.CONST_A_SKEW_Y]?1:s[ccs.CONST_A_SKEW_Y],r.x*=e.contentScale,r.y*=e.contentScale}break;case ccs.DISPLAY_TYPE_ARMATURE:n=new ccs.ArmatureDisplayData,null!=(s=t[ccs.CONST_A_NAME])&&(n.displayName=t[ccs.CONST_A_NAME]);break;case ccs.DISPLAY_TYPE_PARTICLE:n=new ccs.ParticleDisplayData,null!=(s=t[ccs.CONST_A_PLIST])&&(n.displayName=e.asyncStruct?e.asyncStruct.basefilePath+s:e.basefilePath+s);break;default:n=new ccs.SpriteDisplayData}return n.displayType=i,n},decodeAnimation:function(t,e){var i=new ccs.AnimationData,n=t.getAttribute(ccs.CONST_A_NAME),s=ccs.armatureDataManager.getArmatureData(n);i.name=n;n=t.querySelectorAll(ccs.CONST_ANIMATION+" > "+ccs.CONST_MOVEMENT);for(var r=null,o=0;o<n.length;o++)r=n[o],r=this.decodeMovement(r,s,e),i.addMovement(r);return i},decodeAnimationFromJson:function(t,e){var i=new ccs.AnimationData;t[ccs.CONST_A_NAME]&&(i.name=t[ccs.CONST_A_NAME]);for(var n=t[ccs.CONST_MOVEMENT_DATA]||[],s=0;s<n.length;s++){var r=this.decodeMovementFromJson(n[s],e);i.addMovement(r)}return i},decodeMovement:function(t,e,i){var n,s=new ccs.MovementData;s.name=t.getAttribute(ccs.CONST_A_NAME),n=0,n=t.getAttribute(ccs.CONST_A_DURATION),s.duration=null==n?0:parseFloat(n),n=t.getAttribute(ccs.CONST_A_DURATION_TO),s.durationTo=null==n?0:parseFloat(n),n=t.getAttribute(ccs.CONST_A_DURATION_TWEEN),s.durationTween=null==n?0:parseFloat(n),n=t.getAttribute(ccs.CONST_A_LOOP),s.loop=!n||Boolean(parseFloat(n)),(n=t.getAttribute(ccs.CONST_A_TWEEN_EASING))&&(n!=ccs.CONST_FL_NAN?(n=null==n?0:parseFloat(n),s.tweenEasing=2===n?ccs.TweenType.SINE_EASEINOUT:n):s.tweenEasing=ccs.TweenType.LINEAR),t=t.querySelectorAll(ccs.CONST_MOVEMENT+" > "+ccs.CONST_BONE);var r=null;for(n=0;n<t.length;n++){var o=(r=t[n]).getAttribute(ccs.CONST_A_NAME);if(!s.getMovementBoneData(o)){var a=(o=e.getBoneData(o)).parentName,c=null;if(""!==a)for(var h=0;h<t.length&&a!==(c=t[h]).getAttribute(ccs.CONST_A_NAME);h++);r=this.decodeMovementBone(r,c,o,i),s.addMovementBoneData(r)}}return s},decodeMovementFromJson:function(t,e){var i=new ccs.MovementData;i.loop=null!=t[ccs.CONST_A_LOOP]&&t[ccs.CONST_A_LOOP],i.durationTween=t[ccs.CONST_A_DURATION_TWEEN]||0,i.durationTo=t[ccs.CONST_A_DURATION_TO]||0,i.duration=t[ccs.CONST_A_DURATION]||0,i.scale=null==t[ccs.CONST_A_DURATION]||null==t[ccs.CONST_A_MOVEMENT_SCALE]?1:t[ccs.CONST_A_MOVEMENT_SCALE],i.tweenEasing=null==t[ccs.CONST_A_TWEEN_EASING]?ccs.TweenType.LINEAR:t[ccs.CONST_A_TWEEN_EASING],(n=t[ccs.CONST_A_NAME])&&(i.name=n);for(var n=t[ccs.CONST_MOVEMENT_BONE_DATA]||[],s=0;s<n.length;s++){var r=this.decodeMovementBoneFromJson(n[s],e);i.addMovementBoneData(r)}return i},decodeMovementBone:function(t,e,i,n){var s,r=new ccs.MovementBoneData;r.init(),t&&(s=parseFloat(t.getAttribute(ccs.CONST_A_MOVEMENT_SCALE))||0,r.scale=s,0<(s=parseFloat(t.getAttribute(ccs.CONST_A_MOVEMENT_DELAY))||0)&&(s-=1),r.delay=s);var o=0,a=s=0,c=null,h=[];if(null!=e){var l=e.querySelectorAll(ccs.CONST_BONE+" > "+ccs.CONST_FRAME);for(o=0;o<l.length;o++)h.push(l[o]);o=h.length}r.name=t.getAttribute(ccs.CONST_A_NAME),t=t.querySelectorAll(ccs.CONST_BONE+" > "+ccs.CONST_FRAME);for(var u=l=0,d=0;d<t.length;d++){var _=t[d];if(e)for(;l<o&&(!c||(u<s||u>=s+a));)c=h[l],s+=a,a=parseFloat(c.getAttribute(ccs.CONST_A_DURATION)),l++;_=this.decodeFrame(_,c,i,n),r.addFrameData(_),_.frameID=u,u+=_.duration,r.duration=u}for(e=r.frameList,i=Math.PI,o=e.length-1;0<=o;o--)0<o&&(n=e[o].skewX-e[o-1].skewX,s=e[o].skewY-e[o-1].skewY,(n<-i||n>i)&&(e[o-1].skewX=0>n?e[o-1].skewX-2*i:e[o-1].skewX+2*i),(s<-i||s>i)&&(e[o-1].skewY=0>s?e[o-1].skewY-2*i:e[o-1].skewY+2*i));return(e=new ccs.FrameData).copy(r.frameList[r.frameList.length-1]),e.frameID=r.duration,r.addFrameData(e),r},decodeMovementBoneFromJson:function(t,e){var i=new ccs.MovementBoneData;i.init(),i.delay=t[ccs.CONST_A_MOVEMENT_DELAY]||0,(s=t[ccs.CONST_A_NAME])&&(i.name=s);for(var n=(t[ccs.CONST_FRAME_DATA]||[]).length,s=0;s<n;s++){var r=this.decodeFrameFromJson(t[ccs.CONST_FRAME_DATA][s],e);i.addFrameData(r),e.cocoStudioVersion<ccs.CONST_VERSION_COMBINED&&(r.frameID=i.duration,i.duration+=r.duration)}if(e.cocoStudioVersion<ccs.VERSION_CHANGE_ROTATION_RANGE)for(n=i.frameList,r=Math.PI,s=n.length-1;0<=s;s--)if(0<s){var o=n[s].skewX-n[s-1].skewX,a=n[s].skewY-n[s-1].skewY;(o<-r||o>r)&&(n[s-1].skewX=0>o?n[s-1].skewX-2*r:n[s-1].skewX+2*r),(a<-r||a>r)&&(n[s-1].skewY=0>a?n[s-1].skewY-2*r:n[s-1].skewY+2*r)}return e.cocoStudioVersion<ccs.CONST_VERSION_COMBINED&&0<i.frameList.length&&((r=new ccs.FrameData).copy(i.frameList[i.frameList.length-1]),i.addFrameData(r),r.frameID=i.duration),i},decodeFrame:function(t,e,i,n){var s=0;s=s=s=s=s=s=s=s=s=s=s=0;if((i=new ccs.FrameData).strMovement=t.getAttribute(ccs.CONST_A_MOVEMENT)||"",i.movement=i.strMovement,i.strEvent=t.getAttribute(ccs.CONST_A_EVENT)||"",i.event=i.strEvent,i.strSound=t.getAttribute(ccs.CONST_A_SOUND)||"",i.sound=i.strSound,i.strSoundEffect=t.getAttribute(ccs.CONST_A_SOUND_EFFECT)||"",i.soundEffect=i.strSoundEffect,s=t.getAttribute(ccs.CONST_A_TWEEN_FRAME),i.isTween=!(void 0!==s&&("false"===s||"0"===s)),n.flashToolVersion>=ccs.CONST_VERSION_2_0?((s=t.getAttribute(ccs.CONST_A_COCOS2DX_X))&&(i.x=parseFloat(s),i.x*=this._positionReadScale),s=t.getAttribute(ccs.CONST_A_COCOS2DX_Y)):((s=t.getAttribute(ccs.CONST_A_X))&&(i.x=parseFloat(s),i.x*=this._positionReadScale),s=t.getAttribute(ccs.CONST_A_Y)),s&&(i.y=-parseFloat(s),i.y*=this._positionReadScale),null!=(s=t.getAttribute(ccs.CONST_A_SCALE_X))&&(i.scaleX=parseFloat(s)),null!=(s=t.getAttribute(ccs.CONST_A_SCALE_Y))&&(i.scaleY=parseFloat(s)),null!=(s=t.getAttribute(ccs.CONST_A_SKEW_X))&&(i.skewX=cc.degreesToRadians(parseFloat(s))),null!=(s=t.getAttribute(ccs.CONST_A_SKEW_Y))&&(i.skewY=cc.degreesToRadians(-parseFloat(s))),null!=(s=t.getAttribute(ccs.CONST_A_DURATION))&&(i.duration=parseFloat(s)),null!=(s=t.getAttribute(ccs.CONST_A_DISPLAY_INDEX))&&(i.displayIndex=parseFloat(s)),null!=(s=t.getAttribute(ccs.CONST_A_Z))&&(i.zOrder=parseInt(s)),null!=(s=t.getAttribute(ccs.CONST_A_TWEEN_ROTATE))&&(i.tweenRotate=parseFloat(s)),null!=(s=t.getAttribute(ccs.CONST_A_BLEND_TYPE))){var r=i.blendFunc;switch(s){case ccs.BLEND_TYPE_NORMAL:r.src=cc.BLEND_SRC,r.dst=cc.BLEND_DST;break;case ccs.BLEND_TYPE_ADD:r.src=cc.SRC_ALPHA,r.dst=cc.ONE;break;case ccs.BLEND_TYPE_MULTIPLY:r.src=cc.DST_COLOR,r.dst=cc.ONE_MINUS_SRC_ALPHA;break;case ccs.BLEND_TYPE_SCREEN:r.src=cc.ONE,r.dst=cc.ONE_MINUS_DST_COLOR;break;default:i.blendFunc.src=cc.BLEND_SRC,i.blendFunc.dst=cc.BLEND_DST}}if((u=t.querySelectorAll(ccs.CONST_FRAME+" > "+ccs.CONST_A_COLOR_TRANSFORM))&&0<u.length){var o,a,c,h,l,u=u[0];s=parseFloat(u.getAttribute(ccs.CONST_A_ALPHA))||0,r=parseFloat(u.getAttribute(ccs.CONST_A_RED))||0;o=parseFloat(u.getAttribute(ccs.CONST_A_GREEN))||0,a=parseFloat(u.getAttribute(ccs.CONST_A_BLUE))||0,c=parseFloat(u.getAttribute(ccs.CONST_A_ALPHA_OFFSET))||0,h=parseFloat(u.getAttribute(ccs.CONST_A_RED_OFFSET))||0,l=parseFloat(u.getAttribute(ccs.CONST_A_GREEN_OFFSET))||0,u=parseFloat(u.getAttribute(ccs.CONST_A_BLUE_OFFSET))||0,i.a=2.55*c+s,i.r=2.55*h+r,i.g=2.55*l+o,i.b=2.55*u+a,i.isUseColorInfo=!0}return null!=(s=t.getAttribute(ccs.CONST_A_TWEEN_EASING))&&(s!=ccs.CONST_FL_NAN?(s=t.getAttribute(ccs.CONST_A_TWEEN_EASING))&&(i.tweenEasing=2===s?ccs.TweenType.SINE_EASEINOUT:s):i.tweenEasing=ccs.TweenType.LINEAR),e&&(t=new ccs.BaseData,n.flashToolVersion>=ccs.CONST_VERSION_2_0?(t.x=parseFloat(e.getAttribute(ccs.CONST_A_COCOS2DX_X)),t.y=parseFloat(e.getAttribute(ccs.CONST_A_COCOS2DX_Y))):(t.x=parseFloat(e.getAttribute(ccs.CONST_A_X)),t.y=parseFloat(e.getAttribute(ccs.CONST_A_Y))),t.skewX=parseFloat(e.getAttribute(ccs.CONST_A_SKEW_X)),t.skewY=parseFloat(e.getAttribute(ccs.CONST_A_SKEW_Y)),t.y=-t.y,t.skewX=cc.degreesToRadians(t.skewX),t.skewY=cc.degreesToRadians(-t.skewY),ccs.TransformHelp.transformFromParent(i,t)),i},decodeFrameFromJson:function(t,e){var i=new ccs.FrameData;this.decodeNodeFromJson(i,t,e),i.tweenEasing=t[ccs.CONST_A_TWEEN_EASING]||ccs.TweenType.LINEAR,i.displayIndex=t[ccs.CONST_A_DISPLAY_INDEX];var n=null==t[ccs.CONST_A_BLEND_DST]?cc.BLEND_DST:t[ccs.CONST_A_BLEND_DST];i.blendFunc.src=null==t[ccs.CONST_A_BLEND_SRC]?cc.BLEND_SRC:t[ccs.CONST_A_BLEND_SRC],i.blendFunc.dst=n,i.isTween=null==t[ccs.CONST_A_TWEEN_FRAME]||t[ccs.CONST_A_TWEEN_FRAME],null!=(n=t[ccs.CONST_A_EVENT])&&(i.strEvent=n,i.event=n),e.cocoStudioVersion<ccs.CONST_VERSION_COMBINED?i.duration=null==t[ccs.CONST_A_DURATION]?1:t[ccs.CONST_A_DURATION]:i.frameID=t[ccs.CONST_A_FRAME_INDEX];n=t[ccs.CONST_A_EASING_PARAM]||[];for(var s=0;s<n.length;s++)i.easingParams[s]=n[s];return i},decodeTexture:function(t,e){var i,n,s=new ccs.TextureData;s.init(),t.getAttribute(ccs.CONST_A_NAME)&&(s.name=t.getAttribute(ccs.CONST_A_NAME)),e.flashToolVersion>=ccs.CONST_VERSION_2_0?(i=parseFloat(t.getAttribute(ccs.CONST_A_COCOS2D_PIVOT_X))||0,n=parseFloat(t.getAttribute(ccs.CONST_A_COCOS2D_PIVOT_Y))||0):(i=parseFloat(t.getAttribute(ccs.CONST_A_PIVOT_X))||0,n=parseFloat(t.getAttribute(ccs.CONST_A_PIVOT_Y))||0);var r=parseFloat(t.getAttribute(ccs.CONST_A_WIDTH))||0,o=parseFloat(t.getAttribute(ccs.CONST_A_HEIGHT))||0;for(s.pivotX=i/r,s.pivotY=(o-n)/o,i=t.querySelectorAll(ccs.CONST_SUB_TEXTURE+" > "+ccs.CONST_CONTOUR),n=0;n<i.length;n++)s.addContourData(this.decodeContour(i[n],e));return s},decodeTextureFromJson:function(t){var e=new ccs.TextureData;e.init();var i=t[ccs.CONST_A_NAME];for(null!=i&&(e.name=i),e.width=t[ccs.CONST_A_WIDTH]||0,e.height=t[ccs.CONST_A_HEIGHT]||0,e.pivotX=t[ccs.CONST_A_PIVOT_X]||0,e.pivotY=t[ccs.CONST_A_PIVOT_Y]||0,t=t[ccs.CONST_CONTOUR_DATA]||[],i=0;i<t.length;i++)e.contourDataList.push(this.decodeContourFromJson(t[i]));return e},decodeContour:function(t,e){var i=new ccs.ContourData;i.init();for(var n,s=t.querySelectorAll(ccs.CONST_CONTOUR+" > "+ccs.CONST_CONTOUR_VERTEX),r=0;r<s.length;r++){n=s[r];var o=cc.p(0,0);o.x=parseFloat(n.getAttribute(ccs.CONST_A_X))||0,o.y=parseFloat(n.getAttribute(ccs.CONST_A_Y))||0,o.y=-o.y,i.vertexList.push(o)}return i},decodeContourFromJson:function(t){var e=new ccs.ContourData;e.init();for(var i=(t=t[ccs.CONST_VERTEX_POINT]||[]).length,n=0;n<i;n++){var s=t[n],r=cc.p(0,0);r.x=s[ccs.CONST_A_X]||0,r.y=s[ccs.CONST_A_Y]||0,e.vertexList.push(r)}return e},addDataFromJsonCache:function(t,e){e.contentScale=null==t[ccs.CONST_CONTENT_SCALE]?1:t[ccs.CONST_CONTENT_SCALE];var i,n,s=t[ccs.CONST_ARMATURE_DATA]||[];for(i=0;i<s.length;i++)n=this.decodeArmatureFromJSON(s[i],e),ccs.armatureDataManager.addArmatureData(n.name,n,e.filename);for(s=t[ccs.CONST_ANIMATION_DATA]||[],i=0;i<s.length;i++)n=this.decodeAnimationFromJson(s[i],e),ccs.armatureDataManager.addAnimationData(n.name,n,e.filename);for(s=t[ccs.CONST_TEXTURE_DATA]||[],i=0;i<s.length;i++)n=this.decodeTextureFromJson(s[i],e),ccs.armatureDataManager.addTextureData(n.name,n,e.filename);if(null==e.asyncStruct?ccs.armatureDataManager.isAutoLoadSpriteFile():e.asyncStruct.autoLoadSpriteFile){var r;s=t[ccs.CONST_CONFIG_FILE_PATH]||[];for(i=0;i<s.length;i++)r=(n=s[i]).lastIndexOf("."),n=n.substring(0,r),r=e.basefilePath+n+".plist",n=e.basefilePath+n+".png",ccs.armatureDataManager.addSpriteFrameFromFile(r,n,e.filename)}},decodeNodeFromJson:function(t,e,i){t.x=e[ccs.CONST_A_X]*this._positionReadScale,t.y=e[ccs.CONST_A_Y]*this._positionReadScale,t.x*=i.contentScale,t.y*=i.contentScale,t.zOrder=e[ccs.CONST_A_Z],t.skewX=e[ccs.CONST_A_SKEW_X]||0,t.skewY=e[ccs.CONST_A_SKEW_Y]||0,t.scaleX=null==e[ccs.CONST_A_SCALE_X]?1:e[ccs.CONST_A_SCALE_X],t.scaleY=null==e[ccs.CONST_A_SCALE_Y]?1:e[ccs.CONST_A_SCALE_Y],(e=i.cocoStudioVersion<ccs.VERSION_COLOR_READING?e[0]:e[ccs.CONST_COLOR_INFO]||null)&&(t.a=null==e[ccs.CONST_A_ALPHA]?255:e[ccs.CONST_A_ALPHA],t.r=null==e[ccs.CONST_A_RED]?255:e[ccs.CONST_A_RED],t.g=null==e[ccs.CONST_A_GREEN]?255:e[ccs.CONST_A_GREEN],t.b=null==e[ccs.CONST_A_BLUE]?255:e[ccs.CONST_A_BLUE],t.isUseColorInfo=!0)},clear:function(){this._configFileList=[],this._asyncRefTotalCount=this._asyncRefCount=0},_asyncCallBack:function(t,e,i){t&&cc.isFunction(t)&&t.call(e,i),e&&t&&"string"==typeof t&&e[t](i)},_initBaseFilePath:function(t){var e=t.lastIndexOf("/");return-1<e?t.substr(0,e+1):""},addDataFromXML:function(t,e){var i=cc.loader.getRes(t);if(!i)throw Error("Please load the resource first : "+t);(i=cc.saxParser.parse(i).documentElement)&&this.addDataFromCache(i,e)},addDataFromJson:function(t,e){var i=cc.loader.getRes(t);this.addDataFromJsonCache(i,e)}},ccs.spriteFrameCacheHelper={_textureAtlasDic:{},_imagePaths:[],addSpriteFrameFromFile:function(t,e){cc.spriteFrameCache.addSpriteFrames(t,e)},getTextureAtlasWithTexture:function(t){return null},clear:function(){this._textureAtlasDic={},this._imagePaths=[]}},ccs.TransformHelp=ccs.TransformHelp||ccs.Class.extend({}),ccs.TransformHelp.helpMatrix1=cc.affineTransformMake(1,0,0,1,0,0),ccs.TransformHelp.helpMatrix2=cc.affineTransformMake(1,0,0,1,0,0),ccs.TransformHelp.helpPoint1=cc.p(0,0),ccs.TransformHelp.helpPoint2=cc.p(0,0),ccs.TransformHelp.helpParentNode={},ccs.TransformHelp.transformFromParent=function(t,e){this.nodeToMatrix(t,this.helpMatrix1),this.nodeToMatrix(e,this.helpMatrix2),this.helpMatrix2=cc.affineTransformInvert(this.helpMatrix2),this.helpMatrix1=cc.affineTransformConcat(this.helpMatrix1,this.helpMatrix2),this.matrixToNode(this.helpMatrix1,t)},ccs.TransformHelp.transformToParent=function(t,e){this.nodeToMatrix(t,this.helpMatrix1),this.nodeToMatrix(e,this.helpMatrix2),this.helpMatrix1=cc.affineTransformConcat(this.helpMatrix1,this.helpMatrix2),this.matrixToNode(this.helpMatrix1,t)},ccs.TransformHelp.transformFromParentWithoutScale=function(t,e){for(var i in e)this.helpParentNode[i]=e[i];this.helpParentNode.scaleX=1,this.helpParentNode.scaleY=1,this.nodeToMatrix(t,this.helpMatrix1),this.nodeToMatrix(this.helpParentNode,this.helpMatrix2),this.helpMatrix2=cc.affineTransformInvert(this.helpMatrix2),this.helpMatrix1=cc.affineTransformConcat(this.helpMatrix1,this.helpMatrix2),this.matrixToNode(this.helpMatrix1,t)},ccs.TransformHelp.transformToParentWithoutScale=function(t,e){for(var i in e)this.helpParentNode[i]=e[i];this.helpParentNode.scaleX=1,this.helpParentNode.scaleY=1,this.nodeToMatrix(t,this.helpMatrix1),this.nodeToMatrix(this.helpParentNode,this.helpMatrix2),this.helpMatrix1=cc.affineTransformConcat(this.helpMatrix1,this.helpMatrix2),this.matrixToNode(this.helpMatrix1,t)},ccs.TransformHelp.nodeToMatrix=function(t,e){if(t.skewX===-t.skewY){var i=Math.sin(t.skewX),n=Math.cos(t.skewX);e.a=t.scaleX*n,e.b=t.scaleX*-i,e.c=t.scaleY*i,e.d=t.scaleY*n}else e.a=t.scaleX*Math.cos(t.skewY),e.b=t.scaleX*Math.sin(t.skewY),e.c=t.scaleY*Math.sin(t.skewX),e.d=t.scaleY*Math.cos(t.skewX);e.tx=t.x,e.ty=t.y},ccs.TransformHelp.matrixToNode=function(t,e){this.helpPoint1.x=0,this.helpPoint1.y=1,this.helpPoint1=cc.pointApplyAffineTransform(this.helpPoint1,t),this.helpPoint1.x-=t.tx,this.helpPoint1.y-=t.ty,this.helpPoint2.x=1,this.helpPoint2.y=0,this.helpPoint2=cc.pointApplyAffineTransform(this.helpPoint2,t),this.helpPoint2.x-=t.tx,this.helpPoint2.y-=t.ty,e.skewX=-(Math.atan2(this.helpPoint1.y,this.helpPoint1.x)-1.5707964),e.skewY=Math.atan2(this.helpPoint2.y,this.helpPoint2.x),e.scaleX=Math.sqrt(t.a*t.a+t.b*t.b),e.scaleY=Math.sqrt(t.c*t.c+t.d*t.d),e.x=t.tx,e.y=t.ty},ccs.TransformHelp.nodeConcat=function(t,e){t.x+=e.x,t.y+=e.y,t.skewX+=e.skewX,t.skewY+=e.skewY,t.scaleX+=e.scaleX,t.scaleY+=e.scaleY},ccs.TransformHelp.nodeSub=function(t,e){t.x-=e.x,t.y-=e.y,t.skewX-=e.skewX,t.skewY-=e.skewY,t.scaleX-=e.scaleX,t.scaleY-=e.scaleY},ccs.TweenType={CUSTOM_EASING:-1,LINEAR:0,SINE_EASEIN:1,SINE_EASEOUT:2,SINE_EASEINOUT:3,QUAD_EASEIN:4,QUAD_EASEOUT:5,QUAD_EASEINOUT:6,CUBIC_EASEIN:7,CUBIC_EASEOUT:8,CUBIC_EASEINOUT:9,QUART_EASEIN:10,QUART_EASEOUT:11,QUART_EASEINOUT:12,QUINT_EASEIN:13,QUINT_EASEOUT:14,QUINT_EASEINOUT:15,EXPO_EASEIN:16,EXPO_EASEOUT:17,EXPO_EASEINOUT:18,CIRC_EASEIN:19,CIRC_EASEOUT:20,CIRC_EASEINOUT:21,ELASTIC_EASEIN:22,ELASTIC_EASEOUT:23,ELASTIC_EASEINOUT:24,BACK_EASEIN:25,BACK_EASEOUT:26,BACK_EASEINOUT:27,BOUNCE_EASEIN:28,BOUNCE_EASEOUT:29,BOUNCE_EASEINOUT:30,TWEEN_EASING_MAX:1e4},ccs.TweenFunction=ccs.TweenFunction||ccs.Class.extend({}),ccs.DOUBLE_PI=ccs.M_PI_X_2=2*Math.PI,ccs.HALF_PI=ccs.M_PI_2=Math.PI/2,ccs.M_PI=Math.PI,ccs.TweenFunction.tweenTo=function(t,e,i){var n=0;switch(e){case ccs.TweenType.CUSTOM_EASING:n=this.customEase(t,i);break;case ccs.TweenType.LINEAR:n=this.linear(t);break;case ccs.TweenType.SINE_EASEIN:n=this.sineEaseIn(t);break;case ccs.TweenType.SINE_EASEOUT:n=this.sineEaseOut(t);break;case ccs.TweenType.SINE_EASEINOUT:n=this.sineEaseInOut(t);break;case ccs.TweenType.QUAD_EASEIN:n=this.quadEaseIn(t);break;case ccs.TweenType.QUAD_EASEOUT:n=this.quadEaseOut(t);break;case ccs.TweenType.QUAD_EASEINOUT:n=this.quadEaseInOut(t);break;case ccs.TweenType.CUBIC_EASEIN:n=this.cubicEaseIn(t);break;case ccs.TweenType.CUBIC_EASEOUT:n=this.cubicEaseOut(t);break;case ccs.TweenType.CUBIC_EASEINOUT:n=this.cubicEaseInOut(t);break;case ccs.TweenType.QUART_EASEIN:n=this.quartEaseIn(t);break;case ccs.TweenType.QUART_EASEOUT:n=this.quartEaseOut(t);break;case ccs.TweenType.QUART_EASEINOUT:n=this.quartEaseInOut(t);break;case ccs.TweenType.QUINT_EASEIN:n=this.quintEaseIn(t);break;case ccs.TweenType.QUINT_EASEOUT:n=this.quintEaseOut(t);break;case ccs.TweenType.QUINT_EASEINOUT:n=this.quintEaseInOut(t);break;case ccs.TweenType.EXPO_EASEIN:n=this.expoEaseIn(t);break;case ccs.TweenType.EXPO_EASEOUT:n=this.expoEaseOut(t);break;case ccs.TweenType.EXPO_EASEINOUT:n=this.expoEaseInOut(t);break;case ccs.TweenType.CIRC_EASEIN:n=this.circEaseIn(t);break;case ccs.TweenType.CIRC_EASEOUT:n=this.circEaseOut(t);break;case ccs.TweenType.CIRC_EASEINOUT:n=this.circEaseInOut(t);break;case ccs.TweenType.ELASTIC_EASEIN:e=.3,null!=i&&0<i.length&&(e=i[0]),n=this.elasticEaseIn(t,e);break;case ccs.TweenType.ELASTIC_EASEOUT:e=.3,null!=i&&0<i.length&&(e=i[0]),n=this.elasticEaseOut(t,e);break;case ccs.TweenType.ELASTIC_EASEINOUT:e=.3,null!=i&&0<i.length&&(e=i[0]),n=this.elasticEaseInOut(t,e);break;case ccs.TweenType.BACK_EASEIN:n=this.backEaseIn(t);break;case ccs.TweenType.BACK_EASEOUT:n=this.backEaseOut(t);break;case ccs.TweenType.BACK_EASEINOUT:n=this.backEaseInOut(t);break;case ccs.TweenType.BOUNCE_EASEIN:n=this.bounceEaseIn(t);break;case ccs.TweenType.BOUNCE_EASEOUT:n=this.bounceEaseOut(t);break;case ccs.TweenType.BOUNCE_EASEINOUT:n=this.bounceEaseInOut(t);break;default:n=this.sineEaseInOut(t)}return n},ccs.TweenFunction.linear=function(t){return t},ccs.TweenFunction.sineEaseIn=function(t){return-1*Math.cos(t*ccs.HALF_PI)+1},ccs.TweenFunction.sineEaseOut=function(t){return Math.sin(t*ccs.HALF_PI)},ccs.TweenFunction.sineEaseInOut=function(t){return-.5*(Math.cos(ccs.M_PI*t)-1)},ccs.TweenFunction.quadEaseIn=function(t){return t*t},ccs.TweenFunction.quadEaseOut=function(t){return-1*t*(t-2)},ccs.TweenFunction.quadEaseInOut=function(t){return 1>(t*=2)?.5*t*t:-.5*(--t*(t-2)-1)},ccs.TweenFunction.cubicEaseIn=function(t){return t*t*t},ccs.TweenFunction.cubicEaseOut=function(t){return(t-=1)*t*t+1},ccs.TweenFunction.cubicEaseInOut=function(t){return 1>(t*=2)?.5*t*t*t:.5*((t-=2)*t*t+2)},ccs.TweenFunction.quartEaseIn=function(t){return t*t*t*t},ccs.TweenFunction.quartEaseOut=function(t){return-((t-=1)*t*t*t-1)},ccs.TweenFunction.quartEaseInOut=function(t){return 1>(t*=2)?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},ccs.TweenFunction.quintEaseIn=function(t){return t*t*t*t*t},ccs.TweenFunction.quintEaseOut=function(t){return(t-=1)*t*t*t*t+1},ccs.TweenFunction.quintEaseInOut=function(t){return 1>(t*=2)?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},ccs.TweenFunction.expoEaseIn=function(t){return 0===t?0:Math.pow(2,10*(t-1))-.001},ccs.TweenFunction.expoEaseOut=function(t){return 1===t?1:1-Math.pow(2,-10*t)},ccs.TweenFunction.expoEaseInOut=function(t){return 1>(t/=.5)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))},ccs.TweenFunction.circEaseIn=function(t){return-1*(Math.sqrt(1-t*t)-1)},ccs.TweenFunction.circEaseOut=function(t){return t-=1,Math.sqrt(1-t*t)},ccs.TweenFunction.circEaseInOut=function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):(t-=2,.5*(Math.sqrt(1-t*t)+1))},ccs.TweenFunction.elasticEaseIn=function(t,e){var i=.3;0<e.length&&(i=e[0]);var n=0;return 0===t||1===t?n=t:(n=i/4,t-=1,n=-Math.pow(2,10*t)*Math.sin((t-n)*ccs.DOUBLE_PI/i)),n},ccs.TweenFunction.elasticEaseOut=function(t,e){var i=.3;0<e.length&&(i=e[0]);var n=0;return 0===t||1===t?n=t:(n=i/4,n=Math.pow(2,-10*t)*Math.sin((t-n)*ccs.DOUBLE_PI/i)+1),n},ccs.TweenFunction.elasticEaseInOut=function(t,e){var i=.3;0<e.length&&(i=e[0]);var n=0;return 0===t||1===t?n=t:(i||(i=.3*1.5),n=i/4,n=0>(t=2*t-1)?-.5*Math.pow(2,10*t)*Math.sin((t-n)*ccs.DOUBLE_PI/i):Math.pow(2,-10*t)*Math.sin((t-n)*ccs.DOUBLE_PI/i)*.5+1),n},ccs.TweenFunction.backEaseIn=function(t){return t*t*(2.70158*t-1.70158)},ccs.TweenFunction.backEaseOut=function(t){return(t-=1)*t*(2.70158*t+1.70158)+1},ccs.TweenFunction.backEaseInOut=function(t){return 1>(t*=2)?t*t*(3.5949095*t-2.5949095)/2:(t-=2)*t*(3.5949095*t+2.5949095)/2+1},ccs.bounceTime=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},ccs.TweenFunction.bounceEaseIn=function(t){return 1-ccs.bounceTime(1-t)},ccs.TweenFunction.bounceEaseOut=function(t){return ccs.bounceTime(t)},ccs.TweenFunction.bounceEaseInOut=function(t){return.5>t?.5*(1-ccs.bounceTime(1-2*t)):.5*ccs.bounceTime(2*t-1)+.5},ccs.TweenFunction.customEase=function(t,e){if(0<e.length){var i=1-t;return e[1]*i*i*i+3*e[3]*t*i*i+3*e[5]*t*t*i+e[7]*t*t*t}return t},ccs.TweenFunction.easeIn=function(t,e){return Math.pow(t,e)},ccs.TweenFunction.easeOut=function(t,e){return Math.pow(t,1/e)},ccs.TweenFunction.easeInOut=function(t,e){return 1>(t*=2)?.5*Math.pow(t,e):1-.5*Math.pow(2-t,e)},ccs.TweenFunction.quadraticIn=function(t){return Math.pow(t,2)},ccs.TweenFunction.quadraticOut=function(t){return-t*(t-2)},ccs.TweenFunction.bezieratFunction=function(t,e,i,n,s){return Math.pow(1-s,3)*t+3*s*Math.pow(1-s,2)*e+3*Math.pow(s,2)*(1-s)*i+Math.pow(s,3)*n};var ENABLE_PHYSICS_DETECT=!1;ccs.fmodf=function(t,e){for(;t>e;)t-=e;return t};var CC_SAFE_RELEASE=function(t){t&&t.release&&t.release()};ccs.isSpriteContainPoint=function(t,e,i){return e=t.convertToNodeSpace(e),i&&(i.x=e.x,i.y=e.y),t=t.getContentSize(),cc.rectContainsPoint(cc.rect(0,0,t.width,t.height),e)},ccs.SPRITE_CONTAIN_POINT=ccs.isSpriteContainPoint,ccs.SPRITE_CONTAIN_POINT_WITH_RETURN=ccs.isSpriteContainPoint,ccs.extBezierTo=function(t,e,i,n,s){var r=cc.p(0,0);return n&&!s&&(r.x=Math.pow(1-t,2)*e.x+2*t*(1-t)*i.x+Math.pow(t,2)*n.x,r.y=Math.pow(1-t,2)*e.y+2*t*(1-t)*i.y+Math.pow(t,2)*n.y),s&&(r.x=e.x*Math.pow(1-t,3)+3*t*i.x*Math.pow(1-t,2)+3*n.x*Math.pow(t,2)*(1-t)+s.x*Math.pow(t,3),r.y=e.y*Math.pow(1-t,3)+3*t*i.y*Math.pow(1-t,2)+3*n.y*Math.pow(t,2)*(1-t)+s.y*Math.pow(t,3)),r},ccs.extCircleTo=function(t,e,i,n,s){var r=cc.p(0,0);return r.x=e.x+i*Math.cos(n+s*t),r.y=e.y+i*Math.sin(n+s*t),r},ccs.RelativeData=function(){this.plistFiles=[],this.armatures=[],this.animations=[],this.textures=[]},ccs.armatureDataManager={_animationDatas:{},_armatureDatas:{},_textureDatas:{},_autoLoadSpriteFile:!1,_relativeDatas:{},s_sharedArmatureDataManager:null,removeArmatureFileInfo:function(t){var e=this.getRelativeData(t);if(e){var i,n;for(i=0;i<e.armatures.length;i++)n=e.armatures[i],this.removeArmatureData(n);for(i=0;i<e.animations.length;i++)n=e.animations[i],this.removeAnimationData(n);for(i=0;i<e.textures.length;i++)n=e.textures[i],this.removeTextureData(n);for(i=0;i<e.plistFiles.length;i++)n=e.plistFiles[i],cc.spriteFrameCache.removeSpriteFramesFromFile(n);delete this._relativeDatas[t],ccs.dataReaderHelper.removeConfigFile(t)}},addArmatureData:function(t,e,i){(i=this.getRelativeData(i))&&i.armatures.push(t),this._armatureDatas[t]=e},getArmatureData:function(t){var e=null;return this._armatureDatas&&(e=this._armatureDatas[t]),e},removeArmatureData:function(t){this._armatureDatas[t]&&delete this._armatureDatas[t]},addAnimationData:function(t,e,i){(i=this.getRelativeData(i))&&i.animations.push(t),this._animationDatas[t]=e},getAnimationData:function(t){var e=null;return this._animationDatas[t]&&(e=this._animationDatas[t]),e},removeAnimationData:function(t){this._animationDatas[t]&&delete this._animationDatas[t]},addTextureData:function(t,e,i){(i=this.getRelativeData(i))&&i.textures.push(t),this._textureDatas[t]=e},getTextureData:function(t){var e=null;return this._textureDatas&&(e=this._textureDatas[t]),e},removeTextureData:function(t){this._textureDatas[t]&&delete this._textureDatas[t]},addArmatureFileInfo:function(){var t,e,i;switch(arguments.length){case 1:i=arguments[0],this.addRelativeData(i),this._autoLoadSpriteFile=!0,ccs.dataReaderHelper.addDataFromFile(i);break;case 3:t=arguments[0],e=arguments[1],i=arguments[2],this.addRelativeData(i),this._autoLoadSpriteFile=!1,ccs.dataReaderHelper.addDataFromFile(i),this.addSpriteFrameFromFile(e,t)}},addArmatureFileInfoAsync:function(){var t,e,i,n,s;switch(arguments.length){case 3:i=arguments[0],n=arguments[2],s=arguments[1],this.addRelativeData(i),this._autoLoadSpriteFile=!0,ccs.dataReaderHelper.addDataFromFileAsync("","",i,s,n);break;case 5:t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[4],s=arguments[3],this.addRelativeData(i),this._autoLoadSpriteFile=!1,ccs.dataReaderHelper.addDataFromFileAsync(t,e,i,s,n),this.addSpriteFrameFromFile(e,t)}},addSpriteFrameFromFile:function(t,e,i){(i=this.getRelativeData(i))&&i.plistFiles.push(t),ccs.spriteFrameCacheHelper.addSpriteFrameFromFile(t,e)},isAutoLoadSpriteFile:function(){return this._autoLoadSpriteFile},getArmatureDatas:function(){return this._armatureDatas},getAnimationDatas:function(){return this._animationDatas},getTextureDatas:function(){return this._textureDatas},addRelativeData:function(t){this._relativeDatas[t]||(this._relativeDatas[t]=new ccs.RelativeData)},getRelativeData:function(t){return this._relativeDatas[t]},clear:function(){for(var t in this._relativeDatas)this.removeArmatureFileInfo(t);this._animationDatas={},this._armatureDatas={},this._textureDatas={},this._relativeDatas={},ccs.spriteFrameCacheHelper.clear(),ccs.dataReaderHelper.clear()}},ccs.BLEND_TYPE_NORMAL=0,ccs.BLEND_TYPE_LAYER=1,ccs.BLEND_TYPE_DARKEN=2,ccs.BLEND_TYPE_MULTIPLY=3,ccs.BLEND_TYPE_LIGHTEN=4,ccs.BLEND_TYPE_SCREEN=5,ccs.BLEND_TYPE_OVERLAY=6,ccs.BLEND_TYPE_HIGHLIGHT=7,ccs.BLEND_TYPE_ADD=8,ccs.BLEND_TYPE_SUBTRACT=9,ccs.BLEND_TYPE_DIFFERENCE=10,ccs.BLEND_TYPE_INVERT=11,ccs.BLEND_TYPE_ALPHA=12,ccs.BLEND_TYPE_ERASE=13,ccs.DISPLAY_TYPE_SPRITE=0,ccs.DISPLAY_TYPE_ARMATURE=1,ccs.DISPLAY_TYPE_PARTICLE=2,ccs.DISPLAY_TYPE_MAX=3,ccs.BaseData=ccs.Class.extend({x:0,y:0,zOrder:0,skewX:0,skewY:0,scaleX:1,scaleY:1,tweenRotate:0,isUseColorInfo:!1,r:255,g:255,b:255,a:255,ctor:function(){this.skewY=this.skewX=this.zOrder=this.y=this.x=0,this.scaleY=this.scaleX=1,this.tweenRotate=0,this.isUseColorInfo=!1,this.a=this.b=this.g=this.r=255},copy:function(t){this.x=t.x,this.y=t.y,this.zOrder=t.zOrder,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.skewX=t.skewX,this.skewY=t.skewY,this.tweenRotate=t.tweenRotate,this.isUseColorInfo=t.isUseColorInfo,this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a},setColor:function(t){this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a},getColor:function(){return cc.color(this.r,this.g,this.b,this.a)},subtract:function(t,e,i){this.x=e.x-t.x,this.y=e.y-t.y,this.scaleX=e.scaleX-t.scaleX,this.scaleY=e.scaleY-t.scaleY,this.skewX=e.skewX-t.skewX,this.skewY=e.skewY-t.skewY,this.isUseColorInfo||t.isUseColorInfo||e.isUseColorInfo?(this.a=e.a-t.a,this.r=e.r-t.r,this.g=e.g-t.g,this.b=e.b-t.b,this.isUseColorInfo=!0):(this.a=this.r=this.g=this.b=0,this.isUseColorInfo=!1),i&&(this.skewX>ccs.M_PI&&(this.skewX-=ccs.DOUBLE_PI),this.skewX<-ccs.M_PI&&(this.skewX+=ccs.DOUBLE_PI),this.skewY>ccs.M_PI&&(this.skewY-=ccs.DOUBLE_PI),this.skewY<-ccs.M_PI&&(this.skewY+=ccs.DOUBLE_PI)),e.tweenRotate&&(this.skewX+=e.tweenRotate*ccs.PI*2,this.skewY-=e.tweenRotate*ccs.PI*2)}}),ccs.DisplayData=ccs.Class.extend({displayType:ccs.DISPLAY_TYPE_MAX,displayName:"",ctor:function(){this.displayType=ccs.DISPLAY_TYPE_MAX},changeDisplayToTexture:function(t){var e=t.lastIndexOf(".");return-1!==e&&(t=t.substring(0,e)),t},copy:function(t){this.displayName=t.displayName,this.displayType=t.displayType}}),ccs.SpriteDisplayData=ccs.DisplayData.extend({skinData:null,ctor:function(){this.skinData=new ccs.BaseData,this.displayType=ccs.DISPLAY_TYPE_SPRITE},copy:function(t){ccs.DisplayData.prototype.copy.call(this,t),this.skinData=t.skinData}}),ccs.ArmatureDisplayData=ccs.DisplayData.extend({ctor:function(){this.displayName="",this.displayType=ccs.DISPLAY_TYPE_ARMATURE}}),ccs.ParticleDisplayData=ccs.DisplayData.extend({ctor:function(){this.displayType=ccs.DISPLAY_TYPE_PARTICLE}}),ccs.BoneData=ccs.BaseData.extend({displayDataList:null,name:"",parentName:"",boneDataTransform:null,ctor:function(){this.displayDataList=[],this.parentName=this.name="",this.boneDataTransform=null},init:function(){return this.displayDataList.length=0,!0},addDisplayData:function(t){this.displayDataList.push(t)},getDisplayData:function(t){return this.displayDataList[t]}}),ccs.ArmatureData=ccs.Class.extend({boneDataDic:null,name:"",dataVersion:.1,ctor:function(){this.boneDataDic={},this.name="",this.dataVersion=.1},init:function(){return!0},addBoneData:function(t){this.boneDataDic[t.name]=t},getBoneDataDic:function(){return this.boneDataDic},getBoneData:function(t){return this.boneDataDic[t]}}),ccs.FrameData=ccs.BaseData.extend({duration:0,tweenEasing:0,easingParamNumber:0,easingParams:null,displayIndex:-1,movement:"",event:"",sound:"",soundEffect:"",blendFunc:null,frameID:0,isTween:!0,ctor:function(){ccs.BaseData.prototype.ctor.call(this),this.duration=1,this.tweenEasing=ccs.TweenType.LINEAR,this.easingParamNumber=0,this.easingParams=[],this.displayIndex=0,this.soundEffect=this.sound=this.event=this.movement="",this.blendFunc=new cc.BlendFunc(cc.BLEND_SRC,cc.BLEND_DST),this.frameID=0,this.isTween=!0},copy:function(t){if(ccs.BaseData.prototype.copy.call(this,t),this.duration=t.duration,this.displayIndex=t.displayIndex,this.tweenEasing=t.tweenEasing,this.easingParamNumber=t.easingParamNumber,0!==this.easingParamNumber)for(var e=this.easingParams.length=0;e<this.easingParamNumber;e++)this.easingParams[e]=t.easingParams[e];this.blendFunc=t.blendFunc,this.isTween=t.isTween}}),ccs.MovementBoneData=ccs.Class.extend({delay:0,scale:1,duration:0,frameList:null,name:"",ctor:function(){this.delay=0,this.scale=1,this.duration=0,this.frameList=[],this.name=""},init:function(){return!0},addFrameData:function(t){this.frameList.push(t)},getFrameData:function(t){return this.frameList[t]}}),ccs.MovementData=function(){this.name="",this.duration=0,this.scale=1,this.durationTween=this.durationTo=0,this.loop=!0,this.tweenEasing=ccs.TweenType.LINEAR,this.movBoneDataDic={}},ccs.MovementData.prototype.addMovementBoneData=function(t){this.movBoneDataDic[t.name]=t},ccs.MovementData.prototype.getMovementBoneData=function(t){return this.movBoneDataDic[t]},ccs.AnimationData=function(){this.movementDataDic={},this.movementNames=[],this.name=""},ccs.AnimationData.prototype.addMovement=function(t){this.movementDataDic[t.name]=t,this.movementNames.push(t.name)},ccs.AnimationData.prototype.getMovement=function(t){return this.movementDataDic[t]},ccs.AnimationData.prototype.getMovementCount=function(){return Object.keys(this.movementDataDic).length},ccs.ContourVertex2=function(t,e){this.x=t||0,this.y=e||0},ccs.ContourData=function(){this.vertexList=[]},ccs.ContourData.prototype.init=function(){return this.vertexList.length=0,!0},ccs.ContourData.prototype.addVertex=function(t){this.vertexList.push(t)},ccs.TextureData=function(){this.width=this.height=0,this.pivotY=this.pivotX=.5,this.name="",this.contourDataList=[]},ccs.TextureData.prototype.init=function(){this.contourDataList.length=0},ccs.TextureData.prototype.addContourData=function(t){this.contourDataList.push(t)},ccs.TextureData.prototype.getContourData=function(t){return this.contourDataList[t]},ccs.DecorativeDisplay=ccs.Class.extend({_display:null,_colliderDetector:null,_displayData:null,ctor:function(){this._displayData=this._colliderDetector=this._display=null},init:function(){return!0},setDisplay:function(t){t._parent&&(t._parent.removeChild(t),delete t._parent),this._display=t},getDisplay:function(){return this._display},setColliderDetector:function(t){this._colliderDetector=t},getColliderDetector:function(){return this._colliderDetector},setDisplayData:function(t){this._displayData=t},getDisplayData:function(){return this._displayData},release:function(){this._colliderDetector=this._displayData=this._display=null}}),ccs.DecorativeDisplay.create=function(){return new ccs.DecorativeDisplay},ccs.displayFactory={addDisplay:function(t,e,i){switch(i.displayType){case ccs.DISPLAY_TYPE_SPRITE:this.addSpriteDisplay(t,e,i);break;case ccs.DISPLAY_TYPE_PARTICLE:this.addParticleDisplay(t,e,i);break;case ccs.DISPLAY_TYPE_ARMATURE:this.addArmatureDisplay(t,e,i)}},createDisplay:function(t,e){switch(e.getDisplayData().displayType){case ccs.DISPLAY_TYPE_SPRITE:this.createSpriteDisplay(t,e);break;case ccs.DISPLAY_TYPE_PARTICLE:this.createParticleDisplay(t,e);break;case ccs.DISPLAY_TYPE_ARMATURE:this.createArmatureDisplay(t,e)}},_helpTransform:{a:1,b:0,c:0,d:1,tx:0,ty:0},updateDisplay:function(t,e,i){if(n=t.getDisplayRenderNode()){switch(t.getDisplayRenderNodeType()){case ccs.DISPLAY_TYPE_SPRITE:i&&(n._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),n.updateArmatureTransform());break;case ccs.DISPLAY_TYPE_PARTICLE:this.updateParticleDisplay(t,n,e);break;case ccs.DISPLAY_TYPE_ARMATURE:this.updateArmatureDisplay(t,n,e);break;default:e=t.getNodeToArmatureTransform(),n.setAdditionalTransform(e)}if((ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT||ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX)&&i&&(i=(n=t.getDisplayManager().getCurrentDecorativeDisplay()).getColliderDetector())){var n,s=(e=n.getDisplay()).getNodeToParentTransform();(n=this._helpTransform).a=s.a,n.b=s.b,n.c=s.c,n.d=s.d,n.tx=s.tx,n.ty=s.ty,e=cc.pointApplyAffineTransform(e.getAnchorPointInPoints(),n),n.tx=e.x,n.ty=e.y,t=cc.affineTransformConcat(n,t.getArmature().getNodeToParentTransform()),i.updateTransform(t)}}},addSpriteDisplay:function(t,e,i){var n=new ccs.SpriteDisplayData;n.copy(i),e.setDisplayData(n),this.createSpriteDisplay(t,e)},createSpriteDisplay:function(t,e){var i=null,n=e.getDisplayData(),s=(i=n.displayName).lastIndexOf(".");-1!==s&&(i=i.substring(0,s)),i=""===i?new ccs.Skin:new ccs.Skin("#"+i+".png"),e.setDisplay(i),i.setBone(t),this.initSpriteDisplay(t,e,n.displayName,i),(s=t.getArmature())&&(s.getArmatureData().dataVersion>=ccs.CONST_VERSION_COMBINED?i.setSkinData(n.skinData):i.setSkinData(t.boneData))},initSpriteDisplay:function(t,e,i,n){var s=i.lastIndexOf(".");-1!==s&&(i=i.substring(0,s)),(i=ccs.armatureDataManager.getTextureData(i))&&n.setAnchorPoint(cc.p(i.pivotX,i.pivotY)),(ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT||ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX)&&i&&0<i.contourDataList.length&&((t=new ccs.ColliderDetector(t)).addContourDataList(i.contourDataList),e.setColliderDetector(t))},addArmatureDisplay:function(t,e,i){var n=new ccs.ArmatureDisplayData;n.copy(i),e.setDisplayData(n),this.createArmatureDisplay(t,e)},createArmatureDisplay:function(t,e){var i=e.getDisplayData();i=new ccs.Armature(i.displayName,t);e.setDisplay(i)},updateArmatureDisplay:function(t,e,i){e&&(e.sortAllChildren(),e.update(i))},addParticleDisplay:function(t,e,i){var n=new ccs.ParticleDisplayData;n.copy(i),e.setDisplayData(n),this.createParticleDisplay(t,e)},createParticleDisplay:function(t,e){var i=e.getDisplayData();(i=new cc.ParticleSystem(i.displayName)).removeFromParent(),i.cleanup(),t.getArmature()&&i.setParent(t.getArmature()),e.setDisplay(i)},updateParticleDisplay:function(t,e,i){var n=new ccs.BaseData;ccs.TransformHelp.matrixToNode(t.nodeToArmatureTransform(),n),e.setPosition(n.x,n.y),e.setScaleX(n.scaleX),e.setScaleY(n.scaleY),e.update(i)}},ccs.DisplayManager=ccs.Class.extend({_decoDisplayList:null,_currentDecoDisplay:null,_displayRenderNode:null,_displayIndex:null,_forceChangeDisplay:!1,_bone:null,_visible:!0,_displayType:null,ctor:function(t){this._decoDisplayList=[],this._displayIndex=this._displayRenderNode=this._currentDecoDisplay=null,this._forceChangeDisplay=!1,this._bone=null,this._visible=!0,this._displayType=ccs.DISPLAY_TYPE_MAX,t&&ccs.DisplayManager.prototype.init.call(this,t)},init:function(t){return this._bone=t,this.initDisplayList(t.getBoneData()),!0},addDisplay:function(t,e){var i,n=this._decoDisplayList;if(0<=e&&e<n.length?i=n[e]:(i=new ccs.DecorativeDisplay,n.push(i)),t instanceof ccs.DisplayData)ccs.displayFactory.addDisplay(this._bone,i,t);else{var s=null;if(t instanceof ccs.Skin)if(t.setBone(this._bone),s=new ccs.SpriteDisplayData,ccs.displayFactory.initSpriteDisplay(this._bone,i,t.getDisplayName(),t),(r=i.getDisplayData())instanceof ccs.SpriteDisplayData)t.setSkinData(r.skinData),s.skinData=r.skinData;else{for(var r=!1,o=n.length-2;0<=o;o--){var a=n[o].getDisplayData();if(a instanceof ccs.SpriteDisplayData){r=!0,t.setSkinData(a.skinData),s.skinData=a.skinData;break}}r||t.setSkinData(new ccs.BaseData)}else t instanceof cc.ParticleSystem?(s=new ccs.ParticleDisplayData,t.removeFromParent(),t._performRecursive(cc.Node._stateCallbackType.cleanup),(n=this._bone.getArmature())&&t.setParent(n)):t instanceof ccs.Armature?((s=new ccs.ArmatureDisplayData).displayName=t.getName(),t.setParentBone(this._bone)):s=new ccs.DisplayData;i.setDisplay(t),i.setDisplayData(s)}e===this._displayIndex&&(this._displayIndex=-1,this.changeDisplayWithIndex(e,!1))},_addDisplayOther:function(t,e){var i=null;if(e instanceof ccs.Skin)if(e.setBone(this._bone),(i=new ccs.SpriteDisplayData).displayName=e.getDisplayName(),ccs.displayFactory.initSpriteDisplay(this._bone,t,e.getDisplayName(),e),(n=t.getDisplayData())instanceof ccs.SpriteDisplayData)e.setSkinData(n.skinData);else{for(var n=!1,s=this._decoDisplayList.length-2;0<=s;s--){var r=this._decoDisplayList[s].getDisplayData();if(r){n=!0,e.setSkinData(r.skinData),i.skinData=r.skinData;break}}n||e.setSkinData(new ccs.BaseData),e.setSkinData(new ccs.BaseData)}else e instanceof cc.ParticleSystem?(i=new ccs.ParticleDisplayData).displayName=e._plistFile:e instanceof ccs.Armature?((i=new ccs.ArmatureDisplayData).displayName=e.getName(),e.setParentBone(this._bone)):i=new ccs.DisplayData;t.setDisplay(e),t.setDisplayData(i)},removeDisplay:function(t){this._decoDisplayList.splice(t,1),t===this._displayIndex&&(this.setCurrentDecorativeDisplay(null),this._displayIndex=-1)},getDecorativeDisplayList:function(){return this._decoDisplayList},changeDisplayWithIndex:function(t,e){t>=this._decoDisplayList.length?cc.log("the index value is out of range"):(this._forceChangeDisplay=e,this._displayIndex!==t&&(this._displayIndex=t,0>t?this._displayRenderNode&&(this._displayRenderNode.removeFromParent(!0),this.setCurrentDecorativeDisplay(null)):this.setCurrentDecorativeDisplay(this._decoDisplayList[t])))},changeDisplayWithName:function(t,e){for(var i=this._decoDisplayList,n=0;n<i.length;n++)if(i[n].getDisplayData().displayName===t){this.changeDisplayWithIndex(n,e);break}},setCurrentDecorativeDisplay:function(t){var e=this._currentDecoDisplay;(ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT||ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX)&&e&&e.getColliderDetector()&&e.getColliderDetector().setActive(!1),e=this._currentDecoDisplay=t,(ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT||ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX)&&e&&e.getColliderDetector()&&e.getColliderDetector().setActive(!0),t=e?e.getDisplay():null;e=this._displayRenderNode;var i=this._bone;e&&(e instanceof ccs.Armature&&i.setChildArmature(null),e.removeFromParent(!0)),(this._displayRenderNode=t)?(t instanceof ccs.Armature?(this._bone.setChildArmature(t),t.setParentBone(this._bone)):t instanceof cc.ParticleSystem&&(t instanceof ccs.Armature?(i.setChildArmature(t),t.setParentBone(i)):t instanceof cc.ParticleSystem&&t.resetSystem()),t.setColor(i.getDisplayedColor()),t.setOpacity(i.getDisplayedOpacity()),this._displayRenderNode.setVisible(this._visible),this._displayType=this._currentDecoDisplay.getDisplayData().displayType):this._displayType=ccs.DISPLAY_TYPE_MAX,cc.renderer.childrenOrderDirty=!0},getDisplayRenderNode:function(){return this._displayRenderNode},getDisplayRenderNodeType:function(){return this._displayType},getCurrentDisplayIndex:function(){return this._displayIndex},getCurrentDecorativeDisplay:function(){return this._currentDecoDisplay},getDecorativeDisplayByIndex:function(t){return this._decoDisplayList[t]},initDisplayList:function(t){if(this._decoDisplayList.length=0,t){t=t.displayDataList;for(var e=this._decoDisplayList,i=this._bone,n=0;n<t.length;n++){var s=t[n],r=new ccs.DecorativeDisplay;r.setDisplayData(s),ccs.displayFactory.createDisplay(i,r),e.push(r)}}},containPoint:function(t,e){if(!this._visible||0>this._displayIndex)return!1;if(void 0!==e&&(t=cc.p(t,e)),this._currentDecoDisplay.getDisplayData().displayType===ccs.DISPLAY_TYPE_SPRITE){var i=(i=this._currentDecoDisplay.getDisplay()).getChildByTag(0);return ccs.SPRITE_CONTAIN_POINT_WITH_RETURN(i,t)}return!1},setVisible:function(t){this._displayRenderNode&&(this._visible=t,this._displayRenderNode.setVisible(t))},isVisible:function(){return this._visible},getContentSize:function(){return this._displayRenderNode?this._displayRenderNode.getContentSize():cc.size(0,0)},getBoundingBox:function(){return this._displayRenderNode?this._displayRenderNode.getBoundingBox():cc.rect(0,0,0,0)},getAnchorPoint:function(){return this._displayRenderNode?this._displayRenderNode.getAnchorPoint():cc.p(0,0)},getAnchorPointInPoints:function(){return this._displayRenderNode?this._displayRenderNode.getAnchorPointInPoints():cc.p(0,0)},getForceChangeDisplay:function(){return this._forceChangeDisplay},release:function(){this._decoDisplayList=null,this._displayRenderNode&&(this._displayRenderNode.removeFromParent(!0),this._displayRenderNode=null)}}),ccs.DisplayManager.create=function(t){return new ccs.DisplayManager(t)},ccs.Skin=ccs.Sprite.extend({_skinData:null,bone:null,_skinTransform:null,_displayName:"",_armature:null,_className:"Skin",ctor:function(t,e){cc.Sprite.prototype.ctor.call(this),this.bone=this._skinData=null,this._displayName="",this._skinTransform=cc.affineTransformIdentity(),this._armature=null,null==t||""===t?ccs.Skin.prototype.init.call(this):"#"===t[0]?ccs.Skin.prototype.initWithSpriteFrameName.call(this,t.substr(1)):ccs.Skin.prototype.initWithFile.call(this,t,e)},initWithSpriteFrameName:function(t){if(""===t)return!1;var e=cc.spriteFrameCache.getSpriteFrame(t),i=!0;return e?this.initWithSpriteFrame(e):(cc.log("Can't find CCSpriteFrame with %s. Please check your .plist file",t),i=!1),this._displayName=t,i},initWithFile:function(t,e){var i=e?cc.Sprite.prototype.initWithFile.call(this,t,e):cc.Sprite.prototype.initWithFile.call(this,t);return this._displayName=t,i},setSkinData:function(t){this._skinData=t,this.setScaleX(t.scaleX),this.setScaleY(t.scaleY),this.setRotationX(cc.radiansToDegrees(t.skewX)),this.setRotationY(cc.radiansToDegrees(-t.skewY)),this.setPosition(t.x,t.y),this._renderCmd.transform()},getSkinData:function(){return this._skinData},updateArmatureTransform:function(){this._renderCmd.transform()},getNodeToWorldTransform:function(){return this._renderCmd.getNodeToWorldTransform()},getNodeToWorldTransformAR:function(){return this._renderCmd.getNodeToWorldTransformAR()},setBone:function(t){this.bone=t,(t=this.bone.getArmature())&&(this._armature=t)},getBone:function(){return this.bone},getDisplayName:function(){return this._displayName},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new ccs.Skin.CanvasRenderCmd(this):new ccs.Skin.WebGLRenderCmd(this)}}),_p=ccs.Skin.prototype,cc.defineGetterSetter(_p,"skinData",_p.getSkinData,_p.setSkinData),cc.defineGetterSetter(_p,"displayName",_p.getDisplayName),_p=null,ccs.Skin.create=function(t,e){return new ccs.Skin(t,e)},ccs.Skin.createWithSpriteFrameName=function(t){return new ccs.Skin("#"+t)},function(){ccs.Skin.RenderCmd={_realWorldTM:null,transform:function(t,e){this._transform||(this._transform={a:1,b:0,c:0,d:1,tx:0,ty:0},this._worldTransform={a:1,b:0,c:0,d:1,tx:0,ty:0});var i=this._node,n=t?t._worldTransform:null,s=this._transform,r=this._worldTransform;if((this._dirtyFlag&cc.Node._dirtyFlags.transformDirty||n)&&(this.originTransform(),cc.affineTransformConcatIn(this._transform,i.bone.getNodeToArmatureTransform()),this._dirtyFlag&=~cc.Node._dirtyFlags.transformDirty),n){if(r.a=s.a*n.a+s.b*n.c,r.b=s.a*n.b+s.b*n.d,r.c=s.c*n.a+s.d*n.c,r.d=s.c*n.b+s.d*n.d,r.tx=s.tx*n.a+s.ty*n.c+n.tx,r.ty=s.tx*n.b+s.ty*n.d+n.ty,n=this._vertices){var o=i._offsetPosition.x,a=o+i._rect.width,c=i._offsetPosition.y;i=c+i._rect.height;n[0].x=o*r.a+i*r.c+r.tx,n[0].y=o*r.b+i*r.d+r.ty,n[1].x=o*r.a+c*r.c+r.tx,n[1].y=o*r.b+c*r.d+r.ty,n[2].x=a*r.a+i*r.c+r.tx,n[2].y=a*r.b+i*r.d+r.ty,n[3].x=a*r.a+c*r.c+r.tx,n[3].y=a*r.b+c*r.d+r.ty}}else r.a=s.a,r.b=s.b,r.c=s.c,r.d=s.d,r.tx=s.tx,r.ty=s.ty;(r=this._realWorldTM)&&(r.a=s.a,r.b=s.b,r.c=s.c,r.d=s.d,r.tx=s.tx,r.ty=s.ty,cc.affineTransformConcatIn(r,this._node.bone.getArmature()._renderCmd._worldTransform))},getNodeToWorldTransform:function(){return cc.affineTransformConcat(this._transform,this._node.bone.getArmature().getNodeToWorldTransform())},getNodeToWorldTransformAR:function(){var t=this._transform,e=this._node;return this._anchorPointInPoints=cc.pointApplyAffineTransform(this._anchorPointInPoints,t),t.tx=this._anchorPointInPoints.x,t.ty=this._anchorPointInPoints.y,cc.affineTransformConcat(t,e.bone.getArmature().getNodeToWorldTransform())}},ccs.Skin.CanvasRenderCmd=function(t){this._spriteCmdCtor(t),this._realWorldTM={a:1,b:0,c:0,d:1,tx:0,ty:0}};var t=ccs.Skin.CanvasRenderCmd.prototype=Object.create(cc.Sprite.CanvasRenderCmd.prototype);cc.inject(ccs.Skin.RenderCmd,t),t.constructor=ccs.Skin.CanvasRenderCmd,t._updateCurrentRegions=function(){var t=this._currentRegion;this._currentRegion=this._oldRegion,this._oldRegion=t,cc.Node.CanvasRenderCmd.RegionStatus.DirtyDouble!==this._regionFlag||this._currentRegion.isEmpty()||this._oldRegion.union(this._currentRegion),this._currentRegion.updateRegion(this.getLocalBB(),this._realWorldTM)},ccs.Skin.WebGLRenderCmd=function(t){this._spriteCmdCtor(t)},t=ccs.Skin.WebGLRenderCmd.prototype=Object.create(cc.Sprite.WebGLRenderCmd.prototype),cc.inject(ccs.Skin.RenderCmd,t),t.constructor=ccs.Skin.WebGLRenderCmd}(),ccs.ANIMATION_TYPE_SINGLE_FRAME=-4,ccs.ANIMATION_TYPE_NO_LOOP=-3,ccs.ANIMATION_TYPE_TO_LOOP_FRONT=-2,ccs.ANIMATION_TYPE_TO_LOOP_BACK=-1,ccs.ANIMATION_TYPE_LOOP_FRONT=0,ccs.ANIMATION_TYPE_LOOP_BACK=1,ccs.ANIMATION_TYPE_MAX=2,ccs.ProcessBase=ccs.Class.extend({_processScale:1,_isComplete:!0,_isPause:!0,_isPlaying:!1,_currentPercent:0,_rawDuration:0,_loopType:0,_tweenEasing:0,animationInternal:null,_currentFrame:0,_durationTween:0,_nextFrameIndex:0,_curFrameIndex:null,_isLoopBack:!1,ctor:function(){this._processScale=1,this._isPause=this._isComplete=!0,this._isPlaying=!1,this._rawDuration=this._durationTween=this._currentPercent=this._currentFrame=0,this._loopType=ccs.ANIMATION_TYPE_LOOP_BACK,this._tweenEasing=ccs.TweenType.LINEAR,this.animationInternal=1/60,this._durationTween=this._curFrameIndex=0,this._isLoopBack=!1},pause:function(){this._isPause=!0,this._isPlaying=!1},resume:function(){this._isPause=!1,this._isPlaying=!0},stop:function(){this._isComplete=!0,this._isPlaying=!1},play:function(t,e,i,n){this._isPause=this._isComplete=!1,this._isPlaying=!0,this._currentFrame=0,this._nextFrameIndex=t,this._tweenEasing=n},update:function(t){if(!(this._isComplete||this._isPause||0>=this._rawDuration||1<t)){var e=void 0===this._nextFrameIndex?0:this._nextFrameIndex,i=this._currentFrame;0>=e?(this._currentPercent=1,i=0):(i+=t/this.animationInternal*this._processScale,this._currentPercent=i/e,i=ccs.fmodf(i,e)),this._currentFrame=i,this.updateHandler()}},gotoFrame:function(t){var e=this._loopType;e===ccs.ANIMATION_TYPE_NO_LOOP?e=ccs.ANIMATION_TYPE_MAX:e===ccs.ANIMATION_TYPE_TO_LOOP_FRONT&&(e=ccs.ANIMATION_TYPE_LOOP_FRONT),this._loopType=e,this._curFrameIndex=t,this._nextFrameIndex=this._durationTween},getCurrentFrameIndex:function(){return this._curFrameIndex=(this._rawDuration-1)*this._currentPercent},updateHandler:function(){},isPause:function(){return this._isPause},isComplete:function(){return this._isComplete},getCurrentPercent:function(){return this._currentPercent},getRawDuration:function(){return this._rawDuration},getLoop:function(){return this._loopType},getTweenEasing:function(){return this._tweenEasing},getAnimationInternal:function(){return this.animationInternal},setAnimationInternal:function(t){this.animationInternal=t},getProcessScale:function(){return this._processScale},setProcessScale:function(t){this._processScale=t},isPlaying:function(){return this._isPlaying}}),_p=ccs.ProcessBase.prototype,cc.defineGetterSetter(_p,"currentFrameIndex",_p.getCurrentFrameIndex),cc.defineGetterSetter(_p,"paused",_p.isPause),cc.defineGetterSetter(_p,"completed",_p.isComplete),cc.defineGetterSetter(_p,"currentPercent",_p.getCurrentPercent),cc.defineGetterSetter(_p,"rawDuration",_p.getRawDuration),cc.defineGetterSetter(_p,"loop",_p.getLoop),cc.defineGetterSetter(_p,"tweenEasing",_p.getTweenEasing),cc.defineGetterSetter(_p,"playing",_p.isPlaying),_p=null,ccs.MovementEventType={start:0,complete:1,loopComplete:2},ccs.AnimationEvent=ccs.Class.extend({_arguments:null,_callFunc:null,_selectorTarget:null,ctor:function(t,e,i){this._data=i,this._callFunc=t,this._selectorTarget=e},call:function(){this._callFunc&&this._callFunc.apply(this._selectorTarget,this._arguments)},setArguments:function(t){this._arguments=t}}),ccs.MovementEvent=function(){this.armature=null,this.movementType=ccs.MovementEventType.start,this.movementID=""},ccs.FrameEvent=function(){this.bone=null,this.frameEventName="",this.currentFrameIndex=this.originFrameIndex=0},ccs.ArmatureAnimation=ccs.ProcessBase.extend({_animationData:null,_movementData:null,_armature:null,_movementID:"",_toIndex:0,_tweenList:null,_speedScale:1,_ignoreFrameEvent:!1,_frameEventQueue:null,_movementEventQueue:null,_movementList:null,_onMovementList:!1,_movementListLoop:!1,_movementIndex:0,_movementListDurationTo:-1,_movementEventCallFunc:null,_frameEventCallFunc:null,_movementEventTarget:null,_frameEventTarget:null,_movementEventListener:null,_frameEventListener:null,ctor:function(t){ccs.ProcessBase.prototype.ctor.call(this),this._tweenList=[],this._movementList=[],this._frameEventQueue=[],this._movementEventQueue=[],this._armature=null,t&&ccs.ArmatureAnimation.prototype.init.call(this,t)},init:function(t){return this._armature=t,this._tweenList.length=0,!0},pause:function(){for(var t=this._tweenList,e=0;e<t.length;e++)t[e].pause();ccs.ProcessBase.prototype.pause.call(this)},resume:function(){for(var t=this._tweenList,e=0;e<t.length;e++)t[e].resume();ccs.ProcessBase.prototype.resume.call(this)},stop:function(){for(var t=this._tweenList,e=0;e<t.length;e++)t[e].stop();t.length=0,ccs.ProcessBase.prototype.stop.call(this)},setAnimationScale:function(t){this.setSpeedScale(t)},getAnimationScale:function(){return this.getSpeedScale()},setSpeedScale:function(t){if(t!==this._speedScale)for(var e in this._speedScale=t,this._processScale=this._movementData?this._speedScale*this._movementData.scale:this._speedScale,t=this._armature.getBoneDic()){var i=t[e];i.getTween().setProcessScale(this._processScale),i.getChildArmature()&&i.getChildArmature().getAnimation().setSpeedScale(this._processScale)}},getSpeedScale:function(){return this._speedScale},play:function(t,e,i){cc.assert(this._animationData,"this.animationData can not be null"),this._movementData=this._animationData.getMovement(t),cc.assert(this._movementData,"this._movementData can not be null"),e=void 0===e?-1:e,i=void 0===i?-1:i,this._rawDuration=this._movementData.duration,this._movementID=t,this._processScale=this._speedScale*this._movementData.scale,e=-1===e?this._movementData.durationTo:e,t=0===this._movementData.durationTween?this._rawDuration:this._movementData.durationTween;var n=this._movementData.tweenEasing;i=0>i?this._movementData.loop:i,this._onMovementList=!1,ccs.ProcessBase.prototype.play.call(this,e,t,i,n),0===this._rawDuration?this._loopType=ccs.ANIMATION_TYPE_SINGLE_FRAME:(this._loopType=i?ccs.ANIMATION_TYPE_TO_LOOP_FRONT:ccs.ANIMATION_TYPE_NO_LOOP,this._durationTween=t),this._tweenList.length=0;var s,r,o=this._armature.getBoneDic();for(r in o){var a=o[r];s=this._movementData.movBoneDataDic[a.getName()];var c=a.getTween();s&&0<s.frameList.length?(this._tweenList.push(c),s.duration=this._movementData.duration,c.play(s,e,t,i,n),c.setProcessScale(this._processScale),a.getChildArmature()&&(a.getChildArmature().getAnimation().setSpeedScale(this._processScale),a.getChildArmature().getAnimation().isPlaying()||a.getChildArmature().getAnimation().playWithIndex(0))):a.isIgnoreMovementBoneData()||(a.getDisplayManager().changeDisplayWithIndex(-1,!1),c.stop())}this._armature.update(0)},playByIndex:function(t,e,i,n,s){cc.log("playByIndex is deprecated. Use playWithIndex instead."),this.playWithIndex(t,e,n)},playWithIndex:function(t,e,i){var n=this._animationData.movementNames;cc.assert(-1<t&&t<n.length),this.play(n[t],e,i)},playWithNames:function(t,e,i){this._movementListLoop=void 0===i||i,this._movementListDurationTo=void 0===e?-1:e,this._onMovementList=!0,this._movementIndex=0,t instanceof Array?this._movementList=t:this._movementList.length=0,this.updateMovementList()},playWithIndexes:function(t,e,i){for(this._movementList.length=0,this._movementListLoop=void 0===i||i,this._movementListDurationTo=void 0===e?-1:e,this._onMovementList=!0,this._movementIndex=0,e=this._animationData.movementNames,i=0;i<t.length;i++)this._movementList.push(e[t[i]]);this.updateMovementList()},gotoAndPlay:function(t){if(!this._movementData||0>t||t>=this._movementData.duration)cc.log("Please ensure you have played a movement, and the frameIndex is in the range.");else{var e=this._ignoreFrameEvent;this._isPlaying=this._ignoreFrameEvent=!0,this._isComplete=this._isPause=!1,ccs.ProcessBase.prototype.gotoFrame.call(this,t),this._currentPercent=this._curFrameIndex/(this._movementData.duration-1),this._currentFrame=this._nextFrameIndex*this._currentPercent;for(var i=this._tweenList,n=0;n<i.length;n++)i[n].gotoAndPlay(t);this._armature.update(0),this._ignoreFrameEvent=e}},gotoAndPause:function(t){this.gotoAndPlay(t),this.pause()},getMovementCount:function(){return this._animationData.getMovementCount()},update:function(t){ccs.ProcessBase.prototype.update.call(this,t);for(var e=this._tweenList,i=0;i<e.length;i++)e[i].update(t);for(e=this._frameEventQueue;0<e.length;)t=e.shift(),this._ignoreFrameEvent=!0,this._frameEventCallFunc&&this._frameEventCallFunc.call(this._frameEventTarget,t.bone,t.frameEventName,t.originFrameIndex,t.currentFrameIndex),this._frameEventListener&&this._frameEventListener(t.bone,t.frameEventName,t.originFrameIndex,t.currentFrameIndex),this._ignoreFrameEvent=!1;for(e=this._movementEventQueue;0<e.length;)t=e.shift(),this._movementEventCallFunc&&this._movementEventCallFunc.call(this._movementEventTarget,t.armature,t.movementType,t.movementID),this._movementEventListener&&this._movementEventListener(t.armature,t.movementType,t.movementID)},updateHandler:function(){var t=this._currentPercent;if(1<=t){switch(this._loopType){case ccs.ANIMATION_TYPE_NO_LOOP:if(this._loopType=ccs.ANIMATION_TYPE_MAX,this._currentFrame=(t-1)*this._nextFrameIndex,1>(t=this._currentFrame/this._durationTween)){this._nextFrameIndex=this._durationTween,this.movementEvent(this._armature,ccs.MovementEventType.start,this._movementID);break}break;case ccs.ANIMATION_TYPE_MAX:case ccs.ANIMATION_TYPE_SINGLE_FRAME:t=1,this._isComplete=!0,this._isPlaying=!1,this.movementEvent(this._armature,ccs.MovementEventType.complete,this._movementID),this.updateMovementList();break;case ccs.ANIMATION_TYPE_TO_LOOP_FRONT:this._loopType=ccs.ANIMATION_TYPE_LOOP_FRONT,t=ccs.fmodf(t,1),this._currentFrame=0===this._nextFrameIndex?0:ccs.fmodf(this._currentFrame,this._nextFrameIndex),this._nextFrameIndex=0<this._durationTween?this._durationTween:1,this.movementEvent(this,ccs.MovementEventType.start,this._movementID);break;default:this._currentFrame=ccs.fmodf(this._currentFrame,this._nextFrameIndex),this._toIndex=0,this.movementEvent(this._armature,ccs.MovementEventType.loopComplete,this._movementID)}this._currentPercent=t}},getCurrentMovementID:function(){return this._isComplete?"":this._movementID},setMovementEventCallFunc:function(t,e){1===arguments.length?this._movementEventListener=t:2===arguments.length&&(this._movementEventTarget=e,this._movementEventCallFunc=t)},setFrameEventCallFunc:function(t,e){1===arguments.length?this._frameEventListener=t:2===arguments.length&&(this._frameEventTarget=e,this._frameEventCallFunc=t)},setUserObject:function(t){this._userObject=t},frameEvent:function(t,e,i,n){if(this._frameEventTarget&&this._frameEventCallFunc||this._frameEventListener){var s=new ccs.FrameEvent;s.bone=t,s.frameEventName=e,s.originFrameIndex=i,s.currentFrameIndex=n,this._frameEventQueue.push(s)}},movementEvent:function(t,e,i){if(this._movementEventTarget&&this._movementEventCallFunc||this._movementEventListener){var n=new ccs.MovementEvent;n.armature=t,n.movementType=e,n.movementID=i,this._movementEventQueue.push(n)}},updateMovementList:function(){if(this._onMovementList){var t,e=this._movementList;this._movementListLoop?(t=e[this._movementIndex],this.play(t,t.durationTo,0),this._movementIndex++,this._movementIndex>=e.length&&(this._movementIndex=0)):this._movementIndex<e.length?(t=e[this._movementIndex],this.play(t,t.durationTo,0),this._movementIndex++):this._onMovementList=!1,this._onMovementList=!0}},setAnimationData:function(t){this._animationData!==t&&(this._animationData=t)},getAnimationData:function(){return this._animationData},getUserObject:function(){return this._userObject},isIgnoreFrameEvent:function(){return this._ignoreFrameEvent}}),_p=ccs.ArmatureAnimation.prototype,cc.defineGetterSetter(_p,"speedScale",_p.getSpeedScale,_p.setSpeedScale),cc.defineGetterSetter(_p,"animationScale",_p.getAnimationScale,_p.setAnimationScale),_p=null,ccs.ArmatureAnimation.create=function(t){return new ccs.ArmatureAnimation(t)},ccs.Tween=ccs.ProcessBase.extend({_tweenData:null,_to:null,_from:null,_between:null,_movementBoneData:null,_bone:null,_frameTweenEasing:0,_betweenDuration:0,_totalDuration:0,_toIndex:0,_fromIndex:0,_animation:null,_passLastFrame:!1,ctor:function(t){ccs.ProcessBase.prototype.ctor.call(this),this._frameTweenEasing=ccs.TweenType.LINEAR,ccs.Tween.prototype.init.call(this,t)},init:function(t){return this._from=new ccs.FrameData,this._between=new ccs.FrameData,this._bone=t,this._tweenData=this._bone.getTweenData(),this._tweenData.displayIndex=-1,this._animation=null!==this._bone&&null!==this._bone.getArmature()?this._bone.getArmature().getAnimation():null,!0},play:function(t,e,i,n,s){ccs.ProcessBase.prototype.play.call(this,e,i,n,s),this._loopType=n?ccs.ANIMATION_TYPE_TO_LOOP_FRONT:ccs.ANIMATION_TYPE_NO_LOOP,this._fromIndex=this._toIndex=this._betweenDuration=this._totalDuration=0,s=t!==this._movementBoneData,this.setMovementBoneData(t),this._rawDuration=this._movementBoneData.duration,t=this._movementBoneData.getFrameData(0),this._tweenData.displayIndex=t.displayIndex,this._bone.getArmature().getArmatureData().dataVersion>=ccs.CONST_VERSION_COMBINED&&(ccs.TransformHelp.nodeSub(this._tweenData,this._bone.getBoneData()),this._tweenData.scaleX+=1,this._tweenData.scaleY+=1),0===this._rawDuration?(this._loopType=ccs.ANIMATION_TYPE_SINGLE_FRAME,0===e?this.setBetween(t,t):this.setBetween(this._tweenData,t),this._frameTweenEasing=ccs.TweenType.LINEAR):1<this._movementBoneData.frameList.length&&(this._durationTween=i*this._movementBoneData.scale,n&&0!==this._movementBoneData.delay?this.setBetween(this._tweenData,this.tweenNodeTo(this.updateFrameData(1-this._movementBoneData.delay),this._between)):s&&0!==e?this.setBetween(this._tweenData,t):this.setBetween(t,t)),this.tweenNodeTo(0)},gotoAndPlay:function(t){ccs.ProcessBase.prototype.gotoFrame.call(this,t),this._fromIndex=this._toIndex=this._betweenDuration=this._totalDuration=0,this._isPlaying=!0,this._isComplete=this._isPause=!1,this._currentPercent=this._curFrameIndex/(this._rawDuration-1),this._currentFrame=this._nextFrameIndex*this._currentPercent},gotoAndPause:function(t){this.gotoAndPlay(t),this.pause()},updateHandler:function(){var t=null==this._currentPercent?1:this._currentPercent,e=this._loopType;if(1<=t)switch(e){case ccs.ANIMATION_TYPE_SINGLE_FRAME:t=1,this._isComplete=!0,this._isPlaying=!1;break;case ccs.ANIMATION_TYPE_NO_LOOP:e=ccs.ANIMATION_TYPE_MAX,1<=(t=0>=this._durationTween?1:(t-1)*this._nextFrameIndex/this._durationTween)?(t=1,this._isComplete=!0,this._isPlaying=!1):(this._nextFrameIndex=this._durationTween,this._currentFrame=t*this._nextFrameIndex,this._fromIndex=this._toIndex=this._betweenDuration=this._totalDuration=0);break;case ccs.ANIMATION_TYPE_TO_LOOP_FRONT:e=ccs.ANIMATION_TYPE_LOOP_FRONT,this._nextFrameIndex=0<this._durationTween?this._durationTween:1,0!==this._movementBoneData.delay?(this._currentFrame=(1-this._movementBoneData.delay)*this._nextFrameIndex,t=this._currentFrame/this._nextFrameIndex):this._currentFrame=t=0,this._fromIndex=this._toIndex=this._betweenDuration=this._totalDuration=0;break;case ccs.ANIMATION_TYPE_MAX:t=1,this._isComplete=!0,this._isPlaying=!1;break;default:this._currentFrame=ccs.fmodf(this._currentFrame,this._nextFrameIndex)}1>t&&e<ccs.ANIMATION_TYPE_TO_LOOP_BACK&&(t=Math.sin(t*cc.PI/2)),this._currentPercent=t,this._loopType=e,e>ccs.ANIMATION_TYPE_TO_LOOP_BACK&&(t=this.updateFrameData(t)),this._frameTweenEasing!==ccs.TweenType.TWEEN_EASING_MAX&&this.tweenNodeTo(t)},setBetween:function(t,e,i){void 0===i&&(i=!0),0>t.displayIndex&&0<=e.displayIndex?(this._from.copy(e),this._between.subtract(e,e,i)):0>e.displayIndex&&0<=t.displayIndex?(this._from.copy(t),this._between.subtract(e,e,i)):(this._from.copy(t),this._between.subtract(t,e,i)),t.isTween||(this._tweenData.copy(t),this._tweenData.isTween=!0),this.arriveKeyFrame(t)},arriveKeyFrame:function(t){if(t){var e=this._bone,i=e.getDisplayManager(),n=t.displayIndex;i.getForceChangeDisplay()||i.changeDisplayWithIndex(n,!1),this._tweenData.zOrder=t.zOrder,e.updateZOrder(),this._bone.setBlendFunc(t.blendFunc),(e=e.getChildArmature())&&""!==t.movement&&e.getAnimation().play(t.movement)}},tweenNodeTo:function(t,e){e||(e=this._tweenData);var i=this._from,n=this._between;return i.isTween||(t=0),e.x=i.x+t*n.x,e.y=i.y+t*n.y,e.scaleX=i.scaleX+t*n.scaleX,e.scaleY=i.scaleY+t*n.scaleY,e.skewX=i.skewX+t*n.skewX,e.skewY=i.skewY+t*n.skewY,this._bone.setTransformDirty(!0),e&&n.isUseColorInfo&&this.tweenColorTo(t,e),e},tweenColorTo:function(t,e){var i=this._from,n=this._between;e.a=i.a+t*n.a,e.r=i.r+t*n.r,e.g=i.g+t*n.g,e.b=i.b+t*n.b,this._bone.updateColor()},updateFrameData:function(t){1<t&&0!==this._movementBoneData.delay&&(t=ccs.fmodf(t,1)),t*=this._rawDuration-1;var e,i,n=this._totalDuration,s=this._betweenDuration,r=this._toIndex;if(t<n||t>=n+s){var o=(s=this._movementBoneData.frameList).length;if(t<s[0].frameID)return e=i=s[0],this.setBetween(e,i),this._currentPercent;if(t>=s[o-1].frameID){if(this._passLastFrame)return e=i=s[o-1],this.setBetween(e,i),this._currentPercent;this._passLastFrame=!0}else this._passLastFrame=!1;do{if(this._fromIndex=r,n=(e=s[this._fromIndex]).frameID,(r=this._fromIndex+1)>=o&&(r=0),i=s[r],e.strEvent&&!this._animation.isIgnoreFrameEvent()&&this._animation.frameEvent(this._bone,e.strEvent,e.frameID,t),t===e.frameID||this._passLastFrame&&this._fromIndex===o-1)break}while(t<e.frameID||t>=i.frameID);s=i.frameID-e.frameID,this._frameTweenEasing=e.tweenEasing,this.setBetween(e,i,!1),this._totalDuration=n,this._betweenDuration=s,this._toIndex=r}return t=0===s?0:(t-this._totalDuration)/this._betweenDuration,(e=this._frameTweenEasing!==ccs.TweenType.LINEAR?this._frameTweenEasing:this._tweenEasing)===ccs.TweenType.TWEEN_EASING_MAX||e===ccs.TweenType.LINEAR||this._passLastFrame||(t=ccs.TweenFunction.tweenTo(t,e,this._from.easingParams)),t},setAnimation:function(t){this._animation=t},getAnimation:function(){return this._animation},setMovementBoneData:function(t){this._movementBoneData=t}}),_p=ccs.Tween.prototype,cc.defineGetterSetter(_p,"animation",_p.getAnimation,_p.setAnimation),_p=null,ccs.Tween.create=function(t){return new ccs.Tween(t)},ccs.PT_RATIO=32,ccs.ColliderFilter=ccs.Class.extend({_collisionType:0,_group:0,_categoryBits:0,_groupIndex:0,_maskBits:0,ctor:function(t,e){this._collisionType=t||0,this._group=e||0},updateShape:function(t){if(t instanceof cp.Shape)t.collision_type=this._collisionType,t.group=this._group;else if(t instanceof Box2D.b2FilterData){var e=new Box2D.b2FilterData;e.categoryBits=this._categoryBits,e.groupIndex=this._groupIndex,e.maskBits=this._maskBits,t.SetFilterData(e)}}}),ccs.ColliderBody=ccs.Class.extend({shape:null,coutourData:null,colliderFilter:null,_calculatedVertexList:null,ctor:function(t){this.shape=null,this.coutourData=t,this.colliderFilter=new ccs.ColliderFilter,ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX&&(this._calculatedVertexList=[])},getContourData:function(){return this.coutourData},setColliderFilter:function(t){this.colliderFilter=t},getCalculatedVertexList:function(){return this._calculatedVertexList},setB2Fixture:function(t){this._fixture=t},getB2Fixture:function(){return this._fixture},setShape:function(t){this.shape=t},getShape:function(){return this.shape},setContourData:function(t){this.coutourData=t},getColliderFilter:function(){return this.colliderFilter}}),ccs.ColliderDetector=ccs.Class.extend({_colliderBodyList:null,_bone:null,_body:null,_active:!1,_filter:null,helpPoint:cc.p(0,0),ctor:function(t){this._colliderBodyList=[],this._body=this._bone=null,this._active=!1,this._filter=null,ccs.ColliderDetector.prototype.init.call(this,t)},init:function(t){return this._colliderBodyList.length=0,t&&(this._bone=t),this._filter=new ccs.ColliderFilter,!0},addContourData:function(t){var e=new ccs.ColliderBody(t);if(this._colliderBodyList.push(e),ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX){e=e.getCalculatedVertexList(),t=t.vertexList;for(var i=0;i<t.length;i++){var n=new ccs.ContourVertex2(0,0);e.push(n)}}},addContourDataList:function(t){for(var e=0;e<t.length;e++)this.addContourData(t[e])},removeContourData:function(t){var e,i=[],n=this._colliderBodyList;for(e=0;e<n.length;e++){var s=n[e];s&&s.getContourData()===t&&i.push(s)}for(e=0;e<i.length;e++)cc.arrayRemoveObject(n,i[e])},removeAll:function(){this._colliderBodyList.length=0},setActive:function(t){var e;if(this._active!==t&&(this._active=t,t=this._body))if(e=null,this._active)for(var i=0;i<this._colliderBodyList.length;i++)e=(e=this._colliderBodyList[i]).getShape(),t.space.addShape(e);else for(i=0;i<this._colliderBodyList.length;i++)e=(e=this._colliderBodyList[i]).getShape(),t.space.removeShape(e)},getActive:function(){return this._active},getColliderBodyList:function(){return this._colliderBodyList},setColliderFilter:function(t){this._filter=t;for(var e=this._colliderBodyList,i=0;i<e.length;i++){var n=e[i];n.setColliderFilter(t),n.getShape()&&n.getColliderFilter().updateShape(n.getShape())}},getColliderFilter:function(){return this._filter},updateTransform:function(t){if(this._active)for(var e=null,i=this._body,n=this.helpPoint,s=0;s<this._colliderBodyList.length;s++){var r=(e=this._colliderBodyList[s]).getContourData(),o=null;i&&(o=e.getShape());r=r.vertexList;var a=e.getCalculatedVertexList();for(e=0;e<r.length;e++){if(n.x=r[e].x,n.y=r[e].y,n=cc.pointApplyAffineTransform(n,t),ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX){var c=cc.p(0,0);c.x=n.x,c.y=n.y,a[e]=c}o&&(o.verts[2*e]=n.x,o.verts[2*e+1]=n.y)}if(o)for(e=0;e<r.length;e++)a=cp.v.normalize(cp.v.perp(cp.v.sub(o.verts[(e+1)%o.verts.length],o.verts[e]))),o.planes&&(o.planes[e].n=a,o.planes[e].d=cp.v.dot(a,o.verts[e]))}},setBody:function(t){this._body=t;for(var e=this._colliderBodyList,i=0;i<e.length;i++){for(var n=[],s=(t=e[i]).getContourData().vertexList,r=0;r<s.length;r++){var o=s[r];n.push(o.x),n.push(o.y)}(n=new cp.PolyShape(this._body,n,cp.vzero)).sensor=!0,n.data=this._bone,this._active&&this._body.space.addShape(n),t.setShape(n),t.getColliderFilter().updateShape(n)}},getBody:function(){return this._body}}),_p=ccs.ColliderDetector.prototype,cc.defineGetterSetter(_p,"colliderFilter",_p.getColliderFilter,_p.setColliderFilter),cc.defineGetterSetter(_p,"active",_p.getActive,_p.setActive),cc.defineGetterSetter(_p,"body",_p.getBody,_p.setBody),_p=null,ccs.ColliderDetector.create=function(t){return new ccs.ColliderDetector(t)},ccs.Armature=ccs.Node.extend({animation:null,armatureData:null,batchNode:null,_parentBone:null,_boneDic:null,_topBoneList:null,_armatureIndexDic:null,_offsetPoint:null,version:0,_armatureTransformDirty:!0,_body:null,_blendFunc:null,_className:"Armature",ctor:function(t,e){cc.Node.prototype.ctor.call(this),this._name="",this._topBoneList=[],this._armatureIndexDic={},this._offsetPoint=cc.p(0,0),this._armatureTransformDirty=!0,this._blendFunc={src:cc.BLEND_SRC,dst:cc.BLEND_DST},t&&ccs.Armature.prototype.init.call(this,t,e),this._texture={}},init:function(t,e){e&&(this._parentBone=e),this.removeAllChildren(),this.animation=new ccs.ArmatureAnimation,this.animation.init(this),this._boneDic={},this._topBoneList.length=0;var i,n=ccs.armatureDataManager;if(""!==t){i=n.getAnimationData(t),cc.assert(i,"AnimationData not exist!"),this.animation.setAnimationData(i),n=n.getArmatureData(t),cc.assert(n,"ArmatureData not exist!"),this.armatureData=n;var s;n=n.getBoneDataDic();for(s in n){n=this.createBone(String(s));var r=i.getMovement(i.movementNames[0]);r&&(r=r.getMovementBoneData(n.getName()))&&!(0>=r.frameList.length)&&(r=r.getFrameData(0))&&(n.getTweenData().copy(r),n.changeDisplayWithIndex(r.displayIndex,!1))}this.update(0),this.updateOffsetPoint()}else t="new_armature",this.armatureData=new ccs.ArmatureData,this.armatureData.name=t,(i=new ccs.AnimationData).name=t,n.addArmatureData(t,this.armatureData),n.addAnimationData(t,i),this.animation.setAnimationData(i);return this._renderCmd.initShaderCache(),this.setCascadeOpacityEnabled(!0),this.setCascadeColorEnabled(!0),!0},visit:function(t){var e=this._renderCmd;t=t?t._renderCmd:null,this._visible?(e.visit(t),e._dirtyFlag=0):e._propagateFlagsDown(t)},addChild:function(t,e,i){t instanceof ccui.Widget?cc.log("Armature doesn't support to add Widget as its child, it will be fix soon."):cc.Node.prototype.addChild.call(this,t,e,i)},createBone:function(t){if(e=this.getBone(t))return e;var e,i=(e=this.armatureData.getBoneData(t)).parentName,n=null;return i?(this.createBone(i),n=new ccs.Bone(t),this.addBone(n,i)):(n=new ccs.Bone(t),this.addBone(n,"")),n.setBoneData(e),n.getDisplayManager().changeDisplayWithIndex(-1,!1),n},addBone:function(t,e){cc.assert(t,"Argument must be non-nil");var i=this._boneDic;if(t.getName()&&cc.assert(!i[t.getName()],"bone already added. It can't be added again"),e){var n=i[e];n?n.addChildBone(t):this._topBoneList.push(t)}else this._topBoneList.push(t);t.setArmature(this),i[t.getName()]=t,this.addChild(t)},removeBone:function(t,e){cc.assert(t,"bone must be added to the bone dictionary!"),t.setArmature(null),t.removeFromParent(e),cc.arrayRemoveObject(this._topBoneList,t),delete this._boneDic[t.getName()],this.removeChild(t,!0)},getBone:function(t){return this._boneDic[t]},changeBoneParent:function(t,e){cc.assert(t,"bone must be added to the bone dictionary!");var i=t.getParentBone();i&&(cc.arrayRemoveObject(i.getChildren(),t),t.setParentBone(null)),e&&((i=this._boneDic[e])?(i.addChildBone(t),cc.arrayRemoveObject(this._topBoneList,t)):this._topBoneList.push(t))},getBoneDic:function(){return this._boneDic},updateOffsetPoint:function(){var t=this.getBoundingBox();this.setContentSize(t);var e=this._offsetPoint;e.x=-t.x,e.y=-t.y,0!==t.width&&0!==t.height&&this.setAnchorPoint(e.x/t.width,e.y/t.height)},getOffsetPoints:function(){return{x:this._offsetPoint.x,y:this._offsetPoint.y}},setAnimation:function(t){this.animation=t},getAnimation:function(){return this.animation},getArmatureTransformDirty:function(){return this._armatureTransformDirty},update:function(t){this.animation.update(t);for(var e=this._topBoneList,i=0;i<e.length;i++)e[i].update(t);this._armatureTransformDirty=!1},onEnter:function(){cc.Node.prototype.onEnter.call(this),this.scheduleUpdate()},onExit:function(){cc.Node.prototype.onExit.call(this),this.unscheduleUpdate()},getBoundingBox:function(){for(var t,e,i,n=0,s=!0,r=cc.rect(0,0,0,0),o=this._children,a=o.length,c=0;c<a;c++)(t=o[c])&&((0!==(n=t.getDisplayManager().getBoundingBox()).x||0!==n.y||0!==n.width||0!==n.height)&&(s?(t=n.x,e=n.y,i=n.x+n.width,n=n.y+n.height,s=!1):(t=n.x<r.x?n.x:r.x,e=n.y<r.y?n.y:r.y,i=n.x+n.width>r.x+r.width?n.x+n.width:r.x+r.width,n=n.y+n.height>r.y+r.height?n.y+n.height:r.y+r.height),r.x=t,r.y=e,r.width=i-t,r.height=n-e));return cc.rectApplyAffineTransform(r,this.getNodeToParentTransform())},getBoneAtPoint:function(t,e){for(var i=this._children,n=i.length-1;0<=n;n--){var s=i[n];if(s instanceof ccs.Bone&&s.getDisplayManager().containPoint(t,e))return s}return null},setParentBone:function(t){for(var e in this._parentBone=t,t=this._boneDic)t[e].setArmature(this)},getParentBone:function(){return this._parentBone},drawContour:function(){cc._drawingUtil.setDrawColor(255,255,255,255),cc._drawingUtil.setLineWidth(1);var t,e=this._boneDic;for(t in e){if(i=e[t].getColliderDetector())for(var i=i.getColliderBodyList(),n=0;n<i.length;n++){var s=i[n].getCalculatedVertexList();cc._drawingUtil.drawPoly(s,s.length,!0)}}},setBody:function(t){if(this._body!==t){var e,i;this._body=t,this._body.data=this,t=this._children;for(var n=0;n<t.length;n++)if((e=t[n])instanceof ccs.Bone){e=e.getDisplayManager().getDecorativeDisplayList();for(var s=0;s<e.length;s++)(i=(i=e[s]).getColliderDetector())&&i.setBody(this._body)}}},getShapeList:function(){return this._body?this._body.shapeList:null},getBody:function(){return this._body},setBlendFunc:function(t,e){void 0===e?(this._blendFunc.src=t.src,this._blendFunc.dst=t.dst):(this._blendFunc.src=t,this._blendFunc.dst=e)},getBlendFunc:function(){return new cc.BlendFunc(this._blendFunc.src,this._blendFunc.dst)},setColliderFilter:function(t){var e,i=this._boneDic;for(e in i)i[e].setColliderFilter(t)},getArmatureData:function(){return this.armatureData},setArmatureData:function(t){this.armatureData=t},getBatchNode:function(){return this.batchNode},setBatchNode:function(t){this.batchNode=t},getVersion:function(){return this.version},setVersion:function(t){this.version=t},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new ccs.Armature.CanvasRenderCmd(this):new ccs.Armature.WebGLRenderCmd(this)}}),_p=ccs.Armature.prototype,cc.defineGetterSetter(_p,"parentBone",_p.getParentBone,_p.setParentBone),cc.defineGetterSetter(_p,"body",_p.getBody,_p.setBody),cc.defineGetterSetter(_p,"colliderFilter",null,_p.setColliderFilter),_p=null,ccs.Armature.create=function(t,e){return new ccs.Armature(t,e)},ccs.Armature.RenderCmd={_updateAnchorPointInPoint:function(){var t=(i=this._node)._contentSize,e=i._anchorPoint,i=i._offsetPoint;this._anchorPointInPoints.x=t.width*e.x-i.x,this._anchorPointInPoints.y=t.height*e.y-i.y,this._realAnchorPointInPoints.x=t.width*e.x,this._realAnchorPointInPoints.y=t.height*e.y,this.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getAnchorPointInPoints:function(){return cc.p(this._realAnchorPointInPoints)}},function(){ccs.Armature.CanvasRenderCmd=function(t){this._rootCtor(t),this._needDraw=!0,this._realAnchorPointInPoints=new cc.Point(0,0),this._canUseDirtyRegion=!0,this._startRenderCmd=new cc.CustomRenderCmd(this,this._startCmdCallback),this._RestoreRenderCmd=new cc.CustomRenderCmd(this,this._RestoreCmdCallback),this._startRenderCmd._canUseDirtyRegion=!0,this._RestoreRenderCmd._canUseDirtyRegion=!0,this._transform={a:1,b:0,c:0,d:1,tx:0,ty:0},this._worldTransform={a:1,b:0,c:0,d:1,tx:0,ty:0}};var t=ccs.Armature.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);cc.inject(ccs.Armature.RenderCmd,t),t.constructor=ccs.Armature.CanvasRenderCmd,t._startCmdCallback=function(t,e,i){var n=this._node._parent;this.transform(n?n._renderCmd:null),(t=t||cc._renderContext).save(),t._switchToArmatureMode(!0,this._worldTransform,e,i)},t.transform=function(t,e){this.originTransform(t,e);for(var i=this._node._children,n=0,s=i.length;n<s;n++){var r=i[n],o=r._renderCmd;if(r&&r.getDisplayRenderNode){var a=r.getDisplayRenderNodeType(),c=r.getDisplayRenderNode();if(c&&c._renderCmd){(c=c._renderCmd).transform(null),a!==ccs.DISPLAY_TYPE_ARMATURE&&a!==ccs.DISPLAY_TYPE_SPRITE&&cc.affineTransformConcatIn(c._worldTransform,r._worldTransform);a=cc.Node._dirtyFlags;var h=c._dirtyFlag,l=(u=o._dirtyFlag)&a.colorDirty,u=u&a.opacityDirty;l&&o._updateDisplayColor(this._displayedColor),u&&o._updateDisplayOpacity(this._displayedOpacity),(l||u)&&o._updateColor(),o=r._renderCmd._displayedColor,r=r._renderCmd._displayedOpacity,l=h&a.colorDirty,u=h&a.opacityDirty,l&&c._updateDisplayColor(o),u&&c._updateDisplayOpacity(r),(l||u)&&c._updateColor()}}}},t._RestoreCmdCallback=function(t){this._cacheDirty=!1,t._switchToArmatureMode(!1),t.restore()},t.initShaderCache=function(){},t.setShaderProgram=function(){},t.updateChildPosition=function(t,e){t.visit()},t.rendering=function(t,e,i){for(var n=this._node._children,s=0,r=n.length;s<r;s++){var o=n[s];if(o&&o.getDisplayRenderNode){var a=o.getDisplayRenderNode();if(null!==a)switch(o._renderCmd._syncStatus(this),o.getDisplayRenderNodeType()){case ccs.DISPLAY_TYPE_SPRITE:a.visit(o);break;case ccs.DISPLAY_TYPE_ARMATURE:a._renderCmd.rendering(t,e,i);break;default:a.visit(o)}}else o instanceof cc.Node&&this._visitNormalChild(o)}},t._visitNormalChild=function(t){if(t){var e=t._renderCmd;if(t._visible){e._curLevel=this._curLevel+1;var i,n,s=t._children;e._syncStatus(this),e.transform(null);var r=s.length;if(0<r){for(t.sortAllChildren(),i=0;i<r&&0>(n=s[i])._localZOrder;i++)n.visit(t);for(cc.renderer.pushRenderCommand(e);i<r;i++)s[i].visit(t)}else cc.renderer.pushRenderCommand(e);this._dirtyFlag=0}}},t.visit=function(t){var e=this._node;e._visible&&(this._syncStatus(t),e.sortAllChildren(),cc.renderer.pushRenderCommand(this._startRenderCmd),this.rendering(),cc.renderer.pushRenderCommand(this._RestoreRenderCmd),this._cacheDirty=!1)}}(),function(){ccs.Armature.WebGLRenderCmd=function(t){this._rootCtor(t),this._needDraw=!0,this._parentCmd=null,this._realAnchorPointInPoints=new cc.Point(0,0),this._transform={a:1,b:0,c:0,d:1,tx:0,ty:0},this._worldTransform={a:1,b:0,c:0,d:1,tx:0,ty:0}};var t=ccs.Armature.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);cc.inject(ccs.Armature.RenderCmd,t),t.constructor=ccs.Armature.WebGLRenderCmd,t.uploadData=function(t,e,i){t=this._node,i=this._parentCmd||this;for(var n=t._children,s=cc.BlendFunc.ALPHA_PREMULTIPLIED,r=cc.BlendFunc.ALPHA_NON_PREMULTIPLIED,o=0,a=n.length;o<a;o++){var c=n[o],h=c._renderCmd;if(c&&c.getDisplayRenderNode){var l=c.getDisplayRenderNode();if(null!==l)switch(e=l._renderCmd,c.getDisplayRenderNodeType()){case ccs.DISPLAY_TYPE_SPRITE:l instanceof ccs.Skin&&(l.setShaderProgram(this._shaderProgram),this._updateColorAndOpacity(e,c),e.transform(i),(h=c.getBlendFunc()).src!==s.src||h.dst!==s.dst?l.setBlendFunc(c.getBlendFunc()):(c=l.getTexture(),t._blendFunc.src===s.src&&t._blendFunc.dst===s.dst&&c&&!c.hasPremultipliedAlpha()?l.setBlendFunc(r):l.setBlendFunc(t._blendFunc)),cc.renderer._uploadBufferData(e));break;case ccs.DISPLAY_TYPE_ARMATURE:l.setShaderProgram(this._shaderProgram),this._updateColorAndOpacity(e,c),e._parentCmd=this;default:h._syncStatus(i),e._syncStatus(h),e.uploadData?cc.renderer._uploadBufferData(e):e.rendering&&(cc.renderer._batchRendering(),e.rendering(cc._renderContext))}}else c instanceof cc.Node&&(c.setShaderProgram(this._shaderProgram),h._syncStatus(i),h.uploadData?cc.renderer._uploadBufferData(h):h.rendering&&(cc.renderer._batchRendering(),h.rendering(cc._renderContext)))}return this._parentCmd=null,0},t.initShaderCache=function(){this._shaderProgram=cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR)},t.setShaderProgram=function(t){this._glProgramState=cc.GLProgramState.getOrCreateWithGLProgram(t)},t._updateColorAndOpacity=function(t,e){var i=e._renderCmd._displayedColor,n=e._renderCmd._displayedOpacity,s=cc.Node._dirtyFlags,r=t._dirtyFlag,o=r&s.colorDirty;s=r&s.opacityDirty;o&&t._updateDisplayColor(i),s&&t._updateDisplayOpacity(n),(o||s)&&t._updateColor()},t.visit=function(t){var e=this._node;if(e._visible){(t=t||this.getParentRenderCmd())&&(this._curLevel=t._curLevel+1),this._syncStatus(t),e.sortAllChildren(),t=cc.renderer;var i,n=e._children,s=n.length;for(isNaN(e._customZ)&&(e._vertexZ=t.assignedZ,t.assignedZ+=t.assignedZStep),i=0;i<s&&0>(e=n[i])._localZOrder;i++)isNaN(e._customZ)&&(e._vertexZ=t.assignedZ,t.assignedZ+=t.assignedZStep);for(t.pushRenderCommand(this);i<s;i++)e=n[i],isNaN(e._customZ)&&(e._vertexZ=t.assignedZ,t.assignedZ+=t.assignedZStep);this._dirtyFlag=0}}}(),ccs.Bone=ccs.Node.extend({_boneData:null,_armature:null,_childArmature:null,_displayManager:null,ignoreMovementBoneData:!1,_tween:null,_tweenData:null,_parentBone:null,_boneTransformDirty:!1,_worldTransform:null,_blendFunc:null,blendDirty:!1,_worldInfo:null,_armatureParentBone:null,_dataVersion:0,_className:"Bone",ctor:function(t){cc.Node.prototype.ctor.call(this),this._displayManager=this._tween=this._boneData=this._childArmature=this._armature=this._parentBone=this._tweenData=null,this.ignoreMovementBoneData=!1,this._worldTransform=cc.affineTransformMake(1,0,0,1,0,0),this._boneTransformDirty=!0,this._blendFunc=new cc.BlendFunc(cc.BLEND_SRC,cc.BLEND_DST),this.blendDirty=!1,this._armatureParentBone=this._worldInfo=null,this._dataVersion=0,ccs.Bone.prototype.init.call(this,t)},init:function(t){return t&&(this._name=t),this._tweenData=new ccs.FrameData,this._tween=new ccs.Tween(this),this._displayManager=new ccs.DisplayManager(this),this._worldInfo=new ccs.BaseData,this._boneData=new ccs.BaseData,!0},setBoneData:function(t){cc.assert(t,"_boneData must not be null"),this._boneData!==t&&(this._boneData=t),this.setName(this._boneData.name),this._localZOrder=this._boneData.zOrder,this._displayManager.initDisplayList(t)},getBoneData:function(){return this._boneData},setArmature:function(t){(this._armature=t)?(this._tween.setAnimation(this._armature.getAnimation()),this._dataVersion=this._armature.getArmatureData().dataVersion,this._armatureParentBone=this._armature.getParentBone()):this._armatureParentBone=null},getArmature:function(){return this._armature},update:function(t){if(this._parentBone&&(this._boneTransformDirty=this._boneTransformDirty||this._parentBone.isTransformDirty()),this._armatureParentBone&&!this._boneTransformDirty&&(this._boneTransformDirty=this._armatureParentBone.isTransformDirty()),this._boneTransformDirty){var e=this._tweenData;this._dataVersion>=ccs.CONST_VERSION_COMBINED&&(ccs.TransformHelp.nodeConcat(e,this._boneData),e.scaleX-=1,e.scaleY-=1);var i=this._worldInfo;i.copy(e),i.x=e.x+this._position.x,i.y=e.y+this._position.y,i.scaleX=e.scaleX*this._scaleX,i.scaleY=e.scaleY*this._scaleY,i.skewX=e.skewX+this._skewX+cc.degreesToRadians(this._rotationX),i.skewY=e.skewY+this._skewY-cc.degreesToRadians(this._rotationY),this._parentBone?this._applyParentTransform(this._parentBone):this._armatureParentBone&&this._applyParentTransform(this._armatureParentBone),ccs.TransformHelp.nodeToMatrix(i,this._worldTransform),this._armatureParentBone&&cc.affineTransformConcatIn(this._worldTransform,this._armature.getNodeToParentTransform())}for(ccs.displayFactory.updateDisplay(this,t,this._boneTransformDirty||this._armature.getArmatureTransformDirty()),e=0;e<this._children.length;e++)this._children[e].update(t);this._boneTransformDirty=!1},_applyParentTransform:function(t){var e=this._worldInfo,i=t._worldTransform;t=t._worldInfo;var n=e.x,s=e.y;e.x=n*i.a+s*i.c+t.x,e.y=n*i.b+s*i.d+t.y,e.scaleX*=t.scaleX,e.scaleY*=t.scaleY,e.skewX+=t.skewX,e.skewY+=t.skewY},setBlendFunc:function(t,e){var i,n,s=this._blendFunc;void 0===e?(i=t.src,n=t.dst):(i=t,n=e),s.src===i&&s.dst===n||(s.src=i,s.dst=n,this.blendDirty=!0)},updateColor:function(){var t=this._displayManager.getDisplayRenderNode();if(null!==t){var e=this._renderCmd;t.setColor(cc.color(e._displayedColor.r*this._tweenData.r/255,e._displayedColor.g*this._tweenData.g/255,e._displayedColor.b*this._tweenData.b/255)),t.setOpacity(e._displayedOpacity*this._tweenData.a/255)}},updateZOrder:function(){this._armature.getArmatureData().dataVersion>=ccs.CONST_VERSION_COMBINED?this.setLocalZOrder(this._tweenData.zOrder+this._boneData.zOrder):this.setLocalZOrder(this._tweenData.zOrder)},addChildBone:function(t){cc.assert(t,"Argument must be non-nil"),cc.assert(!t.parentBone,"child already added. It can't be added again"),0>this._children.indexOf(t)&&(this._children.push(t),t.setParentBone(this))},removeChildBone:function(t,e){if(0<this._children.length&&-1!==this._children.getIndex(t)){if(e)for(var i=t._children,n=0;n<i.length;n++)t.removeChildBone(i[n],e);t.setParentBone(null),t.getDisplayManager().setCurrentDecorativeDisplay(null),cc.arrayRemoveObject(this._children,t)}},removeFromParent:function(t){this._parentBone&&this._parentBone.removeChildBone(this,t)},setParentBone:function(t){this._parentBone=t},getParentBone:function(){return this._parentBone},setChildArmature:function(t){this._childArmature!==t&&(null==t&&this._childArmature&&this._childArmature.setParentBone(null),this._childArmature=t)},getChildArmature:function(){return this._childArmature},getTween:function(){return this._tween},setLocalZOrder:function(t){this._localZOrder!==t&&cc.Node.prototype.setLocalZOrder.call(this,t)},getNodeToArmatureTransform:function(){return this._worldTransform},getNodeToWorldTransform:function(){return cc.affineTransformConcat(this._worldTransform,this._armature.getNodeToWorldTransform())},getDisplayRenderNode:function(){return this._displayManager.getDisplayRenderNode()},getDisplayRenderNodeType:function(){return this._displayManager.getDisplayRenderNodeType()},addDisplay:function(t,e){return this._displayManager.addDisplay(t,e||0)},removeDisplay:function(t){this._displayManager.removeDisplay(t)},changeDisplayByIndex:function(t,e){cc.log("changeDisplayByIndex is deprecated. Use changeDisplayWithIndex instead."),this.changeDisplayWithIndex(t,e)},changeDisplayByName:function(t,e){cc.log("changeDisplayByName is deprecated. Use changeDisplayWithName instead."),this.changeDisplayWithName(t,e)},changeDisplayWithIndex:function(t,e){this._displayManager.changeDisplayWithIndex(t,e)},changeDisplayWithName:function(t,e){this._displayManager.changeDisplayWithName(t,e)},getColliderDetector:function(){var t=this._displayManager.getCurrentDecorativeDisplay();return t&&(t=t.getColliderDetector())?t:null},setColliderFilter:function(t){for(var e=this._displayManager.getDecorativeDisplayList(),i=0;i<e.length;i++){var n=e[i].getColliderDetector();n&&n.setColliderFilter(t)}},getColliderFilter:function(){var t=this.displayManager.getCurrentDecorativeDisplay();return t&&(t=t.getColliderDetector())?t.getColliderFilter():null},setTransformDirty:function(t){this._boneTransformDirty=t},isTransformDirty:function(){return this._boneTransformDirty},getDisplayManager:function(){return this._displayManager},setIgnoreMovementBoneData:function(t){this._ignoreMovementBoneData=t},isIgnoreMovementBoneData:function(){return this._ignoreMovementBoneData},getBlendFunc:function(){return new cc.BlendFunc(this._blendFunc.src,this._blendFunc.dst)},setBlendDirty:function(t){this._blendDirty=t},isBlendDirty:function(){return this._blendDirty},getTweenData:function(){return this._tweenData},getWorldInfo:function(){return this._worldInfo},getChildrenBone:function(){return this._children},nodeToArmatureTransform:function(){return this.getNodeToArmatureTransform()},nodeToWorldTransform:function(){return this.getNodeToWorldTransform()},getColliderBodyList:function(){var t=this.getColliderDetector();return t?t.getColliderBodyList():null},getIgnoreMovementBoneData:function(){return this.isIgnoreMovementBoneData()},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new ccs.Bone.CanvasRenderCmd(this):new ccs.Bone.WebGLRenderCmd(this)}}),_p=ccs.Bone.prototype,cc.defineGetterSetter(_p,"boneData",_p.getBoneData,_p.setBoneData),cc.defineGetterSetter(_p,"armature",_p.getArmature,_p.setArmature),cc.defineGetterSetter(_p,"childArmature",_p.getChildArmature,_p.setChildArmature),cc.defineGetterSetter(_p,"childrenBone",_p.getChildrenBone),cc.defineGetterSetter(_p,"tween",_p.getTween),cc.defineGetterSetter(_p,"tweenData",_p.getTweenData),cc.defineGetterSetter(_p,"colliderFilter",_p.getColliderFilter,_p.setColliderFilter),_p=null,ccs.Bone.create=function(t){return new ccs.Bone(t)},ccs.Bone.RenderCmd={_updateColor:function(){var t=this._node,e=t._displayManager.getDisplayRenderNode();if(null!==e){var i=e._renderCmd;e.setColor(this._displayedColor),e.setOpacity(this._displayedOpacity),i._syncDisplayColor(t._tweenData),i._syncDisplayOpacity(t._tweenData.a),i._updateColor()}},transform:function(t,e){this._transform||(this._transform={a:1,b:0,c:0,d:1,tx:0,ty:0},this._worldTransform={a:1,b:0,c:0,d:1,tx:0,ty:0});var i=this._node,n=this._transform,s=this._worldTransform,r=t?t._worldTransform:null;r&&(this.originTransform(),cc.affineTransformConcatIn(n,i._worldTransform)),r?(s.a=n.a*r.a+n.b*r.c,s.b=n.a*r.b+n.b*r.d,s.c=n.c*r.a+n.d*r.c,s.d=n.c*r.b+n.d*r.d,s.tx=n.tx*r.a+n.ty*r.c+r.tx,s.ty=n.tx*r.b+n.ty*r.d+r.ty):(s.a=n.a,s.b=n.b,s.c=n.c,s.d=n.d,s.tx=n.tx,s.ty=n.ty)}},function(){ccs.Bone.CanvasRenderCmd=function(t){this._rootCtor(t),this._needDraw=!1};var t=ccs.Bone.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);cc.inject(ccs.Bone.RenderCmd,t),t.constructor=ccs.Bone.CanvasRenderCmd}(),function(){if(cc.Node.WebGLRenderCmd){ccs.Bone.WebGLRenderCmd=function(t){this._rootCtor(t),this._needDraw=!1};var t=ccs.Bone.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);cc.inject(ccs.Bone.RenderCmd,t),t.constructor=ccs.Bone.WebGLRenderCmd}}(),ccs.FRAME_TYPE_MOVE=0,ccs.FRAME_TYPE_SCALE=1,ccs.FRAME_TYPE_ROTATE=2,ccs.FRAME_TYPE_TINT=3,ccs.FRAME_TYPE_FADE=4,ccs.FRAME_TYPE_MAX=5,ccs.FrameEaseType={CUSTOM:-1,LINEAR:0,SINE_EASEIN:1,SINE_EASEOUT:2,SINE_EASEINOUT:3,QUAD_EASEIN:4,QUAD_EASEOUT:5,QUAD_EASEINOUT:6,CUBIC_EASEIN:7,CUBIC_EASEOUT:8,CUBIC_EASEINOUT:9,QUART_EASEIN:10,QUART_EASEOUT:11,QUART_EASEINOUT:12,QUINT_EASEIN:13,QUINT_EASEOUT:14,QUINT_EASEINOUT:15,EXPO_EASEIN:16,EXPO_EASEOUT:17,EXPO_EASEINOUT:18,CIRC_EASEIN:19,CIRC_EASEOUT:20,CIRC_EASEINOUT:21,ELASTIC_EASEIN:22,ELASTIC_EASEOUT:23,ELASTIC_EASEINOUT:24,BACK_EASEIN:25,BACK_EASEOUT:26,BACK_EASEINOUT:27,BOUNCE_EASEIN:28,BOUNCE_EASEOUT:29,BOUNCE_EASEINOUT:30,TWEEN_EASING_MAX:1e3},ccs.ActionFrame=ccs.Class.extend({frameType:0,easingType:0,frameIndex:0,_Parameter:null,time:0,ctor:function(){this.frameType=0,this.easingType=ccs.FrameEaseType.LINEAR,this.time=this.frameIndex=0},getAction:function(t,e){return cc.log("Need a definition of <getAction> for ActionFrame"),null},_getEasingAction:function(t){if(null===t)return console.error("Action cannot be null!"),null;var e;switch(this.easingType){case ccs.FrameEaseType.LINEAR:e=t;break;case ccs.FrameEaseType.SINE_EASEIN:e=t.easing(cc.easeSineIn());break;case ccs.FrameEaseType.SINE_EASEOUT:e=t.easing(cc.easeSineOut());break;case ccs.FrameEaseType.SINE_EASEINOUT:e=t.easing(cc.easeSineInOut());break;case ccs.FrameEaseType.QUAD_EASEIN:e=t.easing(cc.easeQuadraticActionIn());break;case ccs.FrameEaseType.QUAD_EASEOUT:e=t.easing(cc.easeQuadraticActionOut());break;case ccs.FrameEaseType.QUAD_EASEINOUT:e=t.easing(cc.easeQuadraticActionInOut());break;case ccs.FrameEaseType.CUBIC_EASEIN:e=t.easing(cc.easeCubicActionIn());break;case ccs.FrameEaseType.CUBIC_EASEOUT:e=t.easing(cc.easeCubicActionOut());break;case ccs.FrameEaseType.CUBIC_EASEINOUT:e=t.easing(cc.easeCubicActionInOut());break;case ccs.FrameEaseType.QUART_EASEIN:e=t.easing(cc.easeQuarticActionIn());break;case ccs.FrameEaseType.QUART_EASEOUT:e=t.easing(cc.easeQuarticActionOut());break;case ccs.FrameEaseType.QUART_EASEINOUT:e=t.easing(cc.easeQuarticActionInOut());break;case ccs.FrameEaseType.QUINT_EASEIN:e=t.easing(cc.easeQuinticActionIn());break;case ccs.FrameEaseType.QUINT_EASEOUT:e=t.easing(cc.easeQuinticActionOut());break;case ccs.FrameEaseType.QUINT_EASEINOUT:e=t.easing(cc.easeQuinticActionInOut());break;case ccs.FrameEaseType.EXPO_EASEIN:e=t.easing(cc.easeExponentialIn());break;case ccs.FrameEaseType.EXPO_EASEOUT:e=t.easing(cc.easeExponentialOut());break;case ccs.FrameEaseType.EXPO_EASEINOUT:e=t.easing(cc.easeExponentialInOut());break;case ccs.FrameEaseType.CIRC_EASEIN:e=t.easing(cc.easeCircleActionIn());break;case ccs.FrameEaseType.CIRC_EASEOUT:e=t.easing(cc.easeCircleActionOut());break;case ccs.FrameEaseType.CIRC_EASEINOUT:e=t.easing(cc.easeCircleActionInOut());break;case ccs.FrameEaseType.ELASTIC_EASEIN:e=t.easing(cc.easeElasticIn());break;case ccs.FrameEaseType.ELASTIC_EASEOUT:e=t.easing(cc.easeElasticOut());break;case ccs.FrameEaseType.ELASTIC_EASEINOUT:e=t.easing(cc.easeElasticInOut());break;case ccs.FrameEaseType.BACK_EASEIN:e=t.easing(cc.easeBackIn());break;case ccs.FrameEaseType.BACK_EASEOUT:e=t.easing(cc.easeBackOut());break;case ccs.FrameEaseType.BACK_EASEINOUT:e=t.easing(cc.easeBackInOut());break;case ccs.FrameEaseType.BOUNCE_EASEIN:e=t.easing(cc.easeBounceIn());break;case ccs.FrameEaseType.BOUNCE_EASEOUT:e=t.easing(cc.easeBounceOut());break;case ccs.FrameEaseType.BOUNCE_EASEINOUT:e=t.easing(cc.easeBounceInOut())}return e},setEasingParameter:function(t){this._Parameter=[];for(var e=0;e<t.length;e++)this._Parameter.push(t[e])},setEasingType:function(t){this.easingType=t}}),ccs.ActionMoveFrame=ccs.ActionFrame.extend({_position:null,ctor:function(){ccs.ActionFrame.prototype.ctor.call(this),this._position=cc.p(0,0),this.frameType=ccs.FRAME_TYPE_MOVE},setPosition:function(t,e){void 0===e?(this._position.x=t.x,this._position.y=t.y):(this._position.x=t,this._position.y=e)},getPosition:function(){return this._position},getAction:function(t){return this._getEasingAction(cc.moveTo(t,this._position))}}),ccs.ActionScaleFrame=ccs.ActionFrame.extend({_scaleX:1,_scaleY:1,ctor:function(){ccs.ActionFrame.prototype.ctor.call(this),this._scaleY=this._scaleX=1,this.frameType=ccs.FRAME_TYPE_SCALE},setScaleX:function(t){this._scaleX=t},getScaleX:function(){return this._scaleX},setScaleY:function(t){this._scaleY=t},getScaleY:function(){return this._scaleY},getAction:function(t){return this._getEasingAction(cc.scaleTo(t,this._scaleX,this._scaleY))}}),ccs.ActionRotationFrame=ccs.ActionFrame.extend({_rotation:0,ctor:function(){ccs.ActionFrame.prototype.ctor.call(this),this._rotation=0,this.frameType=ccs.FRAME_TYPE_ROTATE},setRotation:function(t){this._rotation=t},getRotation:function(){return this._rotation},getAction:function(t,e){return void 0===e?this._getEasingAction(cc.rotateTo(t,this._rotation)):e instanceof cc.ActionRotationFrame?this._getEasingAction(cc.rotateBy(t,this._rotation-e._rotation)):this.getAction(t)}}),ccs.ActionFadeFrame=ccs.ActionFrame.extend({_opacity:255,ctor:function(){ccs.ActionFrame.prototype.ctor.call(this),this._opacity=255,this.frameType=ccs.FRAME_TYPE_FADE},setOpacity:function(t){this._opacity=t},getOpacity:function(){return this._opacity},getAction:function(t){return this._getEasingAction(cc.fadeTo(t,this._opacity))}}),ccs.ActionTintFrame=ccs.ActionFrame.extend({_color:null,ctor:function(){ccs.ActionFrame.prototype.ctor.call(this),this._color=cc.color(255,255,255,255),this.frameType=ccs.FRAME_TYPE_TINT},setColor:function(t){var e=this._color;e.r=t.r,e.g=t.g,e.b=t.b},getColor:function(){var t=this._color;return cc.color(t.r,t.g,t.b,t.a)},getAction:function(t){return this._getEasingAction(cc.tintTo(t,this._color.r,this._color.g,this._color.b))}}),ccs.actionManager={_actionDic:{},initWithDictionary:function(t,e,i){var n=t.lastIndexOf("/");t=t.substr(n+1,t.length),e=e.actionlist;n=[];for(var s=0;s<e.length;s++){var r=new ccs.ActionObject;r.initWithDictionary(e[s],i),n.push(r)}this._actionDic[t]=n},getActionByName:function(t,e){var i=t.lastIndexOf("/");i=t.substr(i+1,t.length);if(!(i=this._actionDic[i]))return null;for(var n=0;n<i.length;n++){var s=i[n];if(e===s.getName())return s}return null},playActionByName:function(t,e,i){(t=this.getActionByName(t,e))&&t.play(i)},stopActionByName:function(t,e){var i=this.getActionByName(t,e);i&&i.stop()},releaseActions:function(){this._actionDic={}},clear:function(){this._actionDic={}}},ccs.ActionNode=ccs.Class.extend({_currentFrameIndex:0,_destFrameIndex:0,_unitTime:0,_actionTag:0,_object:null,_actionSpawn:null,_action:null,_frameArray:null,_frameArrayNum:0,ctor:function(){this._destFrameIndex=this._currentFrameIndex=0,this._unitTime=.1,this._actionTag=0,this._action=this._actionSpawn=this._object=null,this._frameArray=[],this._frameArrayNum=ccs.FRAME_TYPE_MAX;for(var t=0;t<this._frameArrayNum;t++)this._frameArray.push([])},initWithDictionary:function(t,e){this.setActionTag(t.ActionTag);for(var i=t.actionframelist,n=ccui.helper.seekActionWidgetByActionTag(e,t.ActionTag),s=n instanceof ccui.Widget&&!(n instanceof ccui.Layout),r=0;r<i.length;r++){var o=i[r],a=o.frameid,c=o.tweenType;null==c&&(c=0);for(var h=o.tweenParameter,l=[],u=0;u<h;u++)l.push(o.tweenParameter[u]);if(void 0!==o.positionx){u=o.positionx;var d=o.positiony;s&&n.parent&&(u+=(h=n.parent.getAnchorPointInPoints()).x,d+=h.y),(h=new ccs.ActionMoveFrame).frameIndex=a,h.setEasingType(c),h.setEasingParameter(l),h.setPosition(u,d),(u=this._frameArray[ccs.FRAME_TYPE_MOVE]).push(h)}void 0!==o.scalex&&(u=o.scalex,d=o.scaley,(h=new ccs.ActionScaleFrame).frameIndex=a,h.setEasingType(c),h.setEasingParameter(l),h.setScaleX(u),h.setScaleY(d),(u=this._frameArray[ccs.FRAME_TYPE_SCALE]).push(h)),void 0!==o.rotation&&(u=o.rotation,(h=new ccs.ActionRotationFrame).frameIndex=a,h.setEasingType(c),h.setEasingParameter(l),h.setRotation(u),(u=this._frameArray[ccs.FRAME_TYPE_ROTATE]).push(h)),void 0!==o.opacity&&(u=o.opacity,(h=new ccs.ActionFadeFrame).frameIndex=a,h.setEasingType(c),h.setEasingParameter(l),h.setOpacity(u),(u=this._frameArray[ccs.FRAME_TYPE_FADE]).push(h)),void 0!==o.colorr&&(u=o.colorr,d=o.colorg,o=o.colorb,(h=new ccs.ActionTintFrame).frameIndex=a,h.setEasingType(c),h.setEasingParameter(l),h.setColor(cc.color(u,d,o)),(u=this._frameArray[ccs.FRAME_TYPE_TINT]).push(h))}this._initActionNodeFromRoot(e)},_initActionNodeFromRoot:function(t){t instanceof ccui.Widget&&(t=ccui.helper.seekActionWidgetByActionTag(t,this.getActionTag()))&&this.setObject(t)},setUnitTime:function(t){this._unitTime=t,this._refreshActionProperty()},getUnitTime:function(){return this._unitTime},setActionTag:function(t){this._actionTag=t},getActionTag:function(){return this._actionTag},setObject:function(t){this._object=t},getObject:function(){return this._object},getActionNode:function(){return this._object instanceof cc.Node?this._object:null},insertFrame:function(t,e){null!=e&&this._frameArray[e.frameType].splice(t,0,e)},addFrame:function(t){t&&this._frameArray[t.frameType].push(t)},deleteFrame:function(t){void 0!==t&&cc.arrayRemoveObject(this._frameArray[t.frameType],t)},clearAllFrame:function(){for(var t=0;t<this._frameArrayNum;t++)this._frameArray[t].length=0},_refreshActionProperty:function(){if(!this._object)return null;for(var t=[],e=0;e<this._frameArrayNum;e++){var i=this._frameArray[e];if(!(0>=i.length)){for(var n=[],s=0;s<i.length;s++){var r=i[s],o=null;0!==s?(o=(r.frameIndex-i[s-1].frameIndex)*this.getUnitTime(),o=r.getAction(o)):o=r.getAction(0),o&&n.push(o)}n&&(null!==(i=cc.sequence(n))&&t.push(i))}}return this._action=null,this._actionSpawn=cc.spawn(t)},playAction:function(t){this._object&&this._actionSpawn&&(this._action=t?cc.sequence(this._actionSpawn,t):cc.sequence(this._actionSpawn),this._runAction())},_runAction:function(){var t=this.getActionNode();null!==t&&null!==this._action&&t.runAction(this._action)},stopAction:function(){var t=this.getActionNode();null!==t&&null!==this._action&&(this._action.isDone()||t.stopAction(this._action))},getFirstFrameIndex:function(){for(var t=99999,e=!1,i=this._frameArray,n=0,s=this._frameArrayNum;n<s;n++){var r=i[n];0>=r.length||(e=!0,t=t>(r=r[0].frameIndex)?r:t)}return e||(t=0),t},getLastFrameIndex:function(){for(var t=-1,e=!1,i=this._frameArray,n=0,s=this._frameArrayNum;n<s;n++){var r=i[n];0>=r.length||(e=!0,t=t<(r=r[r.length-1].frameIndex)?r:t)}return e||(t=0),t},updateActionToTimeLine:function(t){for(var e=!1,i=this.getUnitTime(),n=0;n<this._frameArrayNum;n++){var s=this._frameArray[n];if(s)for(var r=0;r<s.length;r++){var o=s[r];if(o.frameIndex*i===t){this._easingToFrame(1,1,o),e=!0;break}if(o.frameIndex*i>t){0===r?(this._easingToFrame(1,1,o),e=!1):(e=s[r-1],s=(o.frameIndex-e.frameIndex)*i,r=t-e.frameIndex*i,this._easingToFrame(s,1,e),this._easingToFrame(s,r/s,o),e=!0);break}}}return e},_easingToFrame:function(t,e,i){t=i.getAction(t),i=this.getActionNode(),null!=t&&null!=i&&(t.startWithTarget(i),t.update(e))},isActionDoneOnce:function(){return!this._action||this._action.isDone()}}),ccs.ActionObject=ccs.Class.extend({_actionNodeList:null,_name:"",_loop:!1,_pause:!1,_playing:!1,_unitTime:0,_currentTime:0,_scheduler:null,_callback:null,_fTotalTime:0,ctor:function(){this._actionNodeList=[],this._name="",this._playing=this._pause=this._loop=!1,this._unitTime=.1,this._fTotalTime=this._currentTime=0,this._scheduler=cc.director.getScheduler()},setName:function(t){this._name=t},getName:function(){return this._name},setLoop:function(t){this._loop=t},getLoop:function(){return this._loop},setUnitTime:function(t){this._unitTime=t,t=this._actionNodeList.length;for(var e=0;e<t;e++)this._actionNodeList[e].setUnitTime(this._unitTime)},getUnitTime:function(){return this._unitTime},getCurrentTime:function(){return this._currentTime},setCurrentTime:function(t){this._currentTime=t},getTotalTime:function(){return this._fTotalTime},isPlaying:function(){return this._playing},initWithDictionary:function(t,e){this.setName(t.name),this.setLoop(t.loop),this.setUnitTime(t.unittime);for(var i=t.actionnodelist,n=0,s=0;s<i.length;s++){var r=new ccs.ActionNode;r.initWithDictionary(i[s],e),r.setUnitTime(this.getUnitTime()),this._actionNodeList.push(r),(r=r.getLastFrameIndex()-r.getFirstFrameIndex())>n&&(n=r)}this._fTotalTime=n*this._unitTime},addActionNode:function(t){t&&(this._actionNodeList.push(t),t.setUnitTime(this._unitTime))},removeActionNode:function(t){null!=t&&cc.arrayRemoveObject(this._actionNodeList,t)},play:function(t){this.stop(),this.updateToFrameByTime(0);for(var e=this._actionNodeList,i=e.length,n=0;n<i;n++)e[n].playAction(t);this._loop&&this._scheduler.schedule(this.simulationActionUpdate,this,0,cc.REPEAT_FOREVER,0,!1,this.__instanceId+""),void 0!==t&&(this._callback=t)},pause:function(){this._pause=!0,this._playing=!1},stop:function(){for(var t=this._actionNodeList,e=0;e<t.length;e++)t[e].stopAction();this._scheduler.unschedule(this.simulationActionUpdate,this),this._playing=this._pause=!1},updateToFrameByTime:function(t){this._currentTime=t;for(var e=0;e<this._actionNodeList.length;e++)this._actionNodeList[e].updateActionToTimeLine(t)},simulationActionUpdate:function(t){t=!0;for(var e=this._actionNodeList,i=0,n=e.length;i<n;i++)if(!e[i].isActionDoneOnce()){t=!1;break}t&&(null!==this._callback&&this._callback.execute(),this._loop?this.play():(this._playing=!1,this._scheduler.unschedule(this.simulationActionUpdate,this)))}}),ccs.ComAttribute=ccs.Component.extend({_jsonDict:null,_filePath:"",ctor:function(){cc.Component.prototype.ctor.call(this),this._jsonDict={},this._filePath="",this._name="CCComAttribute",ccs.ComAttribute.prototype.init.call(this)},init:function(){return this._jsonDict={},!0},setInt:function(t,e){t?this._jsonDict[t]=e:cc.log("Argument must be non-nil")},setDouble:function(t,e){t?this._jsonDict[t]=e:cc.log("Argument must be non-nil")},setFloat:function(t,e){t?this._jsonDict[t]=e:cc.log("Argument must be non-nil")},setBool:function(t,e){t?this._jsonDict[t]=e:cc.log("Argument must be non-nil")},setString:function(t,e){t?this._jsonDict[t]=e:cc.log("Argument must be non-nil")},setObject:function(t,e){t?this._jsonDict[t]=e:cc.log("Argument must be non-nil")},getInt:function(t){return parseInt(this._jsonDict[t]||0)},getDouble:function(t){return parseFloat(this._jsonDict[t]||0)},getFloat:function(t){return parseFloat(this._jsonDict[t]||0)},getBool:function(t){return Boolean(this._jsonDict[t]||!1)},getString:function(t){return this._jsonDict[t]||""},getObject:function(t){return this._jsonDict[t]},parse:function(t){this._jsonDict=cc.loader.getRes(t)}}),ccs.ComAttribute.create=function(){return new ccs.ComAttribute},ccs.ComAudio=ccs.Component.extend({_filePath:"",_loop:!1,ctor:function(){cc.Component.prototype.ctor.call(this),this._name="Audio",ccs.ComAudio.prototype.init.call(this)},init:function(){return!0},onExit:function(){this.stopBackgroundMusic(!0),this.stopAllEffects()},end:function(){cc.audioEngine.end()},preloadBackgroundMusic:function(t){cc.loader.load(t)},playBackgroundMusic:function(t,e){t?cc.audioEngine.playMusic(t,e):cc.audioEngine.playMusic(this._filePath,this._loop)},stopBackgroundMusic:function(t){cc.audioEngine.stopMusic(t)},pauseBackgroundMusic:function(){cc.audioEngine.pauseMusic()},resumeBackgroundMusic:function(){cc.audioEngine.resumeMusic()},rewindBackgroundMusic:function(){cc.audioEngine.rewindMusic()},willPlayBackgroundMusic:function(){return cc.audioEngine.willPlayMusic()},isBackgroundMusicPlaying:function(){return cc.audioEngine.isMusicPlaying()},getBackgroundMusicVolume:function(){return cc.audioEngine.getMusicVolume()},setBackgroundMusicVolume:function(t){cc.audioEngine.setMusicVolume(t)},getEffectsVolume:function(){return cc.audioEngine.getEffectsVolume()},setEffectsVolume:function(t){cc.audioEngine.setEffectsVolume(t)},playEffect:function(t,e){return t?cc.audioEngine.playEffect(t,e):cc.audioEngine.playEffect(this._filePath,this._loop)},pauseEffect:function(t){cc.audioEngine.pauseEffect(t)},pauseAllEffects:function(){cc.audioEngine.pauseAllEffects()},resumeEffect:function(t){cc.audioEngine.resumeEffect(t)},resumeAllEffects:function(){cc.audioEngine.resumeAllEffects()},stopEffect:function(t){cc.audioEngine.stopEffect(t)},stopAllEffects:function(){cc.audioEngine.stopAllEffects()},preloadEffect:function(t){cc.loader.getRes(t),this.setFile(t),this.setLoop(!1)},unloadEffect:function(t){cc.audioEngine.unloadEffect(t)},setFile:function(t){this._filePath=t},setLoop:function(t){this._loop=t},getFile:function(){return this._filePath},isLoop:function(){return this._loop}}),ccs.ComAudio.create=function(){return new ccs.ComAudio},ccs.ComController=ccs.Component.extend({ctor:function(){cc.Component.prototype.ctor.call(this),this._name="ComController",ccs.ComController.prototype.init.call(this)},onEnter:function(){null!==this._owner&&this._owner.scheduleUpdate()},isEnabled:function(){return this._enabled},setEnabled:function(t){this._enabled=t}}),ccs.ComController.create=function(){return new ccs.ComController},ccs.ComRender=ccs.Component.extend({_render:null,ctor:function(t,e){cc.Component.prototype.ctor.call(this),this._render=t,this._name=e,this.isRenderer=!0,ccs.ComRender.prototype.init.call(this)},onEnter:function(){this._owner&&this._owner.addChild(this._render)},onExit:function(){this._owner&&(this._owner.removeChild(this._render,!0),this._render=null)},getNode:function(){return this._render},setNode:function(t){this._render=t}}),ccs.ComRender.create=function(t,e){return new ccs.ComRender(t,e)},ccs.objectFactory={_typeMap:{},createObject:function(t){var e=null;return(t=this._typeMap[t])&&(e=cc.isFunction(t._fun)?new t._fun:t._fun),e},registerType:function(t){this._typeMap[t._className]=t},createGUI:function(t){var e=null;return"Panel"===t?t="Layout":"TextArea"===t?t="Label":"TextButton"===t&&(t="Button"),(t=this._typeMap[t])&&t._fun&&(e=t._fun),e},removeAll:function(){this._typeMap={}}},ccs.TInfo=ccs.Class.extend({_className:"",_fun:null,ctor:function(t,e){e?(this._className=t,this._fun=e):(this._className=t._className,this._fun=t._fun),ccs.objectFactory.registerType(this)}}),ccs.sendEvent=function(t){if(null!=(t=ccs.triggerManager.get(t)))for(var e=0;e<t.length;e++){var i=t[e];null!=i&&i.detect()&&i.done()}},ccs.registerTriggerClass=function(t,e){new ccs.TInfo(t,e)},ccs.triggerManager={_eventTriggers:{},_triggerObjs:{},_movementDispatches:[],parse:function(t){for(var e=0;e<t.length;++e){var i=t[e],n=new ccs.TriggerObj;n.serialize(i);i=n.getEvents();for(var s=0;s<i.length;s++)this.add(i[s],n);this._triggerObjs[n.getId()]=n}},get:function(t){return this._eventTriggers[t]},getTriggerObj:function(t){return this._triggerObjs[t]},add:function(t,e){var i=this._eventTriggers[t];i||(i=[]),-1===i.indexOf(e)&&(i.push(e),this._eventTriggers[t]=i)},removeAll:function(){for(var t in this._eventTriggers)for(var e=this._eventTriggers[t],i=0;i<e.length;i++)e[i].removeAll();this._eventTriggers={}},remove:function(t,e){if(e)return this._removeObj(t,e);var i=!1,n=this._eventTriggers[t];if(n){for(i=0;i<n.length;i++){var s=n[i];s&&s.removeAll()}delete this._eventTriggers[t],i=!0}return i},_removeObj:function(t,e){var i=!1,n=this._eventTriggers[t];if(n){for(i=0;i<n.length;i++){var s=n[i];if(s&&s==e){s.removeAll(),n.splice(i,1);break}}i=!0}return i},removeTriggerObj:function(t){if(!(t=this.getTriggerObj(t)))return!1;for(var e=t.getEvents(),i=0;i<e.length;i++)this.remove(e[i],t);return!0},isEmpty:function(){return!this._eventTriggers||0>=this._eventTriggers.length},addArmatureMovementCallBack:function(t,e,i){if(null!=t&&null!=i&&null!=e){for(var n,s=!1,r=0;r<this._movementDispatches.length;r++)(n=this._movementDispatches[r])&&n[0]===t&&(n.addAnimationEventCallBack(e,i),s=!0);s||(n=new ccs.ArmatureMovementDispatcher,t.getAnimation().setMovementEventCallFunc(n.animationEvent,n),n.addAnimationEventCallBack(e,i),this._movementDispatches.push([t,n]))}},removeArmatureMovementCallBack:function(t,e,i){if(null!=t&&null!=e&&null!=i)for(var n,s=0;s<this._movementDispatches.length;s++)(n=this._movementDispatches[s])&&n[0]===t&&n.removeAnimationEventCallBack(i,e)},removeArmatureAllMovementCallBack:function(t){if(null!=t)for(var e,i=0;i<this._movementDispatches.length;i++)if((e=this._movementDispatches[i])&&e[0]===t){this._movementDispatches.splice(i,1);break}},removeAllArmatureMovementCallBack:function(){this._movementDispatches.length=0},version:function(){return"1.2.0.0"}},ccs.ArmatureMovementDispatcher=ccs.Class.extend({_mapEventAnimation:null,ctor:function(){this._mapEventAnimation=[]},animationEvent:function(t,e,i){for(var n,s,r=0;r<this._mapEventAnimation.length;r++)s=(n=this._mapEventAnimation[r])[0],(n=n[1])&&n.call(s,t,e,i)},addAnimationEventCallBack:function(t,e){this._mapEventAnimation.push([e,t])},removeAnimationEventCallBack:function(t,e){for(var i=0;i<this._mapEventAnimation.length;i++)this._mapEventAnimation[i][0]===e&&this._mapEventAnimation.splice(i,1)}}),ccs.BaseTriggerCondition=ccs.Class.extend({ctor:function(){},init:function(){return!0},detect:function(){return!0},serialize:function(t){},removeAll:function(){}}),ccs.BaseTriggerAction=ccs.Class.extend({ctor:function(){},init:function(){return!0},done:function(){},serialize:function(t){},removeAll:function(){}}),ccs.TriggerObj=ccs.Class.extend({_cons:null,_acts:null,_id:0,_enable:!0,_vInt:null,ctor:function(){this._id=0,this._enable=!0,ccs.TriggerObj.prototype.init.call(this)},init:function(){return this._cons=[],this._acts=[],this._vInt=[],!0},detect:function(){if(!this._enable||0===this._cons.length)return!0;for(var t=!0,e=null,i=0;i<this._cons.length;i++)(e=this._cons[i])&&e.detect&&(t=t&&e.detect());return t},done:function(){if(this._enable&&0!==this._acts.length)for(var t,e=0;e<this._acts.length;e++)(t=this._acts[e])&&t.done&&t.done()},removeAll:function(){for(var t=null,e=0;e<this._cons.length;e++)(t=this._cons[e])&&t.removeAll();for(this._cons=[],e=0;e<this._acts.length;e++)(t=this._acts[e])&&t.removeAll();this._acts=[]},serialize:function(t){this._id=t.id||0;for(var e=t.conditions||[],i=0;i<e.length;i++){var n=e[i],s=n.classname,r=ccs.objectFactory.createObject(s);r?(r.serialize(n),r.init(),this._cons.push(r)):cc.log("class named classname("+s+") can not implement!")}for(e=t.actions||[],i=0;i<e.length;i++)s=(n=e[i]).classname,(r=ccs.objectFactory.createObject(s))?(r.serialize(n),r.init(),this._acts.push(r)):cc.log("class named classname("+s+") can not implement!");for(t=t.events||[],i=0;i<t.length;i++)0>(n=(n=t[i]).id)||this._vInt.push(n)},getId:function(){return this._id},setEnable:function(t){this._enable=t},getEvents:function(){return this._vInt}}),ccs.TriggerObj.create=function(){return new ccs.TriggerObj},ccs.ActionTimelineData=ccs.Class.extend({_actionTag:0,ctor:function(t){this._init(t)},_init:function(t){return this._actionTag=t,!0},setActionTag:function(t){this._actionTag=t},getActionTag:function(){return this._actionTag}}),ccs.AnimationInfo=function(t,e,i){this.name=t,this.startIndex=e,this.endIndex=i},ccs.ComExtensionData=ccs.Component.extend({_customProperty:null,_timelineData:null,_name:"ComExtensionData",ctor:function(){return this._customProperty="",this._timelineData=new ccs.ActionTimelineData(0),!0},setActionTag:function(t){this._timelineData.setActionTag(t)},getActionTag:function(){return this._timelineData.getActionTag()},setCustomProperty:function(t){this._customProperty=t},getCustomProperty:function(){return this._customProperty}}),ccs.ComExtensionData.create=function(){return new ccs.ComExtensionData},ccs.ActionTimelineData.create=function(t){return new ccs.ActionTimelineData(t)},ccs.ActionTimeline=cc.Action.extend({_timelineMap:null,_timelineList:null,_duration:0,_time:null,_timeSpeed:1,_frameInternal:1/60,_playing:!1,_currentFrame:0,_startFrame:0,_endFrame:0,_loop:null,_frameEventListener:null,_animationInfos:null,_lastFrameListener:null,ctor:function(){cc.Action.prototype.ctor.call(this),this._timelineMap={},this._timelineList=[],this._animationInfos={},this.init()},_gotoFrame:function(t){for(var e=this._timelineList.length,i=0;i<e;i++)this._timelineList[i]._gotoFrame(t)},_stepToFrame:function(t){for(var e=this._timelineList.length,i=0;i<e;i++)this._timelineList[i]._stepToFrame(t)},_emitFrameEvent:function(t){this._frameEventListener&&this._frameEventListener(t)},init:function(){return!0},gotoFrameAndPlay:function(t,e,i,n){for(var s,r=0,o=arguments.length,a=[];r<o;r++)"boolean"==typeof arguments[r]?s=arguments[r]:a.push(arguments[r]);t=a[0],e=void 0!==a[1]?a[1]:this._duration,i=a[2]||t,this._startFrame=t,this._endFrame=e,this._currentFrame=i,this._loop=null==s||s,this._time=this._currentFrame*this._frameInternal,this.resume(),this._gotoFrame(this._currentFrame)},gotoFrameAndPause:function(t){this._startFrame=this._currentFrame=t,this._time=this._currentFrame*this._frameInternal,this.pause(),this._gotoFrame(this._currentFrame)},pause:function(){this._playing=!1},resume:function(){this._playing=!0},isPlaying:function(){return this._playing},setTimeSpeed:function(t){this._timeSpeed=t},getTimeSpeed:function(){return this._timeSpeed},setDuration:function(t){this._duration=t},getDuration:function(){return this._duration},getStartFrame:function(){return this._startFrame},getEndFrame:function(){return this._endFrame},setCurrentFrame:function(t){t>=this._startFrame&&t<=this._endFrame?(this._currentFrame=t,this._time=this._currentFrame*this._frameInternal):cc.log("frame index is not between start frame and end frame")},getCurrentFrame:function(){return this._currentFrame},addTimeline:function(t){var e=t.getActionTag();this._timelineMap[e]||(this._timelineMap[e]=[]),-1===this._timelineMap[e].indexOf(t)&&(this._timelineList.push(t),this._timelineMap[e].push(t),t.setActionTimeline(this))},removeTimeline:function(t){var e=t.getActionTag();this._timelineMap[e]&&this._timelineMap[e].some((function(e){if(e===t)return!0}))&&(cc.arrayRemoveObject(this._timelineMap[e],t),cc.arrayRemoveObject(this._timelineList,t),t.setActionTimeline(null))},getTimelines:function(){return this._timelineList},setFrameEventCallFunc:function(t){this._frameEventListener=t},clearFrameEventCallFunc:function(){this._frameEventListener=null},clone:function(){var t=new ccs.ActionTimeline;for(var e in t.setDuration(this._duration),t.setTimeSpeed(this._timeSpeed),this._timelineMap){var i,n=this._timelineMap[e];for(i in n){var s=n[i].clone();t.addTimeline(s)}}return t},reverse:function(){return null},step:function(t){this._playing&&0!==this._timelineMap.length&&0!==this._duration&&(this._time+=t*this._timeSpeed,(t=this._time-this._endFrame*this._frameInternal)<this._frameInternal?(this._currentFrame=Math.floor(this._time/this._frameInternal),this._stepToFrame(this._currentFrame),0<=t&&this._lastFrameListener&&this._lastFrameListener()):(this._playing=this._loop)?this.gotoFrameAndPlay(this._startFrame,this._endFrame,this._loop):(this._time=this._endFrame*this._frameInternal,this._currentFrame!=this._endFrame&&(this._currentFrame=this._endFrame,this._stepToFrame(this._currentFrame),this._lastFrameListener&&this._lastFrameListener())))},_foreachNodeDescendant:function(t,e){e(t);for(var i=t.getChildren(),n=0;n<i.length;n++)this._foreachNodeDescendant(i[n],e)},startWithTarget:function(t){cc.Action.prototype.startWithTarget.call(this,t);var e=this;this._foreachNodeDescendant(t,(function(t){if((i=t.getComponent("ComExtensionData"))&&(i=i.getActionTag(),e._timelineMap[i]))for(var i=e._timelineMap[i],n=0;n<i.length;n++)i[n].setNode(t)}))},isDone:function(){return!1},play:function(t,e){var i=this._animationInfos[t];if(!i)return cc.log("Can't find animation info for %s",t);this.gotoFrameAndPlay(i.startIndex,i.endIndex,e)},addAnimationInfo:function(t){this._animationInfos[t.name]=t},removeAnimationInfo:function(t){delete this._animationInfos[t]},isAnimationInfoExists:function(t){return this._animationInfos[t]},getAnimationInfo:function(t){return this._animationInfos[t]},setLastFrameCallFunc:function(t){this._lastFrameListener=t},clearLastFrameCallFunc:function(){this._lastFrameListener=null}}),ccs.ActionTimeline.create=function(){return new ccs.ActionTimeline},ccs.Frame=ccs.Class.extend({_frameIndex:null,_tween:null,_timeline:null,_node:null,_tweenType:null,_easingParam:null,_enterWhenPassed:null,ctor:function(){this._frameIndex=0,this._tween=!0,this._node=this._timeline=null,this._enterWhenPassed=!1,this._easingParam=[]},_emitEvent:function(){this._timeline&&this._timeline.getActionTimeline()._emitFrameEvent(this)},_cloneProperty:function(t){this._frameIndex=t.getFrameIndex(),this._tween=t.isTween(),this._tweenType=t.getTweenType(),this.setEasingParams(t.getEasingParams())},setFrameIndex:function(t){this._frameIndex=t},getFrameIndex:function(){return this._frameIndex},setTimeline:function(t){this._timeline=t},getTimeline:function(t){return this._timeline},setNode:function(t){this._node=t},getNode:function(){return this._node},setTween:function(t){this._tween=t},isTween:function(){return this._tween},onEnter:function(t){},apply:function(t){this._tween&&(this._tweenType!==ccs.FrameEaseType.TWEEN_EASING_MAX&&this._tweenType!==ccs.FrameEaseType.LINEAR&&(t=this.tweenPercent(t)),this._onApply(t))},_onApply:function(t){},clone:function(){},tweenPercent:function(t){var e=ccs.Frame.tweenToMap[this._tweenType];return e?e(t,this._easingParam):t},setEasingParams:function(t){if(t)for(var e=this._easingParam.length=0;e<t.length;e++)this._easingParam[e]=t[e]},getEasingParams:function(){return this._easingParam},setTweenType:function(t){this._tweenType=t},getTweenType:function(){return this._tweenType},isEnterWhenPassed:function(){return this._enterWhenPassed}}),ccs.Frame.tweenToMap={"-1":function(t,e){if(e){var i=1-t;return e[1]*i*i*i+3*e[3]*t*i*i+3*e[5]*t*t*i+e[7]*t*t*t}return t},1:cc._easeSineInObj.easing,2:cc._easeSineOutObj.easing,3:cc._easeSineInOutObj.easing,4:cc._easeQuadraticActionIn.easing,5:cc._easeQuadraticActionOut.easing,6:cc._easeQuadraticActionInOut.easing,7:cc._easeCubicActionIn.easing,8:cc._easeCubicActionOut.easing,9:cc._easeCubicActionInOut.easing,10:cc._easeCubicActionIn.easing,11:cc._easeCubicActionOut.easing,12:cc._easeCubicActionInOut.easing,13:cc._easeQuinticActionIn.easing,14:cc._easeQuinticActionOut.easing,15:cc._easeQuinticActionInOut.easing,16:cc._easeExponentialInObj.easing,17:cc._easeExponentialOutObj.easing,18:cc._easeExponentialInOutObj.easing,19:cc._easeCircleActionIn.easing,20:cc._easeCircleActionOut.easing,21:cc._easeCircleActionInOut.easing,22:function(t,e){var i=.3;return null!=e&&(i=e[0]),cc.easeElasticIn(i).easing(t)},23:function(t,e){var i=.3;return null!=e&&(i=e[0]),cc.easeElasticOut(i).easing(t)},24:function(t,e){var i=.3;return null!=e&&(i=e[0]),cc.easeElasticInOut(i).easing(t)},25:cc._easeBackInObj.easing,26:cc._easeBackOutObj.easing,27:cc._easeBackInOutObj.easing,28:cc._easeBounceInObj.easing,29:cc._easeBounceOutObj.easing,30:cc._easeBounceInOutObj.easing},ccs.VisibleFrame=ccs.Frame.extend({_visible:!0,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._visible=!0},onEnter:function(t){this._node&&this._node.setVisible(this._visible)},clone:function(){var t=new ccs.VisibleFrame;return t.setVisible(this._visible),t._cloneProperty(this),t},setVisible:function(t){this._visible=t},isVisible:function(){return this._visible}}),ccs.VisibleFrame.create=function(){return new ccs.VisibleFrame},ccs.TextureFrame=ccs.Frame.extend({_sprite:null,_textureName:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._textureName=""},setNode:function(t){ccs.Frame.prototype.setNode.call(this,t),this._sprite=t},onEnter:function(t){if(this._sprite){t=this._sprite.getBlendFunc();var e=cc.spriteFrameCache._spriteFrames[this._textureName];null!=e?this._sprite.setSpriteFrame(e):this._sprite.setTexture(this._textureName),this._sprite.getBlendFunc()!==t&&this._sprite.setBlendFunc(t)}},clone:function(){var t=new ccs.TextureFrame;return t.setTextureName(this._textureName),t._cloneProperty(this),t},setTextureName:function(t){this._textureName=t},getTextureName:function(){return this._textureName}}),ccs.TextureFrame.create=function(){return new ccs.TextureFrame},ccs.RotationFrame=ccs.Frame.extend({_rotation:null,_betwennRotation:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._rotation=0},onEnter:function(t){this._node&&(this._node.setRotation(this._rotation),this._tween&&(this._betwennRotation=t._rotation-this._rotation))},_onApply:function(t){0!==this._betwennRotation&&this._node.setRotation(this._rotation+t*this._betwennRotation)},clone:function(){var t=new ccs.RotationFrame;return t.setRotation(this._rotation),t._cloneProperty(this),t},setRotation:function(t){this._rotation=t},getRotation:function(){return this._rotation}}),ccs.RotationFrame.create=function(){return new ccs.RotationFrame},ccs.SkewFrame=ccs.Frame.extend({_skewX:null,_skewY:null,_betweenSkewX:null,_betweenSkewY:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._skewY=this._skewX=0},onEnter:function(t){this._node&&(this._node.setSkewX(this._skewX),this._node.setSkewY(this._skewY),this._tween&&(this._betweenSkewX=t._skewX-this._skewX,this._betweenSkewY=t._skewY-this._skewY))},_onApply:function(t){if(0!==this._betweenSkewX||0!==this._betweenSkewY){var e=this._skewY+t*this._betweenSkewY;this._node.setSkewX(this._skewX+t*this._betweenSkewX),this._node.setSkewY(e)}},clone:function(){var t=new ccs.SkewFrame;return t.setSkewX(this._skewX),t.setSkewY(this._skewY),t._cloneProperty(this),t},setSkewX:function(t){this._skewX=t},getSkewX:function(){return this._skewX},setSkewY:function(t){this._skewY=t},getSkewY:function(){return this._skewY}}),ccs.SkewFrame.create=function(){return new ccs.SkewFrame},ccs.RotationSkewFrame=ccs.SkewFrame.extend({onEnter:function(t){this._node&&(this._node.setRotationX(this._skewX),this._node.setRotationY(this._skewY),this._tween&&(this._betweenSkewX=t._skewX-this._skewX,this._betweenSkewY=t._skewY-this._skewY))},_onApply:function(t){if(this._node&&(0!==this._betweenSkewX||0!==this._betweenSkewY)){var e=this._skewY+t*this._betweenSkewY;this._node.setRotationX(this._skewX+t*this._betweenSkewX),this._node.setRotationY(e)}},clone:function(){var t=new ccs.RotationSkewFrame;return t.setSkewX(this._skewX),t.setSkewY(this._skewY),t._cloneProperty(this),t}}),ccs.RotationSkewFrame.create=function(){return new ccs.RotationSkewFrame},ccs.PositionFrame=ccs.Frame.extend({_position:null,_betweenX:null,_betweenY:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._position=cc.p(0,0)},onEnter:function(t){this._node&&(this._node.setPosition(this._position),this._tween&&(this._betweenX=t._position.x-this._position.x,this._betweenY=t._position.y-this._position.y))},_onApply:function(t){if(this._node&&(0!==this._betweenX||0!==this._betweenY)){var e=cc.p(0,0);e.x=this._position.x+this._betweenX*t,e.y=this._position.y+this._betweenY*t,this._node.setPosition(e)}},clone:function(){var t=new ccs.PositionFrame;return t.setPosition(this._position),t._cloneProperty(this),t},setPosition:function(t){this._position=t},getPosition:function(){return this._position},setX:function(t){this._position.x=t},getX:function(){return this._position.x},setY:function(t){this._position.y=t},getY:function(){return this._position.y}}),ccs.PositionFrame.create=function(){return new ccs.PositionFrame},ccs.ScaleFrame=ccs.Frame.extend({_scaleX:null,_scaleY:null,_betweenScaleX:null,_betweenScaleY:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._scaleY=this._scaleX=1},onEnter:function(t){this._node&&(this._node.setScaleX(this._scaleX),this._node.setScaleY(this._scaleY),this._tween&&(this._betweenScaleX=t._scaleX-this._scaleX,this._betweenScaleY=t._scaleY-this._scaleY))},_onApply:function(t){if(this._node&&(0!==this._betweenScaleX||0!==this._betweenScaleY)){var e=this._scaleY+this._betweenScaleY*t;this._node.setScaleX(this._scaleX+this._betweenScaleX*t),this._node.setScaleY(e)}},clone:function(){var t=new ccs.ScaleFrame;return t.setScaleX(this._scaleX),t.setScaleY(this._scaleY),t._cloneProperty(this),t},setScale:function(t){this._scaleY=this._scaleX=t},setScaleX:function(t){this._scaleX=t},getScaleX:function(){return this._scaleX},setScaleY:function(t){this._scaleY=t},getScaleY:function(){return this._scaleY}}),ccs.ScaleFrame.create=function(){return new ccs.ScaleFrame},ccs.AnchorPointFrame=ccs.Frame.extend({_anchorPoint:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._anchorPoint=cc.p(0,0)},onEnter:function(t){this._node&&this._node.setAnchorPoint(this._anchorPoint)},clone:function(){var t=new ccs.AnchorPointFrame;return t.setAnchorPoint(this._anchorPoint),t._cloneProperty(this),t},setAnchorPoint:function(t){this._anchorPoint=t},getAnchorPoint:function(){return this._anchorPoint}}),ccs.AnchorPointFrame.create=function(){return new ccs.AnchorPointFrame},ccs.InnerActionType={LoopAction:0,NoLoopAction:1,SingleFrame:2},ccs.InnerActionFrame=ccs.Frame.extend({_innerActionType:null,_startFrameIndex:null,_endFrameIndex:0,_singleFrameIndex:0,_enterWithName:null,_animationName:"",ctor:function(){ccs.Frame.prototype.ctor.call(this),this._enterWithName=!1,this._innerActionType=ccs.InnerActionType.LoopAction,this._startFrameIndex=0},onEnter:function(t){if(this._node&&(t=this._node.getActionByTag(this._node.getTag())))if(ccs.InnerActionType.SingleFrame===this._innerActionType)t.gotoFrameAndPause(this._singleFrameIndex);else{var e=this._startFrameIndex,i=this._endFrameIndex;this._enterWithName&&("-- ALL --"===this._animationName?(e=0,i=t.getDuration()):t.isAnimationInfoExists(this._animationName)?(e=(i=t.getAnimationInfo(this._animationName)).startIndex,i=i.endIndex):cc.log("Animation %s not exists!",this._animationName));var n=this._timeline.getActionTimeline().getDuration()-this._frameIndex-i+e;0>n&&(i+=n),ccs.InnerActionType.NoLoopAction===this._innerActionType?t.gotoFrameAndPlay(e,i,!1):ccs.InnerActionType.LoopAction===this._innerActionType&&t.gotoFrameAndPlay(e,i,!0)}},setAnimationName:function(t){this._animationName=t},setSingleFrameIndex:function(t){this._singleFrameIndex=t},getSingleFrameIndex:function(){return this._startFrameIndex},setEnterWithName:function(t){this._enterWithName=t},getEnterWithName:function(){return this._enterWithName},clone:function(){var t=new ccs.InnerActionFrame;return t.setInnerActionType(this._innerActionType),t.setStartFrameIndex(this._startFrameIndex),t.setEnterWithName(this._enterWithName),t.setAnimationName(this._animationName),t.setSingleFrameIndex(this._singleFrameIndex),t._cloneProperty(this),t},setInnerActionType:function(t){this._innerActionType=t},getInnerActionType:function(){return this._innerActionType},setStartFrameIndex:function(t){this._startFrameIndex=t},getStartFrameIndex:function(){return this._startFrameIndex}}),ccs.InnerActionFrame.create=function(){return new ccs.InnerActionFrame},ccs.ColorFrame=ccs.Frame.extend({_alpha:null,_color:null,_betweenAlpha:null,_betweenRed:null,_betweenGreen:null,_betweenBlue:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._color=cc.color(255,255,255)},onEnter:function(t){this._node&&(this._node.setColor(this._color),this._tween&&(t=t._color,this._betweenRed=t.r-this._color.r,this._betweenGreen=t.g-this._color.g,this._betweenBlue=t.b-this._color.b))},_onApply:function(t){if(this._node&&this._tween&&(0!==this._betweenAlpha||0!==this._betweenRed||0!==this._betweenGreen||0!==this._betweenBlue)){var e=cc.color(255,255,255);e.r=this._color.r+this._betweenRed*t,e.g=this._color.g+this._betweenGreen*t,e.b=this._color.b+this._betweenBlue*t,this._node.setColor(e),null!==this._alpha&&this._node.setOpacity(this._alpha+this._betweenAlpha*t)}},clone:function(){var t=new ccs.ColorFrame;return t.setColor(this._color),t._cloneProperty(this),t},setColor:function(t){this._color=t},getColor:function(){return this._color}}),ccs.ColorFrame.create=function(){return new ccs.ColorFrame},ccs.AlphaFrame=ccs.Frame.extend({_alpha:null,_betweenAlpha:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._alpha=255},onEnter:function(t){this._node&&(this._node.setOpacity(this._alpha),this._tween&&(this._betweenAlpha=t._alpha-this._alpha))},_onApply:function(t){this._node&&this._node.setOpacity(this._alpha+this._betweenAlpha*t)},setAlpha:function(t){this._alpha=t},getAlpha:function(){return this._alpha},clone:function(){var t=new ccs.AlphaFrame;return t.setAlpha(this._alpha),t._cloneProperty(this),t}}),ccs.EventFrame=ccs.Frame.extend({_event:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._event="",this._enterWhenPassed=!0},onEnter:function(t){this._emitEvent()},clone:function(){var t=new ccs.EventFrame;return t.setEvent(this._event),t._cloneProperty(this),t},setEvent:function(t){this._event=t},getEvent:function(){return this._event}}),ccs.EventFrame.create=function(){return new ccs.EventFrame},ccs.ZOrderFrame=ccs.Frame.extend({_zorder:0,onEnter:function(t){this._node&&this._node.setLocalZOrder(this._zorder)},clone:function(){var t=new ccs.ZOrderFrame;return t.setZOrder(this._zorder),t._cloneProperty(this),t},setZOrder:function(t){this._zorder=t},getZOrder:function(){return this._zorder}}),ccs.ZOrderFrame.create=function(){return new ccs.ZOrderFrame},ccs.BlendFuncFrame=ccs.Frame.extend({ctor:function(){this._super(),this._blendFunc=null},onEnter:function(t,e){this._node&&this._blendFunc&&this._node.setBlendFunc(this._blendFunc)},clone:function(){var t=new ccs.BlendFuncFrame;return t.setBlendFunc(this._blendFunc),t._cloneProperty(this),t},setBlendFunc:function(t){t&&t.src&&t.dst&&(this._blendFunc=t)},getBlendFunc:function(){return this._blendFunc}}),ccs.BlendFuncFrame.create=function(){return new ccs.BlendFuncFrame},ccs.Timeline=ccs.Class.extend({_frames:null,_currentKeyFrame:null,_currentKeyFrameIndex:null,_fromIndex:null,_toIndex:null,_betweenDuration:null,_actionTag:null,_ActionTimeline:null,_node:null,ctor:function(){this._frames=[],this._currentKeyFrame=null,this._actionTag=this._betweenDuration=this._toIndex=this._fromIndex=this._currentKeyFrameIndex=0,this._node=this._ActionTimeline=null},_gotoFrame:function(t){0!==this._frames.length&&(this._binarySearchKeyFrame(t),this._apply(t))},_stepToFrame:function(t){0!==this._frames.length&&(this._updateCurrentKeyFrame(t),this._apply(t))},getFrames:function(){return this._frames},addFrame:function(t){this._frames.push(t),t.setTimeline(this)},insertFrame:function(t,e){this._frames.splice(e,0,t),t.setTimeline(this)},removeFrame:function(t){cc.arrayRemoveObject(this._frames,t),t.setTimeline(null)},setActionTag:function(t){this._actionTag=t},getActionTag:function(){return this._actionTag},setNode:function(t){for(var e=0;e<this._frames.length;e++)this._frames[e].setNode(t)},getNode:function(){return this._node},setActionTimeline:function(t){this._ActionTimeline=t},getActionTimeline:function(){return this._ActionTimeline},clone:function(){var t=new ccs.Timeline;t._actionTag=this._actionTag;for(var e=0;e<this._frames.length;e++){var i=this._frames[e].clone();t.addFrame(i)}return t},_apply:function(t){this._currentKeyFrame&&this._currentKeyFrame.apply(0>=this._betweenDuration?0:(t-this._currentKeyFrameIndex)/this._betweenDuration)},_binarySearchKeyFrame:function(t){var e=null,i=null,n=this._frames.length,s=!1;if(t<this._frames[0].getFrameIndex())this._currentKeyFrameIndex>=this._frames[0].getFrameIndex()&&(s=!0),this._toIndex=this._fromIndex=0,e=i=this._frames[0],this._currentKeyFrameIndex=0,this._betweenDuration=this._frames[0].getFrameIndex();else if(t>=this._frames[n-1].getFrameIndex())this._fromIndex=n-1,this._toIndex=0,e=i=this._frames[n-1],this._currentKeyFrameIndex=this._frames[n-1].getFrameIndex(),this._betweenDuration=0;else{for(var r=-1,o=(e=0,i=n-1,0);e<=i;){if(o=Math.ceil((e+i)/2),t>=this._frames[o].getFrameIndex()&&t<this._frames[o+1].getFrameIndex()){r=o;break}this._frames[o].getFrameIndex()>t?i=o-1:e=o+1}this._fromIndex=r,this._toIndex=1<n?r+1|0:0|r,e=this._frames[r],i=this._frames[r+1],0===r&&this._currentKeyFrameIndex<e.getFrameIndex()&&(s=!0),this._currentKeyFrameIndex=e.getFrameIndex(),this._betweenDuration=i.getFrameIndex()-e.getFrameIndex()}(s||this._currentKeyFrame!=e)&&(this._currentKeyFrame=e,this._currentKeyFrame.onEnter(i))},_updateCurrentKeyFrame:function(t){if(t<this._currentKeyFrameIndex||t>=this._currentKeyFrameIndex+this._betweenDuration){var e=null,i=null,n=this._frames.length;if(t<this._frames[0].getFrameIndex())e=i=this._frames[0],this._currentKeyFrameIndex=0,this._betweenDuration=this._frames[0].getFrameIndex();else{if(t>=this._frames[n-1].getFrameIndex()&&(t=this._frames[n-1].getFrameIndex(),this._currentKeyFrameIndex>=t))return;for(;;){if(this._fromIndex=this._toIndex,e=this._frames[this._fromIndex],this._currentKeyFrameIndex=e.getFrameIndex(),this._toIndex=this._fromIndex+1,this._toIndex>=n&&(this._toIndex=0),i=this._frames[this._toIndex],t===e.getFrameIndex())break;if(t>e.getFrameIndex()&&t<i.getFrameIndex())break;e.isEnterWhenPassed()&&e.onEnter(i)}this._betweenDuration=i.getFrameIndex()-e.getFrameIndex()}this._currentKeyFrame=e,this._currentKeyFrame.onEnter(i)}}}),ccs.Timeline.create=function(){return new ccs.Timeline},ccs.SkinNode=function(){var t=cc.Node.extend({});return t.create=function(){},t}(),ccs.BoneNode=function(){var t=cc.Node,e=ccs.SkinNode,i=cc.BlendFunc,n={p:cc.p,size:cc.size,rect:cc.rect},s={log:cc.log,assert:cc.assert},r=t.extend({_customCommand:null,_blendFunc:null,_rackColor:null,_rackLength:null,_rackWidth:null,_childBones:null,_boneSkins:null,_rootSkeleton:null,_squareVertices:null,_squareColors:null,_noMVPVertices:null,ctor:function(e){t.prototype.ctor.call(this),null===this._squareVertices&&(this._squareVertices=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}]),this._rackColor=cc.color.WHITE,this._blendFunc=i.ALPHA_NON_PREMULTIPLIED,this._childBones=[],this._boneSkins=[],this._rackLength=void 0===e?50:e,this._rackWidth=20,this._updateVertices()},visit:function(t){this._visit&&this._visit(t&&t._renderCmd)},addSkin:function(e,i,n){var r=this._boneSkins;if(s.assert(null!=e,"Argument must be non-nil"),n)for(n=0;n<r.length;n++)r[n].setVisible(!1);t.prototype.addChild.call(this,e),this._boneSkins.push(e),e.setVisible(i)},getChildBones:function(){return this._childBones},getSkins:function(){return this._boneSkins},displaySkin:function(t,e){var i,n,s=this._boneSkins;if("string"==typeof t)for(n=0;n<s.length;n++)t==(i=s[n]).getName()?i.setVisible(!0):e&&i.setVisible(!1);else for(n=0;n<s.length;n++)(i=s[n])==t?i.setVisible(!0):e&&i.setVisible(!1)},getVisibleSkins:function(){for(var t,e=[],i=this._boneSkins,n=0;n<i.length;n++)(t=i[n]).isVisible()&&e.push(t);return e},getRootSkeletonNode:function(){return this._rootSkeleton},getAllSubBones:function(){for(var t=[],e=[],i=this._childBones,n=0;n<i.length;n++)e.push(i[n]);for(;0<e.length;)for(i=e.pop(),t.push(i),i=i.getChildBones(),n=0;n<i;n++)e.push(i[n]);return t},getAllSubSkins:function(){for(var t=this.getAllSubBones(),e=[],i=0;i<t.length;i++)for(var n=t[i].getSkins(),s=0;s<n.length;s++)e.push(n[i]);return e},addChild:function(e,i,n){t.prototype.addChild.call(this,e,i,n),this._addToChildrenListHelper(e)},removeChild:function(e,i){-1!==this._children.indexOf(e)&&(t.prototype.removeChild.call(this,e,i),this._removeFromChildrenListHelper(e))},setBlendFunc:function(t){var e=this._blendFunc;if(t&&e.src!==t.src&&e.dst!==t.dst){this._blendFunc=t;e=this._boneSkins;for(var i=0;i<e.length;i++)e[i].setBlendFunc(t)}},getBlendFunc:function(){return this._blendFunc},setDebugDrawLength:function(t){this._rackLength=t,this._updateVertices()},getDebugDrawLength:function(){return this._rackLength},setDebugDrawWidth:function(t){this._rackWidth=t,this._updateVertices()},getDebugDrawWidth:function(){return this._rackWidth},setDebugDrawEnabled:function(t){var e=this._renderCmd;e._debug!==t&&(e._debug=t,cc.renderer.childrenOrderDirty=!0,this._visible&&null!=this._rootSkeleton&&(this._rootSkeleton._subBonesDirty=!0,this._rootSkeleton._subBonesOrderDirty=!0))},isDebugDrawEnabled:function(){return this._renderCmd._debug},setDebugDrawColor:function(t){this._rackColor=t},getDebugDrawColor:function(){return this._rackColor},getVisibleSkinsRect:function(){var t,e,i,s=0;t=e=i=s;var r=!0,o=n.rect(0,0,0,0);this._renderCmd._debug&&null!=this._rootSkeleton&&this._rootSkeleton._renderCmd._debug&&(i=this._rackWidth,s=this._rackLength,r=!1);for(var a,c=this._boneSkins,h=0;h<c.length;h++){var l=(a=c[h]).getBoundingBox();!a.isVisible()||0===l.x&&0===l.y&&0===l.width&&0===l.height||(r?(t=cc.rectGetMinX(l),e=cc.rectGetMinY(l),i=cc.rectGetMaxX(l),s=cc.rectGetMaxY(l),r=!1):(t=Math.min(cc.rectGetMinX(l),t),e=Math.min(cc.rectGetMinY(l),e),i=Math.max(cc.rectGetMaxX(l),i),s=Math.max(cc.rectGetMaxY(l),s)),o.setRect(t,e,i-t,s-e))}return o},getBoundingBox:function(){var t=this.getVisibleSkinsRect();return cc.rectApplyAffineTransform(t,this.getNodeToParentAffineTransform())},batchBoneDrawToSkeleton:function(t){},setLocalZOrder:function(e){t.prototype.setLocalZOrder.call(this,e),null!=this._rootSkeleton&&(this._rootSkeleton._subBonesOrderDirty=!0)},setName:function(e){var i=this._rootSkeleton,n=this.getName();if(t.prototype.setName.call(this,e),null!=i){n=i._subBonesMap[n];var s=i._subBonesMap[e];n&&!s&&(delete i._subBonesMap[n],i._subBonesMap[e]=n)}},setContentSize:function(e){t.prototype.setContentSize.call(this,e),this._updateVertices()},setAnchorPoint:function(e){t.prototype.setAnchorPoint.call(this,e),this._updateVertices()},setVisible:function(e){this._visible!=e&&(t.prototype.setVisible.call(this,e),null!=this._rootSkeleton&&(this._rootSkeleton._subBonesDirty=!0,this._rootSkeleton._subBonesOrderDirty=!0))},_addToChildrenListHelper:function(t){t instanceof r?this._addToBoneList(t):this._addToSkinList(t)},_removeFromChildrenListHelper:function(t){t instanceof r?this._removeFromBoneList(t):t instanceof e&&this._removeFromSkinList(skin)},_removeFromBoneList:function(t){if(null!=this._rootSkeleton&&t instanceof ccs.SkeletonNode&&t._rootSkeleton===this._rootSkeleton){t._rootSkeleton=null;var e=t.getAllSubBones();e.push(t);for(var i,n=0;n<e.length;n++)(i=e[n])._rootSkeleton=null,delete this._rootSkeleton._subBonesMap[i.getName()],this._rootSkeleton._subBonesDirty=!0,this._rootSkeleton._subBonesOrderDirty=!0}else this._rootSkeleton._subBonesDirty=!0,this._rootSkeleton._subBonesOrderDirty=!0;cc.arrayRemoveObject(this._childBones,t)},_setRootSkeleton:function(t){this._rootSkeleton=t,t=this.getAllSubBones();for(var e=0;e<t.length;e++)this._addToBoneList(t[e])},_addToBoneList:function(t){if(-1===this._childBones.indexOf(t)&&this._childBones.push(t),null!=this._rootSkeleton&&!(t instanceof e||t._rootSkeleton)){var i=t.getAllSubBones();i.push(t);for(var n=0;n<i.length;n++){(t=i[n])._setRootSkeleton(this._rootSkeleton);var s=t.getName();this._rootSkeleton._subBonesMap[s]?cc.log("already has a bone named %s in skeleton %s",s,this._rootSkeleton.getName()):this._rootSkeleton._subBonesMap[t.getName()]=t,this._rootSkeleton._subBonesDirty=!0,this._rootSkeleton._subBonesOrderDirty=!0}}},_visitSkins:function(){var t=this._renderCmd;if(this._visible){var e=t.getParentRenderCmd();e&&(t._curLevel=e._curLevel+1);var i,n=this._boneSkins;t._syncStatus(e);var s=n.length;if(0<s){for(this.sortAllChildren(),e=0;e<s&&0>(i=n[e])._localZOrder;e++)i.visit(this);for(;e<s;e++)n[e].visit(this)}t._dirtyFlag=0}},_addToSkinList:function(t){if(this._boneSkins.push(t),t.getBlendFunc){var e=t.getBlendFunc();this._blendFunc.src!==e.src&&this._blendFunc.dst!==e.dst&&t.setBlendFunc(this._blendFunc)}},_removeFromSkinList:function(t){cc.arrayRemoveObject(this._boneSkins,t)},sortAllChildren:function(){this._sortArray(this._childBones),this._sortArray(this._boneSkins),t.prototype.sortAllChildren.call(this)},_sortArray:function(t){if(t){var e,i,n,s=t.length;for(e=1;e<s;e++){for(n=t[e],i=e-1;0<=i;){if(n._localZOrder<t[i]._localZOrder)t[i+1]=t[i];else{if(!(n._localZOrder===t[i]._localZOrder&&n.arrivalOrder<t[i].arrivalOrder))break;t[i+1]=t[i]}i--}t[i+1]=n}}},_updateVertices:function(){var t=this._squareVertices,e=this._renderCmd._anchorPointInPoints;if(this._rackLength!=t[2].x-e.x||t[3].y!=this._rackWidth/2-e.y){t[1].x=t[1].y=t[3].y=0,t[0].x=t[2].x=.1*this._rackLength,t[2].y=.5*this._rackWidth,t[0].y=-t[2].y,t[3].x=this._rackLength;for(var i=0;i<t.length;i++)t[i].x+=e.x,t[i].y+=e.y;this._renderCmd.updateDebugPoint(t)}},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new o(this):new a(this)}});r.create=function(t,e){return new ccui.BoneNode(t,e)};var o=function(){var e=function(t){this._rootCtor(t),this._debug=!1,this._color=cc.color.WHITE,this._drawNode=new cc.DrawNode},i=e.prototype=Object.create(t.CanvasRenderCmd.prototype);return i.constructor=e,i.updateDebugPoint=function(t){this._drawNode.clear(),this._drawNode.drawPoly(t,this._color,0,this._color)},i.transform=function(t,e){var i=this._node._rootSkeleton;this.originTransform(t,e),i&&i._renderCmd._debug&&this._drawNode._renderCmd.transform(this)},e}(),a=function(){var e=function(t){this._rootCtor(t),this._debug=!1,this._color=cc.color.WHITE,this._drawNode=new cc.DrawNode},i=e.prototype=Object.create(t.WebGLRenderCmd.prototype);return i.constructor=e,i.updateDebugPoint=function(t){this._drawNode.clear(),this._drawNode.drawPoly(t,this._color,0,this._color)},i.transform=function(t,e){var i=this._node._rootSkeleton;this.originTransform(t,e),i&&i._renderCmd._debug&&this._drawNode._renderCmd.transform(this)},e}();return r}(),ccs.SkeletonNode=function(){var t=ccs.BoneNode,e=t.extend({_subBonesMap:null,_squareVertices:null,_squareColors:null,_noMVPVertices:null,_skinGroupMap:null,_sortedAllBonesDirty:!1,_sortedAllBones:null,_batchedBoneVetices:null,_batchedBoneColors:null,_batchedVeticesCount:null,_batchBoneCommand:null,_subOrderedAllBones:null,ctor:function(){this._squareVertices=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],this._rootSkeleton=this,t.prototype.ctor.call(this),this._subBonesMap={},this._subOrderedAllBones=[],this._skinGroupMap={},this._rackLength=this._rackWidth=20,this._updateVertices()},getBoneNode:function(t){return(t=this._subBonesMap[t])?t:null},getAllSubBonesMap:function(){return this._subBonesMap},changeSkins:function(t){var e,i;if("object"==typeof t)for(i in t){e=t[i];var n=this.getBoneNode(i);null!==n&&n.displaySkin(e,!0)}else(t=this._suitMap[t])&&this.changeSkins(t,!0)},addSkinGroup:function(t,e){this._skinGroupMap[t]=e},getBoundingBox:function(){var t,e,i,n=0;t=e=i=n;var s=this.getVisibleSkinsRect(),r=!0;0===s.x&&0===s.y&&0===s.width&&0===s.height||(t=cc.rectGetMinX(s),e=cc.rectGetMinY(s),i=cc.rectGetMaxX(s),n=cc.rectGetMaxY(s),r=!1);for(var o,a=this.getAllSubBones(),c=0;c<a.length;c++)o=a[c],(0!==(o=cc.rectApplyAffineTransform(o.getVisibleSkinsRect(),o.getNodeToParentTransform(o.getRootSkeletonNode()))).x||0!==o.y||0!==o.width||0!==o.height)&&(r?(t=cc.rectGetMinX(o),e=cc.rectGetMinY(o),i=cc.rectGetMaxX(o),n=cc.rectGetMaxY(o),r=!1):(t=Math.min(cc.rectGetMinX(o),t),e=Math.min(cc.rectGetMinY(o),e),i=Math.max(cc.rectGetMaxX(o),i),n=Math.max(cc.rectGetMaxY(o),n)));return s.x=t,s.y=e,s.width=i-t,s.height=n-e,cc.rectApplyAffineTransform(s,this.getNodeToParentTransform())},_visit:function(t){var e=this._renderCmd;if(t=t||e.getParentRenderCmd(),this._visible){var i,n;if(e._syncStatus(t),0!==this._children.length)for(t=0;t<this._children.length;t++)(i=this._children[t]).visit(this);for(this._checkSubBonesDirty(),i=this._subOrderedAllBones,t=0;t<i.length;t++)(n=i[t])._visitSkins();if(e._debug)for(t=0;t<i.length;t++)n=i[t]._renderCmd,cc.renderer.pushRenderCommand(n._drawNode._renderCmd);e._dirtyFlag=0}else e._propagateFlagsDown(t)},_checkSubBonesDirty:function(){this._subBonesDirty&&(this._updateOrderedAllbones(),this._subBonesDirty=!1),this._subBonesOrderDirty&&(this._sortOrderedAllBones(),this._subBonesOrderDirty=!1)},_updateOrderedAllbones:function(){this._subOrderedAllBones.length=0;for(var t,e=[],i=this._childBones,n=0;n<i.length;n++)(t=i[n]).isVisible()&&e.push(t);for(;0<e.length;)for((i=(n=e.pop())._renderCmd)._syncStatus(i.getParentRenderCmd()),this._subOrderedAllBones.push(n),i=n.getChildBones(),n=0;n<i.length;n++)(t=i[n]).isVisible()&&e.push(t)},_sortOrderedAllBones:function(){this._sortArray(this._subOrderedAllBones)},_updateVertices:function(){var t=this._squareVertices,e=this._renderCmd._anchorPointInPoints;if(this._rackLength!=t[6].x-e.x||this._rackWidth!=t[3].y-e.y){var i=.5*this._rackLength,n=.5*this._rackWidth,s=.25*i,r=.25*n;for(t[5].y=t[2].y=t[1].y=t[6].y=t[0].x=t[4].x=t[7].x=t[3].x=0,t[5].x=-i,t[0].y=-n,t[6].x=i,t[3].y=n,t[1].x=s,t[7].y=r,t[2].x=-s,t[4].y=-r,i=0;i<t.length;i++)t[i].x+=e.x,t[i].y+=e.y}},_updateAllDrawBones:function(){for(var t in this._subDrawBones={},this._subBonesMap){var e=this._subBonesMap[t];e.isVisible()&&e.isDebugDrawEnabled()&&this._subDrawBones.push(e)}this._sortArray(this._sortedAllBones),this._subDrawBones=!1}});return e.create=function(){return new e},e}(),ccs._load=function(){var t=function(t,n,r){var o,a,c=cc.loader.getRes(t);return c?"json"!==(o=((o=t.match(i))&&o[1]?o[1]:null).toLocaleLowerCase())&&"exportjson"!==o?cc.log("%s load error, must be json file",t):(n?a=e[n]:c.widgetTree?a=e.ccui:c.nodeTree||c.Content&&c.Content.Content?a=e.timeline:c.gameobjects&&(a=e.scene),a?!(n=c.version||c.Version)&&c.armature_data?(cc.warn("%s is armature. please use:",t),cc.warn("    ccs.armatureDataManager.addArmatureFileInfoAsync(%s);",t),cc.warn("    var armature = new ccs.Armature('name');"),new cc.Node):(a=s(a,n))?a.parse(t,c,r)||null:(cc.log("Can't find the parser : %s",t),new cc.Node):(cc.log("Can't find the parser : %s",t),new cc.Node)):cc.log("%s does not exist",t)},e={ccui:{},timeline:{},action:{},scene:{}};t.registerParser=function(t,i,n){if(!t||!i||!n)return cc.log("register parser error");e[t]||(e[t]={}),e[t][i]=n},t.getParser=function(t,i){return t&&i?e[t]?e[t][i]:void 0:t?e[t]:e};var i=/\.([^\.]+)$/,n=/([^\.](\.\*)?)*$/,s=function(t,e){return t[e]?t[e]:"*"===e?null:s(t,e.replace(n,"*"))};return t}(),ccs._parser=cc.Class.extend({ctor:function(){this.parsers={}},_dirnameReg:/\S*\//,_dirname:function(t){return(t=t.match(this._dirnameReg))&&t[0]?t[0]:""},getClass:function(t){return t.classname},getNodeJson:function(t){return t.widgetTree},parse:function(t,e,i){i=i||this._dirname(t),this.pretreatment(e,i);var n=this.parseNode(this.getNodeJson(e),i,t);return n&&this.deferred(e,i,n,t),n},pretreatment:function(t,e,i){},deferred:function(t,e,i,n){},parseNode:function(t,e){var i=this.parsers[this.getClass(t)],n=null;return i?n=i.call(this,t,e):cc.log("Can't find the parser : %s",this.getClass(t)),n},registerParser:function(t,e){this.parsers[t]=e}}),ccs.load=function(t,e){var i={node:null,action:null};return i.node=ccs._load(t,null,e),i.action=ccs._load(t,"action",e),i.action&&-1===i.action.tag&&i.node&&(i.action.tag=i.node.tag),i},ccs.load.validate={},ccs.load.preload=!0,ccs.loadWithVisibleSize=function(t,e){var i=ccs.load(t,e),n=cc.director.getVisibleSize();return i.node&&n&&(i.node.setContentSize(n.width,n.height),ccui.helper.doLayout(i.node)),i},ccs.actionTimelineCache={createAction:function(t){return ccs._load(t,"action")}},ccs.csLoader={createNode:function(t){return ccs._load(t)}},cc.loader.register(["json"],{load:function(t,e,i,n){cc.loader.loadJson(t,(function(t,i){var s=cc.path;if(i&&i.Content&&i.Content.Content.UsedResources){for(var r,o=i.Content.Content.UsedResources,a=s.dirname(e),c=[],h=0;h<o.length;h++)!ccs.load.preload&&/\.(png|jpg$)/.test(o[h])||(r=s.join(a,o[h]),r=s._normalize(r),ccs.load.validate[r]||(ccs.load.validate[r]=!0,c.push(r)));cc.loader.load(c,(function(){n(t,i)}))}else n(t,i)}))}}),function(t,e){var i=new(ccs._parser.extend({getNodeJson:function(t){return t},parseNode:function(t,e){var i=this.parsers[this.getClass(t)],n=null;return i?n=i.call(this,t,e):cc.log("Can't find the parser : %s",this.getClass(t)),n},deferred:function(t,e,i,n){ccs.triggerManager.parse(t.Triggers||[]),ccs.sceneReader&&(ccs.sceneReader._node=i)},setPropertyFromJsonDict:function(t,e){var i=cc.isUndefined(e.x)?0:e.x,n=cc.isUndefined(e.y)?0:e.y;t.setPosition(i,n),i=Boolean(cc.isUndefined(e.visible)?1:e.visible),t.setVisible(i),i=cc.isUndefined(e.objecttag)?-1:e.objecttag,t.setTag(i),i=cc.isUndefined(e.zorder)?0:e.zorder,t.setLocalZOrder(i),i=cc.isUndefined(e.scalex)?1:e.scalex,n=cc.isUndefined(e.scaley)?1:e.scaley,t.setScaleX(i),t.setScaleY(n),i=cc.isUndefined(e.rotation)?0:e.rotation,t.setRotation(i),t.setName(e.name||"")}}));i.parseChild=function(t,e,i){for(var n=0;n<e.length;n++){var s,r=e[n];r&&(s=this.parseNode(r,i)),s&&t.addChild(s)}};var n={CCSprite:function(t,e,i){var n=new cc.Sprite;return r(e.fileData,i,(function(t,e){if(0===e)n.setTexture(t);else if(1===e){var i=cc.spriteFrameCache.getSpriteFrame(t);n.setSpriteFrame(i)}})),e=new ccs.ComRender(n,"CCSprite"),t.addComponent(e),e},CCTMXTiledMap:function(t,e,i){var n=null;return r(e.fileData,i,(function(t,e){0===e&&(n=new cc.TMXTiledMap(t))})),e=new ccs.ComRender(n,"CCTMXTiledMap"),t.addComponent(e),e},CCParticleSystemQuad:function(t,e,i){var n=null;return r(e.fileData,i,(function(t,e){0===e?n=new cc.ParticleSystem(t):cc.log("unknown resourcetype on CCParticleSystemQuad!"),n.setPosition(0,0)})),e=new ccs.ComRender(n,"CCParticleSystemQuad"),t.addComponent(e),e},CCArmature:function(t,e,i){var n=null;if(r(e.fileData,i,(function(t,e){if(0===e){var i=cc.loader.getRes(t);i||cc.log("Please load the resource [%s] first!",t),i=i.armature_data[0].name,ccs.armatureDataManager.addArmatureFileInfo(t),n=new ccs.Armature(i)}})),n)return i=new ccs.ComRender(n,"CCArmature"),t.addComponent(i),(t=e.selectedactionname)&&n.getAnimation()&&n.getAnimation().play(t),i},CCComAudio:function(t,e,i){var n=null;r(e.fileData,i,(function(i,s){if(0===s){(n=new ccs.ComAudio).preloadEffect(i);var r=e.name;r&&n.setName(r),t.addComponent(n)}}))},CCComAttribute:function(t,e,i){var n=null;return r(e.fileData,i,(function(e,i){0===i?(n=new ccs.ComAttribute,""!==e&&n.parse(e),t.addComponent(n)):cc.log("unknown resourcetype on CCComAttribute!")})),n},CCBackgroundAudio:function(t,e,i){var n=null;r(e.fileData,i,(function(i,s){if(0===s){(n=new ccs.ComAudio).preloadBackgroundMusic(i),n.setFile(i);var r=Boolean(e.loop||0);n.setLoop(r);var o=e.name;o&&n.setName(o),t.addComponent(n),n.playBackgroundMusic(i,r)}}))},GUIComponent:function(t,e,i){var n=null;return r(e.fileData,i,(function(t,e){n=ccs._load(t,"ccui")})),e=new ccs.ComRender(n,"GUIComponent"),t.addComponent(e),e},CCScene:function(){}},s={},r=function(t,e,i){if(null!=t){var n=t.path,r=t.resourceType;t=t.plist,n&&(t&&(cc.loader.getRes(e+t)?(s[e+t]=!0,cc.spriteFrameCache.addSpriteFrames(e+t)):s[e+t]||cc.log("%s need to be preloaded",e+t)),i(0!==r?n:e+n,r))}};i.parseComponents=function(t,e,i){t&&e&&e.forEach((function(e){var s=n[e.classname],r=null;s?r=s(t,e,i):cc.log("Can't find the component parser : %s",e.classname),e=e.name,r&&e&&r.setName(e)}))},i.registerParser("CCNode",(function(t,e){var i=new cc.Node;this.setPropertyFromJsonDict(i,t),this.parseChild.call(this,i,t.gameobjects,e),this.parseComponents(i,t.components,e);var n=t.CanvasSize;return n&&i.setContentSize(cc.size(n._width,n._height)),i})),t.registerParser("scene","*",i)}(ccs._load),function(t,e){var i=Array(50),n=new(e.extend({addSpriteFrame:function(t,e){if(t)for(var i=0;i<t.length;i++)cc.spriteFrameCache.addSpriteFrames(e+t[i])},pretreatment:function(t,e){this.addSpriteFrame(t.textures,e)},parseRecursive:function(t,e){var n,s,r,o,a,c=1,h=null;for(i[0]=t;0<c;)if(c--,s=i[c],i[c]=null,s)if(r=s.classname,n=this.parsers[r]){if((r=new n.object)&&(h||(h=r),o=s.options,this.generalAttributes(r,o),n.handle(r,o,e),this.colorAttributes(r,o),n=s.parent,s.parent=null,n instanceof ccui.PageView?n.addPage(r):n instanceof ccui.ListView?n.pushBackCustomItem(r):n&&(n instanceof ccui.Layout||(r.getPositionType()===ccui.Widget.POSITION_PERCENT&&(o=r._positionPercent,a=n._anchorPoint,r._positionPercent.x=o.x+a.x,r._positionPercent.y=o.y+a.y),o=n._renderCmd._anchorPointInPoints,r._position.x+=o.x,r._position.y+=o.y,r.setNodeDirty()),n.addChild(r)),(s=s.children)&&0<s.length))for(n=s.length-1;0<=n;n--)i[c]=s[n],i[c].parent=r,c++}else cc.log("Can't find the parser : %s",r);return h},parse:function(t,e,i){i=i||this._dirname(t),this.pretreatment(e,i);var n=this.parseRecursive(e.widgetTree,i);return n&&this.deferred(e,i,n,t),n},deferred:function(t,e,i,n){i&&(ccs.actionManager.initWithDictionary(n,t.animation,i),i.setContentSize(t.designWidth,t.designHeight))}}));n.generalAttributes=function(t,e){t._ignoreSize=e.ignoreSize||!0,t._sizeType=e.sizeType||0,t._positionType=e.positionType||0,t._sizePercent.x=e.sizePercentX||0,t._sizePercent.y=e.sizePercentY||0,t._positionPercent.x=e.positionPercentX||0,t._positionPercent.y=e.positionPercentY||0;var i=0,n=0;e.adaptScreen?(i=(n=cc.director.getWinSize()).width,n=n.height):(i=e.width||0,n=e.height||0);var s=e.anchorPointX,r=e.anchorPointY;if(t._anchorPoint.x=isNaN(s)?.5:s,t._anchorPoint.y=isNaN(r)?.5:r,t.setContentSize(i,n),t.setTag(e.tag),t.setActionTag(e.actiontag),t.setTouchEnabled(e.touchAble),t._name=e.name||"default",t._position.x=e.x||0,t._position.y=e.y||0,t._scaleX=e.scaleX||1,t._scaleY=e.scaleY||1,t._rotationX=t._rotationY=e.rotation||0,t._visible=e.visible||!1,t._localZOrder=e.ZOrder||0,null!=e.layoutParameter){switch(i=e.layoutParameter,n=null,isNaN(i.type)?2:i.type){case 1:(n=new ccui.LinearLayoutParameter)._linearGravity=i.gravity||0;break;case 2:(n=new ccui.RelativeLayoutParameter)._relativeLayoutName=i.relativeName,n._relativeWidgetName=i.relativeToName,n._relativeAlign=i.align||0}null!=n&&((s=n._margin).left=i.marginLeft||0,s.top=i.marginTop||0,s.right=i.marginRight||0,s.bottom=i.marginDown||0,t.setLayoutParameter(n))}},n.colorAttributes=function(t,e){null!=(i=null!==e.opacity?e.opacity:255)&&t.setOpacity(i);var i=e.colorR,n=e.colorG,s=e.colorB;t.setColor(cc.color(null==i?255:i,null==n?255:n,null==s?255:s)),t.setFlippedX(e.flipX),t.setFlippedY(e.flipY)};var s=function(t,e,i,n){i&&n(0===e?t+i:i,e)};n.LayoutAttributes=function(t,e,i){var n=0,r=0;e.adaptScreen?(n=(r=cc.director.getWinSize()).width,r=r.height):(n=e.width||0,r=e.height||0),t.setSize(cc.size(n,r)),t.setClippingEnabled(e.clipAble),n=e.backGroundScale9Enable,t.setBackGroundImageScale9Enabled(n);r=e.bgColorR||0;var o=e.bgColorG||0,a=e.bgColorB||0,c=isNaN(e.bgStartColorR)?255:e.bgStartColorR,h=isNaN(e.bgStartColorG)?255:e.bgStartColorG,l=isNaN(e.bgStartColorB)?255:e.bgStartColorB,u=isNaN(e.bgEndColorR)?255:e.bgEndColorR,d=isNaN(e.bgEndColorG)?255:e.bgEndColorG,_=isNaN(e.bgEndColorB)?255:e.bgEndColorB;t.setBackGroundColorVector(cc.p(e.vectorX||0,e.vectorY||0));var g=e.bgColorOpacity||0;t.setBackGroundColorType(e.colorType||0),t.setBackGroundColor(cc.color(c,h,l),cc.color(u,d,_)),t.setBackGroundColor(cc.color(r,o,a)),t.setBackGroundColorOpacity(g),(r=e.backGroundImageData)&&s(i,r.resourceType||0,r.path,(function(e,i){t.setBackGroundImage(e,i)})),n&&(i=e.capInsetsX||0,n=e.capInsetsY||0,r=isNaN(e.capInsetsWidth)?1:e.capInsetsWidth,o=isNaN(e.capInsetsHeight)?1:e.capInsetsHeight,t.setBackGroundImageCapInsets(cc.rect(i,n,r,o))),e.layoutType&&t.setLayoutType(e.layoutType)},n.ButtonAttributes=function(t,e,i){var n=e.scale9Enable;t.setScale9Enabled(n);var r=e.normalData;if(s(i,r.resourceType||0,r.path,(function(e,i){t.loadTextureNormal(e,i)})),r=e.pressedData,s(i,r.resourceType||0,r.path,(function(e,i){t.loadTexturePressed(e,i)})),r=e.disabledData,s(i,r.resourceType||0,r.path,(function(e,i){t.loadTextureDisabled(e,i)})),n){i=e.capInsetsX||0;n=e.capInsetsY||0,r=isNaN(e.capInsetsWidth)?1:e.capInsetsWidth;var o=isNaN(e.capInsetsHeight)?1:e.capInsetsHeight;t.setCapInsets(cc.rect(i,n,r,o)),i=e.scale9Width||0,n=e.scale9Height||0,null!=i&&null!=n&&t.setSize(cc.size(i,n))}(i=e.text||"")&&(t.setTitleText(i),t.setTitleColor(cc.color(null!==e.textColorR?e.textColorR:255,null!==e.textColorG?e.textColorG:255,null!==e.textColorB?e.textColorB:255)),null!=e.fontSize&&t.setTitleFontSize(e.fontSize),e.fontName&&t.setTitleFontName(e.fontName))},n.CheckBoxAttributes=function(t,e,i){var n=e.backGroundBoxData;s(i,n.resourceType||0,n.path,(function(e,i){t.loadTextureBackGround(e,i)}));var r=e.backGroundBoxSelectedData;s(i,r.resourceType||n.resourceType,r.path||n.path,(function(e,i){t.loadTextureBackGroundSelected(e,i)})),n=e.frontCrossData,s(i,n.resourceType||0,n.path,(function(e,i){t.loadTextureFrontCross(e,i)})),r=e.backGroundBoxDisabledData,s(i,r.resourceType||n.resourceType,r.path||n.path,(function(e,i){t.loadTextureBackGroundDisabled(e,i)})),n=e.frontCrossDisabledData,s(i,n.resourceType||0,n.path,(function(e,i){t.loadTextureFrontCrossDisabled(e,i)})),e.selectedState&&t.setSelected(e.selectedState)},n.ImageViewAttributes=function(t,e,i){var n=e.fileNameData;if(s(i,n.resourceType||0,n.path,(function(e,i){t.loadTexture(e,i)})),i=!1,e.scale9Enable&&(i=e.scale9Enable),t.setScale9Enabled(i),i){i=e.scale9Height||0,e.scale9Width&&i&&t.setSize(cc.size(e.scale9Width||0,e.scale9Height||0)),i=e.capInsetsX||0;n=e.capInsetsY||0;var r=isNaN(e.capInsetsWidth)?1:e.capInsetsWidth;e=isNaN(e.capInsetsHeight)?1:e.capInsetsHeight,t.setCapInsets(cc.rect(i,n,r,e))}},n.TextAtlasAttributes=function(t,e,i){var n=e.stringValue,s=e.charMapFileData,r=e.itemWidth,o=e.itemHeight,a=e.startCharMap;if(null!=n&&s&&null!=r&&null!=o&&null!=a)switch(e=e.charMapFileData,e.resourceType||0){case 0:t.setProperty(n,i+e.path,r,o,a);break;case 1:cc.log("Wrong res type of LabelAtlas!")}},n.TextBMFontAttributes=function(t,e,i){var n=e.fileNameData;switch(n.resourceType||0){case 0:t.setFntFile(i+n.path);break;case 1:cc.log("Wrong res type of LabelAtlas!")}t.setString(e.text||"")};var r=/\.ttf$/;n.TextAttributes=function(t,e,i){t.setTouchScaleChangeEnabled(e.touchScaleEnable);var n=e.text||"";n&&t._setString(n),null!=e.fontSize&&t._setFontSize(e.fontSize),null!=(n=e.fontName)&&(cc.sys.isNative?r.test(n)?t.setFontName(cc.path.join(cc.loader.resPath,i,n)):t.setFontName(n):t._setFontName(n.replace(r,""))),i=e.areaHeight||0,e.areaWidth&&i&&(i=cc.size(e.areaWidth,e.areaHeight),t._setTextAreaSize(i)),null!=(i=e.hAlignment||0)&&t._setTextHorizontalAlignment(i),null!=(e=e.vAlignment||0)&&t._setTextVerticalAlignment(e),t._updateUITextContentSize()},n.ListViewAttributes=function(t,e,i){n.ScrollViewAttributes(t,e,i),t.setDirection(e.direction||1),t.setGravity(e.gravity||0),t.setItemsMargin(e.itemMargin||0)},n.LoadingBarAttributes=function(t,e,i){var n=e.textureData;if(s(i,n.resourceType||0,n.path,(function(e,i){t.loadTexture(e,i)})),i=e.scale9Enable,t.setScale9Enabled(i),i){i=e.capInsetsX||0;n=e.capInsetsY||0;var r=isNaN(e.capInsetsWidth)?1:e.capInsetsWidth,o=isNaN(e.capInsetsHeight)?1:e.capInsetsHeight;t.setCapInsets(cc.rect(i,n,r,o)),t.setSize(cc.size(e.width||0,e.height||0))}t.setDirection(e.direction||0),t.setPercent(e.percent||0)},n.PageViewAttributes=n.LayoutAttributes,n.ScrollViewAttributes=function(t,e,i){n.LayoutAttributes(t,e,i),t.setInnerContainerSize(cc.size(null!=e.innerWidth?e.innerWidth:200,null!=e.innerHeight?e.innerHeight:200)),t.setDirection(null!=e.direction?e.direction:1),t.setBounceEnabled(e.bounceEnable)},n.SliderAttributes=function(t,e,i){var n=e.scale9Enable;t.setScale9Enabled(n);var r=e.length,o=(a=e.barFileNameData).resourceType||0,a=a.path;null!=e.barFileName?n&&(s(i,o,a,(function(e,i){t.loadBarTexture(e,i)})),t.setSize(cc.size(r,t.getContentSize().height))):s(i,o,a,(function(e,i){t.loadBarTexture(e,i)})),n=e.ballNormalData,s(i,n.resourceType||0,n.path,(function(e,i){t.loadSlidBallTextureNormal(e,i)})),r=e.ballPressedData,s(i,r.resourceType||n.resourceType,r.path||n.path,(function(e,i){t.loadSlidBallTexturePressed(e,i)})),n=e.ballDisabledData,s(i,n.resourceType||0,n.path,(function(e,i){t.loadSlidBallTextureDisabled(e,i)})),e=e.progressBarData,s(i,e.resourceType||0,e.path,(function(e,i){t.loadProgressBarTexture(e,i)}))},n.TextFieldAttributes=function(t,e,i){var n=e.placeHolder||"";n&&t.setPlaceHolder(n),t.setString(e.text||""),(n=e.fontSize)&&t.setFontSize(n),null!=(n=e.fontName)&&(cc.sys.isNative?r.test(n)?t.setFontName(cc.path.join(cc.loader.resPath,i,n)):t.setFontName(n):t.setFontName(n.replace(r,""))),i=e.touchSizeWidth||0,n=e.touchSizeHeight||0,null!=i&&null!=n&&t.setTouchSize(i,n),i=e.maxLengthEnable,t.setMaxLengthEnabled(i),i&&t.setMaxLength(e.maxLength),i=e.passwordEnable,t.setPasswordEnabled(i),i&&t.setPasswordStyleText(e.passwordStyleText),i=e.areaWidth||0,n=e.areaHeight||0,i&&n&&(i=cc.size(i,n),t.setTextAreaSize(i)),(i=e.hAlignment||0)&&t.setTextHorizontalAlignment(i),(i=e.vAlignment||0)&&t.setTextVerticalAlignment(i),i=isNaN(e.colorR)?255:e.colorR,n=isNaN(e.colorG)?255:e.colorG,e=isNaN(e.colorB)?255:e.colorB,t.setTextColor(cc.color(i,n,e))},n.parsers={Panel:{object:ccui.Layout,handle:n.LayoutAttributes},Button:{object:ccui.Button,handle:n.ButtonAttributes},CheckBox:{object:ccui.CheckBox,handle:n.CheckBoxAttributes},ImageView:{object:ccui.ImageView,handle:n.ImageViewAttributes},LabelAtlas:{object:ccui.TextAtlas,handle:n.TextAtlasAttributes},LabelBMFont:{object:ccui.TextBMFont,handle:n.TextBMFontAttributes},Label:{object:ccui.Text,handle:n.TextAttributes},ListView:{object:ccui.ListView,handle:n.ListViewAttributes},LoadingBar:{object:ccui.LoadingBar,handle:n.LoadingBarAttributes},PageView:{object:ccui.PageView,handle:n.PageViewAttributes},ScrollView:{object:ccui.ScrollView,handle:n.ScrollViewAttributes},Slider:{object:ccui.Slider,handle:n.SliderAttributes},TextField:{object:ccui.TextField,handle:n.TextFieldAttributes}},t.registerParser("ccui","*",n)}(ccs._load,ccs._parser),function(t,e){var i=new(ccs._parser.extend({getNodeJson:function(t){return t.action},parseNode:function(t,e,i){if(!t)return null;var n=this,s=new ccs.ActionTimeline;return s.setDuration(t.duration),s.setTimeSpeed(t.speed||1),t.timelines.forEach((function(t){var i,r=n.parsers[t.frameType];r?i=r.call(n,t,e):cc.log("parser does not exist : %s",t.frameType),i&&s.addTimeline(i),"ColorFrame"===t.frameType&&s.addTimeline(n.parsers.AlphaFrame.call(n,t,e))})),s}}));[{name:"PositionFrame",handle:function(t){var e=new ccs.PositionFrame;return e.setPosition(cc.p(t.x,t.y)),e}},{name:"VisibleFrame",handle:function(t){var e=new ccs.VisibleFrame;return e.setVisible(t.value),e}},{name:"ScaleFrame",handle:function(t){var e=new ccs.ScaleFrame,i=t.y;return e.setScaleX(t.x),e.setScaleY(i),e}},{name:"RotationFrame",handle:function(t){var e=new ccs.RotationFrame;return e.setRotation(t.rotation),e}},{name:"SkewFrame",handle:function(t){var e=new ccs.SkewFrame,i=t.y;return e.setSkewX(t.x),e.setSkewY(i),e}},{name:"RotationSkewFrame",handle:function(t){var e=new ccs.RotationSkewFrame,i=t.y;return e.setSkewX(t.x),e.setSkewY(i),e}},{name:"AnchorFrame",handle:function(t){var e=new ccs.AnchorPointFrame;return e.setAnchorPoint(cc.p(t.x,t.y)),e}},{name:"InnerActionFrame",handle:function(t){var e=new ccs.InnerActionFrame,i=t.startFrame;return e.setInnerActionType(t.innerActionType),e.setStartFrameIndex(i),e}},{name:"ColorFrame",handle:function(t){var e=new ccs.ColorFrame;return e.setColor(cc.color(t.red,t.green,t.blue)),(new ccs.AlphaFrame).setAlpha(t.alpha),e}},{name:"AlphaFrame",handle:function(t){var e=new ccs.AlphaFrame;return e.setAlpha(t.alpha),e}},{name:"TextureFrame",handle:function(t){var e=new ccs.TextureFrame;if(null!=(t=t.value)){var i=t;null==cc.spriteFrameCache.getSpriteFrame(i)&&(i=ccs.csLoader.getJsonPath()+t),e.setTextureName(i)}return e}},{name:"EventFrame",handle:function(t){var e=new ccs.EventFrame;return null!=(t=t.value)&&e.setEvent(t),e}},{name:"ZOrderFrame",handle:function(t){var e=new ccs.ZOrderFrame;return e.setZOrder(t.value),e}}].forEach((function(t){i.registerParser(t.name,(function(e,i){var n=new ccs.Timeline;n.setActionTag(e.actionTag);var s=e.frames;return s&&s.length&&s.forEach((function(e){var i=t.handle(e);i.setFrameIndex(e.frameIndex),i.setTween(e.tween),n.addFrame(i)})),n}))})),t.registerParser("action","0.*",i),t.registerParser("action","1.*",i)}(ccs._load),function(t,e){var i=new(ccs._parser.extend({getNodeJson:function(t){return t.Content.Content.Animation},parseNode:function(t,e,i){if(!t)return null;var n=this,s=new ccs.ActionTimeline;return s.setDuration(t.Duration),s.setTimeSpeed(t.Speed||1),t.Timelines.forEach((function(t){var i,r=n.parsers[t.Property];r?i=r.call(n,t,e):cc.log("parser does not exist : %s",t.Property),i&&s.addTimeline(i)})),s},deferred:function(t,e,i,n){for(e=(t=t.Content.Content.AnimationList)?t.length:0,n=0;n<e;n++){var s=t[n],r={name:null,startIndex:null,endIndex:null};r.name=s.Name,r.startIndex=s.StartIndex,r.endIndex=s.EndIndex,i.addAnimationInfo(r)}}}));[{name:"Position",handle:function(t){var e=new ccs.PositionFrame;return e.setPosition(cc.p(t.X,t.Y)),e}},{name:"VisibleForFrame",handle:function(t){var e=new ccs.VisibleFrame;return e.setVisible(t.Value),e}},{name:"Scale",handle:function(t){var e=new ccs.ScaleFrame,i=t.Y;return e.setScaleX(t.X),e.setScaleY(i),e}},{name:"Rotation",handle:function(t){var e=new ccs.RotationFrame;return e.setRotation(t.Rotation||t.Value||0),e}},{name:"Skew",handle:function(t){var e=new ccs.SkewFrame,i=t.Y;return e.setSkewX(t.X),e.setSkewY(i),e}},{name:"RotationSkew",handle:function(t){var e=new ccs.RotationSkewFrame,i=t.Y;return e.setSkewX(t.X),e.setSkewY(i),e}},{name:"Anchor",handle:function(t){var e=new ccs.AnchorPointFrame;return e.setAnchorPoint(cc.p(t.X,t.Y)),e}},{name:"AnchorPoint",handle:function(t){var e=new ccs.AnchorPointFrame;return e.setAnchorPoint(cc.p(t.X,t.Y)),e}},{name:"InnerAction",handle:function(t){var e=new ccs.InnerActionFrame,i=t.StartFrame;return e.setInnerActionType(t.InnerActionType),e.setStartFrameIndex(i),e}},{name:"CColor",handle:function(t){var e=new ccs.ColorFrame;return(t=t.Color)||(t={}),t.R=void 0===t.R?255:t.R,t.G=void 0===t.G?255:t.G,t.B=void 0===t.B?255:t.B,e.setColor(cc.color(t.R,t.G,t.B)),e}},{name:"Alpha",handle:function(t){var e=new ccs.AlphaFrame;return e.setAlpha(t.Value),e}},{name:"FileData",handle:function(t,e){var i,n,s,r;return i=new ccs.TextureFrame,null!=(n=t.TextureFile)&&(s=n.Plist,n=n.Path,!(r=cc.spriteFrameCache.getSpriteFrame(n))&&s&&(cc.loader.getRes(e+s)?(cc.spriteFrameCache.addSpriteFrames(e+s),r=cc.spriteFrameCache.getSpriteFrame(n)):cc.log("%s need to be preloaded",e+s)),null==r&&(n=e+n),i.setTextureName(n)),i}},{name:"FrameEvent",handle:function(t){var e=new ccs.EventFrame;return null!=(t=t.Value)&&e.setEvent(t),e}},{name:"ZOrder",handle:function(t){var e=new ccs.ZOrderFrame;return e.setZOrder(t.Value),e}},{name:"ActionValue",handle:function(t){var e=new ccs.InnerActionFrame,i=t.InnerActionType,n=t.CurrentAniamtionName,s=t.SingleFrameIndex;return void 0!==(t=t.FrameIndex)&&e.setFrameIndex(t),e.setInnerActionType(ccs.InnerActionType[i]),e.setSingleFrameIndex(s),e.setEnterWithName(!0),n&&e.setAnimationName(n),e}},{name:"BlendFunc",handle:function(t){var e=new ccs.BlendFuncFrame;return(t=t.BlendFunc)&&void 0!==t.Src&&void 0!==t.Dst&&e.setBlendFunc(new cc.BlendFunc(t.Src,t.Dst)),e}}].forEach((function(t){i.registerParser(t.name,(function(e,i){var n=new ccs.Timeline;n.setActionTag(e.ActionTag);var s=e.Frames;return s&&s.length&&s.forEach((function(e){var s=t.handle(e,i);s.setFrameIndex(e.FrameIndex),s.setTween(null==e.Tween||e.Tween),(e=e.EasingData)&&function(t,e){t.setTweenType(e.Type);var i=e.Points,n=[];i&&(i.forEach((function(t){n.push(t.X),n.push(t.Y)})),t.setEasingParams(n))}(s,e),n.addFrame(s)})),n}))})),t.registerParser("action","2.*",i),t.registerParser("action","*",i)}(ccs._load),function(t,e){var i={},n=new(e.extend({getNodeJson:function(t){return t.nodeTree},addSpriteFrame:function(t,e,n){if(t&&e&&t.length===e.length)for(var s=0;s<t.length;s++){var r=n+t[s];cc.loader.getRes(r)||i[r]?i[r]=!0:cc.log("%s need to be preloaded",r),cc.spriteFrameCache.addSpriteFrames(r,n+e[s])}},pretreatment:function(t,e,i){this.addSpriteFrame(t.textures,t.texturesPng,e)}}));n.generalAttributes=function(t,e){var i=null!=e.width?e.width:0,n=null!=e.height?e.height:0,s=null!=e.x?e.x:0,r=null!=e.y?e.y:0,o=null!=e.scaleX?e.scaleX:1,a=null!=e.scaleY?e.scaleY:1,c=null!=e.rotation?e.rotation:0,h=null!=e.rotationSkewX?e.rotationSkewX:0,l=null!=e.rotationSkewY?e.rotationSkewY:0,u=null!=e.skewX?e.skewX:0,d=null!=e.skewY?e.skewY:0,_=null!=e.anchorPointX?e.anchorPointX:.5,g=null!=e.anchorPointY?e.anchorPointY:.5,f=null!=e.opacity?e.opacity:255,p=null!=e.colorR?e.colorR:255,m=null!=e.colorG?e.colorG:255,T=null!=e.colorB?e.colorB:255,S=null!=e.colorR?e.colorR:0,y=null!=e.tag?e.tag:0,C=null!=e.actionTag?e.actionTag:0,E=null==e.visible||e.visible;0==s&&0==r||t.setPosition(cc.p(s,r)),1!=o&&t.setScaleX(o),1!=a&&t.setScaleY(a),0!=c&&t.setRotation(c),0!=h&&t.setRotationX(h),0!=l&&t.setRotationY(l),0!=u&&t.setSkewX(u),0!=d&&t.setSkewY(d),.5==_&&.5==g||t.setAnchorPoint(cc.p(_,g)),0==i&&0==n||t.setContentSize(cc.size(i,n)),0!=S&&t.setLocalZOrder(S),1!=E&&t.setVisible(E),255!=f&&t.setOpacity(f),255==p&&255==m&&255==T||t.setColor(cc.color(p,m,T)),t.setTag(y),t.setUserObject(new ccs.ActionTimelineData(C))},n.parseComponent=function(t,e){if(e)for(var i=0;i<e.length;++i){var n=this.loadComponent(e[i]);n&&t.addComponent(n)}},n.parseChild=function(t,e,i,n){for(t=i.children,i=0;i<t.length;i++){var s=this.parseNode(t[i],n);if(s)if(e instanceof ccui.PageView)s instanceof ccui.Layout&&e.addPage(s);else if(e instanceof ccui.ListView)s instanceof ccui.Widget&&e.pushBackCustomItem(s);else{if(!(e instanceof ccui.Layout)&&s instanceof ccui.Widget){if(s.getPositionType()===ccui.Widget.POSITION_PERCENT){var r=s.getPositionPercent(),o=e.getAnchorPoint();s.setPositionPercent(cc.p(r.x+o.x,r.y+o.y))}r=e.getAnchorPointInPoints(),s.setPosition(cc.p(s.getPositionX()+r.x,s.getPositionY()+r.y))}e.addChild(s)}}},n.initNode=function(t){var e=new cc.Node;return this.generalAttributes(e,t),e},n.initSubGraph=function(t){var e=(e=t.fileName)&&""!==e?this.createNode(e):new ccs.Node;return this.generalAttributes(e,t),e},n.initSprite=function(t,e){var i;null!=(i=t.fileName)?(i=(n=cc.spriteFrameCache.getSpriteFrame(i))?ccs.Sprite.createWithSpriteFrame(n):new ccs.Sprite(e+i))||(i=new cc.Sprite,cc.log("filePath is empty. Create a sprite with no texture")):i=new ccs.Sprite;this.generalAttributes(i,t);var n=t.flipX,s=t.flipY;return 0!=n&&i.setFlippedX(n),0!=s&&i.setFlippedY(s),i},n.initParticle=function(t,e){var i=t.tmxFile,n=new cc.ParticleSystemQuad(t.plistFile);return n.setTotalParticles(i),this.generalAttributes(n,t),n},n.initTMXTiledMap=function(t,e){var i=t.tmxFile,n=t.tmxString,s=t.resourcePath,r=null;return i&&""!==i?r=new cc.TMXTiledMap(i):n&&""!==n&&s&&""!==s&&(r=new cc.TMXTiledMap(n,s)),r};var s=t.getParser("ccui")["*"];n.initWidget=function(t,e){var i=t.classname;if(!(n=s.parsers[i]))return cc.log("%s parser is not found",i);if(i=n.call(s,t,e)){var n=t.rotationSkewX,r=t.rotationSkewY,o=t.skewX,a=t.skewY;0!=n&&i.setRotationX(n),0!=r&&i.setRotationY(r),0!=o&&i.setSkewX(o),0!=a&&i.setSkewY(a),i.setUserObject(new ccs.ActionTimelineData(t.actionTag))}return i},[{name:"Node",handle:n.initNode},{name:"SubGraph",handle:n.initSubGraph},{name:"Sprite",handle:n.initSprite},{name:"Particle",handle:n.initParticle},{name:"TMXTiledMap",handle:n.initTMXTiledMap},{name:"Widget",handle:n.initWidget},{name:"Panel",handle:n.initWidget},{name:"Button",handle:n.initWidget},{name:"CheckBox",handle:n.initWidget},{name:"ImageView",handle:n.initWidget},{name:"LabelAtlas",handle:n.initWidget},{name:"LabelBMFont",handle:n.initWidget},{name:"Label",handle:n.initWidget},{name:"ListView",handle:n.initWidget},{name:"LoadingBar",handle:n.initWidget},{name:"PageView",handle:n.initWidget},{name:"ScrollView",handle:n.initWidget},{name:"Slider",handle:n.initWidget},{name:"TextField",handle:n.initWidget}].forEach((function(t){n.registerParser(t.name,(function(e,i,n){var s=t.handle.call(this,e.options);return this.parseComponent(s,e.components),this.parseChild(i,s,e,n),s}))})),t.registerParser("timeline","0.*",n),t.registerParser("timeline","1.*",n)}(ccs._load,ccs._parser),function(t,e){var i=new(ccs._parser.extend({parse:function(t,e,i){i=void 0!==i?i:this._dirname(t),this.pretreatment(e,i,t);var n=this.parseNode(this.getNodeJson(e),i);return this.deferred(e,i,n,t),n},getNodeJson:function(t){return(t=t.Content).ObjectData?t.ObjectData:t.Content.ObjectData},getClass:function(t){return t.ctype}})),n=function(t,e){return void 0===t?e:t};i.generalAttributes=function(t,e){null!=e.Name&&t.setName(e.Name),null==(i=e.Position)||null==i.X&&null==i.Y||t.setPosition(cc.p(i.X||0,i.Y||0)),null!=(i=e.Scale)&&(null!=i.ScaleX&&t.setScaleX(i.ScaleX),null!=i.ScaleY&&t.setScaleY(i.ScaleY)),null!=(i=e.RotationSkewX)&&t.setRotationX(i),i=e.RotationSkewY,null!=e.RotationSkewY&&t.setRotationY(i),null!=(i=e.AnchorPoint)&&(null==i.ScaleX&&(i.ScaleX=0),null==i.ScaleY&&(i.ScaleY=0),.5==i.ScaleX&&.5==i.ScaleY||t.setAnchorPoint(cc.p(i.ScaleX,i.ScaleY))),null!=e.ZOrder&&t.setLocalZOrder(e.ZOrder),i=n(e.VisibleForFrame,!0),t.setVisible(i),(i=e.Size)&&u(t,i),null!=e.Alpha&&t.setOpacity(e.Alpha),t.setTag(e.Tag||0);var i=e.ActionTag||0,s=new ccs.ComExtensionData,o=e.UserData;void 0!==o&&s.setCustomProperty(o),s.setActionTag(i),t.getComponent("ComExtensionData")&&t.removeComponent("ComExtensionData"),t.addComponent(s),t.setCascadeColorEnabled(!0),t.setCascadeOpacityEnabled(!0),r(t,e)},i.parseChild=function(t,e,i){if(t&&e)for(var n=0;n<e.length;n++){var s=this.parseNode(e[n],i);if(s)if(t instanceof ccui.PageView)s instanceof ccui.Layout&&t.addPage(s);else if(t instanceof ccui.ListView)s instanceof ccui.Widget&&t.pushBackCustomItem(s);else{if(!(t instanceof ccui.Layout)&&s instanceof ccui.Widget&&s.getPositionType()===ccui.Widget.POSITION_PERCENT){var r=s.getPositionPercent(),o=t.getAnchorPoint();s.setPositionPercent(cc.p(r.x+o.x,r.y+o.y))}t.addChild(s)}}},i.initSingleNode=function(t){var e=new cc.Node;return this.generalAttributes(e,t),null!=(t=t.CColor)&&e.setColor(l(t)),e},i.initSprite=function(t,e){var i=new cc.Sprite;h(t.FileData,e,(function(t,e){if(0===e)i.setTexture(t);else if(1===e){var n=cc.spriteFrameCache.getSpriteFrame(t);n&&i.setSpriteFrame(n)}}));var n=t.BlendFunc;if(t.BlendFunc){var s=cc.BlendFunc.ALPHA_PREMULTIPLIED;void 0!==n.Src&&(s.src=n.Src),void 0!==n.Dst&&(s.dst=n.Dst),i.setBlendFunc(s)}return t.FlipX&&i.setFlippedX(!0),t.FlipY&&i.setFlippedY(!0),this.generalAttributes(i,t),null!=(n=t.CColor)&&i.setColor(l(n)),i},i.initParticle=function(t,e){var i,n=this;return h(t.FileData,e,(function(e,s){cc.loader.getRes(e)||cc.log("%s need to be preloaded",e),i=new cc.ParticleSystem(e),n.generalAttributes(i,t),i.setPositionType(cc.ParticleSystem.TYPE_GROUPED),!cc.sys.isNative&&i.setDrawMode(cc.ParticleSystem.TEXTURE_MODE);var r=t.BlendFunc;if(t.BlendFunc){var o=cc.BlendFunc.ALPHA_PREMULTIPLIED;void 0!==r.Src&&(o.src=r.Src),void 0!==r.Dst&&(o.dst=r.Dst),i.setBlendFunc(o)}})),i},i.widgetAttributes=function(t,e,i){t.setCascadeColorEnabled(!0),t.setCascadeOpacityEnabled(!0),t.setUnifySizeEnabled(!1),t.ignoreContentAdaptWithSize(!1),!i&&u(t,e.Size),(i=e.Name)&&t.setName(i),i=e.ActionTag||0,t.setActionTag(i);var o=new ccs.ComExtensionData,a=e.UserData;void 0!==a&&o.setCustomProperty(a),o.setActionTag(i),t.getComponent("ComExtensionData")&&t.removeComponent("ComExtensionData"),t.addComponent(o),(i=e.RotationSkewX)&&t.setRotationX(i),(i=e.RotationSkewY)&&t.setRotationY(i),e.FlipX&&t.setFlippedX(!0),e.FlipY&&t.setFlippedY(!0),null!=(i=e.zOrder)&&t.setLocalZOrder(i),i=n(e.VisibleForFrame,!0),t.setVisible(i),null!=(i=e.Alpha)&&t.setOpacity(i),t.setTag(e.Tag||0),t.setTouchEnabled(e.TouchEnable||!1),null!=(i=e.CallBackType)&&t.setCallbackType(i),(i=e.CallBackName)&&t.setCallbackName(i),null!=(i=e.Position)&&t.setPosition(i.X||0,i.Y||0),null!=(o=e.Scale)&&(i=n(o.ScaleX,1),o=n(o.ScaleY,1),t.setScaleX(i),t.setScaleY(o)),null!=(i=e.AnchorPoint)&&t.setAnchorPoint(i.ScaleX||0,i.ScaleY||0),null!=(i=e.CColor)&&t.setColor(l(i)),r(t,e),s(t,e)};var s=function(t,e){var i=e.CallBackType,n=e.CallBackName,s=function(e){"function"==typeof t[n]&&t[n](e)};"Click"===i?t.addClickEventListener(s):"Touch"===i?t.addTouchEventListener(s):"Event"===i&&t.addCCSEventListener(s)},r=function(t,e){var i=ccui.LayoutComponent.bindLayoutComponent(t);if(i){var n=e.PositionPercentXEnable||e.PositionPercentXEnabled||!1,s=e.PositionPercentYEnable||e.PositionPercentYEnabled||!1,r=0,o=0;null!=(f=e.PrePosition)&&(r=f.X||0,o=f.Y||0);var a=e.PercentWidthEnable||e.PercentWidthEnabled||!1,c=e.PercentHeightEnable||e.PercentHeightEnabled||!1,h=0,l=0,u=e.PreSize;null!=f&&(h=u.X||0,l=u.Y||0);var d=e.StretchWidthEnable||!1,_=e.StretchHeightEnable||!1,g=e.HorizontalEdge,f=e.VerticalEdge,p=(u=e.LeftMargin||0,e.RightMargin||0),m=e.TopMargin||0,T=e.BottomMargin||0;i.setPositionPercentXEnabled(n),i.setPositionPercentYEnabled(s),i.setPositionPercentX(r),i.setPositionPercentY(o),i.setPercentWidthEnabled(a),i.setPercentHeightEnabled(c),i.setPercentWidth(h),i.setPercentHeight(l),i.setPercentWidthEnabled(a||c),i.setStretchWidthEnabled(d),i.setStretchHeightEnabled(_),n=ccui.LayoutComponent.horizontalEdge.NONE,"LeftEdge"===g?n=ccui.LayoutComponent.horizontalEdge.LEFT:"RightEdge"===g?n=ccui.LayoutComponent.horizontalEdge.RIGHT:"BothEdge"===g&&(n=ccui.LayoutComponent.horizontalEdge.CENTER),i.setHorizontalEdge(n),n=ccui.LayoutComponent.verticalEdge.NONE,"TopEdge"===f?n=ccui.LayoutComponent.verticalEdge.TOP:"BottomEdge"===f?n=ccui.LayoutComponent.verticalEdge.BOTTOM:"BothEdge"===f&&(n=ccui.LayoutComponent.verticalEdge.CENTER),i.setVerticalEdge(n),i.setTopMargin(m),i.setBottomMargin(T),i.setLeftMargin(u),i.setRightMargin(p),i.setVerticalEdge(n),i.setTopMargin(m),i.setBottomMargin(T),i.setLeftMargin(u),i.setRightMargin(p)}},o=function(t,e,i,n){2===t.getBackGroundColorType()?(i=i||{},n=n||{},t.setBackGroundColor(l(i),l(n))):(e=e||{},t.setBackGroundColor(l(e)))},a=function(t,e){t.setBackGroundColorVector(cc.p(e.ScaleX||0,e.ScaleY||0))};i.initPanel=function(t,e){var i=new ccui.Layout;this.widgetAttributes(i,t);var s=t.ClipAble||!1;null!=s&&i.setClippingEnabled(s),s=n(t.ComboBoxIndex,0),i.setBackGroundColorType(s),null!=(s=n(t.BackColorAlpha,255))&&i.setBackGroundColorOpacity(s),null!=(s=t.Scale9Enable)&&i.setBackGroundImageScale9Enabled(s);var r=n(t.Alpha,255);return i.setOpacity(r),h(t.FileData,e,(function(t,e){i.setBackGroundImage(t,e)})),s?(i.setBackGroundImageCapInsets(cc.rect(t.Scale9OriginX||0,t.Scale9OriginY||0,t.Scale9Width||0,t.Scale9Height||0)),u(i,t.Size)):i.isIgnoreContentAdaptWithSize()||u(i,t.Size),o(i,t.SingleColor,t.FirstColor,t.EndColor),a(i,t.ColorVector),i},i.initText=function(t,e){var i=new ccui.Text;null!=(s=t.TouchScaleChangeAble)&&i.setTouchScaleChangeEnabled(s),null!=(s=t.LabelText)&&i.setString(s),null!=(s=t.FontSize)&&i.setFontSize(s),null!=(s=t.FontName)&&i.setFontName(s);var s=t.AreaWidth,r=t.areaHeight;switch(s&&r&&i.setTextAreaSize(cc.size(s,r)),s=t.HorizontalAlignmentType||"HT_Left"){case"HT_Right":s=2;break;case"HT_Center":s=1;break;default:s=0}switch(i.setTextHorizontalAlignment(s),s=t.VerticalAlignmentType||"VT_Top"){case"VT_Bottom":s=2;break;case"VT_Center":s=1;break;default:s=0}return i.setTextVerticalAlignment(s),null!=(s=t.FontResource)&&(null!=(s=s.Path)&&(s=cc.sys.isNative?cc.path.join(cc.loader.resPath,e,s):(s=s.match(/([^\/]+)\.(\S+)/))?s[1]:"",i.setFontName(s))),t.OutlineEnabled&&t.OutlineColor&&i.enableOutline&&i.enableOutline(l(t.OutlineColor),n(t.OutlineSize,1)),t.ShadowEnabled&&t.ShadowColor&&i.enableShadow&&i.enableShadow(l(t.ShadowColor),cc.size(n(t.ShadowOffsetX,2),n(t.ShadowOffsetY,-2)),t.ShadowBlurRadius||0),null!=(s=t.IsCustomSize)&&i.ignoreContentAdaptWithSize(!s),i.setUnifySizeEnabled(!1),s=t.CColor,t.CColor=null,i.setTextColor(l(s)),this.widgetAttributes(i,t,i.isIgnoreContentAdaptWithSize()),t.CColor=s,i},i.initButton=function(t,e){var i=new ccui.Button;h(t.NormalFileData,e,(function(t,e){i.loadTextureNormal(t,e)})),h(t.PressedFileData,e,(function(t,e){i.loadTexturePressed(t,e)})),h(t.DisabledFileData,e,(function(t,e){i.loadTextureDisabled(t,e)}));var s=n(t.Scale9Enable,!1);s&&i.setScale9Enabled(s);var r=t.ButtonText;return null!=r&&i.setTitleText(r),null!=(r=t.FontSize)&&i.setTitleFontSize(r),null!=(r=t.FontName)&&i.setTitleFontName(r),null!=(r=t.TextColor)&&i.setTitleColor(l(r)),r=n(t.DisplayState,!0),i.setBright(r),i.setEnabled(r),null!=(r=t.FontResource)&&(null!=(r=r.Path)&&(r=cc.sys.isNative?cc.path.join(cc.loader.resPath,e,r):(r=r.match(/([^\/]+)\.(\S+)/))?r[1]:"",i.setTitleFontName(r))),(r=i.getTitleRenderer())&&t.ShadowEnabled&&t.ShadowColor&&r.enableShadow&&r.enableShadow(l(t.ShadowColor),cc.size(n(t.ShadowOffsetX,2),n(t.ShadowOffsetY,-2)),t.ShadowBlurRadius||0),r&&t.OutlineEnabled&&t.OutlineColor&&r.enableStroke&&r.enableStroke(l(t.OutlineColor),n(t.OutlineSize,1)),this.widgetAttributes(i,t),s&&(i.setUnifySizeEnabled(!1),i.ignoreContentAdaptWithSize(!1),s=cc.rect(t.Scale9OriginX||0,t.Scale9OriginY||0,t.Scale9Width||0,t.Scale9Height||0),i.setCapInsets(s)),u(i,t.Size),i},i.initCheckBox=function(t,e){var i=new ccui.CheckBox;this.widgetAttributes(i,t),[{name:"NormalBackFileData",handle:i.loadTextureBackGround},{name:"PressedBackFileData",handle:i.loadTextureBackGroundSelected},{name:"NodeNormalFileData",handle:i.loadTextureFrontCross},{name:"DisableBackFileData",handle:i.loadTextureBackGroundDisabled},{name:"NodeDisableFileData",handle:i.loadTextureFrontCrossDisabled}].forEach((function(n){h(t[n.name],e,(function(t,e){n.handle.call(i,t,e)}))}));var s=n(t.CheckedState,!1);return i.setSelected(s),s=n(t.DisplayState,!0),i.setBright(s),i.setEnabled(s),i},i.initScrollView=function(t,e){var i=new ccui.ScrollView;this.widgetAttributes(i,t),h(t.FileData,e,(function(t,e){i.setBackGroundImage(t,e)})),i.setClippingEnabled(t.ClipAble||!1);var s=n(t.ComboBoxIndex,0);return i.setBackGroundColorType(s),null!=(s=t.BackColorAlpha)&&i.setBackGroundColorOpacity(s),t.Scale9Enable?(i.setBackGroundImageScale9Enabled(!0),i.setBackGroundImageCapInsets(cc.rect(t.Scale9OriginX||0,t.Scale9OriginY||0,t.Scale9Width||0,t.Scale9Height||0)),u(i,t.Size)):i.isIgnoreContentAdaptWithSize()||u(i,t.Size),o(i,t.SingleColor,t.FirstColor,t.EndColor),a(i,t.ColorVector),s=t.InnerNodeSize,s=cc.size(s.Width||0,s.Height||0),i.setInnerContainerSize(s),s=0,"Vertical"===t.ScrollDirectionType&&(s=1),"Horizontal"===t.ScrollDirectionType&&(s=2),"Vertical_Horizontal"===t.ScrollDirectionType&&(s=3),i.setDirection(s),s=n(t.IsBounceEnabled,!1),i.setBounceEnabled(s),i},i.initImageView=function(t,e){var i=new ccui.ImageView;return h(t.FileData,e,(function(t,e){i.loadTexture(t,e)})),h(t.ImageFileData,e,(function(t,e){i.loadTexture(t,e)})),t.Scale9Enable?(i.setScale9Enabled(!0),i.setUnifySizeEnabled(!1),i.ignoreContentAdaptWithSize(!1),i.setCapInsets(cc.rect(t.Scale9OriginX||0,t.Scale9OriginY||0,t.Scale9Width||0,t.Scale9Height||0))):u(i,t.Size),this.widgetAttributes(i,t),i},i.initLoadingBar=function(t,e){var i=new ccui.LoadingBar;this.widgetAttributes(i,t),h(t.ImageFileData,e,(function(t,e){i.loadTexture(t,e)})),i.setDirection("Right_To_Left"===t.ProgressType?1:0);var s=n(t.ProgressInfo,80);return null!=s&&i.setPercent(s),i},i.initSlider=function(t,e){var i=new ccui.Slider,s=cc.loader;this.widgetAttributes(i,t),[{name:"BackGroundData",handle:i.loadBarTexture},{name:"BallNormalData",handle:i.loadSlidBallTextureNormal},{name:"BallPressedData",handle:i.loadSlidBallTexturePressed},{name:"BallDisabledData",handle:i.loadSlidBallTextureDisabled},{name:"ProgressBarData",handle:i.loadProgressBarTexture}].forEach((function(n){h(t[n.name],e,(function(t,e){0!==e||s.getRes(t)||cc.log("%s need to be preloaded",t),n.handle.call(i,t,e)}))})),i.setPercent(t.PercentInfo||0);var r=n(t.DisplayState,!0);return i.setBright(r),i.setEnabled(r),i},i.initPageView=function(t,e){var i=new ccui.PageView;this.widgetAttributes(i,t),h(t.FileData,e,(function(t,e){i.setBackGroundImage(t,e)})),i.setClippingEnabled(t.ClipAble||!1),t.Scale9Enable&&(i.setBackGroundImageScale9Enabled(!0),i.setBackGroundImageCapInsets(cc.rect(t.Scale9OriginX||0,t.Scale9OriginY||0,t.Scale9Width||0,t.Scale9Height||0)));var s=n(t.ComboBoxIndex,0);return i.setBackGroundColorType(s),o(i,t.SingleColor,t.FirstColor,t.EndColor),a(i,t.ColorVector),null!=(s=t.BackColorAlpha)&&i.setBackGroundColorOpacity(s),u(i,t.Size),i},i.initListView=function(t,e){var i=new ccui.ListView;this.widgetAttributes(i,t),h(t.FileData,e,(function(t,e){i.setBackGroundImage(t,e)})),i.setClippingEnabled(t.ClipAble||!1);var s=n(t.ComboBoxIndex,0);i.setBackGroundColorType(s),s=n(t.BackColorAlpha,255),t.Scale9Enable&&(i.setBackGroundImageScale9Enabled(!0),i.setBackGroundImageCapInsets(cc.rect(t.Scale9OriginX||0,t.Scale9OriginY||0,t.Scale9Width||0,t.Scale9Height||0)));var r=n(t.DirectionType,ccui.ListView.DIR_HORIZONTAL),c=n(t.VerticalType,"Align_Left"),l=n(t.HorizontalType,"Align_Top");return r?"Vertical"===r&&(i.setDirection(ccui.ScrollView.DIR_VERTICAL),""===l?i.setGravity(ccui.ListView.GRAVITY_LEFT):"Align_Right"===l?i.setGravity(ccui.ListView.GRAVITY_RIGHT):"Align_HorizontalCenter"===l&&i.setGravity(ccui.ListView.GRAVITY_CENTER_HORIZONTAL)):(i.setDirection(ccui.ScrollView.DIR_HORIZONTAL),"Align_Bottom"===c?i.setGravity(ccui.ListView.GRAVITY_BOTTOM):"Align_VerticalCenter"===c?i.setGravity(ccui.ListView.GRAVITY_CENTER_VERTICAL):i.setGravity(ccui.ListView.GRAVITY_TOP)),r=n(t.IsBounceEnabled,!1),i.setBounceEnabled(r),i.setItemsMargin(t.ItemMargin||0),null!=(r=t.InnerNodeSize)&&i.setInnerContainerSize(cc.size(r.Widget||0,r.Height||0)),o(i,t.SingleColor,t.FirstColor,t.EndColor),a(i,t.ColorVector),null!=s&&i.setBackGroundColorOpacity(s),u(i,t.Size),i},i.initTextAtlas=function(t,e){var i=new ccui.TextAtlas,n=t.LabelText,s=t.CharWidth,r=t.CharHeight,o=t.StartChar;return h(t.LabelAtlasFileImage_CNB,e,(function(t,e){cc.loader.getRes(t)||cc.log("%s need to be preloaded",t),0===e&&i.setProperty(n,t,s,r,o)})),this.widgetAttributes(i,t),i.ignoreContentAdaptWithSize(!0),i},i.initTextBMFont=function(t,e){var i=new ccui.TextBMFont;return this.widgetAttributes(i,t),h(t.LabelBMFontFile_CNB,e,(function(t,e){cc.loader.getRes(t)||cc.log("%s need to be pre loaded",t),i.setFntFile(t)})),i.setString(t.LabelText),i.ignoreContentAdaptWithSize(!0),i},i.initTextField=function(t,e){var i=new ccui.TextField;t.PasswordEnable&&(i.setPasswordEnabled(!0),i.setPasswordStyleText(t.PasswordStyleText||"*"));var n=t.PlaceHolderText;return null!=n&&i.setPlaceHolder(n),null!=(n=t.FontSize)&&i.setFontSize(n),null!=(n=t.FontName)&&i.setFontName(n),t.MaxLengthEnable&&(i.setMaxLengthEnabled(!0),i.setMaxLength(t.MaxLengthText||0)),this.widgetAttributes(i,t),null!=(n=t.LabelText)&&i.setString(n),null!=(n=t.FontResource)&&(null!=(n=n.Path)&&(n=cc.sys.isNative?cc.path.join(cc.loader.resPath,e,n):(n=n.match(/([^\/]+)\.(\S+)/))?n[1]:"",i.setFontName(n))),i.setUnifySizeEnabled(!1),i.ignoreContentAdaptWithSize(!1),null!=(n=t.CColor)&&i.setTextColor(l(n)),i.isIgnoreContentAdaptWithSize()||(u(i,t.Size),cc.sys.isNative&&i.getVirtualRenderer().setLineBreakWithoutSpace(!0)),i},i.initSimpleAudio=function(t,e){var i=new ccs.ComAudio;i.setLoop(t.Loop||!1),h(t.FileData,e,(function(t,e){i.setFile(t)}))},i.initGameMap=function(t,e){var n=null;return h(t.FileData,e,(function(e,s){0===s&&(n=new cc.TMXTiledMap(e)),i.generalAttributes(n,t)})),n},i.initProjectNode=function(t,e){var n=t.FileData;if(null!=n&&n.Path){if(n=e+n.Path,cc.loader.getRes(n)){if(n=ccs.load(n,e),i.generalAttributes(n.node,t),n.action&&n.node){n.action.tag=n.node.tag;var s=t.InnerActionSpeed;void 0!==s&&n.action.setTimeSpeed(s),n.node.runAction(n.action),n.action.gotoFrameAndPause(0)}return n.node}cc.log("%s need to be preloaded",n)}};i.initArmature=function(t,e){var n=new ccs.Armature,s=t.IsLoop,r=t.IsAutoPlay,o=t.CurrentAnimationName;return h(t.FileData,e,(function(t,e){var i,a,c=cc.loader.getRes(t);c?(i=c.config_file_path,a=c.config_png_path,i.forEach((function(t,e){a[e]&&cc.spriteFrameCache.addSpriteFrames(t,a[e])}))):cc.log("%s need to be preloaded",t),ccs.armatureDataManager.addArmatureFileInfo(t),n.init(function(t){return t&&(t=t.match(/([^\/]+)\.[^\/]+$/))&&t[1]?t[1]:""}(t)),r?n.getAnimation().play(o,-1,s):(n.getAnimation().play(o),n.getAnimation().gotoAndPause(0))})),delete t.AnchorPoint,delete t.Size,i.generalAttributes(n,t),n.setColor(l(t.CColor)),n},i.initBoneNode=function(t,e){var n=new ccs.BoneNode,s=t.Length;return void 0!==s&&n.setDebugDrawLength(s),(s=t.BlendFunc)&&void 0!==s.Src&&void 0!==s.Dst&&n.setBlendFunc(new cc.BlendFunc(s.Src,s.Dst)),i.generalAttributes(n,t),!(s=t.CColor)||void 0===s.R&&void 0===s.G&&void 0===s.B||n.setColor(l(s)),n},i.initSkeletonNode=function(t){var e=new ccs.SkeletonNode;return i.generalAttributes(e,t),!(t=t.CColor)||void 0===t.R&&void 0===t.G&&void 0===t.B||e.setColor(l(t)),e};var c={},h=function(t,e,i){if(null!=t){var n,s=t.Path;n="Default"===t.Type||"Normal"===t.Type?0:1,(t=t.Plist)&&(cc.loader.getRes(e+t)?(c[e+t]=!0,cc.spriteFrameCache.addSpriteFrames(e+t)):c[e+t]||cc.spriteFrameCache.getSpriteFrame(s)||cc.log("%s need to be preloaded",e+t)),0!==n?cc.spriteFrameCache.getSpriteFrame(s)?i(s,n):cc.log("failed to get spriteFrame: %s",s):i(e+s,n)}},l=function(t){if(t)return cc.color(null!=t.R?t.R:255,null!=t.G?t.G:255,null!=t.B?t.B:255,null!=t.A?t.A:255)},u=function(t,e){var i=e.X||0,n=e.Y||0;e&&t.setContentSize(cc.size(i,n))};[{name:"SingleNodeObjectData",handle:i.initSingleNode},{name:"NodeObjectData",handle:i.initSingleNode},{name:"LayerObjectData",handle:i.initSingleNode},{name:"GameNodeObjectData",handle:i.initSingleNode},{name:"GameLayerObjectData",handle:i.initSingleNode},{name:"SpriteObjectData",handle:i.initSprite},{name:"ParticleObjectData",handle:i.initParticle},{name:"PanelObjectData",handle:i.initPanel},{name:"TextObjectData",handle:i.initText},{name:"ButtonObjectData",handle:i.initButton},{name:"CheckBoxObjectData",handle:i.initCheckBox},{name:"ScrollViewObjectData",handle:i.initScrollView},{name:"ImageViewObjectData",handle:i.initImageView},{name:"LoadingBarObjectData",handle:i.initLoadingBar},{name:"SliderObjectData",handle:i.initSlider},{name:"PageViewObjectData",handle:i.initPageView},{name:"ListViewObjectData",handle:i.initListView},{name:"TextAtlasObjectData",handle:i.initTextAtlas},{name:"TextBMFontObjectData",handle:i.initTextBMFont},{name:"TextFieldObjectData",handle:i.initTextField},{name:"SimpleAudioObjectData",handle:i.initSimpleAudio},{name:"GameMapObjectData",handle:i.initGameMap},{name:"ProjectNodeObjectData",handle:i.initProjectNode},{name:"ArmatureNodeObjectData",handle:i.initArmature},{name:"BoneNodeObjectData",handle:i.initBoneNode},{name:"SkeletonNodeObjectData",handle:i.initSkeletonNode}].forEach((function(t){i.registerParser(t.name,(function(e,i){var n=t.handle.call(this,e,i);return this.parseChild(n,e.Children,i),n}))})),t.registerParser("timeline","2.*",i),t.registerParser("timeline","*",i)}(ccs._load),function(){ccs.uiReader={_fileDesignSizes:{},widgetFromJsonFile:function(t){(e=cc.loader.getRes(t))&&(this._fileDesignSizes[t]=cc.size(e.designWidth||0,e.designHeight||0));var e=e.Version||e.version,i=ccs.uiReader.getVersionInteger(e);return!e||1700<=i?(cc.warn("Not supported file types, Please try use the ccs.load"),null):ccs._load(t,"ccui")},registerTypeAndCallBack:function(t,e,i,n){var s=ccs._load.getParser("ccui")["*"],r=n.bind(i);s.registerParser(t,(function(n,s){var o=new e,a=n.options;i.setPropsFromJsonDictionary&&i.setPropsFromJsonDictionary(o,a),this.generalAttributes(o,a);var c=(c=a.customProperty)?JSON.parse(c):{};return r(t,o,c),this.colorAttributes(o,a),this.anchorPointAttributes(o,a),this.parseChild.call(this,o,n,s),o}))},getVersionInteger:function(t){if(!t||"string"!=typeof t)return 0;if(4!==(t=t.split(".")).length)return 0;var e=0;return t.forEach((function(t,i){e+=t*Math.pow(10,3-i)})),e},storeFileDesignSize:function(t,e){this._fileDesignSizes[t]=e},getFileDesignSize:function(t){return this._fileDesignSizes[t]},getFilePath:function(){return this._filePath},setFilePath:function(t){this._filePath=t},getParseObjectMap:function(){return ccs._load.getParser("ccui")["*"].parsers},getParseCallBackMap:function(){return ccs._load.getParser("ccui")["*"].parsers},clear:function(){}};var t=ccs._load.getParser("ccui")["*"];ccs.imageViewReader={setPropsFromJsonDictionary:t.ImageViewAttributes},ccs.buttonReader={setPropsFromJsonDictionary:t.ButtonAttributes},ccs.checkBoxReader={setPropsFromJsonDictionary:t.CheckBoxAttributes},ccs.labelAtlasReader={setPropsFromJsonDictionary:t.TextAtlasAttributes},ccs.labelBMFontReader={setPropsFromJsonDictionary:t.TextBMFontAttributes},ccs.labelReader={setPropsFromJsonDictionary:t.TextAttributes},ccs.layoutReader={setPropsFromJsonDictionary:t.LayoutAttributes},ccs.listViewReader={setPropsFromJsonDictionary:t.ListViewAttributes},ccs.loadingBarReader={setPropsFromJsonDictionary:t.LoadingBarAttributes},ccs.pageViewReader={setPropsFromJsonDictionary:t.PageViewAttributes},ccs.scrollViewReader={setPropsFromJsonDictionary:t.ScrollViewAttributes},ccs.sliderReader={setPropsFromJsonDictionary:t.SliderAttributes},ccs.textFieldReader={setPropsFromJsonDictionary:t.TextFieldAttributes}}(),ccs.sceneReader={_node:null,createNodeWithSceneFile:function(t){return this._node=ccs._load(t,"scene")},getNodeByTag:function(t){return null==this._node?null:this._node.getTag()===t?this._node:this._nodeByTag(this._node,t)},_nodeByTag:function(t,e){if(null==t)return null;for(var i=null,n=t.getChildren(),s=0;s<n.length&&(!(i=n[s])||i.getTag()!==e)&&!(i=this._nodeByTag(i,e));s++);return i},version:function(){return"*"},setTarget:function(){},clear:function(){ccs.triggerManager.removeAll(),cc.audioEngine.end()}};var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},spine;!function(t){var e=function(){function t(t,e,i){if(null==t)throw Error("name cannot be null.");if(null==e)throw Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=i}return t.prototype.apply=function(t,e,i,n,s,r,o,a){if(null==t)throw Error("skeleton cannot be null.");n&&0!=this.duration&&(i%=this.duration,0<e&&(e%=this.duration));for(var c=0,h=(n=this.timelines).length;c<h;c++)n[c].apply(t,e,i,s,r,o,a)},t.binarySearch=function(t,e,i){void 0===i&&(i=1);var n=0,s=t.length/i-2;if(0==s)return i;for(var r=s>>>1;;){if(t[(r+1)*i]<=e?n=r+1:s=r,n==s)return(n+1)*i;r=n+s>>>1}},t.linearSearch=function(t,e,i){for(var n=0,s=t.length-i;n<=s;n+=i)if(t[n]>e)return n;return-1},t}();t.Animation=e,function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix"}(t.TimelineType||(t.TimelineType={}));var i=t.TimelineType,n=function(){function e(i){if(0>=i)throw Error("frameCount must be > 0: "+i);this.curves=t.Utils.newFloatArray((i-1)*e.BEZIER_SIZE)}return e.prototype.getFrameCount=function(){return this.curves.length/e.BEZIER_SIZE+1},e.prototype.setLinear=function(t){this.curves[t*e.BEZIER_SIZE]=e.LINEAR},e.prototype.setStepped=function(t){this.curves[t*e.BEZIER_SIZE]=e.STEPPED},e.prototype.getCurveType=function(t){return(t*=e.BEZIER_SIZE)==this.curves.length||(t=this.curves[t])==e.LINEAR?e.LINEAR:t==e.STEPPED?e.STEPPED:e.BEZIER},e.prototype.setCurve=function(t,i,n,s,r){var o=.03*(2*-n+r),a=2*(h=.03*(2*-i+s))+(s=.006*(3*(i-s)+1)),c=2*o+(r=.006*(3*(n-r)+1));i=.3*i+h+.16666667*s,n=.3*n+o+.16666667*r,t*=e.BEZIER_SIZE,(o=this.curves)[t++]=e.BEZIER;for(var h=i,l=n,u=t+e.BEZIER_SIZE-1;t<u;t+=2)o[t]=h,o[t+1]=l,i+=a,n+=c,a+=s,c+=r,h+=i,l+=n},e.prototype.getCurvePercent=function(i,n){n=t.MathUtils.clamp(n,0,1);var s=this.curves,r=i*e.BEZIER_SIZE;if((o=s[r])==e.LINEAR)return n;if(o==e.STEPPED)return 0;for(var o=0,a=++r,c=r+e.BEZIER_SIZE-1;r<c;r+=2)if((o=s[r])>=n){var h=c=void 0;return r==a?h=c=0:(c=s[r-2],h=s[r-1]),h+(s[r+1]-h)*(n-c)/(o-c)}return(s=s[r-1])+(1-s)*(n-o)/(1-o)},e.LINEAR=0,e.STEPPED=1,e.BEZIER=2,e.BEZIER_SIZE=19,e}();t.CurveTimeline=n;var s=function(n){function s(e){n.call(this,e),this.frames=t.Utils.newFloatArray(e<<1)}return __extends(s,n),s.prototype.getPropertyId=function(){return(i.rotate<<24)+this.boneIndex},s.prototype.setFrame=function(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+s.ROTATION]=i},s.prototype.apply=function(t,i,n,r,o,a,c){if(i=this.frames,t=t.bones[this.boneIndex],n<i[0])a&&(t.rotation=t.data.rotation);else if(n>=i[i.length-s.ENTRIES])a?t.rotation=t.data.rotation+i[i.length+s.PREV_ROTATION]*o:(a=t.data.rotation+i[i.length+s.PREV_ROTATION]-t.rotation,t.rotation+=(a-360*(16384-(16384.499999999996-a/360|0)))*o);else{r=i[(c=e.binarySearch(i,n,s.ENTRIES))+s.PREV_ROTATION];var h=i[c];n=this.getCurvePercent((c>>1)-1,1-(n-h)/(i[c+s.PREV_TIME]-h)),i=r+((i=i[c+s.ROTATION]-r)-360*(16384-(16384.499999999996-i/360|0)))*n,a?(i-=360*(16384-(16384.499999999996-i/360|0)),t.rotation=t.data.rotation+i*o):(i=t.data.rotation+i-t.rotation,i-=360*(16384-(16384.499999999996-i/360|0)),t.rotation+=i*o)}},s.ENTRIES=2,s.PREV_TIME=-2,s.PREV_ROTATION=-1,s.ROTATION=1,s}(n);t.RotateTimeline=s,s=function(n){function s(e){n.call(this,e),this.frames=t.Utils.newFloatArray(e*s.ENTRIES)}return __extends(s,n),s.prototype.getPropertyId=function(){return(i.translate<<24)+this.boneIndex},s.prototype.setFrame=function(t,e,i,n){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.X]=i,this.frames[t+s.Y]=n},s.prototype.apply=function(t,i,n,r,o,a,c){if(i=this.frames,t=t.bones[this.boneIndex],n<i[0])a&&(t.x=t.data.x,t.y=t.data.y);else{if(c=r=0,n>=i[i.length-s.ENTRIES])r=i[i.length+s.PREV_X],c=i[i.length+s.PREV_Y];else{var h=e.binarySearch(i,n,s.ENTRIES);r=i[h+s.PREV_X],c=i[h+s.PREV_Y];var l=i[h];n=this.getCurvePercent(h/s.ENTRIES-1,1-(n-l)/(i[h+s.PREV_TIME]-l)),r+=(i[h+s.X]-r)*n,c+=(i[h+s.Y]-c)*n}a?(t.x=t.data.x+r*o,t.y=t.data.y+c*o):(t.x+=(t.data.x+r-t.x)*o,t.y+=(t.data.y+c-t.y)*o)}},s.ENTRIES=3,s.PREV_TIME=-3,s.PREV_X=-2,s.PREV_Y=-1,s.X=1,s.Y=2,s}(n),t.TranslateTimeline=s;var r=function(n){function s(t){n.call(this,t)}return __extends(s,n),s.prototype.getPropertyId=function(){return(i.scale<<24)+this.boneIndex},s.prototype.apply=function(i,n,r,o,a,c,h){var l=this.frames;if(i=i.bones[this.boneIndex],r<l[0])c&&(i.scaleX=i.data.scaleX,i.scaleY=i.data.scaleY);else{if(o=n=0,r>=l[l.length-s.ENTRIES])n=l[l.length+s.PREV_X]*i.data.scaleX,o=l[l.length+s.PREV_Y]*i.data.scaleY;else{var u=e.binarySearch(l,r,s.ENTRIES);n=l[u+s.PREV_X],o=l[u+s.PREV_Y];var d=l[u];r=this.getCurvePercent(u/s.ENTRIES-1,1-(r-d)/(l[u+s.PREV_TIME]-d)),n=(n+(l[u+s.X]-n)*r)*i.data.scaleX,o=(o+(l[u+s.Y]-o)*r)*i.data.scaleY}1==a?(i.scaleX=n,i.scaleY=o):(l=r=0,c?(r=i.data.scaleX,l=i.data.scaleY):(r=i.scaleX,l=i.scaleY),h?(n=Math.abs(n)*t.MathUtils.signum(r),o=Math.abs(o)*t.MathUtils.signum(l)):(r=Math.abs(r)*t.MathUtils.signum(n),l=Math.abs(l)*t.MathUtils.signum(o)),i.scaleX=r+(n-r)*a,i.scaleY=l+(o-l)*a)}},s}(s);t.ScaleTimeline=r,s=function(t){function n(e){t.call(this,e)}return __extends(n,t),n.prototype.getPropertyId=function(){return(i.shear<<24)+this.boneIndex},n.prototype.apply=function(t,i,s,r,o,a,c){if(i=this.frames,t=t.bones[this.boneIndex],s<i[0])a&&(t.shearX=t.data.shearX,t.shearY=t.data.shearY);else{if(c=r=0,s>=i[i.length-n.ENTRIES])r=i[i.length+n.PREV_X],c=i[i.length+n.PREV_Y];else{var h=e.binarySearch(i,s,n.ENTRIES);r=i[h+n.PREV_X],c=i[h+n.PREV_Y];var l=i[h];s=this.getCurvePercent(h/n.ENTRIES-1,1-(s-l)/(i[h+n.PREV_TIME]-l)),r+=(i[h+n.X]-r)*s,c+=(i[h+n.Y]-c)*s}a?(t.shearX=t.data.shearX+r*o,t.shearY=t.data.shearY+c*o):(t.shearX+=(t.data.shearX+r-t.shearX)*o,t.shearY+=(t.data.shearY+c-t.shearY)*o)}},n}(s),t.ShearTimeline=s,s=function(n){function s(e){n.call(this,e),this.frames=t.Utils.newFloatArray(e*s.ENTRIES)}return __extends(s,n),s.prototype.getPropertyId=function(){return(i.color<<24)+this.slotIndex},s.prototype.setFrame=function(t,e,i,n,r,o){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.R]=i,this.frames[t+s.G]=n,this.frames[t+s.B]=r,this.frames[t+s.A]=o},s.prototype.apply=function(t,i,n,r,o,a,c){t=t.slots[this.slotIndex];var h=this.frames;if(n<h[0])a&&t.color.setFromColor(t.data.color);else{var l=c=r=i=0;if(n>=h[h.length-s.ENTRIES])i=h[(n=h.length)+s.PREV_R],r=h[n+s.PREV_G],c=h[n+s.PREV_B],l=h[n+s.PREV_A];else{var u=e.binarySearch(h,n,s.ENTRIES);i=h[u+s.PREV_R],r=h[u+s.PREV_G],c=h[u+s.PREV_B];l=h[u+s.PREV_A];var d=h[u];n=this.getCurvePercent(u/s.ENTRIES-1,1-(n-d)/(h[u+s.PREV_TIME]-d)),i+=(h[u+s.R]-i)*n,r+=(h[u+s.G]-r)*n,c+=(h[u+s.B]-c)*n,l+=(h[u+s.A]-l)*n}1==o?t.color.set(i,r,c,l):(n=t.color,a&&n.setFromColor(t.data.color),n.add((i-n.r)*o,(r-n.g)*o,(c-n.b)*o,(l-n.a)*o))}},s.ENTRIES=5,s.PREV_TIME=-5,s.PREV_R=-4,s.PREV_G=-3,s.PREV_B=-2,s.PREV_A=-1,s.R=1,s.G=2,s.B=3,s.A=4,s}(n),t.ColorTimeline=s,s=function(){function n(e){this.frames=t.Utils.newFloatArray(e),this.attachmentNames=Array(e)}return n.prototype.getPropertyId=function(){return(i.attachment<<24)+this.slotIndex},n.prototype.getFrameCount=function(){return this.frames.length},n.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},n.prototype.apply=function(t,i,n,s,r,o,a){i=t.slots[this.slotIndex],a&&o?(n=i.data.attachmentName,i.setAttachment(null==n?null:t.getAttachment(this.slotIndex,n))):n<(a=this.frames)[0]?o&&(n=i.data.attachmentName,i.setAttachment(null==n?null:t.getAttachment(this.slotIndex,n))):(o=0,o=n>=a[a.length-1]?a.length-1:e.binarySearch(a,n,1)-1,n=this.attachmentNames[o],t.slots[this.slotIndex].setAttachment(null==n?null:t.getAttachment(this.slotIndex,n)))},n}(),t.AttachmentTimeline=s,s=function(n){function s(e){n.call(this,e),this.frames=t.Utils.newFloatArray(e),this.frameVertices=Array(e)}return __extends(s,n),s.prototype.getPropertyId=function(){return(i.deform<<24)+this.slotIndex},s.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.frameVertices[t]=i},s.prototype.apply=function(i,n,s,r,o,a,c){var h=(i=i.slots[this.slotIndex]).getAttachment();if(h instanceof t.VertexAttachment&&h.applyDeform(this.attachment)){var l=this.frames;if(n=i.attachmentVertices,s<l[0])a&&t.Utils.setArraySize(n,0);else if(i=(c=this.frameVertices)[0].length,n.length!=i&&(o=1),n=t.Utils.setArraySize(n,i),s>=l[l.length-1])if(s=c[l.length-1],1==o)t.Utils.arrayCopy(s,0,n,0,i);else if(a)if(null==(a=h).bones)for(a=a.vertices,h=0;h<i;h++)l=a[h],n[h]=l+(s[h]-l)*o;else for(h=0;h<i;h++)n[h]=s[h]*o;else for(h=0;h<i;h++)n[h]+=(s[h]-n[h])*o;else{var u=e.binarySearch(l,s);r=c[u-1],c=c[u];var d=l[u];if(s=this.getCurvePercent(u-1,1-(s-d)/(l[u-1]-d)),1==o)for(h=0;h<i;h++)u=r[h],n[h]=u+(c[h]-u)*s;else if(a)if(null==(a=h).bones)for(a=a.vertices,h=0;h<i;h++)u=r[h],l=a[h],n[h]=l+(u+(c[h]-u)*s-l)*o;else for(h=0;h<i;h++)u=r[h],n[h]=(u+(c[h]-u)*s)*o;else for(h=0;h<i;h++)u=r[h],n[h]+=(u+(c[h]-u)*s-n[h])*o}}},s}(n),t.DeformTimeline=s,s=function(){function n(e){this.frames=t.Utils.newFloatArray(e),this.events=Array(e)}return n.prototype.getPropertyId=function(){return i.event<<24},n.prototype.getFrameCount=function(){return this.frames.length},n.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},n.prototype.apply=function(t,i,n,s,r,o,a){if(null!=s){var c=this.frames,h=this.frames.length;if(i>n)this.apply(t,i,Number.MAX_VALUE,s,r,o,a),i=-1;else if(i>=c[h-1])return;if(!(n<c[0])){if(t=0,i<c[0])t=0;else for(i=c[t=e.binarySearch(c,i)];0<t&&c[t-1]==i;)t--;for(;t<h&&n>=c[t];t++)s.push(this.events[t])}}},n}(),t.EventTimeline=s,s=function(){function n(e){this.frames=t.Utils.newFloatArray(e),this.drawOrders=Array(e)}return n.prototype.getPropertyId=function(){return i.drawOrder<<24},n.prototype.getFrameCount=function(){return this.frames.length},n.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.drawOrders[t]=i},n.prototype.apply=function(i,n,s,r,o,a,c){if(n=i.drawOrder,r=i.slots,c&&a)t.Utils.arrayCopy(i.slots,0,i.drawOrder,0,i.slots.length);else if(s<(c=this.frames)[0])a&&t.Utils.arrayCopy(i.slots,0,i.drawOrder,0,i.slots.length);else if(i=0,i=s>=c[c.length-1]?c.length-1:e.binarySearch(c,s)-1,null==(s=this.drawOrders[i]))t.Utils.arrayCopy(r,0,n,0,r.length);else for(i=0,a=s.length;i<a;i++)n[i]=r[s[i]]},n}(),t.DrawOrderTimeline=s,s=function(n){function s(e){n.call(this,e),this.frames=t.Utils.newFloatArray(e*s.ENTRIES)}return __extends(s,n),s.prototype.getPropertyId=function(){return(i.ikConstraint<<24)+this.ikConstraintIndex},s.prototype.setFrame=function(t,e,i,n){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.MIX]=i,this.frames[t+s.BEND_DIRECTION]=n},s.prototype.apply=function(t,i,n,r,o,a,c){if(i=this.frames,t=t.ikConstraints[this.ikConstraintIndex],n<i[0])a&&(t.mix=t.data.mix,t.bendDirection=t.data.bendDirection);else if(n>=i[i.length-s.ENTRIES])a?(t.mix=t.data.mix+(i[i.length+s.PREV_MIX]-t.data.mix)*o,t.bendDirection=c?t.data.bendDirection:i[i.length+s.PREV_BEND_DIRECTION]):(t.mix+=(i[i.length+s.PREV_MIX]-t.mix)*o,c||(t.bendDirection=i[i.length+s.PREV_BEND_DIRECTION]));else{var h=i[(r=e.binarySearch(i,n,s.ENTRIES))+s.PREV_MIX],l=i[r];n=this.getCurvePercent(r/s.ENTRIES-1,1-(n-l)/(i[r+s.PREV_TIME]-l)),a?(t.mix=t.data.mix+(h+(i[r+s.MIX]-h)*n-t.data.mix)*o,t.bendDirection=c?t.data.bendDirection:i[r+s.PREV_BEND_DIRECTION]):(t.mix+=(h+(i[r+s.MIX]-h)*n-t.mix)*o,c||(t.bendDirection=i[r+s.PREV_BEND_DIRECTION]))}},s.ENTRIES=3,s.PREV_TIME=-3,s.PREV_MIX=-2,s.PREV_BEND_DIRECTION=-1,s.MIX=1,s.BEND_DIRECTION=2,s}(n),t.IkConstraintTimeline=s,s=function(n){function s(e){n.call(this,e),this.frames=t.Utils.newFloatArray(e*s.ENTRIES)}return __extends(s,n),s.prototype.getPropertyId=function(){return(i.transformConstraint<<24)+this.transformConstraintIndex},s.prototype.setFrame=function(t,e,i,n,r,o){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.ROTATE]=i,this.frames[t+s.TRANSLATE]=n,this.frames[t+s.SCALE]=r,this.frames[t+s.SHEAR]=o},s.prototype.apply=function(t,i,n,r,o,a,c){if(i=this.frames,t=t.transformConstraints[this.transformConstraintIndex],n<i[0])a&&(a=t.data,t.rotateMix=a.rotateMix,t.translateMix=a.rotateMix,t.scaleMix=a.scaleMix,t.shearMix=a.shearMix);else{var h=c=r=0,l=0;if(n>=i[i.length-s.ENTRIES])r=i[(n=i.length)+s.PREV_ROTATE],c=i[n+s.PREV_TRANSLATE],h=i[n+s.PREV_SCALE],l=i[n+s.PREV_SHEAR];else{var u=e.binarySearch(i,n,s.ENTRIES);r=i[u+s.PREV_ROTATE],c=i[u+s.PREV_TRANSLATE];h=i[u+s.PREV_SCALE],l=i[u+s.PREV_SHEAR];var d=i[u];n=this.getCurvePercent(u/s.ENTRIES-1,1-(n-d)/(i[u+s.PREV_TIME]-d)),r+=(i[u+s.ROTATE]-r)*n,c+=(i[u+s.TRANSLATE]-c)*n,h+=(i[u+s.SCALE]-h)*n,l+=(i[u+s.SHEAR]-l)*n}a?(a=t.data,t.rotateMix=a.rotateMix+(r-a.rotateMix)*o,t.translateMix=a.translateMix+(c-a.translateMix)*o,t.scaleMix=a.scaleMix+(h-a.scaleMix)*o,t.shearMix=a.shearMix+(l-a.shearMix)*o):(t.rotateMix+=(r-t.rotateMix)*o,t.translateMix+=(c-t.translateMix)*o,t.scaleMix+=(h-t.scaleMix)*o,t.shearMix+=(l-t.shearMix)*o)}},s.ENTRIES=5,s.PREV_TIME=-5,s.PREV_ROTATE=-4,s.PREV_TRANSLATE=-3,s.PREV_SCALE=-2,s.PREV_SHEAR=-1,s.ROTATE=1,s.TRANSLATE=2,s.SCALE=3,s.SHEAR=4,s}(n),t.TransformConstraintTimeline=s,s=function(n){function s(e){n.call(this,e),this.frames=t.Utils.newFloatArray(e*s.ENTRIES)}return __extends(s,n),s.prototype.getPropertyId=function(){return(i.pathConstraintPosition<<24)+this.pathConstraintIndex},s.prototype.setFrame=function(t,e,i){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.VALUE]=i},s.prototype.apply=function(t,i,n,r,o,a,c){if(i=this.frames,t=t.pathConstraints[this.pathConstraintIndex],n<i[0])a&&(t.position=t.data.position);else{if(r=0,n>=i[i.length-s.ENTRIES])r=i[i.length+s.PREV_VALUE];else{r=i[(c=e.binarySearch(i,n,s.ENTRIES))+s.PREV_VALUE];var h=i[c];n=this.getCurvePercent(c/s.ENTRIES-1,1-(n-h)/(i[c+s.PREV_TIME]-h)),r+=(i[c+s.VALUE]-r)*n}t.position=a?t.data.position+(r-t.data.position)*o:t.position+(r-t.position)*o}},s.ENTRIES=2,s.PREV_TIME=-2,s.PREV_VALUE=-1,s.VALUE=1,s}(n),t.PathConstraintPositionTimeline=s,s=function(t){function n(e){t.call(this,e)}return __extends(n,t),n.prototype.getPropertyId=function(){return(i.pathConstraintSpacing<<24)+this.pathConstraintIndex},n.prototype.apply=function(t,i,s,r,o,a,c){if(i=this.frames,t=t.pathConstraints[this.pathConstraintIndex],s<i[0])a&&(t.spacing=t.data.spacing);else{if(r=0,s>=i[i.length-n.ENTRIES])r=i[i.length+n.PREV_VALUE];else{r=i[(c=e.binarySearch(i,s,n.ENTRIES))+n.PREV_VALUE];var h=i[c];s=this.getCurvePercent(c/n.ENTRIES-1,1-(s-h)/(i[c+n.PREV_TIME]-h)),r+=(i[c+n.VALUE]-r)*s}t.spacing=a?t.data.spacing+(r-t.data.spacing)*o:t.spacing+(r-t.spacing)*o}},n}(s),t.PathConstraintSpacingTimeline=s,n=function(n){function s(e){n.call(this,e),this.frames=t.Utils.newFloatArray(e*s.ENTRIES)}return __extends(s,n),s.prototype.getPropertyId=function(){return(i.pathConstraintMix<<24)+this.pathConstraintIndex},s.prototype.setFrame=function(t,e,i,n){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.ROTATE]=i,this.frames[t+s.TRANSLATE]=n},s.prototype.apply=function(t,i,n,r,o,a,c){if(i=this.frames,t=t.pathConstraints[this.pathConstraintIndex],n<i[0])a&&(t.rotateMix=t.data.rotateMix,t.translateMix=t.data.translateMix);else{if(c=r=0,n>=i[i.length-s.ENTRIES])r=i[i.length+s.PREV_ROTATE],c=i[i.length+s.PREV_TRANSLATE];else{var h=e.binarySearch(i,n,s.ENTRIES);r=i[h+s.PREV_ROTATE],c=i[h+s.PREV_TRANSLATE];var l=i[h];n=this.getCurvePercent(h/s.ENTRIES-1,1-(n-l)/(i[h+s.PREV_TIME]-l)),r+=(i[h+s.ROTATE]-r)*n,c+=(i[h+s.TRANSLATE]-c)*n}a?(t.rotateMix=t.data.rotateMix+(r-t.data.rotateMix)*o,t.translateMix=t.data.translateMix+(c-t.data.translateMix)*o):(t.rotateMix+=(r-t.rotateMix)*o,t.translateMix+=(c-t.translateMix)*o)}},s.ENTRIES=3,s.PREV_TIME=-3,s.PREV_ROTATE=-2,s.PREV_TRANSLATE=-1,s.ROTATE=1,s.TRANSLATE=2,s}(n),t.PathConstraintMixTimeline=n}(spine||(spine={})),function(t){var e=function(){function e(e){this.tracks=[],this.events=[],this.listeners=[],this.queue=new n(this),this.propertyIDs=new t.IntSet,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new t.Pool((function(){return new i})),this.data=e}return e.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,i=0,n=e.length;i<n;i++){var s=e[i];if(null!=s){s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast;var r=t*s.timeScale;if(0<s.delay){if(s.delay-=r,0<s.delay)continue;r=-s.delay,s.delay=0}var o=s.next;if(null!=o){var a=s.trackLast-o.delay;if(0<=a){for(o.delay=0,o.trackTime=a+t*o.timeScale,s.trackTime+=r,this.setCurrent(i,o,!0);null!=o.mixingFrom;)o.mixTime+=r,o=o.mixingFrom;continue}}else if(s.trackLast>=s.trackEnd&&null==s.mixingFrom){e[i]=null,this.queue.end(s),this.disposeNext(s);continue}this.updateMixingFrom(s,t),s.trackTime+=r}}this.queue.drain()},e.prototype.updateMixingFrom=function(t,e){var i=t.mixingFrom;null!=i&&(this.updateMixingFrom(i,e),t.mixTime>=t.mixDuration&&null!=i.mixingFrom&&0<t.mixTime?(t.mixingFrom=null,this.queue.end(i)):(i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,i.trackTime+=e*i.timeScale,t.mixTime+=e*i.timeScale))},e.prototype.apply=function(e){if(null==e)throw Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var i=this.events,n=this.tracks,s=0,r=n.length;s<r;s++){var o=n[s];if(!(null==o||0<o.delay)){var a=o.alpha;null!=o.mixingFrom?a*=this.applyMixingFrom(o,e):o.trackTime>=o.trackEnd&&(a=0);var c=o.animationLast,h=o.getAnimationTime(),l=o.animation.timelines.length,u=o.animation.timelines;if(1==a)for(var d=0;d<l;d++)u[d].apply(e,c,h,i,1,!0,!1);else{var _=0==o.timelinesRotation.length;_&&t.Utils.setArraySize(o.timelinesRotation,l<<1,null);var g=o.timelinesRotation,f=o.timelinesFirst;for(d=0;d<l;d++){var p=u[d];p instanceof t.RotateTimeline?this.applyRotateTimeline(p,e,h,a,f[d],g,d<<1,_):p.apply(e,c,h,i,a,f[d],!1)}}this.queueEvents(o,h),i.length=0,o.nextAnimationLast=h,o.nextTrackLast=o.trackTime}}this.queue.drain()},e.prototype.applyMixingFrom=function(e,i){var n=e.mixingFrom;null!=n.mixingFrom&&this.applyMixingFrom(n,i);var s=0;0==e.mixDuration?s=1:1<(s=e.mixTime/e.mixDuration)&&(s=1);var r=s<n.eventThreshold?this.events:null,o=s<n.attachmentThreshold,a=s<n.drawOrderThreshold,c=n.animationLast,h=n.getAnimationTime(),l=n.animation.timelines.length,u=n.animation.timelines,d=n.timelinesFirst,_=n.alpha*e.mixAlpha*(1-s),g=0==n.timelinesRotation.length;g&&t.Utils.setArraySize(n.timelinesRotation,l<<1,null);for(var f=n.timelinesRotation,p=0;p<l;p++){var m=u[p],T=d[p];if(m instanceof t.RotateTimeline)this.applyRotateTimeline(m,i,h,_,T,f,p<<1,g);else{if(!T){if(!o&&m instanceof t.AttachmentTimeline)continue;if(!a&&m instanceof t.DrawOrderTimeline)continue}m.apply(i,c,h,r,_,T,!0)}}return 0<e.mixDuration&&this.queueEvents(n,h),this.events.length=0,n.nextAnimationLast=h,n.nextTrackLast=n.trackTime,s},e.prototype.applyRotateTimeline=function(e,i,n,s,r,o,a,c){if(c&&(o[a]=0),1==s)e.apply(i,0,n,null,1,r,!1);else{var h=e.frames;if(i=i.bones[e.boneIndex],n<h[0])r&&(i.rotation=i.data.rotation);else{var l=0;if(n>=h[h.length-t.RotateTimeline.ENTRIES])l=i.data.rotation+h[h.length+t.RotateTimeline.PREV_ROTATION];else{var u=h[(l=t.Animation.binarySearch(h,n,t.RotateTimeline.ENTRIES))+t.RotateTimeline.PREV_ROTATION],d=h[l];e=e.getCurvePercent((l>>1)-1,1-(n-d)/(h[l+t.RotateTimeline.PREV_TIME]-d)),l=u+((l=h[l+t.RotateTimeline.ROTATION]-u)-360*(16384-(16384.499999999996-l/360|0)))*e+i.data.rotation,l-=360*(16384-(16384.499999999996-l/360|0))}h=0,0==(e=l-(r=r?i.data.rotation:i.rotation))?h=o[a]:(e-=360*(16384-(16384.499999999996-e/360|0)),h=n=0,c?(n=0,h=e):(n=o[a],h=o[a+1]),c=0<e,l=0<=n,t.MathUtils.signum(h)!=t.MathUtils.signum(e)&&90>=Math.abs(h)&&(180<Math.abs(n)&&(n+=360*t.MathUtils.signum(n)),l=c),h=e+n-n%360,l!=c&&(h+=360*t.MathUtils.signum(n)),o[a]=h),o[a+1]=e,r+=h*s,i.rotation=r-360*(16384-(16384.499999999996-r/360|0))}}},e.prototype.queueEvents=function(t,e){for(var i=t.animationStart,n=t.animationEnd,s=n-i,r=t.trackLast%s,o=this.events,a=0,c=o.length;a<c;a++){var h=o[a];if(h.time<r)break;h.time>n||this.queue.event(t,h)}for((t.loop?r>t.trackTime%s:e>=n&&t.animationLast<n)&&this.queue.complete(t);a<c;a++)o[a].time<i||this.queue.event(t,o[a])},e.prototype.clearTracks=function(){this.queue.drainDisabled=!0;for(var t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=!1,this.queue.drain()},e.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)&&null!=(t=this.tracks[t])){this.queue.end(t),this.disposeNext(t);for(var e=t;;){var i=e.mixingFrom;if(null==i)break;this.queue.end(i),e.mixingFrom=null,e=i}this.tracks[t.trackIndex]=null,this.queue.drain()}},e.prototype.setCurrent=function(t,e,i){var n=this.expandToIndex(t);this.tracks[t]=e,null!=n&&(i&&this.queue.interrupt(n),e.mixingFrom=n,e.mixTime=0,n.timelinesRotation.length=0,null!=n.mixingFrom&&0<n.mixDuration&&(e.mixAlpha*=Math.min(n.mixTime/n.mixDuration,1))),this.queue.start(e)},e.prototype.setAnimation=function(t,e,i){var n=this.data.skeletonData.findAnimation(e);if(null==n)throw Error("Animation not found: "+e);return this.setAnimationWith(t,n,i)},e.prototype.setAnimationWith=function(t,e,i){if(null==e)throw Error("animation cannot be null.");var n=!0,s=this.expandToIndex(t);return null!=s&&(-1==s.nextTrackLast?(this.tracks[t]=s.mixingFrom,this.queue.interrupt(s),this.queue.end(s),this.disposeNext(s),s=s.mixingFrom,n=!1):this.disposeNext(s)),e=this.trackEntry(t,e,i,s),this.setCurrent(t,e,n),this.queue.drain(),e},e.prototype.addAnimation=function(t,e,i,n){var s=this.data.skeletonData.findAnimation(e);if(null==s)throw Error("Animation not found: "+e);return this.addAnimationWith(t,s,i,n)},e.prototype.addAnimationWith=function(t,e,i,n){if(null==e)throw Error("animation cannot be null.");var s=this.expandToIndex(t);if(null!=s)for(;null!=s.next;)s=s.next;return i=this.trackEntry(t,e,i,s),null==s?(this.setCurrent(t,i,!0),this.queue.drain()):(s.next=i,0>=n&&(n=0!=(t=s.animationEnd-s.animationStart)?n+(t*(1+(s.trackTime/t|0))-this.data.getMix(s.animation,e)):0)),i.delay=n,i},e.prototype.setEmptyAnimation=function(t,i){var n=this.setAnimationWith(t,e.emptyAnimation,!1);return n.mixDuration=i,n.trackEnd=i,n},e.prototype.addEmptyAnimation=function(t,i,n){return 0>=n&&(n-=i),(t=this.addAnimationWith(t,e.emptyAnimation,!1,n)).mixDuration=i,t.trackEnd=i,t},e.prototype.setEmptyAnimations=function(t){this.queue.drainDisabled=!0;for(var e=0,i=this.tracks.length;e<i;e++){var n=this.tracks[e];null!=n&&this.setEmptyAnimation(n.trackIndex,t)}this.queue.drainDisabled=!1,this.queue.drain()},e.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(t.Utils.ensureArrayCapacity(this.tracks,e-this.tracks.length+1,null),this.tracks.length=e+1,null)},e.prototype.trackEntry=function(t,e,i,n){var s=this.trackEntryPool.obtain();return s.trackIndex=t,s.animation=e,s.loop=i,s.eventThreshold=0,s.attachmentThreshold=0,s.drawOrderThreshold=0,s.animationStart=0,s.animationEnd=e.duration,s.animationLast=-1,s.nextAnimationLast=-1,s.delay=0,s.trackTime=0,s.trackLast=-1,s.nextTrackLast=-1,s.trackEnd=Number.MAX_VALUE,s.timeScale=1,s.alpha=1,s.mixAlpha=1,s.mixTime=0,s.mixDuration=null==n?0:this.data.getMix(n.animation,e),s},e.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1;var t=0,e=this.tracks.length;for(this.propertyIDs.clear();t<e;t++){var i=this.tracks[t];if(null!=i){this.setTimelinesFirst(i),t++;break}}for(;t<e;t++)null!=(i=this.tracks[t])&&this.checkTimelinesFirst(i)},e.prototype.setTimelinesFirst=function(e){if(null!=e.mixingFrom)this.setTimelinesFirst(e.mixingFrom),this.checkTimelinesUsage(e,e.timelinesFirst);else{var i=this.propertyIDs,n=e.animation.timelines,s=n.length;e=t.Utils.setArraySize(e.timelinesFirst,s,!1);for(var r=0;r<s;r++)i.add(n[r].getPropertyId()),e[r]=!0}},e.prototype.checkTimelinesFirst=function(t){null!=t.mixingFrom&&this.checkTimelinesFirst(t.mixingFrom),this.checkTimelinesUsage(t,t.timelinesFirst)},e.prototype.checkTimelinesUsage=function(e,i){for(var n=this.propertyIDs,s=e.animation.timelines,r=s.length,o=t.Utils.setArraySize(i,r),a=0;a<r;a++)o[a]=n.add(s[a].getPropertyId())},e.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},e.prototype.addListener=function(t){if(null==t)throw Error("listener cannot be null.");this.listeners.push(t)},e.prototype.removeListener=function(t){0<=(t=this.listeners.indexOf(t))&&this.listeners.splice(t,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.emptyAnimation=new t.Animation("<empty>",[],0),e}();t.AnimationState=e;var i=function(){function t(){this.timelinesFirst=[],this.timelinesRotation=[]}return t.prototype.reset=function(){this.listener=this.animation=this.mixingFrom=this.next=null,this.timelinesFirst.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(t){this.nextAnimationLast=this.animationLast=t},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},t}();t.TrackEntry=i;var n=function(){function t(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return t.prototype.start=function(t){this.objects.push(s.start),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.interrupt=function(t){this.objects.push(s.interrupt),this.objects.push(t)},t.prototype.end=function(t){this.objects.push(s.end),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.dispose=function(t){this.objects.push(s.dispose),this.objects.push(t)},t.prototype.complete=function(t){this.objects.push(s.complete),this.objects.push(t)},t.prototype.event=function(t,e){this.objects.push(s.event),this.objects.push(t),this.objects.push(e)},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,i=0;i<t.length;i+=2){var n=t[i+1];switch(t[i]){case s.start:null!=n.listener&&n.listener.start&&n.listener.start(n);for(var r=0;r<e.length;r++)e[r].start&&e[r].start(n);break;case s.interrupt:for(null!=n.listener&&n.listener.interrupt&&n.listener.interrupt(n),r=0;r<e.length;r++)e[r].interrupt&&e[r].interrupt(n);break;case s.end:for(null!=n.listener&&n.listener.end&&n.listener.end(n),r=0;r<e.length;r++)e[r].end&&e[r].end(n);case s.dispose:for(null!=n.listener&&n.listener.dispose&&n.listener.dispose(n),r=0;r<e.length;r++)e[r].dispose&&e[r].dispose(n);this.animState.trackEntryPool.free(n);break;case s.complete:for(null!=n.listener&&n.listener.complete&&n.listener.complete(n),r=0;r<e.length;r++)e[r].complete&&e[r].complete(n);break;case s.event:var o=t[2+i++];for(null!=n.listener&&n.listener.event&&n.listener.event(n,o),r=0;r<e.length;r++)e[r].event&&e[r].event(n,o)}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t}();t.EventQueue=n,function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(t.EventType||(t.EventType={}));var s=t.EventType;e=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}();t.AnimationStateAdapter2=e}(spine||(spine={})),function(t){var e=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,i){var n=this.skeletonData.findAnimation(t);if(null==n)throw Error("Animation not found: "+t);if(null==(t=this.skeletonData.findAnimation(e)))throw Error("Animation not found: "+e);this.setMixWith(n,t,i)},t.prototype.setMixWith=function(t,e,i){if(null==t)throw Error("from cannot be null.");if(null==e)throw Error("to cannot be null.");this.animationToMixTime[t.name+e.name]=i},t.prototype.getMix=function(t,e){var i=this.animationToMixTime[t.name+e.name];return void 0===i?this.defaultMix:i},t}();t.AnimationStateData=e}(spine||(spine={})),function(t){var e=function(){function t(t,e){void 0===e&&(e=""),this.assets={},this.errors={},this.loaded=this.toLoad=0,this.textureLoader=t,this.pathPrefix=e}return t.prototype.loadText=function(t,e,i){var n=this;void 0===e&&(e=null),void 0===i&&(i=null),t=this.pathPrefix+t,this.toLoad++;var s=new XMLHttpRequest;s.onreadystatechange=function(){s.readyState==XMLHttpRequest.DONE&&(200<=s.status&&300>s.status?(n.assets[t]=s.responseText,e&&e(t,s.responseText)):(n.errors[t]="Couldn't load text "+t+": status "+s.status+", "+s.responseText,i&&i(t,"Couldn't load text "+t+": status "+s.status+", "+s.responseText)),n.toLoad--,n.loaded++)},s.open("GET",t,!0),s.send()},t.prototype.loadTexture=function(t,e,i){var n=this;void 0===e&&(e=null),void 0===i&&(i=null),t=this.pathPrefix+t,this.toLoad++;var s=new Image;s.crossOrigin="anonymous",s.src=t,s.onload=function(i){i=n.textureLoader(s),n.assets[t]=i,n.toLoad--,n.loaded++,e&&e(t,s)},s.onerror=function(e){n.errors[t]="Couldn't load image "+t,n.toLoad--,n.loaded++,i&&i(t,"Couldn't load image "+t)}},t.prototype.get=function(t){return t=this.pathPrefix+t,this.assets[t]},t.prototype.remove=function(t){t=this.pathPrefix+t;var e=this.assets[t];e.dispose&&e.dispose(),this.assets[t]=null},t.prototype.removeAll=function(){for(var t in this.assets){var e=this.assets[t];e.dispose&&e.dispose()}this.assets={}},t.prototype.isLoadingComplete=function(){return 0==this.toLoad},t.prototype.getToLoad=function(){return this.toLoad},t.prototype.getLoaded=function(){return this.loaded},t.prototype.dispose=function(){this.removeAll()},t.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},t.prototype.getErrors=function(){return this.errors},t}();t.AssetManager=e}(spine||(spine={})),function(t){var e=function(){function e(t){this.atlas=t}return e.prototype.newRegionAttachment=function(e,i,n){if(null==(e=this.atlas.findRegion(n)))throw Error("Region not found in atlas: "+n+" (region attachment: "+i+")");return e.renderObject=e,(i=new t.RegionAttachment(i)).setRegion(e),i},e.prototype.newMeshAttachment=function(e,i,n){if(null==(e=this.atlas.findRegion(n)))throw Error("Region not found in atlas: "+n+" (mesh attachment: "+i+")");return e.renderObject=e,(i=new t.MeshAttachment(i)).region=e,i},e.prototype.newBoundingBoxAttachment=function(e,i){return new t.BoundingBoxAttachment(i)},e.prototype.newPathAttachment=function(e,i){return new t.PathAttachment(i)},e}();t.AtlasAttachmentLoader=e}(spine||(spine={})),function(t){var e=function(t){if(null==t)throw Error("name cannot be null.");this.name=t};t.Attachment=e,e=function(t){function e(e){t.call(this,e),this.worldVerticesLength=0}return __extends(e,t),e.prototype.computeWorldVertices=function(t,e){this.computeWorldVerticesWith(t,0,this.worldVerticesLength,e,0)},e.prototype.computeWorldVerticesWith=function(t,e,i,n,s){i+=s;var r=t.bone.skeleton,o=t.attachmentVertices,a=this.vertices;if(null==(c=this.bones)){0<o.length&&(a=o);o=(t=t.bone).worldX;var c=t.worldY,h=t.a,l=(r=t.b,t.c);t=t.d;for(var u=e;s<i;u+=2,s+=2){e=a[u];var d=a[u+1];n[s]=e*h+d*r+o,n[s+1]=e*l+d*t+c}}else{for(d=t=h=0;d<e;d+=2)h+=(l=c[h])+1,t+=l;if(u=r.bones,0==o.length)for(r=3*t;s<i;s+=2){var _=0,g=0;for(l=(l=c[h++])+h;h<l;h++,r+=3){t=u[c[h]],e=a[r];d=a[r+1];var f=a[r+2];_=_+(e*t.a+d*t.b+t.worldX)*f,g=g+(e*t.c+d*t.d+t.worldY)*f}n[s]=_,n[s+1]=g}else{r=3*t;for(var p=t<<1;s<i;s+=2){for(g=_=0,l=c[h++],l+=h;h<l;h++,r+=3,p+=2)t=u[c[h]],e=a[r]+o[p],d=a[r+1]+o[p+1],f=a[r+2],_+=(e*t.a+d*t.b+t.worldX)*f,g+=(e*t.c+d*t.d+t.worldY)*f;n[s]=_,n[s+1]=g}}}},e.prototype.applyDeform=function(t){return this==t},e}(e),t.VertexAttachment=e}(spine||(spine={})),function(t){(t=t.AttachmentType||(t.AttachmentType={}))[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path"}(spine||(spine={})),function(t){var e=function(e){function i(i){e.call(this,i),this.color=new t.Color(1,1,1,1)}return __extends(i,e),i}(t.VertexAttachment);t.BoundingBoxAttachment=e}(spine||(spine={})),function(t){var e=function(e){function i(i){e.call(this,i),this.color=new t.Color(1,1,1,1),this.inheritDeform=!1,this.tempColor=new t.Color(0,0,0,0)}return __extends(i,e),i.prototype.updateUVs=function(){var e=this.regionUVs,i=e.length,n=8*(i>>1);null!=this.worldVertices&&this.worldVertices.length==n||(this.worldVertices=t.Utils.newFloatArray(n));var s=n=0,r=0,o=0;if(null==this.region?(n=s=0,r=o=1):(n=this.region.u,s=this.region.v,r=this.region.u2-n,o=this.region.v2-s),this.region.rotate)for(var a=0,c=6;a<i;a+=2,c+=8)this.worldVertices[c]=n+e[a+1]*r,this.worldVertices[c+1]=s+o-e[a]*o;else for(a=0,c=6;a<i;a+=2,c+=8)this.worldVertices[c]=n+e[a]*r,this.worldVertices[c+1]=s+e[a+1]*o},i.prototype.updateWorldVertices=function(t,e){var i=(d=t.bone.skeleton).color,n=t.color,s=this.color,r=i.a*n.a*s.a,o=e?r:1,a=this.tempColor;a.set(i.r*n.r*s.r*o,i.g*n.g*s.g*o,i.b*n.b*s.b*o,r);var c=t.attachmentVertices,h=(i=this.vertices,n=this.worldVertices,this.bones);if(null==h){h=i.length,0<c.length&&(i=c);c=(g=t.bone).worldX;var l=g.worldY,u=g.a,d=g.b,_=g.c,g=g.d;for(r=s=0;s<h;s+=2,r+=8){o=i[s];var f=i[s+1];n[r]=o*u+f*d+c,n[r+1]=o*_+f*g+l,n[r+2]=a.r,n[r+3]=a.g,n[r+4]=a.b,n[r+5]=a.a}return n}if(l=d.bones,0==c.length)for(d=s=r=0,u=h.length;s<u;r+=8){for(var p=_=0,m=h[s++]+s;s<m;s++,d+=3){g=l[h[s]],o=i[d],f=i[d+1];var T=i[d+2];_=_+(o*g.a+f*g.b+g.worldX)*T,p=p+(o*g.c+f*g.d+g.worldY)*T}n[r]=_,n[r+1]=p,n[r+2]=a.r,n[r+3]=a.g,n[r+4]=a.b,n[r+5]=a.a}else{var S=d=s=r=0;for(u=h.length;s<u;r+=8){for(p=_=0,m=h[s++]+s;s<m;s++,d+=3,S+=2)g=l[h[s]],o=i[d]+c[S],f=i[d+1]+c[S+1],T=i[d+2],_+=(o*g.a+f*g.b+g.worldX)*T,p+=(o*g.c+f*g.d+g.worldY)*T;n[r]=_,n[r+1]=p,n[r+2]=a.r,n[r+3]=a.g,n[r+4]=a.b,n[r+5]=a.a}}return n},i.prototype.applyDeform=function(t){return this==t||this.inheritDeform&&this.parentMesh==t},i.prototype.getParentMesh=function(){return this.parentMesh},i.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength)},i}(t.VertexAttachment);t.MeshAttachment=e}(spine||(spine={})),function(t){var e=function(e){function i(i){e.call(this,i),this.constantSpeed=this.closed=!1,this.color=new t.Color(1,1,1,1)}return __extends(i,e),i}(t.VertexAttachment);t.PathAttachment=e}(spine||(spine={})),function(t){var e=function(e){function i(i){e.call(this,i),this.y=this.x=0,this.scaleY=this.scaleX=1,this.height=this.width=this.rotation=0,this.color=new t.Color(1,1,1,1),this.offset=t.Utils.newFloatArray(8),this.vertices=t.Utils.newFloatArray(32),this.tempColor=new t.Color(1,1,1,1)}return __extends(i,e),i.prototype.setRegion=function(t){var e=this.vertices;t.rotate?(e[i.U2]=t.u,e[i.V2]=t.v2,e[i.U3]=t.u,e[i.V3]=t.v,e[i.U4]=t.u2,e[i.V4]=t.v,e[i.U1]=t.u2,e[i.V1]=t.v2):(e[i.U1]=t.u,e[i.V1]=t.v2,e[i.U2]=t.u,e[i.V2]=t.v,e[i.U3]=t.u2,e[i.V3]=t.v,e[i.U4]=t.u2,e[i.V4]=t.v2),this.region=t},i.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,s=-this.height/2*this.scaleY+this.region.offsetY*e,r=n+this.region.width*t,o=(t=s+this.region.height*e,e=this.rotation*Math.PI/180,Math.cos(e)),a=Math.sin(e),c=(e=n*o+this.x,n=n*a,s*o+this.y),h=(s=s*a,r*o+this.x);r*=a,o=t*o+this.y,t*=a;(a=this.offset)[i.OX1]=e-s,a[i.OY1]=c+n,a[i.OX2]=e-t,a[i.OY2]=o+n,a[i.OX3]=h-t,a[i.OY3]=o+r,a[i.OX4]=h-s,a[i.OY4]=c+r},i.prototype.updateWorldVertices=function(t,e){var n=t.bone.skeleton.color,s=t.color,r=this.color,o=n.a*s.a*r.a,a=e?o:1,c=this.tempColor;c.set(n.r*s.r*r.r*a,n.g*s.g*r.g*a,n.b*s.b*r.b*a,o);n=this.vertices,s=this.offset,r=(u=t.bone).worldX,o=u.worldY,a=u.a;var h=u.b,l=u.c,u=u.d,d=0,_=0;d=s[i.OX1],_=s[i.OY1];return n[i.X1]=d*a+_*h+r,n[i.Y1]=d*l+_*u+o,n[i.C1R]=c.r,n[i.C1G]=c.g,n[i.C1B]=c.b,n[i.C1A]=c.a,d=s[i.OX2],_=s[i.OY2],n[i.X2]=d*a+_*h+r,n[i.Y2]=d*l+_*u+o,n[i.C2R]=c.r,n[i.C2G]=c.g,n[i.C2B]=c.b,n[i.C2A]=c.a,d=s[i.OX3],_=s[i.OY3],n[i.X3]=d*a+_*h+r,n[i.Y3]=d*l+_*u+o,n[i.C3R]=c.r,n[i.C3G]=c.g,n[i.C3B]=c.b,n[i.C3A]=c.a,d=s[i.OX4],_=s[i.OY4],n[i.X4]=d*a+_*h+r,n[i.Y4]=d*l+_*u+o,n[i.C4R]=c.r,n[i.C4G]=c.g,n[i.C4B]=c.b,n[i.C4A]=c.a,n},i.OX1=0,i.OY1=1,i.OX2=2,i.OY2=3,i.OX3=4,i.OY3=5,i.OX4=6,i.OY4=7,i.X1=0,i.Y1=1,i.C1R=2,i.C1G=3,i.C1B=4,i.C1A=5,i.U1=6,i.V1=7,i.X2=8,i.Y2=9,i.C2R=10,i.C2G=11,i.C2B=12,i.C2A=13,i.U2=14,i.V2=15,i.X3=16,i.Y3=17,i.C3R=18,i.C3G=19,i.C3B=20,i.C3A=21,i.U3=22,i.V3=23,i.X4=24,i.Y4=25,i.C4R=26,i.C4G=27,i.C4B=28,i.C4A=29,i.U4=30,i.V4=31,i}(t.Attachment);t.RegionAttachment=e}(spine||(spine={})),function(t){(t=t.BlendMode||(t.BlendMode={}))[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(spine||(spine={})),function(t){var e=function(){function e(t,e,i){if(this.children=[],this.ashearY=this.ashearX=this.ascaleY=this.ascaleX=this.arotation=this.ay=this.ax=this.shearY=this.shearX=this.scaleY=this.scaleX=this.rotation=this.y=this.x=0,this.appliedValid=!1,this.worldY=this.d=this.c=this.worldX=this.b=this.a=0,this.sorted=!1,null==t)throw Error("data cannot be null.");if(null==e)throw Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}return e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(e,i,n,s,r,o,a){if(this.ax=e,this.ay=i,this.arotation=n,this.ascaleX=s,this.ascaleY=r,this.ashearX=o,this.ashearY=a,this.appliedValid=!0,null==(c=this.parent)){a=n+90+a;var c=t.MathUtils.cosDeg(n+o)*s,h=t.MathUtils.cosDeg(a)*r;s*=t.MathUtils.sinDeg(n+o),r*=t.MathUtils.sinDeg(a),(l=this.skeleton).flipX&&(e=-e,c=-c,h=-h),l.flipY&&(i=-i,s=-s,r=-r),this.a=c,this.b=h,this.c=s,this.d=r,this.worldX=e+l.x,this.worldY=i+l.y}else{var l=c.a,u=c.b,d=c.c,_=c.d;switch(this.worldX=l*e+u*i+c.worldX,this.worldY=d*e+_*i+c.worldY,this.data.transformMode){case t.TransformMode.Normal:return a=n+90+a,c=t.MathUtils.cosDeg(n+o)*s,h=t.MathUtils.cosDeg(a)*r,s*=t.MathUtils.sinDeg(n+o),r*=t.MathUtils.sinDeg(a),this.a=l*c+u*s,this.b=l*h+u*r,this.c=d*c+_*s,void(this.d=d*h+_*r);case t.TransformMode.OnlyTranslation:a=n+90+a,this.a=t.MathUtils.cosDeg(n+o)*s,this.b=t.MathUtils.cosDeg(a)*r,this.c=t.MathUtils.sinDeg(n+o)*s,this.d=t.MathUtils.sinDeg(a)*r;break;case t.TransformMode.NoRotationOrReflection:h=0,1e-4<(c=l*l+d*d)?(u=d*(c=Math.abs(l*_-u*d)/c),_=l*c,h=Math.atan2(d,l)*t.MathUtils.radDeg):(d=l=0,h=90-Math.atan2(_,u)*t.MathUtils.radDeg),o=n+o-h,a=n+a-h+90,c=t.MathUtils.cosDeg(o)*s,h=t.MathUtils.cosDeg(a)*r,s*=t.MathUtils.sinDeg(o),r*=t.MathUtils.sinDeg(a),this.a=l*c-u*s,this.b=l*h-u*r,this.c=d*c+_*s,this.d=d*h+_*r;break;case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:n=l*(c=t.MathUtils.cosDeg(n))+u*(h=t.MathUtils.sinDeg(n)),e=d*c+_*h,1e-5<(c=Math.sqrt(n*n+e*e))&&(c=1/c),n*=c,e*=c,c=Math.sqrt(n*n+e*e),h=Math.PI/2+Math.atan2(e,n),i=Math.cos(h)*c;var g=Math.sin(h)*c;c=t.MathUtils.cosDeg(o)*s,h=t.MathUtils.cosDeg(90+a)*r;return s*=t.MathUtils.sinDeg(o),r*=t.MathUtils.sinDeg(90+a),this.a=n*c+i*s,this.b=n*h+i*r,this.c=e*c+g*s,this.d=e*h+g*r,void((this.data.transformMode!=t.TransformMode.NoScaleOrReflection?0>l*_-u*d:this.skeleton.flipX!=this.skeleton.flipY)&&(this.b=-this.b,this.d=-this.d))}this.skeleton.flipX&&(this.a=-this.a,this.b=-this.b),this.skeleton.flipY&&(this.c=-this.c,this.d=-this.d)}},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*t.MathUtils.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*t.MathUtils.radDeg},e.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},e.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},e.prototype.worldToLocalRotationX=function(){var e=this.parent;if(null==e)return this.arotation;var i=this.a,n=this.c;return Math.atan2(e.a*n-e.c*i,e.d*i-e.b*n)*t.MathUtils.radDeg},e.prototype.worldToLocalRotationY=function(){var e=this.parent;if(null==e)return this.arotation;var i=this.b,n=this.d;return Math.atan2(e.a*n-e.c*i,e.d*i-e.b*n)*t.MathUtils.radDeg},e.prototype.rotateWorld=function(e){var i=this.a,n=this.b,s=this.c,r=this.d,o=t.MathUtils.cosDeg(e);e=t.MathUtils.sinDeg(e),this.a=o*i-e*s,this.b=o*n-e*r,this.c=e*i+o*s,this.d=e*n+o*r,this.appliedValid=!1},e.prototype.updateAppliedTransform=function(){if(this.appliedValid=!0,null==(a=this.parent))this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*t.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*t.MathUtils.radDeg;else{var e=a.a,i=a.b,n=a.c,s=a.d,r=1/(e*s-i*n),o=this.worldX-a.worldX,a=this.worldY-a.worldY;this.ax=o*s*r-a*i*r,this.ay=a*e*r-o*n*r,s*=r,e*=r,i*=r,r*=n,n=s*this.a-i*this.c,i=s*this.b-i*this.d,s=e*this.c-r*this.a,r=e*this.d-r*this.b,this.ashearX=0,this.ascaleX=Math.sqrt(n*n+s*s),1e-4<this.ascaleX?(e=n*r-i*s,this.ascaleY=e/this.ascaleX,this.ashearY=Math.atan2(n*i+s*r,e)*t.MathUtils.radDeg,this.arotation=Math.atan2(s,n)*t.MathUtils.radDeg):(this.ascaleX=0,this.ascaleY=Math.sqrt(i*i+r*r),this.ashearY=0,this.arotation=90-Math.atan2(r,i)*t.MathUtils.radDeg)}},e.prototype.worldToLocal=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,r=1/(e*s-i*n),o=t.x-this.worldX,a=t.y-this.worldY;return t.x=o*s*r-a*i*r,t.y=a*e*r-o*n*r,t},e.prototype.localToWorld=function(t){var e=t.x,i=t.y;return t.x=e*this.a+i*this.b+this.worldX,t.y=e*this.c+i*this.d+this.worldY,t},e}();t.Bone=e}(spine||(spine={})),function(t){var e=function(t,e,n){if(this.rotation=this.y=this.x=0,this.scaleY=this.scaleX=1,this.shearY=this.shearX=0,this.transformMode=i.Normal,0>t)throw Error("index must be >= 0.");if(null==e)throw Error("name cannot be null.");this.index=t,this.name=e,this.parent=n};t.BoneData=e,function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(t.TransformMode||(t.TransformMode={}));var i=t.TransformMode}(spine||(spine={})),function(t){var e=function(t,e){if(null==e)throw Error("data cannot be null.");this.time=t,this.data=e};(spine||(spine={})).Event=e}(),function(t){var e=function(t){this.name=t};(spine||(spine={})).EventData=e}(),function(t){var e=function(){function e(t,e){if(this.mix=1,this.bendDirection=0,null==t)throw Error("data cannot be null.");if(null==e)throw Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=[];for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}return e.prototype.getOrder=function(){return this.data.order},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}},e.prototype.apply1=function(e,i,n,s){e.appliedValid||e.updateAppliedTransform();var r=e.parent,o=1/(r.a*r.d-r.b*r.c);i-=r.worldX,n-=r.worldY,r=Math.atan2((n*r.a-i*r.c)*o-e.ay,(i*r.d-n*r.b)*o-e.ax)*t.MathUtils.radDeg-e.ashearX-e.arotation,0>e.ascaleX&&(r+=180),180<r?r-=360:-180>r&&(r+=360),e.updateWorldTransformWith(e.ax,e.ay,e.arotation+r*s,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)},e.prototype.apply2=function(e,i,n,s,r,o){if(0==o)i.updateWorldTransform();else{e.appliedValid||e.updateAppliedTransform(),i.appliedValid||i.updateAppliedTransform();var a=e.ax,c=e.ay,h=e.ascaleX,l=e.ascaleY,u=i.ascaleX,d=0,_=0,g=0;0>h?(h=-h,d=180,g=-1):(d=0,g=1),0>l&&(l=-l,g=-g),0>u?(u=-u,_=180):_=0;var f=i.ax,p=0,m=0,T=0,S=e.a,y=e.b,C=e.c,E=e.d,A=1e-4>=Math.abs(h-l);A?(m=S*f+y*(p=i.ay)+e.worldX,T=C*f+E*p+e.worldY):(p=0,m=S*f+e.worldX,T=C*f+e.worldY);var b=e.parent,v=(S=b.a,y=b.b,C=b.c,1/(S*(E=b.d)-y*C)),I=((n-=b.worldX)*E-(s-=b.worldY)*y)*v-a,x=(s*S-n*C)*v-c;y=((n=m-b.worldX)*E-(s=T-b.worldY)*y)*v-a,S=(s*S-n*C)*v-c,v=Math.sqrt(y*y+S*S),y=i.data.length*u,E=S=0;t:if(A)y*=h,S=(I*I+x*x-v*v-y*y)/(2*v*y),-1>S?S=-1:1<S&&(S=1),E=Math.acos(S)*r,S=v+y*S,y*=Math.sin(E),S=Math.atan2(x*S-I*y,I*S+x*y);else{if(s=(S=h*y)*S,u=(y*=l)*y,A=I*I+x*x,I=Math.atan2(x,I),0<=(E=(n=-2*u*v)*n-4*(x=u-s)*(C=u*v*v+s*A-s*u))&&(E=Math.sqrt(E),0>n&&(E=-E),n=(E=-(n+E)/2)/x,E=C/E,(E=Math.abs(n)<Math.abs(E)?n:E)*E<=A)){s=Math.sqrt(A-E*E)*r,S=I-Math.atan2(s,E),E=Math.atan2(s/l,(E-v)/h);break t}h=0;var R=b=T=l=m=x=0;(E=(n=v+S)*n)>T&&(l=0,T=E,b=n),(E=(n=v-S)*n)<(C=Number.MAX_VALUE)&&(h=t.MathUtils.PI,C=E,x=n),u=Math.acos(-S*v/(s-u)),(E=(n=S*Math.cos(u)+v)*n+(s=y*Math.sin(u))*s)<C&&(h=u,C=E,x=n,m=s),E>T&&(l=u,T=E,b=n,R=s),A<=(C+T)/2?(S=I-Math.atan2(m*r,x),E=h*r):(S=I-Math.atan2(R*r,b),E=l*r)}r=Math.atan2(p,f)*g,y=e.arotation,180<(S=(S-r)*t.MathUtils.radDeg+d-y)?S-=360:-180>S&&(S+=360),e.updateWorldTransformWith(a,c,y+S*o,e.ascaleX,e.ascaleY,0,0),y=i.arotation,180<(E=((E+r)*t.MathUtils.radDeg-i.ashearX)*g+_-y)?E-=360:-180>E&&(E+=360),i.updateWorldTransformWith(f,p,y+E*o,i.ascaleX,i.ascaleY,i.ashearX,i.ashearY)}},e}();t.IkConstraint=e}(spine||(spine={})),function(t){var e=function(t){this.order=0,this.bones=[],this.mix=this.bendDirection=1,this.name=t};(spine||(spine={})).IkConstraintData=e}(),function(t){var e=function(){function e(t,e){if(this.translateMix=this.rotateMix=this.spacing=this.position=0,this.spaces=[],this.positions=[],this.world=[],this.curves=[],this.lengths=[],this.segments=[],null==t)throw Error("data cannot be null.");if(null==e)throw Error("skeleton cannot be null.");this.data=t,this.bones=[];for(var i=0,n=t.bones.length;i<n;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return e.prototype.apply=function(){this.update()},e.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof t.PathAttachment){var i=this.rotateMix,n=this.translateMix,s=0<i;if(0<n||s){var r=this.data,o=r.spacingMode,a=o==t.SpacingMode.Length,c=r.rotateMode,h=c==t.RotateMode.Tangent,l=c==t.RotateMode.ChainScale,u=this.bones.length,d=h?u:u+1,_=this.bones,g=t.Utils.setArraySize(this.spaces,d),f=null,p=this.spacing;if(l||a){l&&(f=t.Utils.setArraySize(this.lengths,u));for(var m=0,T=d-1;m<T;){var S=_[m],y=(C=S.data.length)*S.a,C=C*S.c;C=Math.sqrt(y*y+C*C);l&&(f[m]=C),g[++m]=a?Math.max(0,C+p):p}}else for(m=1;m<d;m++)g[m]=p;for(a=(e=this.computeWorldPositions(e,d,h,r.positionMode==t.PositionMode.Percent,o==t.SpacingMode.Percent))[0],d=e[1],o=!1,0==(r=r.offsetRotation)?o=c==t.RotateMode.Chain:(o=!1,r*=0<(c=this.target.bone).a*c.d-c.b*c.c?t.MathUtils.degRad:-t.MathUtils.degRad),m=0,c=3;m<u;m++,c+=3){if((S=_[m]).worldX+=(a-S.worldX)*n,S.worldY+=(d-S.worldY)*n,p=(y=e[c])-a,T=(C=e[c+1])-d,l&&(0!=(a=f[m])&&(a=(Math.sqrt(p*p+T*T)/a-1)*i+1,S.a*=a,S.c*=a)),a=y,d=C,s){y=S.a,C=S.b;var E=S.c,A=S.d,b=0,v=0,I=0;b=(b=h?e[c-1]:0==g[m+1]?e[c+2]:Math.atan2(T,p))-Math.atan2(E,y);if(o){v=Math.cos(b),I=Math.sin(b);var x=S.data.length;a=a+(x*(v*y-I*E)-p)*i,d=d+(x*(I*y+v*E)-T)*i}else b+=r;b>t.MathUtils.PI?b-=t.MathUtils.PI2:b<-t.MathUtils.PI&&(b+=t.MathUtils.PI2),b*=i,v=Math.cos(b),I=Math.sin(b),S.a=v*y-I*E,S.b=v*C-I*A,S.c=I*y+v*E,S.d=I*C+v*A}S.appliedValid=!1}}}},e.prototype.computeWorldPositions=function(i,n,s,r,o){var a=this.target,c=this.position,h=this.spaces,l=t.Utils.setArraySize(this.positions,3*n+2),u=null,d=i.closed,_=i.worldVerticesLength,g=_/6,f=e.NONE;if(!i.constantSpeed){var p=(S=i.lengths)[g=g-(d?1:2)];if(r&&(c*=p),o)for(var m=0;m<n;m++)h[m]*=p;for(u=t.Utils.setArraySize(this.world,8),o=r=m=0;m<n;m++,r+=3){var T=c+=w=h[m];if(d)0>(T%=p)&&(T+=p),o=0;else{if(0>T){f!=e.BEFORE&&(f=e.BEFORE,i.computeWorldVerticesWith(a,2,4,u,0)),this.addBeforePosition(T,u,0,l,r);continue}if(T>p){f!=e.AFTER&&(f=e.AFTER,i.computeWorldVerticesWith(a,_-6,4,u,0)),this.addAfterPosition(T-p,u,0,l,r);continue}}for(;;o++){if(!(T>(N=S[o]))){if(0==o)T/=N;else T=(T-(L=S[o-1]))/(N-L);break}}o!=f&&(f=o,d&&o==g?(i.computeWorldVerticesWith(a,_-4,4,u,0),i.computeWorldVerticesWith(a,0,4,u,4)):i.computeWorldVerticesWith(a,6*o+2,8,u,0)),this.addCurvePosition(T,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],l,r,s||0<m&&0==w)}return l}d?(_+=2,u=t.Utils.setArraySize(this.world,_),i.computeWorldVerticesWith(a,2,_-4,u,0),i.computeWorldVerticesWith(a,0,2,u,_-4),u[_-2]=u[0],u[_-1]=u[1]):(g--,_-=4,u=t.Utils.setArraySize(this.world,_),i.computeWorldVerticesWith(a,2,_,u,0)),i=t.Utils.setArraySize(this.curves,g);a=0;for(var S=u[0],y=(p=u[1],N=0),C=0,E=0,A=0,b=0,v=0,I=0,x=L=0,R=0,P=0,w=(m=I=v=0,2);m<g;m++,w+=6)N=u[w],y=u[w+1],C=u[w+2],E=u[w+3],R=2*(v=.1875*(S-2*N+C))+(L=.09375*(3*(N-C)-S+(A=u[w+4]))),P=2*(I=.1875*(p-2*y+E))+(x=.09375*(3*(y-E)-p+(b=u[w+5]))),v=.75*(N-S)+v+.16666667*L,I=.75*(y-p)+I+.16666667*x,a+=Math.sqrt(v*v+I*I),v+=R,I+=P,R+=L,P+=x,a+=Math.sqrt(v*v+I*I),v+=R,I+=P,a+=Math.sqrt(v*v+I*I),v+=R+L,I+=P+x,a+=Math.sqrt(v*v+I*I),i[m]=a,S=A,p=b;if(r&&(c*=a),o)for(m=0;m<n;m++)h[m]*=a;g=this.segments;var B=0;for(x=o=r=m=0;m<n;m++,r+=3){if(T=c+=w=h[m],d)0>(T%=a)&&(T+=a),o=0;else{if(0>T){this.addBeforePosition(T,u,0,l,r);continue}if(T>a){this.addAfterPosition(T-a,u,_-4,l,r);continue}}for(;;o++)if(!(T>(R=i[o]))){0==o?T/=R:T=(T-(L=i[o-1]))/(R-L);break}if(o!=f){f=o;var L,O=6*o,N=(S=u[O],p=u[O+1],u[O+2]);y=u[O+3],C=u[O+4],E=u[O+5],R=2*(v=.03*(S-2*N+C))+(L=.006*(3*(N-C)-S+(A=u[O+6]))),P=2*(I=.03*(p-2*y+E))+(x=.006*(3*(y-E)-p+(b=u[O+7]))),v=.3*(N-S)+v+.16666667*L,I=.3*(y-p)+I+.16666667*x,B=Math.sqrt(v*v+I*I);for(g[0]=B,O=1;8>O;O++)v+=R,I+=P,R+=L,P+=x,B+=Math.sqrt(v*v+I*I),g[O]=B;v+=R,I+=P,B+=Math.sqrt(v*v+I*I),g[8]=B,v+=R+L,I+=P+x,B+=Math.sqrt(v*v+I*I),g[9]=B,x=0}for(T*=B;;x++)if(!(T>(R=g[x]))){0==x?T/=R:T=x+(T-(L=g[x-1]))/(R-L);break}this.addCurvePosition(.1*T,S,p,N,y,C,E,A,b,l,r,s||0<m&&0==w)}return l},e.prototype.addBeforePosition=function(t,e,i,n,s){var r=e[i],o=e[i+1];e=Math.atan2(e[i+3]-o,e[i+2]-r),n[s]=r+t*Math.cos(e),n[s+1]=o+t*Math.sin(e),n[s+2]=e},e.prototype.addAfterPosition=function(t,e,i,n,s){var r=e[i+2],o=e[i+3];e=Math.atan2(o-e[i+1],r-e[i]),n[s]=r+t*Math.cos(e),n[s+1]=o+t*Math.sin(e),n[s+2]=e},e.prototype.addCurvePosition=function(t,e,i,n,s,r,o,a,c,h,l,u){(0==t||isNaN(t))&&(t=1e-4);var d,_=t*t,g=_*t,f=(d=1-t)*d,p=f*d,m=d*t,T=3*m;a=e*p+n*(d=d*T)+r*(t*=T)+a*g,c=i*p+s*d+o*t+c*g,h[l]=a,h[l+1]=c,u&&(h[l+2]=Math.atan2(c-(i*f+s*m*2+o*_),a-(e*f+n*m*2+r*_)))},e.prototype.getOrder=function(){return this.data.order},e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,e}();t.PathConstraint=e}(spine||(spine={})),function(t){var e=function(t){this.order=0,this.bones=[],this.name=t};t.PathConstraintData=e,function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(t.PositionMode||(t.PositionMode={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"}(t.SpacingMode||(t.SpacingMode={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(t.RotateMode||(t.RotateMode={}))}(spine||(spine={})),function(t){var e=function(){function t(t){this.toLoad=[],this.assets={},this.clientId=t}return t.prototype.loaded=function(){var t,e=0;for(t in this.assets)e++;return e},t}(),i=function(){function t(t){void 0===t&&(t=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=t}return t.prototype.queueAsset=function(t,i,n){var s=this.clientAssets[t];return null==s&&(s=new e(t),this.clientAssets[t]=s),null!==i&&(s.textureLoader=i),s.toLoad.push(n),this.queuedAssets[n]!==n&&(this.queuedAssets[n]=n,!0)},t.prototype.loadText=function(t,e){var i=this;if(e=this.pathPrefix+e,this.queueAsset(t,null,e)){var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState==XMLHttpRequest.DONE&&(200<=n.status&&300>n.status?i.rawAssets[e]=n.responseText:i.errors[e]="Couldn't load text "+e+": status "+n.status+", "+n.responseText)},n.open("GET",e,!0),n.send()}},t.prototype.loadJson=function(t,e){var i=this;if(e=this.pathPrefix+e,this.queueAsset(t,null,e)){var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState==XMLHttpRequest.DONE&&(200<=n.status&&300>n.status?i.rawAssets[e]=JSON.parse(n.responseText):i.errors[e]="Couldn't load text "+e+": status "+n.status+", "+n.responseText)},n.open("GET",e,!0),n.send()}},t.prototype.loadTexture=function(t,e,i){var n=this;if(i=this.pathPrefix+i,this.queueAsset(t,e,i)){var s=new Image;s.src=i,s.crossOrigin="anonymous",s.onload=function(t){n.rawAssets[i]=s},s.onerror=function(t){n.errors[i]="Couldn't load image "+i}}},t.prototype.get=function(t,e){e=this.pathPrefix+e;var i=this.clientAssets[t];return null==i||i.assets[e]},t.prototype.updateClientAssets=function(t){for(var e=0;e<t.toLoad.length;e++){var i=t.toLoad[e],n=t.assets[i];null==n&&(null!=(n=this.rawAssets[i])&&(t.assets[i]=n instanceof HTMLImageElement?t.textureLoader(n):n))}},t.prototype.isLoadingComplete=function(t){return null==(t=this.clientAssets[t])||(this.updateClientAssets(t),t.toLoad.length==t.loaded())},t.prototype.dispose=function(){},t.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},t.prototype.getErrors=function(){return this.errors},t}();t.SharedAssetManager=i}(spine||(spine={})),function(t){var e=function(){function e(e){if(this._updateCache=[],this.updateCacheReset=[],this.time=0,this.flipY=this.flipX=!1,this.y=this.x=0,null==e)throw Error("data cannot be null.");this.data=e,this.bones=[];for(var i=0;i<e.bones.length;i++){var n=e.bones[i],s=void 0;if(null==n.parent)s=new t.Bone(n,this,null);else{var r=this.bones[n.parent.index];s=new t.Bone(n,this,r);r.children.push(s)}this.bones.push(s)}for(this.slots=[],this.drawOrder=[],i=0;i<e.slots.length;i++)n=e.slots[i],s=this.bones[n.boneData.index],s=new t.Slot(n,s),this.slots.push(s),this.drawOrder.push(s);for(this.ikConstraints=[],i=0;i<e.ikConstraints.length;i++)this.ikConstraints.push(new t.IkConstraint(e.ikConstraints[i],this));for(this.transformConstraints=[],i=0;i<e.transformConstraints.length;i++)this.transformConstraints.push(new t.TransformConstraint(e.transformConstraints[i],this));for(this.pathConstraints=[],i=0;i<e.pathConstraints.length;i++)this.pathConstraints.push(new t.PathConstraint(e.pathConstraints[i],this));this.color=new t.Color(1,1,1,1),this.updateCache()}return e.prototype.updateCache=function(){this._updateCache.length=0;for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].sorted=!1;i=this.ikConstraints;var n=this.transformConstraints,s=this.pathConstraints,r=i.length,o=n.length,a=s.length,c=r+o+a;e=0;t:for(;e<c;e++){for(var h=0;h<r;h++){var l=i[h];if(l.data.order==e){this.sortIkConstraint(l);continue t}}for(h=0;h<o;h++)if((l=n[h]).data.order==e){this.sortTransformConstraint(l);continue t}for(h=0;h<a;h++)if((l=s[h]).data.order==e){this.sortPathConstraint(l);continue t}}for(e=0,i=t.length;e<i;e++)this.sortBone(t[e])},e.prototype.sortIkConstraint=function(t){this.sortBone(t.target);var e=t.bones,i=e[0];if(this.sortBone(i),1<e.length){var n=e[e.length-1];-1<this._updateCache.indexOf(n)||this.updateCacheReset.push(n)}this._updateCache.push(t),this.sortReset(i.children),e[e.length-1].sorted=!0},e.prototype.sortPathConstraint=function(e){var i=e.target,n=i.data.index,s=i.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,s),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,s);for(var r=0,o=this.data.skins.length;r<o;r++)this.sortPathConstraintAttachment(this.data.skins[r],n,s);for((r=i.getAttachment())instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(r,s),i=(s=e.bones).length,r=0;r<i;r++)this.sortBone(s[r]);for(this._updateCache.push(e),r=0;r<i;r++)this.sortReset(s[r].children);for(r=0;r<i;r++)s[r].sorted=!0},e.prototype.sortTransformConstraint=function(t){this.sortBone(t.target);for(var e=t.bones,i=e.length,n=0;n<i;n++)this.sortBone(e[n]);for(this._updateCache.push(t),n=0;n<i;n++)this.sortReset(e[n].children);for(n=0;n<i;n++)e[n].sorted=!0},e.prototype.sortPathConstraintAttachment=function(t,e,i){if(t=t.attachments[e])for(var n in t)this.sortPathConstraintAttachmentWith(t[n],i)},e.prototype.sortPathConstraintAttachmentWith=function(e,i){if(e instanceof t.PathAttachment){var n=e.bones;if(null==n)this.sortBone(i);else for(var s=this.bones,r=0;r<n.length;){var o=n[r++];for(o=r+o;r<o;r++)this.sortBone(s[n[r]])}}},e.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},e.prototype.sortReset=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];n.sorted&&this.sortReset(n.children),n.sorted=!1}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,i=t.length;e<i;e++){var n=t[e];n.ax=n.x,n.ay=n.y,n.arotation=n.rotation,n.ascaleX=n.scaleX,n.ascaleY=n.scaleY,n.ashearX=n.shearX,n.ashearY=n.shearY,n.appliedValid=!0}for(e=0,i=(t=this._updateCache).length;e<i;e++)t[e].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].setToSetupPose();var n=this.ikConstraints;for(e=0,i=n.length;e<i;e++)(t=n[e]).bendDirection=t.data.bendDirection,t.mix=t.data.mix;var s=this.transformConstraints;for(e=0,i=s.length;e<i;e++)n=(t=s[e]).data,t.rotateMix=n.rotateMix,t.translateMix=n.translateMix,t.scaleMix=n.scaleMix,t.shearMix=n.shearMix;for(e=0,i=(s=this.pathConstraints).length;e<i;e++)n=(t=s[e]).data,t.position=n.position,t.spacing=n.spacing,t.rotateMix=n.rotateMix,t.translateMix=n.translateMix},e.prototype.setSlotsToSetupPose=function(){var e=this.slots;t.Utils.arrayCopy(e,0,this.drawOrder,0,e.length);for(var i=0,n=e.length;i<n;i++)e[i].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(t){if(null==t)throw Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++){var s=e[i];if(s.data.name==t)return s}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},e.prototype.findSlot=function(t){if(null==t)throw Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++){var s=e[i];if(s.data.name==t)return s}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},e.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw Error("Skin not found: "+t);this.setSkin(e)},e.prototype.setSkin=function(t){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,i=0,n=e.length;i<n;i++){var s=e[i],r=s.data.attachmentName;null!=r&&(null!=(r=t.getAttachment(i,r))&&s.setAttachment(r))}this.skin=t},e.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},e.prototype.getAttachment=function(t,e){if(null==e)throw Error("attachmentName cannot be null.");if(null!=this.skin){var i=this.skin.getAttachment(t,e);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},e.prototype.setAttachment=function(t,e){if(null==t)throw Error("slotName cannot be null.");for(var i=this.slots,n=0,s=i.length;n<s;n++){var r=i[n];if(r.data.name==t){if(i=null,null!=e&&null==(i=this.getAttachment(n,e)))throw Error("Attachment not found: "+e+", for slot: "+t);return void r.setAttachment(i)}}throw Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(null==t)throw Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,n=e.length;i<n;i++){var s=e[i];if(s.data.name==t)return s}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,n=e.length;i<n;i++){var s=e[i];if(s.data.name==t)return s}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++){var s=e[i];if(s.data.name==t)return s}return null},e.prototype.getBounds=function(e,i){if(null==e)throw Error("offset cannot be null.");if(null==i)throw Error("size cannot be null.");for(var n=this.drawOrder,s=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,c=0,h=n.length;c<h;c++){var l=n[c],u=null,d=l.getAttachment();if(d instanceof t.RegionAttachment?u=d.updateWorldVertices(l,!1):d instanceof t.MeshAttachment&&(u=d.updateWorldVertices(l,!0)),null!=u)for(l=0,d=u.length;l<d;l+=8){var _=u[l],g=u[l+1];s=Math.min(s,_),r=Math.min(r,g),o=Math.max(o,_),a=Math.max(a,g)}}e.set(s,r),i.set(o-s,a-r)},e.prototype.update=function(t){this.time+=t},e}();t.Skeleton=e}(spine||(spine={})),function(t){var e=function(){function e(){this.maxY=this.maxX=this.minY=this.minX=0,this.boundingBoxes=[],this.polygons=[],this.polygonPool=new t.Pool((function(){return t.Utils.newFloatArray(16)}))}return e.prototype.update=function(e,i){if(null==e)throw Error("skeleton cannot be null.");var n=this.boundingBoxes,s=this.polygons,r=this.polygonPool,o=e.slots,a=o.length;n.length=0,r.freeAll(s);for(var c=s.length=0;c<a;c++){var h=o[c],l=h.getAttachment();if(l instanceof t.BoundingBoxAttachment){n.push(l);var u=r.obtain();u.length!=l.worldVerticesLength&&(u=t.Utils.newFloatArray(l.worldVerticesLength)),s.push(u),l.computeWorldVertices(h,u)}}i?this.aabbCompute():(this.minY=this.minX=Number.POSITIVE_INFINITY,this.maxY=this.maxX=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,s=this.polygons,r=0,o=s.length;r<o;r++)for(var a=h=s[r],c=0,h=h.length;c<h;c+=2){var l=a[c],u=a[c+1];t=Math.min(t,l),e=Math.min(e,u),i=Math.max(i,l),n=Math.max(n,u)}this.minX=t,this.minY=e,this.maxX=i,this.maxY=n},e.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,e,i,n){var s=this.minX,r=this.minY,o=this.maxX,a=this.maxY;return!(t<=s&&i<=s||e<=r&&n<=r||t>=o&&i>=o||e>=a&&n>=a)&&((n=(i=(n-e)/(i-t))*(s-t)+e)>r&&n<a||((n=i*(o-t)+e)>r&&n<a||((r=(r-e)/i+t)>s&&r<o||(r=(a-e)/i+t)>s&&r<o)))},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,e){for(var i=this.polygons,n=0,s=i.length;n<s;n++)if(this.containsPointPolygon(i[n],t,e))return this.boundingBoxes[n];return null},e.prototype.containsPointPolygon=function(t,e,i){for(var n=t.length,s=n-2,r=!1,o=0;o<n;o+=2){var a=t[o+1],c=t[s+1];if(a<i&&c>=i||c<i&&a>=i){var h=t[o];h+(i-a)/(c-a)*(t[s]-h)<e&&(r=!r)}s=o}return r},e.prototype.intersectsSegment=function(t,e,i,n){for(var s=this.polygons,r=0,o=s.length;r<o;r++)if(this.intersectsSegmentPolygon(s[r],t,e,i,n))return this.boundingBoxes[r];return null},e.prototype.intersectsSegmentPolygon=function(t,e,i,n,s){for(var r=t.length,o=e-n,a=i-s,c=e*s-i*n,h=t[r-2],l=t[r-1],u=0;u<r;u+=2){var d,_=t[u],g=t[u+1],f=h*g-l*_,p=l-g,m=o*p-a*(d=h-_);if(((d=(c*d-o*f)/m)>=h&&d<=_||d>=_&&d<=h)&&(d>=e&&d<=n||d>=n&&d<=e)&&(((h=(c*p-a*f)/m)>=l&&h<=g||h>=g&&h<=l)&&(h>=i&&h<=s||h>=s&&h<=i)))return!0;h=_,l=g}return!1},e.prototype.getPolygon=function(t){if(null==t)throw Error("boundingBox cannot be null.");return-1==(t=this.boundingBoxes.indexOf(t))?null:this.polygons[t]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e}();t.SkeletonBounds=e}(spine||(spine={})),function(t){var e=function(){function t(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[],this.ikConstraints=[],this.transformConstraints=[],this.pathConstraints=[],this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++){var s=e[i];if(s.name==t)return s}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t.prototype.findSlot=function(t){if(null==t)throw Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++){var s=e[i];if(s.name==t)return s}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t.prototype.findSkin=function(t){if(null==t)throw Error("skinName cannot be null.");for(var e=this.skins,i=0,n=e.length;i<n;i++){var s=e[i];if(s.name==t)return s}return null},t.prototype.findEvent=function(t){if(null==t)throw Error("eventDataName cannot be null.");for(var e=this.events,i=0,n=e.length;i<n;i++){var s=e[i];if(s.name==t)return s}return null},t.prototype.findAnimation=function(t){if(null==t)throw Error("animationName cannot be null.");for(var e=this.animations,i=0,n=e.length;i<n;i++){var s=e[i];if(s.name==t)return s}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,n=e.length;i<n;i++){var s=e[i];if(s.name==t)return s}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,n=e.length;i<n;i++){var s=e[i];if(s.name==t)return s}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++){var s=e[i];if(s.name==t)return s}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t}();t.SkeletonData=e}(spine||(spine={})),function(t){var e=function(){function e(t){this.scale=1,this.linkedMeshes=[],this.attachmentLoader=t}return e.prototype.readSkeletonData=function(i){var n=this.scale,s=new t.SkeletonData,r=(i="string"==typeof i?JSON.parse(i):i).skeleton;if(null!=r&&(s.hash=r.hash,s.version=r.spine,s.width=r.width,s.height=r.height,s.fps=r.fps,s.imagesPath=r.images),i.bones)for(r=0;r<i.bones.length;r++){var o=i.bones[r],a=null;if(null!=(h=this.getValue(o,"parent",null))&&null==(a=s.findBone(h)))throw Error("Parent bone not found: "+h);(a=new t.BoneData(s.bones.length,o.name,a)).length=this.getValue(o,"length",0)*n,a.x=this.getValue(o,"x",0)*n,a.y=this.getValue(o,"y",0)*n,a.rotation=this.getValue(o,"rotation",0),a.scaleX=this.getValue(o,"scaleX",1),a.scaleY=this.getValue(o,"scaleY",1),a.shearX=this.getValue(o,"shearX",0),a.shearY=this.getValue(o,"shearY",0),a.transformMode=e.transformModeFromString(this.getValue(o,"transform","normal")),s.bones.push(a)}if(i.slots)for(r=0;r<i.slots.length;r++){var c=(o=i.slots[r]).name,h=o.bone;if(null==(a=s.findBone(h)))throw Error("Slot bone not found: "+h);a=new t.SlotData(s.slots.length,c,a),null!=(h=this.getValue(o,"color",null))&&a.color.setFromString(h),a.attachmentName=this.getValue(o,"attachment",null),a.blendMode=e.blendModeFromString(this.getValue(o,"blend","normal")),s.slots.push(a)}if(i.ik)for(r=0;r<i.ik.length;r++){o=i.ik[r],(a=new t.IkConstraintData(o.name)).order=this.getValue(o,"order",0);for(var l=0;l<o.bones.length;l++){h=o.bones[l];var u=s.findBone(h);if(null==u)throw Error("IK bone not found: "+h);a.bones.push(u)}if(h=o.target,a.target=s.findBone(h),null==a.target)throw Error("IK target bone not found: "+h);a.bendDirection=this.getValue(o,"bendPositive",!0)?1:-1,a.mix=this.getValue(o,"mix",1),s.ikConstraints.push(a)}if(i.transform)for(r=0;r<i.transform.length;r++){for(o=i.transform[r],(a=new t.TransformConstraintData(o.name)).order=this.getValue(o,"order",0),l=0;l<o.bones.length;l++){if(h=o.bones[l],null==(u=s.findBone(h)))throw Error("Transform constraint bone not found: "+h);a.bones.push(u)}if(h=o.target,a.target=s.findBone(h),null==a.target)throw Error("Transform constraint target bone not found: "+h);a.offsetRotation=this.getValue(o,"rotation",0),a.offsetX=this.getValue(o,"x",0)*n,a.offsetY=this.getValue(o,"y",0)*n,a.offsetScaleX=this.getValue(o,"scaleX",0),a.offsetScaleY=this.getValue(o,"scaleY",0),a.offsetShearY=this.getValue(o,"shearY",0),a.rotateMix=this.getValue(o,"rotateMix",1),a.translateMix=this.getValue(o,"translateMix",1),a.scaleMix=this.getValue(o,"scaleMix",1),a.shearMix=this.getValue(o,"shearMix",1),s.transformConstraints.push(a)}if(i.path)for(r=0;r<i.path.length;r++){for(o=i.path[r],(a=new t.PathConstraintData(o.name)).order=this.getValue(o,"order",0),l=0;l<o.bones.length;l++){if(h=o.bones[l],null==(u=s.findBone(h)))throw Error("Transform constraint bone not found: "+h);a.bones.push(u)}if(h=o.target,a.target=s.findSlot(h),null==a.target)throw Error("Path target slot not found: "+h);a.positionMode=e.positionModeFromString(this.getValue(o,"positionMode","percent")),a.spacingMode=e.spacingModeFromString(this.getValue(o,"spacingMode","length")),a.rotateMode=e.rotateModeFromString(this.getValue(o,"rotateMode","tangent")),a.offsetRotation=this.getValue(o,"rotation",0),a.position=this.getValue(o,"position",0),a.positionMode==t.PositionMode.Fixed&&(a.position*=n),a.spacing=this.getValue(o,"spacing",0),a.spacingMode!=t.SpacingMode.Length&&a.spacingMode!=t.SpacingMode.Fixed||(a.spacing*=n),a.rotateMix=this.getValue(o,"rotateMix",1),a.translateMix=this.getValue(o,"translateMix",1),s.pathConstraints.push(a)}if(i.skins)for(var d in i.skins){for(c in r=i.skins[d],n=new t.Skin(d),r){if(-1==(a=s.findSlotIndex(c)))throw Error("Slot not found: "+c);var _;o=r[c];for(_ in o)null!=(h=this.readAttachment(o[_],n,a,_))&&n.addAttachment(a,_,h)}s.skins.push(n),"default"==n.name&&(s.defaultSkin=n)}for(r=0,c=this.linkedMeshes.length;r<c;r++){if(null==(n=null==(d=this.linkedMeshes[r]).skin?s.defaultSkin:s.findSkin(d.skin)))throw Error("Skin not found: "+d.skin);if(null==(_=n.getAttachment(d.slotIndex,d.parent)))throw Error("Parent mesh not found: "+d.parent);d.mesh.setParentMesh(_),d.mesh.updateUVs()}if(this.linkedMeshes.length=0,i.events)for(var g in i.events)c=i.events[g],(a=new t.EventData(g)).intValue=this.getValue(c,"int",0),a.floatValue=this.getValue(c,"float",0),a.stringValue=this.getValue(c,"string",""),s.events.push(a);if(i.animations)for(var f in i.animations)this.readAnimation(i.animations[f],f,s);return s},e.prototype.readAttachment=function(e,n,s,r){var o=this.scale;switch(r=this.getValue(e,"name",r),this.getValue(e,"type","region")){case"region":var a=this.getValue(e,"path",r);if(null==(s=this.attachmentLoader.newRegionAttachment(n,r,a)))break;return s.path=a,s.x=this.getValue(e,"x",0)*o,s.y=this.getValue(e,"y",0)*o,s.scaleX=this.getValue(e,"scaleX",1),s.scaleY=this.getValue(e,"scaleY",1),s.rotation=this.getValue(e,"rotation",0),s.width=e.width*o,s.height=e.height*o,null!=(o=this.getValue(e,"color",null))&&s.color.setFromString(o),s.updateOffset(),s;case"boundingbox":if(null==(a=this.attachmentLoader.newBoundingBoxAttachment(n,r)))break;return this.readVertices(e,a,e.vertexCount<<1),null!=(o=this.getValue(e,"color",null))&&a.color.setFromString(o),a;case"mesh":case"linkedmesh":if(a=this.getValue(e,"path",r),null==(n=this.attachmentLoader.newMeshAttachment(n,r,a)))break;return n.path=a,null!=(o=this.getValue(e,"color",null))&&n.color.setFromString(o),null!=(a=this.getValue(e,"parent",null))?(n.inheritDeform=this.getValue(e,"deform",!0),this.linkedMeshes.push(new i(n,this.getValue(e,"skin",null),s,a)),n):(a=e.uvs,this.readVertices(e,n,a.length),n.triangles=e.triangles,n.regionUVs=a,n.updateUVs(),n.hullLength=2*this.getValue(e,"hull",0),n);case"path":if(null==(a=this.attachmentLoader.newPathAttachment(n,r)))break;for(a.closed=this.getValue(e,"closed",!1),a.constantSpeed=this.getValue(e,"constantSpeed",!0),s=e.vertexCount,this.readVertices(e,a,s<<1),s=t.Utils.newArray(s/3,0),n=0;n<e.lengths.length;n++)s[n++]=e.lengths[n]*o;return a.lengths=s,null!=(o=this.getValue(e,"color",null))&&a.color.setFromString(o),a}return null},e.prototype.readVertices=function(e,i,n){var s=this.scale;if(i.worldVerticesLength=n,e=e.vertices,n==(o=t.Utils.toFloatArray(e)).length){if(1!=s){n=0;for(var r=e.length;n<r;n++)o[n]*=s}i.vertices=o}else{var o=[],a=[];for(n=0,r=e.length;n<r;){var c=e[n++];for(a.push(c),c=n+4*c;n<c;n+=4)a.push(e[n]),o.push(e[n+1]*s),o.push(e[n+2]*s),o.push(e[n+3])}i.bones=a,i.vertices=t.Utils.toFloatArray(o)}},e.prototype.readAnimation=function(e,i,n){var s=this.scale,r=[],o=0;if(e.slots)for(var a in e.slots){var c=e.slots[a],h=n.findSlotIndex(a);if(-1==h)throw Error("Slot not found: "+a);for(var l in c){var u=c[l];if("color"==l){(C=new t.ColorTimeline(u.length)).slotIndex=h;for(var d=0,_=0;_<u.length;_++){var g=u[_],f=new t.Color;f.setFromString(g.color),C.setFrame(d,g.time,f.r,f.g,f.b,f.a),this.readCurve(g,C,d),d++}r.push(C),o=Math.max(o,C.frames[(C.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{for(l="attachment",(C=new t.AttachmentTimeline(u.length)).slotIndex=h,_=d=0;_<u.length;_++)g=u[_],C.setFrame(d++,g.time,g.name);r.push(C),o=Math.max(o,C.frames[C.getFrameCount()-1])}}}if(e.bones)for(var p in e.bones){if(c=e.bones[p],-1==(f=n.findBoneIndex(p)))throw Error("Bone not found: "+p);for(l in c)if(u=c[l],"rotate"===l){for((C=new t.RotateTimeline(u.length)).boneIndex=f,_=d=0;_<u.length;_++)g=u[_],C.setFrame(d,g.time,g.angle),this.readCurve(g,C,d),d++;r.push(C),o=Math.max(o,C.frames[(C.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==l&&"scale"!==l&&"shear"!==l)throw Error("Invalid timeline type for a bone: "+l+" ("+p+")");for(h=1,"scale"===l?C=new t.ScaleTimeline(u.length):"shear"===l?C=new t.ShearTimeline(u.length):(C=new t.TranslateTimeline(u.length),h=s),C.boneIndex=f,_=d=0;_<u.length;_++){g=u[_];var m=this.getValue(g,"x",0),T=this.getValue(g,"y",0);C.setFrame(d,g.time,m*h,T*h),this.readCurve(g,C,d),d++}r.push(C),o=Math.max(o,C.frames[(C.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}if(e.ik)for(var S in e.ik){for(c=e.ik[S],d=n.findIkConstraint(S),(C=new t.IkConstraintTimeline(c.length)).ikConstraintIndex=n.ikConstraints.indexOf(d),_=d=0;_<c.length;_++)g=c[_],C.setFrame(d,g.time,this.getValue(g,"mix",1),this.getValue(g,"bendPositive",!0)?1:-1),this.readCurve(g,C,d),d++;r.push(C),o=Math.max(o,C.frames[(C.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(e.transform)for(S in e.transform){for(c=e.transform[S],d=n.findTransformConstraint(S),(C=new t.TransformConstraintTimeline(c.length)).transformConstraintIndex=n.transformConstraints.indexOf(d),_=d=0;_<c.length;_++)g=c[_],C.setFrame(d,g.time,this.getValue(g,"rotateMix",1),this.getValue(g,"translateMix",1),this.getValue(g,"scaleMix",1),this.getValue(g,"shearMix",1)),this.readCurve(g,C,d),d++;r.push(C),o=Math.max(o,C.frames[(C.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(e.paths)for(S in e.paths){if(c=e.paths[S],-1==(p=n.findPathConstraintIndex(S)))throw Error("Path constraint not found: "+S);for(l in f=n.pathConstraints[p],c)if(u=c[l],"position"===l||"spacing"===l){for(h=1,"spacing"===l?(C=new t.PathConstraintSpacingTimeline(u.length),(f.spacingMode==t.SpacingMode.Length||f.spacingMode==t.SpacingMode.Fixed)&&(h=s)):(C=new t.PathConstraintPositionTimeline(u.length),f.positionMode==t.PositionMode.Fixed&&(h=s)),C.pathConstraintIndex=p,_=d=0;_<u.length;_++)g=u[_],C.setFrame(d,g.time,this.getValue(g,l,0)*h),this.readCurve(g,C,d),d++;r.push(C),o=Math.max(o,C.frames[(C.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===l){for((C=new t.PathConstraintMixTimeline(u.length)).pathConstraintIndex=p,_=d=0;_<u.length;_++)g=u[_],C.setFrame(d,g.time,this.getValue(g,"rotateMix",1),this.getValue(g,"translateMix",1)),this.readCurve(g,C,d),d++;r.push(C),o=Math.max(o,C.frames[(C.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}if(e.deform)for(var y in e.deform){if(p=e.deform[y],null==(f=n.findSkin(y)))throw Error("Skin not found: "+y);for(a in p){if(c=p[a],-1==(h=n.findSlotIndex(a)))throw Error("Slot not found: "+c.name);for(l in c){if(u=c[l],null==(d=f.getAttachment(h,l)))throw Error("Deform attachment not found: "+u.name);m=null!=d.bones,T=d.vertices;var C,E=m?T.length/3*2:T.length;for((C=new t.DeformTimeline(u.length)).slotIndex=h,C.attachment=d,S=d=0;S<u.length;S++){g=u[S];var A=void 0,b=this.getValue(g,"vertices",null);if(null==b)A=m?t.Utils.newFloatArray(E):T;else{if(A=t.Utils.newFloatArray(E),_=this.getValue(g,"offset",0),t.Utils.arrayCopy(b,0,A,_,b.length),1!=s)for(b=_+b.length;_<b;_++)A[_]*=s;if(!m)for(_=0;_<E;_++)A[_]+=T[_]}C.setFrame(d,g.time,A),this.readCurve(g,C,d),d++}r.push(C),o=Math.max(o,C.frames[C.getFrameCount()-1])}}}if(null==(s=e.drawOrder)&&(s=e.draworder),null!=s){for(C=new t.DrawOrderTimeline(s.length),a=n.slots.length,S=d=0;S<s.length;S++){if(l=s[S],y=null,null!=(u=this.getValue(l,"offsets",null))){for(y=t.Utils.newArray(a,-1),g=t.Utils.newArray(a-u.length,0),_=p=c=0;_<u.length;_++){if(f=u[_],-1==(h=n.findSlotIndex(f.slot)))throw Error("Slot not found: "+f.slot);for(;c!=h;)g[p++]=c++;y[c+f.offset]=c++}for(;c<a;)g[p++]=c++;for(_=a-1;0<=_;_--)-1==y[_]&&(y[_]=g[--p])}C.setFrame(d++,l.time,y)}r.push(C),o=Math.max(o,C.frames[C.getFrameCount()-1])}if(e.events){for(C=new t.EventTimeline(e.events.length),_=d=0;_<e.events.length;_++){if(s=e.events[_],null==(a=n.findEvent(s.name)))throw Error("Event not found: "+s.name);(h=new t.Event(s.time,a)).intValue=this.getValue(s,"int",a.intValue),h.floatValue=this.getValue(s,"float",a.floatValue),h.stringValue=this.getValue(s,"string",a.stringValue),C.setFrame(d++,h)}r.push(C),o=Math.max(o,C.frames[C.getFrameCount()-1])}if(isNaN(o))throw Error("Error while parsing animation, duration is NaN");n.animations.push(new t.Animation(i,r,o))},e.prototype.readCurve=function(t,e,i){t.curve&&("stepped"===t.curve?e.setStepped(i):"[object Array]"===Object.prototype.toString.call(t.curve)&&(t=t.curve,e.setCurve(i,t[0],t[1],t[2],t[3])))},e.prototype.getValue=function(t,e,i){return void 0!==t[e]?t[e]:i},e.blendModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.BlendMode.Normal;if("additive"==e)return t.BlendMode.Additive;if("multiply"==e)return t.BlendMode.Multiply;if("screen"==e)return t.BlendMode.Screen;throw Error("Unknown blend mode: "+e)},e.positionModeFromString=function(e){if("fixed"==(e=e.toLowerCase()))return t.PositionMode.Fixed;if("percent"==e)return t.PositionMode.Percent;throw Error("Unknown position mode: "+e)},e.spacingModeFromString=function(e){if("length"==(e=e.toLowerCase()))return t.SpacingMode.Length;if("fixed"==e)return t.SpacingMode.Fixed;if("percent"==e)return t.SpacingMode.Percent;throw Error("Unknown position mode: "+e)},e.rotateModeFromString=function(e){if("tangent"==(e=e.toLowerCase()))return t.RotateMode.Tangent;if("chain"==e)return t.RotateMode.Chain;if("chainscale"==e)return t.RotateMode.ChainScale;throw Error("Unknown rotate mode: "+e)},e.transformModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.TransformMode.Normal;if("onlytranslation"==e)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==e)return t.TransformMode.NoRotationOrReflection;if("noscale"==e)return t.TransformMode.NoScale;if("noscaleorreflection"==e)return t.TransformMode.NoScaleOrReflection;throw Error("Unknown transform mode: "+e)},e}();t.SkeletonJson=e;var i=function(t,e,i,n){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=n}}(spine||(spine={})),function(t){var e=function(){function t(t){if(this.attachments=[],null==t)throw Error("name cannot be null.");this.name=t}return t.prototype.addAttachment=function(t,e,i){if(null==i)throw Error("attachment cannot be null.");var n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=i},t.prototype.getAttachment=function(t,e){var i=this.attachments[t];return i?i[e]:null},t.prototype.attachAll=function(t,e){for(var i=0,n=0;n<t.slots.length;n++){var s=t.slots[n],r=s.getAttachment();if(r&&i<e.attachments.length){var o,a=e.attachments[i];for(o in a)if(r==a[o]){null!=(r=this.getAttachment(i,o))&&s.setAttachment(r);break}}i++}},t}();t.Skin=e}(spine||(spine={})),function(t){var e=function(){function e(e,i){if(this.attachmentVertices=[],null==e)throw Error("data cannot be null.");if(null==i)throw Error("bone cannot be null.");this.data=e,this.bone=i,this.color=new t.Color,this.setToSetupPose()}return e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e}();t.Slot=e}(spine||(spine={})),function(t){var e=function(e,i,n){if(this.color=new t.Color(1,1,1,1),0>e)throw Error("index must be >= 0.");if(null==i)throw Error("name cannot be null.");if(null==n)throw Error("boneData cannot be null.");this.index=e,this.name=i,this.boneData=n};t.SlotData=e}(spine||(spine={})),function(t){var e=function(){function t(t){this._image=t}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return i.Nearest;case"linear":return i.Linear;case"mipmap":return i.MipMap;case"mipmapnearestnearest":return i.MipMapNearestNearest;case"mipmaplinearnearest":return i.MipMapLinearNearest;case"mipmapnearestlinear":return i.MipMapNearestLinear;case"mipmaplinearlinear":return i.MipMapLinearLinear;default:throw Error("Unknown texture filter "+t)}},t.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return n.MirroredRepeat;case"clamptoedge":return n.ClampToEdge;case"repeat":return n.Repeat;default:throw Error("Unknown texture wrap "+t)}},t}();t.Texture=e,function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(t.TextureFilter||(t.TextureFilter={}));var i=t.TextureFilter;!function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(t.TextureWrap||(t.TextureWrap={}));var n=t.TextureWrap;e=function(){this.height=this.width=this.v2=this.u2=this.v=this.u=0,this.rotate=!1,this.originalHeight=this.originalWidth=this.offsetY=this.offsetX=0};t.TextureRegion=e}(spine||(spine={})),function(t){var e=function(){function e(t,e){this.pages=[],this.regions=[],this.load(t,e)}return e.prototype.load=function(e,r){if(null==r)throw Error("textureLoader cannot be null.");for(var o=new i(e),a=Array(4),c=null;;){if(null==(l=o.readLine()))break;if(0==(l=l.trim()).length)c=null;else if(c){var h=new s;h.name=l,h.page=c,h.rotate="true"==o.readValue(),o.readTuple(a);var l=parseInt(a[0]),u=parseInt(a[1]);o.readTuple(a);var d=parseInt(a[0]),_=parseInt(a[1]);h.u=l/c.width,h.v=u/c.height,h.rotate?(h.u2=(l+_)/c.width,h.v2=(u+d)/c.height):(h.u2=(l+d)/c.width,h.v2=(u+_)/c.height),h.x=l,h.y=u,h.width=Math.abs(d),h.height=Math.abs(_),4==o.readTuple(a)&&4==o.readTuple(a)&&o.readTuple(a),h.originalWidth=parseInt(a[0]),h.originalHeight=parseInt(a[1]),o.readTuple(a),h.offsetX=parseInt(a[0]),h.offsetY=parseInt(a[1]),h.index=parseInt(o.readValue()),h.texture=c.texture,this.regions.push(h)}else(c=new n).name=l,2==o.readTuple(a)&&(c.width=parseInt(a[0]),c.height=parseInt(a[1]),o.readTuple(a)),o.readTuple(a),c.minFilter=t.Texture.filterFromString(a[0]),c.magFilter=t.Texture.filterFromString(a[1]),h=o.readValue(),c.uWrap=t.TextureWrap.ClampToEdge,c.vWrap=t.TextureWrap.ClampToEdge,"x"==h?c.uWrap=t.TextureWrap.Repeat:"y"==h?c.vWrap=t.TextureWrap.Repeat:"xy"==h&&(c.uWrap=c.vWrap=t.TextureWrap.Repeat),c.texture=r(l),c.texture.setFilters(c.minFilter,c.magFilter),c.texture.setWraps(c.uWrap,c.vWrap),c.width=c.texture.getImage().width,c.height=c.texture.getImage().height,this.pages.push(c)}},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()},e}();t.TextureAtlas=e;var i=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw Error("Invalid line: "+t);return t.substring(e+1).trim()},t.prototype.readTuple=function(t){var e=this.readLine();if(-1==(n=e.indexOf(":")))throw Error("Invalid line: "+e);for(var i=0,n=n+1;3>i;i++){var s=e.indexOf(",",n);if(-1==s)break;t[i]=e.substr(n,s-n).trim(),n=s+1}return t[i]=e.substring(n).trim(),i+1},t}(),n=function(){};t.TextureAtlasPage=n;var s=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e}(t.TextureRegion);t.TextureAtlasRegion=s}(spine||(spine={})),function(t){var e=function(){function e(e,i){if(this.shearMix=this.scaleMix=this.translateMix=this.rotateMix=0,this.temp=new t.Vector2,null==e)throw Error("data cannot be null.");if(null==i)throw Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=[];for(var n=0;n<e.bones.length;n++)this.bones.push(i.findBone(e.bones[n].name));this.target=i.findBone(e.target.name)}return e.prototype.apply=function(){this.update()},e.prototype.update=function(){for(var e=this.rotateMix,i=this.translateMix,n=this.scaleMix,s=this.shearMix,r=this.target,o=r.a,a=r.b,c=r.c,h=r.d,l=0<o*h-a*c?t.MathUtils.degRad:-t.MathUtils.degRad,u=this.data.offsetRotation*l,d=(l=this.data.offsetShearY*l,this.bones),_=0,g=d.length;_<g;_++){var f=d[_],p=!1;if(0!=e){var m=f.a,T=(p=f.b,f.c),S=f.d;(y=Math.atan2(c,o)-Math.atan2(T,m)+u)>t.MathUtils.PI?y-=t.MathUtils.PI2:y<-t.MathUtils.PI&&(y+=t.MathUtils.PI2);var y=y*e,C=Math.cos(y);y=Math.sin(y);f.a=C*m-y*T,f.b=C*p-y*S,f.c=y*m+C*T,f.d=y*p+C*S,p=!0}0!=i&&(p=this.temp,r.localToWorld(p.set(this.data.offsetX,this.data.offsetY)),f.worldX+=(p.x-f.worldX)*i,f.worldY+=(p.y-f.worldY)*i,p=!0),0<n&&(p=Math.sqrt(f.a*f.a+f.c*f.c),S=Math.sqrt(o*o+c*c),1e-5<p&&(p=(p+(S-p+this.data.offsetScaleX)*n)/p),f.a*=p,f.c*=p,p=Math.sqrt(f.b*f.b+f.d*f.d),S=Math.sqrt(a*a+h*h),1e-5<p&&(p=(p+(S-p+this.data.offsetScaleY)*n)/p),f.b*=p,f.d*=p,p=!0),0<s&&(p=f.b,S=f.d,m=Math.atan2(S,p),(y=Math.atan2(h,a)-Math.atan2(c,o)-(m-Math.atan2(f.c,f.a)))>t.MathUtils.PI?y-=t.MathUtils.PI2:y<-t.MathUtils.PI&&(y+=t.MathUtils.PI2),y=m+(y+l)*s,p=Math.sqrt(p*p+S*S),f.b=Math.cos(y)*p,f.d=Math.sin(y)*p,p=!0),p&&(f.appliedValid=!1)}},e.prototype.getOrder=function(){return this.data.order},e}();t.TransformConstraint=e}(spine||(spine={})),function(t){var e=function(t){if(this.order=0,this.bones=[],this.offsetShearY=this.offsetScaleY=this.offsetScaleX=this.offsetY=this.offsetX=this.offsetRotation=this.shearMix=this.scaleMix=this.translateMix=this.rotateMix=0,null==t)throw Error("name cannot be null.");this.name=t};(spine||(spine={})).TransformConstraintData=e}(),function(t){var e=function(){function t(){this.array=[]}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return null!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}();t.IntSet=e,e=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.r=t,this.g=e,this.b=i,this.a=n}return t.prototype.set=function(t,e,i,n){return this.r=t,this.g=e,this.b=i,this.a=n,this.clamp(),this},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},t.prototype.add=function(t,e,i,n){return this.r+=t,this.g+=e,this.b+=i,this.a+=n,this.clamp(),this},t.prototype.clamp=function(){return 0>this.r?this.r=0:1<this.r&&(this.r=1),0>this.g?this.g=0:1<this.g&&(this.g=1),0>this.b?this.b=0:1<this.b&&(this.b=1),0>this.a?this.a=0:1<this.a&&(this.a=1),this},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}(),t.Color=e,e=function(){function t(){}return t.clamp=function(t,e,i){return t<e?e:t>i?i:t},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(t){return 0<t?1:0>t?-1:0},t.toInt=function(t){return 0<t?Math.floor(t):Math.ceil(t)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return 0>t?-e:e},t.PI=3.1415927,t.PI2=2*t.PI,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}(),t.MathUtils=e,e=function(){function t(){}return t.arrayCopy=function(t,e,i,n,s){for(var r=e;r<e+s;r++,n++)i[n]=t[r]},t.setArraySize=function(t,e,i){void 0===i&&(i=0);var n=t.length;if(n==e)return t;if(t.length=e,n<e)for(;n<e;n++)t[n]=i;return t},t.ensureArrayCapacity=function(e,i,n){return void 0===n&&(n=0),e.length>=i?e:t.setArraySize(e,i,n)},t.newArray=function(t,e){for(var i=Array(t),n=0;n<t;n++)i[n]=e;return i},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);e=Array(e);for(var i=0;i<e.length;i++)e[i]=0;return e},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t}(),t.Utils=e,e=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var i=t.bones[e];console.log(i.data.name+", "+i.a+", "+i.b+", "+i.c+", "+i.d+", "+i.worldX+", "+i.worldY)}},t}(),t.DebugUtils=e,e=function(){function t(t){this.items=[],this.instantiator=t}return t.prototype.obtain=function(){return 0<this.items.length?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)t[e].reset&&t[e].reset(),this.items[e]=t[e]},t.prototype.clear=function(){this.items.length=0},t}(),t.Pool=e,e=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}(),t.Vector2=e,e=function(){function t(){this.maxDelta=.064,this.totalTime=this.delta=this.framesPerSecond=0,this.lastTime=Date.now()/1e3,this.frameTime=this.frameCount=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,1<this.frameTime&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameCount=this.frameTime=0)},t}(),t.TimeKeeper=e}(spine||(spine={}));var sp=sp||{};sp.spine=spine,sp=sp||{},sp.VERTEX_INDEX={X1:0,Y1:1,X2:2,Y2:3,X3:4,Y3:5,X4:6,Y4:7},sp.ATTACHMENT_TYPE={REGION:0,BOUNDING_BOX:1,MESH:2,SKINNED_MESH:3},spine=sp.spine,sp.Skeleton=cc.Node.extend({_skeleton:null,_rootBone:null,_timeScale:1,_debugSlots:!1,_debugBones:!1,_premultipliedAlpha:!1,_ownsSkeletonData:null,_atlas:null,ctor:function(t,e,i){cc.Node.prototype.ctor.call(this),0===arguments.length?this.init():this.initWithArgs(t,e,i)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new sp.Skeleton.CanvasRenderCmd(this):new sp.Skeleton.WebGLRenderCmd(this)},init:function(){cc.Node.prototype.init.call(this),this._premultipliedAlpha=cc._renderType===cc.game.RENDER_TYPE_WEBGL&&cc.OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA},onEnter:function(){cc.Node.prototype.onEnter.call(this),this.scheduleUpdate()},onExit:function(){this.unscheduleUpdate(),cc.Node.prototype.onExit.call(this)},setDebugSolots:function(t){this._debugSlots=t},setDebugBones:function(t){this._debugBones=t},setDebugSlotsEnabled:function(t){this._debugSlots=t},getDebugSlotsEnabled:function(){return this._debugSlots},setDebugBonesEnabled:function(t){this._debugBones=t},getDebugBonesEnabled:function(){return this._debugBones},setTimeScale:function(t){this._timeScale=t},getTimeScale:function(){return this._timeScale},initWithArgs:function(t,e,i){if(cc.isString(t)){if(cc.isString(e)){var n=cc.loader.getRes(e);sp._atlasLoader.setAtlasFile(e),e=new spine.TextureAtlas(n,sp._atlasLoader.load.bind(sp._atlasLoader))}i=i||1/cc.director.getContentScaleFactor(),n=new spine.AtlasAttachmentLoader(e),(n=new spine.SkeletonJson(n)).scale=i,t=cc.loader.getRes(t),t=n.readSkeletonData(t),e.dispose(n),i=!0}else i=e;this.setSkeletonData(t,i),this.init()},getBoundingBox:function(){for(var t,e=cc.FLT_MAX,i=cc.FLT_MAX,n=cc.FLT_MIN,s=cc.FLT_MIN,r=this.getScaleX(),o=this.getScaleY(),a=this._skeleton.slots,c=spine.RegionAttachment,h=0,l=a.length;h<l;++h){var u=(t=a[h]).attachment;u&&u instanceof spine.RegionAttachment&&(t=u.updateWorldVertices(t,!1),e=Math.min(e,t[c.X1]*r,t[c.X4]*r,t[c.X2]*r,t[c.X3]*r),i=Math.min(i,t[c.Y1]*o,t[c.Y4]*o,t[c.Y2]*o,t[c.Y3]*o),n=Math.max(n,t[c.X1]*r,t[c.X4]*r,t[c.X2]*r,t[c.X3]*r),s=Math.max(s,t[c.Y1]*o,t[c.Y4]*o,t[c.Y2]*o,t[c.Y3]*o))}return r=this.getPosition(),cc.rect(r.x+e,r.y+i,n-e,s-i)},updateWorldTransform:function(){this._skeleton.updateWorldTransform()},setToSetupPose:function(){this._skeleton.setToSetupPose()},setBonesToSetupPose:function(){this._skeleton.setBonesToSetupPose()},setSlotsToSetupPose:function(){this._skeleton.setSlotsToSetupPose()},findBone:function(t){return this._skeleton.findBone(t)},findSlot:function(t){return this._skeleton.findSlot(t)},setSkin:function(t){return this._skeleton.setSkinByName(t)},getAttachment:function(t,e){return this._skeleton.getAttachmentByName(t,e)},setAttachment:function(t,e){this._skeleton.setAttachment(t,e)},setPremultipliedAlpha:function(t){this._premultipliedAlpha=t},isPremultipliedAlpha:function(){return this._premultipliedAlpha},setSkeletonData:function(t,e){null!=t.width&&null!=t.height&&this.setContentSize(t.width/cc.director.getContentScaleFactor(),t.height/cc.director.getContentScaleFactor()),this._skeleton=new spine.Skeleton(t),this._skeleton.updateWorldTransform(),this._rootBone=this._skeleton.getRootBone(),this._ownsSkeletonData=e,this._renderCmd._createChildFormSkeletonData()},getTextureAtlas:function(t){return t.region},getBlendFunc:function(){var t=this._skeleton.drawOrder[0];return t?this._renderCmd._getBlendFunc(t.data.blendMode,this._premultipliedAlpha):{}},setBlendFunc:function(t,e){},update:function(t){this._skeleton.update(t)}}),cc.defineGetterSetter(sp.Skeleton.prototype,"opacityModifyRGB",sp.Skeleton.prototype.isOpacityModifyRGB),cc.defineGetterSetter(sp.Skeleton.prototype,"_blendFunc",sp.Skeleton.prototype.getBlendFunc),cc.defineGetterSetter(sp.Skeleton.prototype,"_texture",(function(){return this._renderCmd._currTexture})),sp.Skeleton.create=function(t,e,i){return new sp.Skeleton(t,e,i)},sp._atlasLoader={spAtlasFile:null,setAtlasFile:function(t){this.spAtlasFile=t},load:function(t){t=cc.path.join(cc.path.dirname(this.spAtlasFile),t),t=cc.textureCache.addImage(t);var e=new sp.SkeletonTexture({width:t.getPixelsWide(),height:t.getPixelsHigh()});return e.setRealTexture(t),e},unload:function(t){}},sp.ANIMATION_EVENT_TYPE={START:0,INTERRUPT:1,END:2,DISPOSE:3,COMPLETE:4,EVENT:5},sp.TrackEntryListeners=function(t,e,i,n,s,r){this.startListener=t||null,this.endListener=e||null,this.completeListener=i||null,this.eventListener=n||null,this.interruptListener=s||null,this.disposeListener=r||null,this.skeletonNode=this.callbackTarget=this.callback=null};var proto=sp.TrackEntryListeners.prototype;function UtilNotBuild(){}proto.start=function(t){this.startListener&&this.startListener(t),this.callback&&this.callback.call(this.callbackTarget,this.skeletonNode,t,sp.ANIMATION_EVENT_TYPE.START,null,0)},proto.interrupt=function(t){this.interruptListener&&this.interruptListener(t),this.callback&&this.callback.call(this.callbackTarget,this.skeletonNode,t,sp.ANIMATION_EVENT_TYPE.INTERRUPT,null,0)},proto.end=function(t){this.endListener&&this.endListener(t),this.callback&&this.callback.call(this.callbackTarget,this.skeletonNode,t,sp.ANIMATION_EVENT_TYPE.END,null,0)},proto.dispose=function(t){this.disposeListener&&this.disposeListener(t),this.callback&&this.callback.call(this.callbackTarget,this.skeletonNode,t,sp.ANIMATION_EVENT_TYPE.DISPOSE,null,0)},proto.complete=function(t){var e=Math.floor(t.trackTime/t.animationEnd);this.completeListener&&this.completeListener(t,e),this.callback&&this.callback.call(this.callbackTarget,this.skeletonNode,t,sp.ANIMATION_EVENT_TYPE.COMPLETE,null,e)},proto.event=function(t,e){this.eventListener&&this.eventListener(t,e),this.callback&&this.callback.call(this.callbackTarget,this.skeletonNode,t,sp.ANIMATION_EVENT_TYPE.EVENT,e,0)},sp.TrackEntryListeners.getListeners=function(t){return t.listener||(t.listener=new sp.TrackEntryListeners),t.listener},sp.SkeletonAnimation=sp.Skeleton.extend({_state:null,_ownsAnimationStateData:!1,_listener:null,init:function(){sp.Skeleton.prototype.init.call(this),this._ownsAnimationStateData=!0,this.setAnimationStateData(new spine.AnimationStateData(this._skeleton.data))},setAnimationStateData:function(t){t=new spine.AnimationState(t),this._listener=new sp.TrackEntryListeners,t.rendererObject=this,t.addListener(this._listener),this._state=t},setMix:function(t,e,i){this._state.data.setMixWith(t,e,i)},setAnimationListener:function(t,e){this._listener.callbackTarget=t,this._listener.callback=e,this._listener.skeletonNode=this},setAnimation:function(t,e,i){var n=this._skeleton.data.findAnimation(e);return n?this._state.setAnimationWith(t,n,i):(cc.log("Spine: Animation not found: "+e),null)},addAnimation:function(t,e,i,n){n=null==n?0:n;var s=this._skeleton.data.findAnimation(e);return s?this._state.addAnimationWith(t,s,i,n):(cc.log("Spine: Animation not found:"+e),null)},findAnimation:function(t){return this._skeleton.data.findAnimation(t)},getCurrent:function(t){return this._state.getCurrent(t)},clearTracks:function(){this._state.clearTracks()},clearTrack:function(t){this._state.clearTrack(t)},update:function(t){this._super(t),t*=this._timeScale,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty),this._state.update(t),this._state.apply(this._skeleton),this._skeleton.updateWorldTransform(),this._renderCmd._updateChild()},setStartListener:function(t){this._listener.startListener=t},setInterruptListener:function(t){this._listener.interruptListener=t},setEndListener:function(t){this._listener.endListener=t},setDisposeListener:function(t){this._listener.disposeListener=t},setCompleteListener:function(t){this._listener.completeListener=t},setEventListener:function(t){this._listener.eventListener=t},setTrackStartListener:function(t,e){sp.TrackEntryListeners.getListeners(t).startListener=e},setTrackInterruptListener:function(t,e){sp.TrackEntryListeners.getListeners(t).interruptListener=e},setTrackEndListener:function(t,e){sp.TrackEntryListeners.getListeners(t).endListener=e},setTrackDisposeListener:function(t,e){sp.TrackEntryListeners.getListeners(t).disposeListener=e},setTrackCompleteListener:function(t,e){sp.TrackEntryListeners.getListeners(t).completeListener=e},setTrackEventListener:function(t,e){sp.TrackEntryListeners.getListeners(t).eventListener=e},getState:function(){return this._state}}),sp.SkeletonAnimation.createWithJsonFile=sp.SkeletonAnimation.create=function(t,e,i){return new sp.SkeletonAnimation(t,e,i)},sp.SkeletonTexture=function(t){sp.spine.Texture.call(this,t)},cc.inherits(sp.SkeletonTexture,sp.spine.Texture),cc.extend(sp.SkeletonTexture.prototype,{name:"sp.SkeletonTexture",_texture:null,setRealTexture:function(t){this._texture=t},getRealTexture:function(){return this._texture},setFilters:function(t,e){if(cc._renderType===cc.game.RENDER_TYPE_WEBGL){var i=cc._renderContext;this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e)}},setWraps:function(t,e){if(cc._renderType===cc.game.RENDER_TYPE_WEBGL){var i=cc._renderContext;this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e)}},dispose:function(){},bind:function(){cc._renderType===cc.game.RENDER_TYPE_WEBGL&&cc.glBindTexture2D(this._texture)}}),function(){var t=sp.spine;sp.Skeleton.CanvasRenderCmd=function(t){this._rootCtor(t),this._needDraw=!0};var e=sp.Skeleton.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);e.constructor=sp.Skeleton.CanvasRenderCmd,e.rendering=function(e,i,n){var s,r,o,a,c=this._node;e=e||cc._renderContext;var h=c._skeleton,l=h.drawOrder;for(s=0,r=l.length;s<r;s++)(a=(o=l[s])._slotNode)._visible&&a._renderCmd&&o.currentSprite&&(a._renderCmd.transform(this,!0),o.currentSprite._renderCmd.rendering(e,i,n),a._renderCmd._dirtyFlag=o.currentSprite._renderCmd._dirtyFlag=0);if(c._debugSlots||c._debugBones){if(e.setTransform(this._worldTransform,i,n),e.setGlobalAlpha(1),e=cc._drawingUtil,c._debugSlots)for(e.setDrawColor(0,0,255,255),e.setLineWidth(1),n=[],s=0,r=h.slots.length;s<r;s++)(o=h.drawOrder[s]).attachment&&o.attachment instanceof t.RegionAttachment&&(i=o.attachment,this._updateRegionAttachmentSlot(i,o,n),e.drawPoly(n,4,!0));if(c._debugBones){for(e.setLineWidth(2),e.setDrawColor(255,0,0,255),s=0,r=h.bones.length;s<r;s++)c=h.bones[s],e.drawLine({x:c.worldX,y:c.worldY},{x:c.data.length*c.a+c.worldX,y:c.data.length*c.c+c.worldY});for(e.setPointSize(4),e.setDrawColor(0,0,255,255),s=0,r=h.bones.length;s<r;s++)c=h.bones[s],e.drawPoint({x:c.worldX,y:c.worldY}),0===s&&e.setDrawColor(0,255,0,255)}}},e.updateStatus=function(){this.originUpdateStatus(),this._updateCurrentRegions(),this._regionFlag=cc.Node.CanvasRenderCmd.RegionStatus.DirtyDouble,this._dirtyFlag&=~cc.Node._dirtyFlags.contentDirty},e.getLocalBB=function(){return this._node.getBoundingBox()},e._updateRegionAttachmentSlot=function(e,i,n){n&&(e=e.updateWorldVertices(i,!1),i=t.RegionAttachment,n.length=0,n.push(cc.p(e[i.X1],e[i.Y1])),n.push(cc.p(e[i.X4],e[i.Y4])),n.push(cc.p(e[i.X3],e[i.Y3])),n.push(cc.p(e[i.X2],e[i.Y2])))},e._createChildFormSkeletonData=function(){for(var e,i,n=this._node._skeleton,s=0,r=n.slots.length;s<r;s++){var o=n.slots[s];i=o.attachment;var a=new cc.Node;o._slotNode=a,i instanceof t.RegionAttachment&&(e=i.region.name,i=this._createSprite(o,i),o.currentSprite=i,o.currentSpriteName=e,a.addChild(i))}};var i=function(t,e,i){var n=i.region,s=new cc.Rect(n.x,n.y,n.width,n.height);t.initWithTexture(e,s,n.rotate,!1),t._rect.width=i.width,t._rect.height=i.height,t.setContentSize(i.width,i.height),t.setRotation(-i.rotation),t.setScale(n.width/n.originalWidth*i.scaleX,n.height/n.originalHeight*i.scaleY)};e._createSprite=function(t,e){var n=e.region,s=n.texture.getRealTexture(),r=new cc.Sprite;return s.isLoaded()?i(r,s,e):s.addEventListener("load",(function(){i(r,s,e)}),this),t.sprites=t.sprites||{},t.sprites[n.name]=r},e._updateChild=function(){var e,i,n,s,r,o,a,c=this._node._skeleton.slots,h=this._displayedColor,l=this._displayedOpacity;for(e=0,i=c.length;e<i;e++)if(o=(r=c[e]).attachment,a=r._slotNode,o){if(o instanceof t.RegionAttachment){if(o.region&&(!r.currentSpriteName||r.currentSpriteName!==o.name)){var u=o.region.name;void 0!==r.currentSprite&&r.currentSprite.setVisible(!1),r.sprites=r.sprites||{},void 0!==r.sprites[u]?r.sprites[u].setVisible(!0):(n=this._createSprite(r,o),a.addChild(n)),r.currentSprite=r.sprites[u],r.currentSpriteName=u}u=r.bone,0===o.region.offsetX&&0===o.region.offsetY?(n=o.x,s=o.y):(n=.5*(o.offset[0]+o.offset[4]),s=.5*(o.offset[1]+o.offset[5])),a.setPosition(u.worldX+n*u.a+s*u.b,u.worldY+n*u.c+s*u.d),a.setScale(u.getWorldScaleX(),u.getWorldScaleY()),(n=r.currentSprite)._flippedX=u.skeleton.flipX,n._flippedY=u.skeleton.flipY,n._flippedY||n._flippedX?(a.setRotation(u.getWorldRotationX()),n.setRotation(o.rotation)):(a.setRotation(-u.getWorldRotationX()),n.setRotation(-o.rotation)),n._renderCmd._displayedOpacity=0|l*r.color.a,n.setColor(cc.color(0|h.r*r.color.r,0|h.g*r.color.g,0|h.b*r.color.b)),n._renderCmd._updateColor()}else if(!(o instanceof t.MeshAttachment)){a.setVisible(!1);continue}a.setVisible(!0)}else a.setVisible(!1)}}(),function(){var t=sp.spine;sp.Skeleton.WebGLRenderCmd=function(t){this._rootCtor(t),this._needDraw=!0,this._matrix=new cc.math.Matrix4,this._matrix.identity(),this._currTexture=null,this._currBlendFunc={},this.vertexType=cc.renderer.VertexType.CUSTOM,this.setShaderProgram(cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR))};var e=sp.Skeleton.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);e.constructor=sp.Skeleton.WebGLRenderCmd,e.uploadData=function(e,i,n){var s,r,o,a=this._node,c=this._displayedColor,h=a._skeleton,l=a._premultipliedAlpha;h.r=c.r/255,h.g=c.g/255,h.b=c.b/255,h.a=this._displayedOpacity/255,l&&(h.r*=h.a,h.g*=h.a,h.b*=h.a);var u=null;for(this._node._debugSlots&&(u=[]),c=0,o=h.drawOrder.length;c<o;c++)if((r=h.drawOrder[c]).attachment){var d=0;if((s=r.attachment)instanceof t.RegionAttachment)d=6;else{if(!(s instanceof t.MeshAttachment))continue;d=s.regionUVs.length/2}if(0!==d){this._currTexture=a.getTextureAtlas(s).texture.getRealTexture();var _=cc.renderer._updateBatchedInfo(this._currTexture,this._getBlendFunc(r.data.blendMode,l),this._glProgramState);if(!_&&n+6*d>e.length&&(cc.renderer._batchRendering(),_=!0),_&&(n=0),_=null,s instanceof t.RegionAttachment)_=this._uploadRegionAttachmentData(s,r,l,e,i,n);else{if(!(s instanceof t.MeshAttachment))continue;this._uploadMeshAttachmentData(s,r,l,e,i,n)}this._node._debugSlots&&(u[c]=_),s instanceof t.RegionAttachment?cc.renderer._increaseBatchingSize(d,cc.renderer.VertexType.TRIANGLE):cc.renderer._increaseBatchingSize(d,cc.renderer.VertexType.CUSTOM,s.triangles),n+=6*d}}if(a._debugBones||a._debugSlots){if(cc.renderer._batchRendering(),c=this._worldTransform,(o=this._matrix.mat)[0]=c.a,o[4]=c.c,o[12]=c.tx,o[1]=c.b,o[5]=c.d,o[13]=c.ty,cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW),cc.current_stack.stack.push(cc.current_stack.top),cc.current_stack.top=this._matrix,e=cc._drawingUtil,a._debugSlots&&u&&0<u.length)for(e.setDrawColor(0,0,255,255),e.setLineWidth(1),c=0,o=h.slots.length;c<o;c++)(i=u[c])&&e.drawPoly(i,4,!0);if(a._debugBones){for(e.setLineWidth(2),e.setDrawColor(255,0,0,255),c=0,o=h.bones.length;c<o;c++)u=(a=h.bones[c]).data.length*a.a+a.worldX,i=a.data.length*a.c+a.worldY,e.drawLine(cc.p(a.worldX,a.worldY),cc.p(u,i));for(e.setPointSize(4),e.setDrawColor(0,0,255,255),c=0,o=h.bones.length;c<o;c++)a=h.bones[c],e.drawPoint(cc.p(a.worldX,a.worldY)),0==c&&e.setDrawColor(0,255,0,255)}cc.kmGLPopMatrix()}return 0},e._getBlendFunc=function(e,i){var n=this._currBlendFunc;switch(e){case t.BlendMode.Normal:n.src=i?cc.ONE:cc.SRC_ALPHA,n.dst=cc.ONE_MINUS_SRC_ALPHA;break;case t.BlendMode.Additive:n.src=i?cc.ONE:cc.SRC_ALPHA,n.dst=cc.ONE;break;case t.BlendMode.Multiply:n.src=cc.DST_COLOR,n.dst=cc.ONE_MINUS_SRC_ALPHA;break;case t.BlendMode.Screen:n.src=cc.ONE,n.dst=cc.ONE_MINUS_SRC_COLOR;break;default:n=this._node._blendFunc}return n},e._createChildFormSkeletonData=function(){},e._updateChild=function(){},e._uploadRegionAttachmentData=function(e,i,n,s,r,o){var a=(h=this._displayedColor).r,c=h.g,h=h.b,l=this._displayedOpacity;e=e.updateWorldVertices(i,n),i=(g=this._worldTransform).a,n=g.b;for(var u=g.c,d=g.d,_=g.tx,g=g.ty,f=this._node.vertexZ,p=0;6>p;p++){var m=4>p?p%3:p-2,T=e[8*m],S=e[8*m+1],y=T*n+S*d+g,C=e[8*m+5]*l<<24|e[8*m+4]*h<<16|e[8*m+3]*c<<8|e[8*m+2]*a;s[o]=T*i+S*u+_,s[o+1]=y,s[o+2]=f,r[o+3]=C,s[o+4]=e[8*m+6],s[o+5]=e[8*m+7],o+=6}if(this._node._debugSlots)return s=t.RegionAttachment,[cc.p(e[s.X1],e[s.Y1]),cc.p(e[s.X2],e[s.Y2]),cc.p(e[s.X3],e[s.Y3]),cc.p(e[s.X4],e[s.Y4])]},e._uploadMeshAttachmentData=function(t,e,i,n,s,r){var o=(u=this._worldTransform).a,a=u.b,c=u.c,h=u.d,l=u.tx,u=u.ty,d=this._node.vertexZ;t=t.updateWorldVertices(e,i),e=(_=this._displayedColor).r,i=_.g;for(var _=_.b,g=this._displayedOpacity,f=0,p=t.length;f<p;f+=8){var m=t[f],T=t[f+1],S=m*c+T*h+u,y=t[f+5]*g<<24|t[f+4]*_<<16|t[f+3]*i<<8|t[f+2]*e;n[r]=m*o+T*a+l,n[r+1]=S,n[r+2]=d,s[r+3]=y,n[r+4]=t[f+6],n[r+5]=t[f+7],r+=6}}}(),cc.pool={_pool:{},_releaseCB:function(){this.release()},_autoRelease:function(t){var e=void 0!==t._running&&!t._running;cc.director.getScheduler().schedule(this._releaseCB,t,0,0,0,e)},putInPool:function(t){var e=t.constructor.prototype.__pid;if(!e){var i={writable:!0,enumerable:!1,configurable:!0};i.value=ClassManager.getNewID(),Object.defineProperty(t.constructor.prototype,"__pid",i)}this._pool[e]||(this._pool[e]=[]),t.retain&&t.retain(),t.unuse&&t.unuse(),this._pool[e].push(t)},hasObject:function(t){return!(!(t=this._pool[t.prototype.__pid])||0===t.length)},removeObject:function(t){var e=t.constructor.prototype.__pid;if(e&&(e=this._pool[e]))for(var i=0;i<e.length;i++)t===e[i]&&(t.release&&t.release(),e.splice(i,1))},getFromPool:function(t){if(this.hasObject(t)){var e=this._pool[t.prototype.__pid],i=Array.prototype.slice.call(arguments);return i.shift(),(e=e.pop()).reuse&&e.reuse.apply(e,i),cc.sys.isNative&&e.release&&this._autoRelease(e),e}},drainAllPools:function(){for(var t in this._pool)for(var e=0;e<this._pool[t].length;e++){var i=this._pool[t][e];i.release&&i.release()}this._pool={}}},function(){if(void 0!==cc){var a=function(){};a.prototype={constructor:a,getInstance:function(){return this},loadPlugin:function(t){},unloadPlugin:function(t){}};var b=function(){};b.prototype={constructor:b,setDebugMode:function(t){},startSession:function(t){},setCaptureUncaughtException:function(t){},callFuncWithParam:function(t){if("function"==typeof this[t])return this[t].apply(this,Array.prototype.splice.call(arguments,1));cc.log("function is not define")},callStringFuncWithParam:function(t){this.callFuncWithParam.apply(arguments)},getPluginName:function(){return this._name},getPluginVersion:function(){return this._version}},b.extend=function(a,c){var d,h={};for(d in b.prototype)h[d]=b.prototype[d];for(d in c)h[d]=c[d];return d=eval("(function "+a+"Plugin(){})"),h.constructor=d,d.prototype=h,d};var c=function(t,e){var i=plugin.PluginParam.ParamType;switch(t){case i.TypeInt:i=parseInt(e);break;case i.TypeFloat:i=parseFloat(e);break;case i.TypeBool:i=Boolean(e);break;case i.TypeString:i=String(e);break;case i.TypeStringMap:default:i=e}return i};c.ParamType={TypeInt:1,TypeFloat:2,TypeBool:3,TypeString:4,TypeStringMap:5},c.AdsResultCode={AdsReceived:0,FullScreenViewShown:1,FullScreenViewDismissed:2,PointsSpendSucceed:3,PointsSpendFailed:4,NetworkError:5,UnknownError:6},c.PayResultCode={PaySuccess:0,PayFail:1,PayCancel:2,PayTimeOut:3},c.ShareResultCode={ShareSuccess:0,ShareFail:1,ShareCancel:2,ShareTimeOut:3};var d={},a={extend:function(t,e){var i=cc.game.config&&cc.game.config.plugin||{};d[t]=new(b.extend(t,e)),"function"==typeof d[t].ctor&&d[t].ctor(i[t])},PluginList:d,PluginParam:c,PluginManager:new a};window.plugin=a}}(),function(t,e,i,n,s){var r=window.console;if(r&&604800<Math.floor((new Date).getTime()/1e3)-e&&r.warn("The Facebook JSSDK is more than 7 days old."),!window[i]&&window.JSON){var o=window[i]={__buffer:{replay:function(){for(var t=this,e=function(e){var n=window[i];t.calls[e][0].split(".").forEach((function(t){return n=n[t]})),n.apply(null,t.calls[e][1])},n=0;n<this.calls.length;n++)e(n);this.calls=[]},calls:[],opts:null},getUserID:function(){return""},getAuthResponse:function(){return null},getAccessToken:function(){return null},init:function(t){o.__buffer.opts=t}};for(e=0;e<n.length;e++)if(!((r=n[e])in o)){for(var a=r.split("."),c=a.pop(),h=o,l=0;l<a.length;l++)h=h[a[l]]||(h[a[l]]={});h[c]=function(t){if("init"!==t)return function(){o.__buffer.calls.push([t,Array.prototype.slice.call(arguments)])}}(r)}(l=document.createElement("script")).src="https://connect.facebook.net/vi_VN/sdk.js?hash=19be1e5c79f77e217e849e620804f33b",l.async=!0,l.crossOrigin="anonymous",(a=document.getElementsByTagName("script")[0]).parentNode&&a.parentNode.insertBefore(l,a)}}(0,1662457578,"FB","AppEvents.EventNames AppEvents.ParameterNames AppEvents.activateApp AppEvents.clearAppVersion AppEvents.clearUserID AppEvents.getAppVersion AppEvents.getUserID AppEvents.logEvent AppEvents.logPageView AppEvents.logPurchase AppEvents.setAppVersion AppEvents.setUserID AppEvents.updateUserProperties Canvas.Plugin.showPluginElement Canvas.Plugin.hidePluginElement Canvas.Prefetcher.addStaticResource Canvas.Prefetcher.setCollectionMode Canvas.getPageInfo Canvas.scrollTo Canvas.setAutoGrow Canvas.setDoneLoading Canvas.setSize Canvas.setUrlHandler Canvas.startTimer Canvas.stopTimer Event.subscribe Event.unsubscribe XFBML.parse addFriend api getAccessToken getAuthResponse getLoginStatus getUserID init login logout publish share ui".split(" ")),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Cropper=e()}(this,(function(){function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function e(e){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?t(Object(n),!0).forEach((function(t){var i=n[t];(t=o(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function s(t){var e;if(!(e=Array.isArray(t)?r(t):void 0)&&!(e="undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"]?Array.from(t):void 0)){t:{if(t){if("string"==typeof t){t=r(t,void 0);break t}if("Object"===(e=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e){t=Array.from(t);break t}if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)){t=r(t,void 0);break t}}t=void 0}if(!t)throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");e=t}return e}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}function o(t){t:if("object"==typeof t&&null!==t){var e=t[Symbol.toPrimitive];if(void 0!==e){if("object"!=typeof(t=e.call(t,"string")))break t;throw new TypeError("@@toPrimitive must return a primitive value.")}t=String(t)}return"symbol"==typeof t?t:String(t)}function a(t){return"number"==typeof t&&!$(t)}function c(t){return void 0===t}function h(t){return"object"===i(t)&&null!==t}function l(t){if(!h(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&tt.call(i,"isPrototypeOf")}catch(t){return!1}}function u(t){return"function"==typeof t}function d(t){return Array.from?Array.from(t):et.call(t)}function _(t,e){return t&&u(e)&&(Array.isArray(t)||a(t.length)?d(t).forEach((function(i,n){e.call(t,i,n,t)})):h(t)&&Object.keys(t).forEach((function(i){e.call(t,t[i],i,t)}))),t}function g(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e11;return nt.test(t)?Math.round(t*e)/e:t}function f(t,e){var i=t.style;_(e,(function(t,e){st.test(e)&&a(t)&&(t="".concat(t,"px")),i[e]=t}))}function p(t,e){if(e)if(a(t.length))_(t,(function(t){p(t,e)}));else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?0>i.indexOf(e)&&(t.className="".concat(i," ").concat(e)):t.className=e}}function m(t,e){e&&(a(t.length)?_(t,(function(t){m(t,e)})):t.classList?t.classList.remove(e):0<=t.className.indexOf(e)&&(t.className=t.className.replace(e,"")))}function T(t,e,i){e&&(a(t.length)?_(t,(function(t){T(t,e,i)})):i?p(t,e):m(t,e))}function S(t){return t.replace(rt,"$1-$2").toLowerCase()}function y(t,e){return h(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(S(e)))}function C(t,e,i){h(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(S(e)),i)}function E(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},s=i;e.trim().split(ot).forEach((function(e){if(!at){var r=t.listeners;r&&r[e]&&r[e][i]&&(s=r[e][i],delete r[e][i],0===Object.keys(r[e]).length&&delete r[e],0===Object.keys(r).length&&delete t.listeners)}t.removeEventListener(e,s,n)}))}function A(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},s=i;e.trim().split(ot).forEach((function(e){if(n.once&&!at){var r=t.listeners,o=void 0===r?{}:r;s=function(){delete o[e][i],t.removeEventListener(e,s,n);for(var r=arguments.length,a=Array(r),c=0;c<r;c++)a[c]=arguments[c];i.apply(t,a)},o[e]||(o[e]={}),o[e][i]&&t.removeEventListener(e,o[e][i],n),o[e][i]=s,t.listeners=o}t.addEventListener(e,s,n)}))}function b(t,e,i){var n;return u(Event)&&u(CustomEvent)?n=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(n)}function v(t){return{left:(t=t.getBoundingClientRect()).left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}function I(t){return null!==(t=t.match(ht))&&(t[1]!==ct.protocol||t[2]!==ct.hostname||t[3]!==ct.port)}function x(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function R(t){var e=t.rotate,i=t.scaleX,n=t.scaleY,s=t.translateX;t=t.translateY;var r=[];return a(s)&&0!==s&&r.push("translateX(".concat(s,"px)")),a(t)&&0!==t&&r.push("translateY(".concat(t,"px)")),a(e)&&0!==e&&r.push("rotate(".concat(e,"deg)")),a(i)&&1!==i&&r.push("scaleX(".concat(i,")")),a(n)&&1!==n&&r.push("scaleY(".concat(n,")")),{WebkitTransform:e=r.length?r.join(" "):"none",msTransform:e,transform:e}}function P(t){var i=e({},t),n=0;return _(t,(function(t,e){delete i[e],_(i,(function(e){var i=Math.abs(t.startX-e.startX),s=Math.abs(t.startY-e.startY),r=Math.abs(t.endX-e.endX);e=Math.abs(t.endY-e.endY),i=Math.sqrt(i*i+s*s),r=(Math.sqrt(r*r+e*e)-i)/i,Math.abs(r)>Math.abs(n)&&(n=r)}))})),n}function w(t,i){var n=t.pageX,s=t.pageY,r={endX:n,endY:s};return i?r:e({startX:n,startY:s},r)}function B(t){var e=t.aspectRatio,i=t.height,n=t.width,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"contain",r=0<n&&1/0>n,o=0<i&&1/0>i;return r&&o?(r=i*e,"contain"===s&&r>n||"cover"===s&&r<n?i=n/e:n=i*e):r?i=n/e:o&&(n=i*e),{width:n,height:i}}var L="undefined"!=typeof window&&void 0!==window.document,O=L?window:{},N=!(!L||!O.document.documentElement)&&"ontouchstart"in O.document.documentElement,k=!!L&&"PointerEvent"in O,D="".concat("cropper","-crop"),M="".concat("cropper","-disabled"),F="".concat("cropper","-hidden"),G="".concat("cropper","-hide"),W="".concat("cropper","-invisible"),z="".concat("cropper","-modal"),V="".concat("cropper","-move"),U="".concat("cropper","Action"),H="".concat("cropper","Preview"),Y=k?"pointerdown":N?"touchstart":"mousedown",j=k?"pointermove":N?"touchmove":"mousemove",X=k?"pointerup pointercancel":N?"touchend touchcancel":"mouseup",q=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Z=/^data:/,Q=/^data:image\/jpeg;base64,/,K=/^img|canvas$/i,J={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},$=Number.isNaN||O.isNaN,tt=Object.prototype.hasOwnProperty,et=Array.prototype.slice,it=Object.assign||function(t){for(var e=arguments.length,i=Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return h(t)&&0<i.length&&i.forEach((function(e){h(e)&&Object.keys(e).forEach((function(i){t[i]=e[i]}))})),t},nt=/\.\d*(?:0|9){12}\d*$/,st=/^width|height|left|top|marginLeft|marginTop$/,rt=/([a-z\d])([A-Z])/g,ot=/\s\s*/,at=function(){var t=!1;if(L){var e=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});O.addEventListener("test",i,n),O.removeEventListener("test",i,n)}return t}(),ct=O.location,ht=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i,lt=String.fromCharCode,ut=/^data:.*,/,dt=O.Cropper;N=function(){function t(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");if(!e||!K.test(e.tagName))throw Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=it({},J,l(i)&&i),this.disabled=this.cropped=!1,this.pointers={},this.sizing=this.sized=this.replaced=this.reloading=this.ready=!1,this.init()}return function(t,e,i){e&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"init",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e.cropper){if(e.cropper=this,"img"===i){if(this.isImg=!0,this.originalUrl=t=e.getAttribute("src")||"",!t)return;t=e.src}else"canvas"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,n=this.options;if(n.rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer)if(Z.test(t))Q.test(t)?this.read(function(t){t=t.replace(ut,"");var e=atob(t);t=new ArrayBuffer(e.length);var i=new Uint8Array(t);return _(i,(function(t,n){i[n]=e.charCodeAt(n)})),t}(t)):this.clone();else{var s=new XMLHttpRequest,r=this.clone.bind(this);this.reloading=!0,this.xhr=s,s.onabort=r,s.onerror=r,s.ontimeout=r,s.onprogress=function(){"image/jpeg"!==s.getResponseHeader("content-type")&&s.abort()},s.onload=function(){e.read(s.response)},s.onloadend=function(){e.reloading=!1,e.xhr=null},n.checkCrossOrigin&&I(t)&&i.crossOrigin&&(t=x(t)),s.open("GET",t,!0),s.responseType="arraybuffer",s.withCredentials="use-credentials"===i.crossOrigin,s.send()}else this.clone()}}},{key:"read",value:function(t){var e,i,n=this.options,s=this.imageData;e=new DataView(t);try{var r,o,a;if(255===e.getUint8(0)&&216===e.getUint8(1))for(var c=e.byteLength,h=2;h+1<c;){if(255===e.getUint8(h)&&225===e.getUint8(h+1)){o=h;break}h+=1}if(o){c=o+10;var l=o+4;for(o=4,h="",o+=l;l<o;l+=1)h+=lt(e.getUint8(l));if("Exif"===h){var u=e.getUint16(c);if(((r=18761===u)||19789===u)&&42===e.getUint16(c+2,r)){var _=e.getUint32(c+4,r);8<=_&&(a=c+_)}}}if(a){var g,f,p=e.getUint16(a,r);for(f=0;f<p;f+=1)if(g=a+12*f+2,274===e.getUint16(g,r)){g+=8,i=e.getUint16(g,r),e.setUint16(g,1,r);break}}}catch(t){i=1}if(e=i,i=0,a=r=1,1<e){for(i=[],t=new Uint8Array(t);0<t.length;)i.push(lt.apply(null,d(t.subarray(0,8192)))),t=t.subarray(8192);switch(this.url="data:".concat("image/jpeg",";base64,").concat(btoa(i.join(""))),t=0,r=i=1,e){case 2:i=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,i=-1;break;case 8:t=-90}i=(t={rotate:t,scaleX:i,scaleY:r}).rotate,r=t.scaleX,a=t.scaleY}n.rotatable&&(s.rotate=i),n.scalable&&(s.scaleX=r,s.scaleY=a),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,n=e;this.options.checkCrossOrigin&&I(e)&&(i||(i="anonymous"),n=x(e)),this.crossOrigin=i,this.crossOriginUrl=n;var s=document.createElement("img");i&&(s.crossOrigin=i),s.src=n||e,s.alt=t.alt||"The image to crop",this.image=s,s.onload=this.start.bind(this),s.onerror=this.stop.bind(this),p(s,G),t.parentNode&&t.parentNode.insertBefore(s,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=O.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(O.navigator.userAgent),n=function(e,i){it(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.initialImageData=it({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(e.naturalWidth&&!i)n(e.naturalWidth,e.naturalHeight);else{var s=document.createElement("img"),r=document.body||document.documentElement;this.sizingImage=s,s.onload=function(){n(s.width,s.height),i||r.removeChild(s)},s.src=e.src,i||(s.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(s))}}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,n=t.parentNode;(s=document.createElement("div")).innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var s,r=(s=s.querySelector(".".concat("cropper","-container"))).querySelector(".".concat("cropper","-canvas")),o=s.querySelector(".".concat("cropper","-drag-box")),a=s.querySelector(".".concat("cropper","-crop-box")),c=a.querySelector(".".concat("cropper","-face"));this.container=n,this.cropper=s,this.canvas=r,this.dragBox=o,this.cropBox=a,this.viewBox=s.querySelector(".".concat("cropper","-view-box")),this.face=c,r.appendChild(i),p(t,F),n.insertBefore(s,t.nextSibling),m(i,G),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,p(a,F),e.guides||p(a.getElementsByClassName("".concat("cropper","-dashed")),F),e.center||p(a.getElementsByClassName("".concat("cropper","-center")),F),e.background&&p(s,"".concat("cropper","-bg")),e.highlight||p(c,W),e.cropBoxMovable&&(p(c,V),C(c,U,"all")),e.cropBoxResizable||(p(a.getElementsByClassName("".concat("cropper","-line")),F),p(a.getElementsByClassName("".concat("cropper","-point")),F)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),u(e.ready)&&A(t,"ready",e.ready,{once:!0}),b(t,"ready")}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),m(this.element,F)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.cropped=this.ready=!1):this.sizing?(this.sizingImage.onload=null,this.sized=this.sizing=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=dt,t}},{key:"setDefaults",value:function(t){it(J,l(t)&&t)}}]),t}();return it(N.prototype,{render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,n=this.cropper,s=Number(e.minContainerWidth);e=Number(e.minContainerHeight);p(n,F),m(t,F),this.containerData=i={width:Math.max(i.offsetWidth,0<=s?s:200),height:Math.max(i.offsetHeight,0<=e?e:100)},f(n,{width:i.width,height:i.height}),p(t,F),m(n,F)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,n=(s=90==Math.abs(e.rotate)%180)?e.naturalHeight:e.naturalWidth,s=n/(e=s?e.naturalWidth:e.naturalHeight),r=t.width,o=t.height;t.height*s>t.width?3===i?r=t.height*s:o=t.width/s:3===i?o=t.width/s:r=t.height*s,this.canvasData=n={aspectRatio:s,naturalWidth:n,naturalHeight:e,width:r,height:o},this.limited=1===i||2===i,this.limitCanvas(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.left=(t.width-n.width)/2,n.top=(t.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCanvasData=it({},n)},limitCanvas:function(t,e){var i=this.options,n=this.containerData,s=this.canvasData,r=this.cropBoxData,o=i.viewMode,a=s.aspectRatio,c=this.cropped&&r;if(t){var h=Number(i.minCanvasWidth)||0;i=Number(i.minCanvasHeight)||0;1<o?(h=Math.max(h,n.width),i=Math.max(i,n.height),3===o&&(i*a>h?h=i*a:i=h/a)):0<o&&(h?h=Math.max(h,c?r.width:0):i?i=Math.max(i,c?r.height:0):c&&(h=r.width,(i=r.height)*a>h?h=i*a:i=h/a)),h=(a=B({aspectRatio:a,width:h,height:i})).width,i=a.height,s.minWidth=h,s.minHeight=i,s.maxWidth=1/0,s.maxHeight=1/0}e&&(o>(c?0:1)?(h=n.width-s.width,a=n.height-s.height,s.minLeft=Math.min(0,h),s.minTop=Math.min(0,a),s.maxLeft=Math.max(0,h),s.maxTop=Math.max(0,a),c&&this.limited&&(s.minLeft=Math.min(r.left,r.left+(r.width-s.width)),s.minTop=Math.min(r.top,r.top+(r.height-s.height)),s.maxLeft=r.left,s.maxTop=r.top,2===o&&(s.width>=n.width&&(s.minLeft=Math.min(0,h),s.maxLeft=Math.max(0,h)),s.height>=n.height&&(s.minTop=Math.min(0,a),s.maxTop=Math.max(0,a))))):(s.minLeft=-s.width,s.minTop=-s.height,s.maxLeft=n.width,s.maxTop=n.height))},renderCanvas:function(t,e){var i=this.canvasData,n=this.imageData;if(e){var s,r={width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0};n=r.width;if(s=r.height,r=r.degree,90===(r=Math.abs(r)%180))s={width:s,height:n};else{var o=r%90*Math.PI/180,a=Math.sin(o),c=Math.cos(o);o=n*c+s*a,n=n*a+s*c;s=90<r?{width:n,height:o}:{width:o,height:n}}n=s.width,s=s.height,r=n/i.naturalWidth*i.width,a=s/i.naturalHeight*i.height,i.left-=(r-i.width)/2,i.top-=(a-i.height)/2,i.width=r,i.height=a,i.aspectRatio=n/s,i.naturalWidth=n,i.naturalHeight=s,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,f(this.canvas,it({width:i.width,height:i.height},R({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,n=e.width/e.naturalWidth*i.naturalWidth,s=e.height/e.naturalHeight*i.naturalHeight;it(i,{width:n,height:s,left:(e.width-n)/2,top:(e.height-s)/2}),f(this.image,it({width:i.width,height:i.height},R(it({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,n=(t=Number(t.autoCropArea)||.8,{width:e.width,height:e.height});i&&(e.height*i>e.width?n.height=n.width/i:n.width=n.height*i),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*t),n.height=Math.max(n.minHeight,n.height*t),n.left=e.left+(e.width-n.width)/2,n.top=e.top+(e.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=it({},n)},limitCropBox:function(t,e){var i=this.options,n=this.containerData,s=this.canvasData,r=this.cropBoxData,o=this.limited,a=i.aspectRatio;if(t){var c=Number(i.minCropBoxWidth)||0,h=(i=Number(i.minCropBoxHeight)||0,o?Math.min(n.width,s.width,s.width+s.left,n.width-s.left):n.width),l=o?Math.min(n.height,s.height,s.height+s.top,n.height-s.top):n.height;c=Math.min(c,n.width),i=Math.min(i,n.height);a&&(c&&i?i*a>c?i=c/a:c=i*a:c?i=c/a:i&&(c=i*a),l*a>h?l=h/a:h=l*a),r.minWidth=Math.min(c,h),r.minHeight=Math.min(i,l),r.maxWidth=h,r.maxHeight=l}e&&(o?(r.minLeft=Math.max(0,s.left),r.minTop=Math.max(0,s.top),r.maxLeft=Math.min(n.width,s.left+s.width)-r.width,r.maxTop=Math.min(n.height,s.top+s.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=n.width-r.width,r.maxTop=n.height-r.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&C(this.face,U,i.width>=e.width&&i.height>=e.height?"move":"all"),f(this.cropBox,it({width:i.width,height:i.height},R({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),b(this.element,"crop",this.getData())}},{initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,n=e?this.crossOriginUrl:this.url,s=t.alt||"The image to preview",r=document.createElement("img");e&&(r.crossOrigin=e),r.src=n,r.alt=s,this.viewBox.appendChild(r),this.viewBoxImage=r,i&&(r=i,"string"==typeof i?r=t.ownerDocument.querySelectorAll(i):i.querySelector&&(r=[i]),this.previews=r,_(r,(function(t){var i=document.createElement("img");C(t,H,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=n,i.alt=s,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)})))},resetPreview:function(){_(this.previews,(function(t){var e=y(t,H);if(f(t,{width:e.width,height:e.height}),t.innerHTML=e.html,h(t[H]))try{delete t[H]}catch(e){t[H]=void 0}else if(t.dataset)try{delete t.dataset[H]}catch(e){t.dataset[H]=void 0}else t.removeAttribute("data-".concat(S(H)))}))},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,n=i.width,s=i.height,r=t.width,o=t.height,a=i.left-e.left-t.left,c=i.top-e.top-t.top;this.cropped&&!this.disabled&&(f(this.viewBoxImage,it({width:r,height:o},R(it({translateX:-a,translateY:-c},t)))),_(this.previews,(function(e){var i,h=(i=y(e,H)).width,l=h,u=i=i.height,d=1;n&&(u=s*(d=h/n)),s&&u>i&&(l=n*(d=i/s),u=i),f(e,{width:l,height:u}),f(e.getElementsByTagName("img")[0],it({width:r*d,height:o*d},R(it({translateX:-a*d,translateY:-c*d},t))))})))}},{bind:function(){var t=this.element,e=this.options,i=this.cropper;u(e.cropstart)&&A(t,"cropstart",e.cropstart),u(e.cropmove)&&A(t,"cropmove",e.cropmove),u(e.cropend)&&A(t,"cropend",e.cropend),u(e.crop)&&A(t,"crop",e.crop),u(e.zoom)&&A(t,"zoom",e.zoom),A(i,Y,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&A(i,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&A(i,"dblclick",this.onDblclick=this.dblclick.bind(this)),A(t.ownerDocument,j,this.onCropMove=this.cropMove.bind(this)),A(t.ownerDocument,X,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&A(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;u(e.cropstart)&&E(t,"cropstart",e.cropstart),u(e.cropmove)&&E(t,"cropmove",e.cropmove),u(e.cropend)&&E(t,"cropend",e.cropend),u(e.crop)&&E(t,"crop",e.crop),u(e.zoom)&&E(t,"zoom",e.zoom),E(i,Y,this.onCropStart),e.zoomable&&e.zoomOnWheel&&E(i,"wheel",this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&E(i,"dblclick",this.onDblclick),E(t.ownerDocument,j,this.onCropMove),E(t.ownerDocument,X,this.onCropEnd),e.responsive&&E(window,"resize",this.onResize)}},{resize:function(){if(!this.disabled){var t,e,i=this.options,n=this.container,s=this.containerData,r=n.offsetWidth/s.width,o=(n=n.offsetHeight/s.height,Math.abs(r-1)>Math.abs(n-1)?r:n);if(1!==o)i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(_(t,(function(e,i){t[i]=e*o}))),this.setCropBoxData(_(e,(function(t,i){e[i]=t*o}))))}},dblclick:function(){this.disabled||"none"===this.options.dragMode||this.setDragMode(function(t,e){return t.classList?t.classList.contains(e):-1<t.className.indexOf(e)}(this.dragBox,D)?"move":"crop")},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?n=0<t.deltaY?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=0<t.detail?1:-1),this.zoom(-n*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(a(e)&&1!==e||a(i)&&0!==i||t.ctrlKey))){e=this.options;var n=this.pointers;t.changedTouches?_(t.changedTouches,(function(t){n[t.identifier]=w(t)})):n[t.pointerId||0]=w(t),e=1<Object.keys(n).length&&e.zoomable&&e.zoomOnTouch?"zoom":y(t.target,U),q.test(e)&&!1!==b(this.element,"cropstart",{originalEvent:t,action:e})&&(t.preventDefault(),this.action=e,this.cropping=!1,"crop"===e&&(this.cropping=!0,p(this.dragBox,z)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==b(this.element,"cropmove",{originalEvent:t,action:e})&&(t.changedTouches?_(t.changedTouches,(function(t){it(i[t.identifier]||{},w(t,!0))})):it(i[t.pointerId||0]||{},w(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?_(t.changedTouches,(function(t){delete i[t.identifier]})):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,T(this.dragBox,z,this.cropped&&this.options.modal)),b(this.element,"cropend",{originalEvent:t,action:e}))}}},{change:function(t){var e=this.canvasData,i=this.containerData,n=this.cropBoxData,s=this.pointers,r=this.action,o=this.options.aspectRatio,a=n.left,c=n.top,h=n.width,l=n.height,u=a+h,d=c+l,g=0,f=0,p=i.width,T=i.height,S=!0;!o&&t.shiftKey&&(o=h&&l?h/l:1),this.limited&&(g=n.minLeft,f=n.minTop,p=g+Math.min(i.width,e.width,e.left+e.width),T=f+Math.min(i.height,e.height,e.top+e.height));var y={x:(e=s[Object.keys(s)[0]]).endX-e.startX,y:e.endY-e.startY};i=function(t){switch(t){case"e":u+y.x>p&&(y.x=p-u);break;case"w":a+y.x<g&&(y.x=g-a);break;case"n":c+y.y<f&&(y.y=f-c);break;case"s":d+y.y>T&&(y.y=T-d)}};switch(r){case"all":a+=y.x,c+=y.y;break;case"e":if(0<=y.x&&(u>=p||o&&(c<=f||d>=T))){S=!1;break}i("e"),0>(h+=y.x)&&(r="w",a-=h=-h),o&&(l=h/o,c+=(n.height-l)/2);break;case"n":if(0>=y.y&&(c<=f||o&&(a<=g||u>=p))){S=!1;break}i("n"),l-=y.y,c+=y.y,0>l&&(r="s",c-=l=-l),o&&(h=l*o,a+=(n.width-h)/2);break;case"w":if(0>=y.x&&(a<=g||o&&(c<=f||d>=T))){S=!1;break}i("w"),h-=y.x,a+=y.x,0>h&&(r="e",a-=h=-h),o&&(l=h/o,c+=(n.height-l)/2);break;case"s":if(0<=y.y&&(d>=T||o&&(a<=g||u>=p))){S=!1;break}i("s"),0>(l+=y.y)&&(r="n",c-=l=-l),o&&(h=l*o,a+=(n.width-h)/2);break;case"ne":if(o){if(0>=y.y&&(c<=f||u>=p)){S=!1;break}i("n"),l-=y.y,c+=y.y,h=l*o}else i("n"),i("e"),0<=y.x?u<p?h+=y.x:0>=y.y&&c<=f&&(S=!1):h+=y.x,0>=y.y?c>f&&(l-=y.y,c+=y.y):(l-=y.y,c+=y.y);0>h&&0>l?(r="sw",c-=l=-l,a-=h=-h):0>h?(r="nw",a-=h=-h):0>l&&(r="se",c-=l=-l);break;case"nw":if(o){if(0>=y.y&&(c<=f||a<=g)){S=!1;break}i("n"),l-=y.y,c+=y.y,h=l*o,a+=n.width-h}else i("n"),i("w"),0>=y.x?a>g?(h-=y.x,a+=y.x):0>=y.y&&c<=f&&(S=!1):(h-=y.x,a+=y.x),0>=y.y?c>f&&(l-=y.y,c+=y.y):(l-=y.y,c+=y.y);0>h&&0>l?(r="se",c-=l=-l,a-=h=-h):0>h?(r="ne",a-=h=-h):0>l&&(r="sw",c-=l=-l);break;case"sw":if(o){if(0>=y.x&&(a<=g||d>=T)){S=!1;break}i("w"),h-=y.x,a+=y.x,l=h/o}else i("s"),i("w"),0>=y.x?a>g?(h-=y.x,a+=y.x):0<=y.y&&d>=T&&(S=!1):(h-=y.x,a+=y.x),0<=y.y?d<T&&(l+=y.y):l+=y.y;0>h&&0>l?(r="ne",c-=l=-l,a-=h=-h):0>h?(r="se",a-=h=-h):0>l&&(r="nw",c-=l=-l);break;case"se":if(o){if(0<=y.x&&(u>=p||d>=T)){S=!1;break}i("e"),l=(h+=y.x)/o}else i("s"),i("e"),0<=y.x?u<p?h+=y.x:0<=y.y&&d>=T&&(S=!1):h+=y.x,0<=y.y?d<T&&(l+=y.y):l+=y.y;0>h&&0>l?(r="nw",c-=l=-l,a-=h=-h):0>h?(r="sw",a-=h=-h):0>l&&(r="ne",c-=l=-l);break;case"move":this.move(y.x,y.y),S=!1;break;case"zoom":this.zoom(P(s),t),S=!1;break;case"crop":if(!y.x||!y.y){S=!1;break}t=v(this.cropper),a=e.startX-t.left,c=e.startY-t.top,h=n.minWidth,l=n.minHeight,0<y.x?r=0<y.y?"se":"ne":0>y.x&&(a-=h,r=0<y.y?"sw":"nw"),0>y.y&&(c-=l),this.cropped||(m(this.cropBox,F),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}S&&(n.width=h,n.height=l,n.left=a,n.top=c,this.action=r,this.renderCropBox()),_(s,(function(t){t.startX=t.endX,t.startY=t.endY}))}},{crop:function(){return console.log("crop show windows"),!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&p(this.dragBox,z),m(this.cropBox,F),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=it({},this.initialImageData),this.canvasData=it({},this.initialCanvasData),this.cropBoxData=it({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(it(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),m(this.dragBox,z),p(this.cropBox,F)),this},replace:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,_(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,m(this.cropper,M)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,p(this.cropper,M)),this},destroy:function(){var t=this.element;return t.cropper?(t.cropper=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,i=(n=this.canvasData).left,n=n.top;return this.moveTo(c(t)?t:i+Number(t),c(e)?e:n+Number(e))},moveTo:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(a(t)&&(i.left=t,n=!0),a(e)&&(i.top=e,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=Number(t),this.zoomTo(i.width*(0>t?1/(1-t):1+t)/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var n=this.options,s=this.canvasData,r=s.width,o=s.height,c=s.naturalWidth,h=s.naturalHeight;if(0<=(t=Number(t))&&this.ready&&!this.disabled&&n.zoomable){if(n=c*t,h*=t,!1===b(this.element,"zoom",{ratio:t,oldRatio:r/c,originalEvent:i}))return this;i?(e=this.pointers,t=v(this.cropper),i=e&&Object.keys(e).length?function(t){var e=0,i=0,n=0;return _(t,(function(t){var s=t.startY;e+=t.startX,i+=s,n+=1})),{pageX:e/=n,pageY:i/=n}}(e):{pageX:i.pageX,pageY:i.pageY},s.left-=(i.pageX-t.left-s.left)/r*(n-r),s.top-=(i.pageY-t.top-s.top)/o*(h-o)):l(e)&&a(e.x)&&a(e.y)?(s.left-=(e.x-s.left)/r*(n-r),s.top-=(e.y-s.top)/o*(h-o)):(s.left-=(n-r)/2,s.top-=(h-o)/2),s.width=n,s.height=h,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return a(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,a(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(a(e)?e:1,t)},scale:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(a(t)&&(i.scaleX=t,n=!0),a(e)&&(i.scaleY=e,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],i=this.options,n=this.imageData,s=this.canvasData,r=this.cropBoxData;if(this.ready&&this.cropped){t={x:r.left-s.left,y:r.top-s.top,width:r.width,height:r.height};var o=n.width/n.naturalWidth;_(t,(function(e,i){t[i]=e/o})),e&&(e=Math.round(t.y+t.height),s=Math.round(t.x+t.width),t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=s-t.x,t.height=e-t.y)}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=n.rotate||0),i.scalable&&(t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,n=this.canvasData,s={};if(this.ready&&!this.disabled&&l(t)){var r=!1;e.rotatable&&a(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,r=!0),e.scalable&&(a(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,r=!0),a(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,r=!0)),r&&this.renderCanvas(!0,!0),e=i.width/i.naturalWidth,a(t.x)&&(s.left=t.x*e+n.left),a(t.y)&&(s.top=t.y*e+n.top),a(t.width)&&(s.width=t.width*e),a(t.height)&&(s.height=t.height*e),this.setCropBoxData(s)}return this},getContainerData:function(){return this.ready?it({},this.containerData):{}},getImageData:function(){return this.sized?it({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&_("left top width height naturalWidth naturalHeight".split(" "),(function(i){e[i]=t[i]})),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&l(t)&&(a(t.left)&&(e.left=t.left),a(t.top)&&(e.top=t.top),a(t.width)?(e.width=t.width,e.height=t.width/i):a(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,n=this.cropBoxData,s=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&l(t)&&(a(t.left)&&(n.left=t.left),a(t.top)&&(n.top=t.top),a(t.width)&&t.width!==n.width&&(e=!0,n.width=t.width),a(t.height)&&t.height!==n.height&&(i=!0,n.height=t.height),s&&(e?n.height=n.width/s:i&&(n.width=n.height*s)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=function(t,e,i,n){var r=e.aspectRatio,o=e.naturalWidth,a=e.naturalHeight,c=void 0===(c=e.rotate)?0:c,h=void 0===(h=e.scaleX)?1:h;e=void 0===(e=e.scaleY)?1:e;var l=i.aspectRatio,u=i.naturalWidth,d=i.naturalHeight;i=void 0===(i=n.fillColor)?"transparent":i;var _=void 0===(_=n.imageSmoothingEnabled)||_,f=void 0===(f=n.imageSmoothingQuality)?"low":f,p=void 0===(y=n.maxWidth)?1/0:y,m=void 0===(y=n.maxHeight)?1/0:y,T=void 0===(y=n.minWidth)?0:y,S=void 0===(n=n.minHeight)?0:n,y=(n=document.createElement("canvas")).getContext("2d"),C=B({aspectRatio:l,width:p,height:m});return l=B({aspectRatio:l,width:T,height:S},"cover"),u=Math.min(C.width,Math.max(l.width,u)),d=Math.min(C.height,Math.max(l.height,d)),l=B({aspectRatio:r,width:p,height:m}),r=B({aspectRatio:r,width:T,height:S},"cover"),a=[-(o=Math.min(l.width,Math.max(r.width,o)))/2,-(a=Math.min(l.height,Math.max(r.height,a)))/2,o,a],n.width=g(u),n.height=g(d),y.fillStyle=i,y.fillRect(0,0,u,d),y.save(),y.translate(u/2,d/2),y.rotate(c*Math.PI/180),y.scale(h,e),y.imageSmoothingEnabled=_,y.imageSmoothingQuality=f,y.drawImage.apply(y,[t].concat(s(a.map((function(t){return Math.floor(g(t))}))))),y.restore(),n}(this.image,this.imageData,e,t);if(!this.cropped)return i;var n=(a=this.getData(t.rounded)).x,r=a.y,o=a.width,a=a.height;1!==(e=i.width/Math.floor(e.naturalWidth))&&(n*=e,r*=e,o*=e,a*=e);var c=B({aspectRatio:l=o/a,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),h=B({aspectRatio:l,width:t.minWidth||0,height:t.minHeight||0},"cover"),l=(e=(l=B({aspectRatio:l,width:t.width||(1!==e?i.width:o),height:t.height||(1!==e?i.height:a)})).width,l.height);e=Math.min(c.width,Math.max(h.width,e)),l=Math.min(c.height,Math.max(h.height,l)),h=(c=document.createElement("canvas")).getContext("2d");c.width=g(e),c.height=g(l),h.fillStyle=t.fillColor||"transparent",h.fillRect(0,0,e,l),l=t.imageSmoothingEnabled,t=t.imageSmoothingQuality,h.imageSmoothingEnabled=void 0===l||l,t&&(h.imageSmoothingQuality=t);var u,d,_,f,p,m;t=i.width,l=i.height;return n<=-o||n>t?p=_=u=n=0:0>=n?(_=-n,n=0,p=u=Math.min(t,o+n)):n<=t&&(_=0,p=u=Math.min(o,t-n)),0>=u||r<=-a||r>l?m=f=d=r=0:0>=r?(f=-r,r=0,m=d=Math.min(l,a+r)):r<=l&&(f=0,m=d=Math.min(a,l-r)),u=[n,r,u,d],0<p&&0<m&&(o=e/o,u.push(_*o,f*o,p*o,m*o)),h.drawImage.apply(h,[i].concat(s(u.map((function(t){return Math.floor(g(t))}))))),c},setAspectRatio:function(t){var e=this.options;return this.disabled||c(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var s="crop"===t,r=e.movable&&"move"===t;t=s||r?t:"none",e.dragMode=t,C(i,U,t),T(i,D,s),T(i,V,r),e.cropBoxMovable||(C(n,U,t),T(n,D,s),T(n,V,r))}return this}}),N})),UtilNotBuild.doPostAvatar=function(t,e){var i=new URLSearchParams;for(var n in e){var s=e[n];i.append(n,s)}return fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i}).then((function(t){if(console.log("response = ",t),!t.ok)throw new Error("Network response was not ok");return t.json()})).then((function(t){return console.log("UtilNotBuild.doPostAvatar - data = ",t),console.log("UtilNotBuild.doPostAvatar - JSON.stringify(data) = ",JSON.stringify(t)),t})).catch((function(t){return console.error("Error = "+t.message),{code:0,content:"exception please check!"}}))},UtilNotBuild.processAvatar=function(t,e,i){var n={avatarFile:i};UtilNotBuild.doPostAvatar(e,n).then((function(e){var i=e.code,n=e.content;i>0?t.processAvatarSuccess(n):t.processAvatarError(n)})).catch((function(e){console.log("UtilNotBuild.processAvatar - error: ",e),t.processAvatarError(e)}))};var bk=bk||{};BkGlobal={Zq:!1,isPlaying:!1,mv:!1,lv:!1,Rg:!1,PA:!1,nv:!1,BI:null,aH:null,ON:null,ek:null,ja:-1,wf:-1,Rj:-1,AB:!1,Sa:-1,Zp:null,mk:!1,Ti:!0,Xq:!1,fN:!1,jk:!1,eB:!1,mN:!1,xR:null,mB:!1,rY:0,isLoginFacebook:!1,fo:!1,VA:!1,VM:!1,DX:0,sP:0,TB:0,Yn:!1,XX:null,P:null,Pf:null,no:!1,hk:!1,oq:"",vz:"",ap:null,O0:!1,XA:!1,jo:!1,BE:-1,hy:1,Qg:!1,Ll:!0,KB:-1,JB:-1,on:-1,hC:-1,nn:-1,gC:-1,Yg:-1,R3:function(){this.Rj=this.wf=this.ja=-1,BkGlobal.Sa=-1,this.ek=this.ON=this.aH=this.BI=null,this.eB=this.jk=this.fN=!1,cc.username="",cc.password=""},Iw:function(t){this.isPlaying=t},XZ:function(){return 0},c1:function(){return!1},ho:function(){return!1},YY:null};var na=cc.Layer.extend({sprite:null,iX:10,jX:8,ctor:function(){this._super();var t=cc.winSize;this.sprite=new BkSprite(res.uk);var e=t.width/this.sprite.getContentSize().width,i=t.height/this.sprite.getContentSize().height;return e<i&&(e=i),this.sprite.setScale(e),this.sprite.attr({x:t.width/2,y:t.height/2}),this.addChild(this.sprite,0),!0},r6:function(){aa("http://config.zigavn.com/WebCo/",(function(t,e){if(t)logMessage("err: "+t);else{logMessage("respondText: "+e);var i=JSON.parse(e);logMessage("myip: "+i.g2),logMessage("serveripaddress: "+i.BD),logMessage("newsip: "+i.i2)}}))},v6:function(){logMessage("testLoadResAndStore ++");var t=getFullImagePath("dinhthuquan_bg.png");jsb.qq.WM(t)?(logMessage("isFileExist"),this.PE(t)):n.HN("https://chanvanvan.com/test/ResTest/dinhthuquan_bg.png","dinhthuquan_bg.png")},PE:function(t){logMessage("testShowImageLoaded ++"+t);var e=cc.winSize;(t=new cc.Sprite(t)).setScaleX(.2*e.width/t.getContentSize().width),t.setScaleY(.2*e.height/t.getContentSize().height),t.attr({x:e.width/2,y:e.height/2}),this.addChild(t,10)},O1:function(t){logMessage("loadedImg"),t=saveTexture(t,"dinhthuquan_bg.png"),this.PE(t)},u6:function(){logMessage("testLoadJsFileAndShow");var t,e=(t=(t=jsb.qq.e0())+"srcLoaded/")+"SceneLoadFromServer.js";if(jsb.qq.WM(e))logMessage("isFileExist -> show"),require(e),cc.director.runScene(new SceneLoadFromServer);else{logMessage("!isFileExist -> load");var i=cc.loader.getXMLHttpRequest();i.open("GET","https://chanvanvan.com/test/ResTest/SceneLoadFromServer.js"),i.onreadystatechange=function(){if(4==i.readyState&&200<=i.status&&207>=i.status){logMessage("xhr.responseText "+i.responseText);var n=i.responseText;jsb.qq.FY(t),jsb.qq.d7(n,e)?(logMessage("see the plist file at "+e),require(e),cc.director.runScene(new SceneLoadFromServer)):logMessage("write plist file failed")}},i.send(null)}},Rh:0,Ng:"",getUrl:function(){if(0===this.Rh){var t=p("lastUrlSetting",ba);return logMessage("getLastUrlSetting: "+t),t}return logMessage("this.numberLoad "+this.Rh),1===this.Rh?ba:2===this.Rh?ca:3===this.Rh?da:4===this.Rh?ea:5===this.Rh?ga:null},XB:function(){if(!isFBInstantGame()){s(!1);var e=this.getUrl();if(logMessage("url: "+e),null===e)logMessage("load 5 lan khong thanh cong -> show popup"),this.Rh=0,this.dU();else{this.Rh++;var i=this;aa(e,(function(n,s){if(t(),n)logMessage("err: "+n),i.XB();else{logMessage("respondText: "+s);var r=JSON.parse(s);logMessage("done load -> autologin "+r.BD),(e!=ga||this.Ng)&&(i.Ng=r.Ng),i.YT(),ha(r.BD),logMessage("lastUrlSetting: "+e),u("lastUrlSetting",e),i.gz()}})),n.rb(ia,ja(ia))}}},YT:function(){if(this.Ng){var t=this;showPopupMessageWith(this.Ng,"",null,(function(){t.Jv()}))}},dU:function(){logMessage("removeAnim: showLostConnectionPopup"),t();var e=this,i=ka;this.Ng&&(i=this.Ng),logMessage("this.informtext: "+this.Ng),logMessage("str: "+i),showPopupMessageWith(i,"",null,(function(){e.Jv()}))},XU:function(){logMessage("show showAnim-> load setting"),BkConnectionManager.dg(),this.XB()},gz:function(){logMessage("doAutoLoginGame");var t=this;s(!1,(function(){t.XU()})),BkLogicManager.S().Qt()},Dr:function(){if(logMessage("processInitGame"),n.$N())this.gz();else{var t=this;showPopupMessageWith("Hiện máy của bạn đang không kết nối mạng, hãy bật Wifi/3G để kết nối và thực hiện lại sau!","",null,(function(){t.Jv()}))}},Jv:function(){var t=new BkLabel("Chạm vào màn hình để kết nối lại.","",40);t.setTextColor(v),t.setScale(GAME_SCALE),t.x=cc.winSize.width/2,t.y=.6*cc.winSize.height,this.addChild(t);var e=this;this.sprite.Ua((function(){e.Dr()})),cc.spriteFrameCache.addSpriteFrames(res.Wl,res.Xl),(t=new BkButton(x,la,x,x,ccui.Widget.PLIST_TEXTURE)).setTitleText("Hỗ trợ"),t.setTitleFontName(ma()),t.setTitleFontSize(31),t.setTitleColor(cc.color(71,44,27)),t.getTitleRenderer().y+=.1*t.getBoundingBox().height,t.setScale(GAME_SCALE),t.x=cc.winSize.width/2,t.y=.4*cc.winSize.height,this.addChild(t),t.addClickEventListener((function(){cc.sys.os==cc.sys.OS_ANDROID?n.PC("https://m.me/zigavn"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||n.openURL("https://m.me/zigavn")}))}}),pa=cc.Scene.extend({yv:null,onEnter:function(){this._super(),logMessage("ZigaLoadingScene onEnter:"),oa(0),cc.spriteFrameCache.addSpriteFrames(res.yr,res.zr),cc.spriteFrameCache.addSpriteFrames(res.tA,res.uA),this.yv=new na,this.addChild(this.yv)},onEnterTransitionDidFinish:function(){this._super(),this.scheduleUpdate(),n.FL()},update:function(){var t=getCurrentScene();null!=t&&t instanceof pa&&(this.unscheduleUpdate(),this.Dr())},Dr:function(){this.yv.Dr()}}),qa="btn_login_pressed.png",qa="btnLoginPress.png",x="btn_no_text.png",la="btn_no_text_press.png",y={},res={aG:{type:"font",name:"Roboto-Regular",srcs:["res/fonts/Roboto-Regular.ttf","res/fonts/Roboto-Regular.ttf"]},MW:{type:"font",name:"Roboto-Medium",srcs:["res/fonts/Roboto-Medium.ttf","res/fonts/Roboto-Medium.ttf"]},PW:{type:"font",name:"Roboto-Italic",srcs:["res/fonts/Roboto-Italic.ttf","res/fonts/Roboto-Italic.ttf"]},NW:{type:"font",name:"Roboto-MediumItalic",srcs:["res/fonts/Roboto-MediumItalic.ttf","res/fonts/Roboto-MediumItalic.ttf"]},OW:{type:"font",name:"UVNButLong1",srcs:["res/fonts/UVNButLong1.TTF","res/fonts/UVNButLong1.TTF"]},kX:{type:"font",name:"top_rank",srcs:["res/fonts/top_rank.ttf","res/fonts/top_rank.ttf"]},rx:"fonts/font_cd_co.fnt",Bs:"fonts/font_btn_ss.fnt",Cs:"fonts/bmfont_elo_minus.fnt",lp:"fonts/bmfont_elo_plus.fnt",kp:"fonts/bmfont_plus_heart.fnt",sx:"fonts/bmfont_minus_heart.fnt",qx:"fonts/bmfont_cd_ingame.fnt",cn:"common/chess/chess_common.plist",bn:"common/chess/chess_common_ziga.png",kH:"common/chess/bat_dau_effect.plist",my:"common/chess/bat_dau_effect_ziga.png",zp:"common/null_content_ziga.png",an:"chat/chatemostatic/chat_emo_static.plist",Qn:"chat/chatemostatic/icon_chat_emo_static_ziga.png",Wl:"main_screen/main_screen.plist",Xl:"main_screen/main_screen_ziga.png",uo:"main_screen/main_screen_big_item.plist",vo:"main_screen/main_screen_big_item_ziga.png",ps:"main_screen/tran_hay_ziga.png",gF:"main_screen/webview_frame_ziga.png",uk:"main_screen/background_ziga.jpg",IL:"main_screen/history_bg.png",AA:"ingame/background_ziga.jpg",gt:"ingame/all_chess_ziga.png",yt:"ingame/ban_co_ziga.png",eH:"popup/app_store_search.png",KL:"main_screen/hourglass_plist.plist",wA:"main_screen/hourglass_plist_ziga.png",yr:"popup/popup_resource_plist.plist",zr:"popup/popup_resource_plist_ziga.png",tA:"history/history.plist",uA:"history/history_ziga.png",Vr:"popup/shadow_ziga.png",Vt:"changename.png"},z={alert:"sound/alert.ogg",click:"sound/click.ogg",fZ:"sound/deal_card.ogg",p1:"sound/join_game.ogg",z1:"sound/laught.ogg",D1:"sound/leave_game.ogg",wY:"sound/co_gong.mp3",uY:"sound/co_an_quan.mp3",vY:"sound/co_di_chuyen.mp3",xY:"sound/co_thang.mp3",yY:"sound/co_thua.mp3",an:"chat/chatemostatic/chat_emo_static.plist",Qn:"chat/chatemostatic/icon_chat_emo_static_ziga.png",zy:"chat/chat_emo/expression1_img_ziga.png",Ay:"chat/chat_emo/expression1_plist.plist",hI:"chat/chat_emo/expression2_img_ziga.png",iI:"chat/chat_emo/expression2_plist.plist",jI:"chat/chat_emo/expression3_img_ziga.png",kI:"chat/chat_emo/expression3_plist.plist",lI:"chat/chat_emo/expression4_img_ziga.png",mI:"chat/chat_emo/expression4_plist.plist",nI:"chat/chat_emo/expression5_img_ziga.png",oI:"chat/chat_emo/expression5_plist.plist",pI:"chat/chat_emo/expression6_img_ziga.png",qI:"chat/chat_emo/expression6_plist.plist",rI:"chat/chat_emo/expression7_img_ziga.png",sI:"chat/chat_emo/expression7_plist.plist",tI:"chat/chat_emo/expression8_img_ziga.png",uI:"chat/chat_emo/expression8_plist.plist",vI:"chat/chat_emo/expression9_img_ziga.png",wI:"chat/chat_emo/expression9_plist.plist",AH:"chat/chat_emo/expression10_img_ziga.png",BH:"chat/chat_emo/expression10_plist.plist",CH:"chat/chat_emo/expression11_img_ziga.png",DH:"chat/chat_emo/expression11_plist.plist",EH:"chat/chat_emo/expression12_img_ziga.png",FH:"chat/chat_emo/expression12_plist.plist",GH:"chat/chat_emo/expression13_img_ziga.png",HH:"chat/chat_emo/expression13_plist.plist",IH:"chat/chat_emo/expression14_img_ziga.png",JH:"chat/chat_emo/expression14_plist.plist",KH:"chat/chat_emo/expression15_img_ziga.png",LH:"chat/chat_emo/expression15_plist.plist",MH:"chat/chat_emo/expression16_img_ziga.png",NH:"chat/chat_emo/expression16_plist.plist",OH:"chat/chat_emo/expression17_img_ziga.png",PH:"chat/chat_emo/expression17_plist.plist",QH:"chat/chat_emo/expression18_img_ziga.png",RH:"chat/chat_emo/expression18_plist.plist",SH:"chat/chat_emo/expression19_img_ziga.png",TH:"chat/chat_emo/expression19_plist.plist",UH:"chat/chat_emo/expression20_img_ziga.png",VH:"chat/chat_emo/expression20_plist.plist",WH:"chat/chat_emo/expression21_img_ziga.png",XH:"chat/chat_emo/expression21_plist.plist",YH:"chat/chat_emo/expression22_img_ziga.png",ZH:"chat/chat_emo/expression22_plist.plist",$H:"chat/chat_emo/expression23_img_ziga.png",aI:"chat/chat_emo/expression23_plist.plist",bI:"chat/chat_emo/expression24_img_ziga.png",cI:"chat/chat_emo/expression24_plist.plist",dI:"chat/chat_emo/expression25_img_ziga.png",eI:"chat/chat_emo/expression25_plist.plist",fI:"chat/chat_emo/expression26_img_ziga.png",gI:"chat/chat_emo/expression26_plist.plist"},ra=[],sa;for(sa in z)ra.push(z[sa]);var ta=[];ta.push(res.uk),ta.push(res.ps),ta.push(res.Wl),ta.push(res.Xl),ta.push(res.vo),ta.push(res.uo),ta.push(res.AA),ta.push(res.gt),ta.push(res.yt),ta.push(res.cn),ta.push(res.bn);var A=[];A.push(res.yr),A.push(res.zr),A.push(res.Vr),A.push(res.gF),A.push(res.an),A.push(res.Qn),A.push(res.rx),A.push(res.Bs),A.push(res.Cs),A.push(res.lp),A.push(res.kp),A.push(res.sx),A.push(res.qx),A.push({type:"font",name:"Roboto-Regular",srcs:["ChessMobi/res/fonts/Roboto-Regular.ttf","ChessMobi/res/fonts/Roboto-Regular.ttf"]}),A.push({type:"font",name:"Roboto-Medium",srcs:["ChessMobi/res/fonts/Roboto-Medium.ttf","ChessMobi/res/fonts/Roboto-Medium.ttf"]}),A.push({type:"font",name:"Roboto-Italic",srcs:["ChessMobi/res/fonts/Roboto-Italic.ttf","ChessMobi/res/fonts/Roboto-Italic.ttf"]}),A.push({type:"font",name:"Roboto-MediumItalic",srcs:["ChessMobi/res/fonts/Roboto-MediumItalic.ttf","ChessMobi/res/fonts/Roboto-MediumItalic.ttf"]}),A.push({type:"font",name:"UVNButLong1",srcs:["ChessMobi/res/fonts/UVNButLong2.TTF","ChessMobi/res/fonts/UVNButLong2.TTF"]}),A.push({type:"font",name:"top_rank",srcs:["ChessMobi/res/fonts/top_rank.ttf","ChessMobi/res/fonts/top_rank.TTF"]});var ua=[],i;for(i in res)ua.push(res[i]);function xa(){var t=userInfo;cc.NX=!0,logMessage("Auto login: "+t.username),cc.username=t.username,cc.password=t.password,BkGlobal.isLoginFacebook=t.isLoginFacebook,null==BkGlobal.P&&(BkGlobal.P=new BkUserData),BkGlobal.P.yd(cc.username),BkGlobal.P.password=cc.password,BkConnectionManager.Db=ya,console.log("BkWebUtil - doLoginGame()"),BkConnectionManager.Ar(),s()}onStartingGame=function(){if(cc.spriteFrameCache.addSpriteFrames(res.Wl,res.Xl),cc.spriteFrameCache.addSpriteFrames(res.uo,res.vo),cc.spriteFrameCache.addSpriteFrames(res.cn,res.bn),cc.spriteFrameCache.addSpriteFrames(res.yr,res.zr),cc.spriteFrameCache.addSpriteFrames(res.tA,res.uA),cc.DR=!0,bk.isFbApp){userInfo=va(D.He,!0);var t=!1;(cc.isUndefined(userInfo)||null==userInfo)&&(t=!0),E.Cr(t)}else{if(userInfo=va(D.He,!0),t=va(D.rB),logMessage("Login saving session: "+t),console.log("BkWebUtil - onStartingGame - key: ",D),cc.isUndefined(userInfo)||null==userInfo||userInfo==wa)if(userInfo=F(D.He,!0),console.log("userInfo: ",userInfo),userInfo){if(1!=t)return logMessage("UserLoginInfo storage: "+userInfo.username),void xa();cc.username=userInfo.username,cc.password=userInfo.password,logMessage("UserLoginInfo: from logout -> prepare new game")}else logMessage("UserLoginInfo: NULL -> prepare new game");else{if(1!=t)return console.log("BkWebUtil - OnStartingGame - userInfo = ",userInfo),logMessage("UserLoginInfo session: "+userInfo.username),void xa();cc.username=userInfo.username,cc.password=userInfo.password,logMessage("UserLoginInfo: from logout -> prepare new game")}switchToSceneWithGameState(G)}},processLoginRegistSuccessEx=function(){t(),isWebPlatform()&&(document.getElementById("contentNews").style.display="none")},processLoginRegistFailEx=function(){t(),za(D.He),Aa(),cc.password="",switchToSceneWithGameState(G),n.rb(Ba,ja("processLoginRegistFailEx"))},reloadWebPage=function(){window.location.reload()},showPopupMessageEx=function(t){showPopupMessageConfirmEx(t)},showPopupMessageConfirmEx=function(t,e){swal({title:"",text:t,type:"",TI:"#c06100",QI:!0},(function(){null!=e&&null!=e&&e()}))},showPopupMessageConfirmWithCancelEx=function(t,e){swal({text:t,title:"",type:"",TI:"#6EC018",BY:"Đồng ý",iY:"Thôi",QI:!0,E5:!0,html:!0},(function(t){t&&null!=e&&null!=e&&e()}))},logTracker=function(t,e){var i="";null!=cc.Yi&&0<cc.Yi.length&&(i=cc.Yi.join("\n"));var n=cc.username,s="";null!=e&&(s=null!=e.stack?e.stack:""),1e3<t.length&&(t=""),zpostRequest(bk.httpHost+"public/action/1",{username:n,clientInfo:Ca()+" fileVer: "+bk.fileVer+" cpid: "+bk.cpid,Error:t+" Stack: "+s,lastLog:i},(function(){})),cc.Yi=[]},zpostRequest=function(t,e,i){var n=new XMLHttpRequest;console.log("zpostRequest: url: ",t),n.onreadystatechange=function(){n.readyState==XMLHttpRequest.DONE&&i(n.responseText)},n.open("POST",t,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send(JSON.stringify(e))};var Da=70,Ea=70,Fa=100;function Ga(t,e){var i=BkGlobal.ja,n=cc.winSize,s=0,r=0;return i==Ha?(n=i=0,0==t?(i=184.2,n=187.2):1==t?(i=815.8,n=217.2):2==t?(i=878.8,n=435.8):3==t?(i=556,n=572):4==t?(i=330,n=572):5==t&&(i=78,n=433),cc.p(i,n)):i==Ia?(n=i=0,0==t?(i=405,n=235):1==t?(i=897,n=294):2==t?(i=897,n=444):3==t?(i=565,n=566):4==t?(i=65,n=444):5==t&&(i=65,n=294),cc.p(i,n)):i==Ja?(n=i=0,0==t?(i=385,n=157):1==t?(i=885,n=263):2==t?(i=885,n=421):3==t?(i=531,n=543):4==t?(i=70,n=421):5==t&&(i=70,n=263),cc.p(i,n)):i==Ka?(n=i=0,0==t?(i=410,n=216):1==t?(i=861,n=259):2==t?(i=861,n=415):3==t?(i=548,n=546):4==t?(i=95,n=416):5==t&&(i=95,n=259),cc.p(i,n)):i==La?(n=i=0,0==t?(i=410,n=230):1==t?(i=861,n=259):2==t?(i=861,n=415):3==t?(i=548,n=546):4==t?(i=95,n=416):5==t&&(i=95,n=259),cc.p(i,n)):i==H?(n=i=0,0==t?(i=304,n=129):1==t?(i=890,n=384):2==t?(i=306,n=553):3==t&&(i=71,n=384),cc.p(i,n)):(2==e?(s=n.width/2,r=0==t?Da+30:n.height-Da):4==e?0==t?(s=Ea+120,r=Da+50):1==t?(s=n.width-Ea,r=n.height/2+28):2==t?(s=n.width/2,r=n.height-Da+.5):3==t&&(s=Ea,r=n.height/2+30):6==e&&(0==t?(s=n.width/2,r=Da+50):1==t?(s=n.width-Ea,r=n.height/2-Fa):2==t?(s=n.width-Ea,r=n.height/2+Fa):3==t?(s=n.width/2,r=n.height-Da):4==t?(s=Ea,r=n.height/2+Fa):5==t&&(s=Ea,r=n.height/2-Fa)),cc.p(s,r))}POKER_SMALL_OFFSET=15,POKER_FINISH_OFFSET=20,BkConstantIngame={WW:20,XW:35,VW:40,KW:100,YW:1e4},BkBaseLayer=cc.Layer.extend({ctor:function(){this._super()}});var db=BkBaseLayer.extend({background:null,GZ:!1,FZ:null,ns:null,WY:0,Q2:null,F0:-1,A0:!1,R2:null,S2:null,l1:!0,E1:null,F1:null,TX:null,T1:null,bf:null,kl:null,gc:null,Ra:null,cY:null,lH:null,fc:null,lt:null,oH:null,sy:null,dY:null,bY:null,Av:null,_winSize:null,RN:cc.p(175.5,.5),hn:0,uv:0,ug:null,ctor:function(){this._super(),this._winSize=cc.winSize,this.background=new BkSprite(res.uk),this.background.scaleX=this._winSize.width/this.background.getContentSize().width,this.background.scaleY=this._winSize.height/this.background.getContentSize().height,this.background.x=this._winSize.width/2,this.background.y=this._winSize.height/2,this.addChild(this.background,-103),this.YG()},YG:function(){if(!isWebPlatform()&&!n.Sq()){var t=new BkSprite("#qc.png");t.scaleX=cc.winSize.width/t.getContentSize().width,t.scaleY=GAME_SCALE,t.x=cc.winSize.width/2,t.y=cc.winSize.height-t.getBoundingBox().height/2,this.addChild(t,-102);var e=new BkSprite("#qctext.png");e.setScale(GAME_SCALE),e.x=t.x,e.y=t.y,this.addChild(e,-101);var i=this;e.Ua((function(){var t=J();1e3<t-i.uv?(i.hn=0,i.uv=t):(i.uv=t,i.hn++,logMessage("self.countClickZiga: "+i.hn),15<i.hn&&(i.hn=0,i.lU()))}))}},lU:function(){if(logMessage("showPopupSetIP"),null==this.ug){var t=this,e=new BkConfirmPopup("",Ma);e.Cc(!1);var i=e.Q,n=.7*i.width,s=.1*i.height;isWebPlatform()||(s=.15*i.height),i="edit_text.png",isWebPlatform()||(i="changename.png"),this.ug=createEditBox(cc.size(n,s),i),this.ug.retain(),this.ug.setMaxLength(40),this.ug.x=e.Q.width/2,this.ug.y=e.Q.height/2,e.T(this.ug),e.Mm(this.ug),e.show(),e.Hw((function(){var e=t.ug.getString(),i="ws://"+e+":18090";-1!==e.indexOf("ws:")&&(i=e),logMessage("serverUrl: "+i),ha(i),cc.game.restart()})),e.df((function(){t.ug.release(),t.ug=null}))}},r0:function(){var t=cc.color.WHITE,e=cc.game.config.app.version;null!=e&&""!=e&&((e=new BkLabel("v"+e,"",14)).setTextColor(t),e.x=cc.winSize.width/2,e.y=22,this.addChild(e),isWebPlatform()||e.setVisible(!1))},yM:function(t){var e=t.width-90;t=t.height-27;var i=createBkButtonPlist("btn_playstore_normal.png","btn_playstore_normal.png","btn_playstore_normal.png","btn_playstore_normal.png");i.x=e,i.y=t,this.addChild(i),i.addClickEventListener((function(){cc.sys.openURL("https://play.google.com/store/apps/details?id=ziga.cotuong.coup")})),(e=createBkButtonPlist("btn_apple_normal.png","btn_apple_normal.png","btn_apple_normal.png","btn_apple_normal.png")).x=i.x+i.width/2+e.width/2+10,e.y=t,this.addChild(e),e.addClickEventListener((function(){cc.sys.openURL("https://itunes.apple.com/vn/app/c%E1%BB%9D-t%C6%B0%E1%BB%9Bng-c%E1%BB%9D-%C3%BAp-online-ziga/id1415712748?ls=1&mt=8")}))},ud:function(e,i){if(BkLogicManager.S().jb(null),i===Na){var n=BkLogicManager.S().sL(e);this.sy.Kk(0<n,"btn_NhiemVu_haveNewTask.png"),this.YV(n),BkLogicManager.S().CJ=e}t()},kf:function(){},K6:function(t){this.Av&&this.ir&&(t&&0<t.zo?(this.Av.visible=!0,this.ir.visible=!0,this.ir.setString(t.zo),this.lt.Kk(!0,"btn_NhiemVu_haveNewTask.png")):(this.Av.visible=!1,this.ir.visible=!1,this.ir.setString("0"),this.lt.Kk(!1)))},YV:function(t){this.iC&&this.jr&&(0<t?(this.iC.visible=!0,this.jr.visible=!0,this.jr.setString(t)):(this.iC.visible=!1,this.jr.visible=!1,this.jr.setString("0")))},P6:function(){this.lH.getTitleRenderer().y-=12,this.oH.getTitleRenderer().y-=12,this.lt.getTitleRenderer().y-=12,this.fc.getTitleRenderer().y-=12,this.sy.getTitleRenderer().y-=12},S6:function(){},C5:function(){var t=new BkPlayerBonusWd;t.df((function(){bk.B5=!1})),t.Oa()},hz:function(){BkLogicManager.S().iz(BkGlobal.ja)},h6:function(t,e){return t.order-e.order},i6:function(t,e){return e.order-t.order},n5:function(t,e){null!=t&&t.setVisible(e)},eW:function(t){null!=this.ns&&this.ns.setVisible(t)}}).extend({ctor:function(t){this.RN=cc.p(170,35.5),this._super(t),this.iM(),BkGlobal.Sa!=G&&this.ML()},iM:function(){var t=cc.winSize.width/4,e=cc.winSize.height/WINDOW_HEIGHT,i=isWebPlatform()?180:360*e,s=(e=createBkButtonPlist("CT_butt.png","CT_butt_press.png","CT_butt.png","CT_butt.png",""),isWebPlatform()?.65:GAME_SCALE);this.pe=e;var r=this;e.x=t+0,e.y=i,e.setScale(s),this.addChild(e),e.addClickEventListener((function(){Pa(r.lr(K))||(r.lr(K),n.rb(Qa))})),this.Yf=i=createBkButtonPlist("CU_butt.png","CU_butt_press.png","CU_butt.png","CU_butt.png",""),i.x=3*t+0,i.setScale(s),i.y=e.y,this.addChild(i),i.addClickEventListener((function(){Pa(r.lr(L))||(r.lr(L),n.rb(Ra))})),isWebPlatform()&&(e.x=cc.winSize.width/3,i.x=cc.winSize.width/3*2,this.LG()),this.Hd=new BkButton(res.ps,res.ps,y.De,res.ps,ccui.Widget.LOCAL_TEXTURE),this.Hd.setScale(GAME_SCALE),this.Hd.x=cc.winSize.width/2,this.Hd.y=.6*cc.winSize.height,this.addChild(this.Hd,-1),this.Hd.addClickEventListener((function(){Pa(r.mr)||(1e3>J()-r.Hd.Kb?logMessage("click 2 lan trong 1 sec -> don't process action"):(r.Hd.Kb=J(),r.mr(K),n.rb(Sa)))})),this.$f=new BkButton("xem_ngay_butt.png","xemngay_butt_press.png","xem_ngay_butt.png","xem_ngay_butt.png",ccui.Widget.PLIST_TEXTURE),this.$f.setScale(GAME_SCALE),this.$f.x=this.Hd.x,this.$f.y=this.Hd.y-this.Hd.getContentSize().height*GAME_SCALE*.32,this.addChild(this.$f),this.$f.addClickEventListener((function(){Pa(r.mr)||(1e3>J()-r.$f.Kb?logMessage("click 2 lan trong 1 sec -> don't process action"):(r.$f.Kb=J(),r.mr(K),n.rb(Ta)))}))},LG:function(){var t=createBkButtonPlist("CTH_butt.png","CTH_butt_press.png","CTH_butt.png","CTH_butt.png","");this.mH=t,t.setScale(.3),t.y=cc.winSize.height/4*3,this.mH.x=cc.winSize.width/9*8,t.addClickEventListener((function(){var t=cc.game.config.app.coTheUrl;logMessage("co the click - cotheUrl: "+t),null!=t&&""!=t&&window.open(t,"_blank")}))},fj:function(){logMessage("onBackClick BkChessGameLayer"),showPopupConfirmWith(Ua,"",(function(){logMessage("ok callback"),cc.director.end()}))},ML:function(){var t=.2*cc.winSize.width,e=this;isWebPlatform()||isFBInstantGame()?isFBInstantGame()&&(this.Gd=new BkButton("setting_butt.png","setting_butt_press.png","setting_butt.png","setting_butt.png",ccui.Widget.PLIST_TEXTURE),this.Gd.setScale(GAME_SCALE),this.Gd.x=.35*cc.winSize.width,this.Gd.y=.05*cc.winSize.height,this.addChild(this.Gd),this.Gd.addClickEventListener((function(){logMessage("btnSetting click"),Wa("huongdan/huongdan.html","Hướng dẫn chơi")})),this.fc=new BkButton("friends_butt.png","friends_butt_press.png","friends_butt.png","friends_butt.png",ccui.Widget.PLIST_TEXTURE),this.fc.setScale(GAME_SCALE),this.fc.x=.65*cc.winSize.width,this.fc.y=.05*cc.winSize.height,this.addChild(this.fc),this.fc.addClickEventListener((function(){if(!Pa(e.UT))if(1e3>J()-e.fc.Kb)logMessage("click 2 lan trong 1 sec -> don't process action");else{e.fc.Kb=J();var t=new BkFriendsWindow;t.Ab(e),t.Oa(),e.mw()}}))):(this.Gd=new BkButton("setting_butt.png","setting_butt_press.png","setting_butt.png","setting_butt.png",ccui.Widget.PLIST_TEXTURE),this.Gd.setScale(GAME_SCALE),this.Gd.x=.2*cc.winSize.width,this.Gd.y=.05*cc.winSize.height,this.addChild(this.Gd),this.Gd.addClickEventListener((function(){logMessage("btnSetting click"),e.jP()})),this.hl=new BkButton("btn_buy_heart.png","btn_buy_heart_press.png","btn_buy_heart.png","btn_buy_heart.png",ccui.Widget.PLIST_TEXTURE),this.hl.setScale(GAME_SCALE),this.hl.x=this.Gd.x+t,this.hl.y=this.Gd.y,this.addChild(this.hl),this.hl.addClickEventListener((function(){e.FT()})),this.fc=new BkButton("friends_butt.png","friends_butt_press.png","friends_butt.png","friends_butt.png",ccui.Widget.PLIST_TEXTURE),this.fc.setScale(GAME_SCALE),this.fc.x=this.hl.x+t,this.fc.y=this.Gd.y,this.addChild(this.fc),this.fc.addClickEventListener((function(){if(1e3>J()-e.fc.Kb)logMessage("click 2 lan trong 1 sec -> don't process action");else{e.fc.Kb=J();var t=new BkFriendsWindow;t.Ab(e),t.Oa(),e.mw()}})),this.Xm=new BkButton("share_butt.png","share_butt_press.png","share_butt.png","share_butt.png",ccui.Widget.PLIST_TEXTURE),this.Xm.setScale(GAME_SCALE),this.Xm.x=this.fc.x+t,this.Xm.y=this.Gd.y,this.addChild(this.Xm),this.Xm.addClickEventListener((function(){n.rb(Va),n.DT()}))),this.bf=this.fy(),t=.005*cc.winSize.width,this.ma=new BkHeartSprite,this.ma.setScale(GAME_SCALE),isWebPlatform()&&this.ma.setScale(Xa),this.ma.x=this.bf.x+this.bf.getBoundingBox().width/2+this.ma.getBoundingBox().width/2+2*t,this.ma.y=this.bf.y+this.bf.Yj()*GAME_SCALE,this.addChild(this.ma),this.ma.bH(),this.oj=new BkDailyTaskSprite,this.oj.setScale(GAME_SCALE),isWebPlatform()?(this.oj.y=this.ma.y+28,this.oj.x=cc.winSize.width-270-this.ma.getBoundingBox().width):(this.oj.y=this.ma.y,this.oj.x=(1-this.bf.x/cc.winSize.width)*cc.winSize.width+this.bf.getBoundingBox().width/2-this.oj.getBoundingBox().width/2),this.addChild(this.oj)},fy:function(){var t=new BkChessAvatar;return t.setScale(GAME_SCALE),isWebPlatform()?(t.setScale(.6),t.x=WINDOW_MARGIN_LEFT+t.getBoundingBox().width/2,t.y=cc.winSize.height-WINDOW_MARGIN_TOP*GAME_SCALE-t.getBoundingBox().height/2):(t.x=.55*cc.winSize.width-t.getBoundingBox().width/2,t.y=.865*cc.winSize.height,n.Sq()&&(t.y=.84*cc.winSize.height)),this.addChild(t),t},UT:function(){var t=Ya(),e=new BkFriendsWindow;e.Ab(t),e.Oa(),null!=t&&t.mw()},Sc:null,Bf:null,mw:function(){null!=this.Sc&&(this.Sc.removeFromParent(),this.Sc=null),null!=this.Bf&&(this.Bf.removeFromParent(),this.Bf=null)},Uv:function(t){logMessage("onUpdatePlayerNewsFees nbFriedOnline: "+t.kC),t=t.kC,null==this.Sc&&(logMessage("onUpdatePlayerNewsFees create this.bgNumberFriendOnline"),this.Sc=new BkSprite("#circle_red.png"),this.addChild(this.Sc));var e=28;isWebPlatform()&&(e=10),null==this.Bf?(this.Bf=new BkLabel(t,"",e,!0),this.addChild(this.Bf)):this.Bf.setString(t),0<t?(this.Sc.setScale(GAME_SCALE),isWebPlatform()?(this.Sc.setScale(.5),this.Sc.x=this.Zf.x-.4*this.Zf.getBoundingBox().width,this.Sc.y=this.Zf.y+.3*this.Zf.getBoundingBox().height):(this.Sc.x=this.fc.x+.3*this.fc.getBoundingBox().width,this.Sc.y=this.fc.y+.3*this.fc.getBoundingBox().height),console.log("onUpdatePlayerNewsFees process 1 friend, this.bgNumberFriendOnline: ",this.Sc),this.Sc.setOpacity(255),this.Bf.setOpacity(255),this.Bf.setScale(GAME_SCALE),this.Bf.x=this.Sc.x,this.Bf.y=this.Sc.y):(this.Sc.setOpacity(0),this.Bf.setOpacity(0),console.log("onUpdatePlayerNewsFees process 0 friend, this.bgNumberFriendOnline: ",this.Sc))},w6:function(){BkLogicManager.S().KA("co ziga da ra mat phien ban moi hon. \nban vui long cap nhat de co duoc nhung tinh nang moi nhat cua he thong.",1,6,"itms-apps://itunes.apple.com/app/id1415712748",2,"https://zigavn.com/huong-dan-chung")},U5:function(){new BkRateAppWindow("Bạn có yêu thích Cờ Ziga không?","Hãy bình chọn 5* cho Cờ Ziga để cộng đồng Cờ Ziga ngày càng phát triển!","Bạn sẽ được tặng 5 Tim sau khi bình chọn 5* cho Cờ Ziga!").Oa()},FT:function(){var t=new BkAddHeartWindow;t.Ab(this),t.Oa()},zi:0,x6:function(){BkGlobal.Qg=!0,0==this.zi%5?BkConnectionManager.Yh(Za,M):1==this.zi%5?BkConnectionManager.Yh(N,M):2==this.zi%5?BkConnectionManager.Yh(N,O):3==this.zi%5?BkConnectionManager.Yh($a,O):4==this.zi%5&&BkConnectionManager.Yh($a,M),this.zi++,4<this.zi&&this.zi++},s6:function(){var t;(t=ab(t=new BkSpriteLoader("http://graph.facebook.com/10203878245936620/picture?width=80&height=80","#default_avatar.jpg"),t.getContentSize().height)).x=100,t.y=100,this.addChild(t)},t6:function(){new BkChooseAccountWindow({xk:"W34518178234235235235",jt:"http://graph.facebook.com/10203878245936620/picture?width=80&height=80",tn:"1236",ew:"111",vl:"3323",cw:"123",kq:"2111",dw:"1",lq:"1912",bw:"20000000"}).Oa()},oV:function(){this.oj.zm()},kx:function(t,e){logMessage("updateHeart: "+t+" - reason: "+e),null!=this.ma&&this.ma.zm(t,e)},mr:function(){if(BkGlobal.Sa==G&&isFBInstantGame())BkFbInstant.tQ();else if(BkGlobal.Sa==G)E.Cr(!0);else{var t=this;isFBInstantGame()&&null!=Ya()&&(t=Ya());var e=new BkHotTableWindow;e.Ab(t),e.Oa()}},ds:null,q2:function(){null==this.ds&&(this.ds=new BkSlideMenuLayer(P),this.addChild(this.ds)),this.ds.L2()},lr:function(t){BkGlobal.Sa==G&&isFBInstantGame()?BkFbInstant.tQ():BkGlobal.Sa==G?E.Cr(!0):1>BkGlobal.P.pb()?BkConnectionManager.NA(bb):(this.hz(t),u(D.LB,t))},hz:function(t){BkGlobal.ja=t,BkLogicManager.S().iz(BkGlobal.ja),s(!1)},kf:function(t,e){null!=this.bf&&this.bf.kf(),null!=this.ma&&(null!=e&&null!=e?this.ma.Ak(e):this.ma.Ak(0))},jP:function(){n.rb(cb),null==this.Mw&&(this.Mw=new BkSettingLayer(this.Gd),this.addChild(this.Mw)),this.Mw.bP()}}),fb=db.extend({ctor:function(){if(this._super(),BkGlobal.Sa==G)this.zM(this._winSize);else if(this.BA(this._winSize),!bk.isFbApp){var t=createBkButtonPlist("btn_no_text.png","btn_no_text_press.png","btn_no_text.png","btn_no_text_press.png");t.setTitleText("THOÁT"),t.setTitleFontSize(16),t.setTitleColor(cc.color(45,22,10)),t.setPosition(cc.winSize.width/2,25),t.addClickEventListener((function(){(BkLogicManager.S().eo||BkGlobal.isLoginFacebook)&&za(D.He),bk.sessionStorage.setItem(D.rB,1..toString()),Aa(),eb()})),BkGlobal.fo||this.addChild(t)}this.aW()},kf:function(t,e){console.log("BkWebGameLayer - this.updateAvatar - this.playerAvatar: ",this.bf),null!=this.bf&&(console.log("BkStartGameLayer - this.updateAvatar()"),this.removeChild(this.bf,!0),this.bf=this.fy()),null!=this.ma&&(null!=e&&null!=e?this.ma.Ak(e):this.ma.Ak(0))},BA:function(){var t=cc.director.getWinSize(),e=this;cc.screen.fullScreen()?this.Ra=new BkButton("btn_scale2.png","btn_scale2.png","btn_scale2.png","btn_scale2_hover.png",ccui.Widget.PLIST_TEXTURE):this.Ra=new BkButton("btn_scale.png","btn_scale.png","btn_scale.png","btn_scale_hover.png",ccui.Widget.PLIST_TEXTURE),this.Ra.x=t.width-WINDOW_MARGIN_RIGHT-.5*this.Ra.getContentSize().width,this.Ra.y=t.height-WINDOW_MARGIN_TOP-.5*this.Ra.getContentSize().height,this.Ra.addClickEventListener((function(){cc.screen.fullScreen()?(exitFullScreen(),e.Ra.loadTextures("btn_scale.png","btn_scale.png","btn_scale.png","btn_scale_hover.png",ccui.Widget.PLIST_TEXTURE)):makeFullScreen((function(){cc.screen.fullScreen()?e.Ra.loadTextures("btn_scale2.png","btn_scale2.png","btn_scale2.png","btn_scale2_hover.png",ccui.Widget.PLIST_TEXTURE):e.Ra.loadTextures("btn_scale.png","btn_scale.png","btn_scale.png","btn_scale_hover.png",ccui.Widget.PLIST_TEXTURE)}))})),this.addChild(this.Ra),this.gc=new BkButton("btn_guide.png","btn_guide.png","btn_guide.png","btn_guide_hover.png",ccui.Widget.PLIST_TEXTURE),this.gc.y=this.Ra.y,this.gc.addClickEventListener((function(){var t=cc.game.config.app.helpMenu;logMessage("btn_guide click - helpUrl: "+t),null!=t&&""!=t&&window.open(t,"_blank")})),this.addChild(this.gc),this.Zf=new BkButton("btn_friend_top.png","btn_friend_top.png","btn_friend_top.png","btn_friend_top_hover.png",ccui.Widget.PLIST_TEXTURE),this.Zf.y=this.Ra.y,this.Zf.addClickEventListener((function(){var t=new BkFriendsWindow;t.Ab(e),t.Oa()})),this.addChild(this.Zf),this.gc.x=this.Ra.x-this.Ra.width-5,this.Zf.x=this.gc.x-this.Zf.width/2-this.gc.width/2-5,this.ZG(),this.QG()},ZG:function(){if(isWebPlatform()){var t=this,e=this.Zf,i=new BkButton("btn_xephang.png","btn_xephang.png","btn_xephang.png","btn_xephang_press.png",ccui.Widget.PLIST_TEXTURE);this.kl=i,this.kl.x=e.x-UI.Da(e)-7-UI.Da(i),this.kl.y=this.Zf.y,this.kl.addClickEventListener((function(){var e=new BkTopPlayersWindow;e.Ab(t),e.Oa()})),this.addChild(this.kl)}},QG:function(){if(isWebPlatform()){var t=this,e=this.kl,i=new BkButton("btn_history_web.png","btn_history_web.png","btn_history_web.png","btn_history_web_press.png",ccui.Widget.PLIST_TEXTURE);i.setScale(.44*GAME_SCALE),this.Op=i,this.Op.x=UI.eb(e)-2-UI.Da(i),this.Op.y=e.y,this.Op.addClickEventListener((function(){t.Rw(0)})),this.addChild(this.Op),(e=new BkSprite("#history_icon_new.png")).x=UI.eb(i)+.8*UI.Da(e),e.y=UI.xf(i)-.8*UI.Ei(e),this.addChild(e)}},Rw:function(t){logMessage("showHistoryListWindow - kindHistory: "+t),(t=0==t?new BkHistoryListWindow(0):new BkHistoryListWindow(1)).Ab(this),t.Oa()},zM:function(t){var e=WD_BODY_MARGIN_LR;this.ns=new BkSprite;var i=new BkSprite("#btn_loginfacebook_normal.png");i.x=i.width/2+e,i.y=t.height-27,this.ns.addChild(i),i.ad((function(){i.setOpacity(255)}),(function(){i.setOpacity(240)})),i.Ua((function(){E.Cr(!0)})),(t=createBkButtonPlist("btn_no_text.png","btn_no_text_press.png","btn_no_text.png","btn_no_text_press.png")).setTitleText("Đăng nhập"),t.setPosition(cc.winSize.width/2,cc.winSize.height/4),t.addClickEventListener((function(){BkLogicManager.S().Qt()})),this.addChild(t),this.Zo=new BkToast,this.addChild(this.Zo,WD_ZORDER_TOP),this.Zo.setVisible(!1),this.Zo.x=cc.winSize.width/2,this.Zo.y=60,t="Bấm đăng nhập bằng tài khoản Facebook để vào game",bk.isFbApp&&(t="Hãy cấp quyền bấm đăng nhập facebook để vào game"),this.Zo.Wh(t,375),this.yM(cc.winSize)},aW:function(){BkGlobal.Sa==G?(this.Hd.setScale(.7),this.Hd.y+=65,this.$f.Ya(!1)):(this.Hd.setScale(.6),this.Hd.y+=55,this.$f.y+=125,this.$f.setScale(.7),this.BA(cc.winSize))}}),gb=cc.Scene.extend({lo:!1,Xv:null,onEnter:function(){this._super(),this.Xv=isWebPlatform()?new fb(G):new db(G),this.addChild(this.Xv),BkGlobal.ja=-1,BkGlobal.wf=-1,BkGlobal.Rj=-1},onEnterTransitionDidFinish:function(){this._super(),this.scheduleUpdate(),t()},update:function(){var t=getCurrentScene();null!=t&&t instanceof gb&&(this.unscheduleUpdate(),processNextEventAfterSceneTransitionDidFinish())},b7:function(t){this.Xv.eW(t)}}),hb=cc.Scene.extend({lo:!1,Se:null,onEnter:function(){s(),this._super(),cc.spriteFrameCache.addSpriteFrames(res.cn,res.bn),cc.spriteFrameCache.addSpriteFrames(res.Wl,res.Xl),cc.spriteFrameCache.addSpriteFrames(res.yr,res.zr),cc.spriteFrameCache.addSpriteFrames(res.uo,res.vo),this.Se=isWebPlatform()?new fb(P):new db(P),this.addChild(this.Se),BkGlobal.ja=-1,BkGlobal.wf=-1,BkGlobal.Rj=-1,logMessage("set default AdsID -> will reset if receive server setting"),n.Or(),this.or()},onEnterTransitionDidFinish:function(){this._super(),this.scheduleUpdate(),t()},update:function(){var t=getCurrentScene();null!=t&&t instanceof hb&&(this.unscheduleUpdate(),processNextEventAfterSceneTransitionDidFinish(),this.PJ(),BkLogicManager.S().wU(),ib(jb),this.OJ(),BkConnectionManager.mC())},OJ:function(){var e=p("lastTimeGetSettingListChatInvalid",0),i=J();e=Math.floor((i-e)/1e3);logMessage("doGetListChatInvalid: "+e),604800<e&&(u("lastTimeGetSettingListChatInvalid",i),i=kb,isFBInstantGame()&&(i=lb),aa(i,(function(e,i){if(t(),e)logMessage("err: "+e);else{logMessage("respondText: "+i);var n=Q(n=JSON.parse(i),"listChatInvalid",mb);logMessage("setListMessageChatInvalid: "+n),u("listMessageChatInvalid",n)}})))},PJ:function(){BkGlobal.jo&&(logMessage("isNeedLoadSetting -> getSettingRequest"),BkGlobal.jo=!1,BkLogicManager.S().Vz(),BkLogicManager.S().jL())},kf:function(t,e){null!=this.Se&&this.Se.kf(t,e)},fj:function(){logMessage("onBackClick BkChooseGameScene");var t=BkStackWindow.ak();null!=t?t.removeSelf():null!=this.Se&&this.Se.fj()},or:function(){if(cc.sys.os==cc.sys.OS_ANDROID){var t=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e){e==cc.KEY.back&&t.fj()}},this)}},Uv:function(t){null!=this.Se&&this.Se.Uv(t)}}),nb=cc.Scene.extend({lo:!1,Qi:null,Wa:null,ed:null,onEnter:function(){this._super(),cc.spriteFrameCache.addSpriteFrames(res.Wl,res.Xl),cc.spriteFrameCache.addSpriteFrames(res.uo,res.vo),this.HA(),logMessage("init BkGlobal.ingameScene"),BkGlobal.ek=this,this.or()},onEnterTransitionDidFinish:function(){this._super(),BkGlobal.ek=this,isWebPlatform()&&this.YL(),this.ed&&(this.ed.visible=!0,this.ed.Rk(BkUserClientSettings.co)),BkLogicManager.oa().$l(),this.scheduleUpdate(),logMessage("onEnterTransitionDidFinish "+J())},update:function(){var t=getCurrentScene();null!=t&&t instanceof nb&&(logMessage("update "+J()),BkGlobal.jo&&(logMessage("isNeedLoadSetting -> getSettingRequest"),BkGlobal.jo=!1,BkLogicManager.S().Vz()),this.unscheduleUpdate(),processNextEventAfterSceneTransitionDidFinish())},HA:function(){switch(null!=this.Wa&&(this.Wa.removeAllChildren(),this.Wa.removeFromParent(),this.Wa=null),BkGlobal.ja){case ob:this.Wa=new BkTLMNGameLayer;break;case K:this.Wa=new BkCoTuongGameLayer;break;case L:this.Wa=new BkCoUpGameLayer;break;case pb:this.Wa=new BkPhomGameLayer;break;case Ka:this.Wa=new BkBaCayGameLayer;break;case qb:this.Wa=new BkSamGameLayer;break;case rb:this.Wa=new BkTLMNDemLaGameLayer;break;case Ia:this.Wa=new BkXiToGameLayer;break;case Ja:this.Wa=new BkXiDzachGameLayer;break;case Ha:this.Wa=new BkPokerGameLayer;break;case La:this.Wa=new BkLiengGameLayer;break;case H:this.Wa=new BkMauBinhGameLayer;break;default:this.Wa=new BkTLMNGameLayer}null!=this.Wa&&(this.addChild(this.Wa),this.Wa.setParent(this))},YL:function(){null!=this.ed&&(this.ed.removeAllChildren(),this.ed.removeFromParent(),this.ed=null);var t=p("chatSetting",1);this.ed=new sb(t,!0),this.ed.visible=!1,null!=this.ed&&(this.addChild(this.ed),this.ed.setParent(this))},ka:function(){return null==this.Wa&&this.HA(),this.Wa},S:function(){return BkLogicManager.oa()},jU:function(t){var e=this;(t=new BkPlayerInfo(t)).Ab(this.Wa),t.Oa(),this.ka().ez(),t.df((function(){logMessage("close playerInfoWd callback"),e.ka().tz()}))},aU:function(t){null!=this.Qi&&this.Qi.removeFromParent(),this.Qi=new BkInviteOtherPlayer(t);var e=this;this.ka().ez(),this.Qi.df((function(){logMessage("close inviteFriend callback"),e.ka().tz()})),this.Qi.Ab(this),this.Qi.Oa()},oE:function(t,e){null!=this.Qi&&this.Qi.Vj(t,e)},kV:function(t,e){logMessage("updateChatBox: "+t+" - serverPos: "+e);for(var i,n=-1,s=-1,r=0;r<CHAT_SMILE_TEXT.length;r++)i=CHAT_SMILE_TEXT[r],-1!=t.indexOf(i)&&i.length>s&&(n=r,s=i.length);if(i=n,!ub(n=(r=this.S().Jb(e)).getName(),s=tb()))if(s=!1,(BkGlobal.ja==K||BkGlobal.ja==L)&&r.Ka&&(s=!0),r=this.ka().tc(e),-1==i){if(this.ed&&this.ed.NV(t,n),!isWebPlatform()){if(null!=r){i=this.ka().SK(n);var o=r.x,a=r.y,c=0,h=0;if(-1!=i){var l=getMaxPlayer(BkGlobal.ja);switch(i){case 0:h=90;break;case 1:c=-96;break;case 2:6==l?c=-96:h=-90;break;case 3:c=80;break;case 4:case 5:6==l&&(c=80)}}r.gE(t,o+c,a+h)}s&&this.ka().vU(t),this.ka().mV(t,n)}}else s?this.ka().uU(i):null!=r&&r.PT(i)},ZV:function(t){this.ed.gq=t,this.ed&&this.ed.Rk(t)},A4:function(){},bm:function(){logMessage("onBackClick BkInGameScene");var t=BkStackWindow.ak();null!=t?t.removeSelf():null!=this.Wa&&this.Wa.bm()},or:function(){if(cc.sys.os==cc.sys.OS_ANDROID){var t=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e){e==cc.KEY.back&&t.bm()}},this)}}}),vb=cc.Scene.extend({Wa:null,data:null,ctor:function(t){this._super(),logMessage("BkHistoryGame - data "+JSON.stringify(t)),this.data=t,logMessage("init BkHistoryGame"),cc.spriteFrameCache.addSpriteFrames(res.Wl,res.Xl),cc.spriteFrameCache.addSpriteFrames(res.uo,res.vo),cc.spriteFrameCache.addSpriteFrames(res.cn,res.bn),BkGlobal.ek=this,this.Jq()},onEnter:function(){this._super(),processNextEventAfterSceneTransitionDidFinish()},onEnterTransitionDidFinish:function(){this._super(),logMessage("onEnterTransitionDidFinish "+J())},Jq:function(){this.Wa=new BkHistoryGameLayer(this.data),null!=this.Wa&&(this.addChild(this.Wa),this.Wa.setParent(this)),console.log("end of initLayer")},ka:function(){return null==this.Wa&&this.Jq(),this.Wa},bm:function(){logMessage("onBackClick BkInGameScene");var t=BkStackWindow.ak();null!=t?t.removeSelf():null!=this.Wa&&this.Wa.bm()},or:function(){if(cc.sys.os==cc.sys.OS_ANDROID){var t=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e){e==cc.KEY.back&&t.bm()}},this)}}});BkLoaderScene=cc.Scene.extend({lo:!1,_interval:null,_label:null,_className:"LoaderScene",cb:null,target:null,background:null,init:function(){var t=this._bgLayer=new cc.LayerColor(cc.color(255,255,255,0));logMessage("custom BG"),this.addChild(t,0);var e=24,i=0;return cc._loaderImage&&(e=14,i=-110),(e=this._label=new cc.LabelTTF("Loading... 0%","Arial",e)).setPosition(cc.pAdd(cc.visibleRect.center,cc.p(0,i))),e.setColor(cc.color(180,180,180)),t.addChild(this._label,10),!0},_initStage:function(t,e){var i=this._texture2d=new cc.Texture2D;i.initWithElement(t),i.handleLoadedTexture(),(i=this._logo=new cc.Sprite(i)).setScale(cc.contentScaleFactor()),i.x=e.x,i.y=e.y},onEnter:function(){cc.Node.prototype.onEnter.call(this),this.schedule(this._startLoading,.3),BkConnectionManager.lk()||BkConnectionManager.fk()},onExit:function(){cc.Node.prototype.onExit.call(this),this._label.setString("Loading... 0%")},initWithResources:function(t,e,i){cc.isString(t)&&(t=[t]),this.resources=t||[],this.cb=e,this.target=i},_startLoading:function(){var t=this;t.unschedule(t._startLoading);var e=t.resources;cc.loader.releaseAll(),cc.loader.load(e,(function(e,i,n){e=Math.min(n/i*100|0,100),t._label.setString("Loading... "+e+"%")}),(function(){t.cb&&t.cb.call(t.target)}))}});var wb=null;function xb(t,e,i){return cc.EventListener.create({event:cc.EventListener.MOUSE,onMouseMove:function(i){var n=i.getLocation(),s=i.getCurrentTarget();cc.rectContainsPoint(s.getBoundingBoxToWorld(),n)?(cc._canvas.style.cursor="pointer",BkInSide.aB=!0,BkInSide.dx=s,null!=t&&null!=t&&t(i)):(BkInSide.dx==s&&(cc._canvas.style.cursor="default",BkInSide.aB=!1,BkInSide.dx=null),null!=e&&null!=e&&e(i))},onMouseDown:function(t){null!=i&&null!=i&&i(t)}}).clone()}function yb(t,e,i){return cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(e,i){var n=(s=i.getCurrentTarget()).convertToNodeSpace(e.getLocation()),s=s.getContentSize();s=cc.rect(0,0,s.width,s.height);return!!cc.rectContainsPoint(s,n)&&(null==t||null==t||null==(n=t(e,i))||(logMessage("rtn callback != undefined"),n))},onTouchMoved:function(t,i){null!=e&&null!=e&&e(t,i)},onTouchEnded:function(t,e){null!=i&&null!=i&&i(t,e)}}).clone()}BkLoaderScene.preload=function(t,e,i){return wb||(wb=new BkLoaderScene).init(),cc.director.runScene(wb),wb.initWithResources(t,e,i),wb},BkInSide={aB:!1,dx:null},BkSprite=cc.Sprite.extend({Cd:null,Je:null,Kb:0,ctor:function(t,e){this._super(t,e),this.Je=this.Cd=null,this.retain()},getWidth:function(){return this.width*this.getScaleX()},getHeight:function(){return this.height*this.getScaleY()},Ua:function(t){this.JR(),this.Je=yb(t),cc.eventManager.addListener(this.Je,this)},ad:function(t,e){this.lw(),this.Cd=xb(t,e),cc.eventManager.addListener(this.Cd,this)},oT:function(){this.x=this.getContentSize().width/2,this.y=this.getContentSize().height/2},JR:function(){null!=this.Je&&cc.eventManager.removeListener(this.Je)},lw:function(){null!=this.Cd&&cc.eventManager.removeListener(this.Cd)},removeSelf:function(){null!=this.Cd&&cc.eventManager.removeListener(this.Cd),null!=this.Je&&cc.eventManager.removeListener(this.Je),isWebPlatform()&&(cc._canvas.style.cursor="default"),this.removeFromParent()},removeFromParent:function(t){this._super(t),this.release()},XD:function(t){isWebPlatform()||this.setScale(t/this.getContentSize().height)},a5:function(t){isWebPlatform()||this.setScale(t/this.getContentSize().width)},Yb:function(t,e){void 0===e&&(e=t),isWebPlatform()||this.setScale(t,e)},Of:function(t){t=cc.spriteFrameCache.getSpriteFrame(t),this.setSpriteFrame(t)}}),HOT_ITEM_PADDING_X=5,BKHotTableItem=ccui.Widget.extend({Qd:null,Af:null,Oh:null,Gb:null,pc:null,nk:null,qo:null,Fc:null,lf:null,Zi:null,ctor:function(t,e){this._super(),this.Qd=t,this.Pc=createBkButtonPlist("banhot_miniFrame.png","banhot_miniFrame.png","banhot_miniFrame.png","banhot_miniFrame.png");var i=6.5;isWebPlatform()&&(i=6),this.setContentSize(cc.size(1.1*this.Pc.getContentSize().width,e.Q.height/i)),this.setScale(GAME_SCALE),this.setPosition(.5*this.getContentSize().width,.5*this.getContentSize().height),this.Pc.setPosition(.5*this.getContentSize().width,.5*this.getContentSize().height),this.addChild(this.Pc),logMessage("BKHotTableItem "+this.getContentSize().width+" "+this.getContentSize().height),this.init(),this.iK()},JG:function(t){this.Pc&&this.Pc.addClickEventListener((function(){t&&t()}))},init:function(){this.Fc=new BkSprite("#banhot_icon_CT.png"),this.Fc.x=this.getContentSize().width/2,this.Fc.y=this.getContentSize().height/2,this.addChild(this.Fc),this.Gb=new BkSprite("#default_avatar.jpg"),this.Gb.setScale(.72),this.Gb.x=this.Fc.x-this.Gb.getContentSize().width/2-HOT_ITEM_PADDING_X,this.Gb.y=this.getContentSize().height/2,this.addChild(this.Gb),this.pc=new BkSprite("#default_avatar.jpg"),this.pc.setScale(.72),this.pc.x=this.Fc.x+this.pc.getContentSize().width/2+HOT_ITEM_PADDING_X,this.pc.y=this.getContentSize().height/2,this.addChild(this.pc);var t=cc.color(251,234,180);t=17;isWebPlatform()||(t=25),this.Af=new BkLabel("","Arial",t,!0),this.addChild(this.Af,10),this.Oh=new BkLabel("","Arial",t,!0),this.addChild(this.Oh,10),this.nk=new BkLabel("","Arial",t),this.qo=new BkLabel("","Arial",t),t=R,this.Af.setTextColor(t),this.Oh.setTextColor(t),this.nk.setTextColor(t),this.qo.setTextColor(t)},iK:function(){if(null!=this.Qd){var t="banhot_icon_CT.png";this.Qd.ya==L&&(t="banhot_icon_CU.png"),null!=this.Fc&&(this.Fc.removeSelf(),this.Fc=null),this.Fc=new BkSprite("#"+t),this.Fc.x=this.getContentSize().width/2,this.Fc.y=this.getContentSize().height/1.8,this.addChild(this.Fc);var e=.72;t=30;isWebPlatform()&&(e=.52,t=18),logMessage("create avatarFirstPlayer "+this.Qd.Di+" - "+this.Qd.sq),null!=this.Gb&&(this.Gb.removeSelf(),this.Gb=null),this.Gb=zb(this.Qd.vK,this.Qd.sq),this.Gb.setScale(e),this.Gb.x=this.Fc.x-this.Fc.getBoundingBox().width/2-this.Gb.getBoundingBox().width/2-HOT_ITEM_PADDING_X,this.Gb.y=this.getContentSize().height/2+5,this.addChild(this.Gb),this.Af.setString(Ab(this.Qd.Di,13)),this.Af.x=this.Gb.x-this.Gb.getBoundingBox().width/2-this.Af.getContentSize().width/2-HOT_ITEM_PADDING_X,this.Af.y=this.getContentSize().height/2,null!=this.pc&&(this.pc.removeSelf(),this.pc=null),this.pc=zb(this.Qd.zN,this.Qd.NB),this.pc.setScale(e),this.pc.x=this.Fc.x+this.Fc.getBoundingBox().width/2+this.pc.getBoundingBox().width/2+HOT_ITEM_PADDING_X,this.pc.y=this.Gb.y,this.addChild(this.pc),this.Oh.setString(Ab(this.Qd.yN,13)),this.Oh.x=this.pc.x+this.pc.getBoundingBox().width/2+this.Oh.getContentSize().width/2+HOT_ITEM_PADDING_X,this.Oh.y=this.getContentSize().height/2,isWebPlatform()||(this.Gb.x=.2*this.getContentSize().width,this.Af.x=this.Gb.x,this.Gb.y=this.getContentSize().height/2+.35*this.Gb.getContentSize().height,this.pc.y=this.Gb.y,this.Af.y=this.Gb.y-this.Gb.getContentSize().height/2-1.5*this.Af.getContentSize().height,this.nk.setString(this.Qd.sq),this.nk.x=this.Gb.x,this.nk.y=0+this.nk.getContentSize().height/2,this.pc.x=.8*this.getContentSize().width,this.Oh.x=this.pc.x,this.Oh.y=this.Af.y,this.qo.setString(this.Qd.NB),this.qo.x=this.pc.x,this.qo.y=this.nk.y,this.Fc.y=this.getContentSize().height/2),e=.01*this.getContentSize().width,null==this.lf&&(this.lf=new BkSprite("#nguoixem.png"),this.lf.x=this.getContentSize().width/2-this.lf.getContentSize().width/2,this.lf.y=this.Fc.y-this.Fc.getContentSize().height/2-.3*this.lf.getContentSize().height,this.lf.y=this.Af.y,isWebPlatform()&&(this.lf.y-=20),this.addChild(this.lf)),null==this.Zi?(this.Zi=new BkLabel(this.Qd.xc-2,"",t,!0),this.Zi.setTextColor(R),this.Zi.x=this.lf.x+this.lf.getContentSize().width/2+this.Zi.getContentSize().width/2+e,this.Zi.y=this.lf.y,this.addChild(this.Zi)):this.Zi.setString(this.Qd.xc-2)}}}),BkTableView=cc.Layer.extend({Zs:null,Jm:0,Ep:null,Bp:null,Kp:null,Cp:null,Cg:null,ctor:function(t,e,i,n,s,r){this._super(),this.Zs=t,this.Jm=e,this.Ep=i,this.Bp=n,this.Kp=s,this.Cp=r},init:function(){this.Cg=new cc.TableView(this,this.Kp),this.Cg.setDirection(cc.SCROLLVIEW_DIRECTION_VERTICAL),this.Cg.x=(this.Kp.width-this.Cp.width)/2,this.Cg.y=0,this.Cg.setDelegate(this),this.Cg.setVerticalFillOrder(cc.TABLEVIEW_FILL_TOPDOWN),this.Cg.setTouchEnabled(!0),this.addChild(this.Cg),this.Un(),this.Cg.reloadData(),this.bake(),isWebPlatform()&&cc.isFunction(cc.inputManager.AR)&&cc.inputManager.AR(cc._canvas)},Un:function(){isWebPlatform()&&(this.Jm.length*this.Cp.height<this.Kp.height||"mouse"in cc.sys.capabilities&&cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseScroll:function(t){var e=cc.sys.isNative?6*t.getScrollY():-t.getScrollY(),i=t.getCurrentTarget();return t=t.getLocation(),!!cc.rectContainsPoint(i.getBoundingBoxToWorld(),t)&&(e=i.getContentOffset().y+e,e=Math.min(Math.max(e,i.minContainerOffset().y),i.maxContainerOffset().y),i.setContentOffset(cc.p(0,e)),!0)}},this.Cg))},scrollViewDidScroll:function(){},scrollViewDidZoom:function(){},tableCellTouched:function(t,e){logMessage("cell touched at index: "+e.getIdx()),null!=this.Bp&&null!=this.Bp?this.Bp(this.Jm[e.getIdx()]):logMessage("tableCellTouched: onclick callback")},tableCellSizeForIndex:function(){return this.Cp},cJ:function(t){var e;return null!=this.Ep&&null!=this.Ep&&((e=this.Ep(t,this.Zs)).tag=123,e.x=e.getBoundingBox().width/2,e.y=e.getBoundingBox().height/2),e},tableCellAtIndex:function(t,e){var i,n=t.dequeueCell();return n?(i=n.getChildByTag(123),n.removeChild(i)):n=new Bb,null!=(i=this.cJ(this.Jm[e]))&&n.addChild(i),n.ad(),n},numberOfCellsInTableView:function(){return this.Jm.length},x_:function(){return this.Zs},onExit:function(){isWebPlatform()&&cc.isFunction(cc.inputManager.UR)&&cc.inputManager.UR(cc._canvas),this._super()}});var Bb=cc.TableViewCell.extend({Cd:null,ctor:function(){this._super(),this.ad()},draw:function(t){this._super(t)},ad:function(){isWebPlatform()&&(this.lw(),this.Cd=xb(),cc.eventManager.addListener(this.Cd,this))},lw:function(){null!=this.Cd&&cc.eventManager.removeListener(this.Cd)}});if(BkTableData=cc.Class.extend({rg:null,ac:null,yk:null,dj:null,bk:null,Ub:null,Gm:null,Zn:null,Xn:null,Jt:[],ctor:function(){this.yk=this.ac=this.rg=0,this.dj=4,this.Ub=this.bk=0,this.Zn=!0,this.Xn=!1,this.Gm=0,this.Jt=[]},toString:function(){return"[tableID: "+this.rg+" - betMoney: "+this.ac+" - numberPlayer: "+this.yk+" - maxNumberPlayer: "+this.dj+" - hasPassword: "+this.bk+" - isInGameProgress: "+this.Ub+"- isBaicMode: "+this.Zn+"- is411: "+this.Xn+"]"},clone:function(){var t=new BkTableData;return t.rg=this.rg,t.ac=this.ac,t.yk=this.yk,t.dj=this.dj,t.bk=this.bk,t.Ub=this.Ub,t.Zn=this.Zn,t.Xn=this.Xn,t.Jt=this.Jt,t.Gm=this.Gm,t}}),BkRoomData=cc.Class.extend({Od:null,percent:null,ctor:function(){this.percent=this.Od=0}}),BkUserData=cc.Class.extend({userName:null,displayName:null,password:null,Zp:null,ye:null,Ai:0,Bi:0,$c:null,Hl:null,tq:null,Hb:null,zz:null,Dz:null,pz:null,oy:null,vA:null,status:null,ya:null,vq:null,cC:null,ny:null,aO:null,Ta:null,px:null,du:null,ww:null,Io:null,Cm:0,Vl:null,Ie:!1,zo:0,lC:0,iq:0,Ex:!1,Gx:0,Hx:0,Fx:0,UW:0,bC:0,JE:"",Rs:-1,Ph:null,gr:null,fr:null,Mf:-1,Lf:-1,hh:-1,gh:-1,cd:-1,vm:-1,fx:-1,ck:-1,ctor:function(){this.userName="",this.ye=0,this.Hb=-1},AL:function(){return this.userName},yd:function(t){this.userName=t},G_:function(){return this.password},R4:function(t){this.password=t},p5:function(t){this.px=t},D4:function(t){this.du=t},b5:function(t){this.ww=t},c_:function(){return this.du},T_:function(){return this.ww},$_:function(){return this.px},J4:function(t){this.Vl=t},v_:function(){return this.Vl},Mb:function(t){this.ye=t},pb:function(){return this.ye},cf:function(t){this.Hb=t},zK:function(){return this.Hb},ID:function(t){this.Ai=t},a_:function(){return this.Ai},JD:function(t){this.Bi=t},b_:function(){return this.Bi},Xh:function(t){this.$c=t},u_:function(){return this.$c},om:function(t){this.Hl=t},l_:function(){return this.Hl},ND:function(t){this.tq=t},e_:function(){return this.tq},Qr:function(t){this.ya=t},f_:function(){return this.ya},Sr:function(t){this.Ie=t},W0:function(){return this.Ie},Jw:function(t){this.Ta=t},Fn:function(){return this.Ta},M4:function(t){this.vq=t},C_:function(){return this.vq},UD:function(t){this.zo=t},D_:function(){return this.zo},g0:function(){return this.lC},AT:function(t){this.lC=t},$Z:function(){return this.iq},cT:function(t){this.iq=t},g_:function(){return this.Ex},OD:function(t){this.Ex=t},i_:function(){return this.Gx},hT:function(t){this.Gx=t},j_:function(){return this.Hx},iT:function(t){this.Hx=t},h_:function(){return this.Fx},gT:function(t){this.Fx=t},f0:function(){return this.bC},aE:function(t){this.bC=t},PG:function(){null==this.Ph&&(this.Ph=[]);for(var t=2;5>=t;t++)if(0==this.ZM(t)){var e=new BkItemDetail;e.Ui=t,this.Ph.unshift(e)}},ZM:function(t){if(null==this.Ph)return!1;for(var e=0;e<this.Ph.length;e++)if(this.Ph[e].Ui==t)return!0;return!1},h0:function(t,e){var i=!1,n=[];switch(e){case Cb:n=this.Ph;break;case Db:n=this.gr;break;case Eb:n=this.fr;break;default:n=[]}if(null!=n&&0<n.length)for(var s=0,r=n.length;s<r;s++)n[s].Ui==t&&(i=!0);return i},R1:function(){logMessage("[ name: "+this.userName+" - lv: "+this.$c+" avar: "+this.Hb+" rank: "+this.Fn()+"]")},HD:function(t){this.JE=t},WZ:function(){return this.JE},BB:function(){return-1!=this.Lf},DB:function(){return-1!=this.hh},CB:function(){return-1!=this.Mf},j1:function(){return!!(this.BB()||this.CB()||this.DB())},X_:function(){if(-1==this.Mf&&-1==this.Lf&&-1==this.hh)return CIngameAvatar.yG;var t=CIngameAvatar.yG,e=4;return this.Mf<e&&-1!=this.Mf&&(e=this.Mf,t=CIngameAvatar.eX),this.Lf<e&&-1!=this.Lf&&(e=this.Lf,t=CIngameAvatar.dX),this.hh<e&&-1!=this.hh&&(t=CIngameAvatar.fX),t},Y_:function(){if(-1==this.Mf&&-1==this.Lf&&-1==this.hh)return"";var t="",e=4;return this.Mf<e&&-1!=this.Mf&&(e=this.Mf,t="đại gia"),this.Lf<e&&-1!=this.Lf&&(e=this.Lf,t="cao thủ"),this.hh<e&&-1!=this.hh&&(t="đang lên"),t},y_:function(){var t=4;return this.Mf<t&&-1!=this.Mf&&(t=this.Mf+1),this.Lf<t&&-1!=this.Lf&&(t=this.Lf+1),this.hh<t&&-1!=this.hh&&(t=this.hh+1),t},U0:function(){var t=0;return this.BB()&&t++,this.CB()&&t++,this.DB()&&t++,1<t}}),BkRadioButtonData=cc.Class.extend({id:null,value:null,description:null,ctor:function(t,e,i){this.id=t,this.value=e,this.description=null!=i?i:""}}),BkConvertCardXu=cc.Class.extend({AG:null,bO:null,eO:null,ctor:function(t,e,i){this.AG=t,this.bO=i,this.eO=e}}),BkBasicUserInfo=cc.Class.extend({userName:null,Hb:null,ye:null,ctor:function(t,e,i){this.userName=t,this.ye=e,this.Hb=i},AL:function(){return this.userName},yd:function(t){this.userName=t},Mb:function(t){this.ye=t},pb:function(){return this.ye},cf:function(t){this.Hb=t},zK:function(){return this.Hb}}),BkPlayerAchievement=cc.Class.extend({Cm:null,Vl:null,m0:0,vq:null,ny:null,cC:null,ya:null,Tg:null,h2:null,Ta:null,kW:null,ctor:function(t,e,i,n,s){this.ya=t,this.Tg=e,this.Cm=i,this.Vl=n,this.Ta=s}}),BkPromotionInfo=cc.Class.extend({h1:null,K0:null,mB:null,MU:0,NU:0,OU:0,xB:null,uB:null,yB:null,v1:0,t1:0,u1:0,yR:null,io:null,ctor:function(){isJoinFromInviteFriend=receiveInviteState=isShowRegisterPhone=isShowFaceBookInviteFB=isShowNapTien=!1,lastAskingTimeInvitePayment=lastAskingTimeInviteFacebook=lastAskingTimeRegisterPhone=0}}),BkChatEmoData=cc.Class.extend({yb:"",zb:"",Mn:"",Eb:0}),BkPlayerInfoData=cc.Class.extend({name:"",position:0,status:0,jg:0,rf:"",Tg:0,iB:!1,Ka:!1,ae:!1}),BkAnimationCardData=cc.Class.extend({zs:0,iF:0,nz:0,tag:-1,BZ:null,ctor:function(t,e,i,n){this.zs=e,this.iF=i,this.nz=t,this.tag=n}}),BkUserClientSettings=cc.Class.extend({pN:null,es:null,co:null,ctor:function(t,e,i){this.pN=t,this.es=e,this.co=i}}),BkUserClientSettings.QV=function(){var t=BkGlobal.Pf;S(D.ox+cc.username.toLowerCase(),JSON.stringify(t))},BkUserClientSettings.ZK=function(){var t=F(D.Ix,!1,""),e=[];return null!=t&&""!=t&&(e=JSON.parse(t)),e},BkUserClientSettings.J6=function(t,e){var i=BkUserClientSettings.ZK(),n=BkUserClientSettings.zL(t.toLowerCase(),i);-1<n&&BkUserClientSettings.ZR(i,n),i.unshift((new Date).getTime()),i.unshift(e),i.unshift(t.toLowerCase()),S(D.Ix,JSON.stringify(i))},BkUserClientSettings.T6=function(t,e,i){i.unshift((new Date).getTime()),i.unshift(e),i.unshift(t.toLowerCase())},BkUserClientSettings.ZR=function(t,e){t.splice(e,3)},BkUserClientSettings.zL=function(t,e){for(var i=0;i<e.length;i+=3)if(e[i]===t)return i;return-1},BkUserClientSettings.mL=function(){return F(D.ox+cc.username.toLowerCase(),!0)},BkUserClientSettings.z4=function(t,e){if(logMessage("call setDektopClientId: "+t+" "+e),-1==t.indexOf("undefined")){var i=F(D.clientId);null==i||i==wa||""==i?(logMessage("cid not found, set dessktop client id"),S(D.clientId,t),setCookie(Fb,t,3650),i=t):logMessage("cid found, do nothing"),cc.nh=i+";"+Gb}else logMessage("Used default web client id"),cc.nh=cc.nh.replace("_Chrome","_Dt"),cc.nh=cc.nh+";"+Gb;logMessage("DESKTOP CLIENT ID: "+cc.nh),cc.isString(e)&&(bk.Uk=e),BkGlobal.mN&&bk.H0&&BkGlobal.Yn&&(logMessage("AUTO REGISTER"),BkLogicManager.S().fB||($("#progress-text").text("Đang khởi tạo dữ liệu..."),showProgressModalEx(),BkConnectionManager.Ar(),BkLogicManager.S().jb(BkLogicManager.S()),BkLogicManager.S().WJ("_1","",cc.nh),s(!0)))},BkUserClientSettings.zV=function(t,e){var i=[];null!=F(t,!1,"")&&""!=F(t,!1,"")&&(i=JSON.parse(F(t,!1,"")));for(var n=0;n<e.length;n++)i.push(e[n]);S(t,JSON.stringify(i))},BkUserClientSettings.MD=function(t){var e=[],i=(new Date).getTime()+2592e6;e.push(i),BkUserClientSettings.zV(t,e)},BkUserClientSettings.XK=function(){var t=E.te;if(""==F(t,!1,""))BkUserClientSettings.MD(t);else{var e=F(t,!1,"");if(null==e)return"";e=JSON.parse(e),(new Date).getTime()>=e[0]&&(za(t),BkUserClientSettings.MD(t))}return F(t,!1,"")},BkUserClientSettings.$V=function(t){var e=BkUserClientSettings.mL();0==e&&(e=new BkUserClientSettings(t,1,0),S(D.ox+cc.username.toLowerCase(),JSON.stringify(e))),BkGlobal.Pf=e,null!=BkGlobal.Pf&&null!=BkGlobal.Pf||(BkGlobal.Pf=new BkUserClientSettings(t,1,0))},BkUserClientSettings.zq=function(){if(null!=BkGlobal.jq)return BkGlobal.jq;var t=F(D.VB,!1,""),e=[];return null!=t&&""!=t&&(e=JSON.parse(t)),BkGlobal.jq=e},BkUserClientSettings.$G=function(t){var e=BkUserClientSettings.zq();0<=BkUserClientSettings.lA(t,e)||(e.unshift(t.toLowerCase()),50<e.length&&e.pop(),BkGlobal.jq=e,S(D.VB,JSON.stringify(e)))},BkUserClientSettings.YR=function(t){var e=BkUserClientSettings.zq();0<=(t=BkUserClientSettings.lA(t,e))&&e.splice(t,1),BkGlobal.jq=e,S(D.VB,JSON.stringify(e))},BkUserClientSettings.lA=function(t,e){e=void 0===e?BkUserClientSettings.zq():e,t=t.toLowerCase();for(var i=0;i<e.length;i++)if(t===e[i])return i;return-1},BkUserClientSettings.PN=function(){for(var t=BkUserClientSettings.zq(),e=0;e<t.length;e++)logMessage(t[e])},BkStack=cc.Class.extend({ai:[],ctor:function(){this.ai=[]},nR:function(t){this.ai.push(t)},xL:function(){return 0==this.ai.length?null:this.ai[this.ai.length-1]},pop:function(){return this.ai.pop()},yl:function(){return this.ai.length},m1:function(t){return t>=this.ai.length?null:this.ai[t]}}),void 0===Hb)var Hb={},Ib=0,Jb=1;if(void 0===Kb)var Kb={},Lb=0,Mb=1,Nb=2,Ob=3,Pb=4,Qb=0,Rb=1,Sb=2,Tb=3,Ub=100,Vb=400,Wb=800,Xb=1200,Yb=1600,Zb=2e3,$b=2400;if(void 0===ac)var ac={},bc=0,dc=1,ec=2,fc=3,gc=4,hc=5,ic=6,jc=7;if(void 0===kc)var kc={},lc=0,mc=1;if(void 0===nc)var nc={},oc="USERNAME",pc="EVENT",qc="ERROR_CODE";if(void 0===rc)var rc={},bb=0,sc=1;if(void 0===tc)var tc={},uc="LOGIN",vc="PLAY_GAME",wc="FRIEND_WD",xc="ADD_HEART_WD",yc="HOT_TABLE",zc="LINK_FB",Ac="INVITE_FRIEND",Bc="FINISH_TASK",Cc="VIEW_ADS_BANNER",Ba="PREPARE_GAME",Dc="PLAYER_INFO_WD",Ec="BTN_VIEW_ADS_ADD_HEART_WD",cb="BTN_SETTING",Fc="BTN_MESSENGER",Va="BTN_SHARE_NATIVE",Gc="BTN_EDIT_NAME_PROFILE",Hc="BTN_HEART_INGAME",Ic="BTN_HEART_MAIN_SCREEN",Qa="BTN_CO_TUONG",Ra="BTN_CO_UP",Sa="BTN_HOT_TABLE_IMG",Ta="BTN_HOT_TABLE",Jc="ADMOB_BANNER_LOAD_SUCC",Kc="ADMOB_VIDEO_LOAD_SUCC",Lc="ADMOB_INTERSITIAL_LOAD_SUCC",Mc="FB_BANNER_LOAD_SUCC",Nc="FB_INTERSITIAL_LOAD_SUCC",Oc="FB_VIDEO_LOAD_SUCC",Pc="MP_BANNER_LOAD_SUCC",Qc="MP_VIDEO_LOAD_SUCC",Rc="MP_INTERSITIAL_LOAD_SUCC",Sc="ADMOB_BANNER_LOAD_FAIL",Tc="ADMOB_VIDEO_LOAD_FAIL",Uc="ADMOB_INTERSITIAL_LOAD_FAIL",Vc="FB_BANNER_LOAD_FAIL",Wc="FB_INTERSITIAL_LOAD_FAIL",Xc="FB_VIDEO_LOAD_FAIL",Yc="MP_BANNER_LOAD_FAIL",Zc="MP_VIDEO_LOAD_FAIL",$c="MP_INTERSITIAL_LOAD_FAIL",ad="VIEW_VIDEO_NOT_COMPLETE",bd="CANCEL_INVITE_VIEW_VIDEO",cd="INVITE_VIEW_VIDEO",ia="LOAD_SETTING",dd="IOS_MEMORY_WARNING";if(void 0===ed)var ed={},ba="http://config.zigavn.com/WebCo/",ca="http://cf1.zigavn.com/WebCo/",da="http://cf2.zigavn.com/WebCo/",ea="http://cf3.zigavn.com/WebCo/",ga="https://raw.githubusercontent.com/zigavn/cf/master/config.txt",fd="ws://zigavn.com:18090",kb="http://config.zigavn.com/config_chat.json",lb="config_chat.json";if(void 0===gd)var gd={},hd="ca-app-pub-1664441389124237~3884808262",id="ca-app-pub-1664441389124237~7417268288",jd="ca-app-pub-7291071617682162/8450842802",kd="ca-app-pub-7291071617682162/4452429642",ld="ca-app-pub-7291071617682162/2550569899",md="2071609686435518_2071614613101692",nd="2071609686435518_2071614053101748",od="2071609686435518_2133826463547173",pd="5fda1a0be9a54997a7c4183db292ebd7",qd="8e9c1324d5f34c3b9d5f90f097c1c884",rd="354a031c65574df0b715c22bf72c1a7b",sd="ca-app-pub-7291071617682162/7713024940",td="ca-app-pub-7291071617682162/7635737008",ud="ca-app-pub-7291071617682162/5340384761",vd="2071609686435518_2071611443102009",wd="2071609686435518_2071610043102149",xd="2071609686435518_2133825410213945",yd="fa96cc014faa4882bc67ef5a6ffe8702",zd="c216d3560f924be18026dd351c88fc51",Ad="6215ee5d54d74e1dbcd651593d37f07e",Bd="ca-app-pub-7291071617682162/4452429642",Cd="ca-app-pub-7291071617682162/2550569899",Dd="2071609686435518_2071614053101748",Ed="2071609686435518_2133826463547173",Fd="8e9c1324d5f34c3b9d5f90f097c1c884",Gd="354a031c65574df0b715c22bf72c1a7b",Hd="ca-app-pub-7291071617682162/7635737008",Id="ca-app-pub-7291071617682162/5340384761",Jd="2071609686435518_2071610043102149",Kd="2071609686435518_2133825410213945",Ld="c216d3560f924be18026dd351c88fc51",Md="6215ee5d54d74e1dbcd651593d37f07e";if(void 0===Nd)var Nd={},Od=4,Pd=6,Qd=18;if(void 0===Rd)var Rd={},Sd=900,Td=997,Ud=999,Vd=1e3;if(void 0===Wd)var Wd={},Xd=0,Yd=3,Zd=4,$d=5,ae=6,be=7,ce=8,de=9,ee=10,fe=16,ge=17,he=18,ie=19,je=20,ke=21,le=22,me=23,ne=24,oe=25,pe=26,qe=27,re=28,se=28,te=28,ue=29,ve=29,we=30,xe=30,ye=31,ze=33,Ae=34,Be=34,Ce=34,De=34,Ee=35,Fe=36,Ge=37,He=37,Ie=37,Je=37,Ke=38,Le=38,Me=38,Ne=39,Oe=40,Pe=40,Qe=40,Re=41,Se=41,Ue=42,Ve=43,We=44,Xe=45,Ye=46,Ze=47,$e=48,af=50,bf=51,cf=52,df=53,ef=54,ff=55,gf=57,hf=58,jf=59,kf=62,lf=63,mf=64,nf=65,of=66,pf=67,qf=68,rf=69,sf=70,tf=71,uf=72,vf=74,wf=75,xf=75,yf=77,zf=78,Af=80,Bf=81,Cf=81,Df=81,Ef=81,Ff=82,Gf=82,Hf=82,If=83,Jf=84,Kf=85,Lf=86,Mf=87,Nf=88,Of=89,Pf=90,Qf=91,Rf=92,Sf=93,Tf=94,Uf=95,Vf=96,Wf=98,Xf=99,Yf=100,Zf=101,$f=102,ag=103,bg=104,cg=105,dg=106,eg=107,fg=108,gg=109,hg=110,ig=111,jg=112,kg=113,lg=113,mg=114,ng=114,og=115,pg=115,qg=116,rg=117,sg=118,tg=118,ug=118,vg=119,wg=119,xg=120,yg=120,zg=120,Ag=121,Bg=121,Cg=122,Dg=122,Eg=122,Fg=124,Gg=125,Hg=126,Ig=127,Jg=-1,Kg=-2,Lg=-3,Mg=-4,Ng=-5,Og=-6,Pg=-7,Qg=-11,Rg=-16,Sg=-16,Tg=-16,Ug=-17,Vg=-18,Wg=-19,Xg=-22,Yg=-23,Zg=-24,$g=-25,ah=-26,bh=-26,ch=-26,dh=-26,eh=-27,fh=-29,gh=-33,hh=-34,ih=-36,jh=-37,kh=-39,lh=-39,mh=-40,nh=-41,oh=-42,ph=-45,qh=-46,rh=-47,sh=-48,th=-49,uh=-50,vh=-51,wh=-52,xh=-52,yh=-53,zh=-53,Ah=-54,Bh=-55,Ch=-56,Dh=-57,Eh=-58,Fh=-59,Gh=-60,Hh=-64,Ih=-65,Jh=-66,Kh=-67,Lh=-70,Mh=-72,Nh=-74,Oh=-74,Ph=-75,Qh=-76,Rh=-79,Sh=-81,Th=-82,Uh=-88,Vh=-89,Wh=-91,Xh=-92,Yh=-93,Zh=-96,$h=-98,ai=-99,bi=110,ci=-99,di=-100,ei=-100,fi=-100,gi=-101,hi=-101,ii=-103,ji=-104,ki=-105,li=-108,mi=-109,ni=-110,oi=-110,pi=-111,qi=40,Na=40,ri=41,si=41,ti=79,ui=24,vi=24,wi=-115,xi=-116,yi=-117,zi=-118,Ai=-118,Bi=-119,Ci=-120,Di=-121,Ei=-121,Fi=-122,Gi=-122,jb=-123,Hi=-69,Gb=13,Ii="cw_",Ji="_inst",Fb="clientIdV2",Ki="1",Li="6",Mi="8",Ni="1.0.0",Oi=28,Xa=.6,Pi=15;if(void 0===Qi)var Qi={},Ri,Si="zigavn.sp@gmail.com",Ti="https://m.me/cotuongcoup",Ui=2,Vi="https://zigavn.com/huong-dan-chung",Wi="https://zigavn.com/quy-dinh",Xi=5,Yi="https://play.google.com/store/apps/details?id=ziga.cotuong.coup",Zi="itms-apps://itunes.apple.com/app/id1415712748",$i="https://zigavn.com/",mb="con cho:con chó:địt:dit:me may:mẹ mày:ngu:cut:cứt:bo may:bố mày:thằng:chó:lồn:buồi:mat lon";if(void 0===aj)var aj={},bj=2,cj=1,dj=6,ej="Đặt số không hợp lệ;Vé cược có số bị trùng nhau;Đặt cược sai format;Bạn không đủ tiền;Đã hết thời gian cược. Vui lòng quay lại sau!;Đặt tiền cược quá giới hạn".split(";");if(void 0===fj)var fj={},P=0,gj=2,T=3,hj=4,G=99,ij=-2,jj=101;if(void 0===kj)var kj={},lj=0,mj=4,nj=5;if(void 0===oj){var oj={},pj=cc.color(255,255,255);cc.color(207,180,90),cc.color(156,134,67),cc.color(69,60,30);var qj=cc.color(9,94,150);cc.color(9,94,150,100),cc.color(207,180,90);var rj=cc.color(24,111,168);cc.color(128,128,128,122);var sj=cc.color(2,70,150);cc.color(196,154,108);var tj=pj;cc.color(251,176,64);var uj=cc.color(18,222,246);cc.color(207,180,90);var vj=cc.color(23,51,111,255),wj=cc.color(7,105,178,255);cc.color(7,130,223,255);var xj=cc.color(109,185,225);cc.color(76,45,27);var yj=uj,zj=cc.color(0,0,0),Aj=cc.color(13,70,128);cc.color(204,215,224),cc.color(231,229,187),cc.color(19,96,137),cc.color(81,167,225,40),cc.color(1,127,154,255),cc.color(0,0,0,153),cc.color(81,167,225,80),cc.color(3,2,0,150),cc.color(255,255,0),cc.color(0,255,132),cc.color(255,162,0),cc.color(252,237,99),cc.color(207,180,90),cc.color(251,176,64),cc.color(132,86,5),cc.color(41,15,0),cc.color(186,180,124),cc.color(155,75,22),cc.color(117,117,117),cc.color(252,226,123),cc.color(155,75,22),cc.color(252,229,120),cc.color(160,100,40)}if(void 0===Bj){var Bj={},Cj=cc.color(251,234,180),Dj=cc.color(18,222,246);cc.color(0,0,0),cc.color(13,70,128);var Ej=cc.color(251,234,180),v=cc.color(71,44,27),Fj=cc.color(211,211,211),R=cc.color(70,44,27),Gj=cc.color(115,71,24)}if(void 0===Hj)var Hj={},pb=0,Ka=1,Ia=2,Ha=3,ob=4,qb=5,La=6,Ja=14,H=24,Ij=17,K=19,L=20,rb=23,Jj=21;if(void 0===Kj)var Kj={};if(void 0===Lj)var Lj={},Mj=1,Nj=2,Oj=4;if(void 0===Pj)var Pj={},Qj=2,Rj=4;if(CHESS_DRAW_REQUEST=0,CHESS_DRAW_ACCEPT=1,CHESS_DRAW_REFUSE=2,CHESS_SURRENDER=3,CO_UP_KHONG_LAT=0,CO_UP_CO_LAT=1,MAX_DISCONNECT_TIME=5,TAX_RATE=.05,MIN_MONEY_START_GAME=5,MIN_MONEY_SALE=3e4,FACEBOOK_BONUS_AMOUNT=5e3,PLAYER_STATE_TABLE_OWNER=0,PLAYER_STATE_READY=1,PLAYER_STATE_NOT_READY=2,PLAYER_STATE_FINISH_GAME=3,WINDOW_WIDTH=750,WINDOW_HEIGHT=1334,GAME_SCALE=1,GAME_SCALE_WIDTH=cc.sys.isNative?cc.winSize.width/WINDOW_WIDTH:1,GAME_SCALE_HEIGHT=cc.sys.isNative?cc.winSize.height/WINDOW_HEIGHT:1,WINDOW_MARGIN_TOP=10,WINDOW_MARGIN_BOTTOM=20,WINDOW_MARGIN_LEFT=15,WINDOW_MARGIN_RIGHT=10,AVATAR_MARGIN_LEFT=60,WIN_1_GAME_WITH_A_DAY_BONUS=0,WIN_3_DIFFERENT_GAME_IN_DAY_BONUS=1,WIN_ALL_GAME_IN_DAY_BONUS=2,PLAY_1RST_GAME_IN_DAY_BONUS=3,PLAY_10TH_GAME_IN_DAY_BONUS=4,PLAY_100TH_GAME_IN_DAY_BONUS=5,PLAYER_NEW_LEVEL=6,MN_WIN_FIRST_MATCH_IN_DAY_BONUS=50,MN_WIN_3_DIFFERENT_MATCH_IN_DAY_BONUS=100,MN_WIN_ALL_DIFFERENT_MATCH_IN_DAY_BONUS=300,MN_PLAY_1RST_GAME_IN_DAY_BONUS=30,MN_PLAY_10TH_GAME_IN_DAY_BONUS=100,MN_PLAY_100TH_GAME_IN_DAY_BONUS=1e3,MN_NEW_LEVEL_BONUS_BASE=10,GAME_STATE_READY=1,GAME_STATE_FINISH=100,GAME_STATE_PLAYING=2,GAME_STATE_NOT_READY=0,GAME_STATE_WAIT_BAO_XAM=2,GAME_STATE_WAIT_OTHER_BAO_XAM=3,GAME_STATE_WAIT_XAM_DISCARD=4,GAME_STATE_PHOM_WAIT_TAKE_OR_PICK_CARD=2,GAME_STATE_PHOM_WAIT_DISCARD=3,GAME_STATE_DEAL_COMPLETE=4,GAME_STATE_WAIT_SHOW_PHOM=5,GAME_STATE_WAIT_OPEN_1_CARD=2,STATE_NOTREADY=0,STATE_READY=1,STATE_WAIT_TAKE_CARD=3,STATE_WAIT_PICK_CARD=2,STATE_WAIT_DISCARD=4,STATE_CHAN_WAIT_CHIU=5,STATE_CHAN_WAIT_TRA_CUA=6,STATE_WAIT_XUONG=7,STATE_WAIT_BOC_CAI=9,STATE_FINISH=100,PLAYER_LEAVE_GAME=0,OWNER_KICK=1,RUN_OUT_OF_CASH_KICK=2,TIME_OUT_KICK=3,UNREADY_TIMEOUT=4,LOW_CASH=5,TIME_AUTO_READY=24,TIME_AUTO_START_GAME=119,void 0===Sj)var Sj={},Cb=0,Db=1,Eb=2;if(DEAL_CARD_FINISH="DEAL_CARD_FINISH",CARD_SELECTION_FINISH="CARD_SELECTION_FINISH",void 0===Tj)var Tj={};if(void 0===Uj)var Uj={},Vj=0,Wj=1,Xj=2,Yj=3,Zj=4;if(void 0===ak)var ak={},ck=0,dk=1,ek=2,fk=3,ya=4,gk=5,hk=7,ik=8,jk=9;if(void 0===kk)var kk={},lk=1,mk=2,nk=3,ok=4;if(CHAT_SMILE_TEXT="8-| |-) :^o =P~ :O) :) :-h :x :)) =p~ =)) :D :-a :(( o-) ~X( :-S :-B =; /:) :-c :)] :-t 8-> I-) :-y :-u :-i :-p :-g :-f :-s :-w :-q :-r :-c :-x :-m :-n :-z".split(" "),void 0===pk)var pk={},qk=0,rk=1,sk=2,tk=3,uk=4,vk=1,wk=2,xk=3,yk=4,zk=5,Ak=6,Bk=7,Ck=8,Dk=10,Ek=99,Fk=9999999;if(void 0===Gk)var Gk={},Hk=1,Ik=2,Jk=5,Kk=6,Lk=7,Mk=8,Nk=9,Ok=10,N=0,Za=1,$a=2,Pk=0,M=1,O=2,Qk=0,Rk=1,Sk=2,Tk=3;if(void 0===Uk)var Uk={},Vk=0;if(void 0===Wk)var Wk={};if(void 0===Xk)var Xk={};if(void 0===Yk)var Yk={},Zk=1,$k=2;if(void 0===al)var al={},bl=0;if(void 0===cl)var cl={},dl=1;if(void 0===el)var el={};if(void 0===fl)var fl={},hl=-1,il=0,jl=1;if(EVENT_SWITCH_SCREEN="switchscreen",KEY_SCREEN_NAME="screenName",EVENT_BUTTON_PRESS="buttonpress",KEY_BUTTON_NAME="buttonName",EVENT_LOGIN="login",KEY_CPID="cpid",KEY_BLOCK_CHAT="blockChat",DAU_HANG_REASON=2,void 0===kl){var kl=[];kl.push({key:0,value:""}),kl.push({key:1,value:"Chiếu hết."}),kl.push({key:2,value:"Đối phương đầu hàng."}),kl.push({key:3,value:"Hết giờ."}),kl.push({key:4,value:"Hai bên chỉ còn quân phòng thủ."}),kl.push({key:5,value:"60 nước liên tiếp không ăn quân."}),kl.push({key:6,value:"Hai bên chiếu liên tiếp 8 lần."}),kl.push({key:7,value:"Hai bên đồng ý hoà."}),kl.push({key:8,value:"Hai bên đồng ý hoà."})}var wa=0;function ll(t){var e=0;return 0>=(e=t<Xb?t-Wb:t<Yb?t-Xb:t<Zb?t-Yb:t<$b?t-Zb:t-$b)&&(e=0),e>=Vb&&(e=Vb-1),0==(t=Math.floor(e/Ub))?Qb:1==t?Rb:2==t?Sb:3==t?Tb:void 0}function ml(t){return t<Xb?Lb:t<Yb?Mb:t<Zb?Nb:t<$b?Ob:Pb}function nl(t){var e="";return(t=ll(t))==Qb?e="sao3den.png":t==Rb?e="sao1vang.png":t==Sb?e="sao2vang.png":t==Tb&&(e="sao3vang.png"),e}function ol(t){var e="";return(t=ml(t))==Lb?e="de_1_tapsu.png":t==Mb?e="de_2_phongtrao.png":t==Nb?e="de_3_kythu.png":t==Ob?e="de_4_kysi.png":t==Pb&&(e="de_5_kyvuong.png"),e}function pl(t,e){return t&&t.length>e?t.substr(0,e)+"...":t}function Ab(t,e){if(null!=t)return t.length<=e?t:t.substr(0,e)+"..."}function ql(t){return t.toFixed(Math.max(0,0)).replace(/\d(?=(\d{3})+$)/g,"$&.")}pauseEventOfTarget=function(t,e){t.setTouchEnabled&&t.setTouchEnabled(!e),e?cc.eventManager.pauseTarget(t,!0):cc.eventManager.resumeTarget(t,!0);for(var i=t._children,n=0;n<i.length;n++)pauseEventOfTarget(i[n],e)},createTooltip=function(t,e,i,n){e=void 0===e?14:e,i=void 0===i?28:i,n=void 0===n?30:n;var s=new BkSprite;return t=new BkLabel(t,"Tahoma",e),s.width=t.getContentSize().width+n,s.height=t.getContentSize().height+10,(e=new cc.Scale9Sprite("tooltip_bg.png")).x=s.width/2,e.y=s.height/2,e.width=t.getContentSize().width+n,e.height=i,s.addChild(e),t.setTextColor(cc.color(0,0,0)),t.x=s.width/2,t.y=s.height/2,t.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.addChild(t),s},createBkButtonPlistNewTitle=function(t,e){var i=new BkButton("start_butt.png","start_butt_press.png","start_butt.png","start_butt_press.png",ccui.Widget.PLIST_TEXTURE);return i.setTitleText(""),i.x=null!=t?t:0,i.y=null!=e?e:0,i},createBkButtonPlist=function(t,e,i,n,s,r,o){return t=new BkButton(t,e,i,n,ccui.Widget.PLIST_TEXTURE),null!=s&&t.setTitleText(s),t.x=null!=r?r:0,t.y=null!=o?o:0,t},createBkButton=function(t,e,i,n,s,r,o){return t=BkButton.create(t,e,i,n),null!=s&&t.setTitleText(s),t.x=null!=r?r:0,t.y=null!=o?o:0,t},getSpriteFromImage=function(t){return new BkSprite(t)},getSpriteFromImageAndRect=function(t,e,i,n,s){return new BkSprite(t,cc.rect(e,i,n,s))},createEditBox=function(t,e){return new BkEditBox(t,new cc.Scale9Sprite(e))},createTextArea=function(t,e){return new BkTextArea(t,new cc.Scale9Sprite(e))},createFixedWidthLabel=function(t,e){for(var i=14,n=void 0===(n="")?res.aG:n,s=(i=new BkLabel("",n,void 0===i?14:i),n="",0),r=t.length;i.getContentSize().width<e&&s<r;)n+=t[s],i.setString(n),s++;return s<r&&i.setString(n+"..."),i},formatNumberIngame=function(t){return 7>String(t).length?formatNumber(t):formatNumber(Math.floor(.001*t))+"K"},formatNumber=function(t){var e,i=String(Math.abs(t));if(3<i.length){var n=i.length%3;e=""+i.substr(0,n);for(var s=0;s<i.length-n;s+=3)e=e+"."+i.substr(n+s,3);0==n&&(e=e.substring(1,e.length))}else e=i;return 0>t&&(e="-"+e),e},doHttpGetRequest=function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&200==i.status&&e(i.responseText)},i.open("GET",t,!0),i.send(null)},isUserNameValidate=function(t){if(4>t.length||30<t.length)return!1;for(var e="",i=0;i<t.length;i++)if(!("0"<=(e=t.charAt(i))&&"9">=e||"A"<=e&&"Z">=e||"a"<=e&&"z">=e||"_"==e))return!1;return!0},isEmailValidate=function(t){return/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(t)},convertStringToMoneyFormat=function(t,e){return null==e||0==e?1e7>t?ql(Number(t)):ql(Number(Math.floor(t/1e3)))+"K":ql(Number(t))},convertStringToMoneyFormatIngame=function(t){return 1e5>t?formatNumber(t):1e5<=t&&1e7>t?formatNumber(Number(Math.floor(t/1e3)))+"K":1e7<=t&&1e9>=t?formatNumber(Number(Math.floor(t/1e6)))+"M":ql(Number(Math.floor(t/1e3)))+"K"},convertSecondToMinSec=function(t){var e="",i=Math.floor(t/60);return e=10>i?e+"0"+i+":":e+(i+":"),10>(t=Math.floor(t%60))?e+"0"+t:e+t},getMaxPlayer=function(t){switch(t){case Ka:case Ia:case La:case Ja:case Ha:return 6;case K:case L:return 50}return 4},isFBInstantGame=function(){return!1},isNotOverByMinutes=function(){var t=Date.now();return 3e5>Date.now()-t},isNotOverBySeconds=function(t,e){return Date.now()-t<1e3*e},isWebPlatform=function(){return!isFBInstantGame()&&!cc.sys.isNative},isDebugMode=function(){return cc.game.config&&1==cc.game.config.debugMode},isNative=function(){return cc.sys.isNative},logMessage=function(t){null==cc.Yi&&(cc.Yi=[]),200<cc.Yi.length&&cc.Yi.shift(),cc.Yi.push(t),cc.log(t)},processNextEventAfterSceneTransitionDidFinish=function(){logMessage("chuyen scene finish -> process packet nhan khi chuyen scene"),BkGlobal.Xq=!1,BkConnectionManager.ZO()},switchToSceneWithGameState=function(t,e,i,n){var s;switch(null!=U.cc&&(logMessage("chuyen scene khi dang show popup -> remove curent popup"),U.cc.removeSelf()),BkStackWindow.OI(),BkGlobal.Sa==hj&&(BkConnectionManager.dV(),e=!0),BkGlobal.AB=BkGlobal.Sa==t,BkGlobal.Xq=!0,BkGlobal.Sa=t,logMessage("switchToSceneWithGameState "+BkGlobal.Sa),t){case P:s=new hb;break;case gj:s=new VvLobby;break;case T:s=new nb;break;case G:return isWebPlatform()||isFBInstantGame()?(s=new gb,void cc.director.runScene(s)):void cc.game.restart();case ij:s=new BkTerminateScene;break;case jj:s=new vb(n)}t=null,t=null!=e&&e?new cc.TransitionProgressOutIn(.3,s):new cc.TransitionProgressInOut(.3,s),null==i||i?cc.director.runScene(t):cc.director.runScene(s)},showToastMessage=function(t,e,i,n,s){var r=rl.tU;console.log("showToastMessage - show = ",r),r.bind(rl),r(t,e,i,n,s)},hideToastMessage=function(){rl.HL()};var rl={mc:null,tU:function(t,e,i,n,s){rl.mc=new BkToast("Chess_toast.png");var r=new cc.SpriteBatchNode("Chess_toast.png");console.log("BkToolTipManager - showToastMessage - test_batch: ",r),rl.mc.Wh(t,s),t=3,null!=n&&null!=n&&(t=n);var o=this;rl.mc.Ro((function(){o.mc=null})),rl.mc.No(t),null==e&&(e=cc.winSize.width/2,i=cc.winSize.height/2+90),rl.mc.show(e,i)},HL:function(){null!=rl.mc&&rl.mc.removeSelf()}},U={cc:null,$r:function(t,e,i,n,s,r,o){U.cc=new BkConfirmPopup("",r),U.cc.Qq=!0,U.cc.So(t),null!=i&&null!=i&&U.cc.Hw(i),null!=n&&null!=n&&U.cc.ED(n),U.cc.df((function(){U.cc=null,null!=s&&null!=s&&s()})),null!=o&&null!=o&&(logMessage("co parent"),U.cc.Ab(o)),U.cc.show()}},Ll;function sl(t,e,i){var n=tl;null!=this.cc&&this.cc.removeSelf(),this.cc=new BkConfirmPopupWithDynamicButtons("",n,null,"Đăng nhập lại","Tạo TK mới",!1),this.cc.Qq=!0,this.cc.So("Tài khoản của bạn bị đăng nhập từ thiết bị khác!"),null!=t&&null!=t&&this.cc.ZS(t),null!=e&&null!=e&&this.cc.$S(e);var s=this;this.cc.df((function(){s.cc=null,null!=i&&null!=i&&i()})),this.cc.show(),this.cc}function ul(t){return isWebPlatform()?t?"btn_am_thanh_on.png":"btn_am_thanh_off.png":t?"#music_on_butt.png":"#music_off_butt.png"}function vl(t){return isWebPlatform()?t?"btn_am_thanh_on.png":"btn_am_thanh_off.png":t?"#sound_on_butt.png":"#sound_off_butt.png"}function Ya(){var t=getCurrentScene();if(null!=t){if(t instanceof hb)return t.Se;if(t instanceof nb)return t.ka()}return null}function s(t,e){BkBusyIndicatorManager.JT(t,void 0===e?null:e)}function t(){BkBusyIndicatorManager.iw()}function eb(){isWebPlatform()&&(logMessage("reloadWebPage"),window.location.reload())}function wl(t){var e="";switch(t){case-1:e="Top đại gia";break;case-2:e="Top nhiệt tình";break;case K:e="Cờ Tướng";break;case L:e="Cờ Úp";break;default:e="Cờ"}return e}function xl(t){var e="";switch(t){case Mj:e=yl;break;case Nj:e=zl;break;case Oj:e=Al;break;default:e=Bl}return e}function Cl(){var t=1;return cc.game.config.app&&cc.game.config.app.MA&&t<cc.game.config.app.MA&&(t=cc.game.config.app.MA),t}function Dl(t){if(t<=CHAT_SMILE_TEXT.length)return CHAT_SMILE_TEXT[t]}function El(t){26<t&&(t=26);var e=new BkChatEmoData;switch(e.Mn="expression"+t,t){case 1:e.Mn="expression26",e.yb=z.gI,e.zb=z.fI,e.Eb=8;break;case 2:e.yb=z.iI,e.zb=z.hI,e.Eb=8;break;case 3:e.yb=z.kI,e.zb=z.jI,e.Eb=9;break;case 4:e.yb=z.mI,e.zb=z.lI,e.Eb=8;break;case 5:e.yb=z.oI,e.zb=z.nI,e.Eb=2;break;case 6:e.yb=z.qI,e.zb=z.pI,e.Eb=10;break;case 7:e.yb=z.sI,e.zb=z.rI,e.Eb=9;break;case 8:e.yb=z.uI,e.zb=z.tI,e.Eb=11;break;case 9:e.yb=z.wI,e.zb=z.vI,e.Eb=12;break;case 10:e.yb=z.BH,e.zb=z.AH,e.Eb=8;break;case 11:e.yb=z.DH,e.zb=z.CH,e.Eb=6;break;case 12:e.yb=z.FH,e.zb=z.EH,e.Eb=9;break;case 13:e.yb=z.HH,e.zb=z.GH,e.Eb=7;break;case 14:e.yb=z.JH,e.zb=z.IH,e.Eb=10;break;case 15:e.yb=z.LH,e.zb=z.KH,e.Eb=7;break;case 16:e.yb=z.NH,e.zb=z.MH,e.Eb=6;break;case 17:e.yb=z.PH,e.zb=z.OH,e.Eb=6;break;case 18:e.yb=z.RH,e.zb=z.QH,e.Eb=8;break;case 19:e.yb=z.TH,e.zb=z.SH,e.Eb=12;break;case 20:e.yb=z.VH,e.zb=z.UH,e.Eb=8;break;case 21:e.yb=z.XH,e.zb=z.WH,e.Eb=9;break;case 22:e.yb=z.ZH,e.zb=z.YH,e.Eb=9;break;case 23:e.yb=z.aI,e.zb=z.$H,e.Eb=12;break;case 24:e.yb=z.cI,e.zb=z.bI,e.Eb=10;break;case 25:e.yb=z.eI,e.zb=z.dI,e.Eb=10;break;case 26:e.Mn="expression1",e.yb=z.Ay,e.zb=z.zy,e.Eb=2;break;default:e.yb=z.Ay,e.zb=z.zy,e.Eb=2}return e}function tb(){var t=cc.sys.localStorage.getItem(KEY_BLOCK_CHAT+"_"+BkGlobal.P.userName),e=[];return null!=t&&(e=t.split(",")),e}function Fl(t){cc.sys.localStorage.setItem(KEY_BLOCK_CHAT+"_"+BkGlobal.P.userName,t.join(","))}function Gl(t){for(var e=[],i=0;i<t.length;i++){var n=JSON.parse(JSON.stringify(t[i]));e.push(n)}return e}function ub(t,e){for(var i=0;i<e.length;i++)if(t==e[i])return!0;return!1}function Hl(){return[{De:{active:"icon_CoUp_active.png",Xe:"icon_CoUp_hover.png",disable:"icon_CoUp_active.png"},order:0,Ze:!0,Md:L},{De:{active:"icon_CoTuong_active.png",Xe:"icon_CoTuong_hover.png",disable:"icon_CoTuong_active.png"},order:1,Ze:!0,Md:K},{De:{active:"icon_TLMNDL_active.png",Xe:"icon_TLMNDL_hover.png",disable:"icon_TLMNDL_active.png"},order:2,Ze:!0,Md:rb},{De:{active:"icon_TLMN_active.png",Xe:"icon_TLMN_hover.png",disable:"icon_TLMN_active.png"},order:3,Ze:!0,Md:ob},{De:{active:"icon_Sam_active.png",Xe:"icon_Sam_hover.png",disable:"icon_Sam_active.png"},order:4,Ze:!0,Md:qb},{De:{active:"icon_Phom_active.png",Xe:"icon_Phom_hover.png",disable:"icon_Phom_active.png"},order:5,Ze:!0,Md:pb},{De:{active:"icon_Poker_active.png",Xe:"icon_Poker_hover.png",disable:"icon_Poker_active.png"},order:6,Ze:!0,Md:Ha},{De:{active:"icon_MauBinh_active.png",Xe:"icon_MauBinh_hover.png",disable:"icon_MauBinh_active.png"},order:7,Ze:!0,Md:H},{De:{active:"icon_Lieng_active.png",Xe:"icon_Lieng_hover.png",disable:"icon_Lieng_active.png"},order:8,Ze:!0,Md:La},{De:{active:"icon_Chan_active.png",Xe:"icon_Chan_hover.png",disable:"icon_Chan_active.png"},order:9,Ze:!0,Md:Ij},{De:{active:"icon_Xizach_active.png",Xe:"icon_Xizach_hover.png",disable:"icon_Xizach_active.png"},order:10,Ze:!0,Md:Ja},{De:{active:"icon_3Cay_active.png",Xe:"icon_3Cay_hover.png",disable:"icon_3Cay_active.png"},order:11,Ze:!0,Md:Ka},{De:{active:"icon_xiTo_active.png",Xe:"icon_xiTo_hover.png",disable:"icon_xiTo_active.png"},order:13,Ze:!0,Md:Ia},{De:{active:y.LL,Xe:y.n0,disable:y.LL},order:14,Ze:!0,Md:Jj}]}function Pa(t){return!(!isFBInstantGame()||BkGlobal.eB)&&(s(!1),BkGlobal.xR=t,!0)}function Il(t){var e=BkGlobal.ja;return null!=t&&(e=t),e==K||e==L}function Jl(){logMessage("Util.logEvent")}function Ca(){var t="";if(isWebPlatform()){if(null==(t=F(D.clientId))||t==wa||""==t||0<t.indexOf("null"))t=Kl(),logMessage("NEW CLIENT ID: "+t),S(D.clientId,t);else{var e=t.split(";");1<e.length&&(logMessage("UPGRADE OLD CLIENT ID: "+t),t=e[0],S(D.clientId,t),logMessage("NEW CLIENT ID: "+t))}t=t+";"+Gb}else{if(isFBInstantGame())return null==(t=F(D.clientId))||t==wa||""==t||0<t.indexOf("null")?(t=Ll(),S(D.clientId,t)):1<(e=t.split(";")).length&&(logMessage("UPGRADE OLD CLIENT ID: "+t),t=e[0],S(D.clientId,t),logMessage("NEW CLIENT ID: "+t)),t+";"+Gb;t=n.DK()}return t}function Kl(){for(var t="",e=(t="",0);8>e;e++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return Ii+t+(new Date).getTime()+"_"+cc.sys.browserType}function Ql(t){switch(t){case 1:return Rl;case 2:return Sl;case 3:return Tl;case 4:return Ul;case 5:return Vl;case 6:return Wl;case 7:return Xl+". "+Yl;default:return Zl}}function Wa(t,e){if(isWebPlatform())cc.sys.openURL(t);else{logMessage("openWebview: "+t);var i=new BkWebview(t,void 0===e?"":e),n=getCurrentScene();n&&n.addChild(i,Td)}}function aa(t,e){logMessage("Util.httpRequest url: "+t);var i=cc.loader.getXMLHttpRequest();i.open("GET",t,!0),i.timeout=1e4,i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.onreadystatechange=function(){if(logMessage("onreadystatechange"),4==i.readyState){var t=i.responseText,n={};n.Bu=i.statusText,null!=e&&(4===i.readyState&&200===i.status?e(null,t):e(n))}else logMessage("request.readyState: "+i.readyState),null!=e&&e(n={Bu:499})},i.ontimeout=function(){logMessage("ontimeout ");null!=e&&e({Bu:408})},i.onerror=function(){null!=e&&e({Bu:408})},i.send()}function $l(){if(BkGlobal.P)return BkGlobal.P.userName;var t=[],e="default";return 0<(t=Ca().split(";")).length&&(e=t[0]),e}function am(t){switch(t){case 1:case 8:case 9:return O;case 2:case 3:case 7:return M;case 4:case 5:case 6:return Pk}return-1}function bm(t){switch(t){case 1:case 2:case 4:return N;case 3:case 5:case 9:return Za;case 6:case 7:case 8:return $a}return-1}function ja(t){t=void 0===t?"default":t;var e={},i=[],n="default";return 0<(i=Ca().split(";")).length&&(n=i[0]),logMessage("baseClientID "+n),e[oc]=n,e[pc]=t,JSON.stringify(e)}function cm(t,e){var i="Roboto-Regular";return t?i=e?"Roboto-MediumItalic.ttf":"Roboto-Medium":e&&(i="Roboto-Italic"),i}function ib(t){var e=new BkPacket;e.rJ(t),BkConnectionManager.send(e)}function ma(){var t="UVNButLong1";return isWebPlatform()||(t="res/fonts/UVNButLong1.TTF"),t}function dm(){BkGlobal.jk?logMessage("isLoadedChatEmo -> not need reload!"):cc.loader.load(ra,(function(){}),(function(){logMessage("done load chat emo"),BkGlobal.jk=!0}))}function Q(t,e,i){return e in t?(logMessage("jsonTag: "+e+" - data: "+t[e]),t[e]):(logMessage("json have not property : "+e+" please check -> return dfValue: "+i),i)}function em(t){for(var e=p("listMessageChatInvalid",mb).split(":"),i=0;i<e.length;i++){var n=e[i];-1!==t.indexOf(n)&&(t=t.replace(n,"***"))}return 100<t.length&&(t=t.substr(0,100)),t}if(showPopupConfirmWith=function(t,e,i,n,s,r){if(!BkGlobal.Yn){var o=U.$r;o.bind(U),o(t,e,i,n,s,tl,r,void 0)}},showPopupMessageWith=function(t,e,i,n,s){BkGlobal.Yn||U.$r(t,e,i,null,n,Ma,s)},showPopupMessageWithDynamicButton=function(t,e,i){sl(t,e,i)},getBonusByBonusCode=function(t){switch(t){case WIN_1_GAME_WITH_A_DAY_BONUS:return MN_WIN_FIRST_MATCH_IN_DAY_BONUS;case WIN_3_DIFFERENT_GAME_IN_DAY_BONUS:return MN_WIN_3_DIFFERENT_MATCH_IN_DAY_BONUS;case WIN_ALL_GAME_IN_DAY_BONUS:return MN_WIN_ALL_DIFFERENT_MATCH_IN_DAY_BONUS;case PLAY_10TH_GAME_IN_DAY_BONUS:return MN_PLAY_10TH_GAME_IN_DAY_BONUS;case PLAY_100TH_GAME_IN_DAY_BONUS:return MN_PLAY_100TH_GAME_IN_DAY_BONUS}return MN_PLAY_1RST_GAME_IN_DAY_BONUS},getBonusReasonByBonusCode=function(t){switch(t){case WIN_1_GAME_WITH_A_DAY_BONUS:return STR_WIN_FIRST_MATCH_IN_DAY_BONUS;case WIN_3_DIFFERENT_GAME_IN_DAY_BONUS:return STR_WIN_3_DIFFERENT_MATCH_IN_DAY_BONUS;case WIN_ALL_GAME_IN_DAY_BONUS:return STR_WIN_ALL_DIFFERENT_MATCH_IN_DAY_BONUS;case PLAY_1RST_GAME_IN_DAY_BONUS:return STR_PLAY_1RST_GAME_IN_DAY_BONUS;case PLAY_10TH_GAME_IN_DAY_BONUS:return STR_PLAY_10TH_GAME_IN_DAY_BONUS;case PLAY_100TH_GAME_IN_DAY_BONUS:return STR_PLAY_100TH_GAME_IN_DAY_BONUS;case PLAYER_NEW_LEVEL:return STR_PLAYER_NEW_LEVEL_BONUS}return""},getNewLevelBonusMoney=function(t){return MN_NEW_LEVEL_BONUS_BASE*(1+Math.floor(t/5))},makeFullScreen=function(t){cc.screen.requestFullScreen(document.getElementById(bk.isFbApp?".f-body":".z-body"),(function(){cc.screen.fullScreen()?(cc.view.setDesignResolutionSize(cc.winSize.width,cc.winSize.height,cc.ResolutionPolicy.SHOW_ALL),document.body.style.overflowY="hidden"):(cc.view.setDesignResolutionSize(cc.winSize.width,cc.winSize.height,new cc.ResolutionPolicy(new cc.Et,cc.ContentStrategy.SHOW_ALL)),document.body.style.overflowY="auto"),document.body.style.backgroundImage="",t()}))},exitFullScreen=function(){cc.screen.exitFullScreen()},makeScreenShot=function(){var t=new Date,e=t.getDate(),i=t.getMonth()+1,n=t.getFullYear();10>e&&(e="0"+e),10>i&&(i="0"+i),t="vanco-"+(t=e+"_"+i+"_"+n+"_"+(10>t.getHours()?"0"+t.getHours():t.getHours())+"_"+(10>t.getMinutes()?"0"+t.getMinutes():t.getMinutes())+"_"+(10>t.getSeconds()?"0"+t.getSeconds():t.getSeconds()))+".png",(e=cc._canvas).VN?(e=e.VN(),window.navigator.e2(e,t)):(e=e.toDataURL("image/png"),(i=document.createElement("a")).href=e,i.download=t,i.dataset.downloadurl=["image/png",i.download,i.href].join(":"),console.log("element.dataset",i.dataset),document.body.appendChild(i),cc.isFunction(i.click)&&i.click())},convertSecondToMinSec=function(t){var e="",i=Math.floor(t/60);return e=10>i?e+"0"+i+":":e+(i+":"),10>(t%=60)?e+"0"+t:e+t},getCurrentScene=function(){return cc.director.getRunningScene()},BkBusyIndicatorManager={ti:null,Vq:!1,JT:function(t,e){BkBusyIndicatorManager.Vq?logMessage("isShowAnim: "+this.Vq):(BkBusyIndicatorManager.iw(),BkBusyIndicatorManager.Vq=!0,BkBusyIndicatorManager.ti=new BkBusyIndicator,null!=t?BkBusyIndicatorManager.ti.PD(t):BkBusyIndicatorManager.ti.PD(!0),BkBusyIndicatorManager.ti.vT(e),BkBusyIndicatorManager.ti.XT())},iw:function(){BkBusyIndicatorManager.Vq=!1,null!=BkBusyIndicatorManager.ti&&(BkBusyIndicatorManager.ti.TR(),BkBusyIndicatorManager.ti=null)}},showOnHandCardList=function(t,e,i,n){if(null!=t&&null!=(o=i.tc(t.ta))){i.S().jY();var s=new cc.Point(o.x,o.y),r=i.S().Gi(t.ta),o=YPOS_ONHAND_DOWN;if(0!=r||i.S().TA)0!=t.Kj&&null!=e&&1==e&&(1==r&&(null==i.Fq&&(i.Fq=new BkSprite("#vertical_back.png"),i.Fq.x=s.x-72,i.Fq.y=s.y,i.addChild(i.Fq)),null==i.Ql&&(i.Ql=new BkLabel("","Tahoma",20),i.Ql.x=s.x-72,i.Ql.y=s.y,i.Ql.setTextColor(cc.color(255,255,255)),i.addChild(i.Ql)),i.Ql.setString(t.Kj)),2==r&&(null==i.Gq&&(i.Gq=new BkSprite("#vertical_back.png"),i.Gq.x=s.x-72,i.Gq.y=s.y,i.addChild(i.Gq)),null==i.Rl&&(i.Rl=new BkLabel("","Tahoma",20),i.Rl.x=s.x-72,i.Rl.y=s.y,i.Rl.setTextColor(cc.color(255,255,255)),i.addChild(i.Rl)),i.Rl.setString(t.Kj)),3==r&&(null==i.Hq&&(i.Hq=new BkSprite("#vertical_back.png"),i.Hq.x=s.x+75,i.Hq.y=s.y,i.addChild(i.Hq)),null==i.Sl&&(i.Sl=new BkLabel("","Tahoma",20),i.Sl.x=s.x+75,i.Sl.y=s.y,i.Sl.setTextColor(cc.color(255,255,255)),i.addChild(i.Sl)),i.Sl.setString(t.Kj)));else for(e=450,null!=n&&0<n&&(e=n),72<=(e/=(t=i.S().ou(t)).length)&&(e=72),s=(cc.director.getWinSize().width-e*t.length+72)/2,r=0;r<t.length;r++)(n=t[r]).TD(null),n.EE(),n.TD(i),n.Jj=0,n.Tw(!1),n.x=s+r*e,n.y=o,n.setLocalZOrder(r)}},getMinTableBetMoney=function(){switch(BkGlobal.ja){case H:return 3;case rb:case qb:return 10;case Ha:return 2;case La:case Ia:case K:case L:return 1}return 5},getGameSettingById=function(t){for(var e=Hl(),i=0;i<e.length;i++)if(e[i].Md==t)return e[i];return null},getOtherGameList=function(t){for(var e=Hl(),i=0;i<e.length;i++)e[i].Md==t&&e.splice(i,1);return e},getOtherGameListFromSublist=function(t,e){if(""==e)return null;for(var i=e.split(","),n=[],s=0;s<i.length;s++)i[s]!=t&&n.push(getGameSettingById(i[s]));return n},stopTabToPrevious=function(t){return!t.shiftKey||9!=t.keyCode||(t.preventDefault&&t.preventDefault(),!1)},stopTabToNext=function(t){return!(!t.shiftKey||9!=t.keyCode)||(9!==t.keyCode||(t.preventDefault&&t.preventDefault(),!1))},stopTab=function(t){return!(t.shiftKey&&9==t.keyCode||9===t.keyCode)||(t.preventDefault&&t.preventDefault(),!1)},getYposforToast=function(){switch(BkGlobal.ja){case Ja:case Ka:case H:return 390;case pb:return 420;case La:return 350;case Ia:return 370;case K:case L:return 260}return 300},getTableMoneyWarning=function(){switch(BkGlobal.ja){case ob:case rb:case qb:case H:case pb:return.1;case Ja:case Ka:case Ha:case La:case Ia:return.2}return 1},getBackgroundImg=function(){},swichBackgroundImg=function(t){try{var e=$(BODY_CLASS_CSS);if(cc.isFunction(e.Sm))switch(t){case P:e.Sm("select",0);break;case gj:Il()&&e.Sm("select",1);break;case T:Il()?e.Sm("select",1):e.Sm("select",2);break;default:e.Sm("select",0)}}catch(t){logMessage(t)}},bkFontSizeUtil=function(t){return Math.ceil(t-1+1.8*GAME_SCALE)},Ll=function(){var t=BkFbInstant.Zg;return null==BkFbInstant.Zg&&(t=Kl()),Ii+t+Ji},bkScaleSizeUtil=function(t){var e=GAME_SCALE;return cc.size(t.width*e,t.height*e)},isValidUsername=function(t){return/\W/.test(t)?Ml+Nl+Ol:6>t.length?Ml+Pl:cc.isUndefined(void 0)?isDisallowedUsername(t):""},isDisallowedUsername=function(t){t=t.replace("/W/i","");for(var e="admin admln ziga quantri quantrl zlga".split(" "),i=0;i<e.length;i++)if(-1!=t.toLowerCase().indexOf(e[i]))return"Tên đăng nhập không được chứa các từ khóa gây hiểu lầm cho người chơi khác(vd: admin, ziga)";return""},Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",fg:function(t){var e,i,n,s,r,o,a="",c=0;for(t=Base64.HG(t);c<t.length;)s=(e=t.charCodeAt(c++))>>2,e=(3&e)<<4|(i=t.charCodeAt(c++))>>4,r=(15&i)<<2|(n=t.charCodeAt(c++))>>6,o=63&n,isNaN(i)?r=o=64:isNaN(n)&&(o=64),a=a+this._keyStr.charAt(s)+this._keyStr.charAt(e)+this._keyStr.charAt(r)+this._keyStr.charAt(o);return a},decode:function(t){var e,i,n,s,r,o="",a=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");a<t.length;)e=(e=this._keyStr.indexOf(t.charAt(a++)))<<2|(i=this._keyStr.indexOf(t.charAt(a++)))>>4,i=(15&i)<<4|(s=this._keyStr.indexOf(t.charAt(a++)))>>2,n=(3&s)<<6|(r=this._keyStr.indexOf(t.charAt(a++))),o+=String.fromCharCode(e),64!=s&&(o+=String.fromCharCode(i)),64!=r&&(o+=String.fromCharCode(n));return Base64.GG(o)},HG:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);128>n?e+=String.fromCharCode(n):(127<n&&2048>n?e+=String.fromCharCode(n>>6|192):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128)),e+=String.fromCharCode(63&n|128))}return e},GG:function(t){for(var e="",i=0,n=c1=c2=0;i<t.length;)128>(n=t.charCodeAt(i))?(e+=String.fromCharCode(n),i++):191<n&&224>n?(c2=t.charCodeAt(i+1),e+=String.fromCharCode((31&n)<<6|63&c2),i+=2):(c2=t.charCodeAt(i+1),c3=t.charCodeAt(i+2),e+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),i+=3);return e}},UI={Ei:function(t){return.5*this.Ga(t)},Da:function(t){return.5*this.qa(t)},qa:function(t){return t?t.getContentSize().width*t.getScaleX():0},Ga:function(t){return t?t.getContentSize().height*t.getScaleY():0},eb:function(t){if(t){var e=t.getAnchorPoint().x;return t.x-this.qa(t)*e}return 0},fb:function(t){if(t){var e=t.getAnchorPoint().x;return t.x+this.qa(t)*(1-e)}return 0},xf:function(t){if(t){var e=t.getAnchorPoint().y;return t.y+this.Ga(t)*(1-e)}return 0},Bh:function(t){if(t){var e=t.getAnchorPoint().y;return t.y-this.Ga(t)*e}return 0},su:function(t){if(t){var e=t.convertToWorldSpaceAR(),i=t.getAnchorPoint().y;return e.y+this.Ga(t)*(1-i)}return 0},gu:function(t){if(t){var e=t.convertToWorldSpaceAR(),i=t.getAnchorPoint().y;return e.y-this.Ga(t)*i}return 0},I4:function(t,e,i){i=void 0===i?0:i,t&&e&&(e.x=this.eb(t)-.5*this.qa(e)-i,e.y=t.y)},S4:function(t,e,i){i=void 0===i?0:i,t&&e&&(e.x=this.fb(t)+.5*this.qa(e)+i,e.y=t.y)},k5:function(t,e,i){i=void 0===i?0:i,t&&e&&(e.x=t.x,e.y=this.xf(t)+.5*this.Ga(e)+i)},l4:function(t,e,i){i=void 0===i?0:i,t&&e&&(e.x=t.x,e.y=this.Bh(t)-.5*this.Ga(e)+i)},Z4:function(t,e,i){t&&(t.setScaleX(e/t.getContentSize().width),t.setScaleY(i/t.getContentSize().height))}},wa=0,void 0===D){var D={},fm=bk.isFbApp?"f":"";D.a1=0+fm,D.n1=4+fm,D.clientId=5+fm,D.Z0=6+fm,D.W6=7+fm,D.W2=8+fm,D.rU=9+fm,D.He=10+fm,D.ox=11+fm,D.U6=12+fm,D.rB=13,D.kZ="DisplayHotNews",D.yZ="endpoint",D.g3="popupCount",D.MB="lastHotTab",D.LB="lastGameChoose",D.y1="lastTabChoose",D.Ix="ListLoggedInUsers",D.i1="isShowPromotionWD:",D.hZ="BackgorundIngame",D.w1="lastCheckAllCheckboxState",D.HZ="gameWidth",D.CZ="gameHeight"}function F(t,e,i){var n=cc.sys.localStorage;return null==n.getItem(t)&&S(t,null!=i&&null!=i?i:JSON.stringify(wa)),t=n.getItem(t),e&&t?JSON.parse(t):t}function u(t,e){cc.sys.localStorage.setItem(JSON.stringify(t),JSON.stringify(e))}function p(t,e){e=void 0===e?null:e;var i=cc.sys.localStorage.getItem(JSON.stringify(t));return i?JSON.parse(i):null!=e?JSON.parse(JSON.stringify(e)):null}function S(t,e){cc.sys.localStorage.setItem(t,e.toString())}function za(t){cc.sys.localStorage.removeItem(t)}function va(t,e){var i=bk.sessionStorage.getItem(t);return e&&i?JSON.parse(i):i}function Aa(){bk.sessionStorage.removeItem(D.He)}try{bk.sessionStorage=sessionStorage=window.sessionStorage,bk.sessionStorage.setItem("storage",""),bk.sessionStorage.removeItem("storage")}catch(t){var hm=function(){logMessage("Warning: sessionStorage isn't enabled. Please confirm browser cookie or privacy option")};bk.sessionStorage={getItem:hm,setItem:hm,removeItem:hm,clear:hm}}function im(t){logMessage("onNhacNenStateChange"),jm(t),t?playNhacNenSound():stopNhacNenSound()}function jm(t){u("nhacnenSetting",void 0===t?0:t)}function km(){return p("nhacnenSetting",0)}function lm(t){u("soundSetting",void 0===t?1:t)}function mm(){return p("soundSetting",1)}function nm(){return p("vibrateSetting",1)}function om(t){u("isRatedApp",t)}function ha(t){u("ServerIPAddress",t)}if(void 0===pm)var pm={},qm="AND_GG_ADMOB_APP_ADS_ID",rm="IOS_GG_ADMOB_APP_ADS_ID",sm="AND_GG_ADMOB_BANNER_ADS_ID",tm="IOS_GG_ADMOB_BANNER_ADS_ID",um="AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID",vm="IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID",wm="AND_GG_ADMOB_INTERSTITIAL_ADS_ID",xm="IOS_GG_ADMOB_INTERSTITIAL_ADS_ID",ym="AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM",zm="IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM",Am="AND_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM",Bm="IOS_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM",Cm="AND_FB_BANNER_ADS_ID",Dm="IOS_FB_BANNER_ADS_ID",Em="AND_FB_INTERSTITIAL_ADS_ID",Fm="IOS_FB_INTERSTITIAL_ADS_ID",Gm="AND_FB_REWARDED_VIDEO_ADS_ID",Hm="IOS_FB_REWARDED_VIDEO_ADS_ID",Im="AND_FB_INTERSTITIAL_ADS_ID_HEPCM",Jm="IOS_FB_INTERSTITIAL_ADS_ID_HEPCM",Km="AND_FB_REWARDED_VIDEO_ADS_ID_HEPCM",Lm="IOS_FB_REWARDED_VIDEO_ADS_ID_HEPCM",Mm="AND_MP_BANNER_ADS_ID",Nm="IOS_MP_BANNER_ADS_ID",Om="AND_MP_REWARDED_VIDEO_ADS_ID",Pm="IOS_MP_REWARDED_VIDEO_ADS_ID",Qm="AND_MP_INTERSTITIAL_ADS_ID",Rm="IOS_MP_INTERSTITIAL_ADS_ID",Sm="AND_MP_REWARDED_VIDEO_ADS_ID_HEPCM",Tm="IOS_MP_REWARDED_VIDEO_ADS_ID_HEPCM",Um="AND_MP_INTERSTITIAL_ADS_ID_HEPCM",Vm="IOS_MP_INTERSTITIAL_ADS_ID_HEPCM";if(void 0===Wm)var Wm={},Xm="URL_UPLOAD_AVATAR",Ym="EMAIL_SUPPORT",Zm="URL_MESSENGER_SUPPORT",$m="MIN_FRIEND_FB_REWARDED",an="USERINFO_TASK_DUTY_GAME",bn="URL_HUONG_DAN",cn="URL_POLICY",dn="URL_GG_PLAY_STORE",en="URL_APPLE_STORE",fn="URL_DOMAIN_SETTING";function gn(t){var e=J();t=void 0===t?e:t,logMessage("setTimedidEnterBackground: "+t),u("timedidEnterBackground",t)}function oa(t){t=void 0===t?0:t,logMessage("setIsRestarting: "+t),u("isRestartingGame",t)}function zb(t,e){var i=new BkSprite("#avt_frame_bg.png"),n=new BkSprite("#avt_frame.png");i.addChild(n);var s=new BkSpriteLoader(t,"#default_avatar.jpg"),r=.85*i.getContentSize().height;return s.setScale(r/s.getContentSize().height),s=ab(s,r),i.sY=s,i.addChild(s),(r=new BkChessRankSprite(e)).x=i.getContentSize().width/2,r.y=i.getContentSize().height/2-r.getContentSize().height/4,isWebPlatform()&&(r.setScale(.85),r.y=i.getContentSize().height/2-r.getContentSize().height/2.3),i.addChild(r),i.x=i.getContentSize().width/2,i.y=i.getContentSize().height/2,n.x=i.x,n.y=i.y,s.x=i.x,s.y=i.y,console.log("BkAvartarImg.getAvatarByID - avatarSp: ",i),i}function ab(t,e){var i=new BkSprite("#CircleClippingNodeImage.png");return i.setScale(e/i.getContentSize().height),(i=new cc.ClippingNode(i)).setAlphaThreshold(.01),i.addChild(t),i}function hn(t){return(t=new BkSpriteLoader(t,"#default_avatar.jpg")).x=t.getContentSize().width/2,t.y=t.getContentSize().height/2,t}BkQueue=cc.Class.extend({queue:null,isRunning:!1,rq:null,ctor:function(){this.queue=[]},S3:function(){this.rq=null,this.queue=[],this.isRunning=!1},A6:function(){traceCardList(this.queue,"Queue card: ")},x1:function(){return null==this.queue||0==this.queue.length?null:this.queue[this.queue.length-1]},push:function(t){null==this.queue&&(this.queue=[]),this.queue.push(t)},pop:function(){return this.rq=null==this.queue?null:this.queue.shift()},p_:function(){return this.rq},isEmpty:function(){return null==this.queue||0==this.queue.length},d1:function(){return this.isRunning},T4:function(t){this.isRunning=t}}),BASE_HEIGHT_AVAR=BASE_WIDTH_AVAR=97,BASE_WIDTH_BAOBOI=81,BASE_WIDTH_VATPHAM=BASE_HEIGHT_BAOBOI=83,BASE_HEIGHT_VATPHAM=84;var V=isWebPlatform()?"🧡":"♥️";V.toLowerCase();var jn="Bạn không đủ "+V.toLowerCase()+" để mời bạn chơi.",kn="Bạn không đủ "+V.toLowerCase()+" để vào chơi cùng bạn. ",Yl="Xin hãy chờ để nhận thêm "+V.toLowerCase()+" hằng ngày",Zl="Có lỗi khi mời chơi, xin hãy thử lại",Rl="Người chơi đã thoát khỏi game",Sl="Đã gửi lời mời chơi, xin hãy đợi phản hồi",Tl="Người chơi đã từ chối lời mời",Ul="Đang tạo bàn chơi, xin hãy đợi chút...",Vl="Có lỗi khi tạo bàn chơi, xin hãy thử lại",Wl="Người chơi đang ở trong bàn chơi khác",Xl="Người chơi đang hết "+V.toLowerCase(),ln="Video nhận "+V.toLowerCase()+" miễn phí cho bạn tạm thời đã hết. Xin bạn vui lòng quay lại sau &*& phút.",mn="Video nhận "+V.toLowerCase()+" miễn phí cho bạn hôm nay đã hết. Xin bạn vui lòng quay lại vào ngày mai.",Ua="Cảm ơn bạn đã tham gia Cờ Ziga.\n Bạn có muốn thoát không?",nn="Bạn không đủ tim để chơi. Bạn cần chờ 10 phút hoặc xem quảng cáo để nhận "+V.toLowerCase()+" chơi tiếp. Bạn có muốn xem quảng cáo không?",on="Bạn không đủ "+V.toLowerCase()+" để tiếp tục chơi. Hãy mời bạn bè cùng chơi để nhận "+V.toLowerCase()+" miễn phí!",ka="Bạn đã bị mất kết nối, chọn đồng ý để thử lại!",Ol="chỉ bao gồm các ký tự a -> z, A -> Z, 0 -> 9 hoặc _ ",Ml="Tên tài khoản không hợp lệ.",Pl="Tên có độ dài từ ít nhất 6 đến 20 ký tự.",Nl="Tên ";V.toLowerCase();var yl="Bàn đầy, vui lòng chọn bàn khác.",zl="Bạn không có đủ "+V.toLowerCase()+" để chơi trong bàn này."+Yl,Al="Mật khẩu không đúng.",Bl="Vào bàn không thành công.";function pn(){return" "+V.toLocaleLowerCase()}function qn(t,e){for(var i=t,n=0;n<e.length;){var s=i.indexOf("&*&");if(-1==s)break;var r=e[n];i=i.slice(0,s)+r+i.slice(s+3);n++}return i}function rn(t){return 1200>t?"Tập sự":1600>t?"Phong trào":2e3>t?"Kỳ thủ":2400>t?"Kỳ sỹ":"Kỳ vương"}function sn(t){var e=new BkSprite;for(Math.min(Math.floor(t/TITLED_STAR_MAX_NUM),9),t=0;t<TITLED_STAR_MAX_NUM;t++);return e}function J(){return(new Date).getTime()}function tn(t){var e=new Date(t);t="",t=10>(i=e.getDate())?"0"+i:i.toString();var i=e.getFullYear(),n="01 02 03 04 05 06 07 08 09 10 11 12".split(" ")[e.getMonth()],s=e.getHours();e=e.getMinutes();return t+"/"+n+"/"+i+" "+(10>s?"0"+s:s.toString())+":"+(10>e?"0"+e:e.toString())}function un(t){var e=new Date(1970,0,1);return e.setSeconds(t),e=e.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1"),3600>t&&(e=e.substring(3)),e}STR_WIN_FIRST_MATCH_IN_DAY_BONUS="Thắng trận đầu tiên \n trong ngày",STR_WIN_3_DIFFERENT_MATCH_IN_DAY_BONUS="Thắng 3 trận \n trong ngày \n",STR_WIN_ALL_DIFFERENT_MATCH_IN_DAY_BONUS="Thắng tất cả các trận \n trong ngày",STR_PLAY_1RST_GAME_IN_DAY_BONUS="Chơi trận đầu tiên \n trong ngày",STR_PLAY_10TH_GAME_IN_DAY_BONUS="Chơi 10 trận \n trong ngày",STR_PLAY_100TH_GAME_IN_DAY_BONUS="Chơi 100 trận \n trong ngày",STR_PLAYER_NEW_LEVEL_BONUS="Lên cấp";var vn={Xc:0,QX:function(){logMessage("WebAdsManager - beforeShowAds()")},HX:function(){logMessage("WebAdsManager - afterViewedAdsRewardOnWeb()");var t=new BkPacket;t.yn(O),BkConnectionManager.send(t)},Ww:function(){var t=this;logMessage("WebAdsManager - showRewardAdsOnWeb()"),BkGlobal.Rg?logMessage("WebAdsManager - showRewardAdsOnWeb() - not show because is showing another ads."):(BkGlobal.Rg=!0,logMessage("cc.game.config.app.isBuildAdvance: "+cc.game.config.app.isBuildAdvance),adBreak({type:"reward",name:"add-one-heart",beforeReward:function(t){logMessage("beforeReward"),t()},adDismissed:function(){console.log("adDismissed"),showPopupMessageWith("Bạn vui lòng xem hết video để được nhận thưởng! Xin cảm ơn!","",null,null,null)},adViewed:function(){console.log("adViewed"),logMessage("WebAdsManager - afterViewedAdsRewardOnWeb()");var t=new BkPacket;t.yn(O),BkConnectionManager.send(t)},afterAd:function(){console.log("afterAd"),t.Xc=0},beforeAd:function(){console.log("beforeAd")},adBreakDone:function(e){BkGlobal.Rg=!1,console.log("adBreakDone - info ",e),"frequencyCapped"==e.breakStatus&&t.Xc++,console.log("adBreakDone - self.recount: ",t.Xc),console.log("adBreakDone - info.breakStatus: ",e.breakStatus),"frequencyCapped"==e.breakStatus&&1==t.Xc&&(console.log("try one more"),t.Ww()),1<t.Xc&&(t.Xc=0),"timeout"!=e.breakStatus&&"invalid"!=e.breakStatus&&"noAdPreloaded"!=e.breakStatus||showPopupMessageWith("Không tải được quảng cáo. Xin bạn vui lòng thử lại sau!","")}}))},nE:function(){var t=this;logMessage("WebAdsManager - showInterstitialAdsOnWeb()"),BkGlobal.Rg?logMessage("WebAdsManager - showInterstitialAdsOnWeb() - not show because is showing another ads."):(BkGlobal.Rg=!0,adBreak({type:"pause",name:"interstitial",afterAd:function(){console.log("afterAd"),t.Xc=0},beforeAd:function(){console.log("beforeAd")},adBreakDone:function(e){BkGlobal.Rg=!1,console.log("adBreakDone - info ",e),"frequencyCapped"==e.breakStatus&&t.Xc++,console.log("adBreakDone - self.recount: ",t.Xc),console.log("adBreakDone - info.breakStatus: ",e.breakStatus),"frequencyCapped"==e.breakStatus&&1==t.Xc&&(console.log("try one more"),t.nE()),1<t.Xc&&(t.Xc=0)}}))},tE:function(){var t=this;logMessage("WebAdsManager - showStartAdsOnWeb()"),BkGlobal.PA?BkGlobal.nv?BkGlobal.Rg?logMessage("WebAdsManager - showStartAdsOnWeb() - not show because is showing another ads."):BkGlobal.isPlaying&&isNotOverByMinutes()?logMessage("WebAdsManager - showStartAdsOnWeb() - not show because player is playing chess."):(BkGlobal.Rg=!0,adBreak({type:"start",name:"startAds",afterAd:function(){console.log("afterAd"),t.Xc=0,BkGlobal.Rg=!1,BkConnectionManager.NS()},beforeAd:function(){console.log("beforeAd")},adBreakDone:function(e){BkGlobal.Rg=!1,console.log("adBreakDone - info ",e),"frequencyCapped"==e.breakStatus&&t.Xc++,console.log("adBreakDone - self.recount: ",t.Xc),console.log("adBreakDone - info.breakStatus: ",e.breakStatus),"frequencyCapped"==e.breakStatus&&1==t.Xc&&(console.log("try one more"),t.tE()),1<t.Xc&&(t.Xc=0)}})):logMessage("WebAdsManager - showStartAdsOnWeb() - not show because not over"):logMessage("WebAdsManager - showStartAdsOnWeb() - not show because user not applied open app ads")}},n={jv:!1,kv:!1,nq:0,kr:0,Mq:!1,Fl:!1,Oq:!1,Gl:!1,Nq:!1,$n:!1,ao:!1,bo:!1,HN:function(t,e){logMessage("urlImg "+t),cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","loadImageFromUrl","(Ljava/lang/String;Ljava/lang/String;)I",t,e):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","loadImageFromUrl:andImgName:",t,e)},isNative:function(){return cc.sys.isNative},DK:function(){return logMessage("getClientID js code"),isWebPlatform()?"dfClientID":isFBInstantGame()?"facebookID":(this.EK(),this.CK(),cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","getClientID","()Ljava/lang/String;"):cc.sys.os==cc.sys.OS_IOS||cc.sys.os==cc.sys.OS_OSX?jsb.ia.ha("NativeInterfaceObjectiveC","getClientID"):"dfClientID")},Nw:function(){isFBInstantGame()||(this.Tj(),cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","showAdmobBaner","()V"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","showAdmobBaner"))},nU:function(){logMessage("showRewardedVideo admob js "),isFBInstantGame()||(this.Fl&&(logMessage("isCacheAdmobRewardedVideo -> reset state ! cache -> auto play or show mess load fail"),this.Fl=!1),this.kv=!1,cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","showRewardedVideoAd","()V"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","showRewardedVideoAd"))},ZT:function(t){isFBInstantGame()||(null==t&&(t=1),cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","showInterstitialAd","(I)V",t):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(console.log("call to showInterstitialAd of native"),jsb.ia.ha("NativeInterfaceObjectiveC","showInterstitialAd")))},Qw:function(){isFBInstantGame()||(this.Tj(),cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","showFbAdBaner","()V"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","showFBAdBanner"))},ST:function(){isFBInstantGame()||(cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","showFBInterstitialAd","()V"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","showFBInterstitialAd"))},gH:function(t){cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","autoDestroyBanner","(Ljava/lang/String;)V",""+t):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","autoDestroyBanner:",t)},Tj:function(){isFBInstantGame()||(cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","destroyAds","()V"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","destroyAds"))},WA:function(t){var e=bm(t);if(t=am(t),logMessage("isFinishLoadCache -> partnerID: "+e+" typeAds: "+t),e===N){if(t===O&&this.Fl)return logMessage("done load cache start game GG video"),this.Fl=!1,!0;if(t===M&&this.Mq)return logMessage("done load cache start game GG intersitial"),this.Mq=!1,!0}if(e===$a){if(t===O&&this.Gl)return logMessage("done load cache start game MP video"),this.Gl=!1,!0;if(t===M&&this.Oq)return logMessage("done load cache start game MP intersitial"),this.Oq=!1,!0}if(e===Za){if(t===M&&this.Nq)return logMessage("done load cache start game FB intersitial"),this.Nq=!1,!0;if(t===O&&this.$n)return logMessage("done load cache start game FB video"),this.$n=!1,!0}return!1},tT:function(){this.Nq=this.Gl=this.Oq=this.Fl=this.Mq=!0},N1:function(){isFBInstantGame()||isWebPlatform()||(this.tT(),cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","loadAllAds","()V"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","loadAllAds"))},G2:function(){isFBInstantGame()||(this.kv=!0,logMessage("onRewardedVideoAdFinish: -> rewarded user"),this.KS(2))},sH:function(t){if(logMessage("cacheNextRewardedVideoAd: "+t),0>t)logMessage("wrong adsPartner");else{BkGlobal.on=t;var e="";t==N?(e="loadRewardedVideoAd",this.Fl=!0):t==Za?(e="loadFBRewardedVideoAd",this.$n=!0):t==$a&&(e="loadMPRewardedVideoAd",this.Gl=!0),e=this.Pz(e),this.Rp(e)}},F2:function(){this.wC(O),this.ot(BkGlobal.hC,!0),t(),isFBInstantGame()||this.kv||(logMessage("onRewardedVideoAdClose: "),n.rb(ad),BkConnectionManager.Mo(N,O,Sk),BkGlobal.Qg&&0<BkGlobal.P.pb()?logMessage("con tien neu xem het cung k nhan dc thuong -> k hien thong bao"):showPopupMessageWith("Bạn vui lòng xem hết video để được nhận thưởng! Xin cảm ơn!","",null,null,null))},KS:function(e){if(logMessage("sendPacketFullScreenadsRewardRequest"),t(),BkGlobal.Qg){var i=BkGlobal.P.pb();if(logMessage("BkGlobal.isPushFullScreenAds: "+BkGlobal.Qg+" myMoney: "+i),0<i)return}(i=new BkPacket).yn(e),BkConnectionManager.send(i)},Pz:function(t){return cc.sys.os==cc.sys.OS_ANDROID&&(t+="onUIThread"),t},nt:function(t,e){this.ao=e,this.Or(),this.rH(t)},ot:function(t,e){this.bo=e,this.Or(),this.sH(t)},rH:function(t){if(logMessage("cacheNextInterstitialAd: "+t),0>t)logMessage("wrong adsPartner");else{BkGlobal.nn=t;var e="";t==N?(e="loadInterstitialAd",this.Mq=!0):t==Za?(e="loadFBInterstitialAd",this.Nq=!0):t==$a&&(e="loadMPInterstitialAd",this.Oq=!0),e=this.Pz(e),this.Rp(e)}},w2:function(){logMessage("onInterstitialAdClose:"),this.wC(M),this.nt(BkGlobal.gC,!0),t(),BkConnectionManager.Mo(BkGlobal.KB,BkGlobal.JB,Tk)},wC:function(t){logMessage("onFullScreenAdsClose: "+t+" -> resume nhac nen if need"),resumeNhacNenSound()},m2:function(t){if(logMessage("onAdsdidLoadSuccess "+t),this.WA(t))logMessage("finish load cache start game-> return"),(t=am(t))==M&&this.ao&&(this.ao=!1),t==O&&this.bo&&(this.bo=!1);else{var e="";switch(t){case 1:e=Kc;break;case 2:e=Lc;break;case 3:e=Nc;break;case 4:e=Jc;break;case 5:e=Mc;break;case 6:e=Pc;break;case 7:e=Rc;break;case 8:e=Qc;break;case 9:e=Oc}n.rb(e)}},uy:function(t,e){if(t==M){if(this.ao)return logMessage("load fail hEPCM InterStitial -> reload normal InterStitial"),this.nt(e,!1),!0;logMessage("load fail normal InterStitial -> return")}else if(t==O){if(this.bo)return logMessage("load fail hEPCM RewardedVideo -> reload normal RewardedVideo"),this.ot(e,!1),!0;logMessage("load fail normal RewardedVideo -> return")}return!1},l2:function(e,i){logMessage("onAdsdidFailToLoad JS with type: "+e+" - errcode: "+i);var s=bm(e),r=am(e);if(this.WA(e))logMessage("finish load cache start game typeAds: "+r+" - partnerID: "+s),this.uy(r,s);else{var o=this.uy(r,s);switch(t(),o||(logMessage("fail normal EPCM -> reset crCachePartner!"),r==M?BkGlobal.nn=-1:r==O&&(BkGlobal.on=-1)),logMessage("partnerID: "+s+" typeAds: "+r),BkConnectionManager.Mo(s,r,Rk),s="",e){case 1:s=Tc;break;case 2:s=Uc;break;case 3:s=Wc;break;case 4:s=Sc;break;case 5:s=Vc;break;case 6:s=Yc;break;case 7:s=$c;break;case 8:s=Zc;break;case 9:s=Xc}o={};var a=$l();o[oc]=a,o[qc]=i,o=JSON.stringify(o),n.rb(s,o),r!=Pk&&(resumeNhacNenSound(),BkGlobal.Qg||showPopupMessageWith("Không tải được quảng cáo. Xin bạn vui lòng thử lại sau!",""))}},x2:function(){logMessage("onLeaveApplication")},Tt:function(t){isWebPlatform()?logMessage("isWebPlatform -> implement loginFB for other platform"):(s(),this.nq=t=void 0===t?lc:t,logMessage("this.fbLoginState: "+this.nq),cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","doLoginFB","()V"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","doLoginFB"))},z2:function(e,i){if(logMessage("onLoginFBSuccess: "+e+" token: "+i),t(),BkGlobal.oq=e,BkGlobal.vz=i,this.nq===lc){logMessage("FB_CS.STATE_FB_LINK_USER -> link user");var n=new BkPacket;n.yx(e,i),BkConnectionManager.send(n)}else this.nq===mc&&(logMessage("FB_CS.STATE_FB_INVITE: -> show invite"),this.$T())},$T:function(){cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","showInviteGameRequestFBPopup","()V"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","showInviteGameRequestFBPopup")},H2:function(t,e){if(logMessage("numSended: "+t+" listSended: "+e),this.kr+=t,this.kr<Ui)showToastMessage("Bạn cần mời đủ "+Ui+" người để được nhận thưởng!",.5*cc.winSize.width,.3*cc.winSize.height);else{this.kr=0,logMessage("send so ng da gui va list ng gui len server de nhan thuong");for(var i=e.split(";"),s=0;s<i.length;s++)logMessage(s+" - "+i[s]);logMessage("send packet nhan thuong invite friend"),null!=(s=BkLogicManager.S())&&(n.rb(Ac),s.yw(BkGlobal.oq,i,s.vs))}},wu:function(){var t;return cc.sys.os==cc.sys.OS_ANDROID?t=jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","hasGrantedUserFriend","()I"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(t=jsb.ia.ha("NativeInterfaceObjectiveC","hasGrantedUserFriend")),logMessage("hasGrantedUserFriend: "+t),t},SJ:function(){this.wu()?logMessage("hasGrantedUserFriend: -> update UI ban be"):(s(),cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","doLoginFBRequestUserFriend","()V"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","doLoginFBRequestUserFriend"))},fS:function(){cc.sys.os!=cc.sys.OS_ANDROID&&(cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","resetAcessTokenFB"))},y2:function(t,e){if(logMessage("onLoginFBRequestUserFriendSuccess: "+t+" - "+e),BkGlobal.oq=t,BkGlobal.vz=e,BkGlobal.hk)this.wu()&&((i=new BkPacket).OF(t),BkConnectionManager.send(i));else{var i=new BkPacket;i.yx(t,e),BkConnectionManager.send(i)}},testFunc:function(){return logMessage("testFunc"),"testFunc"},rb:function(t,e){if(cc.sys.os==cc.sys.OS_ANDROID)logMessage("off logFirebaseEvent android");else if(this.isNative()){var i;void 0===e?((i={})[oc]=$l(),i=JSON.stringify(i)):i=e,e=i,logMessage("eventName "+t+" jsonData: "+e),cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","logFirebaseEvent","(Ljava/lang/String;Ljava/lang/String;)V",t,e):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","logFirebaseEventWithName:andData:",t,e)}},EK:function(){if(!this.isNative())return 0;logMessage("c.NETWORK_VERSION: "+Gb),cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","setClientNetworkVersion","(Ljava/lang/String;)V",""+Gb):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","setClientNetworkVersion:",""+Gb)},CK:function(){Ni=this.BL(),cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","setClientAppVersion","(Ljava/lang/String;)V",""+Ni):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","setClientAppVersion:",Ni)},UK:function(){var t,e={};t=kd;var i=um;cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(t=td,i=vm),t=p(i,t);i=ld;var n=wm;cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(i=ud,n=xm);i=p(n,i),n=od;var s=Gm;cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(n=xd,s=Hm);n=p(s,n),s=nd;var r=Em;cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(s=wd,r=Fm);s=p(r,s),r=qd;var o=Om;cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(r=zd,o=Pm);r=p(o,r),o=rd;var a=Qm;cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(o=Ad,a=Rm),o=p(a,o),this.bo&&(t=Bd,n=ym,cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(t=Hd,n=zm),t=p(n,t),n=Ed,r=Km,cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(n=Kd,r=Lm),n=p(r,n),r=Fd,a=Sm,cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(r=Ld,a=Tm),r=p(a,r)),this.ao&&(i=Cd,s=Am,cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(i=Id,s=Bm),i=p(s,i),s=Dd,o=Im,cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(s=Jd,o=Jm),s=p(o,s),o=Gd,a=Um,cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(o=Md,a=Vm),o=p(a,o));a=hd;var c=qm;return cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(a=id,c=rm),a=p(c,a),e.ggAppAdsID=a,a=jd,c=sm,cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(a=sd,c=tm),a=p(c,a),e.ggBannerAdsID=a,e.ggAdsRewardedVideoID=t,e.ggInterstitialAdsID=i,t=md,i=Cm,cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(t=vd,i=Dm),t=p(i,t),e.fbBannerAdsID=t,e.fbRewardedVideoID=n,e.fbInterstitialAdsID=s,t=pd,i=Mm,cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(t=yd,i=Nm),t=p(i,t),e.mpBannerAdsID=t,e.mpRewardedVideoID=r,e.mpInterstitialAdsID=o,JSON.stringify(e)},Or:function(){if(!isWebPlatform()&&!isFBInstantGame()){var t=this.UK();cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","setAdsIDWithData","(Ljava/lang/String;)V",t):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","setAdsIDWithData:",t)}},d4:function(){var t=Si;cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","sendMailToSystem","(Ljava/lang/String;)V",t):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","sendMailToSystem:",t)},DT:function(){this.isNative()&&(cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","shareNative","()V"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","shareNative"))},openURL:function(t){cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","openURL","(Ljava/lang/String;)V",t):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","openURL:",t)},PC:function(t){cc.sys.os==cc.sys.OS_ANDROID&&jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","openURLMessenger","(Ljava/lang/String;)V",t)},iZ:function(){if(logMessage("didBecomeActive JS"),cc.sys.os==cc.sys.OS_IOS||cc.sys.os==cc.sys.OS_OSX){var t=J(),e=p("timedidEnterBackground",0);logMessage("crTime: "+t+" - timedidEnterBackground: "+e+" - detaTime: "+(t-e)),gn(0),this.jv?(logMessage("this.isReceiveMemoryWarning -> restart game"),this.jv=!1,cc.spriteFrameCache.removeSpriteFrames(),oa(1),cc.game.restart()):0<e&&3e5<t-e&&(logMessage("ios didBecomeActive after: 5 minute -> restart game."),oa(1),cc.game.restart())}},jZ:function(){logMessage("didEnterBackground JS"),gn()},dW:function(){logMessage("vibratePhone"),this.isNative()&&(nm()?cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","vibratePhone","()V"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","vibratePhone"):logMessage("!isVibrateOn -> return"))},Sq:function(){return!isFBInstantGame()&&((cc.sys.os==cc.sys.OS_IOS||cc.sys.os==cc.sys.OS_OSX)&&1==jsb.ia.ha("NativeInterfaceObjectiveC","isIphoneX"))},BK:function(){if(!this.isNative())return-1;var t=-1;return cc.sys.os==cc.sys.OS_ANDROID&&(t=jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","getCPID","()I")),logMessage("getCPID: "+t),t},$N:function(){return!this.isNative()||(cc.sys.os==cc.sys.OS_ANDROID?t=jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","networkAvaiable","()I"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(t=jsb.ia.ha("NativeInterfaceObjectiveC","networkAvaiable")),logMessage("networkAvaiable: "+t),t);var t},FL:function(){cc.sys.os==cc.sys.OS_ANDROID&&jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","dismissLoader","()V")},jS:function(t){1==t?n.Nw():2==t?n.Qw():3==t&&n.Sw()},HK:function(){var t=-1;return n.vB()?t=N:n.tB()?t=Za:n.wB()&&(t=$a),t},GK:function(){var t=0;return n.vB()?t=1:n.tB()?t=2:n.wB()&&(t=3),t},wB:function(){var t;return cc.sys.os==cc.sys.OS_ANDROID?t=jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","isShowMPBanner","()I"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(t=jsb.ia.ha("NativeInterfaceObjectiveC","isShowMPBanner")),logMessage("isShowMPBanner: "+t),t},tB:function(){var t;return cc.sys.os==cc.sys.OS_ANDROID?t=jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","isShowFBBanner","()I"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(t=jsb.ia.ha("NativeInterfaceObjectiveC","isShowFBBanner")),logMessage("isShowFBBanner: "+t),t},vB:function(){var t;return cc.sys.os==cc.sys.OS_ANDROID?t=jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","isShowGGBanner","()I"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(t=jsb.ia.ha("NativeInterfaceObjectiveC","isShowGGBanner")),logMessage("isShowGGBanner: "+t),t},VJ:function(t){cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","doRateApp","(Ljava/lang/String;)V",t):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","doRateApp:",t)},n2:function(e,i,n){logMessage("onAndroidPurchaseSuccess: signature: "+e+" - packageName: "+n),logMessage("purchaseInfo: "+i),t();var s=new BkPacket;s.yJ("android",e,i,n),BkConnectionManager.send(s)},D2:function(e){logMessage("onReceiptDataFromStore: "+e),t();var i=new BkPacket;i.xJ(e),BkConnectionManager.send(i)},C2:function(e){e=void 0===e?0:e,logMessage("onPurchasedFail: "+e),t(),e||showPopupMessageWith("Không thể kết nối đến cửa hàng ứng dụng. Xin bạn vui lòng thử lại!")},TK:function(t){if(cc.sys.os==cc.sys.OS_ANDROID)switch(t){case 0:return"ziga.cotuong.coup.1usd";case 1:return"ziga.cotuong.coup.5usd";case 2:return"ziga.cotuong.coup.10usd";case 3:return"ziga.cotuong.coup.20usd"}else if(cc.sys.os==cc.sys.OS_IOS||cc.sys.os==cc.sys.OS_OSX)switch(t){case 0:return"com.zigavn.ctcu.ios1.1USD";case 1:return"com.zigavn.ctcu.ios1.5USD";case 2:return"com.zigavn.ctcu.ios1.10USD";case 3:return"com.zigavn.ctcu.ios1.20USD"}},iO:function(t){s();var e=this.TK(t);logMessage("onBuyItem: "+t+" - "+e),cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","onBuyItem","(Ljava/lang/String;)V",e):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","onBuyItem:",e)},HJ:function(){cc.sys.os==cc.sys.OS_ANDROID&&jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","destroyBillingProcessor","()V")},d6:function(e){e=void 0===e?0:e,logMessage("showhideAnim: "+e),e?s():t()},fC:function(){var t=Ti;cc.sys.os==cc.sys.OS_ANDROID?n.PC(t):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||n.openURL(t)},B2:function(){logMessage("onNetworkStatusChangeDisconnect"),BkGlobal.Ll&&(BkGlobal.Ll=!1,logMessage("network change state connected -> disconnect"),BkConnectionManager.mE())},A2:function(){logMessage("onNetworkStatusChangeConnectted"),BkGlobal.Ll||(BkGlobal.Ll=!0,logMessage("network change state disconnect -> connected"),BkConnectionManager.mE())},BL:function(){var t;return cc.sys.os==cc.sys.OS_ANDROID?t=jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","getVersionName","()Ljava/lang/String;"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(t=jsb.ia.ha("NativeInterfaceObjectiveC","getVersionName")),logMessage("getVersionName: "+t),t},Sw:function(){isFBInstantGame()||(this.Tj(),cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","showMPAdBanner","()V"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","showMPAdBanner"))},eU:function(){isFBInstantGame()||(cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","showMPInterstitialAd","()V"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","showMPInterstitialAd"))},fU:function(){logMessage("showMPRewardedVideoAd JS"),isFBInstantGame()||(this.Gl&&(logMessage("isCacheMPRewardedVideo -> resset state ! cache -> auto play or show mess load fail when finish load"),this.Gl=!1),cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava","showMPRewardedVideoAd","()V"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC","showMPRewardedVideoAd"))},Rp:function(t){isFBInstantGame()||(logMessage("callNativeVoidFunction: "+t),cc.sys.os==cc.sys.OS_ANDROID?jsb.ia.ha("org/cocos2dx/javascript/NativeInterfaceJava",t,"()V"):cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||jsb.ia.ha("NativeInterfaceObjectiveC",t))},TT:function(){this.$n?(logMessage("is caching FB RV -> only set autoplay after loaded"),n.Rp("setAutoPlayFBrewardedVideo"),this.$n=!1):n.Rp("showFBRewardedVideoAd")},E2:function(){cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(logMessage("onReceiveMemoryWarning iOS"),this.jv=!0,n.rb(dd))}};function E(){}getSound=function(){return cc.audioEngine},playJoinGameSound=function(){logMessage("playJoinGameSound"),isSoundEnable()&&getSound().playMusic("sound/join_game.ogg",!1)},playLeaveGameSound=function(){isSoundEnable()&&getSound().playMusic("sound/leave_game.ogg",!1)},playDiscardSound=function(){isSoundEnable()&&getSound().playMusic("sound/click.ogg",!1)},playAlertSound=function(){isSoundEnable()},playLeaveTurnSound=function(){isSoundEnable()&&getSound().playMusic("sound/click.ogg",!1)},playBichatSound=function(){isSoundEnable()&&getSound().playMusic("sound/laught.ogg",!1)},playLaughtSound=function(){isSoundEnable()&&getSound().playMusic("sound/laught.ogg",!1)},playClickSound=function(){isSoundEnable()&&getSound().playMusic("sound/click.ogg",!1)},playDealCardSound=function(){isSoundEnable()&&getSound().playMusic("sound/deal_card.ogg",!1)},isSoundEnable=function(){return!!BkGlobal.jk&&mm()},playChieuTuongSound=function(){logMessage("playChieuTuongSound"),isSoundEnable()&&getSound().playMusic("sound/co_gong.mp3",!1)},playCoAnQuanSound=function(){logMessage("playCoAnQuanSound"),isSoundEnable()&&getSound().playMusic("sound/co_an_quan.mp3",!1)},playCoDiChuyenSound=function(){logMessage("playCoDiChuyenSound"),isSoundEnable()&&getSound().playMusic("sound/co_di_chuyen.mp3",!1)},playCoThangSound=function(){logMessage("playCoThangSound"),isSoundEnable()&&getSound().playMusic("sound/co_thang.mp3",!1)},playCoThuaSound=function(){logMessage("playCoThuaSound"),isSoundEnable()&&getSound().playMusic("sound/co_thua.mp3",!1)},isNhacNenEnable=function(){return!isWebPlatform()&&!isFBInstantGame()&&km()},playNhacNenSound=function(){isNhacNenEnable()&&BkBackgroundMusic.UC()},stopNhacNenSound=function(){isWebPlatform()||BkBackgroundMusic.DE()},pauseNhacNenSound=function(){isWebPlatform()||BkBackgroundMusic.pP()},resumeNhacNenSound=function(){isNhacNenEnable()&&BkBackgroundMusic.nS()},BkBackgroundMusic={mh:null,UC:function(){logMessage("playBGSound"),this.qv()&&(jsb.gi.stop(this.mh),this.mh=jsb.gi.Ks),this.mh=jsb.gi.c3("sound/Tri-Am-Various-Artists.mp3",!0,1),this.mh!==jsb.gi.Ks&&logMessage("play OK")},DE:function(){logMessage("stopBGSound"),jsb.gi.l6(),this.mh=jsb.gi.Ks},pP:function(){logMessage("pauseBGSound"),this.qv()?jsb.gi.pause(this.mh):this.DE()},nS:function(){logMessage("resumeBGSound"),this.qv()?jsb.gi.resume(this.mh):this.UC()},qv:function(){return this.mh!==jsb.gi.Ks&&null!==this.mh}},E.init=function(){isWebPlatform()&&(plugin.extend("facebook",{name:"",version:"",_userInfo:null,Ag:!1,eG:{GET:"get",POST:"post",DELETE:"delete"},oF:0,gW:{},hW:{},iW:{VALUE_YES:"1",VALUE_NO:"0"},CG:function(){var t=this;FB.getLoginStatus((function(e){e&&"connected"===e.status?(t.Ag=!0,t._userInfo=e.authResponse):(t.Ag=!1,t._userInfo={})}))},ctor:function(t){this.name="facebook",this.version="1.0",this._userInfo={},this.Ag=!1,FB&&(FB.init(t),this.CG(),plugin.FacebookAgent=this)},getInstance:function(){return this},login:function(t,e){var i=this;"function"==typeof t&&(e=t,t=[]),t.every((function(t){if("public_profile"!=t)return!0}))&&t.push("public_profile");var n=t.join(",");FB.login((function(t){if(t.authResponse){i.Ag=!0,i._userInfo=t.authResponse,console.log("FB.login - response: ",t);var n=[];t.authResponse.grantedScopes&&(n=t.authResponse.grantedScopes.split(",")),"function"==typeof e&&e(0,{Bj:t.authResponse.accessToken,RC:n})}else i.Ag=!1,i._userInfo={},"function"==typeof e&&e(t.error_code||1,{se:t.error_message||"Unknown error"})}),{scope:n,pS:!0})},Tq:function(){return this.Ag},logout:function(t){var e=this;FB.logout((function(i){i.authResponse?(e.Ag=!1,e._userInfo={},"function"==typeof t&&t(0,{isLoggedIn:!1})):"function"==typeof t&&t(i.error_code||1,{se:i.error_message||"Unknown error"})}))},tX:function(t,e){var i=t.join(","),n=this;FB.login((function(t){if(t.authResponse){var i=t.authResponse.grantedScopes.split(",");n.Ag=!0,n._userInfo=t.authResponse,"function"==typeof e&&e(0,{RC:i})}else n.Ag=!1,n._userInfo={},"function"==typeof e&&e(t.error_code||1,{se:t.error_message||"Unknown error"})}),{scope:i,pS:!0})},getAccessToken:function(){return this._userInfo?this._userInfo.accessToken:null},getUserID:function(){return this._userInfo?this._userInfo.userID:null},uX:function(t,e){FB.ui({method:"share",name:t.title,caption:t.caption,description:t.text,href:t.link,b3:t.imageUrl},(function(t){t?t.post_id?"function"==typeof e&&e(0,{KJ:!0,vP:t.post_id}):"function"==typeof e&&e(t.error_code||1,{se:t.error_message||"Unknown error"}):"function"==typeof e&&e(1,{se:"Unknown error"})}))},bz:function(t,e){if(t)if(this.ut(t)){t.name=t.name||t.site,delete t.site,t.href=t.href||t.link||t.siteUrl,delete t.siteUrl,delete t.link,t.picture=t.picture||t.image||t.photo||t.imageUrl||t.imagePath,delete t.imageUrl,delete t.imagePath,delete t.photo,delete t.image,t.caption=t.title||t.caption,delete t.title,t.description=t.text||t.description,delete t.text;var i=t.dialog;if(delete t.dialog,"shareLink"===i||"feedDialog"==i)t.method="share";else if("messageLink"==i)t.method="send",t.link=t.href;else if("shareOpenGraph"==i&&(t.method="share_open_graph",t.url)){for(var n in i={},t.preview_property_name?i[t.preview_property_name]=t.url:i.object=t.url,t)"method"!=n&&"action_type"!=n&&"action_properties"!=n&&(t[n]&&(i[n]=t[n]),delete t[n]);t.action_properties=JSON.stringify(i)}FB.ui(t,(function(t){t&&"function"==typeof e?t.post_id||t.success?e(0,{KJ:!0,vP:t.post_id||""}):t.error_code?e(t.error_code,{se:t.error_message||"Unknown error"}):e(0,t):null==t&&"function"==typeof e&&e(1,{se:"Unknown error"})}))}else"function"==typeof e&&e(1,{se:"The requested dialog: "+t.dialog+" can not be presented on Web"});else"function"==typeof e&&e(1,{se:"No info parameter provided"})},ut:function(t){return!(!t||!t.dialog||"shareLink"!==t.dialog&&"feedDialog"!==t.dialog&&"shareOpenGraph"!==t.dialog&&"messageLink"!==t.dialog)},api:function(t,e,i,n){"function"==typeof i&&(n=i,i={}),FB.api(t,e,i,(function(t){t.error?"function"==typeof n&&n(t.error.code,{se:t.error.message||"Unknown error"}):"function"==typeof n&&n(0,t)}))},pX:function(t){FB.api("/me/permissions",(function(e){if(e.data){for(var i=[],n=0;n<e.data.length;n++)"granted"==e.data[n].status&&i.push(e.data[n].permission);"function"==typeof t&&t(0,{RC:i})}else e.error||(e.error={}),"function"==typeof t&&t(e.error.code||1,{se:e.error.message||"Unknown error"})}))},gZ:function(){},canvas:{a3:function(t,e){t.method="pay",t.action="purchaseitem",FB.ui(t,(function(t){t.error_code?e(t.error_code||1,{se:t.error_message||t.error_msg||"Unknown error"}):e(0,t)}))}},dH:function(t,e){t?(t.method="apprequests",FB.ui(t,(function(t){t?t.error_code?"function"==typeof e&&e(t.error_code,{se:t.error_message||"Unknown error"}):"function"==typeof e&&e(0,t):"function"==typeof e&&e(1,{se:"Unknown error"})}))):"function"==typeof e&&e(1,{se:"No info parameter provided"})},Q1:function(){},vX:function(){},S1:function(){}}),E.sb=E.sb||(window.plugin?window.plugin.FacebookAgent.getInstance():null),E.te="",E.Xj="",E.sb&&E.sb.Tq()&&(E.te=E.sb.getUserID(),E.Xj=E.sb.getAccessToken()))},E.Cr=function(t){bk.Uk="",t&&zpostRequest("https://zigavn.com/app/ip.php","",(function(t){t&&(bk.Uk=t)})),E.cH((function(t,e){cc.username=t,cc.password=e,E.zJ()}))},E.cH=function(t){logMessage("Call FbService.appLogin"),E.sb.Tq()?(E.te=E.sb.getUserID(),E.Xj=E.sb.getAccessToken(),logMessage("FbService.App.isLoggedIn "+E.te),cc.isFunction(t)&&t(E.te,E.Xj)):E.sb.login(["public_profile","user_friends"],(function(e,i){0==e&&t?(E.te=E.sb.getUserID(),E.Xj=E.sb.getAccessToken(),cc.isFunction(t)&&t(E.te,E.Xj,i)):(switchToSceneWithGameState(G),showPopupMessageEx("Để chơi game bằng tài khoản Facebook bạn cần cấp quyền truy cập ứng dụng. Xin hãy đăng nhập lại!"))}))},E.ky=function(t){E.sb.dH({message:"Cờ tướng cờ úp online miễn phí - Ziga",title:"Mời bạn bè cùng chơi, với mỗi lượt cài đặt bạn sẽ được thưởng",filters:["app_non_users"]},(function(e,i){if(null!=t){var n=E.MQ(i);t(n)}logMessage("appRequest: "+JSON.stringify(i))}))},E.ly=function(){function t(){var t=BkLogicManager.S();t&&t.QP(E.te)}var e=BkLogicManager.S();e&&e.Iz();try{E.sb.Tq()?(E.te=E.sb.getUserID(),E.Xj=E.sb.getAccessToken(),t()):E.sb.login(["public_profile"],(function(e){0==e&&callback?(E.te=E.sb.getUserID(),E.Xj=E.sb.getAccessToken(),t()):showPopupMessageEx("Để mời bạn chơi game, xin hãy cấp quyền truy cập Facebook. Xin hãy thử lại!")}))}catch(t){showPopupMessageWith("Không thể mời bạn facebook, hãy đảm bảo trình duyệt web của bạn không chặn mở popup.","Mời bạn facebook lỗi!")}},E.m4=function(t){this.xy=t},E.h3=function(){try{E.fH()}catch(t){showPopupMessageWith("Không thể mời bạn facebook, hãy đảm bảo trình duyệt web của bạn không chặn mở popup.","Mời bạn facebook lỗi!")}},E.LY=function(){return{message:"Cờ tướng cờ úp online miễn phí - Ziga",title:"Mời bạn bè cùng chơi, với mỗi lượt cài đặt bạn sẽ được thưởng",filters:["app_non_users"]}},E.MQ=function(t){if(t&&t.to){t=t.to;for(var e=[],i=0;i<t.length;++i){var n=t[i];cc.isString(n)&&e.push(n)}return e}return[]},E.zJ=function(){BkConnectionManager.Db=ik,BkConnectionManager.Ar()},E.jz=function(t,e){var i=Ca();null==BkGlobal.P&&(BkGlobal.P=new BkUserData),BkGlobal.isLoginFacebook=!0;var n=bk.cpid,s=new BkPacket;isFBInstantGame()?s.KF(t,e,n,i,bk.Uk,BkFbInstant.od(),BkFbInstant.I_()):s.Gs(t,e,n,i,bk.Uk),BkConnectionManager.send(s)},E.lz=function(t,e){var i=cc.nh;null==BkGlobal.P&&(BkGlobal.P=new BkUserData),BkGlobal.isLoginFacebook=!0;var n=bk.cpid,s=new BkPacket;s.Gs(Ek,t,e,n,i,bk.Uk),BkConnectionManager.send(s)},E.lZ=function(t,e,i){null==BkGlobal.P&&(BkGlobal.P=new BkUserData);var n=bk.cpid,s=new BkPacket;s.Gs(rk,t,e,n,i,bk.Uk),BkConnectionManager.send(s)},E.t3=function(t){t=t.O.readByte(),logMessage("processLoginFbResult: "+t)},E.bE=function(t){if(null!=t){var e="https://zigavn.com";cc.isUndefined(cc.game.config.app)||cc.isUndefined(cc.game.config.app.Zv)||(e=cc.game.config.app.Zv),BkGlobal.ZY=t,t={dialog:"shareLink",title:"Chơi cờ tướng cờ úp miễn phí",image:t,link:e,hashtag:"#ziga",description:void 0},null!=E.sb&&(cc.isFunction(E.sb.ut)&&E.sb.ut(t)?E.sb.bz(t,(function(){})):(t.dialog="feedDialog",E.sb.bz(t,(function(t){logMessage(t)}))))}},E.u5=function(t){null==t||""==t?(t="https://zigavn.com",cc.isUndefined(cc.game.config.app)||cc.isUndefined(cc.game.config.app.Zv)||(t=cc.game.config.app.Zv),E.bE(t)):E.bE("https://www.facebook.com/games/"+t)},E.fH=function(){var t=["user_friends"];E.sb.Tq()||t.push("public_profile"),E.sb.login(t,(function(t){0==t?(E.te=E.sb.getUserID(),E.Kz()):showPopupMessageEx("Để mời bạn facebook bạn cần cấp quyền truy cập facebook, xin hãy thử lại.")}),"rerequest")},E.Kz=function(){var e=this;if(null!=E.sb){var i=null!=e.next&&""!=e.next?e.next:"/me/invitable_friends?fields=name,picture.width(80).height(80)&limit=50";s(),E.sb.api(i,E.sb.__proto__.eG.QW,{},(function(i,n){if(i==E.sb.__proto__.oF)if(e.Su=[],0==n.data.length)showToastMessage("Bạn không có bạn nào phù hợp để mời"),t();else{if(null!=n.QC.next&&""!=n.QC.next?(e.next=n.QC.next,e.st=!0):e.st=!1,0<(s=BkUserClientSettings.XK()).length)for(var s=JSON.parse(s),r=0;r<s.length;r++)for(var o=s[r],a=n.data.length-1;0<=a;a--)n.data[a].name==o&&n.data.splice(a,1);e.Su=n.data,0==e.Su.length&&(e.st?E.Kz():(showToastMessage("Bạn không có bạn nào phù hợp để mời"),t()))}}))}},E.xC=function(){null!=this.xy&&this.xy.xC()},E.T3=function(){this.next="",this.Su=[],this.st=!1,this._userInfo={},this.Ag=!1},BkBuffer=cc.Class.extend({mf:null,position:null,ze:null,length:0,ctor:function(){this.mf=[],this.ze=this.position=0},xs:function(t){return null==t||null==t?(logMessage("error validNumberParams: Number data send to server invalid! please check!"),0):t},bW:function(t){if(null==t||null==t)throw logMessage("error validStringParams: String data send to server invalid! please check!"),"error validStringParams";return t},aa:function(t){t=this.xs(t),this.mf[this.position]=t,this.position+=1,this.length++},hF:function(t){t=this.xs(t);for(var e=(t=ShortToByteArray(t)).length-1;0<=e;e--)this.aa(t[e])},dd:function(t){t=this.xs(t);for(var e=(t=IntToByteArray(t)).length-1;0<=e;e--)this.aa(t[e])},fW:function(t){t=this.xs(t);for(var e=(t=longToByteArray(t)).length-1;0<=e;e--)this.aa(t[e])},ca:function(t){t=this.bW(t),t=StringToByteArray(t),this.hF(t.length);for(var e=0;e<t.length;e++)this.aa(t[e]);return t.length+2},readByte:function(){var t=this.mf[this.ze];return this.ze+=1,t},readShort:function(){var t=this.Cq(2);return this.ze+=2,shortFromBytes(t)},readInt:function(){var t=this.Cq(4);return this.ze+=4,intFromBytes(t)},Ek:function(){var t=this.Cq(8);return this.ze+=8,longFromBytes(t)},da:function(){var t=this.readShort(),e=this.Cq(t);return this.ze+=t,intArrayToString(e)},ih:function(){return this.da()},toString:function(){for(var t="["+this.mf.length+"] |",e=0;e<this.mf.length;e++)t+=this.mf[e]+"|";return t},Cq:function(t){for(var e=[],i=0;i<t;i++)e.push(this.mf[i+this.ze]);return e},t_:function(){return this.mf.length},La:function(){return this.ze<this.mf.length}}),longToByteArray=function(t){for(var e=[0,0,0,0,0,0,0,0],i=0;i<e.length;i++){var n=255&t;e[i]=n,t=(t-n)/256}return e},byteArrayToLong=function(t){for(var e=0,i=0;i<t.length;i++){var n,s=t[i];0!=i?s=new Uint8Array([s])[0]:(n=(128&s)>>7,s&=127),logMessage("iByte "+s+" bit1 "+n),e=256*e+s,1==n&&(e=-e)}return e},ShortToByteArray=function(t){for(var e=[0,0],i=0;i<e.length;i++){var n=255&t;e[i]=n,t=(t-n)/256}return e},IntToByteArray=function(t){for(var e=[0,0,0,0],i=0;i<e.length;i++){var n=255&t;e[i]=n,t=(t-n)/256}return e},StringToByteArray=function(t){return toUTF8Array(t)},toUTF8Array=function(t){for(var e=[],i=0;i<t.length;i++){var n=t.charCodeAt(i);128>n?e.push(n):2048>n?e.push(192|n>>6,128|63&n):55296>n||57344<=n?e.push(224|n>>12,128|n>>6&63,128|63&n):(i++,n=65536+((1023&n)<<10|1023&t.charCodeAt(i)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return e},byteArrayToString=function(t){var e,i,n,s,r,o;for(e="",n=t.length,i=0;i<n;)switch(s=t[i++],s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(s);break;case 12:case 13:r=t[i++],e+=String.fromCharCode((31&s)<<6|63&r);break;case 14:r=t[i++],o=t[i++],e+=String.fromCharCode((15&s)<<12|(63&r)<<6|(63&o)<<0)}return e},intArrayToString=function(t){for(var e=new Uint8Array(t.length),i=0;i<t.length;i++){var n=new Uint8Array([t[i]])[0];e[i]=n}return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},longFromBytes=function(t){var e=new Int32Array([0])[0],i=(e=(255&t[0])<<24|(255&t[1])<<16|(255&t[2])<<8|255&t[3],e=new Uint32Array([e])[0],new Int32Array([0])[0]);i=(255&t[4])<<24|(255&t[5])<<16|(255&t[6])<<8|255&t[7],i=new Uint32Array([i])[0];return t=Number(0),Number(4294967296*e)+Number(i)},intFromBytes=function(t){new Int32Array([0])[0];return(255&t[0])<<24|(255&t[1])<<16|(255&t[2])<<8|255&t[3]},shortFromBytes=function(t){new Int16Array([0])[0];return(255&t[0])<<8|255&t[1]},BkPacket=cc.Class.extend({xg:null,O:null,Length:null,Type:null,Bd:null,oB:!1,ctor:function(){this.xg=new BkBuffer,this.O=new BkBuffer},WF:function(t){this.Type=ah,this.O.ca(t),this.Z()},iJ:function(t){this.Type=ni,this.Length=5+this.O.ca(t),this.Z()},HF:function(t,e,i,n){this.Type=Af;var s=this.O.ca(e);logMessage("AUTO LOGIN REGISTER CLIENT ID: "+e),this.O.dd(t),t=this.O.ca(i),n?(console.log("CreatePacketAutoRegLogin - isCreateNewAccount: "+n),this.O.aa(1)):(console.log("CreatePacketAutoRegLogin - isCreateNewAccount: "+n),this.O.aa(0)),this.Length=5+s+4+t+1,this.Z()},LF:function(t,e){this.Type=Sg,this.O.ca(t),this.O.ca(e),this.Z()},yV:function(){this.Length=5+this.O.length},nJ:function(t,e){void 0===e&&(e=-1),this.Type=kh,this.O.aa(t),this.O.aa(e),this.Length=7,this.Z()},FK:function(){var t,e=new Int8Array(7+this.O.position);for(t=0;7>t;t++)e[t]=this.xg.mf[t];for(t=0;t<this.O.position;t++)e[t+7]=this.O.mf[t];for(t=0;t<e.length;t++);return e},oP:function(t){var e=0;for(e=0;e<t.length;e++);for(e=0;7>e;e++)this.xg.mf[e]=t[e];for(e=0;e<t.length-7;e++)this.O.aa(t[e+7]);this.Length=this.xg.readShort(),this.Type=this.xg.readByte(),this.Bd=this.xg.readInt()},toString:function(){return"Header: "+this.xg.toString()+" [Type :"+this.Type+"] [Length : "+this.Length+"] [Index: "+this.Bd+"]\nContent: "+this.O.toString()},Z:function(){this.yV(),this.xg.hF(this.Length),this.xg.aa(this.Type),null==this.Bd&&(this.Bd=0),this.xg.dd(this.Bd)},Wy:function(t,e,i){logMessage("c.NETWORK_LOG_IN "+Yd),BkGlobal.Zp=i,this.Type=Yd,t=this.O.ca(t),e=this.O.ca(e),i=this.O.ca(i),this.Length=7+t+e+i-2,this.Bd=0,this.Z()},MF:function(t,e,i,n,s){this.Type=Lf,t=this.O.ca(t),e=this.O.ca(e);var r=this.O.ca(n);logMessage("REGISTER CLIENT ID: "+n),this.O.dd(i),i=this.O.ca(s),this.Length=5+t+e+r+4+i,this.Z()},JF:function(t,e){this.Type=$f;var i=this.O.ca(t),n=this.O.ca(e);this.Length=5+i+n,this.Z()},Ty:function(t){this.Type=Di,this.O.aa(t),this.Length=6,this.Z()},tJ:function(t,e,i){this.Type=qf,this.O.aa(e),this.O.aa(i),this.O.aa(t),this.Length=8,this.Bd=0,this.Z()},IF:function(){this.Type=ji,this.Length=5,this.Z()},Gs:function(t,e,i,n,s){this.Type=bi,t=this.O.ca(t),e=this.O.ca(e),n=this.O.ca(n),this.O.dd(i),i=this.O.ca(s),this.Length=7+t+e+n+4+i-2,this.Z()},KF:function(t,e,i,n,s,r,o){this.Type=bi,t=this.O.ca(t),e=this.O.ca(e),n=this.O.ca(n),this.O.dd(i),i=this.O.ca(s),r=this.O.ca(r),o=this.O.ca(o),this.Length=7+t+e+n+4+i+r+o-2,this.Z()},yx:function(t,e){this.Type=Hf,this.O.aa(rk);var i=this.O.ca(t),n=this.O.ca(e);this.Length=6+i+n,this.Z()},NF:function(t,e){this.Type=Hf,this.O.aa(tk);var i=this.O.ca(t),n=this.O.ca(e);this.Length=6+i+n,this.Z()},OF:function(t){this.Type=Hf,this.O.aa(uk),this.Length=6+this.O.ca(t),this.Z()},zx:function(t){this.Type=Hf,this.O.aa(sk),this.Length=6+this.O.ca(t),this.Z()},zW:function(){this.Type=Hf,this.O.aa(qk),this.Length=6,this.Z()},DF:function(t){this.Type=rf,this.O.aa(t),this.Length=6,this.Z()},tF:function(t,e){this.Type=be;var i=1;this.O.aa(t),null!=e&&""!=e&&(i+=this.O.ca(e)),this.Length=7+i-2,this.Z()},EF:function(t){this.Type=ce,this.O.aa(t),this.Length=6,this.Z()},tW:function(t){this.Type=Bf,this.Length=9,this.O.dd(t),this.Z()},GW:function(t){this.Type=Ag,this.Length=9,this.O.dd(t),this.Z()},vW:function(){this.Type=re,this.Length=5,this.Z()},wW:function(t){var e;for(this.Type=re,e=0;e<t.length;e++)this.O.aa(t[e].fg());this.Length=5+t.length,this.Z()},GF:function(t,e,i,n){this.Type=se,this.O.aa(t),this.O.aa(e),this.O.aa(i),this.O.aa(n),this.Length=9,this.Z()},vF:function(t){this.Type=Df,this.O.aa(t),this.Length=6,this.Z()},XF:function(t){this.Type=li,this.O.aa(t?1:0),this.Length=6,this.Z()},wF:function(){this.Type=Ih,this.Length=5,this.Z()},UF:function(t,e){this.Type=Pe,this.O.dd(t),this.O.aa(e),this.Length=10,this.Z()},BF:function(){this.Type=jf,this.Length=5,this.Z()},RW:function(t){t.Ee=this.O.readInt(),t.tP=this.Js()},Js:function(){for(var t=[];this.O.La();){var e=new BkPlayerInfoData;e.name=this.O.ih(),e.position=this.O.readByte(),e.status=this.O.readByte(),e.jg=this.O.readInt(),e.it=this.O.da(),e.Tg=this.O.readInt(),e.iB=1==this.O.readByte(),BkGlobal.ja!=K&&BkGlobal.ja!=L||(e.Ka=1==this.O.readByte(),e.ae=1==this.O.readByte()),t.push(e),logMessage("User Name:"+e.name+" Pos: "+e.position+" Status: "+e.status+" Money: "+e.jg+" avatarId: "+e.it+" level:"+e.Tg+" isBlockChat:"+e.ae)}return t},JW:function(t,e,i,n,s,r){this.Type=Uf;var o=0;o+=t=this.O.ca(t),this.O.aa(e),o+=1,o+=e=this.O.ca(i),this.O.fW(n),o+=8,o+=n=this.O.ca(s),r=this.O.ca(r),this.Length=5+(o+r),this.Z()},xx:function(){this.Type=Nh,this.Z()},yF:function(){this.Type=Of,this.Length=5,this.Z()},Hs:function(t){this.Type=kg,this.O.aa(t),this.Length=6,this.Z()},Hs:function(t){this.Type=kg,this.O.aa(t),this.Length=6,this.Z()},RF:function(){this.Type=wf,this.Length=5,this.Z()},Vy:function(t,e){this.Type=mg,this.O.aa(t),this.O.aa(e),this.Length=7,this.Z()},lJ:function(t){console.log("createLoadGameHistoryDetailPacket - sessionData: ",JSON.stringify(t)),this.Type=og,console.log("this.Buffer.length: ",this.O.length),t=this.O.ca(t.$o),console.log(t+" - "+this.O.length),this.Length=5+this.O.length,this.Z()},Zy:function(t,e){console.log("sendRemoveViewedTableSessionRequest - sessionData: ",JSON.stringify(t)),this.Type=zg,this.O.aa(e),this.Length=6+this.O.ca(t.$o),this.Z()},Uy:function(){this.Type=wg,this.Length=5,this.Z()},$I:function(){this.Type=sg,this.Length=5,this.Z()},Xy:function(t,e){this.vj(t,e)},vj:function(t,e){this.Type=t,this.O.aa(e),this.Length=6,this.Z()},rJ:function(t){this.zc(t)},zc:function(t){this.Type=t,this.Length=5,this.Z()},TF:function(t,e,i){this.Type=eg,t=this.O.ca(t),e=this.O.ca(e),i=this.O.ca(i),this.Length=5+t+e+i,this.Z()},pJ:function(){this.Type=Ie,this.Length=5,this.Z()},qJ:function(){this.Type=Ke,this.Length=5,this.Z()},AF:function(t){this.Type=hg,this.Length=5+this.O.ca(t),this.Z()},xF:function(t){this.Type=jg,this.Length=5+this.O.ca(t),this.Z()},SF:function(t){this.Type=Ng,this.O.aa(t),this.Length=6,this.Z()},zF:function(t){this.Type=Yh,this.O.aa(t),this.Length=6,this.Z()},uF:function(t){this.Type=Ig,this.O.aa(t),this.Length=6,this.Z()},mG:function(t){for(;this.O.La();){var e=this.O.readByte(),i=this.O.readInt(),n=this.O.readInt();t.fG=e,t.ZF=i,t.iG=n}},lG:function(t){t.HB=this.O.readInt()},jG:function(t){t.reason=this.O.readByte()},mp:function(t,e,i){this.Type=e,t=this.O.ca(t),null!=i?(this.O.aa(i),this.Length=7+t-1):this.Length=7+t-2,this.Z()},CF:function(t){this.Type=of,this.Length=7+this.O.ca(t)-2,this.Z()},QF:function(t){this.Type=Wf,this.Length=7+this.O.ca(t)-2,this.Z()},wG:function(t){for(;this.O.La();){var e=1==this.O.readByte(),i=1==this.O.readByte(),n=this.O.readInt(),s=this.O.ih(),r=this.O.ih(),o=this.O.readByte();if(BkGlobal.P.userName.toLowerCase()!=s.toLowerCase()){var a=new BkUserData;a.Sr(e),a.om(i),a.Xh(n),a.yd(s),a.cf(r),a.Qr(o),t.push(a)}}},Ax:function(t){this.Type=Zf,this.Length=7+this.O.ca(t)-2,this.Z()},sW:function(t){this.Type=Qf,this.Length=7+this.O.ca(t)-2,this.Z()},HW:function(t){this.Type=Rf,this.Length=7+this.O.ca(t)-2,this.Z()},Bx:function(t){this.Type=Yg,this.Length=7+this.O.ca(t)-2,this.Z()},cG:function(t){for(var e=0,i=0;this.O.La();)e=this.O.readByte(),i=this.O.readByte(),t.YA=e,t.ya=i},Dx:function(t,e){for(var i=1;this.O.La();){var n=this.O.da(),s=tn(s=this.O.Ek()),r=new BkMailInfo;if(1==t){var o=this.O.da();r.sT(o)}else 2==t&&(o=this.O.da(),r.rT(o));o=this.O.da(),1==t&&(i=this.O.readByte()),r.K4(n),r.setDate(s),r.wT(o),r.L4(i),e.push(r)}},dG:function(t){for(var e=0,i=e="",n="",s="",r="";this.O.La();)e=tn(e=this.O.Ek()),i=this.O.da(),n=this.O.da(),s=this.O.da(),r=this.O.da();t.setDate(e),t.sT(i),t.rT(n),t.wT(s),t.u4(r)},wx:function(t){this.Type=Nf,this.Length=7+this.O.ca(t)-2,this.Z()},aX:function(){for(;this.O.La();)return this.O.da()},yW:function(t,e){this.Type=ch,this.O.aa(t),this.Length=6+this.O.ca(e),this.Z()},qG:function(){var e=[],i=this.O.readByte();if(-1==i)return showToastMessage("Bạn đã gửi tối đa số lời mời trong ngày"),t(),null;for(var n=0;n<i;n++)e[n]=this.O.readByte();return e},bG:function(t){this.Type=wh,this.O.aa(t),this.Length=6,this.Z()},R_:function(){this.Type=mi,this.O.aa(16),this.O.aa(bl),this.Length=7,this.Z()},FW:function(t,e,i){this.Type=Ah,t=this.O.ca(t),e=this.O.ca(e),this.O.aa(i),this.Length=7+t+e+1-2,this.Z()},eJ:function(t,e,i){if(this.Type=ii,this.O.aa((i-7)/3),t=this.O.ca(t),i=0,cc.isArray(e))for(var n=0;n<e.length;n++)i+=this.O.ca(e[n]);this.Length=6+t+i,this.Z()},ZI:function(t,e){this.Type=qf,this.O.aa(t),this.O.aa(e),this.Length=7,this.Z()},oJ:function(t){this.Type=rf,this.O.aa(t),this.Length=6,this.Z()},VF:function(t,e,i){this.Type=Ze,this.O.dd(t),this.O.aa(e),this.Length=""!=i&&null!=i?12+this.O.ca(i)-2:10,this.Z()},FF:function(t,e,i,n,s){this.Type=hf,t=this.O.ca(t),e=this.O.ca(e),this.O.aa(i),this.O.aa(n),this.O.aa(s),this.Length=7+e+t+3-2,this.Z()},PF:function(t,e){this.Type=he;var i=this.O.ca(t);this.Length=7+this.O.ca(e)+i-2,this.Z()},aq:function(t){t=em(t),this.Type=me,this.Length=7+this.O.ca(t)-2,this.Z()},PY:function(t){this.Type=Ae;for(var e=0;e<t.length;e++){var i=t[e];this.O.aa(i.fg()),this.O.aa(i.Wv)}this.Length=7+2*t.length-2,this.Z()},QY:function(t){this.Type=Oe;for(var e=0,i=0;i<t.length;i++){var n=t[i];0!=n.Wv&&(e++,this.O.aa(n.fg()),this.O.aa(n.Wv))}this.Length=7+2*e-2,this.Z()},MY:function(t,e,i){this.Type=Ge,this.O.aa(t.fg()),this.O.aa(e),this.O.aa(i),this.Length=8,this.Z()},VY:function(t){this.Type=Be,this.O.aa(t),this.Length=6,this.Z()},O3:function(t){this.Type=Bg,this.Length=7+this.O.ca(t)-2,this.Z()},TY:function(t){this.Type=ug,this.Length=7+this.O.ca(t)-2,this.Z()},KY:function(){this.Type=ti,this.O.aa(cj),this.Length=8,this.Z()},bJ:function(t,e,i){for(this.Type=ti,this.O.aa(bj),this.O.aa(t),this.O.dd(e),this.O.dd(i.length),e=t=0;e<i.length;e++)t+=this.O.ca(i[e]);this.Length=17+t-2,this.Z()},KZ:function(t){this.Type=ui,this.O.aa(t),this.Length=6,this.Z()},r_:function(t){this.Type=ui,this.O.aa(t),this.Length=6,this.Z()},NY:function(t,e,i){var n=i.length;for(this.Type=ui,this.O.aa(t),this.O.dd(e),this.O.aa(n),t=0;t<n;t++)e=i[t],this.O.dd(e.data.Z1),this.O.dd(e.data.id);this.Length=13+8*n-2,this.Z()},JY:function(t,e){this.Type=ui,this.O.aa(t),this.O.dd(e),this.Length=10,this.Z()},IY:function(t,e){this.Type=ui,this.O.aa(t),this.O.dd(e),this.Length=10,this.Z()},uW:function(){this.zc(we)},xW:function(){this.zc(rg)},EW:function(t){this.Type=Eg,this.Length=8+t.length-2,this.O.aa(t.length);for(var e=0;e<t.length;e++)this.O.aa(t[e]);Index=0,this.Z()},IW:function(t,e,i){this.Type=ai;var n=0,s=0;for(t&&(n=1),e&&(s=1),this.O.aa(n),this.O.aa(s),t=0;t<i.length;t++)this.O.aa(i[t]);this.Length=11,this.Bd=0,this.Z()},UY:function(){this.Type=wi,this.O.aa(Qd),this.Length=6,this.Bd=0,this.Z()},Y6:function(t){this.Type=wi,this.O.aa(Od),this.O.dd(t),this.Length=10,this.Bd=0,this.Z()},Z6:function(t,e){this.Type=wi,this.O.aa(Pd);var i=this.O.ca(t);this.O.dd(e),this.Length=10+i,this.Bd=0,this.Z()},yn:function(t){this.Type=Bi,this.O.aa(Mk),this.O.aa(t),this.Length=7,this.Bd=0,this.Z()},zn:function(t){this.Type=Bi,this.O.aa(Nk),this.O.aa(t),this.Length=7,this.Z()},hJ:function(t,e){this.Type=If,this.O.aa(t),this.Length=6+this.O.ca(e),this.Z()},gJ:function(t,e,i){this.Type=Jf,this.O.aa(t),this.O.aa(e),this.Length=7+this.O.ca(i),this.Z()},aJ:function(t,e,i){this.Type=Bi,this.O.aa(Jk),this.O.aa(t),this.O.aa(e),this.O.aa(i),this.Length=9,this.Z()},xJ:function(t){this.Type=$h,this.Length=5+this.O.ca(t),this.Z()},yJ:function(t,e,i,n){this.Type=pi,t=this.O.ca(t),e=this.O.ca(e),i=this.O.ca(i),n=this.O.ca(n),this.Length=5+t+e+i+n,this.Z()},IG:function(t,e){this.Type=Lh,this.O.aa(1),this.O.aa(t),this.Length=7+this.O.ca(e),this.Z()},cV:function(t,e){this.Type=Lh,this.O.aa(2),this.O.aa(t),this.Length=7+this.O.ca(e),this.Z()}});var WebSocket=WebSocket||window.oX||window.TW,wn=cc.Class.extend({tY:null,ws:null,kk:!1,Fo:null,_delegate:null,eg:null,ctor:function(){this.kk=!1},init:function(t){this.ws=t,this.kk=!1},JM:function(){logMessage("initSocket "+this.ws),this.eg=new WebSocket(this.ws),this.eg.binaryType="arraybuffer";var t=this;this.eg.onopen=function(e){logMessage("Send Binary WS was opened -> store serverIPAddress"),ha(t.ws),t.kk=!0,t._delegate&&t._delegate.zC&&t._delegate.zC(e)},this.eg.onmessage=function(e){e=new Int8Array(e.data);var i=new BkPacket;i.oP(e),t._delegate&&t._delegate.DC&&t._delegate.DC(i)},this.eg.onerror=function(e){logMessage("sendBinary Error was fired"),t._delegate&&t._delegate.vC&&t._delegate.vC(e)},this.eg.onclose=function(e){logMessage("_wsiSendBinary websocket instance closed."),t.kk=!1,t._delegate&&t._delegate.uC&&t._delegate.uC(e)}},IS:function(t){null!=this.eg?this.kk?(this.Fo=null,logMessage("Send packet: "+t.toString()),this.eg.send(t.FK().buffer)):(logMessage("socket is close -> reopen socket"),null==this.Fo&&(this.Fo=t),this.jD()):(logMessage("socket = null -> inital socket"),this.jD())},jD:function(){logMessage("reOpenSocket"),this._delegate&&this._delegate.FC&&this._delegate.FC()},setDelegate:function(t){this._delegate=t},dg:function(){null!=this.eg&&(this.eg.close(),this.eg=null),this.setDelegate(null),this.kk=!1}});BkConnectionManager={Ue:null,$q:null,ln:0,kn:0,jn:0,Ig:0,Db:null,Gf:null,Kh:!1,ar:-1,bv:!1,gB:!1,Co:null,Do:null,fk:function(t){this.dg();var e="";null!=t?e=t:(t="ws",isWebPlatform()?(logMessage("cc.game.config = "),-1<cc.game.config.app.gamews.indexOf("localhost")||(t="wss"),null!=cc.game.config.app&&null!=cc.game.config.app.gamews&&(e=t+cc.game.config.app.gamews)):isFBInstantGame()?e="wss://zigavn.com/ws/":(e=p("ServerIPAddress",fd),logMessage("getServerIPAddress: "+e))),this.gB=!1,this.Ue=new wn,this.Ue.init(e),this.Ue.JM(),this.Ue.setDelegate(this)},OR:function(){null!=this.Co&&null!=this.Co&&(cc.eventManager.removeListener(this.Co),this.Co=null,logMessage("removeEventTabChange: onHideListenner")),null!=this.Do&&null!=this.Do&&(cc.eventManager.removeListener(this.Do),this.Do=null,logMessage("removeEventTabChange: onShowListenner"))},gM:function(){logMessage("initEventsTabChange"),this.OR();var t=this;this.Co=cc.eventManager.addCustomListener(cc.game.EVENT_HIDE,(function(){t.cP()})),this.Do=cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,(function(){t.dP()})),cc.game.z0},dP:function(){if(BkGlobal.mv)BkGlobal.mv=!1;else{BkGlobal.mv=!0,logMessage("onTabShow");var t=BkGlobal.Ti;if(BkGlobal.Ti=!0,t!=BkGlobal.Ti){if(!BkConnectionManager.lk()&&BkGlobal.Sa==T)return logMessage("mat ket noi -> reconnect"),BkConnectionManager.vw(),void BkConnectionManager.sr();BkConnectionManager.Kh?BkConnectionManager.ar=J():this.hb()}isWebPlatform()&&BkConnectionManager.MS(),vn.tE()}},cP:function(){BkGlobal.lv?BkGlobal.lv=!1:(BkGlobal.lv=!0,BkGlobal.Z2=Date.now(),logMessage("onHide"),BkGlobal.Ti=!1)},NS:function(){var t=new BkPacket;t.qJ(),BkConnectionManager.send(t)},MS:function(){var t=new BkPacket;t.pJ(),BkConnectionManager.send(t)},US:function(){BkGlobal.Ti=!0},Ar:function(){logMessage("... prepare connection"),this.lk()||this.fk()},fw:function(){null==BkGlobal.P?(logMessage("reLogin: BkGlobal.UserInfo == null -> reload page or restart game"),isWebPlatform()?eb():isFBInstantGame()?cc.director.runScene(new pa):cc.game.restart()):(logMessage("reLogin user: "+BkGlobal.P.userName+" password: "+BkGlobal.P.password+" clientId: "+Ca()),BkLogicManager.S().TJ(BkGlobal.P.userName,BkGlobal.P.password,Ca()))},FC:function(){s(!1),this.Db=ya,this.fk()},zC:function(){logMessage("onOpen callback this.conStatus: "+this.Db),this.Db==fk?(logMessage("MAKING_NEW_CONNECTION"),this.HS()):this.Db==dk?(logMessage("RECONNECTING"),this.QS()):this.Db==ya?this.fw():this.Db==hk?(console.log("BkConnectionManager - onOpen - this.isCreateNewAccount: "+BkConnectionManager.SA),BkLogicManager.S().JS(BkConnectionManager.SA)):this.Db==ik?E.jz(cc.username,cc.password):this.Db==jk?E.jz(cc.V6,cc.T2):(logMessage("cac th khac"),null!=this.Ue.Fo?this.send(this.Ue.Fo):this.fw())},vC:function(){logMessage("onError callback")},uC:function(){this.dg(),BkLogicManager.S().ev?(BkLogicManager.S().ev=!1,t(),eb()):(logMessage("onClose callback "+this.Ig+"- this.conStatus: "+this.Db),this.bv?(logMessage("isIDLETimeOut -> wait action click popup renew connection"),this.bv=!1):this.Db!=ya&&this.Db!=ik||(this.Ig++,this.zQ()))},zQ:function(){if(3<this.Ig){logMessage("can't reconnect -> show thong bao"),this.Ig=0;var e=function(){logMessage("onOKClick processOnClose"),isWebPlatform()?eb():isFBInstantGame()?cc.director.runScene(new pa):cc.game.restart()};t(),isWebPlatform()?showPopupMessageConfirmEx(ka,e):showPopupMessageWith(ka,"",null,e)}else logMessage("try reconnect -> "+this.Ig),s(!1),this.fk()},UZ:function(){return this.Ue},send:function(t){cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||!p("isRestartingGame",0)?(this.wP(t),this.lk()&&this.Ue.IS(t)):logMessage("send packet khi dang restarting game -> reject")},lk:function(){return null!=this.Ue&&this.Ue.kk},wP:function(t){var e;t:if(null==t)e=!1;else{if(t.Type===Uh){e=!0;break t}e=!1}e||this.US(),BkGlobal.Sa==T&&this.uS();t:if(null==t)e=!1;else switch(t.Type){case Yd:case bi:case Lf:case $f:case hf:case he:case Uh:case Af:e=!1;break t;default:e=!0}e&&this.iN(t)&&(logMessage("Last packet: "+t.Type),this.$q=t,this.wS())},uS:function(){this.QE();var t=getCurrentScene();null!=t&&t.scheduleOnce(this.nC,2)},QE:function(){var t=getCurrentScene();null!=t&&t.unschedule(this.nC),this.nD()},cE:function(){this.nD(),this.Dg=new BkSprite;var t=20;isWebPlatform()||(t*=GAME_SCALE);var e=new BkLabelTTF("Kết nối không ổn định...","",t);this.Dg.addChild(e,2);var i=0,n=e.getContentSize().height,s=(t=e.getContentSize().width,new BkSprite("#busy_indicator.png")),r=(n=1.2*n)/s.getContentSize().height,o=r*s.getContentSize().width;s.setScale(r),s.x=e.x-.5*t-.5*o,s.y=e.y,s.schedule((function(){i+=30,s.setRotation(i)}),.07),this.Dg.addChild(s,2),e=new cc.SpriteBatchNode("Chess_toast.png"),(r=new cc.Scale9Sprite).updateWithBatchNode(e,cc.rect(0,0,37,38),!1,cc.rect(12,12,12,12)),r.width=t+1.5*o,r.height=1.2*n,r.x=s.x-.5*o+.5*r.width,this.Dg.addChild(r,1),null!=(t=getCurrentScene())&&(this.Dg.x=.5*cc.winSize.width,this.Dg.y=TOAST_MSG_YPOS,isWebPlatform()&&(this.Dg.y=.5*cc.winSize.height),t.addChild(this.Dg,Ud-1))},nD:function(){null!=this.Dg&&(this.Dg.removeFromParent(),this.Dg=null)},nC:function(){logMessage("onAlertNetwork"),BkConnectionManager.cE()},iN:function(t){return BkGlobal.Sa!=T||t.Type==ce},UJ:function(){logMessage("Making new connection...."),s(!1),this.Db=fk,this.fk()},HS:function(){var t=-1,e=-1,i=-1;switch(BkGlobal.Sa){case gj:t=BkGlobal.ja,e=BkGlobal.wf;break;case T:t=BkGlobal.ja,e=BkGlobal.wf,i=BkGlobal.Rj}var n="";null!=BkGlobal.P.userName&&null!=BkGlobal.P.userName&&(n=BkGlobal.P.userName),logMessage(BkGlobal.P.userName+" - "+BkGlobal.P.password+" - "+t+" - "+e+" - "+i);var s=new BkPacket;s.FF(n,BkGlobal.P.password,t,e,i),this.send(s)},Nv:function(){BkConnectionManager.ln++,logMessage("new onMakeNewConnection "+BkConnectionManager.ln),2<=BkConnectionManager.ln?(logMessage("finish schedule"),BkConnectionManager.ln=0,BkConnectionManager.jj(ka)):BkConnectionManager.UJ()},wS:function(){logMessage("scheduleMakeNewConnection"),this.ln=0,this.Sk(!1),this.lk()||this.Nv();var t=getCurrentScene();null!=t&&t.schedule(this.Nv,8,1)},Sk:function(e){null==e&&(e=!0),e&&t(),null!=(e=getCurrentScene())&&e.unschedule(this.Nv)},AC:function(){BkConnectionManager.jn++,logMessage("onPing "+BkConnectionManager.jn),2==BkConnectionManager.jn&&(logMessage("show Anim"),s(!1));var t=BkConnectionManager.lk();3!=BkConnectionManager.jn&&t?BkGlobal.Ti?(logMessage("onPing -> send ping packet - do nothing"),(t=new BkPacket).zc(Uh),BkConnectionManager.send(t)):logMessage("tab inActive -> don't send ping"):(logMessage("onFinishPing or isOpenConnection: "+t),BkConnectionManager.vw(),BkConnectionManager.sr())},dV:function(){this.fi(),this.fp()},fi:function(){logMessage("unSchedulePing"),t();var e=getCurrentScene();null!=e&&e.unschedule(this.AC)},xS:function(){if(BkConnectionManager.jn=0,this.fi(),this.fp(),BkGlobal.Sa==T){var t=getCurrentScene();null!=t&&t.schedule(this.AC,8,2)}},n6:function(){this.Sk(),this.fi(),this.Db==dk&&this.fp()},jj:function(e){function i(){logMessage("onOKClick : renewConnection"),s(!1),n.fk()}logMessage("renewConnection"),t();var n=this;this.Sk(),this.fi(),this.Db==dk&&this.fp(),logMessage("CONECTION_STATE.RELOGIN"),this.Db=ya,isWebPlatform()?showPopupMessageConfirmEx(e,i):showPopupMessageWith(e,"",null,i)},vw:function(){BkConnectionManager.kn=0;var t=getCurrentScene();null!=t&&t.schedule(this.sr,5,2)},fp:function(){var t=getCurrentScene();null!=t&&t.unschedule(this.sr)},sr:function(){BkConnectionManager.fi(),BkConnectionManager.kn++,s(!1),BkConnectionManager.cE(),logMessage("onReconnect "+BkConnectionManager.kn),3<=BkConnectionManager.kn?(logMessage("finish reconnect"),BkConnectionManager.kn=0,BkConnectionManager.jj(ka)):(logMessage("onReconnect"),BkGlobal.Sa==T&&this.Db!=ya&&BkGlobal.Sa==T&&(logMessage("Reconnecting...."),BkConnectionManager.fk(),BkConnectionManager.Db=dk))},QS:function(){if(logMessage("sendReconnetPacket"),null==BkGlobal.P)logMessage("user null -> can't make new connection");else{var t=new BkPacket;t.PF(BkGlobal.P.userName,BkGlobal.P.password),BkConnectionManager.send(t)}},ur:function(){logMessage("onReconnectSuccess -> send SYNS"),t(),BkConnectionManager.fp(),BkLogicManager.oa().ur()},RO:function(){this.Sk(),this.fi(),BkGlobal.Sa!=T?this.jj(ka):this.vw()},LO:function(){this.Sk(),this.fi(),this.bv=!0,this.lk()?this.jj("Phải khởi tạo lại kết nối do bạn ở trong phòng quá lâu mà không chơi "):this.jj("Phải đồng bộ lại dữ liệu do bạn bị mất kết nối quá lâu!")},JO:function(){BkGlobal.Sa!=T?this.jj("Khởi tạo lại kết nối do không đồng bộ được dữ liệu với server!"):this.dg()},eP:function(){function t(){console.log("onTerminate - registerCancel")}function e(){isWebPlatform()?eb():cc.game.restart()}function i(){n.Db=hk,n.SA=!0,s(2),window.setTimeout((function(){BkLogicManager.S().Qt()}),2e3)}logMessage("onTerminate"),this.Sk(),this.fi(),this.dg(),Aa(),za(D.He),cc.screen.fullScreen()&&exitFullScreen();var n=this;showPopupMessageWithDynamicButton(e,(function(){console.log("registerClick");var e=new BkDialogWindow("",tl);e.Qq=!0,e.So("Thông tin tài khoản mới sẽ ghi đè lên tài khoản hiện tại.\n\nBạn muốn đăng ký tài khoản mới không?",28),e.Hw(i),e.ED(t),e.Cc(!1),e.show()}),e)},dg:function(){this.gB=!0,null!=this.Ue&&(this.Ue.dg(),this.Ue=null)},wQ:function(){this.dg(),za(D.He),showPopupMessageWith("Tài khoản của bạn đang bị khóa.\nXin hãy liên hệ với fanpage Ziga để biết thêm chi tiết.","",(function(){logMessage("onOKClick processNetworkLockedClient"),top.location.href="https://zigavn.com/quy-dinh#10-quy-dinh-ve-xu-ly-vi-pham"}))},IP:function(e){switch(this.fi(),e.Type){case cf:this.Db=ck,this.ur();break;case ie:this.Db=ek,t(),this.jj(ka);break;case Fh:logMessage("NETWORK_MAKE_NEW_CONNECTION_SUCCESS"),this.Db=ck,t(),null!=this.$q&&(logMessage("resend last packet with type"+this.$q.Type),this.send(this.$q));break;case Gh:logMessage("NETWORK_MAKE_NEW_CONNECTION_FAILED"),t(),this.jj(ka);break;case fe:this.RO();break;case ge:this.JO();break;case je:this.eP();break;case mh:this.LO();break;case Vh:this.wQ()}},NA:function(t){function e(){logMessage("onHideClick"),isNative()&&n.rb(bd),BkConnectionManager.Mo(N,O,Qk)}function i(){BkGlobal.BE=t,BkConnectionManager.zn(1)}t=void 0===t?sc:bb,isNative()&&n.rb(cd),isFBInstantGame()&&!SHOW_INSTANT_ADS_FLAG?showPopupMessageWith(on,"",i,e):showPopupMessageWith(nn,"",i,e)},zn:function(t){logMessage("getFullScreenAdsSetting adsContinueShowFlg: "+BkGlobal.hy),t=void 0===t?0:t;var e=new BkPacket;e.zn(t),this.send(e)},yn:function(t){var e=new BkPacket;e.yn(t),this.send(e)},Mo:function(t,e,i){var n=new BkPacket;n.aJ(t,e,i),this.send(n)},Yh:function(t,e){isWebPlatform()?vn.nE():(isFBInstantGame()&&BKFbAdsManager.RT(),logMessage("showFullScreenAds -> adsPartner: "+t+" - adsCategory: "+e),e==M?(BkGlobal.gC=t,0<=BkGlobal.nn&&(logMessage("showFullScreenAds -> show partner: "+BkGlobal.nn),t=BkGlobal.nn)):e==O&&(BkGlobal.hC=t,0<=BkGlobal.on&&(logMessage("showFullScreenAds -> show partner: "+BkGlobal.on),t=BkGlobal.on)),logMessage("showFullScreenAds adsPartner:"+t+" adsCategory: "+e),BkGlobal.KB=t,BkGlobal.JB=e,s(),t==N?e==M?n.ZT():e==O&&n.nU():t==Za?e==M?n.ST():e==O&&n.TT():t==$a&&(e==M?n.eU():e==O&&n.fU()),logMessage("show fullscreen ads -> off am thanh"),pauseNhacNenSound())},kU:function(t,e,i,s){if(logMessage("showPopupInviteViewFullScreenAds start function - adsShowType: "+t),t==Hk)isWebPlatform()?vn.Ww():(BkGlobal.Qg=!1,this.Yh(i,s));else{var r=this;t=function(){BkGlobal.Qg=!1,isWebPlatform()?vn.Ww():r.Yh(i,s)},logMessage("showPopupInviteViewFullScreenAds after cbFunc");var o=function(){logMessage("onHideClick"),isWebPlatform()||n.rb(bd),BkConnectionManager.Mo(N,O,Qk)};isWebPlatform()?(logMessage("showPopupInviteViewFullScreenAds - isWebPlatform process confirm."),showPopupConfirmWith(e,"",t,o)):(logMessage("showPopupInviteViewFullScreenAds - mobile process confirm."),showPopupMessageWith(e,"",t,o))}},gU:function(t){logMessage("showMessageAdsFullScreenOff: "+t);var e=mn;0<t&&(e=qn(ln,[t])),showPopupMessageWith(e)},Pm:null,gO:function(e){var i=e.O.readByte();if(logMessage("NETWORK_ADS_FULL_SCR_CONTROL: "+i),i==Nk)if(0==e.O.readByte())logMessage("off ads fullscreen"),i=-1,e.O.La()&&(i=e.O.readByte()),this.gU(i);else{i=e.O.readByte(),logMessage("onAdsFullScreenControl - adsShowType: "+i);var n="";i==Ik&&(n=e.O.da());var s=e.O.readByte();e=e.O.readByte(),this.kU(i,n,s,e)}else i==Mk?(logMessage("remove anim"),t(),i=e.O.readInt(),e=e.O.readByte(),BkGlobal.hy=e,logMessage("heartCtn: "+i+" adsContinueShowFlg:"+e),BkLogicManager.S().Tk(i,bc),null!=this.Pm&&(this.Pm(),this.Pm=null)):i==Ok&&(t(),BkGlobal.Sa==T&&BkLogicManager.oa().Ir())},GT:function(t,e){if(!isFBInstantGame()){var i=n.HK();logMessage("show ads banner "+e+" - crBanerAdspartner: "+i+" - partner: "+t),i!=t&&(logMessage("dang k show ads hoac da dang show banner cua partner khac"),t==N?n.Nw():t==Za?n.Qw():t==$a&&n.Sw()),n.rb(Cc),0<e&&n.gH(e)}},Ow:function(){isFBInstantGame()||(logMessage("showAdsBannerStartGame: "+BkGlobal.Yg),0>BkGlobal.Yg||(BkGlobal.Yg==N?n.Nw():BkGlobal.Yg==Za?n.Qw():BkGlobal.Yg==$a&&n.Sw()))},mC:function(){isFBInstantGame()||(logMessage("offAdsBannerFinishGame: "+BkGlobal.Yg),0>BkGlobal.Yg||n.Tj())},hO:function(t){var e=t.O.readByte(),i=t.O.readByte(),s=0;0!=i&&(s=t.O.readByte()),logMessage("NETWORK_ADS_SERVER_PUSH subEventCode:"+e+" adsType:"+i+" partner:"+s),e==Kk?isFBInstantGame()||isWebPlatform()||(1==i?cc.sys.os==cc.sys.OS_ANDROID?BkGlobal.Yg=s:cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(e=-1,t.O.La()&&(e=t.O.readInt()),this.GT(s,e)):0==i&&(n.Tj(),BkGlobal.Yg=-1,logMessage("off ads banner"))):e==Lk&&(0==i?isNative()&&n.Tj():isFBInstantGame()?BKFbAdsManager.I5():(BkGlobal.Qg=!0,this.Yh(s,i)))},zP:function(t){switch(t.Type){case Bi:this.gO(t);break;case Ci:this.hO(t)}},mE:function(){logMessage("showIndicatorChangeNetwork")},DC:function(t){BkGlobal.Ll=!0,-42!=t.Type&&46!=t.Type&&logMessage("onReceive: "+t.toString()),this.Db!=ck&&(this.Db=ck),BkGlobal.Xq?(logMessage("nhan event khi dang chuyen scene-> queue Event -> queueEvent"),t.oB=!0,this.iD(t)):(this.Sk(!1),BkGlobal.Sa==T&&this.xS(),BkLogicManager.Vb(t.Type)?this.iD(t):this.dD(t))},hb:function(){if(null==this.Gf&&(this.Gf=[],this.Kh=!1),logMessage("processNextEventInQueue "+this.Gf.length),0<this.Gf.length){this.ar=J(),this.Kh=!0;var t=this.Gf.shift();logMessage("process Packet with Type: "+t.Type+" - time: "+this.ar),this.dD(t),t.oB&&(logMessage("la event dc queue khi chuyen scene"),BkLogicManager.Vb(t.Type)?logMessage("la event dc queue trong ingame -> se dc call next event sau khi xu ly xong event"):(logMessage("k phai event dc queue trong ingame -> auto call event"),this.hb()))}else this.Kh=!1;this.Kh?this.vS():this.RE()},en:function(){null!=this.Gf&&(this.Gf=[],this.Kh=!1)},ZO:function(){BkGlobal.AB||this.hb()},wK:function(){if(BkGlobal.Ti){var t=J()-this.ar;logMessage("deltaTime "+t);var e=1e4;BkGlobal.ja==H&&(e=3e4),t>e&&(logMessage("tac queue -> auto call process next event"),this.hb())}else logMessage("tab inactive -> don't forceProcessPacket")},iD:function(t){for(null==this.Gf&&(this.Gf=[],this.Kh=!1),this.Gf.push(t),logMessage("isProcessing: "+this.Kh),t=0;t<this.Gf.length;t++);if(BkGlobal.Ti)BkGlobal.Xq?logMessage("dang chuyen scene -> k processPacket"):this.Kh?this.wK():this.hb();else if(logMessage("tab in active -> only queue event"),30<this.Gf.length){logMessage("tab in active long time -> show popup & close connection");var e=this;showPopupMessageWith("Phải khởi tạo lại kết nối do bạn ở trong phòng quá lâu mà không chơi ","",(function(){logMessage("onOKClick queuePackage "),isWebPlatform()?(switchToSceneWithGameState(G,!1,!1),e.dg(),eb()):e.fw()}))}},RE:function(){var t=getCurrentScene();null!=t&&t.unschedule(this.oC)},vS:function(){this.RE();var t=getCurrentScene();null!=t&&t.scheduleOnce(this.oC,5)},oC:function(){logMessage("warning: check it -> onAutoProcessPacketInQueue: "+J()),BkConnectionManager.hb()},dD:function(t){if(BkGlobal.Sa==T){var e;this.QE();t:{switch(t.Type){case $e:case We:case Jh:case Ne:case Eh:case Fe:case Me:case ze:case ue:case ye:case af:case pe:case Ee:case Re:case yf:case zf:case Kg:case Ff:case Kf:case vg:case xg:case Dg:case gh:case Lg:case Qg:case lh:case Cf:case Oe:case ai:case li:case te:case xe:case Gf:e=!0;break t}e=!1}if(e&&0>BkLogicManager.oa().vV(t))return logMessage("nhan sai goi tin -> reject packet"),void(BkLogicManager.Vb(t.Type)&&this.hb())}switch(console.log("processNextPackage : ["+t.Type+"]"),t.Type){case cf:case ie:case Fh:case Gh:case fe:case ge:case je:case mh:case Vh:this.IP(t);break;case Bi:case Ci:this.zP(t);break;case bi:case Hf:case Ei:BkLogicManager.S().ah(t);break;case pe:case If:case Jf:case Wf:case di:case ei:case fi:case te:case li:case Ef:case Jh:case ve:case xe:case Qe:case Re:case Se:case si:case Bg:case Cg:case ug:if(BkGlobal.Sa==T){if(t.Type==qe&&(BkGlobal.mk=!0),!BkGlobal.mk){logMessage("chua nhan dc event sysn -> reject packet"),BkLogicManager.Vb(t.Type)&&this.hb();break}BkLogicManager.oa().ah(t)}else BkLogicManager.S().ah(t);break;case ae:case Mf:case $f:case Sh:case Th:case Wh:this.Db=gk,BkLogicManager.S().ah(t);break;case $d:case gf:case ee:case sf:case $g:case kf:case le:case Yf:case qh:case Fg:case Hg:case Oh:case Ph:case Qh:case Og:case Vf:case bg:case dg:case fg:case gg:case ig:case Yh:case bh:case Jg:case Mg:case Pf:case jh:case ih:case th:case Wg:case eh:case yh:case Mh:case Ch:case Bh:case Dh:case ii:case ji:case ki:case Na:case fh:case Xg:case lg:case ng:case Tg:case pg:case tg:case xf:case Je:case Le:case qg:case uf:case oh:case Ye:case $e:case pf:case de:case Rh:case Pg:case Hh:case Xh:case mi:case hh:case rh:case ti:case Ai:case Gi:case oi:case xh:case $h:case pi:case yi:case zh:case jb:BkLogicManager.S().ah(t);break;case qe:case bf:case dh:case vh:case sh:case ke:case nh:case Eh:case Ne:case We:case nf:case Tf:case vf:case Rg:case Ug:case ff:case yg:case hi:case gh:case Qg:case Lg:case ne:case uh:case Kh:case Fe:case ue:case zf:case yf:case Kg:case Kf:case lh:case Lh:case ye:case Ff:case Dg:case Me:case ze:case af:case Ee:case Ce:case vg:if(BkGlobal.Sa!=T){logMessage("Not process event because not correct zone "+BkGlobal.Sa);break}if(t.Type==qe&&(BkGlobal.mk=!0),!BkGlobal.mk){logMessage("chua nhan dc event sysn -> reject packet & processNextEventInQueue"),BkLogicManager.Vb(t.Type)&&this.hb();break}BkLogicManager.oa().ah(t);break;default:-42!=t.Type&&46!=t.Type&&logMessage("BkConnectionManager not process packet with type: "+t.Type)}}},BkBaseLogic=cc.Class.extend({Xg:null,ctor:function(){},v3:function(){function t(){cc.loader.releaseAll(),eb()}logMessage("onerror "),cc.screen.fullScreen()&&(logMessage("is fullscreen -> exit fullscreen"),exitFullScreen()),isWebPlatform()?showPopupMessageConfirmEx("Khởi tạo lại kết nối do không đồng bộ được dữ liệu với server!",(function(){t()})):showPopupMessageWith("Khởi tạo lại kết nối do không đồng bộ được dữ liệu với server!","",t)},en:function(){BkConnectionManager.en()},hb:function(){BkConnectionManager.hb()},jb:function(t){this.Xg=t},Ha:function(t,e,i){null!=this.Xg?this.Xg.ud(t,e,i):logMessage("BkBaseLogic not push packet with type ="+e)},ah:function(t){if(logMessage("BkBaseLogic -> processNetworkEvent "+t.Type),t.Type===Xd);else logMessage("BkBaseLogic not process packet with type: "+t.Type)},Vb:function(){return!1}}),BkCommonLogic=BkBaseLogic.extend({nf:-1,kc:null,QU:null,mn:null,xa:null,iq:0,vs:null,x0:null,Wn:null,vd:null,tv:null,q1:null,I0:!1,eo:!1,P0:!1,fB:!1,ev:!1,i0:!1,TM:!1,CJ:null,ctor:function(){this._super(),this.vd||(this.vd=new BkPromotionInfo)},Vb:function(t){return t===mi},k_:function(t){var e=new BkPacket;e.Ty(t),BkConnectionManager.send(e)},Qt:function(){console.log("BkCommonLogic - doAutoRegLogin()"),BkConnectionManager.Db=isFBInstantGame()?jk:hk,BkConnectionManager.Ar()},JS:function(t){null==BkGlobal.P&&(BkGlobal.P=new BkUserData),BkGlobal.isLoginFacebook=!1;var e=Ki;if(cc.sys.os==cc.sys.OS_ANDROID){e=Li;0<(i=n.BK())&&(e=i)}else cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(e=Mi);logMessage("sendPacketAutoLogin with cpid: "+e);var i=new BkPacket,s=Ca();i.HF(e,s,"",t),BkConnectionManager.send(i)},QJ:function(t,e){s();var i=new BkPacket;i.nJ(t,e),BkConnectionManager.send(i)},lQ:function(e){logMessage("onJoinChanGameRoom"),t();var i=e.O.readByte(),n=e.O.readByte();logMessage("currentRoomID: "+i+" numberRoom: "+n),BkGlobal.wf=i;var s,r,o=[];for(s=0;s<n;s++)(r=new BkRoomData).percent=e.O.readByte(),r.Od=e.O.readByte(),logMessage("percent: "+r.percent+" roomID: "+r.Od),o.push(r);for(s=0;s<n;s++)if((r=o[s]).Od==i){var a=o[0];o[0]=r,o[s]=a}for(r=e.O.readByte(),logMessage("maxTable: "+r),r=Math.abs(r),a=[];e.O.La();){(s=new BkTableData).rg=e.O.readByte(),s.ac=e.O.readInt();var c=e.O.readByte(),h=e.O.readByte();s.Gm=1&h,s.Zn=0==(4&h)>>2,s.Xn=1==(8&h)>>3,s.yk=7&c,s.dj=(56&c)>>3,s.bk=(64&c)>>6,s.Ub=(128&c)>>7,a.push(s)}if(-1==this.nf||this.nf>=3*n)this.nf=0;else if(e=Math.floor(this.nf/3),logMessage("iSTT: "+e+" STTCurrentRoom: "+this.nf),c=o[e],logMessage("iSTT roomID: "+c.Od+" currRoomID: "+i),c.Od!=i){var l,u;for(s=0;s<n;s++)if((h=o[s]).Od==i){l=s,u=h;break}o[e]=u,o[l]=c}for(null==this.kc&&(this.kc=new BkLobbyRoomData),this.kc.SN=r,this.kc.DN=o,this.kc.IJ(),this.wf=i,i=[],s=0;s<r;s++)i.push(!1);for(n=0;n<a.length;n++)i[a[n].rg]=!0;for(n=0;n<r;n++)i[n]||((o=new BkTableData).rg=n,a.push(o));this.kc.EN=a,this.kc.JJ(),BkGlobal.Sa!=gj?(this.nf=0,switchToSceneWithGameState(gj)):(logMessage("BkGlobal.currentGS != GS.CHOOSE_TABLE | currentGS: "+BkGlobal.Sa),null!=(r=getCurrentScene())?r instanceof VvLobby?r.lE():logMessage("crScene not instanceof  BkLobby -> error recheck!!!!!!!!!!!"):logMessage("crScene == null"))},dc:function(){return getCurrentScene()},rZ:function(){s();var t=new BkPacket;t.zc(tf),BkConnectionManager.send(t)},nZ:function(t){this.mn=t;var e=new BkPacket;e.DF(t),BkConnectionManager.send(e)},oG:function(t){var e=new BkPacket;e.vj(Zg,t),BkConnectionManager.send(e)},pG:function(t){var e,i=t.O.readByte();if(0<i)for(e=0;e<i;e++)t.O.readByte(),t.O.readByte();this.rG(1)},rG:function(t){var e=new BkPacket;e.vj(Ue,t),BkConnectionManager.send(e)},sG:function(t){t.O.readByte(),t.O.readByte(),this.nG()},nG:function(){var t=new BkPacket;t.zc(lf),BkConnectionManager.send(t)},tG:function(t){t=t.O.readByte(),logMessage("goes here"+t),this.YJ(1)},YJ:function(t,e){s(),t>FAKE_TABLE_ID&&(t-=FAKE_TABLE_ID);var i=new BkPacket;i.tF(t,e),BkConnectionManager.send(i)},$W:function(){var t=new BkPacket;t.zc(Xe),BkConnectionManager.send(t)},oZ:function(){var t=new BkPacket,e=Ca();t.Wy(BkGlobal.P.userName,BkGlobal.P.password,e),BkConnectionManager.send(t)},TJ:function(t,e,i){if(null==t||null==e)logMessage("doLoginGame Username is null ");else{null==BkGlobal.P&&(BkGlobal.P=new BkUserData);var n=new BkPacket;n.Wy(t,e,i),BkConnectionManager.send(n)}},bD:function(t){var e=J()/1e3;logMessage("processHeartCountdownTime convertToLocalTime24h: "+tn(1e3*e)+" countdownTime: "+t),BkGlobal.P.ck=-1==t?-1:e+t},PO:function(t){logMessage("LOG_IN_SUCCESS -> clear all queue event"),BkGlobal.Yg=-1,p("UpdatedDFNhacNenOff",0)||(jm(0),u("UpdatedDFNhacNenOff",1)),playNhacNenSound(),BkConnectionManager.en(),BkGlobal.Ll=!0;var e,i=BkGlobal,s=p("lastLoginTime",0);e=J(),s=tn(s).substr(0,10),e=tn(e).substr(0,10),logMessage("dateLastLoginTime: "+s),logMessage("dateCurrentTime: "+e),s===e?(logMessage("same day -> !isFirstLoginInDay"),e=!1):(logMessage("diffirent day -> isFirstLoginInDay"),e=!0),i.XA=e,BkGlobal.jo=!0,processLoginRegistSuccessEx(),BkConnectionManager.Db=ck,this.fB=!0,e=t.O.da();s=t.O.da();var r=t.O.da(),o=t.O.readInt(),a=t.O.readInt(),c=t.O.readByte(),h=-1,l=-1;0<=c?h=t.O.readByte():l=t.O.readInt();var d=t.O.readInt(),_=t.O.readInt(),g=t.O.readByte(),f=t.O.readByte();i=t.O.readByte();null==BkGlobal.P&&(BkGlobal.P=new BkUserData),BkGlobal.no=g,BkGlobal.hk=f,BkGlobal.fo=f,console.log("onLoginSuccess - BkGlobal.isFbLinkable: ",BkGlobal.fo),cc.username=e,cc.password=s,BkGlobal.P.Mb(o),BkGlobal.P.yd(e),BkGlobal.P.Zp=Ca(),BkGlobal.P.password=s,BkGlobal.P.cf(r),BkGlobal.P.ID(d),BkGlobal.P.JD(_),this.bD(a),BkGlobal.P.gh=c,BkGlobal.P.cd=h,BkGlobal.P.vm=l,0<=BkGlobal.P.vm&&(BkGlobal.P.fx=Math.floor(J()/1e3)+BkGlobal.P.vm),BkLogicManager.Ew(null),n.rb(uc,null),n.rb.bind(n,uc),0<BkGlobal.P.cd&&u(an,BkGlobal.P.cd),logMessage("loadSettingFromLocalStorage"),cc.sys.os==cc.sys.OS_ANDROID&&(hd=p(qm,hd),jd=p(sm,jd),kd=p(um,kd),ld=p(wm,ld),md=p(Cm,md),nd=p(Em,nd),rd=p(Qm,rd),qd=p(Om,qd),pd=p(Mm,pd)),cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(id=p(rm,id),sd=p(tm,sd),td=p(vm,td),ud=p(xm,ud),vd=p(Dm,vd),wd=p(Fm,wd),Ad=p(Rm,Ad),zd=p(Pm,zd),yd=p(Nm,yd)),Si=p(Ym,Si),Ti=p(Zm,Ti),Ui=p($m,Ui),Vi=p(bn,Vi),Wi=p(cn,Wi),Zi=p(en,Zi),Yi=p(dn,Yi),logMessage("Login info: dailyBonus false bonusType 0 money "+o+" name: "+e+" isReanamable: "+g+" isConnectedFB: "+f),e={username:e,password:s,isLoginFacebook:BkGlobal.isLoginFacebook},cc.DR?S(D.He,JSON.stringify(e)):za(D.He),e=JSON.stringify(e),bk.sessionStorage.setItem(D.He,e.toString()),1==i?(logMessage("isInGameCheck"),BkGlobal.ja=t.O.readByte(),BkGlobal.wf=t.O.readByte(),BkGlobal.Rj=t.O.readByte(),this.pR(t),logMessage("is ingame process"),BkGlobal.mk=!1,switchToSceneWithGameState(T,!1,!1),BkLogicManager.Lu()):(isFBInstantGame()&&(t=p("loginCount",0),cc.isNumber(t)&&(3==t&&BkFbInstant.createShortcut(),u("loginCount",t+1))),BkGlobal.Sa!=P?switchToSceneWithGameState(P):switchToSceneWithGameState(P,!1,!1))},pR:function(t){var e=1==t.O.readByte(),i=1==t.O.readByte();t=1==t.O.readByte(),BkGlobal.P.Rs=-1,BkGlobal.VA=e,BkGlobal.VM=t,BkGlobal.mB=i,BkUserClientSettings.$V(i)},i3:function(){this.$F()},wU:function(){if(isWebPlatform()){var t=cc.game.config.app.G3,e=cc.game.config.app.D3,i=cc.game.config.app.F3;bk.isFbApp&&(i=cc.game.config.app.kR);var n=cc.game.config.app.E3,s=p(t="promo"+t,{timestamp:0,promoCtn:0});if(null==i||""==i)0<s.Yv&&za(t);else if(null!=e&&""!=e&&null!=n&&""!=n&&!(3<=s.Yv)){var r=s.timestamp,o=J(),a=Math.floor((o-r)/1e3);86400>a||(logMessage("lastTimeGetSetting "+r+" deltaTime "+a+" curentTime "+o),new xn(e,i,n).Oa(),s.Yv+=1,s.timestamp=J(),u(t,s))}}},xq:function(){var t=new BkPacket;t.zc(qi),BkConnectionManager.send(t)},$F:function(){var t=new BkPacket;t.zc(ph),BkConnectionManager.send(t)},Cx:function(t){logMessage("DoGetProfilePlayer "+t),this.xa=new BkUserData,this.xa.userName=t;var e=new BkPacket;e.mp(t,Xf),BkConnectionManager.send(e)},QO:function(t){var e=0,i=0,n=0,s=0;t.O.La()&&(e=t.O.readByte(),i=t.O.da(),t.O.La()&&(n=t.O.readInt()),t.O.La()&&(s=t.O.readByte())),BkGlobal.P.UD(e),BkGlobal.P.AT(n),BkGlobal.P.cT(s),BkGlobal.P.cf(i),this.iq=s,this.hj(),logMessage("numberOfUnreadMails: "+e+" avatarId: "+i+" numberOfUnreadEvent: "+n+" dropWordWeekIndex: "+s),this.Cx(BkGlobal.P.userName)},XO:function(t){this.xa.ye=t.O.readInt(),this.xa.Hb=t.O.da(),this.xa.zz=t.O.da(),this.xa.Dz=t.O.readByte(),this.xa.pz=t.O.da(),this.xa.oy=t.O.Ek(),this.xa.vA=t.O.da(),this.xa.status=t.O.da(),this.xa.userName==BkGlobal.P.userName&&(BkGlobal.P.cf(this.xa.Hb),BkGlobal.P.Mb(this.xa.ye),this.Is(this.xa.userName,Cb)),logMessage("name "+this.xa.userName+" money: "+this.xa.ye+"- avID: "+this.xa.Hb+"- fullname: "+this.xa.zz+"- gender: "+this.xa.Dz+"- email:"+this.xa.pz+"- bird: "+this.xa.oy+"- address: "+this.xa.vA+"- status: "+this.xa.status),this.Ha(this.xa,t.Type),this.hj()},ud:function(e,i){switch(BkLogicManager.S().jb(null),console.log(i),console.log(e),i){case Mf:case Wh:BkGlobal.Yn=!1}t()},hj:function(t){logMessage("processUpdateProfileUI "+t),this.dc()instanceof hb?this.dc().kf(BkGlobal.P,t):logMessage("gui not instanceof BkChooseGame and BkLobby-> don't process update UI user profile")},LW:function(t){var e=new BkPacket;e.mp(t,Zh),BkConnectionManager.send(e)},UO:function(t){for(null==this.xa&&(logMessage("this.oUser == undefined"),this.xa=new BkUserData);t.O.La();){logMessage("parse data player achievement "+this.xa.userName),this.xa.ya=t.O.readByte(),this.xa.Cm=t.O.readInt(),this.xa.vq=t.O.readInt(),this.xa.cC=t.O.readInt(),this.xa.ny=t.O.readInt(),this.xa.aO=t.O.readInt(),this.xa.e3=t.O.readInt();var e=t.O.readInt();2147483647!=e&&(e+=1),this.xa.Ta=e,this.xa.px=t.O.readInt(),this.xa.du=t.O.readInt(),this.xa.ww=t.O.readInt(),logMessage("this.oUser.winCount "+this.xa.Cm)}this.Ha(this.xa,t.Type)},Is:function(t,e,i){var n=new BkPacket;n.mp(t,Gg,e),BkConnectionManager.send(n),null!=i&&(this.xa=i)},VO:function(t){for(var e=[],i=t.O.readByte();t.O.La();){var n=new BkItemDetail;n.o1=i,n.Ui=t.O.readByte(),n.zG=t.O.Ek(),logMessage("b2: "+n.Ui+" RemainingDate:"+n.zG),e.push(n)}if(i==Cb)this.xa.Ph=e,this.xa.PG(),this.xa.userName==BkGlobal.P.userName&&(BkGlobal.P.Ph=e,null==BkGlobal.P.gr&&this.Is(this.xa.userName,Db));else if(i==Db)this.xa.gr=e,this.xa.userName==BkGlobal.P.userName&&(BkGlobal.P.gr=e,null==BkGlobal.P.fr&&this.Is(this.xa.userName,Eb));else if(i==Eb&&(this.xa.fr=e,this.xa.userName==BkGlobal.P.userName)){BkGlobal.P.fr=e;for(var s=n=i=0,r=0,o=0;o<e.length;o++){var a=e[o];26==a.Ui&&(i=1),33==a.Ui&&(n=1),34==a.Ui&&(s=1),35==a.Ui&&(r=1)}BkGlobal.P.OD(i),BkGlobal.P.hT(n),BkGlobal.P.iT(s),BkGlobal.P.gT(r)}this.Xg&&this.Xg.ud&&this.Xg.ud(e,t.Type)},qZ:function(t,e){var i=new BkPacket;i.DW(t,e),BkConnectionManager.send(i)},XP:function(t){var e=this.PK(t);this.Ha(e,t.Type),ib(jb)},SP:function(t){for(;t.O.La();)var e=t.O.da();this.Ha(e,t.Type)},PK:function(t){for(var e=[],i=0,n=0,s=0,r="",o=0,a=0;t.O.La();){i=1==t.O.readByte(),n=t.O.readByte(),s=t.O.readInt(),r=t.O.da(),o=t.O.da(),a=t.O.readByte();var c=new BkUserData;c.Sr(i),c.Xh(s),c.yd(r),c.cf(o),c.Qr(a),c.om(!n),e.push(c)}return e},PQ:function(t){var e=[];t.wG(e),this.Ha(e,t.Type)},mQ:function(t){var e={YA:-1,DZ:-1};t.cG(e),0==e.YA||-1==e.ya?showToastMessage("Người chơi đã thoát khỏi bàn.",cc.director.getWinSize().width/2,cc.director.getWinSize().height/2,null,220):showToastMessage("Không vào được bàn chơi, xin hãy thử lại.",cc.director.getWinSize().width/2,cc.director.getWinSize().height/2,null,250)},uQ:function(t){var e={QN:0,Np:0};e.QN=t.O.readByte(),e.Np=t.O.readInt(),0<e.Np&&(BkGlobal.P.Mb(BkGlobal.P.pb()+e.Np),this.hj(e.Np)),this.Ha(e,t.Type)},St:function(){isWebPlatform()?E.ly():isFBInstantGame()?BkFbInstant.y0():(BkLogicManager.S().Iz(),n.Tt(mc))},Iz:function(){var t=new BkPacket;t.IF(),BkConnectionManager.send(t)},PP:function(t){if(0<(t=t.O.readInt()))if(isWebPlatform()){if(BkGlobal.Sa==T){var e=BkLogicManager.oa().Ba();null!=e&&BkLogicManager.oa().zf(e,t*Cl(),"")}else BkGlobal.P.Mb(BkGlobal.P.pb()+t*Cl()),this.hj(t*Cl());this.TQ(t)}else this.Tk(t,hc);else showToastMessage("Bạn đã nhận thưởng cho lời mời này rồi")},m3:function(t){null!=t.qG()&&E.ky((function(t){console.log(t);var e=new BkPacket;e.yw(E.te,t,this.vs,t),BkConnectionManager.send(e)}))},QP:function(t){var e=this;E.ky((function(i){e.yw(t,i)}))},yw:function(t,e){if(null!=e&&null!=e&&0!=e.length&&!isFBInstantGame()){var i=new BkPacket;i.eJ(t,e,this.vs),BkConnectionManager.send(i)}},tS:function(t){this.vs=t.O.readByte()},TQ:function(t){showToastMessage("Bạn được cộng thêm "+t*Cl()+" "+pn()+" vào tài khoản",cc.winSize.width/2,cc.winSize.height/2)},P5:function(t){new BkPromotionWd(t).Oa()},sL:function(t){var e=0;if(null==t||0==t.length)return 0;for(var i=0;i<t.length;i++){var n=t[i];n.OE!=n.az||n.ZA||e++}return e},O5:function(t){var e=this;""!=t&&showPopupConfirmWith(t,"",(function(){e.vd.xB?((new VvPaymentWindow).Oa(),logMessage("initPaymentWD")):e.vd.uB?BkLogicManager.S().yO():e.vd.yB&&((new VvRegisterPhoneNumberWindow).Oa(),logMessage("initRegisterPhoneNumberWD"))}),null,(function(){e.vd.xB?e.vd.NU++:e.vd.uB?e.vd.MU++:e.vd.yB&&e.vd.OU++}))},R5:function(){var t=BkLogicManager.oa().WK();if(logMessage("showPromotionKick "+t),t!=PLAYER_LEAVE_GAME){var e=this,i=function(){e.Dw(!1)};switch(t){case OWNER_KICK:case RUN_OUT_OF_CASH_KICK:case LOW_CASH:e.Dw(!0),BkGlobal.P.pb()>=MIN_MONEY_SALE?(logMessage("STR_INVITE_BUY_UNKICKABLE"),showPopupConfirmWith("Bạn vừa bị đuổi khỏi bàn.\nBạn có muốn mua bảo bối chống đuổi để không thể bị đuổi?","",(function(){logMessage("showInviteBuy"),e.dc().L5(i)}),i,i)):showPopupMessageWith("Bạn vừa bị đuổi khỏi bàn.","",i,i);break;case TIME_OUT_KICK:case UNREADY_TIMEOUT:e.Dw(!0),showPopupMessageWith("Bạn bị đuổi do hết thời gian chờ.","",i,i)}BkLogicManager.oa().Rr(PLAYER_LEAVE_GAME)}},JP:function(t){var e={};e.eZ=t.O.da(),e.dZ=t.O.da(),e.e6=t.O.da();var i,n=t.O.readByte(),s=[],r=[],o=-1;if(t.O.La()){for(i=0;i<n;i++)o=t.O.readByte(),s.push(o);for(n=t.O.readByte(),i=0;i<n;i++)o=t.O.readByte(),r.push(o);if(t.O.La()){for(o=[],n=t.O.readByte(),i=0;i<n;i++){(a={}).e4=t.O.da(),a.content=t.O.da(),a.b2=t.O.readInt(),a.c2=t.O.readInt(),o.push(a)}e.yU=o}else e.yU=null}if(e.D6=s,e.E6=r,s=0,t.O.La()){for(r=t.O.readByte(),o=[],i=0;i<r;i++)n=t.O.readInt(),o.push(n);for(e.M1=o,o=[],n=[],i=0;i<r;i++)a=t.O.readInt(),o.push(a),a=t.O.readInt(),n.push(a);for(e.kF=t.O.readInt(),e.J1=o,e.G1=n,o=[],n=[],i=0;i<r;i++){var a=t.O.readInt(),c=t.O.readInt();o.push(a),n.push(c)}for(e.mF=t.O.readInt(),e.L1=o,e.I1=n,o=[],n=[],i=0;i<r;i++)a=t.O.readInt(),c=t.O.readInt(),o.push(a),n.push(c);e.K1=o,e.H1=n,e.lF=t.O.readInt(),e.jF=t.O.readInt(),e.lW=t.O.readInt(),e.nF=t.O.readInt(),s=Math.max(s,e.kF,e.mF,e.lF,e.jF,e.nF)}BkGlobal.sP=s,this.FV(),this.Ha(e,t.Type)},Dw:function(t){this.vd.yR=t},w3:function(t,e){var i=new BkPacket;i.ZI(t,e),BkConnectionManager.send(i)},MK:function(t){var e=[];for(t.O.readByte();t.O.La();){var i=t.O.readByte(),n=t.O.readInt(),s=t.O.readInt(),r=t.O.readInt(),o=1==t.O.readByte(),a=t.O.da(),c=new BkDailyTaskData;c.y4(i,n,s,r,o,a),e.push(c)}return e},VP:function(t){var e=t.O.readByte(),i=t.O.readByte(),n=t.O.readByte(),s=t.O.readInt(),r=-1;t.O.La()&&(r=t.O.readByte()),logMessage("nextAdsRewardsTime: "+r);var o={};o.ko=e,o.Nm=i,o.Om=n,o.yo=s,o.xo=r,logMessage("obj.nextAdsRewardsTime: "+o.xo),this.Ha(o,t.Type)},LK:function(t){var e=new BkDailyTaskData,i=t.O.readByte(),n=t.O.readInt(),s=t.O.readByte(),r=t.O.readInt(),o=t.O.readInt(),a=t.O.readInt(),c=1==t.O.readByte();return t=t.O.da(),e.j4(i,n,s,r,o,a,c,t),e},q3:function(){var t=new BkPacket;t.zc(ag),BkConnectionManager.send(t)},$P:function(t){var e=[];t.Dx(1,e),this.Ha(e,t.Type)},r3:function(){var t=new BkPacket;t.zc(cg),BkConnectionManager.send(t)},aQ:function(t){var e=[];t.Dx(2,e),this.Ha(e,t.Type)},A3:function(t,e,i){var n=new BkPacket;n.TF(t,e,i),BkConnectionManager.send(n)},QQ:function(t){this.Ha(null,t)},p3:function(t){var e=new BkPacket;e.AF(t),BkConnectionManager.send(e)},bQ:function(t){var e=new BkMailInfo;t.dG(e),this.Ha(e,t.Type)},l3:function(t){var e=new BkPacket;e.xF(t),BkConnectionManager.send(e)},o3:function(t){var e=new BkPacket;e.zF(t),BkConnectionManager.send(e)},ZP:function(t){var e={fG:null,ZF:null,iG:null};t.mG(e),this.Ha(e,t.Type)},j3:function(t){var e=new BkPacket;e.uF(t),BkConnectionManager.send(e)},GP:function(t){var e={HB:0};t.lG(e),this.Ha(e.HB,t.Type)},FP:function(t){var e={reason:null};t.jG(e),this.Ha(e.reason,t.Type)},iz:function(t){s(),this.mn=t;var e=new BkPacket;e.oJ(t),BkConnectionManager.send(e)},NO:function(e){logMessage("onJoinWebGameRoom"),t(),BkGlobal.ja=this.mn;var i=e.O.readByte(),n=e.O.readByte();logMessage("currentRoomID: "+i+" numberRoom: "+n+" currentGameID: "+BkGlobal.ja+" crGame: "+this.mn),BkGlobal.wf=i;var s,r,o=[];for(s=0;s<n;s++)(r=new BkRoomData).percent=e.O.readByte(),r.Od=e.O.readByte(),logMessage("percent: "+r.percent+" roomID: "+r.Od),o.push(r);for(s=0;s<n;s++)if((r=o[s]).Od==i){var a=o[0];o[0]=r,o[s]=a}for(r=e.O.readByte(),logMessage("maxTable: "+r),r=Math.abs(r),a=[];e.O.La();){(s=new BkTableData).rg=e.O.readByte(),s.ac=e.O.readInt();var c=e.O.readByte();s.yk=7&c,s.dj=(56&c)>>3,s.bk=(64&c)>>6,s.Ub=(128&c)>>7,a.push(s)}for(e=[],s=0;s<r;s++)e.push(!1);for(s=0;s<a.length;s++)e[a[s].rg]=!0;for(c=s=0;c<r;c++)if(!e[c]){var h=new BkTableData;h.rg=c,h.dj=getMaxPlayer(BkGlobal.ja),a.push(h),s++}if(-1==this.nf||this.nf>=3*n)this.nf=0;else if(e=Math.floor(this.nf/3),logMessage("iSTT: "+e+" STTCurrentRoom: "+this.nf),c=o[e],logMessage("iSTT roomID: "+c.Od+" currRoomID: "+i),c.Od!=i){var l,u;for(s=0;s<n;s++)if((h=o[s]).Od==i){l=s,u=h;break}o[e]=u,o[l]=c}a.sort((function(t,e){return e.ac-t.ac})),null==this.kc&&(this.kc=new BkLobbyRoomData),this.kc.SN=r,this.kc.DN=o,this.kc.IJ(),this.kc.EN=a,this.kc.JJ(),logMessage("switchToSceneWithGameState(GS.CHOOSE_TABLE)"),BkGlobal.Sa!=gj?(this.nf=0,switchToSceneWithGameState(gj)):(logMessage("BkGlobal.currentGS != GS.CHOOSE_TABLE | currentGS: "+BkGlobal.Sa),null!=(i=getCurrentScene())?i instanceof VvLobby?i.lE():logMessage("crScene not instanceof  BkLobby -> error recheck!!!!!!!!!!!"):logMessage("crScene == null")),S(D.LB,BkGlobal.ja)},cX:function(t){t.Od!=BkGlobal.wf?this.QJ(BkRoomTypeUtils.P_(t.Od),t.Od):this.dc().lE()},z3:function(t){var e=new BkPacket;e.SF(t),BkConnectionManager.send(e)},O2:function(t){if(null==this.kc)logMessage("onReceive packet before receiving packet get list table -> reject packet");else{var e=t.O.readByte();t=t.O.readByte(),this.kc.H6(e,t),this.dc()instanceof VvLobby?this.dc().mX(e,t):logMessage("BkLobby not onEnterTransitionDidFinish -> reject packet")}},N2:function(t){if(null==this.kc)logMessage("onReceive packet before receiving packet get list table -> reject packet");else{var e=t.O.readByte();t=t.O.readByte(),this.kc.L6(e,t),this.dc()instanceof VvLobby?this.dc().lX(e,t):logMessage("BkLobby not onEnterTransitionDidFinish -> reject packet")}},M2:function(t){if(null==this.kc)logMessage("onReceive packet before receiving packet get list table -> reject packet");else{var e=new BkTableData;e.rg=t.O.readByte(),e.ac=t.O.readInt();var i=t.O.readByte();e.Gm=t.O.readByte(),e.yk=7&i,e.dj=(56&i)>>3,e.bk=(64&i)>>6,e.Ub=(128&i)>>7,logMessage("onTableSettingUpdatePush: "+e.toString()),this.kc.O6(e),this.dc()instanceof VvLobby?this.dc().nX(e):logMessage("BkLobby not onEnterTransitionDidFinish -> reject packet")}},bX:function(t){var e,i=t.O,n=i.readInt(),s=i.readInt(),r=i.readInt()+1,o=i.readByte(),a=i.readByte(),c=[];for(e=0;e<a;e++)c.push(i.readByte());for(e=CXuongCuocWindow.pL(c),logMessage("myVipLV:-1myLV: "+n+" myPoint: "+s+" myPosition: "+r+" myAvar: "+o+" cuocCount: "+a+" myStringCuoc: "+e),(a=new BkUserData).yd(BkGlobal.P.userName),a.Mb(BkGlobal.P.pb()),a.cf(o),a.Xh(n),a.Jw(r),a.aE(s),a.HD(e),a.Rs=-1,n=[];i.La();){s=i.da(),r=i.readInt(),o=i.readByte(),c=i.readInt();var h=i.readInt(),l=i.readByte(),u=i.readByte(),d=[];for(e=0;e<u;e++)d.push(i.readByte());e=CXuongCuocWindow.pL(d),logMessage("playerName: "+s+" point: "+r+" avatar: "+o+" level: "+c+" money: "+h+" isFriend: "+l+" playerCuocCount: "+u+" playerStringCuoc:"+e+" VipLevel:-1"),(l=new BkUserData).yd(s),l.cf(o),l.Xh(c),l.Mb(h),l.Jw(n.length+1),l.aE(r),l.HD(e),l.Rs=-1,n.push(l)}n.push(a),this.Ha({tP:n},t.Type)},dR:function(t){var e=[],i=new BkUserData;i.Ta=t.O.readInt(),2147483647!=i.Ta&&(i.Ta+=1),i.Hb=t.O.da(),i.$c=t.O.readInt(),i.yd(BkGlobal.P.userName),i.Mb(BkGlobal.P.pb());for(var n=0;t.O.La();){n++;var s=new BkUserData;s.userName=t.O.da(),s.ye=t.O.readInt(),s.Hb=t.O.da(),s.Hl=1==t.O.readByte(),s.$c=t.O.readInt(),s.Ta=n,e.push(s)}this.Ha({WN:i,qS:e},t.Type)},eR:function(t){var e=[],i=new BkUserData;i.Ta=t.O.readInt(),2147483647!=i.Ta&&(i.Ta+=1),i.Hb=t.O.da(),i.yd(BkGlobal.P.userName),i.Mb(BkGlobal.P.pb());for(var n=0;t.O.La();){n++;var s=new BkUserData;s.userName=t.O.da(),s.ye=t.O.readInt(),s.Hb=t.O.da(),s.Hl=1==t.O.readByte(),s.Ta=n,e.push(s)}this.Ha({WN:i,qS:e},t.Type)},NQ:function(t){var e=t.O.readByte();t=t.O.readByte(),logMessage("BkCommonLogic - processRestartReturn - isAppliedOpenAppAds: "+e),logMessage("BkCommonLogic - processRestartReturn - isShowOpenAppAds: "+t),BkGlobal.PA=0<e,BkGlobal.nv=0<t},LP:function(t){var e={};e.Zg=t.O.da(),e.pj=t.O.da(),e.Wj=t.O.readInt(),e.tj=t.O.da(),console.log("playerId: ",e.Zg),console.log("tempPassword: ",e.pj),console.log("expiredInMinutes: ",e.Wj),console.log("urlInfor: ",e.tj),this.Ha(e,t.Type)},SQ:function(t){t=t.O.readByte(),logMessage("BkCommonLogic - processShowOpenAppAdsReturn - isShowOpenAppAds: "+t),BkGlobal.nv=0<t},k3:function(t){this.eD(t)},jQ:function(t,e){var i={iv:!0},n=e.O.readInt();logMessage("CoTuong - CoUp processPlayerHistoryReturn - lengths of game: "+n);for(var s=[],r=0;r<n;r++)s.push(this.uR(e,r));i.DD=s,i.ya=t,this.Ha(i,e.Type)},uR:function(t,e){var i={};return i.id=e,i.$o=t.O.da(),i.ya=i.$o.substring(0,2),i.vg=t.O.readByte(),i.Di=t.O.da(),i.xD=t.O.da(),i.Ho=t.O.Ek(),console.log("readViewedTableSession - session: ",i),i},iQ:function(t,e){var i={iv:!0},n=e.O.readInt();logMessage("CoTuong - CoUp processPlayerHistoryReturn - lengths of game: "+n);for(var s=[],r=0;r<n;r++)s.push(this.qR(e,r));i.DD=s,i.ya=t,this.Ha(i,e.Type)},qR:function(t,e){var i={};return i.id=e,i.$o=t.O.da(),i.ya=i.$o.substring(0,2),i.vg=t.O.readByte(),i.Vv=t.O.da(),i.Ho=t.O.Ek(),i.yz=t.O.da(),i.Kl=i.Vv!=i.yz,console.log("readPlayedTableSession - session: ",i),i},YP:function(e){console.log("CheckTime - receive message: ",(new Date).getTime()),t();var i={};if(e.O.readByte()==lj)showPopupMessageWith("Không tìm thấy lịch sử game trên server","Thông báo");else{i.ya=e.O.readByte(),i.yz=e.O.da(),i.b4=e.O.da(),i.vg=e.O.readByte(),console.log("processGetGameHistoryDetailReturn - session.winnerPosition: "+i.vg),i.tK=e.O.readByte(),i.Ho=e.O.Ek();for(var n=[],s=e.O.readInt(),r=0;r<s;r++){var o=e.O.readByte();n.push(o)}console.log("encryptMoves: ",n),i.Na=this.GJ(n,i.ya),i.WC=this.kD(e,Ib),i.XC=this.kD(e,Jb),i.ya==L&&(i.lD=this.rR(e),i.wR=this.sR(i)),console.log("processGetGameHistoryDetailReturn session: ",JSON.stringify(i)),switchToSceneWithGameState(jj,null,null,i),console.log("CheckTime - receive message after: ",(new Date).getTime())}},sR:function(t){var e=[];t=t.lD;for(var i=0;i<t.length;i++){var n=new BkChessPiece(t[i]).Ja;e.push(n)}return e},rR:function(t){for(var e=[],i=t.O.readInt(),n=0;n<i;n++)e.push(t.O.readByte());return e},OQ:function(){showToastMessage("Ván đấu sẽ được lưu lại khi kết thúc. \n Bạn có thể xem lại trong chức năng lịch sử!",null,null,null,.45*cc.winSize.width)},kD:function(t,e){var i=new BkUserData;return i.yd(t.O.da()),i.cf(t.O.da()),i.Ai=t.O.readInt(),i.Bi=t.O.readInt(),i.Xh(i.Ai),i.pa=e,i},GJ:function(t,e){for(var i,n="",s=(s=t.length)/(i=e==K?mj:nj),r=0;r<s;r++){var o={};o.id=r,o.wm=this.uL(t[r*i],t[r*i+1]),o.Fa=t[r*i+2],o.uz=t[r*i+3],o.he=e==K?new BkChessPiece(o.Fa).Ja:t[r*i+4],o.TC=yn(o.Fa),o.SC=zn(o.Fa),o.toString=function(){return JSON.stringify(o)},console.log("decryptMovements - movements["+r+"]: ",o),n+=o.toString()+(r<s-1?"#":"")}return n},uL:function(t,e){for(var i=new Int8Array([0,0,t,e]),n=new ArrayBuffer(4),s=(n=new DataView(n),0);s<i.length;s++)n.setInt8(s,i[s]);return n.getInt32(0)},cR:function(t){logMessage("CoTuong - CoUp top players");for(var e=t.O.readInt(),i=t.O.readInt(),n=[],s=0;s<i;s++)n.push(this.tR(t));console.log("processTopPlayersReturn - gameId = "+e),console.log("processTopPlayersReturn - players = ",n),this.Ha(n,t.Type,e)},tR:function(t){var e=new BkUserData;return e.yd(t.O.da()),e.Sr(t.O.readByte()),e.cf(t.O.da()),e.re=t.O.readInt(),e.Qr(t.O.readByte()),e.Xh(e.re),e},eD:function(e){if(t(),e.O.readByte()){var i=e.O.readInt(),n=e.O.readByte();logMessage("CoTuong - CoUp processPlayerHistoryReturn - kindHistory: "+n),0==n?this.iQ(i,e):1==n&&this.jQ(i,e)}else this.Ha({iv:!1},e.Type),showPopupMessageWith("Chức năng đang bảo trì. Vui lòng thử lại sau!","")},sQ:function(e){t();var i=e.O.readByte(),n=e.O.da();e=e.O.da(),i?(console.log("relogin - userName: "+n+"password: "+e),Aa(),S(D.He,JSON.stringify({username:n,password:e,isLoginFacebook:!1})),eb()):showToastMessage("Tên tài khoản hoặc mật khẩu không đúng")},VQ:function(e){t(),e=e.O.readByte(),logMessage("NETWORK_TABLE_JOIN_FAILURE with errorType: "+e),e==Nj?this.vd.io?(this.vd.io=!1,showToastMessage(zl)):null==this.QU&&showToastMessage(xl(e),null,null,null,270):showToastMessage(xl(e),null,null,null,270)},H4:function(t){this.tv=t},x3:function(t){if(this.dc()instanceof VvLobby){var e=t.O.readByte(),i=t.O.readByte(),n=t.O.readInt();t=t.O.da(),logMessage("offeredRoomId: "+e+" offeredTableId: "+i+" betMoney: "+n+" invitationPlayer: "+t),this.dc().V5(e,i,n,t)}else logMessage("BkLobby not onEnterTransitionDidFinish -> reject packet")},xG:function(e){logMessage("ProcessTableJoinSuccess: "),t(),BkGlobal.ja=e.O.readByte(),BkGlobal.wf=e.O.readByte(),BkGlobal.Rj=e.O.readByte(),logMessage("ProcessTableJoinSuccess: BkGlobal.currentGameID: "+BkGlobal.ja),BkGlobal.mk=!1,BkGlobal.Zq?(console.log("BkGlobal.isWaitingCreateTableByInviteFriend: ",BkGlobal.Zq),switchToSceneWithGameState(T,null,!1)):switchToSceneWithGameState(T),BkGlobal.Zq=!1},ip:function(t,e,i){var n="",s="";e==lk?(s="Bạn vừa được Admin cộng "+convertStringToMoneyFormat(t)+" "+V.toLowerCase(),n="Admin cộng tiền"):e==mk?(s="Bạn được cộng "+convertStringToMoneyFormat(t)+" tim.",n="",e=15e3,cc.game.config.app&&cc.game.config.app.zR&&(e=cc.game.config.app.zR),cc.isUndefined(bk.ry)||""==bk.ry||(e=bk.ry),t==e?(s="Đăng ký số điện thoại thành công. Bạn được cộng "+convertStringToMoneyFormat(t)+" tim.",n="Đăng ký số điện thoại thành công."):(logMessage("send sms success -> get data bonus"),(e=new BkPacket).bG(0),BkConnectionManager.send(e))):e==nk&&(s="Bạn được cộng "+convertStringToMoneyFormat(t)+" tim.",n=""),null!=i&&(n=s=i),BkGlobal.Sa==T?(logMessage("incress money ingame"),null!=(i=BkLogicManager.oa().Ba())?BkLogicManager.oa().zf(i,t,n):BkGlobal.P.Mb(BkGlobal.P.pb()+t)):(BkGlobal.P.Mb(BkGlobal.P.pb()+t),showPopupMessageWith(s),this.hj(t))},AQ:function(t){t=qn("Máy chủ sẽ khởi động lại trong vòng &*& phút. Xin vui lòng thoát khỏi trò chơi và quay trở lại sau ít phút.",[t=t.O.readByte()]),showPopupMessageWith(t,"Quan trọng")},KQ:function(t){t=t.O.da(),showPopupMessageWith(t)},LQ:function(t){var e=t.O.readByte();this.Vb(t.Type)&&BkConnectionManager.hb(),e==$k?showPopupConfirmWith("Bạn chưa đổi tên tài khoản, hãy đổi tên để bạn bè tìm bạn dễ dàng hơn!","",(function(){(new BkRenameWindow).Oa()})):e==Zk&&showPopupConfirmWith("Bạn chưa liên kết tài khoản Facebook, hãy liên kết để chơi cùng với bạn bè!","",(function(){isWebPlatform()||n.Tt()}))},jL:function(){var t=p("isRatedApp",0);logMessage("getRateAppRewarded isRated: "+t),t&&this.kz(Vj)},kz:function(t){var e=new BkPacket;e.Xy(hh,t),BkConnectionManager.send(e)},JQ:function(t){if(logMessage("processRateApp"),(e=t.O.readByte())==Zj){var e="Hãy bình chọn 5* cho Cờ Ziga để cộng đồng Cờ Ziga ngày càng phát triển!",i="";t.O.La()&&(e=t.O.da(),i=t.O.da()),logMessage("subEventCode RATE_APP.APP_PUSH: "+e+" noteContent: "+i),new BkRateAppWindow("Bạn có yêu thích Cờ Ziga không?",e,i).Oa()}else e==Wj?(om(0),logMessage("subEventCode RATE_APP.SUCCESS: "+Wj),0<(t=t.O.readInt())&&this.Tk(t,jc)):e==Xj&&(om(0),logMessage("subEventCode RATE_APP.FAILURE: "+Xj))},CQ:function(e){var i=e.O.readByte();logMessage("NETWORK_PLAY_WITH_FRIEND_INFORM subEventCode: "+i),0==i?((i={}).ya=e.O.readByte(),i.Uu=e.O.da(),i.re=e.O.readInt(),i.rf=e.O.da(),1>BkGlobal.P.pb()?showPopupMessageWith(kn+Yl):this.LT(i)):1==i&&(t(),-1!=(i=e.O.readByte())&&(i==Rj&&(BkGlobal.Zq=!0),null!=this.Xg?this.Xg.ud(i,e.Type):i!=Rj&&showPopupMessageWith(Ql(i))))},WJ:function(t,e,i){null==BkGlobal.P&&(BkGlobal.P=new BkUserData),BkGlobal.isLoginFacebook=!1,BkGlobal.P.userName=t,BkGlobal.P.password=e,BkGlobal.P.Zp=i;var n=new BkPacket;n.MF(t,e,bk.cpid,i,bk.Uk),BkConnectionManager.send(n)},n3:function(t,e){var i=new BkPacket;i.JF(t,e),BkConnectionManager.send(i)},pZ:function(){this.ev=!0;var t=new BkPacket;t.zc(Zd),BkConnectionManager.send(t)},y3:function(t){logMessage("processRegisterPhoneNumber"),this.Ha(t,t.Type)},AJ:0,c4:function(t,e,i){this.AJ=e;var n=new BkPacket;n.bJ(t,e,i),BkConnectionManager.send(n)},rQ:function(t){logMessage("processLodeReturn"),t.O.readByte()==bj&&(t=t.O.readInt(),logMessage("delta "+t),0<t?this.ip(t,void 0,"Trúng lô"):-10>t?(showToastMessage("Đặt cược thành công.Chúc mừng bạn!"),this.ip(t)):0<=(t=-t)&&t<dj&&showToastMessage(ej[t]))},BP:function(t){this.Ha(null,t)},s3:function(t){this.TM=!1,null!=t&&null!=t&&t()},yO:function(){logMessage("onClickInviteFBFriend"),null!=this.wj&&(logMessage("this.FBInviteWD != null -> removeSelf"),this.wj=null)},p2:function(){logMessage("onClickInviteFBFriendDesktop"),null!=this.wj&&(logMessage("this.FBInviteWD != null -> removeSelf"),this.wj=null)},xC:function(){logMessage("onGetInvitableListFinished"),null==this.wj&&(logMessage("init BkFBInviteFriendWD"),this.wj=new BkFBInviteFriendWD,bk.isFbApp&&cc.screen.fullScreen()&&cc.screen.exitFullScreen(),this.wj.Oa(),this.wj.visible=!1)},u0:function(t,e,i,n,s,r,o,a){new VvPaymentBonusWindow(t,e,i,n,s,r,o,a).Oa()},KA:function(t,e,i,n,s,r){new BkNotifyContentWindow(t,e,i,n,s,r).Oa()},LT:function(t){null!=this.Wn&&this.Wn.removeSelf(!0),this.Wn=new BkFriendInviteConfirm(t),this.Wn.Oa()},o6:null,yQ:function(t){var e=t.O.readByte(),i=t.O.readByte(),n="";2!==i&&3!==i||(n=t.O.da());var s=-1,r="";2===e&&(2===(s=t.O.readByte())||3===s)&&(r=t.O.da()),(5!==i&&5!==s||!isWebPlatform())&&(t=t.O.da(),this.KA(t,e,i,n,s,r))},FV:function(){var t=getCurrentScene();t&&t.ka&&t.ka().FX()},VE:function(t,e){var i=getCurrentScene();i instanceof VvLobby&&i.ka().VE(t,e)},fR:function(t){if(null==this.kc)logMessage("onReceive packet before receiving packet get list table -> reject packet");else{var e=t.O.readByte(),i=t.O.readByte();t=1&i;var n=0==(4&i)>>2;i=1==(8&i)>>3;this.kc.AV(e,t,n,i);var s=this.dc();s instanceof VvLobby&&s.ka().AV(e,t,n,i)}},C3:function(t){var e=t.O.readByte();this.Ha(e,t.Type)},xQ:function(t){var e=t.O.readInt();t=t.O.da(),BkGlobal.P.Mb(BkGlobal.P.pb()+e),this.hj(e),showPopupMessageWith(t,"Thông báo")},uG:function(t){var e=new BkUserData;e.cf(t.O.ih()),e.om(t.O.readByte()),e.ND(t.O.readInt()),e.Io=[];var i=t.O.readInt(),n=t.O.readInt(),s=t.O.readInt(),r=t.O.readInt();i=new BkPlayerAchievement(K,i,n,s,r);e.Io.push(i),i=t.O.readInt(),n=t.O.readInt(),s=t.O.readInt(),r=t.O.readInt(),i=new BkPlayerAchievement(L,i,n,s,r),e.Io.push(i),e.Qr(BkGlobal.ja),this.Ha(e,t.Type)},eQ:function(){function t(){BkConnectionManager.dg(),cc.game.restart()}logMessage("processGetSyncFacebookReturn"),showPopupMessageWith("bạn đã đồng bộ tài khoản thành công!","",t,t,null)},Dc:function(t,e){showPopupMessageWith(t,"",null,e,null)},KT:function(t){new BkChooseAccountWindow(t).Oa()},qQ:function(e){t();var i=this;logMessage("processLinkPlayerAccount");var s=e.O.readByte(),r=e.O.readByte();if(logMessage("subEvent: "+s+" - codeRtn: "+r),s==uk)i.Ha(uk,e.Type);else switch(r){case vk:s==rk?(BkGlobal.fo=!0,BkGlobal.hk=!0,this.Dc("Bạn đã liên kết tài khoản thành công!",(function(){logMessage("close popup dong bo tai khoan -> restart game"),BkConnectionManager.dg(),cc.game.restart()})),n.rb(zc)):s==sk?this.Dc("Bạn đã đổi tên đăng nhập thành công!",(function(){logMessage("BkGlobal.tempData: "+BkGlobal.ap),BkGlobal.P.yd(BkGlobal.ap),BkGlobal.ap=null,BkGlobal.no=!1,i.dc().kf(BkGlobal.P),i.Ha(Fk,e.Type)})):s==tk&&this.eQ(e);break;case wk:this.Dc("Tài khoản facebook của bạn không hợp lệ. Vui lòng thử lại."),n.fS();break;case xk:(s={}).xk=e.O.da(),s.jt=e.O.da(),s.tn=e.O.readInt(),s.ew=e.O.readInt(),s.vl=e.O.readInt(),s.cw=e.O.readInt(),s.kq=e.O.readInt(),s.dw=e.O.readInt(),s.lq=e.O.readInt(),s.bw=e.O.readInt(),logMessage("nameLinked: "+s.xk+" avatarLinked: "+s.jt+" eloCotuongLinked: "+s.tn+" rankCotuongLinked: "+s.ew+" eloCoupLinked: "+s.vl+" rankCoUpLinked:"+s.cw),logMessage("eloCotuong: "+s.kq+" rankCotuong: "+s.dw+" eloCoup: "+s.lq+" rankCoUp: "+s.bw),this.KT(s);break;case yk:this.Dc("Tài khoản đã được liên kết tới một tài khoản Facebook khác!");break;case zk:s=qn("Tên đăng nhập &*& được đăng ký qua Facebook.\n Bạn không thể liên kết được với tên đăng nhập này",[this.fa.getString()]),this.Dc(s);break;case Ak:this.Dc("Tên đăng nhập hoặc mật khẩu tài khoản liên kết không đúng.\n Vui lòng nhập lại!");break;case Bk:this.Dc("Bạn chưa nhập tên đăng nhập");break;case Ck:this.Dc("Bạn không thể đổi tên được nữa vì đã đổi tên rồi!");break;case Dk:this.Dc("Tên bạn chọn đã có người đăng ký. Hãy chọn một tên khác.")}},zD:function(){var t=new BkPacket;t.zc(zi),BkConnectionManager.send(t)},Tk:function(t,e){logMessage("updateHeartUI: "+t+" - reason"+e),BkGlobal.P.Mb(BkGlobal.P.pb()+t);var i=getCurrentScene();if(i){(i instanceof hb?i.Se:i.ka()).kx(t,e)}},hQ:function(t){var e=t.O.readInt();t=t.O.readInt(),logMessage("heartNumber: "+e+" intCountdountTime: "+t),this.bD(t),this.Tk(e,fc)},MP:function(t){n.rb(Bc);var e=t.O.readInt(),i=t.O.readByte(),s=-1,r=-1;0<=i?s=t.O.readByte():r=t.O.readInt(),logMessage("freeHeart "+e+" result: "+i+" require: "+s+" timeNext: "+r),BkGlobal.P.gh=i,BkGlobal.P.cd=s,BkGlobal.P.vm=r,0<=BkGlobal.P.vm&&(BkGlobal.P.fx=Math.floor(J()/1e3)+BkGlobal.P.vm),this.Tk(e,gc),(t=getCurrentScene())instanceof hb&&(t=t.Se).oV()},kQ:function(t){logMessage("processHotTableReturn");var e={};for(e.ya=t.O.readByte(),e.Jf=[];t.O.La();){var i={};i.ya=e.ya,i.rS=t.O.readByte(),i.RU=t.O.readByte(),i.Di=t.O.da(),i.sq=t.O.readInt(),i.vK=t.O.da(),i.yN=t.O.da(),i.NB=t.O.readInt(),i.zN=t.O.da(),i.xc=t.O.readInt(),e.Jf.push(i)}this.Ha(e,t.Type)},hR:function(t){t=t.O.readInt(),logMessage("processVertifyTransactionReceipe: "+t),0==t?showPopupMessageWith('Thanh toán qua Apple Store lỗi. Bạn vui lòng để để lời nhắn qua "Thư góp ý" trong "Cài đặt" để được trợ giúp!'):this.Tk(t,dc)},gR:function(t){t=t.O.readInt(),logMessage("processVertifyTransactionGGIAP: "+t),-1!=t?this.Tk(t,dc):showPopupMessageWith('Thanh toán qua Apple Store lỗi. Bạn vui lòng để để lời nhắn qua "Thư góp ý" trong "Cài đặt" để được trợ giúp!')},Vz:function(){var t=new BkPacket,e=Ca();t.iJ(e),BkConnectionManager.send(t)},JU:function(){cc.sys.os==cc.sys.OS_ANDROID&&(u(qm,hd),u(sm,jd),u(um,kd),u(wm,ld),u(Cm,md),u(Em,nd),u(Gm,od),u(Mm,pd),u(Om,qd),u(Qm,rd),u(ym,Bd),u(Am,Cd),u(Im,Dd),u(Km,Ed),u(Sm,Fd),u(Um,Gd))},KU:function(){cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(u(rm,id),u(tm,sd),u(vm,td),u(xm,ud),u(Dm,vd),u(Fm,wd),u(Hm,xd),u(Nm,yd),u(Pm,zd),u(Rm,Ad),u(zm,Hd),u(Bm,Id),u(Jm,Jd),u(Lm,Kd),u(Tm,Ld),u(Vm,Md))},LU:function(){u(Xm,Ri),u(Wm.BG,Qi.BG),u(Ym,Si),u(Zm,Ti),u($m,Ui),u(an,BkGlobal.P.cd),u(bn,Vi),u(cn,Wi),u(en,Zi),u(dn,Yi),u(fn,$i)},dQ:function(t){logMessage("done load setting -> set last loading Time de chi load 1 lan trong ngay"),BkGlobal.XA=!1;var e=J();logMessage("setLastLoginTime: "+e),u("lastLoginTime",e),t=t.O.da(),t=JSON.parse(t),cc.sys.os==cc.sys.OS_ANDROID&&(hd=Q(t,"androidGoogleAdmobAppId",hd),jd=Q(t,"androidGoogleAdmobBannerAdsId",jd),kd=Q(t,"androidGoogleAdmobRewardedVideoAdsId",kd),ld=Q(t,"androidGoogleAdmobInterstitialAdsId",ld),md=Q(t,"androidFacebookBannerAdsId",md),nd=Q(t,"androidFacebookInterstitialAdsId",nd),od=Q(t,"androidFacebookRewardedVideoAdsId",od),pd=Q(t,"androidMoPubBannerAdsId",pd),qd=Q(t,"androidMoPubRewardedVideoAdsId",qd),rd=Q(t,"androidMoPubFullscreenAdsId",rd),Bd=Q(t,"androidGoogleAdmobRewardedVideoAdsIdHEcpm",Bd),Cd=Q(t,"androidGoogleAdmobInterstitialAdsIdHEcpm",Cd),Dd=Q(t,"androidFacebookInterstitialAdsIdHEcpm",Dd),Ed=Q(t,"androidFacebookRewardedVideoAdsIdHEcpm",Ed),Fd=Q(t,"androidMoPubRewardedVideoAdsIdHEcpm",Fd),Gd=Q(t,"androidMoPubFullscreenAdsIdHEcpm",Gd)),cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(id=Q(t,"iosGoogleAdmobAppId",id),sd=Q(t,"iosGoogleAdmobBannerAdsId",sd),td=Q(t,"iosGoogleAdmobRewardedVideoAdsId",td),ud=Q(t,"iosGoogleAdmobInterstitialAdsId",ud),vd=Q(t,"iosFacebookBannerAdsId",vd),wd=Q(t,"iosFacebookInterstitialAdsId",wd),xd=Q(t,"iosFacebookRewardedVideoAdsId",xd),yd=Q(t,"iosMoPubBannerAdsId",yd),zd=Q(t,"iosMoPubRewardedVideoAdsId",zd),Ad=Q(t,"iosMoPubFullscreenAdsId",Ad),Hd=Q(t,"iosGoogleAdmobRewardedVideoAdsIdHEcpm",Hd),Id=Q(t,"iosGoogleAdmobInterstitialAdsIdHEcpm",Id),Jd=Q(t,"iosFacebookInterstitialAdsIdHEcpm",Jd),Kd=Q(t,"iosFacebookRewardedVideoAdsIdHEcpm",Kd),Ld=Q(t,"iosMoPubRewardedVideoAdsIdHEcpm",Ld),Md=Q(t,"iosMoPubFullscreenAdsIdHEcpm",Md)),Ri=Q(t,"urlUploadAvatar",Ri),console.log("SETTING.URL_UPLOAD_AVATAR: "+Ri),Si=Q(t,"emailSupport",Si),Ti=Q(t,"fbMessengerSupport",Ti),Ui=Q(t,"minFriendFBReward",Ui),BkGlobal.P.cd=Q(t,"taskWinDuty",BkGlobal.P.cd),Vi=Q(t,"urlGameRule",Vi),Wi=Q(t,"urlPolicy",Wi),Zi=Q(t,"urlIos",Zi),Yi=Q(t,"urlAndroid",Yi),$i=Q(t,"getdomain",$i),isFBInstantGame()||isWebPlatform()||(this.JU(),this.KU(),this.LU(),n.Or(),ib(zh))},HP:function(t){if(!isFBInstantGame()&&!isWebPlatform()){var e=t.O.readByte();t=t.O.readByte(),this.qH(e,t)}},qH:function(t,e){logMessage("cacheAdsStartGame: "+t+" - "+e),0<=t&&n.nt(t,!0),0<=e&&n.ot(e,!0)},EQ:function(t){var e=t.O.readByte();(t={}).kC=e,(e=getCurrentScene())instanceof hb&&e.Uv(t)},ah:function(e){switch(-42!=e.Type&&46!=e.Type&&logMessage("BkCommonLogic -> processNetworkEvent "+e.Type),e.Type){case zh:this.HP(e);break;case Ei:this.kQ(e);break;case kh:this.lQ(e);break;case Xd:break;case $d:this.PO(e);break;case ae:logMessage("LOG_IN_FAILURE"),this.Ha(null,e.Type),processLoginRegistFailEx();break;case Mf:logMessage("NETWORK_REGISTER_FAILURE"),n.rb(Ba,ja("NETWORK_REGISTER_FAILURE")),switchToSceneWithGameState(G);break;case $f:this.Ha(null,e.Type);break;case Sh:var i=e.O.da();this.Ha(i,e.Type);break;case Th:case Wh:this.Ha(null,e.Type);break;case gf:logMessage("NETWORK_AUTO_FIND_TABLE_NOT_FOUND_RETURN"),showToastMessage("Không tìm thấy bàn phù hợp! Xin bạn vui lòng thử lại!",cc.director.getWinSize().width/2,cc.director.getWinSize().height/2);break;case de:logMessage("NETWORK_TABLE_JOIN_SUCCESS"),BkLogicManager.S().xG(e);break;case ee:this.VQ(e);break;case sf:logMessage("NETWORK_GAME_JOIN_SUCCESS"),BkGlobal.ja=this.mn,BkLogicManager.Lu(),BkLogicManager.S().oG(0);break;case $g:logMessage("NETWORK_GET_GAME_ROOMS_BY_ROOM_TYPE_RETURN"),BkLogicManager.S().pG(e);break;case kf:logMessage("NETWORK_ROOM_JOIN_SUCCESS"),BkLogicManager.S().sG(e);break;case vf:logMessage("NETWORK_ROOM_JOIN_SUCCESS");break;case le:logMessage("NETWORK_ROOM_TABLES_UPDATE"),BkLogicManager.S().tG(e);break;case qh:logMessage("NETWORK_MAIN_PROFILE_RETURN"),this.QO(e);break;case Yf:logMessage("NETWORK_PROFILE_RETURN"),this.XO(e);break;case Fg:logMessage("NETWORK_GET_PLAYER_ACHIEVEMENT_RETURN"),this.UO(e);break;case Ph:case Qh:this.Ha(null,e.Type);break;case Og:this.Ha(null,e.Type),this.hj();break;case Vf:this.Ha(null,e.Type);break;case Xg:for(logMessage("NETWORK_GET_CHAMPION_LIST_RETURN"),i=[];e.O.La();){var s=new BkLeaderBoardData(e.O.readByte(),e.O.da());logMessage("Type "+s.type+" champion "+s.B1),null!=s.typeName&&s.Md!=H&&i.push(s)}this.Ha(i,e.Type);break;case lg:this.cR(e);break;case ng:this.eD(e);break;case Tg:this.sQ(e);break;case pg:this.YP(e);break;case xf:this.OQ(e);break;case Je:this.NQ(e);break;case Oh:this.LP(e);break;case Le:this.SQ(e);break;case De:this.dR(e);break;case qg:this.eR(e),logMessage("NETWORK_GET_TOP_RICHEST_PLAYER_RETURN");break;case Hg:logMessage("NETWORK_PLAYER_ITEMS_RETURN"),this.VO(e);break;case Pf:logMessage("NETWORK_GET_FRIENDS_RETURN"),this.XP(e);break;case Wf:logMessage("NETWORK_PLAYER_SEARCH_FRIENDS"),this.PQ(e);break;case jh:case ih:case th:this.SP(e),logMessage("processFriendsListReturnState");break;case fh:this.mQ(e);break;case Wg:this.uG(e);break;case eh:this.uQ(e),logMessage("NETWORK_LUCKY_BOX_REQUEST_RETURN");break;case ii:this.PP(e);break;case ji:break;case ki:this.tS(e);break;case Na:i=this.MK(e),this.Ha(i,e.Type);break;case si:i=this.LK(e),this.Ha(i,e.Type);break;case yh:this.JP(e);break;case Mh:case Ch:case Dh:this.Ha(e,e.Type);break;case Bh:for(i=e.O.readInt();e.O.La();)e.O.readInt();if((BkGlobal.Sa==P||BkGlobal.Sa==gj)&&(BkGlobal.P.Mb(BkGlobal.P.pb()+i),this.dc().kf(BkGlobal.P),null==this.Xg)){e="Bạn được cộng "+i+pn()+" vào tài khoản.",U.$r(e,"Thông báo",null,null,null,Ma,null);break}if(BkGlobal.Sa==T&&(logMessage("nap the ingame"),null!=(s=BkLogicManager.oa().Ba())?BkLogicManager.oa().zf(s,i,""):BkGlobal.P.Mb(BkGlobal.P.pb()+i),null==this.Xg)){BkLogicManager.oa().ka().yT(!1),e="Bạn được cộng "+i+pn()+" vào tài khoản.",showPopupMessageWith(e,"Thông báo",(function(){}),(function(){BkLogicManager.oa().ka().yT(!0)}));break}this.Ha(i,e.Type);break;case bg:logMessage("NETWORK_INBOX_MAILS_RETURN"),this.$P(e);break;case dg:logMessage("NETWORK_OUTBOX_MAILS_RETURN"),this.aQ(e);break;case gg:case fg:this.QQ(e.Type);break;case ig:logMessage("NETWORK_MAIL_RETURN"),this.bQ(e);break;case Yh:this.ZP(e);break;case Jg:logMessage("NETWORK_BUY_ITEM_SUCCESS"),this.GP(e);break;case Mg:logMessage("NETWORK_BUY_ITEM_FAILURE"),this.FP(e);break;case di:this.NO(e);break;case uf:t(),BkLogicManager.Ew(null),e.O.La()&&(BkGlobal.P.gh=e.O.readInt()),BkGlobal.ja=-1,BkGlobal.wf=-1,BkGlobal.Rj=-1,switchToSceneWithGameState(P,!0);break;case oh:case Ye:case $e:case pf:break;case Rh:i=e.O.readInt(),e.O.La()?1==e.O.readByte()&&this.ip(i,ok):this.ip(i,lk);break;case Pg:for(i=e.O.readInt(),this.Ha(i,e.Type),this.ip(i,mk);e.O.La();)e.O.readInt(),e.O.readByte();break;case Hh:this.AQ(e);break;case Xh:this.KQ(e);break;case mi:this.LQ(e);break;case hh:this.JQ(e);break;case rh:BkGlobal.P.OD(!0);break;case bi:case ci:case ai:this.fR(e),logMessage("process NETWORK_SETUP_CHAN_TABLE, type: "+ai);break;case If:i=e.O.readByte(),this.Ha(i,e.Type);break;case Jf:this.CQ(e);break;case Bg:case ti:this.rQ(e);break;case vi:BkGlobal.Sa==P&&this.BP(e);break;case yi:this.yQ(e);break;case He:this.VE(e.O.readByte(),e.O.readByte());break;case xi:this.xQ(e);break;case Hf:BkGlobal.Sa!=P&&BkGlobal.Sa!=gj||this.qQ(e);break;case Ai:this.hQ(e);break;case Gi:this.MP(e);break;case oi:this.dQ(e);break;case xh:this.VP(e);break;case $h:this.hR(e);break;case pi:this.gR(e);break;case jb:this.EQ(e);break;default:logMessage("BkLogic not process packet with type: "+e.Type+" -> call super process"),this._super(e)}}}),MIN_TIME_INTERACTION=3e4,BkInGameLogic=BkBaseLogic.extend({lh:-1,ga:[],Y0:!1,Nh:0,Ib:0,gj:"",userData:null,k6:0,RA:!1,Cv:0,BJ:0,r1:0,cj:0,Xb:0,SW:!0,R0:!1,oo:!0,g1:!0,RX:[],AZ:0,a2:null,vH:null,TA:!1,tv:0,cr:0,ctor:function(){this._super(),this.vH=new BkQueue,BkConnectionManager.gM()},Vb:function(t){switch(t){case We:case Kh:case Kg:case gh:case Lg:case Qg:case Ne:case Eh:case ff:case de:case ke:case uf:case vf:return!0}return!1},DL:function(){var t=this.ka().KK(),e=MIN_TIME_INTERACTION,i=0;if(null!=t&&0<t.length)for(var n=0;n<t.length;n++)(i=J()-t[n].Kb)<e&&(e=i);return Math.min(e,J()-this.ka().mb.Kb)},dc:function(){return BkGlobal.ek},ka:function(){return null==this.dc()?(logMessage("BkGlobal.ingameScene is null"),null):this.dc().ka()},ZC:function(t){t.gG()},u3:function(){},Gi:function(t){return(t-this.An()+this.Xb)%this.Xb},Uq:function(t){var e=this.Ba();return null!=e&&t==e.ta},z_:function(){var t=0;do{this.lh=Math.floor(this.lh+1)%this.Xb,t++;var e=this.Jb(this.lh);if(null!=e&&!e.Jh&&e.isPlaying&&!e.Il)return this.lh}while(10>t);return-1},OX:function(t){var e=0;do{e++,t=Math.floor((t-1+this.Xb)%this.Xb);var i=this.Jb(t);if(null!=i&&!i.Jh&&i.isPlaying&&!i.Il)break}while(10>e);return t},j2:function(t){var e=0;do{e++,t=Math.floor((t+1)%this.Xb);var i=this.Jb(t);if(null!=i&&!i.Jh&&i.isPlaying&&!i.Il)return t}while(10>e);return-1},ZB:function(){logMessage("is Invalid my clientstate -> getableinfo & sync"),logMessage("getMyClientState - myName: "+BkGlobal.P.userName),logMessage("this.PlayerState.length: "+this.ga.length);for(var t=0;t<this.ga.length;t++){var e=this.ga[t];logMessage("player "+t+" name :"+e.getName()+" serverPos: "+e.ta)}},UA:function(){var t=this.Ba();return null==t?(this.ZB(),this.$l(),!0):(logMessage("isEnoughMoneyToStartGame: "+t.xn()),t.xn()>=getMinTableBetMoney()*this.Ee)},A_:function(){for(var t=0,e=0;e<this.ga.length;e++){var i=this.ga[e];i.isPlaying&&!i.Jh&&t++}return t},oQ:function(t){var e=t.O.readByte();t=t.O.readInt();var i=this.Jb(e);this.jH(i),this.pQ(e,t,i),this.Vb(Kg)&&this.hb()},pQ:function(t,e,i){for(logMessage("must implement this function in custom game logic if need"),t=this.$K(e),t=Math.max(t,-i.xn()),this.zf(i,t,"Phạt"),t=0;t<this.ga.length;t++){var n=this.Ee,s=this.ga[t];s.ta!=i.ta&&s.isPlaying&&this.zf(s,this.lL(n,e))}},$K:function(t){return-t*(this.Cv-1)},lL:function(t,e){return Math.floor(e*(1-TAX_RATE))},GQ:function(t){var e,i=t.O.readByte(),n=t.O.readByte(),s=this.Jb(i);(t=this.Vb(t.Type),null==s)?logMessage("player == null -> error"):(s.status=n,console.log("processPlayerStatusUpdate - player.status: ",s.status),this.Uq(i)&&(n==PLAYER_STATE_NOT_READY?this.ka().Pk():(this.ka().Ce(),this.ka().Kn())),e=BkGlobal.ja==K||BkGlobal.ja==L?s.ta:this.Gi(i),logMessage("processPlayerStatusUpdate name "+s.getName()+" displayPos: "+e+" serverPos: "+i+" status: "+n),this.ka().Pv(e,n));t&&this.hb()},nN:function(){for(var t=0,e=0,i=this.ga.length;e<i;e++){var n=this.ga[e];n&&!n.Ka&&t++}return 0==t},Ri:function(){return null!=this.Ba()&&this.Ba().status==PLAYER_STATE_TABLE_OWNER},V0:function(){return this.An()==this.lh},ZZ:function(){return BkGlobal.ja==K||BkGlobal.ja==L?new BkChessPlayerClientState:BkGlobal.ja==pb?new BkPhomClientState:BkGlobal.ja==H?new BkMauBinhClientState:new BkClientState},Q0:function(){return null==this.Ba()&&(this.$l(),!0)},Ba:function(){return null==this.Aq(BkGlobal.P.userName)&&this.ZB(),this.Aq(BkGlobal.P.userName)},aC:function(){logMessage("logPlayerStateInfo numOfPlayer: "+this.ga.length);for(var t=0;t<this.ga.length;t++){var e=this.ga[t];logMessage("Player name : "+e.getName()+" serverPos:"+e.ta+" tablePos: "+e.Va+" status: "+e.status)}},Aq:function(t){for(var e=0;e<this.ga.length;e++){var i=this.ga[e];if(i.getName()==t)return i}return null},An:function(){for(var t,e=0;e<this.ga.length;e++)if((t=this.ga[e]).getName()==BkGlobal.P.userName)return t.ta;return-1},Nx:function(){for(var t=[],e=0;e<this.Xb;e++){var i=this.Jb(e);null!=i&&t.push(i)}this.ga=t},WR:function(t){logMessage("removePlayer "+t);for(var e=0;e<this.ga.length;e++)this.ga[e].ta===t&&this.ga.splice(e,1)},Jb:function(t){for(var e=null,i=0;i<this.ga.length;i++)if((e=this.ga[i]).ta==t)return e;return null},PM:function(){for(var t=0;t<this.ga.length;t++){var e=this.ga[t];if(e.status==PLAYER_STATE_NOT_READY)return showToastMessage("player"+e.getName()+"is not ready"),!1}return!0},jB:function(){return 2>this.ga.length},N0:function(){return this.An()==this.lh},IZ:function(){return this.Jb(this.lh)},JZ:function(){return this.lh},hL:function(t){for(var e=0;e<this.ga.length;e++){var i;if(i=this.ga[e],this.Gi(i.ta)==t)return i}return null},zf:function(t,e,i){var n="";null!=i&&(n=i),t.zf(e),playAlertSound(),this.ka().Ox(t,e,n),logMessage("Player:"+t.getName()+" amount:"+e+" reason:"+n+" MoneyAfter:"+t.JK())},YQ:function(){showToastMessage("Không thể rời bàn, hãy thử lại",200,200)},WQ:function(t){var e,i=t.Js();e=!1;for(var n=0;n<i.length;n++){if(logMessage("processTableJoinPush with pos: "+i[n].position),null!=(e=this.Jb(i[n].position)))return logMessage("invalid packet table join push with "+i[n].position+" -> get table info & sync"),void this.$l();(e=BkGlobal.ja==K||BkGlobal.ja==L?new BkChessPlayerClientState:new BkClientState).Aw(i[n]),this.ga.push(e),this.Nx(),this.ka().HC(e,this.Gi(e.ta)),e=e.Ka}logMessage("isObserver: "+e),e||(logMessage("la ng choi -> bat am thanh ra vao ban"),playJoinGameSound()),this.Vb(t.Type)&&this.hb()},DQ:function(t){var e=t.O.ih(),i=t.O.readInt();logMessage("playerName: "+e+" change: "+i),null!=(e=this.Aq(e))&&this.zf(e,i),this.Vb(t.Type)&&this.hb()},gQ:function(t){if(t.Type==fi)t.O.readInt();else if(t.Type==hi)if(t=t.O.readInt(),logMessage("reward: "+t),0<t){var e=this.Ba();this.ka().QR(),this.zf(e,t),showToastMessage("Bạn vừa nhận được "+formatNumber(t)+pn()+" từ hộp quà.",WINDOW_WIDTH/2,WINDOW_HEIGHT/2,5,300)}else showToastMessage("Còn "+convertSecondToMinSec(-t)+" Bạn mới có thể nhận quà!",WINDOW_WIDTH/2,WINDOW_HEIGHT/2,3,300)},iR:function(t){var e,i=t.O.readByte(),n=this.Ba();null!=n&&(e=i==PLAYER_NEW_LEVEL?getNewLevelBonusMoney(n.getUserInfo().$c):getBonusByBonusCode(i),this.zf(n,e,getBonusReasonByBonusCode(i)));this.Vb(t.Type)&&this.hb()},jR:function(t){var e=t.O.readByte(),i=t.O.readInt(),n=this.Jb(e);if(null!=n){var s=i-(s=n.getUserInfo().$c);n.getUserInfo().Xh(i),n.getName()==BkGlobal.P.userName&&(BkGlobal.P.Xh(i),logMessage("currentGameID: "+BkGlobal.ja+" - newLevel: "+i),BkGlobal.ja==L?(BkGlobal.P.JD(i),logMessage("setEloCoUp: "+i)):BkGlobal.ja==K&&(BkGlobal.P.ID(i),logMessage("setEloCoTuong: "+i)),isFBInstantGame()&&BkFbInstant.OY((function(t){BkFbInstant.F6("Bấm chơi ngay để vào game",t)}))),e=this.ka().tc(e),this.ka().eE(s,"Elo",e),this.ka().NC(n.ta,n.getUserInfo()),e&&e.y<cc.winSize.height/2&&this.ka().rV(s)}this.Vb(t.Type)&&this.hb()},$Q:function(t){t.O.La()&&t.O.readByte(),this.rp(),this.Vb(t.Type)&&this.hb()},BT:function(t,e,i){var n=new BkPacket;n.VF(t,e,i),BkConnectionManager.send(n,!1)},Ky:function(){for(this.cj=this.gj="",this.Ib=GAME_STATE_NOT_READY,this.Ee=0;0<this.ga.length;)this.ga.splice(0,1)},ZW:function(t){var e=new BkPacket;null!=(t=this.Aq(t))&&(e.vj(ef,t.ta),BkConnectionManager.send(e))},rp:function(){logMessage("ProcessOutGame"),this.rw(),this.ka().Xp(),this.Ky(),this.ka().Ce(),BkGlobal.Iw(!1),logMessage("finish ProcessOutGame")},ou:function(t){return null!=t?t.ou():null},WE:function(t){this.Ib=t},V_:function(){return this.Ee},J_:function(){return this.ga},Ok:function(){var t=this.Ba();null!=t&&(t.status==PLAYER_STATE_READY||this.Ub()||this.ka().Ok(TIME_AUTO_READY))},AP:function(t){null!=this.Ba()&&(this.Ba().status=PLAYER_STATE_TABLE_OWNER,this.cj=t.O.readByte(),logMessage("processAssignAsTableOwner "+this.cj),t.O.La()&&(this.gj=t.O.ih()),this.ka().Ce(),this.ka().Pk(!1),this.ka().Pv(0,PLAYER_STATE_TABLE_OWNER),this.Vb(t.Type)&&this.hb())},$l:function(){BkGlobal.mk=!1,this.en();var t=new BkPacket;t.BF(),BkConnectionManager.send(t)},gS:function(){if(null!=this.ga){for(var t=0;t<this.ga.length;t++){var e=this.ga[t];null!=e&&e.ER()}this.ga=[]}},kG:function(t){var e;logMessage("ProcessGameTableInfo: gameId: "+BkGlobal.ja),this.Nh=0,this.Ee=t.O.readInt(),t=t.Js(),this.gS();for(var i=0;i<t.length;i++)(e=BkGlobal.ja==K||BkGlobal.ja==L?new BkChessPlayerClientState:BkGlobal.ja==pb?new BkPhomClientState:BkGlobal.ja==H?new BkMauBinhClientState:new BkClientState).Aw(t[i]),this.ga.push(e),t[i].name==BkGlobal.P.userName&&(BkGlobal.P.Hb=t[i].it);logMessage("PlayerState before sort: "+this.ga.length),this.Nx(),logMessage("Finished read table info, numOfPlayer: "+this.ga.length),this.ka().GC()},Ub:function(){return this.Ib!=GAME_STATE_READY&&this.Ib!=GAME_STATE_FINISH},ZN:function(){var t=new BkPacket;t.zc(oe),BkConnectionManager.send(t)},rw:function(){for(var t=0;t<this.ga.length;t++){var e=this.ga[t];null!=e&&e.hS()}},vG:function(){this.rw(),this.ZN()},YN:function(){var t=new BkPacket;t.vj(Ve,PLAYER_STATE_READY),BkConnectionManager.send(t)},FQ:function(){this.rw(),this.YN(),BkGlobal.Iw(!0)},fQ:function(t){for(var e=[];t.O.La();){var i=t.O.readInt(),n=t.O.ih(),s=t.O.readByte();i=new BkBasicUserInfo(n,i,s);e.push(i)}this.dc().oE(e,1)},Tu:function(t){var e=new BkPacket;e.CF(t),logMessage("Invite Player"+t),BkConnectionManager.send(e)},WP:function(t){for(var e=[];t.O.La();){playerMoney=t.O.readInt(),playerName=t.O.ih(),avatar=t.O.readByte();var i=new BkBasicUserInfo(playerName,playerMoney,avatar);e.push(i)}this.dc().oE(e,2)},cQ:function(){s();var t=new BkPacket;t.zc(Sf),BkConnectionManager.send(t)},aD:function(){s();var t=new BkPacket;t.zc(mf),BkConnectionManager.send(t)},B3:function(){this.dc().aU(this),this.aD()},fD:function(t){this.dc().jU(t)},TP:function(t){this.ka().Xp(),this.en(),this.oo=!1,this.Ib=t.O.readByte();for(var e=0;e<this.ga.length;e++)this.ga[e].isPlaying=!1;logMessage("Base Logic table Syn: status"+this.Ib),this.ka().qp(t)},iL:function(){return logMessage("getPunishExitDuringGameMoney -> must implement this function with other game"),0},fm:function(){if(!this.TA){var t=this.Ba(),e=this;if(null!=t&&t.isPlaying&&!t.Jh){if(this.Ub())return t="Nếu bạn rời bàn chơi bạn sẽ bị phạt "+convertStringToMoneyFormat(this.iL(),!0)+" "+V.toLowerCase()+".\nBạn có thực sự muốn thoát không?",void showPopupConfirmWith(t,"Thoát khi đang chơi",(function(){e.wo(1)}))}else if(null!=t&&t.isPlaying&&t.Jh)return void this.wo(1);this.wo(0)}},XQ:function(t){if(logMessage("processTableLeavePush pos "+t),this.Uq(t))logMessage("la minh -> goi tin sai -> reject & reLogin"),this.$l();else{var e=this.Jb(t),i=!1;null!=e&&(this.Iy(e),this.ka().IC(e),this.WR(t),this.ka().ow(this.Gi(t)),this.nN()&&showPopupConfirmWith("Không còn người chơi trong bàn, bạn có muốn chuyển sang xem ván khác?","",(function(){var t=new BkPacket;t.zc(Hi),BkConnectionManager.send(t)}),(function(){BkLogicManager.oa().fm()})),i=e.Ka),logMessage("isObserver: "+i),i||(logMessage("la ng choi bat am thanh ra vao ban"),playLeaveGameSound())}},ZQ:function(t){logMessage("processTableLeavePush ");var e=t.O.readByte();this.XQ(e),this.Vb(t.Type)&&this.hb()},Iy:function(t){null!=t&&(t.Fr(),logMessage("clearPlayerCard:"+t.getName()))},jH:function(t){if(this.Iy(t),t.isPlaying=!1,this.ka().OO(t),!t.Jh){var e=BkGlobal.ja;e!=ob&&e!=rb&&e!=qb&&e!=pb||(this.Ib=GAME_STATE_FINISH),this.Uq(t.ta)&&this.rp()}},RQ:function(t){var e=!1;t.Type==vh?(t=t.O.readInt(),logMessage("NETWORK_BET_MONEY_UPDATE "+t),(t>=BkGlobal.P.ye*getTableMoneyWarning()||this.Ee<=.1*t)&&!this.Ri()&&(e=!0),this.Ee=t,t="Tiền bàn đã được thiết lập thành "+convertStringToMoneyFormat(this.Ee)+" "+pn(),e?U.$r(t,"Thông báo",null,null,null,Ma,null):BkGlobal.ja==K||BkGlobal.ja==L?showToastMessage(t,cc.winSize.width/2,TOAST_MSG_YPOS,3,340):showToastMessage(t,150,cc.winSize.height-75,3,180),this.ka(),this.Ri()||this.ka().Ok(TIME_AUTO_READY-1)):(logMessage("setup table fail"),e=t.O.readByte(),t=t.O.readInt(),logMessage("requiredMoney: "+t+" setupTableResult: "+e),this.CT(e,t))},CT:function(t,e){logMessage("setupTableResult:"+t),2==t&&showToastMessage("Bạn chỉ có thể đặt tối đa là: "+e+"$",WINDOW_WIDTH/2,WINDOW_HEIGHT/2+100,5),0==t&&showToastMessage("Không thể đặt tiền cho bàn, số tiền nhỏ nhất có thể đặt: "+e+"$",WINDOW_WIDTH/2,WINDOW_HEIGHT/2+100,5),1==t&&showToastMessage("Không thể đặt tiền cho bàn, số tiền tối đa có thể đặt: "+e+"$",WINDOW_WIDTH/2,WINDOW_HEIGHT/2+100,5)},nQ:function(t){if(t.Type==Rg)showToastMessage("Có bảo bối bảo vệ, bạn không thể đuổi!",WINDOW_WIDTH/2,WINDOW_HEIGHT/2+70,5,300);else if(t.Type==Ug)showToastMessage("Bảo bối vừa bảo vệ bạn không bị đuổi.",WINDOW_WIDTH/2,WINDOW_HEIGHT/2-70,5,300);else if(t.Type==ff)this.Rr(OWNER_KICK),t.O.La()&&this.Rr(t.O.readByte()),t.O.La()&&this.Rr(t.O.readByte()),this.rp();else if(t.Type==vf){var e="";t.O.La()&&(e=t.O.readByte()),logMessage("NETWORK_TIME_OUT_LEAVE: reason: "+e),this.rp()}this.Vb(t.Type)&&this.hb()},OP:function(t){showToastMessage("processErrorReturn not implement"+t.Type,WINDOW_WIDTH/2,WINDOW_HEIGHT/2)},HQ:function(){this.Nh=0,this.tv=this.Ee,this.DL()<MIN_TIME_INTERACTION?this.RA=!0:this.RA=!1,this.Ib=GAME_STATE_READY,this.ka().BC(),this.Vb(Kh)&&this.hb()},RP:function(){this.Ib=GAME_STATE_FINISH,playAlertSound(),this.ka().hG()},NP:function(){this.Ib=GAME_STATE_PLAYING,this.BJ=this.Cv=0,this.ka().Bo()},vV:function(t){return logMessage("INGAME_GAME isSynchEvent -> currentIndex: "+this.Nh+" packetIndex: "+t.Bd),this.Nh+1===t.Bd?(logMessage("nhan goi tin dung index"),this.Nh++,1):this.Nh>=t.Bd?(logMessage("nhan goi tin cu"),-1):this.Nh+1<t.Bd?(logMessage("nhan thieu goi tin -> syncEvent tu event: "+this.Nh),this.ur(),-1):void 0},ur:function(){logMessage("onReconnectSuccess ingame logic");var t=new BkPacket;t.vj(df,this.Nh),BkConnectionManager.send(t)},DP:function(t){t.O.readByte();for(var e=[],i=0;t.O.La();)e[i]=t.O.readInt(),i++;0<e.length&&(LIST_SETTING_BET_MONEY_BD=e)},WK:function(){return BkGlobal.TB},Rr:function(t){BkGlobal.TB=t},UQ:function(t){var e=t.O.readByte();t=em(t=t.O.ih()),null!=this.Jb(e)&&this.dc().kV(t,e)},EP:function(t){var e=t.O.readByte();t=t.O.readByte(),logMessage("processBlockChatReturn "+e+" playerPos: "+t);var i=!1;for(1==e?i=!0:2==e&&(i=!1),e=0;e<this.ga.length;e++){var n=this.ga[e];n.ta==t&&(logMessage("Update processBlockChatReturn "+n.getName()+" from state: "+this.ga[e].ae+" to "+i),this.ga[e].ae=i)}},wo:function(t){s();var e=new BkPacket;e.EF(t),BkConnectionManager.send(e)},ah:function(t){switch(t.Type){case Xd:break;case qe:this.kG(t);break;case bf:this.TP(t);break;case dh:this.DP(t);break;case vh:case sh:this.RQ(t);break;case pe:this.NP(t);break;case ke:this.$Q(t);break;case nh:this.YQ();break;case Eh:this.WQ(t);break;case Ne:this.ZQ(t);break;case We:console.log("build advance - processNetworkEvent"),this.GQ(t);break;case Tf:this.WP(t);break;case nf:this.fQ(t);break;case vf:case Rg:case Ug:case ff:this.nQ(t);break;case yg:this.OP(t);break;case hi:case fi:this.gQ(t);break;case gh:this.DQ(t);break;case Qg:this.iR(t);break;case Lg:logMessage("NETWORK_PLAYER_NEW_LEVEL"),this.jR(t);break;case ne:this.UQ(t);break;case Lh:this.EP(t);break;case uh:this.AP(t);break;case cf:break;case Kh:logMessage("NETWORK_PREPARE_NEW_GAME"),this.HQ();break;case Fe:this.RP();break;case Kg:this.oQ(t);break;default:this._super(t)}}}),BkClientState=cc.Class.extend({P:null,ta:null,status:null,Ta:-1,af:null,Il:!1,Kj:0,isPlaying:!1,Jh:!1,aV:0,ac:0,$U:0,D0:!1,M0:!1,S0:!1,Nr:null,OB:0,ae:!1,ctor:function(){this.af=[]},ER:function(){this.Fr()},GX:function(t){null==this.Nr&&(this.Nr=new BkXiToCardSuite),this.Nr.wX(t)},Q_:function(){return this.Nr},Aw:function(t){this.P=new BkUserData,logMessage("setClientInfo of player: "+t.name),this.P.yd(t.name),this.ta=t.position,this.status=t.status,this.P.Mb(t.jg),this.P.cf(t.it),this.P.Xh(t.Tg),this.P.om(t.iB),this.ae=t.ae},l5:function(t){this.$U=t},h4:function(t){this.ac=t},getUserInfo:function(){return this.P},E0:function(){return this.ae},G0:function(){return this.My},zf:function(t){this.P.Mb(this.P.pb()+t),this.P.userName==BkGlobal.P.userName&&BkGlobal.P.Mb(BkGlobal.P.pb()+t)},JK:function(){return null==this.P?0:this.P.pb()},getName:function(){return this.P.userName},C1:function(t){this.Il=t},T0:function(){return this.Il},Jw:function(t){this.Ta=t},setName:function(t){this.P.yd(t)},Fn:function(){return this.Ta},t4:function(t){this.My=t},M6:function(t,e){if(null==this.af||this.af.length<e+1)return null;var i=this.af[e];return i.CR(t),i.Wr(!1),i},EX:function(t){null==this.af&&(this.af=[]),this.af.push(t)},P4:function(t){this.af=t},ou:function(){return this.af},TZ:function(){return this.Kj},xn:function(){return null!=this.P?this.P.pb():0},Fr:function(){if(null!=this.af)for(var t;0<this.af.length;)t=this.af[0],this.af.splice(0,1),t.removeFromParent()},hS:function(){this.Fr(),this.Kj=0,this.Jh=this.isPlaying=!1,this.Ta=-1,this.Il=this.My=!1,this.aV=0},r4:function(t){this.Kj=t}}),BkChessPlayerClientState=BkClientState.extend({Xa:null,pa:-1,s1:null,Va:-1,Ka:null,ks:!1,Le:null,ctor:function(){this._super()},WS:function(t){this.Le=t},ie:function(t){null!=this.Le&&this.Le.ie(t)},Aw:function(t){this._super(t),this.Ka=t.Ka},Xw:function(){null!=this.Le&&this.Le.Xw()},cx:function(){null!=this.Le&&this.Le.cx()},Hr:function(){null!=this.Le&&this.Le.Hr()},BR:function(){this.Hr()},To:function(t){null!=this.Le&&this.Le.To(t)},Kq:function(t,e){this.Le=t,this.Le.Kq(e)},L3:function(){},o5:function(){},t0:function(){}}),BkLogicManager={hr:null,eu:null,Ry:-1,sM:function(){null==this.hr&&(this.hr=new BkCommonLogic)},Ew:function(t){this.eu=t},S:function(){return null==this.hr&&this.sM(),this.hr},oa:function(){return-1!==this.Ry&&null!=this.eu||this.Lu(),this.eu},Vb:function(t){var e=!1,i=this.S();return null!=i&&i.Vb(t)&&(e=!0),null!=(i=this.oa())&&i.Vb(t)&&(e=!0),e},Lu:function(){logMessage("initGameLogic with current gameID "+BkGlobal.ja);var t=null;switch(this.Ry=BkGlobal.ja,BkGlobal.ja){case ob:t=new BkTLMNInGameLogic;break;case K:t=new BkChessInGameLogic;break;case L:t=new BkCoUpInGameLogic;break;case pb:t=new BkPhomIngameLogic;break;case Ka:t=new BkBaCayInGameLogic;break;case qb:t=new BkSAMIngameLogic;break;case rb:t=new BkTLMNDemLaInGameLogic;break;case Ia:t=new BkXiToInGameLogic;break;case Ha:t=new BkPokerInGameLogic;break;case Ja:t=new BkXiDzachInGameLogic;break;case La:t=new BkLiengInGameLogic;break;case H:t=new BkMauBinhInGameLogic;break;default:t=new BkInGameLogic}this.Ew(t)}},BkChessInGameLogic=BkInGameLogic.extend({ctor:function(){this._super(),this.Xb=getMaxPlayer(K),logMessage("this.maxPlayer: "+this.Xb)},Vb:function(t){switch(t){case li:case pe:case te:case ve:case Fe:case Ef:case Jh:return!0}return this._super(t)},Ky:function(){for(logMessage("clearTableData - BkChessInGameLogic"),this.cj=this.gj="",this.Ib=GAME_STATE_NOT_READY,this.Ee=0;0<this.ga.length;)this.ga[0].BR(),this.ga.splice(0,1)},jB:function(){if(2>this.ga.length)return!0;for(var t=0,e=0,i=this.ga.length;e<i;e++){var n=this.ga[e];n&&!n.Ka&&t++}return 2>t},PM:function(){for(var t=0,e=this.ga.length;t<e;t++){var i=this.ga[t];if(i.status==PLAYER_STATE_NOT_READY&&!1===i.Ka)return showToastMessage("player"+i.getName()+"is not ready"),!1}return!0},rr:function(t){this._super(t);var e=t.O.readByte();t=1==t.O.readByte(),this.ka().rr(e,t)},Bo:function(t){var e=t.O.readByte();t=t.O.readByte(),this.ka().Bo(e,t)},qr:function(t){var e=t.O.readByte(),i=t.O.readByte(),n=t.O.readByte(),s=t.O.readByte();t=t.O.readInt();var r=this.ka();r&&"function"==typeof r.qr?r.qr(e,i,n,s,t):this.$l()},Mv:function(t){var e=t.O.readByte();t=t.O.readByte(),this.ka().Mv(e,t)},Ir:function(){this.ka().Ir()},Lv:function(t){t=t.O.readByte(),this.ka().Lv(t)},Ov:function(t){t=t.O.readByte(),this.ka().Ov(t)},EV:function(t,e){var i=this.Jb(t);if(null!=i){if(i.Ka=e)i&&(i.Va=-1,i.status=PLAYER_STATE_NOT_READY);else{var n=this.xz();i&&(i.Va=n)}this.DV()}},xz:function(){var t,e=[];for(t=0;t<this.Xb;t++)null!=this.ga[t]&&0<=this.ga[t].Va&&2>this.ga[t].Va&&(e[this.ga[t].Va]=!0);for(t=0;2>t;t++)if(!e[t])return t;return-1},DV:function(){for(var t=0,e=0;e<this.Xb;e++){var i=this.Mg(e);i&&i.status!=PLAYER_STATE_NOT_READY&&t++}this.Cv=t},Mg:function(t){return this.ga[t]},fm:function(){var t=this.Ba(),e=this;t&&!t.Ka&&this.Ib==GAME_STATE_PLAYING?showPopupConfirmWith("Bạn sẽ thua ván này.\nBạn có chắc chắn muốn thoát?","Thoát khi đang chơi",(function(){e.wo(1)})):this.wo(0)},Br:function(t){var e=new BkPacket;e.vF(t),BkConnectionManager.send(e)},CP:function(t,e){var i=new BkPacket;i.UF(t,e),BkConnectionManager.send(i)},gD:function(t){var e=new BkPacket;e.XF(t),BkConnectionManager.send(e)},KP:function(){var t=new BkPacket;t.wF(),BkConnectionManager.send(t)},vQ:function(t,e,i,n){var s=new BkPacket;s.GF(t,e,i,n),BkConnectionManager.send(s)},ah:function(t){switch(t.Type){case Xd:break;case li:this.rr(t),this.hb();break;case pe:this.Bo(t),this.hb();break;case te:this.qr(t);break;case ve:this.Mv(t),this.hb();break;case Fe:this.Lv(t),this.hb();break;case Ef:this.Ov(t),this.hb();break;case Jh:this.ka().FO(),this.hb();break;default:this._super(t)}}}),BkCoUpInGameLogic=BkChessInGameLogic.extend({ctor:function(){this._super()},Vb:function(t){switch(t){case xe:case Qe:return!0}return this._super(t)},Qv:function(t){var e=t.O.readByte();t=t.O.readByte(),this.ka().Qv(e,t)},jO:function(t){t.O.readByte()},ah:function(t){switch(t.Type){case Xd:break;case xe:this.Qv(t),this.hb();break;case Qe:this.jO(t),this.hb();break;default:this._super(t)}}}),BkLabelTTF=cc.LabelTTF.extend({ctor:function(t,e,i,n,s,r,o,a){e=cm(void 0!==o&&o,void 0!==a&&a),this._super(t,e,i,n,s,r),this.setFontSize(i),isWebPlatform()&&this.setScale(.5)},setFontSize:function(t){isWebPlatform()?this._super(2*t):this._super(t)},getContentSize:function(){var t=this._super();return isWebPlatform()?cc.size(t.width/2,t.height/2):t},_getWidth:function(){return this.getContentSize().width},_getHeight:function(){return this.getContentSize().height},Yb:function(t,e){void 0===e&&(e=t),isWebPlatform()||this.setScale(t,e)}}),BTN_YELLOW_TEXT_SHADOW_POS=cc.p(1,-3),BkButton=ccui.Button.extend({Ux:null,Ws:null,Rx:null,Tx:null,Ys:!0,by:null,Kb:0,Xs:ccui.Widget.LOCAL_TEXTURE,Yk:null,Zk:null,jh:null,li:!1,ctor:function(t,e,i,n,s,r){this._super(),this.li=!1,null!=r&&(this.li=r),this.li||(this.setTitleFontName("Roboto-Medium"),this.setTitleFontSize(16),this.setName("BkButton"),this.setTitleColor(cc.color(240,240,255))),isWebPlatform()&&(this.Ws=new cc.Sprite.LoadManager),r=ccui.Widget.LOCAL_TEXTURE,s&&(r=s),t&&this.loadTextures(t,e,i,n,r),isWebPlatform()&&n&&this.Wx(),this.li&&this.EG()},Kk:function(t,e,i){t?null==this.Qb&&(this.Qb=new BkSprite("#"+e),this.Qb.x=this.Qb.width/2,this.Qb.y=this.Qb.height/2,null!=i?this.addChild(this.Qb,i):this.addChild(this.Qb,-1),e=(t=cc.fadeOut(1)).reverse(),i=cc.delayTime(.25),t=cc.sequence(t,i,e).repeatForever(),this.Qb.runAction(t)):null!=this.Qb&&(this.Qb.stopAllActions(),this.Qb.removeFromParent(),this.Qb=null)},setOpacity:function(t){this._super(t),this.li&&null!=this.jh&&this.jh.setOpacity(t)},EG:function(){this.jh=new cc.LabelBMFont("",res.Bs),this.jh.x=this._getNormalSize().width/2+.5,this.jh.y=this._getNormalSize().height/2+.5,this.addChild(this.jh,100)},setTitleText:function(t){this.li?this.jh.setString(t,!0):this._super(t)},wL:function(){return console.log("BkButton - this.getTitleLabel"),this.li?(console.log("BkButton - getTitleLabel() return this._titleButtonBMF"),this.jh):this.getTitleRenderer()},setTitleFontSize:function(t){this.li?18!=t&&this.jh.setScale(t/18):isWebPlatform()?(this._super(2*t),this.getTitleRenderer().setScale(.5)):this._super(t)},Wx:function(){var t=this;this.Rf=xb((function(){null!=t.Yk&&t.Yk()}),(function(){null!=t.Zk&&t.Zk()}),(function(){})),cc.eventManager.addListener(this.Rf,this)},jT:function(t,e){isWebPlatform()&&(this.Yk=t,this.Zk=e)},loadTextures:function(t,e,i,n,s){this._super(t,e,i,s),isWebPlatform()&&null!=n&&cc.isString(n)&&this.LN(n,s)},_initRenderer:function(){this._super()},_adaptRenderers:function(){this._super(),isWebPlatform()&&this.Ys&&(this.DG(),this.Ys=!1)},_onSizeChanged:function(){this._super(),isWebPlatform()&&(this.Ys=!0)},DG:function(){this._buttonScale9Renderer.setContentSize(this._contentSize),this._buttonScale9Renderer.setPosition(this._contentSize.width/2,this._contentSize.height/2)},LN:function(t,e){if(isWebPlatform()&&t){var i;switch(e=e||ccui.Widget.LOCAL_TEXTURE,this.Tx=t,this.Xs=e,this.Xs){case ccui.Widget.LOCAL_TEXTURE:i=this._createSpriteFrameWithFile(t);break;case ccui.Widget.PLIST_TEXTURE:"#"===t[0]&&(t=t.substr(1,t.length-1)),i=this._createSpriteFrameWithName(t)}i&&(i._textureLoaded?(this.Rx=i,this._updateChildrenDisplayedRGBA(),this.Ux=!0,this._findLayout(),this.Yk=function(){this._buttonScale9Renderer.setState(ccui.Scale9Sprite.state.NORMAL),this.Ux&&this._buttonScale9Renderer.setSpriteFrame(this.Rx)},this.Zk=function(){this._buttonScale9Renderer.setSpriteFrame(this._buttonNormalSpriteFrame),this._buttonScale9Renderer.setState(ccui.Scale9Sprite.state.NORMAL)}):(this.Ws.clear(),this.Ws.once(i,(function(){this.loadTextureDisabled(this.Tx,this.Xs)}),this)))}},ad:function(t,e){isWebPlatform()&&(this.Cd=xb(t,e),cc.eventManager.addListener(this.Cd,this))},ef:function(t){this.setBright(t),this.setTouchEnabled(t),this.eT(t)},eT:function(t){isWebPlatform()&&(t?this.Rf.setEnabled(!0):(cc._canvas.style.cursor="default",this.Rf.setEnabled(!1)))},Ya:function(t){this.ef(t),this.visible=t},kT:function(t){this.by=t,null!=this.getTitleText()&&(this.by?this.setTitleColor(cc.color(255,255,255)):this.setTitleColor(cc.color(251,234,180)))},Yb:function(t,e){void 0===e&&(e=t),isWebPlatform()||this.setScale(e,e)}}),BkButton.create=function(t,e,i,n){return new BkButton(t,e,i,n)},BkButtonWithHint=BkButton.extend({Ed:null,Yq:!1,ctor:function(t,e,i,n,s){this._super(t,e,i,n,s)},NL:function(){null==this.Ed&&(this.Ed=new BkSprite("#arrow.png")),this.Ed.x=this.width/2,this.Ed.y=50,this.Ed.scaleX=.5,this.Ed.scaleY=.6,this.Ed.visible=!1,this.addChild(this.Ed),this.Yq=!1},Wx:function(){var t=this;this.Rf=xb((function(){t.Qx.setVisible(!0),t.Sx.setVisible(!1),null!=t.Yk&&t.Yk()}),(function(){t.Qx.setVisible(!1),t.Sx.setVisible(!0),null!=t.Zk&&t.Zk()}),(function(){t.Qx.setVisible(!1)})),cc.eventManager.addListener(this.Rf,this.Sx)},x5:function(t){t?(null==this.Ed&&this.NL(),this.Ed.visible=t,this.iy(this.Ed.x,this.Ed.y,.25)):this.GU()},GU:function(){null!=this.Ed&&(this.Ed.removeFromParent(),this.Ed=null)},iy:function(t,e,i){var n=cc.callFunc((function(){e=(this.Yq=!this.Yq)?e-15:e+15,this.iy(t,e,i)}),this),s=cc.moveTo(i,t,e);n=cc.sequence(s,n);this.Ed.runAction(n)}}),P_ITEM_PADDING_X=8,P_BTN_HEIGHT=38,P_BTN_TEXT_COLOR=cc.color(255,239,131),P_BTN_TEXT_COLOR_HOVER=cc.color(252,246,95),BkBtnPayment=BkSprite.extend({Hj:null,kt:null,Cz:null,ctor:function(t,e){var i;i=e<(i=[0,30,50,100,150,200,300,400,500,600,700,800]).length?i[e]:Vk;var n=cc.rect(106,P_BTN_HEIGHT,106,P_BTN_HEIGHT);t==P?i>Vk&&(n=cc.rect(146,P_BTN_HEIGHT,146,P_BTN_HEIGHT)):n=i>Vk?cc.rect(76,P_BTN_HEIGHT,76,P_BTN_HEIGHT):cc.rect(42,P_BTN_HEIGHT,42,P_BTN_HEIGHT),this._super(),this.setContentSize(cc.size(n.width,n.height)),this.Hj=n,this.kt=i,this.Cz=t,this.TL()},TL:function(){var t;(t=Il(BkGlobal.ja)?new cc.Scale9Sprite("bg_addMoney_chess.png"):new cc.Scale9Sprite("bg_addMoney.png")).visible=!1,t.width=this.Hj.width,t.height=this.Hj.height,t.visible=!0,t.x=this.width/2,t.y=this.height/2,this.addChild(t,-1);var e=new BkSprite("#icon_addMoney.png");e.x=e.width/2+12,e.y=t.height/2+.5,this.addChild(e);var i=new BkLabel(this.kt+"%","",15,!0);if(i.setTextColor(cc.color(250,24,2)),i.enableOutline(cc.color.WHITE,3),this.Cz==P){var n=new BkLabel("Nạp tiền","",16);n.x=e.x+e.width/2+n.getContentSize().width/2+P_ITEM_PADDING_X,n.y=e.y,n.setColor(P_BTN_TEXT_COLOR),this.addChild(n),i.x=n.x+n.getContentSize().width/2+i.getContentSize().width/2+5,i.y=n.y}else i.x=e.x+e.width/2+i.getContentSize().width/2+5,i.y=e.y;this.kt>Vk?(n&&n.setFontSize(15),this.addChild(i),BkGlobal.Sa==P&&this.Kk(!0,"highlight_naptien.png")):this.Kk(!1);var s,r=this;this.ad((function(){s=Il(BkGlobal.ja)?cc.spriteFrameCache.getSpriteFrame("bg_addMoney_hover_chess.png"):cc.spriteFrameCache.getSpriteFrame("bg_addMoney_hover.png"),t.initWithSpriteFrame(s),t.width=r.Hj.width,t.height=r.Hj.height,n&&n.setColor(P_BTN_TEXT_COLOR_HOVER),e.initWithSpriteFrameName("icon_addMoney_hover.png")}),(function(){s=Il(BkGlobal.ja)?cc.spriteFrameCache.getSpriteFrame("bg_addMoney_chess.png"):cc.spriteFrameCache.getSpriteFrame("bg_addMoney.png"),t.initWithSpriteFrame(s),t.width=r.Hj.width,t.height=r.Hj.height,n&&n.setColor(P_BTN_TEXT_COLOR),e.initWithSpriteFrameName("icon_addMoney.png")}))},Kk:function(t,e){if(t){if(null==this.Qb){this.Qb=new BkSprite("#"+e),this.Qb.x=this.Qb.width/2,this.Qb.y=this.Qb.height/2+.5,this.addChild(this.Qb,-1);var i=(s=cc.fadeOut(1)).reverse(),n=cc.delayTime(.25),s=cc.sequence(s,n,i).repeatForever();this.Qb.runAction(s)}}else null!=this.Qb&&(this.Qb.stopAllActions(),this.Qb.removeFromParent(),this.Qb=null)}}),cc.Scene.extend({_className:"BkBaseScene",ctor:function(){this._super(),this.init()}}),WD_ZORDER_WINDOW=-3,WD_ZORDER_TOP=2,WD_ZORDER_BODY=-2,WD_BODY_MARGIN_TB=WD_BODY_MARGIN_LR=22,BkStackWindow={aj:null,Vn:function(){null==this.aj&&(this.aj=new BkStack)},oR:function(t){this.Vn(),this.aj.nR(t),logMessage("pushWindow length "+this.yl())},ak:function(){return this.Vn(),logMessage("getTopWindow length "+this.yl()),this.aj.xL()},pop:function(){return this.Vn(),logMessage("pop length "+this.yl()),this.aj.pop()},isEmpty:function(){return this.Vn(),0==this.aj.yl()},yl:function(){return this.Vn(),this.aj.yl()},OI:function(){this.aj=null}},BkWindow=BkBaseLayer.extend({kh:null,Q:null,Aj:null,lb:null,Gc:null,sX:null,Ac:null,Zb:null,Pa:null,hi:null,Tf:null,dy:null,Dp:null,Gp:null,cy:!1,Ss:null,Ap:null,Tl:[],ctor:function(t,e,i,n){var s=cc.director.getWinSize();e.width>.9*s.width&&(e.width=.9*s.width),e.height>.9*s.height&&(e.height=.9*s.height),this.Q=cc.size(e.width,e.height),this.Ab(i),this._super(),logMessage("Call WD : "+t),this.init(t,n),this.Tl=[]},init:function(t,e){null==e&&(e=!1),this.Gp=!1,this.setName("BkWindow"),this.lb=new cc.Layer;var i=cc.rect(250,12,250,6);this.Ac=e?new cc.Scale9Sprite("window_header.png",i):new cc.Scale9Sprite("window_noSbTab_header.png",i),this.Ac.width=this.Q.width,this.Ac.x=this.Q.width/2,this.Ac.y=this.Q.height-this.Ac.height/2,this.lb.addChild(this.Ac,WD_ZORDER_TOP),this.kh=new BkLabel(t,"Arial",20,!0),this.kh.color=cc.color(255,255,255),this.kh.x=this.Q.width/2,this.kh.y=this.Ac.y,this.kh.enableShadow(cc.color(13,59,85),cc.p(2,-2)),this.lb.addChild(this.kh,WD_ZORDER_TOP),this.Zb=new BkButton("btn_close_popup.png","btn_close_popup.png","btn_close_popup.png","btn_close_hover_popup.png",ccui.Widget.PLIST_TEXTURE),this.Zb.setScale(GAME_SCALE),this.Zb.x=this.Q.width-this.Zb.width/2*GAME_SCALE,this.Zb.y=this.Ac.y,this.Zb.addTouchEventListener((function(t,e){e==ccui.Widget.TOUCH_ENDED&&(logMessage("click btnClose"),isWebPlatform()&&(cc._canvas.style.cursor="default"),this.removeSelf(),null!=this.Ss&&this.Ss())}),this),this.lb.addChild(this.Zb,WD_ZORDER_TOP),this.Iq(e),this.hi=new cc.Scale9Sprite("window_bottom.png",i),this.hi.width=this.Q.width,this.hi.x=this.Q.width/2,this.hi.y=this.Pa.y-this.Q.height/2+.5*this.hi.height,this.lb.addChild(this.hi,WD_ZORDER_BODY)},Iq:function(t){t=t?cc.spriteFrameCache.getSpriteFrame("window_body_bg.png"):cc.spriteFrameCache.getSpriteFrame("window_noSubTab_body_bg.png"),this.Pa=new cc.Scale9Sprite(t),this.Pa.width=this.Q.width,this.Pa.height=this.Q.height-this.Ac.height,this.Pa.x=this.Q.width/2,this.Pa.y=this.Ac.y-this.Q.height/2+.5,this.lb.addChild(this.Pa,WD_ZORDER_BODY)},o4:function(t){this.Ss=t},df:function(t){this.Ap=t},d0:function(){return this.kh},s5:function(t){this.kh.setString(t)},a0:function(){return this.Ac.height},c0:function(){return this.Q},r5:function(t,e){this.Q=cc.size(t,e)},ab:function(){return cc.size(this.Q.width,this.Q.height-2*this.Ac.height)},NZ:function(){return this.Aj},OZ:function(){return this.lb},F_:function(){return this.Tf},Ab:function(t){this.Tf=t},Cw:function(){this.Aj=cc.size(this.ab().width-2*WD_BODY_MARGIN_LR,this.ab().height-WD_BODY_MARGIN_TB);var t=new cc.DrawNode,e=cc.color(18,37,98);t.drawRect(cc.p(0,0),cc.p(this.Aj.width,this.Aj.height),e,1,e),t.x=WD_BODY_MARGIN_LR,t.visible=!1,this.T(t,-1)},zT:function(t){this.Ac.visible=t},xT:function(t){this.hi.visible=t},m5:function(t){this.Pa.visible=t},T:function(t,e,i){this.lb.addChild(t,void 0===e?0:e,void 0===i?0:i)},uu:function(){return cc.p(this.lb.x-this.Gc.x,this.lb.y-this.Gc.y)},Cc:function(t){if(this.cy=t){var e=cc.director.getWinSize();this.Gc=new BkSprite(res.Vr),this.Gc.setOpacity(210),this.Gc.x=e.width/2,this.Gc.y=e.height/2,t=e.width/this.Gc.getContentSize().width,e=e.height/this.Gc.getContentSize().height,this.Gc.scaleX=t,this.Gc.scaleY=e,isWebPlatform()||(this.Gc.scaleX=2*t,this.Gc.scaleY=2*e);var i=this,n=!1;this.Dp=yb((function(t){if(n=!1,i.Gp)return!1;t=i.convertToNodeSpace(t.getLocation()),cc.log("location "+t.x+" - "+t.y);var e=cc.rect(i.lb.x,i.lb.y,i.Q.width,i.Q.height);if(cc.rectContainsPoint(e,t))return logMessage("insize window"),!1;logMessage("outzise window -> remove window"),n=!0}),null,(function(){n&&i.removeSelf()})),cc.eventManager.addListener(this.Dp,this.Gc)}else null!=this.Dp&&cc.eventManager.removeListener(this.Dp)},Qo:function(t){if(!t&&t){var e=this;this.dy=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(t,e){var i=(n=e.getCurrentTarget()).convertToNodeSpace(t.getLocation()),n=n.getContentSize();n=cc.rect(0,0,n.width,n.height);return!!cc.rectContainsPoint(n,i)},onTouchMoved:function(t,i){var n=(s=i.getCurrentTarget()).convertToNodeSpace(t.getLocation()),s=s.getContentSize();s=cc.rect(0,0,s.width,s.height);cc.rectContainsPoint(s,n)&&(e.Gp=!0,n=t.getDelta(),e.x+=n.x,e.y+=n.y,e.x<-e.Q.width/2&&(e.x=-e.Q.width/2),logMessage("[x: "+e.x+"- y: "+e.y+"]"),null!=e.Gc&&(e.Gc.x-=n.x,e.Gc.y-=n.y))},onTouchEnded:function(){e.Gp=!1}}),cc.eventManager.addListener(this.dy,this.Ac)}},xP:function(){logMessage("preprocessBeforeRemoveWindow"),BkStackWindow.pop(),this.qK(),this.Tf?(logMessage("co parent node -> resume event parent node"),cc.eventManager.resumeTarget(this.Tf,!0)):this.oS(),isWebPlatform()&&(cc._canvas.style.cursor="default"),null!=this.Ap&&(logMessage("this._callbackRemoveWindow!= null"),this.Ap(),this.Ap=null)},removeSelf:function(t){this.removeFromParent(t)},removeFromParent:function(t){this.xP(),this._super(t)},Oa:function(t,e){logMessage("window showWithParent");var i=getCurrentScene();if(null!=i){var n=i.getChildByTag(dl);null!=n&&null!=n&&n.removeSelf()}isWebPlatform()&&(cc._canvas.style.cursor="default"),n=cc.director.getWinSize(),this.lb.x=n.width/2-this.Q.width/2,this.lb.y=n.height/2-this.Q.height/2,this.addChild(this.lb,WD_ZORDER_WINDOW),this.cy&&this.addChild(this.Gc,-4),n=!0,null!=t&&null!=t&&(n=t),n&&(this.Tf?(logMessage("co parent node -> pause parent node"),cc.eventManager.pauseTarget(this.Tf,!0)):this.rP()),null!=i&&(null!=e&&null!=e?i.addChild(this,Td,e):i.addChild(this,Td)),this.MJ(),BkStackWindow.oR(this)},rP:function(){logMessage("khong co parent node -> pauseEventLastWindow");var t=BkStackWindow.ak();null==t?(logMessage("chua show 1 wd nao truoc day -> pause scene"),t=getCurrentScene(),cc.isUndefined(t)||null==t||(t.lo=!0,cc.eventManager.pauseTarget(t,!0))):cc.eventManager.pauseTarget(t,!0)},oS:function(){logMessage("khong co parent node -> resumeEventLastWindow");var t=BkStackWindow.ak();null==t?(logMessage("hien tai chi show crWD -> resume scene"),t=getCurrentScene(),cc.isUndefined(t)||null==t||(t.lo=!1,cc.eventManager.resumeTarget(t,!0))):cc.eventManager.resumeTarget(t,!0)},Mm:function(t){this.Tl.push(t)},MJ:function(){var t=BkStackWindow.ak();if(null!=t)for(var e=0;e<t.Tl.length;e++)t.Tl[e].Lk(!0,!0)},qK:function(){var t=BkStackWindow.ak();if(null!=t)for(var e=0;e<t.Tl.length;e++)t.Tl[e].Lk(!1,!0)}}),BkBaseChessWindow=BkWindow.extend({Za:null,ctor:function(t,e,i,n){this._super(t,e,i,n),this.Cc(!0),this.zT(!1),this.xT(!1),this.Zb.Ya(!1)},Iq:function(t){var e="mini_popupframe.png",i=this.Q.width,n=GAME_SCALE;isWebPlatform()&&(t&&(e="info_frame.png"),500>this.Q.width?n=.6:600>this.Q.width&&(n=.9)),t=cc.spriteFrameCache.getSpriteFrame(e),e=cc.rect(75,80,425,379),this.Pa=new cc.Scale9Sprite(t,e),isWebPlatform()||(i=this.Pa.getContentSize().width),this.Pa.width=i*GAME_SCALE,this.Pa.height=this.Q.height,this.Pa.x=this.Q.width/2,this.Pa.y=this.Q.height/2,this.lb.addChild(this.Pa,WD_ZORDER_BODY),1>(i=n)&&!isWebPlatform()&&(i=1),this.Za=new BkSprite("#header.png"),this.Za.setScaleX(n),this.Za.setScaleY(i),this.Za.x=this.Q.width/2,this.Za.y=this.Q.height-this.Za.getBoundingBox().height/2,this.lb.addChild(this.Za,WD_ZORDER_BODY)},Ob:function(t,e,i){e=void 0===e?0:e,t=new BkSprite("#"+t),i?t.setScale(i):t.setScale(GAME_SCALE),t.x=this.Za.x,t.y=this.Za.y+e*GAME_SCALE,this.lb.addChild(t,WD_ZORDER_BODY)}}),TAB_WD_BUTTON_MARGIN_TOP=12*GAME_SCALE_HEIGHT,TAB_WD_BUTTON_MARGIN_LEFT=84*GAME_SCALE_WIDTH,TAB_WD_BUTTON_MARGIN=3,TAB_WD_BODY_MARGIN_LR=22*GAME_SCALE_WIDTH,TAB_WD_BODY_MARGIN_TB=22*GAME_SCALE_HEIGHT,BkTabWindow=BkBaseChessWindow.extend({nc:null,ii:null,$s:null,va:null,of:null,at:null,Jp:null,ctor:function(t,e,i,n){logMessage("Create tab windows: "+t+" size: "+e.width+":"+e.height),this._super(t,e,null,!0),this.$s=i,this.nc=1,this.of=n,this.Rn(),this.kh.setVisible(!1)},gf:function(t,e){t&&(t.kT(e),e?t.loadTextures("Tab_active_popup.png","Tab_active_popup.png","Tab_active_popup.png","Tab_active_popup.png",ccui.Widget.PLIST_TEXTURE):t.loadTextures("Tab_no_active_popup.png","Tab_no_active_popup.png","Tab_no_active_popup.png","Tab_no_active_hover_popup.png",ccui.Widget.PLIST_TEXTURE))},Rn:function(){this.ii=new cc.DrawNode,this.T(this.ii,0,0),this.va=[];for(var t=0;t<this.$s;t++){var e=this.wJ();this.Gh(e,t+1),this.va.push(e)}if(this.xh(),null!=this.of)for(t=0;t<this.of.length;t++)(e=this.va[t]).setTitleText(this.of[t]),0==t?this.gf(e,!0):this.gf(e,!1);else logMessage("Error: Must addTabChangeEventListener to callback handle")},Gh:function(t,e){this.gf(t,!0),t.setTitleFontSize(18),t.x=0,t.y=this.Ac.y-t.height/2+TAB_WD_BUTTON_MARGIN_TOP,t.getTitleRenderer().enableShadow(cc.color(13,59,85),cc.p(2,-2)),this.T(t,WD_ZORDER_TOP);var i=this;t.jT((function(){e==i.nc&&isWebPlatform()&&(cc._canvas.style.cursor="default")}),null),t.addTouchEventListener((function(t,n){n==ccui.Widget.TOUCH_ENDED&&e!=i.nc&&i.Ct(e)}))},Ct:function(t){this.nc=t,this.fn(t),this.CS(t)},fn:function(t){for(var e=0;e<this.$s;e++)this.gf(this.va[e],!1);this.gf(this.va[t-1],!0)},xh:function(t){for(t=void 0!==t?t:TAB_WD_BUTTON_MARGIN_LEFT,this.va[0].x=t+.5,t=1;t<this.va.length;t++){var e=this.va[t-1];this.va[t].x=e.x+e.width+TAB_WD_BUTTON_MARGIN}},PZ:function(){return null==this.va||0==this.va.length?this.Ac.y-TAB_WD_BUTTON_MARGIN_TOP:this.va[0].y-this.va[0].height},AY:function(t){t=void 0!==t?t:TAB_WD_BUTTON_MARGIN_TOP;for(var e=0;e<this.va.length;e++)this.va[e].y=this.Ac.y+t},CS:function(t){logMessage("BkTabWindow - selectedTab"),this.Jp&&(this.at?this.Jp.call(this.at,this,t):this.Jp(this,t))},Lp:function(t,e,i){null==i&&(i=this.nc),this.Jp=t,this.at=e,this.Ct(i)},YZ:function(){return this.nc},w4:function(t){this.nc=t},VZ:function(){return cc.p(this.ii.x,this.ii.y)},QZ:function(){return this.ii},a7:function(t){this.ii.visible=t},wJ:function(){return new BkButton("Tab_no_active_popup.png","Tab_no_active_popup.png","Tab_no_active_popup.png","Tab_no_active_hover_popup.png",ccui.Widget.PLIST_TEXTURE)}}),BkCountDownTime=cc.ProgressTimer.extend({Hi:null,e7:null,I3:null,callback:null,cl:null,ft:null,tg:0,jC:300,Cf:null,th:null,ys:0,vu:0,Ds:0,ctor:function(t){this.Hi=new BkSprite(t),this._super(this.Hi),this.type=cc.ProgressTimer.TYPE_RADIAL,this.x=this.Hi.getWidth()/2,this.y=this.Hi.getHeight()/2,this.setReverseDirection(!0),this.Cf=new BkSprite("#pointtime.png"),this.Cf.x=this.Hi.getWidth()/2,this.Cf.y=this.Hi.getHeight(),this.Cf.visible=!1,this.addChild(this.Cf),this.ys=this.Hi.getWidth(),this.vu=this.Hi.getHeight(),this.th=cc.p(this.ys/2,this.vu/2),this.Ds=this.ys/2-.05*this.ys,this.retain()},setCallback:function(t){this.callback=t},VS:function(t){this.cl=t},Xr:function(t){this.ft=Math.floor(1500/t),15>t&&null!=this.cl&&this.cl();var e=cc.progressFromTo(t,100,0);this.tg=0,this.jC=t/.1-1,this.runAction(e.repeat(1)),this.schedule(this.KC,.1)},KC:function(){this.fV(this.getPercentage(),this),this.ft&&Math.floor(this.getPercentage())==this.ft&&null!=this.cl&&(logMessage("alarmCallBack "+Math.floor(this.getPercentage())),this.cl(),this.cl=null),this.tg++,this.tg>=this.jC&&null!=this.callback&&this.callback()},fV:function(t,e){if(100==(t=100-t))e.sD();else{var i,n;if(0==t)i=e.th.x,n=e.vu;else if(50==t)i=e.th.x,n=0;else{var s;i=2*Math.PI*t/100,i=Math.PI/2-i,n=Math.tan(i),s=e.Ds/Math.sqrt(n*n+1),25>t&&0<=t?i=e.th.x+s:50<=t&&75>t?i=e.th.x-s:(i=-i+Math.PI,n=-Math.tan(i),s=e.Ds/Math.sqrt(n*n+1),i=75<=t?e.th.x-s:e.th.x+s),n=n*(i-e.th.x)+e.th.y}e.Cf.visible||(e.Cf.visible=e),e.Cf.x=i,e.Cf.y=n}},sD:function(){null!=this.Cf&&(this.Cf.removeFromParent(),this.Cf=null)},Er:function(){this.unschedule(this.KC),this.sD(),this.removeFromParent(),this.release()}}),BkLabel=ccui.Text.extend({ctor:function(t,e,i,n,s){e=cm(void 0!==n&&n,void 0!==s&&s),this._super(t,e,i),this.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),this.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT),isWebPlatform()&&this.setScale(.5),this.retain()},getContentSize:function(){var t=this._super();return isWebPlatform()?cc.size(t.width/2,t.height/2):t},_getWidth:function(){return this.getContentSize().width},_getHeight:function(){return this.getContentSize().height},setFontSize:function(t){isWebPlatform()?this._super(2*t):this._super(t)},removeFromParent:function(t){this._super(t),this.release()},Yb:function(t,e){void 0===e&&(e=t),isWebPlatform()||this.setScale(t,e)}}),BkEditBox=cc.EditBox.extend({B0:!1,DY:0,_edTxt:null,ctor:function(t,e){this._super(t,e),this.setInputMode(cc.EDITBOX_INPUT_MODE_SINGLELINE),this.setInputFlag(cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_SENTENCE),this.setPlaceholderFontName("Arial"),this.stayOnTop(!1)},setFontSize:function(t){this._super(t),this.setPlaceholderFontSize(t)},Lk:function(t,e){var i=!t;this.setTouchEnabled(i),this.setVisible(i),e&&(t?(this.GE=this.getString(),this.setString("")):this.GE&&this.setString(this.GE))},g4:function(){},i5:function(){},h5:function(){},g5:function(){},e5:function(){},d5:function(){},k4:function(){},Q4:function(){},E4:function(){},N4:function(){}});var An=cc.Class.extend({uZ:null,container:null,zOrder:0,ctor:function(t,e){this.container=t,e&&(this.zOrder=e)},editBoxEditingDidBegin:function(t){logMessage("editBoxEditingDidBegin"),BkGlobal.yA=!0,this.container&&isFBInstantGame()&&(this.sS=this.container.getPosition(),0<(t=this.container.convertToNodeSpace(cc.p(.5*cc.winSize.width,.6*cc.winSize.height)).y-t.y)&&(this.container.y+=t))},editBoxEditingDidEnd:function(){logMessage("editBoxEditingDidEnd"),BkGlobal.yA=!1,isFBInstantGame()&&this.container.setPosition(this.sS)},editBoxTextChanged:function(){},editBoxReturn:function(){logMessage("editBoxReturn"),BkGlobal.yA=!1}});BkCheckBox=ccui.CheckBox.extend({ctor:function(){this._super(),this.setTouchEnabled(!0),this.loadTextures("checkbox_unchecked.png","checkbox_unchecked_hover.png","checkbox_checked.png","checkbox_unchecked_disable.png","checkbox_checked_disable.png",ccui.Widget.PLIST_TEXTURE)},B4:function(t){this.setBright(t),this.setTouchEnabled(t)}}),DELAYY=DELAYX=0,CARD_HEIGHT=116,CARD_WIDTH=84,TAG_SELECT=1,TAG_DESELECT=2,TAG_DEAL_CARD=3,NHEP=0,RO=1,CO=2,BICH=3,CARD_STATUS_TAKEN=2,CARD_STATUS_CURRENT=3,CARD_STATUS_DISCARD=4,YPOS_ONHAND_DOWN=119,YPOS_ONHAND_UP=YPOS_ONHAND_DOWN+15,BkCard=BkSprite.extend({id:-1,vi:null,eh:null,Kx:1e3,Es:0,ux:1,Jj:0,wy:0,sB:null,Wu:!0,handle:null,un:null,Wv:0,d3:null,vt:null,type:0,ej:0,cm:null,Je:null,nr:null,Th:null,mo:!1,Ml:!1,pl:null,ni:null,Ts:null,ctor:function(t,e){this._super(),this.ej=t,this.type=e,this.id=this.fg(),this.init(t,e)},init:function(t,e){this.Jj=this.Es,this.FA(t,e),this.ve=this.sB=!1,this.Wu=!0,this.mo=!1},F4:function(t){this.mo=t},CR:function(t){this.ej=Math.floor(t/4),this.type=t%4,this.id=t,null!=this.vi&&this.vi.removeSelf(),this.vi=null,this.FA(this.ej,this.type)},FA:function(t,e){0==e&&(e=4),null==this.vi&&(this.vi=new BkSprite(res.qF,cc.rect(DELAYX*t+CARD_WIDTH*(t-1),DELAYY*e+CARD_HEIGHT*(e-1),CARD_WIDTH,CARD_HEIGHT))),this.vi.x=CARD_WIDTH/2,this.vi.y=CARD_HEIGHT/2,this.width=CARD_WIDTH,this.height=CARD_HEIGHT,this.addChild(this.vi)},v0:function(){this.eh=this.fA(),null!=this.eh&&(this.eh.x=45,this.eh.y=95,this.addChild(this.eh))},w0:function(t){var e=!1;switch(t){case qb:case rb:case pb:e=!0}(1>this.ej||13<this.ej)&&(e=!1),e&&(this.eh=this.fA(),null!=this.eh&&(this.eh.x=45,this.eh.y=95,this.addChild(this.eh)))},fA:function(){var t=null;switch(this.type){case RO:t=cc.rect(1,0,24,22);break;case CO:t=cc.rect(25,0,24,22);break;case BICH:t=cc.rect(49,0,24,22);break;case NHEP:t=cc.rect(73,0,24,22)}return null==t?null:new BkSprite(res.lY,t)},VL:function(){null==this.uf&&(this.uf=new BkSprite(res.qF,cc.rect(14*DELAYX+13*CARD_WIDTH,1*DELAYY+0*CARD_HEIGHT,CARD_WIDTH,CARD_HEIGHT)),this.addChild(this.uf,100)),this.uf.x=CARD_WIDTH/2,this.uf.y=CARD_HEIGHT/2,this.uf.width=CARD_WIDTH,this.uf.height=CARD_HEIGHT,this.uf.visible=!0},n4:function(t){this.vt=t},IR:function(){null!=this.uf&&(this.uf.removeFromParent(),this.uf=null)},WL:function(){null==this.lg&&(this.lg=new BkSprite("#mask.png"),this.addChild(this.lg)),this.lg.x=CARD_WIDTH/2-1,this.lg.y=CARD_HEIGHT/2,this.lg.width=CARD_WIDTH-2,this.lg.height=CARD_HEIGHT,this.lg.visible=!0},HR:function(){null!=this.ni&&(this.ni.removeFromParent(),this.ni=null)},e1:function(){return null!=this.ni},A5:function(){this.HR(),this.ni=new BkSprite("#card_invisible.png"),this.ni.x=CARD_WIDTH/2,this.ni.y=CARD_HEIGHT/2,this.addChild(this.ni)},j0:function(){null!=this.lg&&(this.lg.visible=!1)},Vx:function(){this.cm=xb(),cc.eventManager.addListener(this.cm,this),this.Je=yb((function(t,e){var i=e.getCurrentTarget();BkLogicManager.oa().ZC(i)}),(function(){}),(function(){})),cc.eventManager.addListener(this.Je,this)},q0:function(t,e,i,n){this.NR();var s=10;null!=n&&0<=n&&(s=n);var r=null;this.cm=xb(),cc.eventManager.addListener(this.cm,this),this.nr=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(e,i){var n=i.getCurrentTarget(),s=n.convertToNodeSpace(e.getLocation()),o=n.getContentSize();o=cc.rect(0,0,o.width,o.height);return!!cc.rectContainsPoint(o,s)&&(null!=t&&null!=t&&t(n),r=cc.p(n.x,n.y),!0)},onTouchMoved:function(t,e){var n=e.getCurrentTarget(),o=t.getDelta();n.x+=o.x,n.y+=o.y,(Math.abs(n.x-r.x)>s||Math.abs(n.y-r.y)>s)&&null!=i&&null!=i&&i(n,!0)},onTouchEnded:function(t,i){J();var n=i.getCurrentTarget();Math.abs(n.x-r.x)>s||Math.abs(n.y-r.y)>s?null!=e&&null!=e&&e(n,n.x,n.y):n.Wu&&(n.x=r.x,n.y=r.y,BkLogicManager.oa().ZC(n))}}),cc.eventManager.addListener(this.nr,this)},isSelected:function(){return this.Jj==this.ux},DJ:function(t){logMessage("deSelect "+this.toString()),this.xH(t)},AS:function(t){this.yH(t)},xZ:function(){this.hw(),logMessage("enableEventHoverAndClick:"+this.id),this.Vx()},NR:function(){cc.eventManager.removeListener(this.Je),cc.eventManager.removeListener(this.cm)},hw:function(){cc.eventManager.removeListener(this.Je),cc.eventManager.removeListener(this.cm),null!=this.nr&&cc.eventManager.removeListener(this.nr)},TD:function(t){this.handle=t},x4:function(t){this.Ts=t},gG:function(){this.ve?logMessage("return"):null!=this.Ts?this.Ts(this):this.Jj==this.Es?this.AS(TAG_SELECT):this.DJ(TAG_DESELECT)},m6:function(){this.iS(),this.stopAllActions(),this.Vp()},IU:function(){this.stopActionByTag(this.Kx),null!=this.un&&(this.x=this.un.x,this.y=this.un.y)},EE:function(){this.IU(),this.Vp()},wH:function(){this.ve=!1,this.removeFromParent()},cD:function(){if(null==this.Th&&(this.Th=[],this.Ml=!1),0<this.Th.length){this.Ml=!0;var t=this.Th.shift();this.fz(t.nz,t.zs,t.iF,t.tag)}else this.Ml=!1},iS:function(){this.mo&&(this.Th=[],this.Ml=!1)},IQ:function(t){null==this.Th&&(this.Th=[],this.Ml=!1),this.Th.push(t),t=!this.Ml,1!=this.Th.length||this.ve||(t=!0),t&&this.cD()},move:function(t,e,i,n){this.mo?(t=new BkAnimationCardData(t,e,i,n),this.IQ(t)):this.fz(t,e,i,n)},fz:function(t,e,i,n){this.ve&&(logMessage("stopMoveAction"),this.EE());var s=cc.callFunc(this.Vp,this);this.tag=n;var r=cc.moveTo(t,e,i);(s=cc.sequence(r,s)).tag=this.Kx,this.y!=i||this.x!=e?(this.pl=new BkAnimationCardData(t,e,i,n),this.un=cc.p(e,i),this.ve=!0,this.runAction(s)):(logMessage("x,y not change -> call cardAnimationFinish not run action"),this.Vp())},d2:function(t,e,i,n,s,r){var o=this,a=cc.callFunc(this.wH,this,1.2),c=cc.callFunc((function(){o.ve=!1}),this,1.2);this.tag=n,n=.5,null!=r&&(n=r),e=cc.moveTo(t,e,i),t=cc.scaleTo(t,n),t=cc.spawn(e,t),a=cc.sequence(t,a),null!=s&&0==s&&(a=cc.sequence(t,c)),this.ve=!0,this.runAction(a)},Vp:function(){null!=this.vt&&this.vt(this),null!=this.handle&&this.handle.s2(this),this.ve=!1,this.pl=this.un=null,this.mo&&this.cD()},yH:function(t,e){var i=this.x;this.ve&&null!=this.pl&&(i=this.pl.zs);var n=YPOS_ONHAND_UP;null!=e&&e&&(n=this.y+15),null==t&&(t=""),this.tag=t,this.Jj=this.ux,this.move(.1,i,n,t),this.Wr(!1),this.Tw(!0)},xH:function(t,e){null==t&&(t="");var i=this.x;this.ve&&null!=this.pl&&(i=this.pl.zs);var n=YPOS_ONHAND_DOWN;null!=e&&e&&(n=this.y-15),this.tag=t,this.Jj=this.Es,this.move(.1,i,n,t),this.Wr(!1),this.Tw(!1)},C4:function(t){this.Wu=t},c5:function(t){(this.sB=t)?(this.hw(),this.Vx()):this.hw()},Tw:function(t){null==this.lg&&this.WL(),this.lg.visible=t},Wr:function(t){t?(null==this.uf&&this.VL(),this.uf.visible=!0):this.IR()},setSize:function(t,e){this.Q=cc.size(t,e)},fg:function(){return 4*this.ej+this.type},B_:function(){return this.ej},getType:function(){return this.type},qU:function(){null==this.bi&&(this.bi=new BkSprite("#line_outer_poker.png"),this.addChild(this.bi)),this.bi.x=this.bi.getContentSize().width/2,this.bi.y=this.bi.getContentSize().height/2,this.bi.visible=!0},C6:function(){null!=this.bi&&(this.bi.visible=!1)},q4:function(t,e){switch(null==e&&(e=!1),logMessage("setCardStatus "+t+" isMe "+e),this.wy=t,this.wy){case CARD_STATUS_TAKEN:e?this.setScale(1):this.setScale(PHOM_CARD_SCALE_INGAME),this.qU();break;case CARD_STATUS_CURRENT:e?this.setScale(1):this.setScale(PHOM_CARD_SCALE_INGAME_CURRENT_CARD)}},toString:function(){return"[cardID: "+this.fg()+" - number: "+this.ej+" - type: "+this.type+" satus: "+this.Jj+" - y:"+this.y+"]"},mZ:function(){var t=cc.rotateBy(.1,0,-5),e=this,i=cc.callFunc((function(){e.setRotation(0),e.Wr(!1)}),this);this.runAction(cc.sequence(t,i))}}),BkTextField=BkSprite.extend({na:null,qj:null,ctor:function(t,e,i,n){this._super(),this.na=new BkSprite(t),this.na.oT(),this.addChild(this.na,0),this.qj=new ccui.TextField(e,i,n),this.qj.ignoreContentAdaptWithSize(!1),this.qj.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.qj.setTextVerticalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.qj.setContentSize(this.na.getContentSize().width-10,this.na.getContentSize().height-10),this.qj.setPosition(this.na.x,this.na.y),this.addChild(this.qj),this.qj.addEventListener(this.TU,this)},TU:function(t,e){switch(this.na.getContentSize(),e){case ccui.TextField.EVENT_ATTACH_WITH_IME:t.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT),t.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_TOP);break;case ccui.TextField.EVENT_DETACH_WITH_IME:t.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.setTextVerticalAlignment(cc.TEXT_ALIGNMENT_CENTER)}}}),BkCountDownText=BkSprite.extend({background:null,El:null,Id:null,pt:null,rt:null,QM:!1,fh:null,ctor:function(t,e,i,n){this._super(),t=!1,null!=e&&(t=e),n?(this.background=new BkSprite("#bg_count_down_co.png"),isWebPlatform()&&(this.background.y=15),this.addChild(this.background)):t&&(this.background=new BkSprite("#stop_watch.png"),this.addChild(this.background)),null==n&&(n=!1),n?(this.Id=new cc.LabelBMFont("",res.Bs),this.Id.x=this.background.x,this.Id.y=this.background.y-20,this.addChild(this.Id)):(this.Id=new cc.LabelBMFont("",res.lp),t&&(this.Id.setScale(.9),this.Id.y=this.background.y+3),this.addChild(this.Id,100)),null!=i&&1==i&&(this.QM=!0,this.El=new BkSprite("#text_tuDongSanSang.png"),this.El.y=15,this.addChild(this.El),this.Id.x=this.El.x+this.El.getContentSize().width/2-60,this.Id.y=this.El.y-2),this.setVisible(!1)},aT:function(t){this.rt=t},zw:function(t){this.pt=t},j5:function(t){this.Id.setFontSize(t)},setTextColor:function(t){this.Id.setTextColor(t)},hE:function(t){this.setVisible(!0),this.fh=t,10>this.fh?this.Id.setString("0"+this.Fp(this.fh)):this.Id.setString(this.Fp(this.fh));var e=this;this.schedule((function(){e.fh--,10>e.fh?e.Id.setString("0"+e.Fp(e.fh)):e.Id.setString(this.Fp(e.fh)),1==e.fh&&null!=e.rt&&e.rt(),0==e.fh&&(null!=e.pt?e.pt():logMessage("Must set callback function to handle onTimerComplete"))}),1)},Fp:function(t){var e="";return(10>t||100>t)&&(e=""),e+t},Er:function(){this.unscheduleAllCallbacks(),this.removeFromParent()}}),BkToolTip=BkSprite.extend({fontSize:16,background:null,Ea:null,Lj:null,ctor:function(t){this._super(),this.background=new cc.Scale9Sprite(t),this.addChild(this.background),this.Ea=new BkLabelTTF("","",this.fontSize,cc.size(360,0),cc.TEXT_ALIGNMENT_CENTER,cc.VERTICAL_TEXT_ALIGNMENT_CENTER),this.Ea.setFontSize(this.fontSize),this.addChild(this.Ea)},setTextColor:function(t){this.Ea.setFontFillColor(t)},Wh:function(t){this.Ea.setString(t);var e=20;t=10,BkGlobal.ja!=K&&BkGlobal.ja!=L||(e=20,t=10),e=this.Ea.getContentSize().width+e,35>(t=this.Ea.getContentSize().height+t)&&(t=35),45>e&&(e=45),this.background.width=e,this.background.height=t},show:function(t,e){if(cc.director.getRunningScene()){var i=cc.director.getRunningScene();null!=t&&(this.x=t),null!=e&&(this.y=e),i.addChild(this,Ud)}},removeSelf:function(){this.removeFromParent(),null!=this.Lj&&this.Lj()},Ro:function(t){this.Lj=t},No:function(t){this.scheduleOnce(this.bu,t)},bu:function(){this.unschedule(this.bu),this.removeSelf()},$D:function(t){t*=2,this.Ea.setContentSize(cc.size(t,0)),this.Ea.setDimensions(cc.size(t,0))}});var Ma=1,tl=2;function Bn(t,e){return cc.EventListener.create({event:cc.EventListener.MOUSE,swallowTouches:!0,onMouseScroll:function(t){var i=(n=t.getCurrentTarget()).convertToNodeSpace(t.getLocation()),n=n.getContentSize();n=cc.rect(0,0,n.width,n.height);return!!cc.rectContainsPoint(n,i)&&(t=cc.sys.isNative?6*t.getScrollY():-t.getScrollY(),i=-(e._contentSize.height-e._innerContainer.getContentSize().height),n=e._innerContainer.getBottomBoundary(),this.zj=(i+n)/i*100,this.zj=0>this.zj+t/90?0:100<this.zj+t/90?100:this.zj+t/90,100>=this.zj&&0<=this.zj&&e.scrollToPercentVertical(this.zj,.2,!0),!0)}.bind(t)}).clone()}BkDialogWindow=BkBaseChessWindow.extend({type:Ma,la:null,We:null,Pe:null,xb:null,am:null,ll:null,Jx:10,Qq:!1,ctor:function(t,e,i){var n=isWebPlatform()?cc.size(520,280):cc.size(700,460),s=50,r=bkScaleSizeUtil(n);logMessage("Windows size after scale: "+r.width+" - "+r.height),null!=i&&(r=i),this._super(t,r),this.Cc(!0),this.type=e,this.Ob("title_wd_thongbao.png"),this.We=bkScaleSizeUtil(n),isWebPlatform()?(this.la=new cc.LabelTTF("","Tahoma",44,cc.size(2*this.We.width-180,0),cc.TEXT_ALIGNMENT_CENTER,cc.VERTICAL_TEXT_ALIGNMENT_TOP),this.la.setScale(.5*GAME_SCALE),this.la.setFontFillColor(v),this.la.setDimensions(cc.size(1.4*n.width,0)),this.la.y=this.Q.height/2+this.la.getBoundingBox().height/4):(this.la=new cc.LabelTTF("Thông báo","Tahoma",30,cc.size(this.We.width-2*s,0),cc.TEXT_ALIGNMENT_CENTER,cc.VERTICAL_TEXT_ALIGNMENT_TOP),t=.035*cc.winSize.height/this.la.getContentSize().height,s=(this.We.width-2*s)/t,this.la.setContentSize(cc.size(s,0)),this.la.setDimensions(cc.size(s,0)),this.la.setScale(t),this.la.setFontFillColor(v),this.la.y=this.Q.height/2+this.la.getContentSize().height/2),this.la.x=this.Q.width/2,this.lb.addChild(this.la),this.Pe=createBkButtonPlist("btnDongy.png","btnDongyPress.png","btnDongy.png","btnDongy.png",""),s=this.Pe.getContentSize().width/2*GAME_SCALE+20,this.Pe.setScale(GAME_SCALE),this.Pe.x=this.la.x+s,this.Pe.y=this.Pe.getContentSize().height*GAME_SCALE*1.1,this.lb.addChild(this.Pe),this.Pe.setVisible(!1);var o=this;this.Pe.addClickEventListener((function(){null!=o.am&&o.df(null),o.removeSelf(),null!=o.am&&(o.am(),o.am=null)})),this.xb=createBkButtonPlist("btnDong.png","btnDongPress.png","btnDong.png","btnDong.png",""),this.xb.setScale(GAME_SCALE),this.xb.x=this.la.x-s,this.xb.y=this.Pe.y,this.lb.addChild(this.xb),this.xb.setVisible(!1),this.xb.addClickEventListener((function(){null!=o.ll&&o.df(null),o.removeSelf(),null!=o.ll&&(o.ll(),o.ll=null)})),this.Dt()},Dt:function(){this.type==Ma?(this.Pe.setVisible(!0),this.Pe.x=this.la.x):this.type==tl&&(this.Pe.setVisible(!0),this.xb.setVisible(!0))},So:function(t){this.la.setString(t)},show:function(){this.Oa()},Hw:function(t){this.am=t},ED:function(t){this.ll=t},setTextColor:function(t){this.la.setFontFillColor(t)}}),BkTextFieldChangeMoney=BkSprite.extend({Bk:null,delay:null,wb:null,Qm:0,ctor:function(t,e){this._super(),this.Qm=e,this.Bk=t,this.wb=0<this.Qm?new cc.LabelBMFont("",res.lp):new cc.LabelBMFont("",res.Cs),this.wb.textAlign=cc.TEXT_ALIGNMENT_CENTER,this.wb.setScale(1),this.setVisible(!1),this.addChild(this.wb),this.wb.retain()},Wh:function(t){this.wb.setString(t),this.wb.x=this.wb.getContentSize().width/2},Rt:function(t,e){void 0===t&&(t=this.Bk.x-this.wb.getContentSize().width/2),void 0===e&&(e=this.Bk.y),this.x=t,this.y=e,isWebPlatform()&&(this.x=t>cc.winSize.width/2?cc.winSize.width-180:150),getCurrentScene().addChild(this),this.delay=0,0<this.Bk.Qh&&(this.delay=2*this.Bk.Qh);var i=cc.callFunc(this.Kv,this),n=cc.callFunc(this.Rv,this),s=cc.delayTime(.5),r=cc.moveTo(1.5,cc.p(this.wb.x,this.wb.y+70));cc.fadeTo(1.5,0),r=cc.spawn(r),i=cc.sequence(n,r,s,i),0==this.delay?this.wb.runAction(i):this.wb.runAction(cc.sequence(cc.delayTime(this.delay),i)),this.Bk.Qh++},Kv:function(){this.Bk.Qh--,this.setVisible(!1),this.removeFromParent(),this.wb.release()},Rv:function(){this.wb.opacity=255,this.setVisible(!0)}}),BkBusyIndicator=cc.Layer.extend({SX:null,Wk:null,A1:null,Kr:0,count:0,$A:!0,ov:!1,gx:null,ctor:function(){this._super();var t=cc.winSize;this.Wk=new BkSprite("#busy_indicator.png"),this.Wk.setScale(GAME_SCALE),this.Wk.x=t.width/2,this.Wk.y=t.height/2,this.addChild(this.Wk)},PD:function(t){this.$A=t},XT:function(){var t=getCurrentScene();if(null!=t){t.addChild(this,Vd),isWebPlatform()&&(cc._canvas.style.cursor="default"),this.count=this.Kr=0,logMessage("showIndicator -> pause all event"),this.ov=!0,cc.eventManager.setEnabled(!1);var e=this;this.schedule((function(){e.count++,100==e.count&&(logMessage("time out"),null!=this.gx&&this.gx(),e.$A)?BkBusyIndicatorManager.iw():(e.Wk.setRotation(this.Kr),e.Kr+=30)}),.07)}else logMessage("current Scene null -> don't show")},TR:function(){logMessage("removeIndicator -> enable all event"),this.ov?(this.ov=!1,cc.eventManager.setEnabled(!0),this.removeFromParent()):logMessage("Indicator not show -> not need remove")},vT:function(t){this.gx=t}}),ccui.ScrollView.extend({wk:null,ctor:function(){this._super(),this.setTouchEnabled(!0),this.setBounceEnabled(!0),cc.sys.os==cc.sys.OS_WINDOWS||cc.sys.os==cc.sys.OS_OSX?(this.setScrollBarEnabled(!0),this.setScrollBarAutoHideEnabled(!0),this.Un()):this.setScrollBarEnabled(!1)},Un:function(){this.wk=Bn(this,this),this.wk.retain(),cc.eventManager.addListener(this.wk,this)}});var Cn=ccui.ListView.extend({wk:null,ctor:function(t){this._super(),this.setTouchEnabled(!0),this.setBounceEnabled(!0),t&&this.setContentSize(t),cc.sys.os==cc.sys.OS_WINDOWS||cc.sys.os==cc.sys.OS_OSX?(this.setScrollBarEnabled(!0),this.setScrollBarAutoHideEnabled(!0),this.Un()):this.setScrollBarEnabled(!1)},Un:function(){this.wk=Bn(this,this),this.wk.retain(),cc.eventManager.addListener(this.wk,this)},S_:function(){return-this.getInnerContainerPosition().y},mA:function(){if(0==(e=this.getItems()).length)return 0;var t=this.getItemsMargin(),e=e[0].getContentSize().height+t;t=this.getContentSize().height-t;console.log("isOutOfFen - contentSizeHeight: ",t),console.log("isOutOfFen - itemHeight: ",e),console.log("isOutOfFen - itemHeight: ",e);var i=Math.floor(t/e);return console.log("isOutOfFen - contentSizeHeight / itemHeight: ",t/e),console.log("isOutOfFen - visibleItemCount: ",i),i},OK:function(){var t=this.mA();if(0==t)return-1;var e=this.VK();return console.log("isOutOfFen - getFirstVisibleIndex: lastVisibleIndex: ",e),console.log("isOutOfFen - getFirstVisibleIndex: visibleItemCount: ",t),t=Math.max(e-t+1,0),console.log("isOutOfFen - getFirstVisibleIndex: firstVisibleIndex: ",t),t},ju:function(){console.log("getFirstVisibleItem: ");var t=this.OK();return 0<=t?this.getItems()[t]:null},q_:function(){var t=this.mu();return 0<t.length?t[t.length-1]:null},NK:function(){var t=this.mu();return 0<t.length?t[0]:null},mu:function(){return this.getItems().sort((function(t,e){var i=t.getPositionY(),n=e.getPositionY();return i>n?-1:i<n?1:0}))},VK:function(){var t=this.mu();if(console.log("getLastVisibleIndex - items: ",t.map((function(t){return t.getPositionY()}))),0==t.length)return-1;var e=-1,i=this.getInnerContainer(),n=i.getPositionY();console.log("getLastVisibleIndex - innerContainerPosY: ",n),t[0].getContentSize(),this.mA();for(var s=0;s<t.length;s++){var r=t[s].getPosition(),o=n+r.y;if(console.log("getLastVisibleIndex - Item at index "+s+" has Y coordinate: "+(i.height-r.y)),console.log("getLastVisibleIndex - Item at index "+s+" itemPos.y: "+r.y),console.log("getLastVisibleIndex - Item at index "+s+" worldItemY: "+o),0>o){e=s-1;break}}return-1==e?t.length-1:(e=Math.min(e,t.length),e=Math.max(e,0),console.log("isOutOfFen - lastVisibleIndex: ",e),e)},n_:function(){var t=this.getItems();return 0<t.length?UI.Ga(t[0]):0}});TITLED_STAR_SIZE=12,TITLED_STAR_MAX_NUM=5,BkTiledSprite=BkSprite.extend({ctor:function(){}}),BkLabelSprite=cc.Sprite.extend({ctor:function(t){this._super(),this.kJ(t),this.anchorY=this.anchorX=0},kJ:function(t){for(var e=0,i=0,n=new BkLabel(""),s=t[0],r=0;r<t.length;r++){var o,a=t[r],c=new BkLabel(a.string,"Arial",a.fontSize,a.QA,a.dN);c.setTextColor(a.color),c.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),c.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),0==r?(c.x=c.getContentSize().width/2,o=c.getContentSize().width,c.y=c.getContentSize().height/2,i+=c.getContentSize().height):s.so!=a.so?(c.x=c.getContentSize().width/2,o=c.getContentSize().width,s=a.xv?a.xv:1,console.log("lineSpacing: "+s),c.y=n.y-n.getContentSize().height/2-c.getContentSize().height/2-10*s,i+=c.getContentSize().height):s.so==a.so?(c.x=n.x+n.getContentSize().width/2+c.getContentSize().width/2,o+=c.getBoundingBox().width,c.y=n.y):logMessage("Check other case"),o>e&&(e=o),this.addChild(c),n=c,s=a}this.width=e,this.height=i}}),BkLabelItem=cc.Class.extend({string:null,fontSize:null,color:null,QA:null,so:null,x:null,y:null,xv:0,ctor:function(t,e,i,n,s,r,o){this.string=t,this.fontSize=e,this.color=i,this.QA=s,this.so=n,this.dN=r,this.xv=o}}),BkSpriteLoader=BkSprite.extend({nx:"",ctor:function(t,e,i){this._super(e,i),null!=t&&20<t.length&&(this.nx=t,isWebPlatform()||isFBInstantGame()?this.JN():this.IN())},JN:function(){var t=this;cc.loader.loadImg(t.nx,{isCrossOrigin:!0},(function(e,i){if(i){var n=new cc.Texture2D;n.initWithElement(i),n.handleLoadedTexture();var s=t.getBoundingBox().height;t.initWithTexture(n),t.setScale(s/t.getContentSize().height)}}))},IN:function(){var t=this;cc.textureCache.addImageAsync(this.nx,(function(e){if(e){var i=t.getBoundingBox().height;t.initWithTexture(e),t.setScale(i/t.getContentSize().height)}}),this)}}),BkBaseIngameLayer=cc.Layer.extend({k2:0,Ca:[],background:null,gY:null,$a:null,mb:null,B6:null,p0:null,Rb:null,XI:40,Yd:null,t5:null,Kd:0,Cb:null,ctor:function(){this._super(),this.RL()},RL:function(){this.removeAllChildren(!0);var t=cc.winSize;(e=new BkSprite(res.AA)).scaleX=t.width/e.width,e.scaleY=t.height/e.height,e.x=t.width/2,e.y=t.height/2,this.addChild(e,0),this.background=new BkSprite(res.yt);var e=1*t.width/this.background.getWidth(),i=.65*t.height/this.background.getHeight();this.Kd=e>i?i:e,logMessage("scaleW: "+e+" scaleH: "+i+" chessScale"+this.Kd),isWebPlatform()?(this.Kd=1,this.background.y=t.height/2-WEB_BOARD_DELTA_Y):this.background.y=isFBInstantGame()?t.height/2:t.height/2-BOARD_DELTA_Y*this.Kd,this.background.setScale(this.Kd),this.background.x=t.width/2,this.addChild(this.background,0),this.Lq();var n=this;this.mb=createBkButtonPlistNewTitle(t.width/2,t.height/2),this.mb.setTitleFontSize(18),this.mb.x=t.width/2,this.mb.y=t.height/2,this.addChild(this.mb),this.mb.Ya(!1),this.mb.addClickEventListener((function(){1e3>J()-n.mb.Kb?logMessage("click 2 lan trong 1 sec -> don't process action"):(n.mb.Kb=J(),n.CC())})),isWebPlatform()&&this.mb.setScale(.3)},qX:function(){var t=33,e=0;switch(BkGlobal.ja){case Ia:e=1,t-=1;break;case Ha:e=t;break;case Ja:e=2*t;break;case rb:e=3*t;break;case qb:e=4*t;break;case pb:e=5*t;break;case H:e=6*t;break;case La:e=7*t;break;case Ka:e=8*t;break;case ob:e=9*t;break;default:e=0}return new cc.rect(0,e-1,130,t)},Xp:function(){for(var t=0;t<this.S().ga.length;t++)this.S().ga[t].Fr()},J2:function(){this.vD(),this.Xp(),this.S().jB()||this.S().UA()&&this.S().vG()},CC:function(){this.vD(),this.Xp(),this.S().UA()?this.S().FQ():BkConnectionManager.NA(bb)},vD:function(){if(null!=this.Ca)for(var t=0;t<this.Ca.length;t++)this.Ca[t].reset()},IC:function(t){null!=(t=this.tc(t.ta))&&t.Nj()},Lq:function(){var t=this;this.$a=new BkButton("back.png","back.png","back.png","back_press.png",ccui.Widget.PLIST_TEXTURE),isWebPlatform()||(this.$a=new BkButton("menu_butt.png","menu_butt_press.png","menu_butt.png","menu_butt.png",ccui.Widget.PLIST_TEXTURE));var e=5*GAME_SCALE,i=.067*cc.winSize.height;this.$a.Yb(GAME_SCALE),this.$a.x=e+this.$a.getContentSize().width*GAME_SCALE/2,this.$a.y=i,isWebPlatform()&&(this.$a.x=10+this.$a.getContentSize().width*GAME_SCALE/2,this.$a.y=cc.winSize.height-WINDOW_MARGIN_TOP*GAME_SCALE-this.$a.getBoundingBox().height/2+2),this.addChild(this.$a),this.$a.addClickEventListener((function(){t.fj()})),this.Cb=new BkButton("chat_butt.png","chat_butt_press.png","chat_butt.png","chat_butt.png",ccui.Widget.PLIST_TEXTURE),this.Cb.Yb(GAME_SCALE),this.Cb.y=this.$a.y,this.Cb.x=this.$a.x+this.$a.getBoundingBox().width/2+this.Cb.getBoundingBox().width/2+e,isFBInstantGame()&&(this.Cb.x=this.$a.x+this.$a.getContentSize().width/2*GAME_SCALE+this.Cb.getContentSize().width/2*GAME_SCALE+e),isWebPlatform()&&(this.Cb.x=cc.winSize.width-WINDOW_MARGIN_RIGHT-.5*this.Cb.getContentSize().width,this.Cb.y=WINDOW_MARGIN_BOTTOM+.5*this.Cb.getContentSize().height),this.ma=new BkHeartSprite(!0),this.ma.setScale(GAME_SCALE),this.ma.x=this.Cb.x+this.Cb.getBoundingBox().width/2+this.ma.getBoundingBox().width/2+e,this.ma.y=this.Cb.y+this.Cb.getBoundingBox().height/2-this.ma.getBoundingBox().height/2,isFBInstantGame()?(this.ma.x=this.Cb.x+this.Cb.getContentSize().width/2*GAME_SCALE+this.ma.getContentSize().width/2*GAME_SCALE+e,this.ma.y=this.Cb.y+this.Cb.getContentSize().height/2*GAME_SCALE-this.ma.getContentSize().height/2*GAME_SCALE):isWebPlatform()&&(this.ma.setScale(.6),this.ma.x=this.$a.x+this.ma.getBoundingBox().width/1.2,this.ma.y=this.$a.y-6),this.addChild(this.ma),isWebPlatform()?(e=cc.director.getWinSize(),cc.screen.fullScreen()?this.Ra=new BkButton("btn_scale2.png","btn_scale2.png","btn_scale2.png","btn_scale2_hover.png",ccui.Widget.PLIST_TEXTURE):this.Ra=new BkButton("btn_scale.png","btn_scale.png","btn_scale.png","btn_scale_hover.png",ccui.Widget.PLIST_TEXTURE),this.Ra.x=e.width-30,this.Ra.y=e.height-27,this.Ra.addClickEventListener((function(){cc.screen.fullScreen()?(exitFullScreen(),t.Ra.loadTextures("btn_scale.png","btn_scale.png","btn_scale.png","btn_scale_hover.png",ccui.Widget.PLIST_TEXTURE)):makeFullScreen((function(){cc.screen.fullScreen()?t.Ra.loadTextures("btn_scale2.png","btn_scale2.png","btn_scale2.png","btn_scale2_hover.png",ccui.Widget.PLIST_TEXTURE):t.Ra.loadTextures("btn_scale.png","btn_scale.png","btn_scale.png","btn_scale_hover.png",ccui.Widget.PLIST_TEXTURE)}))})),this.addChild(this.Ra),e=vl(e=mm()),this.Ud=new BkButton(e,e,e,e,ccui.Widget.PLIST_TEXTURE),this.Ud.y=this.Ra.y,this.Ud.addClickEventListener((function(){var e=!mm(),i=vl(e);lm(e),t.Ud.loadTextures(i,i,i,i,ccui.Widget.PLIST_TEXTURE)})),this.addChild(this.Ud),this.Ud.x=this.Ra.x-this.Ra.width-10,this.gc=new BkButton("btn_camera.png","btn_camera.png","btn_camera.png","btn_camera_hover.png",ccui.Widget.PLIST_TEXTURE),this.gc.y=this.Ra.y,this.gc.addClickEventListener((function(){makeScreenShot()})),this.addChild(this.gc),this.gc.x=this.Ud.x-this.Ud.width-10,this.tf=new BkButton("save_view_game.png","save_view_game.png","save_view_game.png","save_view_game.png",ccui.Widget.PLIST_TEXTURE),this.tf.setScale(.48),this.tf.y=this.Ra.y,this.tf.addClickEventListener((function(){console.log("btnSave click");var t=new BkPacket;t.RF(),BkConnectionManager.send(t)})),this.addChild(this.tf),this.tf.ef(!1),this.tf.Ya(!1),this.tf.x=this.gc.x-this.gc.width-10,(e=new BkSprite("#history_icon_new.png")).x=UI.eb(this.tf),e.y=UI.xf(this.tf)-.3*UI.Ei(e),this.addChild(e),e.setOpacity(0),this.xA=e):(this.addChild(this.Cb),this.Cb.addClickEventListener((function(){t.pC()})))},pC:function(){var t=new BkChatLayerMobile;getCurrentScene().addChild(t)},fj:function(){this.S().fm()},I2:function(){},S:function(){return this.getParent().S()},ez:function(){this.mb.ef(!1)},tz:function(){this.mb.ef(!0)},Kn:function(){this.mb.Ya(!1)},Bo:function(){this.At(),this.Kn(),this.Ce(),this.AE()},At:function(){if(null!=this.Ca)for(var t=0;t<this.Ca.length;t++)this.Ca[t].xi()},ow:function(t){(t=this.Ca[t])&&(t.Tr(null),t.mm(null))},OO:function(t){t=t.ta,this.ow(this.S().Gi(t))},qp:function(){this.Kn(),this.S().Ub()&&(this.At(),this.Ce()),this.S().Ub()||this.Pk(),dm()},NC:function(t,e){var i=this.S().Gi(t);null!=this.Ca&&this.Ca[i].Tr(e,!0)},Pk:function(t){if(logMessage("showStartGameButton"),this.Kn(),!this.S().Ub()){var e=gameLogic.Ba();e&&!0===e.Ka||(e=!0,null!=t&&(e=t),this.S().Ri()||(e&&this.S().Ok(),null!=(t=this.S().Ba())?t.status!=PLAYER_STATE_READY&&this.mb.Ya(!0):this.mb.Ya(!0)))}},$b:function(t){return Ga(t,this.S().Xb)},rn:function(){logMessage("displayPlayerAvatar");var t,e=this.S();null!=this.Ca&&0<this.Ca.length&&(logMessage(this.Ca.length),this.Dy());for(var i=null,n=0;n<e.Xb;n++)null!=(t=e.hL(n))?(i=new BkPlayer(t.getUserInfo(),t.status),logMessage(i.W.userName+" i:"+n)):i=new BkPlayer(null,-1),null!=i&&(i.Po(e),i.mm(t),this.Ca.push(i),this.addChild(i),i.x=this.$b(n).x,i.y=this.$b(n).y)},Dy:function(){for(;0<this.Ca.length;)this.Ca[0].removeFromParent(),this.Ca.splice(0,1)},eE:function(t,e,i){0!=t&&(i=new BkTextFieldChangeMoney(i,t),e+="\n",e=0<t?e+"+ "+convertStringToMoneyFormat(t,!0):e+convertStringToMoneyFormat(t,!0),i.Wh(e),i.Rt())},Ox:function(t,e,i){var n;n=this.S().Gi(t.ta),null==i&&(i=""),null!=(n=this.Ca[n])&&(n.BV(t.xn()),this.eE(e,i,n))},QR:function(){null!=this.Yd&&this.Yd.removeSelf()},K5:function(t){0<=t&&(null!=this.Yd&&this.Yd.removeSelf(),this.Yd=new BkGoldBoxSprite,this.Yd.x=-100,this.Yd.y=-100,this.Yd.VT(t),null!=(t=this.S().Ba())&&(t.isPlaying&&!t.Jh?this.Yd.zE():this.Yd.yc()),this.addChild(this.Yd))},HU:function(){null!=this.Yd&&this.Yd.yc()},EU:function(){null!=this.Yd&&this.Yd.zE()},Pv:function(t,e){var i=this.Ca[t];null!=i&&(i.Ur(e),this.S().Ub()||(logMessage("show start game button update status "+t),0==t&&this.Pk(!1)))},GC:function(){this.rn()},P2:function(){},hX:function(t){logMessage("ShowCicleCountDownTimeOnActivePlayer GS: "+this.S().Ib);for(var e=0;e<this.S().Xb;e++){var i=this.Ca[e];null!=i&&i.yc()}e=this.S().lh,logMessage("activePlayerPos: "+e),null!=(e=this.tc(e))&&(i=29,null!=t&&(i=t),e.Pw(i))},FR:function(t){for(var e=0;e<this.Ca.length;e++){var i=this.Ca[e];null!=i.yi&&i.yi.ta==t&&(this.Ca[e].removeFromParent(),this.Ca.splice(e,1))}},tc:function(t){for(var e=0;e<this.Ca.length;e++){var i=this.Ca[e];if(null!=i.yi&&i.yi.ta==t)return i}return null},SK:function(t){for(var e=0;e<this.Ca.length;e++)if(this.Ca[e].od()==t)return e;return-1},Ce:function(){null!=this.Rb&&(this.Rb.Er(),this.Rb=null)},Ok:function(t,e){if(!this.S().Ub()){this.Ce();var i=!1;BkGlobal.ja!=K&&BkGlobal.ja!=L||(i=!0);var n=this,s=this.S().Ba();null!=s&&s.status!=PLAYER_STATE_READY&&(null!=e&&1==e?(this.Rb=new BkCountDownText(30,!1,!0,i),this.Rb.zw((function(){n.Ce(),n.CC()}))):(this.Rb=new BkCountDownText(30,!1,!1,i),this.Rb.zw((function(){n.Ce()}))),this.addChild(this.Rb,Sd),this.Rb.setScale(isWebPlatform()?.5:GAME_SCALE),this.Rb.x=cc.winSize.width/2,this.Rb.y=this.mb.y+this.XI,this.Rb.hE(t))}},H5:function(t,e,i){var n=this;this.Ce(),this.Rb=new BkCountDownText(30,!0),this.addChild(this.Rb),null==e&&(e=cc.winSize.width/2),null==i&&(i=340),this.Rb.x=e,this.Rb.y=i,this.Rb.hE(t),this.Rb.zw((function(){n.Ce()})),null!=this.S().Ba()&&this.S().Ba().status!=PLAYER_STATE_NOT_READY&&BkGlobal.ja==H&&(this.Rb.y=i+50,this.Rb.aT((function(){n.o2()})))},uD:function(){if(null!=this.Ca&&0!=this.Ca.length)for(var t=0;t<this.S().Xb;t++){var e=this.Ca[t];null!=e&&e.yc()}},AE:function(){this.EU()},bx:function(){this.HU()},hG:function(){this.uD(),this.bx()},BC:function(){logMessage("onPrepareNewGame base layer"),this.uD(),this.Pk()},HC:function(t,e){if(logMessage("onTableJoin "+this.Ca.length+" - "+this.S().Xb),this.Ca.length<this.S().Xb)this.rn();else{var i=this.Ca[e];null==i?this.rn():(i.Ur(t.status),i.Tr(t.getUserInfo()),i.mm(t))}},KK:function(){return null},W5:function(t){this.$a.Kk(t,"icon_register_exit.png",1)},bm:function(){logMessage("onBackAndroidIngameClick BkBaseIngameLayer"),BkLogicManager.oa().fm()},EC:function(){}}),BOARD_CELL_HEIGHT=BOARD_CELL_WIDTH=BOARD_HEIGHT_RIVER=80,BOARD_DELTA_Y=30,WEB_PLAYER_AVAR_MARGIN_TP=10,WEB_PLAYER_AVAR_MARGIN_RIGHT=WEB_PLAYER_AVAR_MARGIN_LF=40,WEB_BOARD_HEIGHT_RIVER=65,WEB_BOARD_CELL_WIDTH=56.875,WEB_BOARD_CELL_HEIGHT=57,WEB_BOARD_DELTA_Y=0,TOAST_MSG_YPOS=190.5,TIME_SHOW_SPRITE_CHESS_INGAME=2,BkChessBaseIngameLayer=BkBaseIngameLayer.extend({padding:0,zY:0,W3:0,U:null,ge:-1,Pj:-1,Vc:-1,cu:null,sv:null,jc:null,pB:null,Dj:null,qn:null,xr:null,Pp:null,ZX:null,nH:null,si:null,ri:null,kj:null,ce:null,be:null,Ln:null,Vd:null,wc:null,mY:null,p6:null,Kf:null,ic:null,ec:null,Up:null,yh:null,di:null,wl:null,vf:null,fY:null,we:-1,Ff:-1,Df:-1,Ef:-1,ctor:function(){this._super(),this.$L(),this.bq(),this.UL(),this.HM(),this.WV()},Lq:function(){this._super()},$L:function(){cc.spriteFrameCache.addSpriteFrames(res.cn,res.bn);var t=this;this.background.Ua((function(e,i){var n=i.getCurrentTarget().convertToNodeSpace(e.getLocation());t.bV(n.x,n.y)})),isWebPlatform()&&this.LM()},LM:function(){this.Kf=new BkSprite("#Chess_redstatus.png"),this.Kf.x=this.background.x,this.Kf.y=this.background.y,this.Kf.setScaleX(.99),this.Kf.setScaleY(1.05),this.Kf.setVisible(!1),this.addChild(this.Kf)},bV:function(t,e){var i=this.wq(t),n=this.Bq(e);if(logMessage("Touch: "+t+"-"+e+" point: "+n+"-"+i),this.S().Ib==GAME_STATE_PLAYING&&!(0>this.Pj||this.Vc!=this.Pj||0>i||0>n)){for(var s=-1,r=0;32>r;r++)if(!this.U[r].sa&&this.U[r].ea==i&&this.U[r].rowIndex==n){s=r;break}if(0<=s&&this.U[s].pa==this.Pj)s!=this.ge?(this.gp(),this.BS(s)):this.gp();else if(0<=this.ge){s=this.U[this.ge].ea,r=i;var o=this.U[this.ge].rowIndex,a=n;this.jc&&(o=9-o,a=9-a,s=8-s,r=8-r),this.kN(i,n)&&this.S().vQ(s,o,r,a)}}},kN:function(t,e){var i;for(i=0;i<this.wc.length;i++){var n=this.wc[i];if(n&&0<n.x&&n.$p==t&&n.Mr==e)return!0}for(i=0;i<this.Up.length;i++)if((n=this.Up[i])[0]==t&&n[1]==e)return!0;return!1},bq:function(){this.U=[];for(var t=0;32>t;t++){var e=new BkChessPieceSprite(t);this.U.push(e),e.x=-100,e.y=-100,this.addChild(e,32)}},UL:function(){var t=this;this.reorderChild(this.mb,36),this.mb.loadTextures("start_butt.png","start_butt_press.png","start_butt.png","start_butt.png",ccui.Widget.PLIST_TEXTURE),this.mb.setTitleText(""),this.mb.setScale(GAME_SCALE),isWebPlatform()&&(this.si=createBkButtonPlist("Chess_btn_xinthua_normal.png","Chess_btn_xinthua_pressed.png","Chess_btn_xinthua_normal.png","Chess_btn_xinthua_hover.png"),this.si.setTitleText(""),this.si.setPosition(-100,-100),this.si.addClickEventListener((function(){var e=(i=t.S()).Ib,i=i.Ba();e==GAME_STATE_PLAYING&&i.status!=PLAYER_STATE_NOT_READY&&t.Oy()})),this.addChild(this.si),this.ri=createBkButtonPlist("Chess_btn_cauhoa_normal.png","Chess_btn_cauhoa_pressed.png","Chess_btn_cauhoa_normal.png","Chess_btn_cauhoa_hover.png"),this.ri.setTitleText(""),this.ri.setPosition(-100,-100),this.ri.addClickEventListener((function(){var e=(i=t.S()).Ib,i=i.Ba();e==GAME_STATE_PLAYING&&i.status!=PLAYER_STATE_NOT_READY&&i.pa==t.Vc?t.Ny():e==GAME_STATE_PLAYING&&i.status!=PLAYER_STATE_NOT_READY&&(e=cc.director.getWinSize(),showToastMessage("Bạn chỉ được đề nghị hòa khi đến lượt đi",e.width/2,e.height/2,3))})),this.addChild(this.ri))},Fv:function(){logMessage("onClickBtnSurrender");var t=(e=this.S()).Ib,e=e.Ba();t==GAME_STATE_PLAYING&&e.status!=PLAYER_STATE_NOT_READY&&this.Oy()},Ev:function(){logMessage("onClickBtnOfferDraw");var t=(e=this.S()).Ib,e=e.Ba();t==GAME_STATE_PLAYING&&e.status!=PLAYER_STATE_NOT_READY&&e.pa==this.Vc?this.Ny():t==GAME_STATE_PLAYING&&e.status!=PLAYER_STATE_NOT_READY&&showToastMessage("Bạn chỉ được đề nghị hòa khi đến lượt đi",cc.winSize.width/2,cc.winSize.height/2,3,300)},HM:function(){this.kj=getSpriteFromImage("#cochonquan.png"),this.kj.setPosition(-100,-100),this.kj.scale=this.Kd,this.addChild(this.kj),this.wc=[];for(var t=0;20>t;t++)this.wc[t]=getSpriteFromImage("#nuocdi.png"),this.wc[t].setPosition(-100,-100),this.wc[t].Mr=-1,this.wc[t].$p=-1,this.wc[t].scaleX=2*this.background.scaleX,this.wc[t].scaleY=2*this.background.scaleY,this.addChild(this.wc[t],33);t="#nuoc_vua_di_small.png";var e=GAME_SCALE;isWebPlatform()&&(t="#nuocvuadi.png",e=.4),this.ce=getSpriteFromImage(t),this.ce.setPosition(-100,-100),this.ce.scale=e,this.addChild(this.ce),this.be=getSpriteFromImage("#nuocvuadi.png"),this.be.setPosition(-100,-100),this.be.scale=isWebPlatform()?.95:this.Kd,this.addChild(this.be),this.wl=new BkGameStatusLabelSprite(this.xl()),this.addChild(this.wl,40),this.wl.cs(!1)},SL:function(){this.Dj=new BkBatDauEffectSprite,this.Dj.setPosition(this.background.x+.5,this.background.y+.5),this.Dj.setVisible(!1),this.addChild(this.Dj,40)},WV:function(){this.Ln=getSpriteFromImage("#hoa.png"),this.Ln.setPosition(this.background.x,this.background.y),this.Ln.setVisible(!1),this.addChild(this.Ln,Sd+1),this.Vd=getSpriteFromImage("#chieutuong.png"),this.Vd.setPosition(this.background.x,this.background.y),this.Vd.setVisible(!1),this.addChild(this.Vd,35),this.SL(),isWebPlatform()||(this.Ln.setScale(GAME_SCALE),this.Vd.setScale(GAME_SCALE),this.Dj.setScale(GAME_SCALE))},xl:function(){return this.background.y},uh:function(){logMessage("changeButtonState");var t=this.S(),e=t.Ib;if(t=t.Ba()){var i=t.status,n=cc.director.getWinSize(),s=this.xl();switch(logMessage("gameStatus: "+e),e){case GAME_STATE_READY:logMessage("gameStatus: GAME_STATE_READY"),logMessage("playerRole: "+i),this.Au(),i==PLAYER_STATE_TABLE_OWNER?logMessage("playerRole: PLAYER_STATE_TABLE_OWNER"):i==PLAYER_STATE_READY?(logMessage("playerRole: PLAYER_STATE_READY"),this.In()):0>t.Va?this.In():(logMessage("else"),this.In(),t.Ka||(logMessage("!currentPlayer.isObserver"),this.wl.cs(!1),this.mb.Ya(!0),this.mb.setPosition(n.width/2,s)));break;case GAME_STATE_PLAYING:logMessage("gameStatus: GAME_STATE_PLAYING"),this.In(),this.Au(),i!=PLAYER_STATE_NOT_READY&&this.pU();break;case GAME_STATE_FINISH:logMessage("gameStatus: GAME_STATE_FINISH"),BkGlobal.Iw(!1),0>t.Va?this.In():this.mb.setPosition(n.width/2,s),this.Au();break;default:logMessage("default "+e)}}},hY:function(){return!1},EY:function(){var t=this;this.nH.addClickEventListener((function(){t.S().KP()}))},SY:function(){var t=this;this.Pp.loadTextures(y.rF,y.oW,y.rF,y.nW,ccui.Widget.PLIST_TEXTURE),this.Pp.addClickEventListener((function(){t.S().gD(!0)}))},RY:function(){var t=this;this.Pp.loadTextures(y.sF,y.qW,y.sF,y.pW,ccui.Widget.PLIST_TEXTURE),this.Pp.addClickEventListener((function(){var e=t.S();e.Ba().P.pb()<e.Ee?showToastMessage("Bạn không đủ tiền để chơi",cc.winSize.width/2,TOAST_MSG_YPOS,3,200):e.gD(!1)}))},In:function(){this.mb.setPosition(-100,-100)},sw:function(){for(var t=0;32>t;t++)this.U[t].qB=this.jc,this.U[t].Fu(t)},nw:function(){this.gp(),this.qA()},qA:function(){this.ce.setPosition(-100,-100),this.be.setPosition(-100,-100)},wq:function(t){var e=isWebPlatform()?Dn:X;if(logMessage("chessWidth: "+e),0<=this.ge){logMessage("this.pieceSelected >= 0");var i=this.U[this.ge],n=!1;i.Ja!=BkChessType.Im.id&&i.Ja!=BkChessType.Hm.id||(n=!0),n&&(e*=.9),logMessage("selectedPiece.chessType: "+i.Ja+" - isXePhao: "+n+" - chessWidth: "+e)}for(i=this.background.x-this.background.getWidth()/2,n=0;9>n;n++){var s=this.Sb(n);if(t*this.background.scaleX+i>s-e*this.background.scaleX/2&&t*this.background.scaleX+i<s+e*this.background.scaleX/2)return n}return-1},Bq:function(t){var e=isWebPlatform()?En:Fn;if(logMessage("chessHeight: "+e),0<=this.ge){logMessage("this.pieceSelected >= 0");var i=this.U[this.ge],n=!1;i.Ja!=BkChessType.Im.id&&i.Ja!=BkChessType.Hm.id||(n=!0),n&&(e*=.9),logMessage("selectedPiece.chessType: "+i.Ja+" - isXePhao: "+n+" - chessHeight: "+e)}for(i=this.background.y-this.background.getHeight()/2,n=0;10>n;n++){var s=this.Tb(n);if(t*this.background.scaleY+i>s-e*this.background.scaleY/2&&t*this.background.scaleY+i<s+e*this.background.scaleY/2)return n}return-1},Au:function(){isWebPlatform()&&(this.ri.setPosition(-100,-100),this.si.setPosition(-100,-100))},pU:function(){isWebPlatform()&&(this.ri.setPosition(108.5,cc.winSize.height/(BkGlobal.ja==K?1.94:3.5)),this.si.setPosition(110.5,this.ri.y-this.si.getContentSize().height/2-20))},Jr:null,BS:function(t){this.ge=t,this.kj.setPosition(this.Sb(this.U[this.ge].ea),this.Tb(this.U[this.ge].rowIndex)+1),this.Jr=cc.rotateBy(2,360).repeatForever(),this.kj.runAction(this.Jr),this.iU(t)},gp:function(){0>this.ge||(this.kj.setPosition(-100,-100),this.kj.stopAction(this.Jr),this.Jr=null,this.sA(),this.ge=-1)},iU:function(t){for(var e=Array(9),i=0;10>i;i++)e[i]=Array(10);this.mD(e),i=this.dq(t),this.Up=[];for(var n=0,s=0;90>s;s++)if(this.lN(i,t,s,e)){var r=s%9,o=Math.floor(s/9);if(this.eN(i,t,r,o,e)||this.gN(0,i,t,r,o,e))this.wc[n].setPosition(this.Sb(r),this.Tb(o)),this.wc[n].Mr=o,this.wc[n].$p=r,this.wc[n].setVisible(!1);else{for(var a=!1,c=16;32>c;c++)if(!this.U[c].sa&&this.U[c].ea==r&&this.U[c].rowIndex==o){a=!0,this.U[c].mj(!0),this.Up.push([r,o]);break}a||(this.wc[n].setPosition(this.Sb(r),this.Tb(o)),this.wc[n].Mr=o,this.wc[n].$p=r,this.wc[n].setVisible(!0))}n++}},mD:function(t){var e;for(e=0;9>e;e++)for(var i=0;10>i;i++)t[e][i]=-1;for(e=0;32>e;e++)this.U[e].sa||(t[this.U[e].ea][this.U[e].rowIndex]=e)},dq:function(t){var e=new BkChessPiece(t);return e.Ja=this.U[t].Ja,e.pa=this.U[t].pa,e.ea=this.U[t].ea,e.rowIndex=this.U[t].rowIndex,e},sA:function(){for(var t=0;20>t;t++)this.wc[t].setPosition(-100,-100),this.wc[t].Mr=-1,this.wc[t].$p=-1;for(t=16;32>t;t++)this.U[t].mj(!1)},lN:function(t,e,i,n){return!!t.tt(i,n)},eN:function(t,e,i,n,s){var r=s[i][n];s[i][n]=e,s[t.ea][t.rowIndex]=-1;var o=t.ea,a=t.rowIndex;t.ea=i,t.rowIndex=n,this.U[e].ea=i,this.U[e].rowIndex=n;var c=!0,h=this.U[0].ea;h!=this.U[16].ea&&(c=!1);for(var l=this.U[0].rowIndex+1;l<this.U[16].rowIndex;l++)0<=s[h][l]&&(c=!1);return this.U[e].ea=o,this.U[e].rowIndex=a,t.ea=o,t.rowIndex=a,s[t.ea][t.rowIndex]=s[i][n],s[i][n]=r,c},gN:function(t,e,i,n,s,r){var o=!1,a=r[n][s];0<=a&&(this.U[a].sa=!0),r[n][s]=i,r[e.ea][e.rowIndex]=-1;var c=e.ea,h=e.rowIndex;return e.ea=n,e.rowIndex=s,this.U[i].ea=n,this.U[i].rowIndex=s,this.Pq(1-t,r)&&(o=!0),this.U[i].ea=c,this.U[i].rowIndex=h,e.ea=c,e.rowIndex=h,r[e.ea][e.rowIndex]=r[n][s],0<=a&&(this.U[a].sa=!1),r[n][s]=a,o},Pq:function(t,e){if(i=this.U[this.tu(1-t)])for(var i=this.fg(i.ea,i.rowIndex),n=0;16>n;n++){var s=16*t+n;if(!this.U[s].sa&&this.dq(s).tt(i,e))return!0}return!1},fg:function(t,e){return 9*e+t},tu:function(t){return 16*t},Sb:function(t){return 0>t?-200:this.background.x+(t-4)*(isWebPlatform()?WEB_BOARD_CELL_WIDTH:BOARD_CELL_WIDTH)*this.background.scaleX},Tb:function(t){var e=isWebPlatform()?WEB_BOARD_HEIGHT_RIVER:BOARD_HEIGHT_RIVER,i=isWebPlatform()?WEB_BOARD_CELL_HEIGHT:BOARD_CELL_HEIGHT,n=isWebPlatform()?2:0;return 0>t?-200:4<t?this.background.y+e*this.background.scaleY*.5+(t-5)*i*this.background.scaleY-n:this.background.y-e*this.background.scaleY*.5+(t-4)*i*this.background.scaleY},rL:function(t,e){for(var i=0;32>i;i++)if(!this.U[i].sa&&this.U[i].ea==t&&this.U[i].rowIndex==e)return i;return-1},$B:function(){logMessage("AvatarInfo numOfAvatar:"+this.Ca.length);for(var t=0;t<this.Ca.length;t++){var e=this.Ca[t];null!=e.yi&&logMessage("Avatar name: "+e.od()+" serverPos:"+e.yi.ta)}},rr:function(t,e){var i=this.S();logMessage("Log info begin onObserverStatusChange"),this.$B(),i.aC();var n=i.Jb(t),s=-1;n&&(s=n.Va),i.EV(t,e);var r=this.tc(n.ta);r&&r.Ur(n.status),e||(s=i.Jb(t).Va,this.bs()),this.Ik(n,s,e),this.$E(),e||i.An()!=t||(logMessage("la toi ngoi xuong choi"),this.UV()),i.Ib==GAME_STATE_FINISH?this.Gt():(this.tw(),this.uh()),logMessage("Finish onObserverStatusChange"),this.$B(),i.aC()},Ik:function(t,e,i){if(logMessage("reposition"),t){for(var n,s,r=this.S(),o=0;o<this.Ca.length;o++)null!=(s=this.Ca[o])&&s.od()==r.Jb(t.ta).getName()&&(n=s).setPosition(this.$b(t.Va));i?(n&&(n.Nj(),n.xi(),n.setPosition(-200,-200)),0==e&&this.ic&&(this.ic.setPosition(this.$b(0)),this.ic.setVisible(!0)),1==e&&this.ec&&(this.ec.setPosition(this.$b(1)),this.ec.setVisible(!0))):(n?n.setPosition(this.$b(t.Va)):((n=new BkChessPlayer(t.getUserInfo(),t.status)).setPosition(this.$b(t.Va)),n.Po(r),n.mm(t),this.Ca.push(n),this.addChild(n)),0==t.Va&&this.ic&&(this.ic.setPosition(-200,-200),this.ic.setVisible(!1)),1==t.Va&&this.ec&&(this.ec.setPosition(-200,-200),this.ec.setVisible(!1)))}},Jk:function(){for(var t=0;32>t;t++){var e=this.U[t];e.sa?(e.x=-100,e.y=-100):(e.setScale(isWebPlatform()?.8:this.Kd),e.setOpacity(255),e.x=this.Sb(e.ea),e.y=this.Tb(e.rowIndex),e.Mk(!1))}},FO:function(){this.Gt()},Pv:function(t,e){if(null!=(i=this.tc(t))){i.Ur(e);var i,n=(i=this.S()).Ba();null==n||i.Ub()||(this.Pk(!1),n.ta==t&&(this.uh(),n.status==PLAYER_STATE_READY&&this.tw()))}},tw:function(){this.nw(),this.U[0].mj(!1),this.U[16].mj(!1),this.sw(),this.Jk()},Pk:function(t){var e=this.S();if(!e.Ub()){var i=e.Ba();i&&!0===i.Ka||(i=!0,null!=t&&(i=t),this.S().Ri()?(this.mb.Ya(!1),this.wl.cs(!0)):(this.wl.cs(!1),i&&e.Ok(),null!=(t=this.S().Ba())?t.status!=PLAYER_STATE_READY&&this.mb.Ya(!0):this.mb.Ya(!0)))}},NC:function(t,e){if(null!=this.Ca){var i=this.tc(t);i&&i.Tr(e,!0)}},Ox:function(t,e){this.S().Uq(t.ta)?null!=this.ma&&this.ma.zm(e,ic):logMessage("chi show update heart cho minh")},$E:function(){var t=this.S(),e=t.Ba();if(e&&1==e.Va){for(var i=0;i<t.Xb;i++){var n=t.Mg(i);if(n&&0==n.Va){n.Va=1,(t=this.tc(n.ta))&&(this.ec&&(this.ec.setPosition(-200,-200),this.ec.setVisible(!1)),t.setPosition(this.$b(n.Va)));break}}e.Va=0,(t=this.tc(e.ta))&&t.setPosition(this.$b(e.Va))}e&&!0===e.Ka?this.Ce():this.Ok(TIME_AUTO_READY)},NT:function(){this.Dj.setVisible(!0),this.Dj.MT()},Bo:function(t,e){logMessage("onDealCard"),this.Kn();var i=this.S(),s=i.Ba();if(s&&s.status==PLAYER_STATE_NOT_READY&&this.Gt(),playChieuTuongSound(),this.NT(),this.YD(),this.jx(t,e),i.WE(GAME_STATE_PLAYING),s.ta==t&&showToastMessage("Đến lượt bạn",cc.winSize.width/2,TOAST_MSG_YPOS,2,200),this.Yo(this.xr),this.uh(),this.DI(),this.At(),this.Ce(),s&&!1===s.Ka){for(i=0;32>i;i++){var r=this.U[i];r.sa||r.pa!=s.pa||r.Mk(!0)}this.AE(),n.rb(vc)}else this.bx();BkConnectionManager.Ow()},DI:function(){if(null!=this.Ca)for(var t=0;t<this.Ca.length;t++){var e=this.Ca[t];e&&(e.xi(),e.Nj())}},qp:function(t){this._super(),this.qn=t.O.readInt(),this.xr=t.O.readInt(),logMessage("OnGameTableSyn: defaultChessTime:"+this.qn),(t=(t=this.S()).Ba())&&t.Ka&&(this.tf&&(this.tf.ef(!0),this.tf.Ya(!0)),this.xA&&this.xA.setOpacity(255)),this.YD(),this.bs(),(t=this.S()).Ub()&&(logMessage("dang trong van choi -> k nhan dc deal card -> recall show banner"),BkConnectionManager.Ow())},E_:function(){for(var t=0,e=this.S().ga.length,i=0;i<e;i++){var n=this.S().ga[i];n&&n.Ka&&t++}return t},eL:function(){return this.S().ga.length},EC:function(){logMessage("onRemoveChatLayer ChessIngame"),null!=this.vf&&this.vf.setVisible(!1),this.Mj=null},Yp:function(){null!=this.yh&&(this.yh.removeFromParent(),this.yh=null)},mV:function(t,e){if(this.XL(),null!=this.vf){var i=e+": "+t;e==BkGlobal.P.userName&&(i="Bạn: "+t),this.vf.dt(i)}},vU:function(t){logMessage("showViewerChatText: "+t);var e=this.Dn();null!=this.di&&this.di.removeSelf(),this.di=new BkToast("Chess_toast.png"),this.di.GD(t);var i=this;this.di.Ro((function(){i.di=null})),this.di.No(3),this.di.show(e.x-.4*this.di.background.width,e.y-.05*cc.winSize.height)},uU:function(t){if(BkGlobal.jk){this.Yp();var e=this.Dn();this.yh=new BkChatEmoSprite(El(t+1)),isWebPlatform()?(e.x+=40,e.y+=40):this.yh.setScale(1.2*GAME_SCALE),this.addChild(this.yh,1e3),this.yh.x=e.x,this.yh.y=e.y,this.yh.jE()}else logMessage("chat emo not loaded -> reject command!")},Dn:function(){var t=cc.p(25,this.Cb.y-15);return isWebPlatform()||(t=.865*cc.winSize.height,n.Sq()&&(t=.85*cc.winSize.height),t=cc.p(.85*cc.winSize.width,t)),t},bs:function(){var t=this.eL();if(0<t){if(null==this.Ec||null==this.Ec){var e=this.Dn();this.Ec=new BkSprite("#eye.png"),this.Ec.x=e.x,this.Ec.y=e.y,isWebPlatform()||this.Ec.setScale(GAME_SCALE),this.addChild(this.Ec,2)}if(null==this.jf){e=cc.color(251,234,180);var i=15;isWebPlatform()||(i=30),this.jf=new BkLabel(t,"",i,!0),this.jf.setTextColor(e),this.jf.x=this.Ec.x+this.Ec.getContentSize().width/2+this.jf.getContentSize().width/2+5,this.jf.y=this.Ec.y,isWebPlatform()||(this.jf.setScale(GAME_SCALE),this.jf.x=this.Ec.x+this.Ec.getBoundingBox().width/2+this.jf.getBoundingBox().width/2+5),this.addChild(this.jf,2)}else this.jf.setString(t);if(null==this.me||null==this.me){this.me=new BkSprite("#small_info_frame.png"),t=this.Ec.getContentSize().width*this.Ec.getScaleX(),e=this.Ec.getContentSize().height*this.Ec.getScaleY()*1.5,i=1.8*t,this.me.setScaleX(i/this.me.getContentSize().width),this.me.setScaleY(e/this.me.getContentSize().height),this.me.y=this.Ec.y,this.me.x=this.Ec.x-.57*t+.5*i,this.me.setOpacity(180),this.addChild(this.me,1);var n=this;this.me.Ua((function(){var t=new BkListViewerWindow;t.Ab(n),t.Oa()}))}}else null!=this.Ec&&(this.Ec.removeFromParent(),this.Ec=null),null!=this.me&&(this.me.removeFromParent(),this.me=null),null!=this.jf&&(this.jf.removeFromParent(),this.jf=null)},Yo:function(t){logMessage("startTimer: "+t),this.Ym();for(var e=this.S(),i=0;i<e.ga.length;i++){var n=e.Mg(i);if(n&&n.status!=PLAYER_STATE_NOT_READY&&n.pa==this.Vc){var s=this.tc(n.ta);s&&(n.Xw(),s.Pw(t))}else n&&n.status!=PLAYER_STATE_NOT_READY&&n.pa!=this.Vc&&n.cx()}},Ym:function(t){logMessage("cancelTimer"),null!=this.Kf&&this.Kf.setVisible(!1);for(var e=this.S(),i=0;i<e.Xb;i++){var n=e.Mg(i);n&&(t&&n.To(!1),n.status!=PLAYER_STATE_NOT_READY&&(null!=(n=this.tc(n.ta))&&(n.yc(),n.et&&(n.et.setOpacity(0),n.et.setVisible(!1)))))}},Gt:function(){for(var t,e,i=this.S(),n=0;n<i.ga.length;n++)(e=i.Mg(n))&&(t=this.tc(e.ta))&&0<e.Va&&(t.Nj(),t.xi(),t.Oj());i.Ib=GAME_STATE_READY,this.uh(),this.tw()},YD:function(){logMessage("setTimeForAllPlayers: "+this.qn);for(var t=this.S(),e=0;e<t.Xb;e++){var i=t.ga[e];i&&i.ie(this.qn)}},uw:function(){this.Ff=this.we=this.Df=this.Ef=-1},jx:function(t,e){logMessage("updateGameStateAtBeginning firstPosition: "+t+" - lastPosition: "+e),null!=this.wg&&(logMessage("this.wlLayer != null start game -> remove"),this.wg.removeFromParent(),this.wg=null);var i=this.S(),n=i.Ba();if(this.Pj=n&&n.status!=PLAYER_STATE_NOT_READY?0:-1,this.pB=this.jc=n.ta==e,this.uw(),logMessage("this.isReverse: "+this.jc+" -  currentPlayer.serverPosition: "+n.ta),this.cu=t,this.sv=e,this.Fw(t,0),this.Fw(e,1),(n=i.Jb(t))&&(n.isPlaying=!0),(i=i.Jb(e))&&(i.isPlaying=!0),this.jc?(n.pa=1,i.pa=0,this.Vc=1):(n.pa=0,i.pa=1,this.Vc=0),logMessage("firstPlayer.chessColor: "+n.pa+" - firstPlayer.tablePosition: "+n.Va),n.pa!=n.Va){n.Va=n.pa,i.Va=i.pa;var s=this.tc(t);s&&s.setPosition(this.$b(n.Va)),(n=this.tc(e))&&n.setPosition(this.$b(i.Va))}this.sw(),this.Jk()},Fw:function(t,e){var i=this.S().Jb(t);i&&i.Kq(this.tc(t),e)},qr:function(t,e,i,n,s){logMessage("onMove"),this.U[0].mj(!1),this.U[16].mj(!1);var r=this.Pj;this.Pj=-1,this.Ym();var o,a=this.S();for(o=0;o<a.Xb;o++){var c=a.Mg(o);if(c&&c.status!=PLAYER_STATE_NOT_READY&&c.pa==this.Vc){c.ie(s);break}}for(this.jc&&(e=9-e,n=9-n,t=8-t,i=8-i),0<=(s=this.rL(i,n))&&(this.U[s].sa=!0),o=0;32>o;o++)if(!this.U[o].sa&&this.U[o].ea==t&&this.U[o].rowIndex==e){this.ge=o;break}for(logMessage("startCol: "+t+" - startRow: "+e+" - finishCol: "+i+" - finishRow: "+n),this.we=t,this.Ff=e,this.Df=i,this.Ef=n,this.ce.setPosition(this.Sb(t),this.Tb(e)),this.be.setPosition(this.Sb(i),this.Tb(n)),(o=this.U[this.ge])&&(this.reorderChild(o,33),o.ea=i,o.rowIndex=n,t=cc.callFunc(this.ht,this),i=cc.moveTo(.2,this.Sb(i),this.Tb(n)),i=cc.sequence(i,t),o.runAction(i)),this.gp(),i=Array(9),o=0;10>o;o++)i[o]=Array(10);this.mD(i),window.JACOB_BOARD=i,console.log("onMove - board: ",i),this.Pq(this.Vc,i)||(0>s?playCoDiChuyenSound():playCoAnQuanSound()),0<=s&&32>s&&this.jy(s),this.Vc=1-this.Vc,this.Yo(this.xr),this.Pj=r},ht:function(){this.S().hb()},jy:function(t){if(!(0>t)){this.U[t].sa=!0;for(var e,i=this.S(),n=0;n<i.Xb;n++)if((e=i.Mg(n))&&e.status!=PLAYER_STATE_NOT_READY&&e.pa==this.Vc){this.dC(this.U[t],this.$b(e.Va).x,this.$b(e.Va).y);break}}},dC:function(t){t.setPosition(-100,-100)},Mv:function(t,e){if(t!=CHIEU_HET){var i=this.S().Jb(e);if(null!=i)if(t==CHIEU)playChieuTuongSound(),this.U[0].pa==i.pa?this.U[16].mj(!0):this.U[0].mj(!0),this.Vd.setOpacity(255),this.Vd.setVisible(!0),this.Vd.runAction(cc.fadeOut(TIME_SHOW_SPRITE_CHESS_INGAME));else{var n=Gn(t);t==HET_GIO||t==DAU_HANG?(n=i.P.userName+n,showToastMessage(n,cc.winSize.width/2,TOAST_MSG_YPOS,3,250)):showToastMessage(n,cc.winSize.width/2,cc.winSize.height/2,3,250)}}},aL:function(t){for(var e=this.S(),i=0;i<e.Xb;i++){var n=e.Mg(i);if(n&&n.status!=PLAYER_STATE_NOT_READY&&n.ta!=t)return n.ta}return-1},wg:null,LS:function(){var t=new BkPacket;t.Xy(Bi,Ok),BkConnectionManager.send(t)},cS:function(){this.LS()},Ir:function(){logMessage("removewlLayer"),null!=this.wg&&(this.wg.removeFromParent(),this.wg=null)},rV:function(t){null!=this.wg&&this.wg.eV(t)},xU:function(t){logMessage("showWinLoseFinishGame "+t);var e=1;if(0>t)e=0;else{var i=this.tc(t);i&&i.y>cc.winSize.height/2&&(e=-1)}return logMessage("showWinLoseFinishGame isWin: "+t+" "+e),(t=getCurrentScene())?(i=cc.p(cc.winSize.width/2,this.xl()),e=new BkWinLoseLayer(e,i,this),t.addChild(e,Ud-1),e):null},Lv:function(t){logMessage("onFinishGame "+t);var e=this.S();if(this.wg=this.xU(t),null!=this.wg){var i=this,n=cc.callFunc((function(){logMessage("wlLayer request Ads "+J()),i.cS()}),this),s=cc.callFunc((function(){logMessage("wlLayer removeWinLoseLayer "+J()),i.Ir()}),this);logMessage("wlLayer run Action delay"),this.wg.runAction(cc.sequence(cc.delayTime(3),n,cc.delayTime(1),s))}if(0<=t){if(this.tc(t).vE(),logMessage("Winner pos: "+t),n=this.aL(t),logMessage("Loser pos: "+n),-1!=n&&this.tc(n).rE(),null==(n=e.Ba()))return;t==n.ta?playCoThangSound():n.status!=PLAYER_STATE_NOT_READY&&playCoThuaSound()}e.WE(GAME_STATE_FINISH),this.bx(),this.Ym(!0),this.uh(),this.qA(),this.gp(),this.sA(),BkConnectionManager.mC()},N6:function(t){if(!(0>t))for(var e=this.S(),i=0;i<e.Xb;i++){var n=e.Mg(i);if(n&&n.status!=PLAYER_STATE_NOT_READY&&n.ta!=t){i=Math.min(e.Ee,n.P.ye);var s=Math.floor(i*(1-TAX_RATE));e.zf(n,-i),e.zf(e.Jb(t),s);break}}},Ov:function(t){switch(t){case CHESS_DRAW_REQUEST:this.dO();break;case CHESS_DRAW_ACCEPT:this.GO();break;case CHESS_DRAW_REFUSE:this.HO()}},Ny:function(){var t=this;showPopupConfirmWith("Bạn chắc chắn muốn\nđề nghị hòa không?","",(function(){t.S().Br(CHESS_DRAW_REQUEST)}))},dO:function(){logMessage("offerDraw"),null!=this.Mj&&(logMessage("remove chatLayer if showing!"),this.Mj.Jo());var t=this;showPopupConfirmWith("Đối phương muốn hòa.\n Bạn có đồng ý không?","",(function(){t.S().Br(CHESS_DRAW_ACCEPT)}),null,(function(){t.S().Br(CHESS_DRAW_REFUSE)}))},GO:function(){showToastMessage("Hai đối thủ đã bắt tay nhau đồng ý hòa",cc.winSize.width/2,TOAST_MSG_YPOS,3,300)},HO:function(){showToastMessage("Đối phương đã từ chối hòa",cc.winSize.width/2,cc.winSize.height/2,3,200)},Oy:function(){var t=this;showPopupConfirmWith("Bạn chắc chắn muốn chịu thua ?","",(function(){t.S().Br(CHESS_SURRENDER)}))},GC:function(){this._super(),this.$E(),this.VV()},Td:null,VV:function(){if(!isWebPlatform()){var t=this.S().Ba();if(null!=t&&t.Ka){if(null==this.Td){this.Td=new BkButton("switch_butt.png","switch_butt_press.png","switch_butt.png","switch_butt.png",ccui.Widget.PLIST_TEXTURE),this.Td.Yb(GAME_SCALE),this.Td.x=this.Cb.x+(this.Cb.x-this.$a.x),this.Td.y=this.$a.y,this.addChild(this.Td);var e=this;this.Td.addClickEventListener((function(){e.Lr()}))}this.ma.uc.Of("heart_ingame.png"),this.ma.Sg.x=this.ma.getContentSize().width/2,this.ma.y=this.Dn().y+.1*this.ma.getBoundingBox().height,this.ma.x=this.Dn().x-1.05*this.ma.getBoundingBox().width}}},UV:function(){isWebPlatform()||(null!=this.Td&&this.Td.removeFromParent(),this.ma.uc.Of("buy_butt.png"),this.ma.y=this.Cb.y+this.Cb.getBoundingBox().height/2-this.ma.getBoundingBox().height/2,this.ma.x=this.Cb.x+(this.Cb.x-this.$a.x))},r2:function(){var t=!km();this.If.Of(this.kL(t)),im(t)},kL:function(t){var e="music_off_view_butt.png";return t&&(e="music_on_view_butt.png"),e},IC:function(t){logMessage("onTableLeavePush Chess"),this.tc(t.ta)&&(this.FR(t.ta),0==t.Va?(this.ic.setPosition(this.$b(0)),this.ic.setVisible(!0)):1==t.Va&&(this.ec.setPosition(this.$b(1)),this.ec.setVisible(!0)))},ow:function(){this.uh(),this.bs()},HC:function(t){logMessage("onTableJoin chessBaseInGameLayer"),t&&!1===t.Ka&&(this.rn(),this.uh()),this.bs()},rn:function(){logMessage("displayPlayerAvatar BkChessBaseIngameLayer"),this.ic||this.eM(),this.pA();var t=this.S();null!=this.Ca&&0<this.Ca.length&&(logMessage("this.PlayerAvatar.length "+this.Ca.length),this.Dy());var e,i,n=0;logMessage("init new player");for(var s=0;s<t.ga.length;s++)if(e=t.Mg(s)){if(e&&!1===e.Ka){logMessage("player: "+e.getName()+" isObserver === false"),-1==e.Va&&(e.Va=t.xz()),n++,i=e.Va;var r=new BkChessPlayer(e.getUserInfo(),e.status);r.setPosition(this.$b(e.Va)),r.Po(t),r.mm(e),this.Ca.push(r),t.Ib==GAME_STATE_PLAYING&&(r.xi(),this.Fw(e.ta,e.pa)),this.addChild(r)}else e.Va=-1;t.Ib==GAME_STATE_READY&&e.ie(this.qn)}t.Ib==GAME_STATE_PLAYING&&this.Yo(this.xr),2>n&&((0==1-i&&this.ic||0==n)&&(this.ic.setPosition(this.$b(0)),this.ic.setVisible(!0)),(1==1-i&&this.ec||0==n)&&(this.ec.setPosition(this.$b(1)),this.ec.setVisible(!0)))},eM:function(){var t=this.S();this.ic=new BkChessPlayer(null,-1),this.ic.setPosition(-200,-200),this.ic.Po(t),this.ic.setVisible(!1),this.addChild(this.ic),this.ec=new BkChessPlayer(null,-1),this.ec.setPosition(-200,-200),this.ec.Po(t),this.ec.setVisible(!1),this.addChild(this.ec)},pA:function(){this.ic.setPosition(-200,-200),this.ec.setPosition(-200,-200),this.ic.setVisible(!1),this.ec.setVisible(!1)},$b:function(t){var e=cc.winSize,i=this.ic,s=i.getContentSize().width*GAME_SCALE;return isWebPlatform()||isFBInstantGame()?isFBInstantGame()?(e=0,0==t?(yPos=.06*cc.winSize.height,xPos=cc.winSize.width-e*GAME_SCALE-s/2):(yPos=.93*cc.winSize.height,xPos=e*GAME_SCALE+s/2)):(yPos=.79*cc.winSize.height,0==t?xPos=WEB_PLAYER_AVAR_MARGIN_LF+s/2:(t=i.CL(),xPos=e.width-WEB_PLAYER_AVAR_MARGIN_RIGHT+s/2-t)):(e=0,0==t?(yPos=.06*cc.winSize.height,xPos=cc.winSize.width-e*GAME_SCALE-s/2):(yPos=.88*cc.winSize.height,xPos=e*GAME_SCALE+s/2,n.Sq()&&(logMessage("isIphoneX -> dat avatar top thap xuong"),yPos=.84*cc.winSize.height))),cc.p(xPos,yPos)},Ok:function(t){var e=this.S().Ba();e&&!0===e.Ka||(this._super(t),null!=this.Rb&&(isWebPlatform()?(t=this.xl(),this.Rb.y=t+.7*this.mb.getBoundingBox().height):(t=this.xl(),this.Rb.y=t+.7*this.mb.getBoundingBox().height,logMessage("this.countdownText.getBoundingBox().height: "+this.Rb.getBoundingBox().height))))},XL:function(){if(null==this.vf){var t=Ud-1,e=getCurrentScene();this.vf=new BkChatContentLayer;var i=t+1;cc.sys.os==cc.sys.OS_IOS&&(i=t-1),e.addChild(this.vf,i),this.vf.setVisible(!1)}},Mj:null,pC:function(){var t=Ud-1;if(this.Mj=new BkChatLayerMobile,cc.sys.os==cc.sys.OS_IOS){var e=.155*cc.winSize.height;this.Mj.y=e,this.Mj.SE(e)}if((e=getCurrentScene()).addChild(this.Mj,t),null==this.vf){this.vf=new BkChatContentLayer;var i=t+1;cc.sys.os==cc.sys.OS_IOS&&(i=t-1),e.addChild(this.vf,i)}else this.vf.setVisible(!0)},pp:null,fj:function(){isWebPlatform()?BkLogicManager.oa().fm():(null==this.pp&&(this.pp=new BkIngameMenu(this.$a),this.addChild(this.pp,Td-1)),this.pp.vr())},kx:function(t,e){logMessage("updateHeart ingame: "+t+" money GB: "+BkGlobal.P.pb());var i=this.S();null!=i&&(i=i.Ba())&&(i.P.Mb(i.P.pb()+t),logMessage("money ClientstateIngameMoney: "+i.xn()+" - money GB: "+BkGlobal.P.pb())),null!=this.ma&&this.ma.zm(t,e)},Lr:function(){var t,e,i;for(this.jc=!this.jc,t=0,e=this.U.length;t<e;t++)(i=this.U[t]).stopAllActions(),i.ea=8-i.ea,i.rowIndex=9-i.rowIndex,i.Ik();if(-1!=this.we){t=8-this.we,e=9-this.Ff,i=8-this.Df;var n=9-this.Ef;this.we=t,this.Ff=e,this.Df=i,this.Ef=n,this.ce.setPosition(this.Sb(t),this.Tb(e)),this.be.setPosition(this.Sb(i),this.Tb(n))}for(e=0,i=!1,n=this.S().ga,t=0;t<n.length;t++){var s=n[t];s&&!s.Ka&&(logMessage("swap tablePosition"),e++,s.Va=1-s.Va,s=this.tc(s.ta))&&(s.Hh?(s.setPosition(this.$b(1)),i=!0):s.setPosition(this.$b(0)))}logMessage("countPlayer: "+e),this.pA(),1==e&&(i?(logMessage("co 1 ng choi dang o avar top"),this.ic.setPosition(this.$b(0)),this.ic.setVisible(!0)):(logMessage("co 1 ng choi dang o avar bottom"),this.ec.setPosition(this.$b(1)),this.ec.setVisible(!0)))}}),BkGameStatusLabelSprite=BkSprite.extend({label:null,Vi:null,Wi:null,Xi:null,count:0,Bm:null,ctor:function(t){this._super("#khu_status_waitting.png"),this.Bm=new BkSprite("#amtra.png"),this.Bm.y=this.getContentSize().height/2,this.addChild(this.Bm);var e=isWebPlatform()?20:30,i=cc.color.BLACK,n=this.Bm.y;this.label=new BkLabel("Đang tìm đối thủ, xin hãy đợi","",e),this.label.x=this.label.getContentSize().width/2+this.Bm.x+this.Bm.getContentSize().width/2,this.label.y=n,this.label.setTextColor(i),this.addChild(this.label);var s=this.label.x+this.label.getContentSize().width/2;this.Vi=new BkLabel(".","",e),this.Vi.x=s+this.Vi.getContentSize().width/2,this.Vi.y=n,this.Vi.setTextColor(i),this.addChild(this.Vi),this.Wi=new BkLabel("..","",e),this.Wi.x=s+this.Wi.getContentSize().width/2,this.Wi.y=n,this.Wi.setTextColor(i),this.addChild(this.Wi),this.Xi=new BkLabel("...","",e),this.Xi.x=s+this.Xi.getContentSize().width/2,this.Xi.y=n,this.Xi.setTextColor(i),this.addChild(this.Xi),this.setScale(GAME_SCALE),this.x=cc.winSize.width/2,isWebPlatform()&&(this.x=cc.winSize.width/2+50),this.y=t,this.pE(0)},pE:function(t){this.xu(),1==t&&this.Vi.setVisible(!0),2==t&&this.Wi.setVisible(!0),3==t&&this.Xi.setVisible(!0)},xu:function(){this.Vi.setVisible(!1),this.Wi.setVisible(!1),this.Xi.setVisible(!1)},Z_:function(){return this.label.getContentSize().width},cs:function(t){this.setVisible(t),this.unschedule(this.MC),t&&(this.count=0,this.schedule(this.MC,.5))},MC:function(){this.pE(this.count-4*Math.floor(this.count/4)),this.count++}}),BkBatDauEffectSprite=cc.SpriteBatchNode.extend({sprite:null,qf:null,YU:.05,Wq:!1,ctor:function(){cc.spriteFrameCache.addSpriteFrames(res.kH,res.my),this.Wo="frame_0.png",this.sprite=new BkSprite("#"+this.Wo),this._super(res.my),this.addChild(this.sprite),this.qf=[];for(var t="",e=0;5>e;e++)t="frame_"+e+".png",t=cc.spriteFrameCache.getSpriteFrame(t),this.qf.push(t);this.Wq=!1},MT:function(){var t=this;if(t.Wq)logMessage("isShowingEffect -> return");else{var e=cc.callFunc((function(){logMessage("show effect finish:"),t.Wq=!1}),this);this.sprite.setOpacity(255);var i=cc.fadeOut(.5),n=new cc.Animation(this.qf,this.YU);e=cc.sequence(cc.animate(n),cc.delayTime(1),i,e);t.Wq=!0,this.sprite.runAction(e)}}}),BkWinLoseLayer=cc.Layer.extend({na:null,FB:!1,$d:null,Wb:null,dk:null,ctor:function(t,e,i){this._super(),this.na=new BkSprite(res.Vr),this.na.Ua((function(){})),this.na.setScaleX(cc.winSize.width/this.na.getContentSize().width),this.na.setScaleY(cc.winSize.height/this.na.getContentSize().height),this.na.x=cc.winSize.width/2,this.na.y=cc.winSize.height/2,this.addChild(this.na),this.FB=t,this.dk=i,this.$d=1==t?new BkSprite("#win_cuoi_van.png"):-1==t?new BkSprite("#lose_cuoi_van.png"):new BkSprite("#hoa.png"),this.$d.x=e.x,this.$d.y=e.y,this.$d.setScale(GAME_SCALE),this.addChild(this.$d)},eV:function(t){this.Wb=0<this.FB?new cc.LabelBMFont("Elo: +"+Math.abs(t),res.lp):new cc.LabelBMFont("Elo: -"+Math.abs(t),res.Cs),this.Wb.setScale(2*GAME_SCALE),this.Wb.x=this.$d.x,this.Wb.y=this.$d.y-this.$d.getBoundingBox().height/2-this.Wb.getBoundingBox().height/2,this.addChild(this.Wb)}}),BkCoTuongGameLayer=BkChessBaseIngameLayer.extend({ctor:function(){this._super()},qp:function(t){logMessage("OnGameTableSyn"),this._super(t);var e=this.S(),i=e.Ba();if(e.Ub()){for(var n=0;t.O.La();){this.jx(t.O.readByte(),t.O.readByte());n=t.O.readInt();var s,r,o=e.Jb(this.cu);if(o.isPlaying=!0,o.ie(t.O.readInt()),(o=e.Jb(this.sv)).isPlaying=!0,o.ie(t.O.readInt()),this.Vc=t.O.readByte(),this.jc&&(this.Vc=1-this.Vc),this.jc)for(o=0,s=this.U.length;o<s;o++)(r=this.U[(o+16)%32]).ea=8-t.O.readByte(),r.rowIndex=9-t.O.readByte(),r.sa=1==t.O.readByte(),r.Ik(),r.sa||!i||i.Ka||r.pa!=i.pa||r.Mk(!0);else for(o=0,s=this.U.length;o<s;o++)(r=this.U[o]).ea=t.O.readByte(),r.rowIndex=t.O.readByte(),r.sa=1==t.O.readByte(),r.Ik(),r.sa||!i||i.Ka||r.pa!=i.pa||r.Mk(!0)}this.Yo(n)}else i&&i.Ka&&this.Ce(),this.Ym(!0),this.Jk();this.uh()}}),BkCoUpGameLayer=BkChessBaseIngameLayer.extend({ne:null,Me:null,ctor:function(){if(this._super(),this.ne=new BkTakenListChessPiece,this.ne.setScale(GAME_SCALE),isWebPlatform()){var t=this.background.x-this.background.getWidth()/2-.22*this.ne.getWidth(),e=this.background.y-48;this.ne.setPosition(t,e),this.Me=new BkTakenListChessPiece,this.Me.setScale(GAME_SCALE),t=this.background.x+this.background.getWidth()/2+.22*this.Me.getWidth()}else t=cc.winSize.width/2,e=this.background.y-.5*this.background.getHeight()-this.ne.getBoundingBox().height/2,this.ne.setPosition(t,e),this.Me=new BkTakenListChessPiece,this.Me.setScale(GAME_SCALE),t=cc.winSize.width/2,e=this.background.y+.5*this.background.getHeight()+.2*this.Me.getHeight();this.Me.setPosition(t,e),this.addChild(this.Me,1),this.addChild(this.ne,1)},qp:function(t){logMessage("OnGameTableSyn"),this._super(t);var e=this.S(),i=e.Ba();if(e.Ub()){var n=0;if(t.O.La()){this.jx(t.O.readByte(),t.O.readByte());n=t.O.readInt();var s,r=e.Jb(this.cu);if(r.isPlaying=!0,r.ie(t.O.readInt()),(e=e.Jb(this.sv)).isPlaying=!0,e.ie(t.O.readInt()),this.Vc=t.O.readByte(),this.jc&&(this.Vc=1-this.Vc),this.jc)for(e=0,r=this.U.length;e<r;e++)(s=this.U[(e+16)%32]).ea=8-t.O.readByte(),s.rowIndex=9-t.O.readByte(),s.sa=1==t.O.readByte(),s.hc=t.O.readByte(),s.Ja=t.O.readByte(),s.sc=t.O.readByte(),s.Ik(),s.mg(),s.sa||!i||i.Ka||s.pa!=i.pa||s.Mk(!0);else for(e=0,r=this.U.length;e<r;e++)(s=this.U[e]).ea=t.O.readByte(),s.rowIndex=t.O.readByte(),s.sa=1==t.O.readByte(),s.hc=t.O.readByte(),s.Ja=t.O.readByte(),s.sc=t.O.readByte(),s.Ik(),s.mg(),s.sa||!i||i.Ka||s.pa!=i.pa||s.Mk(!0);this.XV()}this.Yo(n)}else i&&i.Ka&&this.Ce(),this.Ym(!0),this.Jk();this.uh()},XV:function(){var t,e,i=this.S().Ba();for(t=0,e=this.U.length;t<e;t++)this.U[t].sa&&(this.U[t].sc==Y&&(i.Ka||this.U[t].pa==i.pa)&&this.U[t].VD(Y),this.U[t].pa!=this.vy()?this.ne.ij(this.U[t],!i.Ka):this.Me.ij(this.U[t],!1));this.Ge(this.Me,!0),this.Ge(this.ne,!1)},Qv:function(t,e){this.pB&&(t=(t+16)%32),this.U[t].Ja=e,this.U[t].sa?this.bR(t):this.U[t].uK()},rr:function(t,e){this._super(t,e),this.S().Ba()},bq:function(){this._super();for(var t=0;32>t;t++)this.U[t].Ja!=BkChessType.Qf.id&&(this.U[t].hc=Y,this.U[t].sc=Y,this.U[t].mg())},sw:function(){for(var t=0;32>t;t++)this.U[t].Ja!=BkChessType.Qf.id&&(this.U[t].hc=Y,this.U[t].sc=Y);this._super(),this.Me.reset(),this.ne.reset()},dq:function(t){var e=new BkCoUpPiece(t);return e.Ja=this.U[t].Ja,e.ea=this.U[t].ea,e.rowIndex=this.U[t].rowIndex,e.$u=this.U[t].hc==Hn,e},jy:function(t){0>t||(this.U[t].sa=!0,this.aR(t))},vy:function(){var t=this.S().Ba();return t.Ka?this.jc?1:0:t.pa},aR:function(t){var e=this.S().Ba();logMessage("processTakenListMovePiece"+e.getName()+" chessIndex: "+t),(e.Ka||this.U[t].pa==e.pa||this.U[t].hc!=Y)&&(this.U[t].pa!=this.vy()?(this.ne.ij(this.U[t],!1),this.Ge(this.ne,!1)):(this.Me.ij(this.U[t],!1),this.Ge(this.Me,!0)))},bR:function(t){var e=this.S().Ba();logMessage("processTakenListRealTypeReturn"+e.getName()+" chessIndex: "+t+" chessType: "+this.U[t].Ja),e.Ka||this.U[t].pa==e.pa||(this.U[t].VD(Hn),this.U[t].nT(Y),this.ne.ij(this.U[t],!0),this.Ge(this.ne,!1))},Ge:function(t,e){var i=.6*GAME_SCALE;isWebPlatform()||(i=.6*GAME_SCALE),.1>=i&&(i=.1);var n,s,r,o,a=t.pu(),c=0,h=1,l=.95;for(n=0,s=t.Bc.length;n<s;n++){if(isWebPlatform()){n/5==h&&(h++,c=0),2<h&&(l=.68),r=X*i*.7*c,o=Fn*i*l*h;var u=t.x-t.getContentSize().width/2+X*i*.5,d=t.y+t.getContentSize().height/2+Fn*i*.5;r=u+r,o=d-o,c++}else u=t.x-t.getWidth()/2,d=t.y,e&&(u=t.x+t.getWidth()/2),o=d,r=u+(n+1)*X*i*1,e&&(r=u-(n+1)*X*i*1);a[n].setScale(i),a[n].setPosition(r,o)}for(;0<t.Vh.length;)i=t.Vh.pop(),this.dC(i,u,d)},nw:function(){this._super()},BC:function(){this.nw(),this._super()}}),BkTakenListChessPiece=BkSprite.extend({Bc:null,Ve:null,wh:null,Vh:null,Mx:[3,4,5,1,2,6],ctor:function(){var t="box_quanan.png";isWebPlatform()||(t="box_quan_an_trans.png"),this._super("#"+t),this.reset()},reset:function(){this.Vh=[],this.Bc=[],this.Ve=[0,0,0,0,0,0,0,0,0,0,0,0,0],this.wh=[0,0,0,0,0,0,0,0,0,0,0,0,0]},ij:function(t,e){var i=t.Ja;t.sc!=Y&&t.hc!=Y||(i=e?i+6:0),logMessage("Push to Chess list: "+i+" - "+t.hc+" dead Face Type: "+t.sc),this.Ve[i]++,1==this.Ve[i]?(this.Bc.push(t),this.wh[i]=this.Bc.length-1):(this.Vh.push(t),this.Bc[this.wh[i]].Cu())},pu:function(){var t=[];0<this.Ve[0]&&t.push(this.Bc[this.wh[0]]);for(var e=1;6>=e;e++){var i=this.Mx[e-1];0<this.Ve[i]&&t.push(this.Bc[this.wh[i]]),0<this.Ve[i+6]&&t.push(this.Bc[this.wh[i+6]])}return t}}),BkHistoryGameLayer=cc.Layer.extend({Ic:14,yj:10,Lm:.01,Sf:0,al:200,oc:4,Xk:null,Px:null,mb:null,ya:null,data:null,Vk:-1,Ia:-1,ce:null,be:null,Jl:!1,AI:0,XY:-1,Si:!1,Qj:[],Yu:!0,Rq:!0,Zu:!0,Vu:!0,Xu:!0,background:null,we:-1,Ff:-1,Df:-1,Ef:-1,YF:.8,ctor:function(t){this._super(),console.log("CheckTime - BkHistoryGameLayer start ctor: ",(new Date).getTime()),BkGlobal.jk=!0,this.data=t,this.Sj=[],console.log("BkHistoryGameLayer - this.data: ",this.data),this.ya=t.ya,this.jc=!1,this.QL(),this.bq(),this.Jk(),this.uJ(),console.log("CheckTime - BkHistoryGameLayer before convert: ",(new Date).getTime()),this.Na=this.WI(),console.log("CheckTime - BkHistoryGameLayer middle convert: ",(new Date).getTime()),this.Yl=this.VI(),console.log("CheckTime - BkHistoryGameLayer after convert: ",(new Date).getTime()),isWebPlatform()?this.Lq():this.mJ(),console.log("CheckTime - BkHistoryGameLayer before create fen: ",(new Date).getTime()),this.fJ(),console.log("CheckTime - BkHistoryGameLayer after create fen: ",(new Date).getTime()),this.dJ(),this.fq(),this.hq(),this.ZJ(),this.mK(),this.UG(),BkConnectionManager.Ow(),this.uw(),this.nB()&&(console.log("this.rotateChessBoard();"),this.Lr()),console.log("after this.rotateChessBoard();"),0==t.Na.length&&this.LJ(),console.log("ctor this.deathPieceIndexes: ",this.Sj),this.sC(),console.log("ctor getCurrentBoard - dead currentPieces",this.U.filter((function(t){return t.sa}))),console.log("CheckTime - BkHistoryGameLayer end ctor: ",(new Date).getTime())},onEnter:function(){cc.Node.prototype.onEnter.call(this),null!=this.Na&&this.Yl.length>this.Ic&&(this.Lb.forceDoLayout(),this.Lb.getInnerContainer().setContentSize(cc.size(this.Lb.getInnerContainerSize().width,this.cp)),this.Lb.jumpToTop())},Ge:function(t,e){var i=.38*GAME_SCALE;for(isWebPlatform()||(i=.6*GAME_SCALE),.1>=i&&(i=.1);0<t.Vh.length;){var n=t.Vh.pop();n.ts(),0>=n.cg&&(this.GL(n),t.XR(n))}n=t.pu(),console.log("updatePosForBoxQuanAn - chessList: ",n);var s,r,o,a=0,c=1,h=.85;for(s=0;s<t.Bc.length;s++){if(isWebPlatform()){s/6==c&&(c++,a=0),2<c&&(h=.68),r=X*i*.74*a,o=Fn*i*h*c;var l=t.x-UI.qa(t)/2+X*i*.5,u=t.y+UI.Ga(t)/2+Fn*i*.5;r=l+r,o=u-o,a++}else l=t.x-t.getWidth()/2,u=t.y,e&&(l=t.x+t.getWidth()/2),o=u,r=l+(s+1)*X*i*1,e&&(r=l-(s+1)*X*i*1);n[s].setPosition(r,o),n[s].ts()}},GL:function(t){t.setPosition(-100,-100)},fj:function(){switchToSceneWithGameState(P,!0);var t=new BkPacket;t.Uy(),BkConnectionManager.send(t)},kx:function(t,e){null!=this.ma&&this.ma.zm(t,e)},Lq:function(){var t=this;this.qe=new BkButton("back.png","back.png","back.png","back_press.png",ccui.Widget.PLIST_TEXTURE),isWebPlatform()||(this.$a=new BkButton("menu_butt.png","menu_butt_press.png","menu_butt.png","menu_butt.png",ccui.Widget.PLIST_TEXTURE));var e=5*GAME_SCALE,i=.067*cc.winSize.height;this.qe.Yb(GAME_SCALE),this.qe.x=e+this.qe.getContentSize().width*GAME_SCALE/2,this.qe.y=i,isWebPlatform()&&(this.qe.x=10+this.qe.getContentSize().width*GAME_SCALE/2,this.qe.y=cc.winSize.height-WINDOW_MARGIN_TOP*GAME_SCALE-this.qe.getBoundingBox().height/2+2),this.addChild(this.qe),this.qe.addClickEventListener((function(){t.fj()})),this.ma=new BkHeartSprite(!0),this.ma.setScale(GAME_SCALE),isWebPlatform()&&(this.ma.setScale(.6),this.ma.x=this.qe.x+this.ma.getBoundingBox().width/1.2,this.ma.y=this.qe.y-6),isWebPlatform()&&(e=cc.director.getWinSize(),cc.screen.fullScreen()?this.Ra=new BkButton("btn_scale2.png","btn_scale2.png","btn_scale2.png","btn_scale2_hover.png",ccui.Widget.PLIST_TEXTURE):this.Ra=new BkButton("btn_scale.png","btn_scale.png","btn_scale.png","btn_scale_hover.png",ccui.Widget.PLIST_TEXTURE),this.Ra.x=e.width-30,this.Ra.y=e.height-27,this.Ra.addClickEventListener((function(){cc.screen.fullScreen()?(exitFullScreen(),t.Ra.loadTextures("btn_scale.png","btn_scale.png","btn_scale.png","btn_scale_hover.png",ccui.Widget.PLIST_TEXTURE)):makeFullScreen((function(){cc.screen.fullScreen()?t.Ra.loadTextures("btn_scale2.png","btn_scale2.png","btn_scale2.png","btn_scale2_hover.png",ccui.Widget.PLIST_TEXTURE):t.Ra.loadTextures("btn_scale.png","btn_scale.png","btn_scale.png","btn_scale_hover.png",ccui.Widget.PLIST_TEXTURE)}))})),this.addChild(this.Ra),e=vl(e=mm()),this.Ud=new BkButton(e,e,e,e,ccui.Widget.PLIST_TEXTURE),this.Ud.y=this.Ra.y,this.Ud.addClickEventListener((function(){var e=!mm(),i=vl(e);lm(e),t.Ud.loadTextures(i,i,i,i,ccui.Widget.PLIST_TEXTURE)})),this.addChild(this.Ud),this.Ud.x=this.Ra.x-this.Ra.width-10,this.gc=new BkButton("btn_camera.png","btn_camera.png","btn_camera.png","btn_camera_hover.png",ccui.Widget.PLIST_TEXTURE),this.gc.x=this.Ud.x-this.Ud.width-10,this.gc.y=this.Ra.y,this.gc.addClickEventListener((function(){makeScreenShot()})),this.addChild(this.gc),this.Td=new BkButton("switch_butt.png","switch_butt_press.png","switch_butt.png","switch_butt.png",ccui.Widget.PLIST_TEXTURE),this.Td.setScale(.48*GAME_SCALE),this.Td.x=this.gc.x-this.gc.width-10,this.Td.y=this.gc.y,this.addChild(this.Td),t=this,this.Td.addClickEventListener((function(){t.Lr()})))},LJ:function(){this.Lt(),this.Mt(),this.Nt(),this.cz(),this.dz()},nB:function(){var t=this.data.XC.userName==BkGlobal.P.userName;return console.log("isPlayer2: ",t),t},hv:function(){var t=this.data.WC.userName==BkGlobal.P.userName;return console.log("isPlayer1: ",t),t},isPlaying:function(){return this.hv()||this.nB()},EB:function(){return!this.isPlaying()},uw:function(){this.Ff=this.we=this.Df=this.Ef=-1},mK:function(){var t=new BkSprite("#history_icon_vs.png");t.setScale(1.2*GAME_SCALE_MIN),t.x=this.Ci.x+.25*UI.qa(t),t.y=this.sf.y+.55*UI.Ga(t);var e=new BkSprite("#history_icon_player1.png");e.setScale(1.2*GAME_SCALE_MIN),e.x=this.ob.x-2*UI.qa(e),e.y=t.y,isWebPlatform()||this.addChild(e),(e=new BkSprite("#history_icon_player2.png")).setScale(1.2*GAME_SCALE_MIN),e.x=this.ob.x+2*UI.qa(e),e.y=t.y,isWebPlatform()||this.addChild(e)},WI:function(){console.log("CheckTime - convertServerStringFenToObject before convert: ",(new Date).getTime()),console.log("convertServerStringFenToObject - this.chessPieces: ",this.U);var t=[];if(0==this.data.Na.length)return t;for(var e=this.data.Na.split("#"),i=0;i<e.length;i++){console.log("CheckTime - convertServerStringFenToObject i: "+i+" at ",(new Date).getTime());var n=JSON.parse(e[i]);n.L0=function(){return 0==n.id%2},n.Sh=Gl(this.U),n.yP=JSON.parse(JSON.stringify(this.U[n.Fa])),n.YC=In(n.Fa,n.Sh),n.dm=n.YC%BkChessSize.Em,n.em=Math.floor(n.YC/(BkChessSize.sp-1)),console.log("CheckTime - convertServerStringFenToObject before isFirstMoveOfPiece i: "+i+" at ",(new Date).getTime());var s=this.YM(n,t);console.log("CheckTime - convertServerStringFenToObject after isFirstMoveOfPiece i: "+i+" at ",(new Date).getTime()),this.Ih()&&!s&&(n.TC=Jn(n.he),n.SC=Kn(n.he),n.TN=this.nu(n),n.Ah=this.lu(n)),n.Kg=this.CV(n,i),n.Kt=In(n.Fa,n.Kg),n.ql=n.Kt%BkChessSize.Em,n.rl=Math.floor(n.Kt/(BkChessSize.sp-1)),t.push(n)}return this.XG(t),console.log("convertServerStringFenToObject - movements: ",t.map((function(t){return t.Kg}))),t},YM:function(t,e){for(var i=0;i<e.length;i++)if(t.Fa==e[i].Fa)return!1;return!0},XG:function(t){for(var e=0;e<t.length;e++)0==e?(t[e].xm=t[e].wm,t[e].bp=t[e].wm,t[e].ms=0):1==e?(t[e].xm=t[e].wm-t[e-1].wm,t[e].bp=t[e-1].bp,t[e].ms=t[e].xm):(t[e].xm=t[e].wm-t[e-1].wm,0==e%2?(t[e].bp=t[e].xm,t[e].ms=t[e-1].ms):(t[e].bp=t[e-1].bp,t[e].ms=t[e].xm)),t[e].dp=this.yL(t,e),0==e?(t[e].ym=t[e].dp,t[e].ep=0):1==e?(t[e].ym=t[e-1].ym,t[e].ep=t[e].dp):0==e%2?(t[e].ym=t[e].dp,t[e].ep=t[e-1].ep):(t[e].ym=t[e-1].ym,t[e].ep=t[e].dp),t[e].z6=Sd-t[e].dp,t[e].VU=Sd-t[e].ym,t[e].WU=Sd-t[e].ep},uJ:function(){var t="#nuoc_vua_di_small.png",e=GAME_SCALE_MIN;isWebPlatform()&&(t="#nuocvuadi.png",e=.4),this.ce=getSpriteFromImage(t),this.ce.setPosition(-1e3,-1e3),this.ce.scale=e,this.addChild(this.ce),this.be=getSpriteFromImage("#nuocvuadi.png"),this.be.setPosition(-1e3,-1e3),this.be.scale=isWebPlatform()?.95:this.Kd,this.addChild(this.be)},rA:function(){this.ce.setPosition(-1e3,-1e3),this.be.setPosition(-1e3,-1e3)},yc:function(){null!=this.vb&&(this.vb.Er(),this.vb=null),null!=this.Nc&&this.Nc.setVisible(!1)},xX:function(){},fu:function(t){return zb(t.Hb,t.$c)},hq:function(){var t=this.data.WC,e=this.data.vg;switch((t=new BkChessPlayerInHistory(t,t.status,this,!0,e)).setScale(.7),this.XS(t),this.addChild(t),this.sf=t,t=this.data.XC,console.log("drawAvatar - player2: ",t),console.log("drawAvatar - winnerPosition: ",e),e){case hl:e=hl;break;case il:e=jl;break;case jl:e=il;break;default:e=hl}(e=new BkChessPlayerInHistory(t,t.status,this,!1,e)).setScale(.7),this.YS(e),this.addChild(e),this.Vf=e},YS:function(t){t.x=170,t.y=481},XS:function(t){t.x=170,t.y=212},MZ:function(){return{x:170,y:481}},LZ:function(){return{x:170,y:212}},ZJ:function(){this.gd=new BkTakenListChessPieceInHistory(!0),this.gd.setScaleX(.75),this.gd.setScaleY(.5),this.gd.setPosition({x:85,y:60}),this.addChild(this.gd),this.jd=new BkTakenListChessPieceInHistory(!1),this.jd.setScaleX(.75),this.jd.setScaleY(.5),this.jd.setPosition({x:85,y:330}),this.addChild(this.jd),this.WG()},WG:function(){this.ME=[],this.KE=[],this.NE=[],this.LE=[];for(var t=0;t<CHESS_TYPES;t++){var e=t,i=!1,n=0,s=!1,r=-1;(e=new BkTakenChessInHistory(e,i,n,s,r)).x=-1e3,e.y=-1e3,this.addChild(e),this.ME.push(e)}for(t=0;t<CHESS_TYPES;t++)e=t,i=!1,n=0,s=!0,r=-1,(e=new BkTakenChessInHistory(e,i,n,s,r)).x=-1e3,e.y=-1e3,this.addChild(e),this.KE.push(e);for(t=0;t<CHESS_TYPES;t++)e=t,i=!0,n=0,s=!1,r=-1,(e=new BkTakenChessInHistory(e,i,n,s,r)).x=-1e3,e.y=-1e3,this.addChild(e),this.NE.push(e);for(t=0;t<CHESS_TYPES;t++)e=t,i=!0,n=0,s=!0,r=-1,(e=new BkTakenChessInHistory(e,i,n,s,r)).x=-1e3,e.y=-1e3,this.addChild(e),this.LE.push(e)},SZ:function(){return{x:85,y:330}},RZ:function(){return{x:85,y:60}},PU:function(){this.jc?(this.Vf.y=212,this.jd.y=60,this.sf.y=481,this.gd.y=330):(this.sf.y=212,this.gd.y=60,this.Vf.y=481,this.jd.y=330),this.Ge(this.gd,!0),this.Ge(this.jd,!0)},s_:function(){var t=this.ob;return UI.fb(t)+.28*UI.qa(t)},O_:function(){var t=this.ob;return UI.fb(t)+.58*UI.qa(t)},iH:function(t){null!=t&&((t=new BkPlayerInfo(t.userName)).Ab(this),t.Oa())},UE:function(t){if(t==this.Vk)this.LV(this.Na[0]),this.Ia=this.Vk,this.rA();else{this.Ia=t,this.Qj=this.Na[t].Kg;for(var e=0;e<=t;e++)this.ZE(this.Na[e])}},LV:function(t){this.eF(t.Sh,t,!0)},ZE:function(t){this.eF(t.Kg,t,!1)},eF:function(t,e){for(var i=0;i<t.length;i++){var n=this.U[i],s=this.Hg[i];n.sa=t[i].sa,n.mx(t[i].Ck),s.sa=n.sa;var r=n.ea,o=n.rowIndex;this.jc&&(r=8-r,o=9-o),s.pT(r,o),e.Fa==n.Fa&&this.Gw(e)}},Lr:function(){this.jc=!this.jc;var t,e,i=this.Hg.length;for(t=0;t<i;t++)console.log("rotateChessBoard - i: ",t),console.log("rotateChessBoard - len: ",i),(e=this.Hg[t]).stopAllActions(),e.ea=8-e.ea,e.rowIndex=9-e.rowIndex,e.aS(this.Sb(e.ea),this.Tb(e.rowIndex));if(console.log("rotateChessBoard - after for"),-1!=this.we){t=8-this.we,e=9-this.Ff;i=8-this.Df;var n=9-this.Ef;this.we=t,this.Ff=e,this.Df=i,this.Ef=n,this.aN()||(this.ce.setPosition(this.Sb(t),this.Tb(e)),this.be.setPosition(this.Sb(i),this.Tb(n)))}this.PU()},aN:function(){return-1==this.Ia},Gw:function(t){this.we=t.dm,this.Ff=t.em,this.Df=t.ql,this.Ef=t.rl,this.jc&&(this.Ff=9-this.Ff,this.Ef=9-this.Ef,this.we=8-this.we,this.Df=8-this.Df),this.ce.setPosition(this.Sb(this.we),this.Tb(this.Ff)),this.be.setPosition(this.Sb(this.Df),this.Tb(this.Ef))},fJ:function(){var t=this.ob,e=new BkSprite("#history_board_bg_web.png");e.x=UI.fb(t)+.24*UI.Da(t),e.y=t.y-.03*UI.qa(t),this.addChild(e);var i=new BkSprite("#history_title.png");i.x=e.x-.1*UI.qa(i),i.y=UI.xf(e)-.8*UI.Ga(i),this.addChild(i),(t=new BkButton("history_btn_info.png","history_btn_info.png","history_btn_info.png","history_btn_info.png",ccui.Widget.PLIST_TEXTURE)).x=UI.fb(i)+UI.qa(t),t.y=i.y,t.addClickEventListener((function(){console.log("btnInfo click");var t=cc.game.config.app.fenUrl;null!=t&&""!=t&&window.open(t,"_blank")})),this.addChild(t),(i=new BkSprite("#history_turn_red_chess.png")).x=UI.eb(e)+1.2*UI.qa(i),i.y=UI.xf(e)-1.3*UI.Ga(i),this.addChild(i);var n=new BkSprite("#history_turn_black_chess.png");n.x=UI.fb(e)-.9*UI.qa(n),n.y=i.y,this.addChild(n),console.log("createFen1 - btnInfo: ",t),(t=new BkSprite("#history_fen_bg_web.png")).setOpacity(0),t.setScaleX(.78),t.setScaleY(.78),t.x=UI.eb(e)+UI.Da(t),t.y=e.y-.05*UI.Ga(e),this.addChild(t),this.Ci=t,this.Xk=new BkSprite,this.Xk.setContentSize(UI.qa(t)-6,UI.Ga(t)-6),this.addChild(this.Xk),t=30,e=this.UI(this.Na),console.log("strFen: ",e),0<this.Na.length&&(this.Lb=this.OG(this.Na,this.Xk,this.Ci)),console.log("createFen1 - this.listView1: ",this.Lb),(e=new BkSprite("#history_fen_bg.png")).x=this.ob.x,e.y=UI.Bh(this.ob)-UI.Ga(e),e.setScaleX(this.Kd),e.setScaleY(1.3*GAME_SCALE),this.addChild(e),t=30*GAME_SCALE,(t=new BkLabel("abc","",t)).x=e.x,t.y=e.y,this.ro=t,this.Am()},GY:function(){var t=new BkSprite("#history_fen_bg_web.png"),e=this.ob;t.setScale(.45),t.x=UI.fb(e)+.65*UI.Da(t),t.y=UI.Bh(e)+.85*UI.Ga(t),this.addChild(t),this.Px=new BkSprite,this.Px.setContentSize(UI.qa(t),UI.Ga(t)),this.Na.filter((function(t){return 0!=t.id%2}))},wz:function(t){t&&(this.uT(t),this.Oo(t.id),0<=this.Ia?this.Zt():this.fq(),this.Ia>=this.Na.length-1?this.Ot():this.$t(),this.CE(),this.Am(),this.pm(t),this.Ih()&&this.nm(t,!0),this.ss(),this.rs(),this.us())},Zt:function(){this.rz(),this.rK()},fq:function(){this.Lt(),this.cz()},Ot:function(){this.Mt(),this.dz(),this.Nt()},$t:function(){this.sz(),this.sK(),this.mq()},uT:function(t){this.Ia=t.id,this.Jk(),this.HV(t)},HV:function(t){t=t.id;for(var e=0;e<=t;e++)this.ZE(this.Na[e])},OG:function(t,e,i){return(t=new Cn).name="List Movements",t.setDirection(ccui.ScrollView.DIR_VERTICAL),t.setScrollBarEnabled(!1),t.setTouchEnabled(!0),t.setBounceEnabled(!0),t.setContentSize(cc.size(e.getContentSize().width,e.getContentSize().height)),t.setPosition(i.x,i.y),t.setGravity(ccui.ListView.GRAVITY_CENTER_VERTICAL),this.ey(t),t.setItemsMargin(this.oc),this.Hc=this.Pd*this.Ic+this.Ic*this.oc,t.getItems(),e.addChild(t),this.scheduleUpdate(),t},ey:function(t){console.log("before convert");var e=this.Yl;console.log("movementCouples: ",e);var i=this.Sy(e[0],this);for(t.setItemModel(i),this.Pd=i.getContentSize().height,this.cp=this.Pd*e.length+e.length*this.oc,this.ke=(this.Ic-this.yj)/2*(this.Pd+this.oc),console.log("addFensList - this._bufferZone: ",this.ke),i=t.Fk=0;i<e.length;++i)if(i<this.Ic){var n=this.Sy(e[i],this);n.setTag(i),t.pushBackCustomItem(n),t.Fk+=n.getContentSize().height+this.oc}t.Fk-=this.oc,(e=this.Yl).length>this.yj&&t.forceDoLayout(),t.getInnerContainer().setContentSize(cc.size(t.getInnerContainerSize().width,this.cp)),t.jumpToTop()},VI:function(){for(var t=[],e=this.Na,i=0;i<e.length;i+=2)t.push({id:i/2,red:e[i],py:e[i+1]||null});return t},Oo:function(t){var e=this.Lb.getItems();console.log("setCurrentFenBg - fensListView.length: "+e.length);for(var i=0;i<e.length;i++){var n=e[i].pq,s=n.AK();t==n.Uh.id||t==s?n.Pr(!0,t):n.Pr(!1,t)}},v4:function(){},Sy:function(t,e){console.log("createFenItem - movementCouple: ",t);var i=new BkFenItem(t,e,this.yj),n=new ccui.Layout;return n.setContentSize(i.getContentSize()),i.setPosition(.5*i.getContentSize().width,.5*i.getContentSize().height),n.addChild(i),n.movement=t,n.pq=i,n.id=t.id,n},sj:function(t,e){(i=this.Lb.getItems()[e]).setTag(t),i.id=t;var i=i.getChildren()[0],n=this.Yl[t];n&&i.iV(n),this.nV()},nV:function(){for(var t=this.Lb.getItems(),e=0;e<t.length;e++);},update:function(t){var e=this.Yl;if(!(e.length<=this.Ic||(this.Uf+=t,this.Uf<this.Lm))){this.Uf=0,t=this.Pd*e.length+(e.length-1)*this.oc;for(var i=this.Lb.getContentSize().height,n=this.Lb.getItems(),s=0;s<n.length;s++){if(0==(o=n[s]).getPosition().y&&o.Ta!=e.length)return}var r=this.Lb.getInnerContainer().getPosition().y<this.Sf;for(s=0;s<this.Ic&&s<e.length;++s){var o=n[s],a=this.Fi(this.Lb,o);r?a<-this.ke&&o.getPosition().y+this.Hc<t&&(a=o.getTag()-n.length,o.setPositionY(o.getPosition().y+this.Hc),this.sj(a,s,o)):a>this.ke+i&&0<=o.getPositionY()-this.Hc&&(o.setPositionY(o.getPositionY()-this.Hc),a=o.getTag()+n.length,this.sj(a,s,o))}this.Sf-this.Lb.getInnerContainer().getPosition().y>this.Hc?this.Sf-=this.Hc:this.Sf=this.Lb.getInnerContainer().getPosition().y}},K_:function(){return this.Lb.getItems().map((function(t){return t.getPositionX()}))},Dq:function(){return this.Lb.getItems().sort((function(t,e){return t.x<e.x?-1:1})).map((function(t){return t.getChildren()[0]})).map((function(t){return t.movement.id}))},o_:function(t){return t=t.getParent().convertToWorldSpaceAR(t.getPosition()),this.Lb.convertToNodeSpaceAR(t).x},Fi:function(t,e){var i=e.getParent().convertToWorldSpaceAR(e.getPosition());return t.convertToNodeSpaceAR(i).y},yL:function(t,e){for(var i=0,n=0;n<=e;n++)0==(e-n)%2&&(i+=t[n].xm);return i},CV:function(t,e){var i=this.fL(t.Fa);null!=i&&(i.mx(t.uz),i.he=t.he,i.Ja=t.he,i.hc=Hn,i.sc=Hn);for(var n=this.gL(t.uz),s=0;s<n.length;s++){var r=n[s];r.Fa!=i.Fa&&(r.sa=!0,r.Vg=t.id)}return i=Gl(this.U),console.log("faceUps at i: "+e+" - ",i.filter((function(t){return t.sc==Hn}))),i},gL:function(t){for(var e=[],i=0;i<this.U.length;i++){var n=this.U[i];n.Ck==t&&e.push(n)}return e},fL:function(t){for(var e=0;e<this.U.length;e++)if(t==e)return this.U[e];return null},UI:function(t){for(var e="",i=0;i<t.length;i++){var n=t[i],s=this.nL(n);n.description=s,e+=s,n.TN=this.nu(n),s=this.lu(n),n.Ah=s,e=1==i%2?e+"   ":e+" "}return console.log("convertMovementsToClientFen - movements: ",t),e},nL:function(t){var e;return e=""+t.TC,e+=Ln(t.Fa,t.Sh),e+=Mn(t.Fa,t.dm),e+=Nn(t.Fa,t.em,t.rl),e=t.dm==t.ql?e+Math.abs(t.em-t.rl):e+Mn(t.Fa,t.ql),this.Ih()&&t.yP.hc==Y&&(e+=" => "+Jn(t.he)),e},lu:function(t){var e="";return(e=0==t.id%2?e+"Đỏ đi: ":e+"Đen đi: ")+this.nu(t)},nu:function(t){var e,i;e=t.SC+" ",e+=On(t.Fa,t.Sh),e+=Mn(t.Fa,t.dm)+" ";t:switch(Nn(t.Fa,t.em,t.rl)){case BkChessMoveType.wp:i=BkChessMoveTypeDescription.wp;break t;case BkChessMoveType.Fm:i=BkChessMoveTypeDescription.Fm;break t;case BkChessMoveType.Dm:i=BkChessMoveTypeDescription.Dm;break t;default:i=""}return e+=i+" ",t.dm==t.ql?e+(Math.abs(t.em-t.rl)+" "):e+(Mn(t.Fa,t.ql)+" ")},Sb:function(t){return 0>t?-200:this.background.x+(t-4)*(isWebPlatform()?WEB_BOARD_CELL_WIDTH:BOARD_CELL_WIDTH)*this.background.scaleX},Tb:function(t){var e=isWebPlatform()?WEB_BOARD_HEIGHT_RIVER:BOARD_HEIGHT_RIVER,i=isWebPlatform()?WEB_BOARD_CELL_HEIGHT:BOARD_CELL_HEIGHT,n=isWebPlatform()?2:0;return 0>t?-200:4<t?this.background.y+e*this.background.scaleY*.5+(t-5)*i*this.background.scaleY-n:this.background.y-e*this.background.scaleY*.5+(t-4)*i*this.background.scaleY},qs:function(){if(0!=this.Na.length){var t;t=this.Ia==this.Vk?this.Na[0].Sh:this.Na[this.Ia].Kg,console.log("updateDeadAndLivePiecesData - dead currentPieces",t.filter((function(t){return t.sa})));for(var e=0;e<t.length;e++)this.U[e].sa=t[e].sa,this.U[e].Ck=t[e].Ck,this.U[e].hc=t[e].hc,this.U[e].ea=t[e].ea,this.U[e].rowIndex=t[e].rowIndex}},sC:function(){if(console.log("onClickMoveFirst"),this.qs(),this.Yu){this.Si=!1,this.Ia=this.Vk,0<this.Na.length&&(this.Qj=this.Na[0].Sh,this.Ih()&&this.nm(this.Na[0],!1)),this.us(),this.ss(),this.CE(),this.pm(null),this.UE(this.Vk),this.Am(),this.$t(),this.fq(),this.Gy();var t=cc.delayTime(0),e=this,i=cc.callFunc((function(){console.log("onClickMoveLast - setCurrentFenBg - self.currentMovementId: ",e.Ia),e.Oo(e.Ia)}));t=cc.sequence(t,i);this.runAction(t),this.Lb.jumpToPercentVertical(0)}},d_:function(){return this.Lb.ju().pq.id},M3:function(){this.Lb.removeAllChildrenWithCleanup(!0)},BX:function(){this.ey(this.Lb)},CE:function(){this.sequence&&(this.stopAction(this.sequence),this.sequence=null),this.sf.yc(),this.Vf.yc()},AO:function(){if(this.Zu&&(this.Si=!1,this.Ia=this.Na.length-1,console.log("onClickMoveLast - this.currentMovementId: ",this.Ia),this.qs(),this.UE(this.Ia),this.rs(),0<this.Na.length)){var t=this.Na[this.Na.length-1];this.Qj=t.Kg,this.ss(),this.rs(),this.us(),this.sequence&&(this.stopAction(this.sequence),this.sequence=null),this.sf.yc(),this.Vf.yc(),this.pm(t),this.Lb.jumpToPercentVertical(100),this.Am(),this.Zt(),this.Ot(),this.Ih()&&this.nm(t,!0);t=cc.delayTime(.3);var e=this,i=cc.callFunc((function(){console.log("onClickMoveLast - setCurrentFenBg - self.currentMovementId: ",e.Ia),e.Oo(e.Ia)}));t=cc.sequence(t,i);this.runAction(t)}},QT:function(){var t=this.iu(),e=this.ob;showToastMessage(t,e.x,e.y,null,.35*cc.winSize.width)},UG:function(){var t=new BkSprite("#history_time_bg.png");t.x=UI.fb(this.qe)+10+UI.Da(t),t.y=this.qe.y,this.addChild(t);var e=this.$j();(e=new BkLabel(e,"Arial",14)).setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),e.x=t.x,e.y=t.y,this.addChild(e)},dJ:function(){var t=this,e=1.2*GAME_SCALE_MIN;isWebPlatform()&&(e=1),this.Oe=new BkButton("history_btn_move_first.png","history_btn_move_first.png","history_btn_move_first.png","history_btn_move_first_hover.png",ccui.Widget.PLIST_TEXTURE),this.Oe.setScale(e),this.Oe.x=UI.eb(this.Ci)+UI.Da(this.Oe),this.Oe.y=.067*cc.winSize.height,this.Oe.addClickEventListener((function(){t.sC()})),this.addChild(this.Oe),this.$a=new BkButton("history_btn_back.png","history_btn_back.png","history_btn_back.png","history_btn_back_hover.png",ccui.Widget.PLIST_TEXTURE),this.$a.setScale(e),this.$a.x=UI.fb(this.Oe)+UI.Da(this.$a),this.$a.y=this.Oe.y,this.$a.addClickEventListener((function(){t.lO()})),this.addChild(this.$a),this.Gg=new BkButton("history_btn_play.png","history_btn_play.png","history_btn_play.png","history_btn_play_hover.png",ccui.Widget.PLIST_TEXTURE),this.Gg.setScale(e),this.Gg.x=UI.fb(this.$a)+UI.Da(this.Gg),this.Gg.y=this.Oe.y,this.Gg.addClickEventListener((function(){t.BO()})),this.addChild(this.Gg),this.rh=new BkButton("history_btn_forward.png","history_btn_forward_press.png","history_btn_forward.png","history_btn_forward_hover.png",ccui.Widget.PLIST_TEXTURE),this.rh.setScale(e),this.rh.x=UI.fb(this.Gg)+UI.Da(this.rh),this.rh.y=this.Oe.y,this.rh.addClickEventListener((function(){t.uO()})),this.addChild(this.rh),this.qi=new BkButton("history_btn_move_last.png","history_btn_move_last.png","history_btn_move_last.png","history_btn_move_last_hover.png",ccui.Widget.PLIST_TEXTURE),this.qi.setScale(e),this.qi.x=UI.fb(this.rh)+UI.Da(this.qi),this.qi.y=this.Oe.y,this.qi.addClickEventListener((function(){t.AO()})),this.addChild(this.qi)},cB:function(){return this.Ia==this.Na.length-1},BO:function(){this.Rq&&(this.Si?(this.Si=!1,this.mq(),this.sequence&&(this.stopAction(this.sequence),this.sequence=null,this.sf.yc(),this.Vf.yc())):(this.Si=!0,this.zH(),this.VC()))},VC:function(){if(!this.cB()){var t=cc.callFunc(this.eC,this);console.log("timeToShow: ",1),this.sequence=cc.sequence(cc.delayTime(1),t),this.runAction(this.sequence)}},rz:function(){this.Vu=!0,this.$a.loadTextures("history_btn_back.png","history_btn_back_press.png","history_btn_back.png","history_btn_back_hover.png",ccui.Widget.PLIST_TEXTURE)},Lt:function(){this.Vu=!1,this.$a.loadTextures("history_btn_back_off.png","history_btn_back_off.png","history_btn_back_off.png","history_btn_back_off.png",ccui.Widget.PLIST_TEXTURE)},sz:function(){this.Xu=!0,this.rh.loadTextures("history_btn_forward.png","history_btn_forward_press.png","history_btn_forward.png","history_btn_forward_hover.png",ccui.Widget.PLIST_TEXTURE)},Mt:function(){this.Xu=!1,this.rh.loadTextures("history_btn_forward_off.png","history_btn_forward_off.png","history_btn_forward_off.png","history_btn_forward_off.png",ccui.Widget.PLIST_TEXTURE)},rK:function(){this.Yu=!0,this.Oe.loadTextures("history_btn_move_first.png","history_btn_move_first.png","history_btn_move_first.png","history_btn_move_first_hover.png",ccui.Widget.PLIST_TEXTURE)},cz:function(){this.Yu=!1,this.Oe.loadTextures("history_btn_move_first_off.png","history_btn_move_first_off.png","history_btn_move_first_off.png","history_btn_move_first_off.png",ccui.Widget.PLIST_TEXTURE)},sK:function(){this.Zu=!0,this.qi.loadTextures("history_btn_move_last.png","history_btn_move_last.png","history_btn_move_last.png","history_btn_move_last_hover.png",ccui.Widget.PLIST_TEXTURE)},dz:function(){this.Zu=!1,this.qi.loadTextures("history_btn_move_last_off.png","history_btn_move_last_off.png","history_btn_move_last_off.png","history_btn_move_last_off.png",ccui.Widget.PLIST_TEXTURE)},zH:function(){this.Rq=!0,this.Gg.loadTextures("history_btn_pause.png","history_btn_pause.png","history_btn_pause.png","history_btn_pause_hover.png",ccui.Widget.PLIST_TEXTURE)},mq:function(){this.Rq=!0,this.Gg.loadTextures("history_btn_play.png","history_btn_play.png","history_btn_play.png","history_btn_play_hover.png",ccui.Widget.PLIST_TEXTURE)},Nt:function(){this.Rq=!1,this.Gg.loadTextures("history_btn_play_off.png","history_btn_play_off.png","history_btn_play_off.png","history_btn_play_off.png",ccui.Widget.PLIST_TEXTURE)},eC:function(){console.log("moveToNextFen - this.currentMovementId: "+this.Ia),console.log("moveToNextFen - this.isMoving: "+this.Jl);var t=this.Lb.getItems();if(console.log("moveToNextFen - items in worldspaceY: ",t.map((function(t){return t.convertToWorldSpaceAR().y}))),console.log("moveToNextFen - items getAnchor: ",t.map((function(t){return t.getAnchorPoint()}))),t=this.Ci,console.log("moveToNextFen - fenBg in worldspaceY: ",t.convertToWorldSpaceAR().y),console.log("moveToNextFen - fenBg: ",t),console.log("moveToNextFen - UI.getTopPositionOfNodeInWorldView(fenBg): ",UI.su(t)),console.log("moveToNextFen - UI.getBottomPositionOfNodeInWorldView(fenBg): ",UI.gu(t)),this.Zt(),this.Ia<this.Na.length-1){this.Ia++;var e=this.Na[this.Ia];this.U[e.Fa].mx(e.Kt);t=this.Hg[e.Fa];var i=e.rl,n=e.ql;this.jc&&(i=9-i,n=8-n),t.ea=n,t.rowIndex=i,n=this.Sb(n),i=this.Tb(i),this.Qj=e.Kg,this.Jl=!0,e=cc.callFunc(this.uH,this),n=cc.moveTo(.2,n,i),e=cc.sequence(n,e),t.runAction(e),this.Pq()?(playChieuTuongSound(),this.Vd.setOpacity(255),this.Vd.setVisible(!0),this.Vd.runAction(cc.fadeOut(TIME_SHOW_SPRITE_CHESS_INGAME))):this.xN()?playCoAnQuanSound():playCoDiChuyenSound(),this.Ia<this.Na.length-1&&this.zS(this.Lb,this.Ci),this.Oo(this.Ia),this.Ia==this.Na.length-1&&this.Ot()}this.Am(),console.log("this.isPlayingVideo: "+this.Si),this.Si&&this.VC(),this.FS()},FS:function(){var t=new BkPacket;t.$I(),BkConnectionManager.send(t)},xN:function(){if(-1<this.Ia){var t=this.Na[this.Ia];return this.Hz(t.Sh)!=this.Hz(t.Kg)}return!1},Hz:function(t){for(var e=0,i=0;i<t.length;i++)t[i].sa&&e++;return e},Pq:function(){var t=this.Na[this.Ia].id%2,e=this.IK();if(console.log("isChieuTuong - board: ",e),i=this.U[this.tu(1-t)])for(var i=this.fg(i.ea,i.rowIndex),n=0;16>n;n++){var s=this.U[16*t+n];if(!s.sa&&s.tt(i,e))return console.log("isChieuTuong - piece: ",s),!0}return!1},IK:function(){for(var t=Array(BkChessSize.Em),e=0;e<BkChessSize.Em;e++){t[e]=Array(BkChessSize.sp);for(var i=0;i<BkChessSize.sp;i++)t[e][i]=-1}for(i=this.U,console.log("getCurrentBoard - dead currentPieces",i.filter((function(t){return t.sa}))),e=0;e<i.length;e++){var n=i[e];n.sa||(t[n.ea][n.rowIndex]=e)}return t},dq:function(t){var e=new BkChessPiece(t);return e.Ja=this.U[t].he,e.pa=this.U[t].pa,e.ea=this.U[t].ea,e.rowIndex=this.U[t].rowIndex,e},fg:function(t,e){return 9*e+t},tu:function(t){return 16*t},uO:function(){this.Xu&&(this.Mt(),this.eC(),this.FE(),this.cB()?this.Nt():this.mq())},FE:function(){this.Si=!1,this.sequence&&(this.stopAction(this.sequence),this.sequence=null),this.sf.yc(),this.Vf.yc()},Am:function(){var t="";if(0==this.Na.length)t=this.iu();else if(0>this.Ia)t="";else if(this.Ia<this.Na.length-1){var e=this.Na[this.Ia];t=(t=t+(Math.floor(this.Ia/2)+1+"/")+Math.floor(this.Na.length/2))+" - "+this.lu(e)}else t=this.iu(),this.QT();this.ro.setString(t)},iu:function(){var t=this,e="",i=!1;return this.data.vg==hl?e+="Hoà cờ. Lý do: ":this.data.vg==il?this.EB()?(console.log("đã xem"),e+="Đỏ thắng. Lý do: "):this.hv()?e+="Thắng. Lý do: ":(i=!0,e+="Thua. Lý do: "):this.data.vg==jl?this.EB()?e+="Đen thắng. Lý do: ":this.hv()?(i=!0,e+="THUA. Lý do: "):e+="THẮNG. Lý do: ":e+="?",e+kl.filter((function(e){return e.key==t.data.tK})).map((function(t){return i&&t.key==DAU_HANG_REASON?"Đầu hàng":t.value}))},lB:function(t,e){if(r=this.Fz(t)){var i=UI.su(e),n=UI.gu(e);console.log("chase update - fenBgTop: ",i),console.log("chase update - fenBgBottom: ",n);var s=UI.su(r),r=UI.gu(r);return console.log("chase update - itemTop: ",s),console.log("chase update - itemBottom: ",r),s>i||r<n}return!1},Fz:function(t){t=t.getItems();for(var e=Math.floor(this.Ia/2),i=0;i<t.length;i++){var n=t[i];if(n.getChildren()[0].id==e)return n}return 0},m_:function(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(n.id==e)return n}return null},zS:function(t,e){var i=this.hu(t);console.log("chase update - current: ",i);for(var n=0;this.lB(t,e)&&1e3>n;)i+=.1,console.log("chase update - jump to nextPercent: ",i),i=Math.min(100,i),t.jumpToPercentVertical(i),n++;i=cc.delayTime(.2);var s=this;n=cc.callFunc((function(){var e=s.hu(t);console.log("chase update - currentPercent after jump: ",e)})),i=cc.sequence(i,n);this.runAction(i)},yS:function(t,e){console.log("scrollToBackFen");for(var i=this.hu(t),n=0;this.lB(t,e)&&1e3>n;)console.log("this.getPercentOfOneItem(listView): ",.1),i+=-.1,console.log("chase update - jump back to percent: ",i),i=Math.max(0,i),t.jumpToPercentVertical(i),n++;console.log("chase update - current Item: ",this.Fz(t))},hu:function(t){t=t.ju();var e=this.Yl.length-this.yj;if(0>=e)return 100;var i=Math.min(100,t.pq.id/e*100);return console.log("chase update - currentPercentOfFen: ",i),console.log("chase update - firstVisibleItem.fenItem.id: ",t.pq.id),console.log("chase update - lastItemIndex: ",e),i},L_:function(t){var e,i=(e=t.getInnerContainer()).getPosition().y,n=e.getContentSize(),s=t.getContentSize();if(0==(e=(o=t.getItems()).length))return 0;var r=t.Fk/e,o=o[0].height,a=this.yj;return 0==e-a?0:(e=Math.max(0,t.Fk-s.height),e=t.Fk,console.log("chase update - innerContainerSize.height:  ",n.height),console.log("chase update - itemHeight:  ",r),console.log("chase update - itemHeight2:  ",o),console.log("chase update - listViewSize.height :  ",s.height),console.log("chase update - visibleItemsCount:  ",a),console.log("chase update - listViewSize.height:  ",s.height),console.log("chase update - scrollableDistance:  ",e),n=t.ju(),t=t.NK(),console.log("chase update - firstVisibleItem:  ",n),t=Math.abs(t.getPosition().y-n.getPosition().y),console.log("chase update - scrolledDistance:  ",t),console.log("chase update - innerContainerPosY:  ",i),i=Math.min(100,t/e*100),console.log("chase update - currentPercentage:  ",i),i)},H_:function(){return.1},rs:function(){this.pV(),this.Ge(this.gd,!1),this.Ge(this.jd,!1),console.log("updateDeadPiecesToBox: this.boxQuanAnPlayer1: ",this.gd)},uH:function(){console.log("callbackNextFen"),this.qs(),this.rs();var t=this.Na[this.Ia];t&&(0==t.id%2?this.sf.yc():this.Vf.yc(),this.pm(t),this.Gw(t),this.Ih()&&this.nm(t,!0)),this.Jl=!1,this.UM()||this.sz()},UM:function(){return this.Ia==this.Na.length-1},Ih:function(){return this.ya==L},tH:function(){if(this.qs(),this.us(),this.ss(),-1<this.Ia){var t=this.Na[this.Ia];this.pm(t),this.Gw(t),this.Ih()&&this.nm(t,!0)}else this.pm(null),this.rA(),t=this.Na[0],this.Ih()&&this.nm(t,!1);this.Jl=!1,-1<this.Ia&&this.rz()},pm:function(t){t?(this.sf.ie(t.VU),this.Vf.ie(t.WU)):(this.sf.ie(Sd),this.Vf.ie(Sd))},Gz:function(){return this.Ia>this.Vk?this.Na[this.Ia].Kg:this.Qj},pV:function(){var t=this.Gz().filter((function(t){return t.sa}));console.log("updateDeadPieces - deadPieces: ",t);for(var e=0;e<t.length;e++){var i=t[e],n=this.qL(i);null!=n&&(n.sa=i.sa,-1==n.Vg&&(n.Vg=i.Vg),console.log("updateDeadPieces - piece: ",i),this.MG(i,n),console.log("updateDeadPieces - this.boxQuananTop: ",this.gd),console.log("updateDeadPieces - this.boxQuananBottom: ",this.jd)),(i=this.qu(i.Fa))&&i.setPosition(-1e3,-1e3)}},ss:function(){var t=this.Gz().filter((function(t){return!t.sa}));console.log("updateLivePiecesInTakenBox - livePieces: ",t.map((function(t){return t.Fa})));var e=t.map((function(t){return t.Fa})),i=this.Sj.filter((function(t){return!ub(t,e)}));t=this.Sj.filter((function(t){return!ub(t,i)}));console.log("updateLivePiecesInTakenBox - newDeadPieces: ",i),console.log("updateLivePiecesInTakenBox - removeUnDeadPieces: ",t);for(var n=0;n<t.length;n++){var s=t[n];s<BkChessSize.yg?(this.jd.hD(s),console.log("updateLivePiecesInTakenBox - this.boxQuanAnPlayer2: ",this.jd)):this.gd.hD(s)}this.Sj=i,this.Ge(this.gd,!0),this.Ge(this.jd,!0),console.log("updateLivePiecesInTakenBox - this.boxQuanAnPlayer1: ",this.gd),console.log("updateLivePiecesInTakenBox - this.boxQuanAnPlayer2: ",this.jd)},R6:function(){},qL:function(t){var e=t.sc==Y;return console.log("getTakePieceSprite - piece: ",t),t.pa==Jb?e?this.KE[t.he]:this.ME[t.he]:e?this.LE[t.he]:this.NE[t.he]},MG:function(t,e){console.log("addDeadPiece - this.deathPieceIndexes: ",this.Sj),console.log("addDeadPiece - piece.pieceIndex: ",t.Fa),console.log("addDeadPiece - this.chessPieces[piece.pieceIndex]: ",this.U[t.Fa]);var i=t.Fa;ub(i,this.Sj)||(this.Sj.push(i),e.Cu(i),this.qN(t)?this.jd.ij(e,t.sc):(console.log("addDeadPiece - call to boxQuanAnPlayer1.pushToChessList - pieceSprite: ",e),console.log("addDeadPiece - call to boxQuanAnPlayer1.pushToChessList - piece: ",t),this.gd.ij(e,t.sc)))},qN:function(t){return t.Fa<BkChessSize.yg},Q3:function(){this.gd.reset(),this.Ge(this.gd,!1),this.jd.reset(),this.Ge(this.jd,!1)},P3:function(){this.gd.reset(),this.jd.reset()},us:function(){for(var t=this.Qj.filter((function(t){return!t.sa})),e=0;e<t.length;e++){var i=t[e],n=this.qu(i.Fa);null!=n&&(n.sa=i.sa,n.bS())}},qu:function(t){for(var e=0;e<this.Hg.length;e++){var i=this.Hg[e];if(i.index==t)return i}return null},lO:function(){if(this.Vu&&(this.$t(),this.Lt(),!this.Jl)){if(0<=(e=this.Ia)&&e<=this.Na.length){var t=this.Na[e],e=this.Hg[t.Fa],i=t.em,n=t.dm;this.jc&&(i=9-i,n=8-n),e.ea=n,e.rowIndex=i,this.Qj=t.Sh,i=this.Sb(e.ea),n=this.Tb(e.rowIndex),this.Ia--,this.Jl=!0,t=cc.callFunc(this.tH,this),i=cc.moveTo(.2,i,n),t=cc.sequence(i,t),e.runAction(t),this.Oo(this.Ia),0<=this.Ia&&this.yS(this.Lb,this.Ci),0>this.Ia&&this.fq()}this.Am(),this.FE(),this.mq(),this.Gy()}},Gy:function(){this.sf.Oj(),this.Vf.Oj(),this.sf.nl(),this.Vf.nl(),hideToastMessage()},mJ:function(){this.il=new BkButton("menu_butt.png","menu_butt_press.png","menu_butt.png","menu_butt.png",ccui.Widget.PLIST_TEXTURE);var t=5*GAME_SCALE,e=.067*cc.winSize.height;this.il.Yb(GAME_SCALE),this.il.x=t+this.il.getContentSize().width*GAME_SCALE/2,this.il.y=e,this.il.addClickEventListener((function(){})),this.addChild(this.il)},Jk:function(){for(var t=0;32>t;t++){var e=this.Hg[t];e.Fu(t),e.setScale(isWebPlatform()?this.YF:this.Kd),e.setOpacity(255),e.x=this.Sb(e.ea),e.y=this.Tb(e.rowIndex),e.Mk(!1)}},Sb:function(t){return 0>t?-200:this.ob.x+(t-4)*(isWebPlatform()?WEB_BOARD_CELL_WIDTH:BOARD_CELL_WIDTH)*this.ob.scaleX},Tb:function(t){var e=isWebPlatform()?WEB_BOARD_HEIGHT_RIVER:BOARD_HEIGHT_RIVER,i=isWebPlatform()?WEB_BOARD_CELL_HEIGHT:BOARD_CELL_HEIGHT,n=isWebPlatform()?2:0;return 0>t?-200:4<t?this.ob.y+e*this.ob.scaleY*.5+(t-5)*i*this.ob.scaleY-n:this.ob.y-e*this.ob.scaleY*.5+(t-4)*i*this.ob.scaleY},xl:function(){return this.ob.y},QL:function(){var t=cc.winSize;(e=new BkSprite(res.IL)).scaleX=t.width/e.width,e.scaleY=t.height/e.height,e.x=t.width/2,e.y=t.height/2,this.addChild(e,0),this.ob=new BkSprite(res.yt);var e=1*t.width/this.ob.getWidth(),i=.65*t.height/this.ob.getHeight();this.background=this.ob,this.Kd=e>i?i:e,isWebPlatform()?(this.Kd=1,this.ob.y=t.height/2-WEB_BOARD_DELTA_Y):this.ob.y=isFBInstantGame()?t.height/2:t.height/2-BOARD_DELTA_Y*this.Kd,this.ob.setScale(this.Kd),console.log("chessTable - this.chessScale: ",this.Kd),this.ob.x=t.width/2,isWebPlatform()&&(console.log("chessTable - UI.getHalfRealWidth(this.chessTable): ",UI.Da(this.ob)),this.ob.x=105*GAME_SCALE+UI.Da(this.ob),console.log("chessTable - this.chessTable.x: ",this.ob.x),console.log("chessTable - WINDOW_WIDTH: ",WINDOW_WIDTH),console.log("chessTable - GAME_SCALE: ",GAME_SCALE),console.log("chessTable - GAME_SCALE_MIN: ",GAME_SCALE_MIN)),this.addChild(this.ob,0),this.AI=UI.qa(this.ob),this.Vd=getSpriteFromImage("#chieutuong.png"),this.Vd.setPosition(this.background.x,this.background.y),this.Vd.setVisible(!1),this.addChild(this.Vd,1e3)},bq:function(){this.Hg=[],this.U=[];for(var t=0;32>t;t++){var e=new BkChessPieceSprite(t);this.Hg.push(e),e.x=-100,e.y=-100,this.addChild(e,32);var i=new BkChessPiece(t);if(this.ya==K)i.he=i.Ja,i.vR=i.Fa;else{var n=this.data.wR[t];i.he=null!=n?n:i.Ja,n=this.data.lD[t],i.vR=null!=n?n:i.Fa}this.U.push(i),this.Ih()&&this.aM(e,i)}console.log("createChessPieces - this.chessPieces original: ",Gl(this.U)),console.log("createChessPieces - this.chessPieces object: ",this.U),console.log("createChessPieces - this.chessPieces dead: ",this.U.filter((function(t){return t.sa}))),console.log("createChessPieces - this.chessPieceSprites: ",this.Hg)},aM:function(t,e){t.Ja!=BkChessType.Qf.id&&(t.hc=Y,t.sc=Y,t.mg()),e.Ja!=BkChessType.Qf.id?(e.hc=Y,e.sc=Y):(e.hc=Hn,e.sc=Hn)},$j:function(){var t=new Date(this.data.Ho),e=String("00"+t.getDate()).slice(-2)+"/"+String("00"+(t.getMonth()+1)).slice(-2)+"/"+t.getFullYear().toString();return logMessage("strDate: "+e),logMessage("strDate: "+e),e+"\n"+(t=String("00"+t.getHours()).slice(-2)+":"+String("00"+t.getMinutes()).slice(-2))},nm:function(t,e){var i;i=e?t.Kg:t.Sh;for(var n=0;n<i.length;n++){var s=i[n],r=this.qu(s.Fa);r.hc=s.hc,r.sc=s.sc,r.Ja=s.he,r.mg()}}}),BkFenItem=ccui.Widget.extend({uj:"BkFenItemBg",parentNode:null,za:null,id:null,pn:-1,ctor:function(t,e,i){this._super(),this.color=cc.color(53,35,23),this.fontSize=27*GAME_SCALE_MIN,isWebPlatform()&&(this.fontSize=20*GAME_SCALE_MIN),this.setName("BkFenItem"),this.id=t.id,console.log("BkFenItem - couple: ",t),this.YI=t,this.Uh=this.movement=t.red,this.oh=t.py,this.parentNode=e,this.wt=i,this.gg()},N_:function(){return this.Uh.id},AK:function(){return this.oh?this.oh.id:-1},gg:function(){var t=this,e=new BkSprite("#history_fen_item_bg_web.png");e.name=this.uj;var i=this.parentNode.Xk.getContentSize().width/this.wt-this.parentNode.oc,n=UI.Ga(this.parentNode.Ci);isWebPlatform()&&(i=UI.qa(this.parentNode.Ci),n=(UI.Ga(this.parentNode.Xk)-(this.wt-1)*this.parentNode.oc)/this.wt),e.setPosition(UI.Da(e),UI.Ei(e)),this.setContentSize(cc.size(i,n)),this.na=e,this.addChild(e),i=30*GAME_SCALE_MIN,isWebPlatform()&&(i=17*GAME_SCALE_MIN),n=this.Fn(this.YI),console.log("fenItem - initBg - strRank: ",n),(i=new BkLabel(n,"",i)).x=this.Sz(e,i),i.y=e.y,i.setColor(cc.color(223,200,94)),this.Nd=i,this.addChild(i),this.qT(this.movement),(i=createBkButtonPlist("history_btn_fen_item_normal.png","history_btn_fen_item_normal.png","history_btn_fen_item_normal.png","history_btn_fen_item_hover.png",this.Uh.description)).x=UI.eb(e)+33+UI.Da(i),i.y=e.y,this.addChild(i),this.Qp=i,i.setTitleColor(cc.color(243,239,213)),i.addClickEventListener((function(){t.parentNode.wz(t.Uh)})),n="",this.oh&&(n=this.oh.description),(n=createBkButtonPlist("history_btn_fen_item_normal.png","history_btn_fen_item_normal.png","history_btn_fen_item_normal.png","history_btn_fen_item_hover.png",n)).x=UI.fb(i)+10+UI.Da(n),n.y=e.y,n.setTitleColor(cc.color(243,239,213)),this.oh||n.setOpacity(0),this.addChild(n),this.ph=n,n.addClickEventListener((function(){t.parentNode.wz(t.oh)}))},qT:function(t){this.Nd.setVisible(!!isWebPlatform()||0==t.id%2)},Pr:function(t,e){console.log("BkFenItem - setCurrentFenBg: "+t),console.log("BkFenItem - movementId: "+e),console.log("BkFenItem - this.getRedMovementId: "+this.Uh.id),t?(this.pn=e,e==this.Uh.id?(this.Qp.loadTextures("history_btn_fen_item_active.png","history_btn_fen_item_active.png","history_btn_fen_item_active.png","history_btn_fen_item_active.png",ccui.Widget.PLIST_TEXTURE),this.ph.loadTextures("history_btn_fen_item_normal.png","history_btn_fen_item_normal.png","history_btn_fen_item_normal.png","history_btn_fen_item_hover.png",ccui.Widget.PLIST_TEXTURE)):(this.Qp.loadTextures("history_btn_fen_item_normal.png","history_btn_fen_item_normal.png","history_btn_fen_item_normal.png","history_btn_fen_item_hover.png",ccui.Widget.PLIST_TEXTURE),this.ph.loadTextures("history_btn_fen_item_active.png","history_btn_fen_item_active.png","history_btn_fen_item_active.png","history_btn_fen_item_active.png",ccui.Widget.PLIST_TEXTURE))):(this.pn=-1,this.Qp.loadTextures("history_btn_fen_item_normal.png","history_btn_fen_item_normal.png","history_btn_fen_item_normal.png","history_btn_fen_item_hover.png",ccui.Widget.PLIST_TEXTURE),this.ph.loadTextures("history_btn_fen_item_normal.png","history_btn_fen_item_normal.png","history_btn_fen_item_normal.png","history_btn_fen_item_hover.png",ccui.Widget.PLIST_TEXTURE))},Sz:function(t,e){return isWebPlatform()?UI.eb(t)+.15*UI.qa(t)-1.5*UI.qa(e):UI.eb(t)+UI.Da(e)},Fn:function(t){return t.id+1+". "},iV:function(t){this.id=t.id,this.Nd.setString(this.Fn(t)),this.Nd.x=this.Sz(this.na,this.Nd),this.Uh=t.red,this.oh=t.py,this.Qp.setTitleText(this.Uh.description),this.oh?(t=this.oh,this.ph.setOpacity(255),this.ph.ef(!0),this.ph.setTitleText(t.description)):(t=this.Uh,this.ph.setOpacity(0),this.ph.ef(!1),this.ph.setTitleText("")),this.pn==t.id?this.Pr(!0,this.pn):this.Pr(!1,this.pn)}}),BkTakenListChessPieceInHistory=BkSprite.extend({Bc:null,Ve:null,wh:null,Vh:null,Mx:[3,4,5,1,2,6],ctor:function(t){var e="box_quanan.png";isWebPlatform()||(e="box_quan_an_trans.png"),this._super("#"+e),this.gv=t,this.reset()},reset:function(){this.Vh=[],this.Bc=[],this.Ve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.wh=[0,0,0,0,0,0,0,0,0,0,0,0,0,0]},XR:function(t){this.Bc=this.Bc.filter((function(e){return e.id!=t.id}))},ij:function(t,e){var i=t.Ja;this.gv&&(console.log("pushToChessList - chessSprite: ",t),console.log("pushToChessList - typeCountIndex: ",i)),e==Y&&(i+=6),this.Ve[i]++,this.gv&&(console.log("pushToChessList - BkTakenListChessPieceInHistory: ",this),console.log("pushToChessList - typeCountIndex: "+i+" - faceState: "+t.hc+" - deadFaceType: "+t.sc),console.log("pushToChessList - this.countListByIndex[typeCountIndex]: ",this.Ve[i]),console.log("pushToChessList - this.countListByIndex: ",this.Ve)),1==this.Ve[i]&&(this.gv&&console.log("pushToChessList- before push chessSprite"),this.Bc.push(t),this.wh[i]=this.Bc.length-1)},FJ:function(t){var e=t.Ja;t.jN&&(e+=6),this.Ve[e]--},hD:function(t){for(var e=0;e<this.Bc.length;e++){var i=this.Bc[e];ub(t,i.Go)&&(this.FJ(i),this.Vh.push(i),i.EJ(t))}},pu:function(){var t=this.Bc.sort((function(t,e){return t.Vg-e.Vg}));return console.log("getOrderChessPieceList - listOrder1: ",t),t=this.Bc.sort((function(t,e){return e.Vg-t.Vg})),console.log("getOrderChessPieceList - listOrder2: ",t),this.Bc.sort((function(t,e){return e.Vg-t.Vg}))}}),BkTakenChessInHistory=BkSprite.extend({cg:0,ctor:function(t,e,i,n,s){this.id=this.yK(t,e,n),this.Go=[],this.Ja=t,this.cg=i,this.jN=n,this.Vg=s,t=Pn(t),this._super("#"+(t?e?t.Gk:t.Fj:"history_chess_piece_00.png")),n&&((e=new BkSprite("#history_chess_piece_mask.png")).setOpacity(190),e.x=UI.Da(e),e.y=UI.Ei(e),this.addChild(e)),this.qc=new BkSprite("#sl_quanan.png"),this.qc.x=.7*23,this.qc.y=5.75,this.qc.setScale(28/65*23/this.qc.getContentSize().width),this.addChild(this.qc),this.Uc=new BkLabel("0","",9,!0),this.Uc.x=this.qc.x,this.Uc.y=this.qc.y,this.addChild(this.Uc)},yK:function(t,e,i){return(i?2:1)*(e=(e?2:1)*t)+e+t},Cu:function(t){this.cg++,this.ts(),this.Go.push(t)},EJ:function(t){this.cg--,this.ts(),this.VR(t)},VR:function(t){ub(t,this.Go)&&(this.Go=this.Go.filter((function(e){return e!==t})))},ts:function(){null!=this.Uc&&null!=this.Uc&&(1<this.cg?(this.qc.setVisible(!0),this.Uc.setVisible(!0),this.Uc.setString(this.cg)):(this.qc.setVisible(!1),this.Uc.setVisible(!1)))}}),WD_PLAYER_INFO_ITEM_X=10,WD_PLAYER_INFO_ITEM_Y=5,WD_PLAYER_INFO_AVATAR_MARGIN_CENTER=60,MAX_XEP_HANG=2e8,MAX_SIZE_AVATAR=5242880,KEY_CHANGE_AVATAR_TIME="changeAvatarTime",DELAY_CHANGE_AVATAR_IN_SECOND=5,BkPlayerInfo=BkBaseChessWindow.extend({xw:null,W:null,o0:null,kd:null,Pg:!1,Bt:cc.color(71,44,27),zh:!1,ctor:function(t){this.Pg=!0,t!=BkGlobal.P.userName&&(this.Pg=!1);var e=cc.size(610,620);isWebPlatform()||(e=845,this.Pg||(e=910),e=cc.size(629*GAME_SCALE,e*GAME_SCALE)),logMessage("sizeWD: "+e.width+" - "+e.height),this._super("",e,null),this.Ob("title_wd_thongtin.png"),this.xw=t,this.Cc(!0),isWebPlatform()&&this.Qo(!0),BkLogicManager.S().jb(this),this.BQ(t),this.bake(),n.rb(Dc)},kY:function(){},RG:function(){var e=this.vL();if(0<e)showToastMessage("Vui lòng thử lại sau "+Math.ceil(e)+" giây.");else{var i=this;this.zh||(this.zh=document.createElement("input"),this.zh.type="file",this.zh.style.display="none",document.body.appendChild(this.zh),console.log("addInputClickEventListerner"),this.zh.addEventListener("change",(function(){if(console.log("fileInput addEventListener"),s(),0<i.zh.files.length){var e=i.zh.files[0];if(e.size>MAX_SIZE_AVATAR)t(),showToastMessage("Vui lòng chọn file có kích thước nhỏ hơn 5MB!");else{var n=new FileReader;n.onload=function(n){if(n=new Uint8Array(n.target.result),""!=i.RK(n)){var s=new Image;document.createElement("div").appendChild(s),s.src=URL.createObjectURL(e),s.onload=function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=s.width,t.height=s.height,e.drawImage(s,0,0),new Cropper(s,{MX:1,X6:1,sZ:"move"}).getCroppedCanvas(),t=i.kS(s),i.ES(t)}}else t(),showToastMessage("Vui lòng chọn file ảnh JPG, JEGP, PNG.")},n.readAsArrayBuffer(e)}}else alert("Chưa chọn tệp nào.")}))),this.zh.click()}},vL:function(){var t=p(KEY_CHANGE_AVATAR_TIME,0),e=Date.now();return(t+1e3*DELAY_CHANGE_AVATAR_IN_SECOND-e)/1e3},gV:function(){var t=Date.now();u(KEY_CHANGE_AVATAR_TIME,t)},kS:function(t){var e=t.width,i=t.height,n=Math.min(e,i),s=(e=(e-n)/2,i=(i-n)/2,document.createElement("canvas"));return s.width=100,s.height=100,s.getContext("2d").drawImage(t,e,i,n,n,0,0,100,100),s.toDataURL("image/jpeg",.8)},ES:function(e){console.log("sendDataToServer - base64Data: ",e);var i=Ri+"/uploadfile?playerName="+BkGlobal.P.userName;console.log("url: ",i),UtilNotBuild.processAvatar(this,i,e),t()},processAvatarSuccess:function(t){console.log("processAvatarSuccess"),BkGlobal.P.cf(t),getCurrentScene().kf(BkGlobal.P),this.PS(t),this.removeFromParent(),this.gV()},processAvatarError:function(t){console.log("error: ",t),showToastMessage("Có lỗi xảy ra khi gửi dữ liệu. Vui lòng thử lại sau!")},PS:function(t){var e=new BkPacket;e.WF(t),BkConnectionManager.send(e)},RK:function(t){function e(t,e){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}return e([255,216,255],t)?"jpeg":e([82,73,70,70],t)?"webp":e([71,73,70,56],t)?"gif":e([137,80,78,71,13,10,26,10],t)?"png":e([66,77],t)?"bmp":""},dK:function(){var t=this.W.Io[0],e=this.W.Io[1];console.log("drawPlayerData - this.playerData.getAvatarId(): ",this.W.Hb);var i=new zb(this.W.Hb,Math.max(t.Tg,e.Tg));if((this.T(i),i.setScale(GAME_SCALE),i.x=this.Q.width/2,i.y=this.Q.height-1.2*i.height,isWebPlatform()||null==this.Za||(i.y=this.Za.y-this.Za.getBoundingBox().height/2-.5*i.getBoundingBox().height),this.Pg)&&((h=getCurrentScene())&&h instanceof hb)){var n=this,s=new BkButton("btn_upd_avatar.png","btn_upd_avatar_press.png","btn_upd_avatar.png","btn_upd_avatar.png",ccui.Widget.PLIST_TEXTURE);s.setScale(.6*GAME_SCALE),s.setOpacity(200),s.y=i.y+.3*i.getBoundingBox().height,this.T(s),s.addClickEventListener((function(){n.RG()}))}var r=h=null,o=null,a=null,c=null,h=cc.spriteFrameCache.getSpriteFrame("name_frame.png"),l=(r=cc.rect(50,20,166,15),h=new cc.Scale9Sprite(h,r),this.W.userName),u=30,d=38,_=32,g=35,f=38,p=GAME_SCALE;if(isWebPlatform()?(u=18,d=30,g=_=25,f=28,p=.8,console.log("playerAvatar: ",i),i.x=this.Q.width/4.5,s&&(console.log("btnUpdateAvar: ",s),s.x=i.x+.35*i.getBoundingBox().width),h.setScale(p),h.x=this.Q.width/2.5+h.getBoundingBox().width/2,h.y=i.y+.1*i.getBoundingBox().height):(h.setScale(p),h.x=this.Q.width/2,h.y=i.y-1.3*i.getBoundingBox().height),this.T(h),(r=new BkSprite("#info_popUp.png")).setScale(GAME_SCALE),r.x=h.x,r.y=h.y-h.getBoundingBox().height-r.getBoundingBox().height/2,this.T(r),(a=new BkSprite("#CT_iconInfoWD.png")).setScale(GAME_SCALE),a.x=r.x-r.getBoundingBox().width/2+.3*a.getBoundingBox().width,a.y=r.y,this.T(a),(o=new BkSprite("#info_popUp.png")).setScale(GAME_SCALE),o.x=h.x,o.y=r.y-r.getBoundingBox().height-.1*h.getBoundingBox().height,this.T(o),(c=new BkSprite("#CU_iconInfoWD.png")).setScale(GAME_SCALE),c.x=o.x-o.getBoundingBox().width/2+.3*c.getBoundingBox().width,c.y=o.y,this.T(c),(s=new BkLabel(l,"",u+2)).y=h.y,s.x=h.x,s.setTextColor(Cj),s.Yb(p),this.T(s),null!=h&&(s.y=h.y,s.x=h.x,(l=s.getBoundingBox().width/p)>(u=h.getBoundingBox().width/p))){var m=l+.15*u;logMessage("scale wid BG "+l+" maxwidLBName: "+u+" mybgWid: "+m),h.width=m,isWebPlatform()&&(h.x=this.Q.width/2.8+m/2-20*p,s.x=h.x)}this.W.userName==BkGlobal.P.userName&&BkGlobal.Sa!=T&&BkGlobal.no&&((p=createBkButtonPlist("change_name.png","change_name.png","change_name.png","change_name.png")).x=s.x+s.getBoundingBox().width/2+p.getBoundingBox().width/2+22*GAME_SCALE+5,p.y=s.y,l=GAME_SCALE,isWebPlatform()&&(l=.5),p.setScale(l),this.T(p),p.addClickEventListener((function(){var t=new BkRenameWindow;t.Ab(S),t.Oa()})),null!=h&&(p.x=h.x+h.getBoundingBox().width/2-.3*p.getBoundingBox().width,p.y=h.y)),p=20,u=l=v,isWebPlatform()||(p=35,u=l=v),p=[new BkLabelItem("Người theo dõi: ",p,l,1,!1),new BkLabelItem(this.W.tq,p,u,1,!1)],this.sd=new BkLabelSprite(p),this.sd.x=h.x-UI.Da(h),this.sd.y=s.y-s.getContentSize().height/2-44+.5,this.T(this.sd),isWebPlatform()||null==o||(this.sd.setScale(GAME_SCALE),this.sd.y=o.y-o.getBoundingBox().height/2-this.sd.getBoundingBox().height,this.sd.x=o.x-this.sd.getBoundingBox().width/2),s=cc.color(174,18,29),(p=new BkLabel("Elo: "+t.Tg,"",d,!0)).setScale(GAME_SCALE),d=.85*p.getBoundingBox().height,isFBInstantGame()&&(d=.85*p.getContentSize().height*GAME_SCALE),1e4<=(p=t.Ta)&&(p="xxx"),p=[new BkLabelItem("Elo: ",g,R,1,!0),new BkLabelItem(t.Tg,f,R,1,!0),new BkLabelItem("  Hạng: ",g,R,1,!0),new BkLabelItem(p,f,R,1,!0)],lbELCT=new BkLabelSprite(p),lbELCT.setScale(GAME_SCALE),lbELCT.x=a.x+a.getBoundingBox().width/2+10*GAME_SCALE,lbELCT.y=a.y+d-lbELCT.getBoundingBox().height/2,this.T(lbELCT),p=[new BkLabelItem("Thắng: ",_,R,1,!0),new BkLabelItem(t.Cm,_,s,1,!0),new BkLabelItem("   Thua: ",_,R,1,!0),new BkLabelItem(t.Vl,_,s,1,!0)],lbTTHCT=new BkLabelSprite(p),lbTTHCT.setScale(GAME_SCALE),lbTTHCT.x=a.x+a.getBoundingBox().width/2+10*GAME_SCALE,lbTTHCT.y=a.y-d,this.T(lbTTHCT),t=d,1e4<=(p=e.Ta)&&(p="xxx"),p=[new BkLabelItem("Elo: ",g,R,1,!0),new BkLabelItem(e.Tg,f,R,1,!0),new BkLabelItem("  Hạng: ",g,R,1,!0),new BkLabelItem(p,f,R,1,!0)],lbELCU=new BkLabelSprite(p),lbELCU.setScale(GAME_SCALE),lbELCU.x=c.x+c.getBoundingBox().width/2+10*GAME_SCALE,lbELCU.y=c.y+d-lbELCU.getBoundingBox().height/2,this.T(lbELCU),p=[new BkLabelItem("Thắng: ",_,R,1,!0),new BkLabelItem(e.Cm,_,s,1,!0),new BkLabelItem("   Thua: ",_,R,1,!0),new BkLabelItem(e.Vl,_,s,1,!0)],lbTTHCU=new BkLabelSprite(p),lbTTHCU.setScale(GAME_SCALE),lbTTHCU.x=c.x+c.getBoundingBox().width/2+10*GAME_SCALE,lbTTHCU.y=c.y-t,this.T(lbTTHCU);var S=this;t=.5*this.ab().width;this.Pg&&this.kB()&&(t=.75*this.ab().width),this.W.userName!=BkGlobal.P.userName&&(this.kd=this.W.Hl?new BkButton("btnHuyTheoDoi.png","btnHuyTheoDoiPress.png","btnHuyTheoDoi.png","btnHuyTheoDoi.png",ccui.Widget.PLIST_TEXTURE):new BkButton("btnTheodoi.png","btnTheodoiPress.png","btnTheodoi.png","btnTheodoi.png",ccui.Widget.PLIST_TEXTURE),e=.5*this.Q.width,t=.2*this.Q.width,this.kd.setScale(GAME_SCALE),this.kd.x=e-t,this.kd.y=this.kd.getContentSize().height/2,this.T(this.kd),this.kd.addClickEventListener((function(){S.W.Hl?S.XJ():S.RJ(),BkLogicManager.S().jb(S)})),t=e+t),(e=new BkButton("btnDong.png","btnDongPress.png","btnDong.png","btnDong.png",ccui.Widget.PLIST_TEXTURE)).setScale(GAME_SCALE),e.x=t,e.y=e.getContentSize().height/2,this.T(e),e.addClickEventListener((function(){S.removeSelf()})),isWebPlatform()?(r.x=this.Q.width/2,r.y=i.y-i.getBoundingBox().height/.95-r.getBoundingBox().height/2,a.x=r.x-r.getBoundingBox().width/2+.3*a.getBoundingBox().width,a.y=r.y,lbELCT.x=a.x+a.getBoundingBox().width/2+10*GAME_SCALE,lbELCT.y=a.y+5,lbTTHCT.x=a.x+a.getBoundingBox().width/2+10*GAME_SCALE,lbTTHCT.y=a.y-30,o.x=r.x,o.y=r.y-r.getBoundingBox().height-.3*h.getBoundingBox().height,c.x=o.x-o.getBoundingBox().width/2+.3*c.getBoundingBox().width,c.y=o.y,lbELCU.x=c.x+c.getBoundingBox().width/2+10*GAME_SCALE,lbELCU.y=c.y+5,lbTTHCU.y=c.y-30,lbTTHCU.x=c.x+c.getBoundingBox().width/2+10*GAME_SCALE,e.y+=30,this.kd&&(this.kd.y=e.y)):(i=1.2,this.Pg||(i=2),e.y=e.getBoundingBox().height*i,null!=this.kd&&(this.kd.y=e.y)),this.Pg&&this.kB()&&((i=new BkButton("btnLienKetTk.png","btnLienKetTkPress.png","btnLienKetTk.png","btnLienKetTk.png",ccui.Widget.PLIST_TEXTURE)).setScale(GAME_SCALE),i.x=.25*this.ab().width,i.y=e.y,this.T(i),S=this,i.addClickEventListener((function(){S.lP()}))),this.kd&&!isWebPlatform()&&(logMessage("add notify promote friend"),(i=new BkLabel("Chú ý: Bạn có thể xem hoặc chơi cùng người bạn theo dõi trong phần bạn bè.","",18,!1,!0)).setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),i.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),i.setTextColor(v),i.boundingWidth=.95*this.Q.width/GAME_SCALE,i.x=.5*this.Q.width,isWebPlatform()||i.setScale(GAME_SCALE),i.y=this.kd.y-.5*this.kd.getBoundingBox().height-.5*i.getBoundingBox().height,this.T(i))},kB:function(){var t=getCurrentScene();return t&&t instanceof hb},lP:function(){var t=new BkLienKetTkWindow(this);t.Ab(this),t.Oa()},uV:function(t){var e=0,i=0;null!=this.sd&&(e=this.sd.x,i=this.sd.y,this.sd.removeFromParent());var n=20,s=Cj,r=Dj;isWebPlatform()||(n=35,r=s=v),t=this.W.tq+t,this.W.ND(t),n=[new BkLabelItem("Người theo dõi: ",n,s,1,!1),new BkLabelItem(t,n,r,1,!1)],this.sd=new BkLabelSprite(n),this.sd.x=e,this.sd.y=i,this.T(this.sd),isWebPlatform()||this.sd.setScale(GAME_SCALE)},ud:function(e,i){switch(BkLogicManager.S().jb(null),t(),i){case th:showToastMessage("Bạn đã bắt đầu theo dõi: "+this.xw,cc.director.getWinSize().width/2,cc.director.getWinSize().height/2),this.removeSelf();break;case ih:if(showToastMessage("Đã xóa "+e+" khỏi danh sách theo dõi.",cc.director.getWinSize().width/2,cc.director.getWinSize().height/2,null,200),this.W.om(!1),null!=this.kd&&(isWebPlatform()?this.kd.setTitleText("Theo dõi"):this.kd.loadTextures("btnTheodoi.png","btnTheodoiPress.png","btnTheodoi.png","btnTheodoi.png",ccui.Widget.PLIST_TEXTURE)),this.Tf){var n=this.Tf;n instanceof BkFriendsWindow&&(logMessage("xoa ban tu friend wd -> refresh list"),n.Ul())}this.uV(-1);break;case Wg:this.W=e,this.W.yd(this.xw),this.dK()}},BQ:function(t){logMessage("processOverViewPlayer "+t),s();var e=new BkPacket;e.mp(t,Vg),BkConnectionManager.send(e),this.W=new BkUserData},RJ:function(){var t=new BkPacket;t.wx(this.W.userName),BkConnectionManager.send(t)},XJ:function(){var t=new BkPacket;t.Bx(this.W.userName),BkConnectionManager.send(t)},onExit:function(){this._super(),BkLogicManager.S().jb(null)}}),BkInviteOtherPlayer=BkWindow.extend({Qa:null,pf:["Phòng chờ","Bạn bè"],Dd:null,zg:null,Ip:null,Yx:!1,ctor:function(t){this._super("",cc.size(750*GAME_SCALE,900*GAME_SCALE),null),this.Ip=t,this.Ju()},q5:function(){this.Aj=cc.size(this.ab().width-2*WD_BODY_MARGIN_LR+4,this.ab().height);var t=new BkSprite("#darkbg_popupmoiban.png");t.scaleX=this.Aj.width/t.width,t.scaleY=this.ab().height/t.height,t.x=this.Q.width/2,t.y=this.Q.height/2,this.T(t)},s0:function(){},Ju:function(){this.Qo(!0)},Tu:function(t){this.Ip.Tu(t)},lj:function(t,e){1==e?this.Yx&&this.Ip.aD():this.Ip.cQ()},Te:function(){null!=this.Qa&&(this.Qa.removeFromParent(),this.pi.removeFromParent(),this.Kc.removeFromParent())},Q6:function(){1==this.nc?this.Vj(this.Dd,this.nc):2==this.nc&&this.Vj(this.FG,this.nc)},Vj:function(e,i){t(),this.Yx=!0,this.Te(),this.Qa=new BkSprite,this.zg=[],this.T(this.Qa,1);var n=this.ab().height+this.Ac.height,s=this.ab().width-2*WD_BODY_MARGIN_LR;if(null!=e&&0<e.length){var r=new BkSprite(res.zp);this.Qa.addChild(r),(c=new BkLabel("Chọn tất cả","Arial",14)).setTextColor(oj.gX),c.x=c.getContentSize().width/2,c.y=c.getContentSize().height/2,r.addChild(c);var o=new BkCheckBox;o.x=c.x+c.getContentSize().width/2+o.width,o.y=c.y,r.addChild(o),r.setContentSize(cc.size(o.width+c.getContentSize().width,o.height)),r.x=s-r.getContentSize().width/2-40;var a=this;o.setSelected(!0),r.ad(),r.Ua((function(){o.setSelected(!o.isSelected()),a.By(a,o.isSelected())})),o.addEventListener((function(){a.By(a,o.isSelected())}));for(var c=function(){for(var t=!0,e=0;e<a.zg.length;e++)if(!a.zg[e].isSelected()){t=!1;break}o.setSelected(t)},h=0;h<e.length&&!(5<=h);h++){var l=new BkIngameInviteFriendItem(e[h],n,this,!1,s);l.mT(c),l.dF(!0),n=l.y,this.Qa.addChild(l),this.zg.push(l)}this.Qa.x=40,this.Qa.y=15,r.y=n-r.height/2-15,this.pi=createBkButtonPlist("btn_moi_normal.png","btn_moi_pressed.png","btn_moi_pressed.png","btn_moi_hover.png"),this.pi.setScale(GAME_SCALE),this.pi.addTouchEventListener((function(t,e){if(e==ccui.Widget.TOUCH_ENDED){var i=0;if(null!=a.zg){for(var n=0;n<a.zg.length;n++){var s=a.zg[n];s.isSelected()&&(i++,a.Tu(s.od()))}0==i?showToastMessage("Bạn phải chọn người chơi để mời."):(showToastMessage("Đã gửi lời mời thành công.",480,getYposforToast(),null,190),a.removeSelf())}}}),this),this.pi.x=this.ab().width/4*3,this.pi.y=n-50,this.pi.y=1.25*this.hi.y,this.T(this.pi),this.Kc=createBkButtonPlist("btn_dong_normal.png","btn_dong_pressed.png","btn_dong_pressed.png","btn_dong_hover.png"),this.Kc.setScale(GAME_SCALE),this.Kc.addTouchEventListener((function(t,e){e==ccui.Widget.TOUCH_ENDED&&a.removeSelf()}),this),this.Kc.x=this.ab().width/4,this.Kc.y=this.pi.y,this.T(this.Kc)}else n=new BkLabel("","Arial",16),1==i?n.setString("Không tìm thấy người chơi."):2==i&&n.setString("Bạn bè của bạn đang bận."),n.setPosition(0,0),this.Qa.addChild(n),this.Qa.x=this.ab().width/2,this.Qa.y=this.ab().height/2},By:function(t,e){if(null!=t.zg)for(var i=0;i<t.zg.length;i++)t.zg[i].dF(e)}}),BkSettingWindow=BkWindow.extend({W:null,im:null,gm:null,Be:null,bh:null,bh:null,ctor:function(){var t=cc.size(460,341);Il()&&(t=cc.size(350,260)),this._super("Cài Đặt",t,null),this.NM(),Jl()},NM:function(){this.Cw();var t=this,e=cc.winSize;(o=new BkLabel("Âm thanh","Tahoma",15)).setTextColor(cc.color(255,255,255)),o.x=o.getContentSize().width/2+2*WD_BODY_MARGIN_LR,o.y=this.ab().height-o.getContentSize().height/2-2*WD_BODY_MARGIN_TB,this.T(o);var i=new BkRadioButtonData(0,1,""),n=new BkRadioButton(i.description);n.setData(i),n.x=o.x+70,n.y=o.y-12,this.T(n);var s=new BkSprite("#icon_sound_on.png");s.x=n.x+35,s.y=n.y+12,this.T(s);var r=new BkRadioButtonData(1,0,"");(i=new BkRadioButton(r.description)).setData(r),i.x=s.x+50,i.y=n.y,this.T(i),(r=new BkSprite("#icon_sound_off.png")).x=i.x+35,r.y=s.y,this.T(r),this.im=new BkRadioButtonGroup,n.Hf(this.im),i.Hf(this.im),1==BkGlobal.Pf.es?(this.im.ff(n),BkLogicManager.oa().oo=!0):(this.im.ff(i),BkLogicManager.oa().oo=!1),(s=new BkLabel("Hiển thị chat","Tahoma",15)).setTextColor(cc.color(255,255,255)),s.x=o.x+7,s.y=o.y-35,this.T(s);var o=new BkRadioButtonData(2,1,"Bật"),a=new BkRadioButton(o.description);if(a.setData(o),a.x=n.x,a.y=s.y-12,this.T(a),o=new BkRadioButtonData(3,0,"Tắt"),(r=new BkRadioButton(o.description)).setData(o),r.x=i.x,r.y=a.y,this.T(r),this.gm=new BkRadioButtonGroup,a.Hf(this.gm),r.Hf(this.gm),1==BkGlobal.Pf.co?this.gm.ff(a):this.gm.ff(r),BkGlobal.ja!=K&&BkGlobal.ja!=L){if(r=getMaxPlayer(BkGlobal.ja),0==BkLogicManager.oa().cj&&(BkLogicManager.oa().cj=r),0<r){var c=new BkLabel("Số người chơi","Tahoma",15);c.setTextColor(cc.color(255,255,255)),c.x=s.x,c.y=s.y-35,this.T(c);var h=new BkRadioButtonData(4,2,"2");(o=new BkRadioButton(h.description)).setData(h),o.x=a.x,o.y=c.y-8,this.T(o),h=new BkRadioButtonData(5,3,"3"),(a=new BkRadioButton(h.description)).setData(h),a.x=o.x+85,a.y=o.y,this.T(a);var l=new BkRadioButtonData(6,4,"4");if((h=new BkRadioButton(l.description)).setData(l),h.x=a.x+85,h.y=o.y,this.T(h),this.Be=new BkRadioButtonGroup,o.Hf(this.Be),a.Hf(this.Be),h.Hf(this.Be),4<r){a.x=o.x+60,h.x=a.x+60;var u=new BkRadioButtonData(7,5,"5"),d=new BkRadioButton(u.description);d.setData(u),d.x=h.x+60,d.y=o.y,this.T(d),r=new BkRadioButtonData(8,6,"6"),(u=new BkRadioButton(r.description)).setData(r),u.x=d.x+60,u.y=o.y,this.T(u),d.Hf(this.Be),u.Hf(this.Be)}switch(BkLogicManager.oa().cj){case 2:this.Be.ff(o);break;case 3:this.Be.ff(a);break;case 4:default:this.Be.ff(h);break;case 5:this.Be.ff(d);break;case 6:this.Be.ff(u)}}(d=new BkLabel("Mật khẩu bàn","Tahoma",15)).setTextColor(cc.color(255,255,255)),d.x=s.x,d.y=c.y-35,this.T(d),u=new BkRadioButtonData(9,1,"Có"),(c=new BkRadioButton(u.description)).setData(u),c.x=n.x,c.y=d.y-8,this.T(c),this.zd=createEditBox(cc.size(180,35),"edit_text.png"),this.zd.setFontColor(zj),this.zd.setPlaceholderFontColor(Aj),this.zd.setMaxLength(20),this.zd.x=c.x+150,this.zd.y=c.y+8+.5,this.T(this.zd),u=new BkRadioButtonData(10,0,"Không"),(o=new BkRadioButton(u.description)).setData(u),o.x=c.x,o.y=d.y-43,this.T(o),this.bh=new BkRadioButtonGroup,c.Hf(this.bh),o.Hf(this.bh),""==BkLogicManager.oa().gj?(this.zd.setPlaceHolder("Nhập mật khẩu..."),this.zd.setPlaceholderFontColor(Aj),this.bh.ff(o),this.zd.Lk(!0)):(this.zd.setString(BkLogicManager.oa().gj),this.bh.ff(c),this.zd.Lk(!1)),this.bh.O4((function(){1==t.bh.En().getValue()?t.zd.Lk(!1):t.zd.Lk(!0)})),!BkLogicManager.oa().Ub()&&BkLogicManager.oa().Ri()||(this.Be.fT(!1),(BkLogicManager.oa().Ub()||!BkLogicManager.oa().Ri())&&(this.bh.fT(!1),this.zd.Lk(!0)))}BkGlobal.ja==L&&BkLogicManager.oa().Ri()&&BkLogicManager.oa().Ib!=GAME_STATE_PLAYING&&((c=new BkLabel("Lật quân ăn","Tahoma",15)).setTextColor(cc.color(255,255,255)),c.x=c.getContentSize().width/2+2*WD_BODY_MARGIN_LR,c.y=s.y-35,this.T(c),d=new BkRadioButtonData(0,1,"Có"),(s=new BkRadioButton(d.description)).setData(d),s.x=n.x,s.y=c.y-12,this.T(s),n=new BkRadioButtonData(1,0,"Không"),(c=new BkRadioButton(n.description)).setData(n),c.x=i.x,c.y=s.y,this.T(c),this.hm=new BkRadioButtonGroup,s.Hf(this.hm),c.Hf(this.hm),1==F(D.rU)?this.hm.ff(s):this.hm.ff(c)),(i=new cc.DrawNode).drawRect(cc.p(0,0),cc.p(this.Aj.width,50),wj,0,vj),i.x=WD_BODY_MARGIN_LR,i.y=0,(i=createBkButtonPlist("btn_no_text.png","btn_no_text_press.png","btn_no_text.png","btn_no_text_press.png","Thiết lập",e.width/2,e.height/2)).x=this.ab().width/2-50,i.y=WD_BODY_MARGIN_TB+5,this.T(i),i.addClickEventListener((function(){var e=t.gm.En(),i=t.im.En();if(null!=e?BkGlobal.Pf.co=e.getValue():logMessage("chatRadioSelected == null -> check loi"),null!=i?BkGlobal.Pf.es=i.getValue():logMessage("soundRadioSelected == null -> check loi"),BkUserClientSettings.QV(),getCurrentScene().ZV(BkGlobal.Pf.co),1==BkGlobal.Pf.es?BkLogicManager.oa().oo=!0:BkLogicManager.oa().oo=!1,BkGlobal.ja!=K&&BkGlobal.ja!=L){if(!((e=t.Be.En().getValue())>=BkLogicManager.oa().ga.length))return void showToastMessage("Bạn không thể cài đặt số người chơi tối đa ít hơn số người chơi hiện tại ở trong bàn.");if(BkLogicManager.oa().cj=e,t.zd.getString(),1==t.bh.En().getValue()){if(""==t.zd.getString())return void showToastMessage("Mật khẩu bàn không hợp lệ",WINDOW_WIDTH/2,WINDOW_HEIGHT/3+5,null,200);BkLogicManager.oa().gj=t.zd.getString()}else BkLogicManager.oa().gj="";i=BkLogicManager.oa().Ee,BkLogicManager.oa().BT(i,e,BkLogicManager.oa().gj)}BkGlobal.ja==L&&BkLogicManager.oa().Ri()&&(i=BkLogicManager.oa().Ee,t.hm&&BkLogicManager.oa().CP(i,t.hm.En().getValue())),t.removeSelf()})),(e=createBkButtonPlist("btn_no_text.png","btn_no_text_press.png","btn_no_text.png","btn_no_text_press.png","Bỏ qua",e.width/2,e.height/2)).x=i.x+i.width/2+50,e.y=i.y,this.T(e),e.addClickEventListener((function(){t.removeSelf()}))}});var Qn=0,Z=0,Rn=6,Sn=2,Tn=0,Un=0;BkChatEmoLayer=cc.Layer.extend({background:null,fd:null,rN:!1,RI:null,dk:null,spriteFrameCache:cc.spriteFrameCache,ctor:function(){this._super(),Z=.2*cc.winSize.height,Tn=.07*cc.winSize.height,this.oz();var t=cc.winSize.width,e=cc.winSize.height;Un=0,isWebPlatform()?(Qn=200,Rn=3,Sn=4,Z=.5*WINDOW_HEIGHT,Tn=Z/Sn/1.5,Un=60):(Qn=cc.winSize.width,Rn=6,Sn=2,cc.sys.os==cc.sys.OS_IOS&&(Sn=4)),this.DA(),this.Du(t,e),this.IA(),this.dk=this.Jz(),this.qP()},IA:function(){this.spriteFrameCache.addSpriteFrames(res.an,res.Qn);for(var t=Sn*Rn,e=1;e<=t;e++){var i="expression"+e+".png",n=!1;e==Rn&&(isWebPlatform()||cc.sys.os==cc.sys.OS_IOS||(n=!0)),i=new BkEmoItem(this.spriteFrameCache.getSpriteFrame(i),e,this,n),this.addChild(i)}},Du:function(t,e){var i="box_quanan.png";isWebPlatform()||(i="khungchat.png"),this.background=new BkSprite("#"+i),this.background.setScaleX(isWebPlatform()?1:t/this.background.getContentSize().width),this.background.setScaleY(Z/this.background.getContentSize().height),this.background.y=Z/2-e/2+Un,this.addChild(this.background)},DA:function(){var t=cc.winSize.width,e=cc.winSize.height;this.fd=new BkSprite(res.Vr),this.fd.setScaleX(t/this.fd.getContentSize().width),this.fd.setScaleY(e/this.fd.getContentSize().height),this.fd.opacity=0,this.fd.setVisible(!0),this.fd.x=Qn/2-cc.winSize.width/2,this.fd.y=0,this.addChild(this.fd),this.NG()},SE:function(t){this.fd&&(this.fd.y=1.8*t)},oz:function(){},$0:function(t){var e=cc.rect(0,Z,Qn,.8*cc.winSize.height-Z);return!!cc.rectContainsPoint(e,t)},NG:function(){var t=this;t.rN=!1,this.fd.Ua((function(){t.Jo()}))},MR:function(){cc.eventManager.removeListener(this.RI)},Jo:function(){this.MR(),this.removeFromParent(),this.mS(),this.Jz().EC()},Jz:function(){var t=getCurrentScene();return t instanceof nb?t.ka():null},qP:function(){null!=this.dk&&cc.eventManager.pauseTarget(this.dk,!0)},mS:function(){null!=this.dk&&cc.eventManager.resumeTarget(this.dk,!0)},hU:function(){logMessage("showMoreEmoItem"),this.Jo();var t=Ud-1,e=new BkFullEmoLayer;if(cc.sys.os==cc.sys.OS_IOS){var i=.43*cc.winSize.height;e.SE(i),e.y=i}getCurrentScene().addChild(e,t)}}),BkFullEmoLayer=BkChatEmoLayer.extend({ctor:function(){this._super()},Du:function(t){var e=cc.spriteFrameCache.getSpriteFrame("khungchat.png"),i=cc.rect(250,77,250,78);this.background=new cc.Scale9Sprite(e,i),this.background.width=t,this.background.height=Z,this.background.x=t/2,this.background.y=Z/2,this.addChild(this.background),this.fd.x=cc.winSize.width/2,this.fd.y=cc.winSize.height/2},DA:function(){Z=.38*cc.winSize.height,Sn=4,this._super()},IA:function(){this.spriteFrameCache.addSpriteFrames(res.an,res.Qn);for(var t=Sn*Rn,e=1;e<=t;e++){var i=new BkEmoItem(this.spriteFrameCache.getSpriteFrame("expression"+e+".png"),e,this,!1);this.addChild(i)}}}),BkEmoItem=BkSprite.extend({parentNode:null,zl:null,Wc:null,Mp:!1,fv:!1,ctor:function(t,e,i,n){this._super(),this.zl=e,this.parentNode=i,this.fv=n;var s=this;this.Wc=new BkSprite(t),this.fv&&(this.Wc=new BkSprite("#more_item_chat.png")),this.Wc.setScale(Tn/this.Wc.getContentSize().height),this.addChild(this.Wc),this.Wc.Ua((function(){s.Gv(e)})),this.Wd(e)},Wd:function(t){var e=Math.floor((t-1)/Rn);t=(t-1)%Rn;var i=this.Wc.getBoundingBox().width,n=Tn,s=(Qn-Rn*i)/(Rn+1),r=(Z-Sn*n)/(Sn+1),o=.5*-Qn+.5*i+s,a=this.parentNode.background.y-Z/2+.5*n+r;isWebPlatform()||(r=.05*Z,cc.sys.os==cc.sys.OS_IOS&&(r=.02*Z),o=.5*i+s,a=this.parentNode.background.y-(Z/2-.5*n-r)),this.Wc.x=o+t*(i+s),this.Wc.y=a+e*(n+r)},Gv:function(t){this.fv?this.parentNode.hU():this.ol(Dl(t-1))},ol:function(t){BkLogicManager.oa().cr=J();var e=new BkPacket;e.aq(t),BkConnectionManager.send(e),this.parentNode.Jo()}}),BkQuickTextItem=BkSprite.extend({Eq:null,parentNode:null,ctor:function(t,e){this._super(),this.Eq=t,this.parentNode=e;var i=new cc.SpriteBatchNode("Chess_toast.png");this.background=new cc.Scale9Sprite,this.background.updateWithBatchNode(i,cc.rect(0,0,37,38),!1,cc.rect(12,12,12,12)),this.addChild(this.background),this.Ea=new BkLabel(this.hA(),"",30),this.Ea.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),this.Ea.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);var n=GAME_SCALE;this.Ea.setScale(GAME_SCALE),this.Ea.setTextColor(cc.color.WHITE);var s=.004*cc.winSize.height;i=.45*cc.winSize.width;this.Ea.boundingWidth=i/n,this.addChild(this.Ea),(n=this.Ea.getBoundingBox().height+2*s)<(s=.045*cc.winSize.height)&&(n=s),this.background.width=i,this.background.height=n;var r=this;(s=new BkSprite("Chess_toast.png")).width=i,s.height=n,s.setVisible(!1),this.addChild(s),s.Ua((function(){r.parentNode.yD(r.hA())})),this.Wd()},hA:function(){switch(this.Eq){case 1:return"Thua đi bác.";case 2:return"Nước đó rất cao.";case 3:return"Nhanh đi lâu vậy.";case 4:return"Làm ván nữa nhé.";case 5:return"Chơi hay nghỉ đây?";case 6:return"Xin được chỉ giáo.";case 7:return"Mở quân đỏ thế.";case 8:return"Các hạ quá khen."}return"Xin chào!"},Wd:function(){var t=.73*cc.winSize.width,e=.27*cc.winSize.width,i=this.parentNode.Nf.y-.5*this.parentNode.Nf.getBoundingBox().height,n=1.1*this.background.height,s=Math.floor((this.Eq+1)/2);this.x=1==this.Eq%2?t:e,this.y=i-s*n}}),BkChatLayerMobile=BkChatEmoLayer.extend({Nf:null,ctor:function(){logMessage("BkChatLayerMobile"),this._super(),this.ZL(),this.CM()},CM:function(){for(var t=1;9>t;t++){var e=new BkQuickTextItem(t,this);this.addChild(e)}},oz:function(){Z=.5*cc.winSize.height,cc.sys.os==cc.sys.OS_IOS&&(Z=.65*cc.winSize.height)},Du:function(t){var e=cc.spriteFrameCache.getSpriteFrame("khungchat.png"),i=cc.rect(250,77,250,78);this.background=new cc.Scale9Sprite(e,i),this.background.width=t,this.background.height=Z,this.background.x=t/2,this.background.y=Z/2,this.addChild(this.background),this.fd.x=cc.winSize.width/2,this.fd.y=cc.winSize.height/2},ZL:function(){var t=cc.size(Qn,Z),e=.7*t.width,i=.1*t.height;cc.sys.os==cc.sys.OS_IOS&&(i=.08*t.height),t=res.Vt,this.Nf=createEditBox(cc.size(e,i),t),this.Nf.x=.55*e,this.Nf.y=Z-i,isFBInstantGame()&&(this.Nf.setFontSize(.4*i),this.Nf.stayOnTop(!0),cc.sys.os!=cc.sys.OS_IOS&&(i=new An(this,400),this.Nf.setDelegate(i))),this.addChild(this.Nf),(i=new BkButton(x,la,x,x,ccui.Widget.PLIST_TEXTURE)).setScale(.8*GAME_SCALE),i.x=this.Nf.x+.5*e+i.getContentSize().width*GAME_SCALE*.5,i.y=this.Nf.y,logMessage("btnAction.x: "+i.x+" btnAction.y: "+i.y),i.setTitleText("Gửi"),i.setTitleFontName(ma()),i.setTitleFontSize(31),i.setTitleColor(cc.color(71,44,27)),i.getTitleRenderer().y+=.1*i.getBoundingBox().height,this.addChild(i);var n=this;i.addClickEventListener((function(){n.yD(n.Nf.getString())}))},yD:function(t){t=t.replace(/\n/g,""),logMessage("sendChatMessage: "+t),BkLogicManager.oa().cr=J();var e=new BkPacket;e.aq(t),BkConnectionManager.send(e),this.Jo()}}),BkChatContentLayer=cc.Layer.extend({ctor:function(){this._super(),this.Hu()},Hu:function(){var t=cc.winSize.height,e=cc.winSize.width,i=.2*t;this.V=new Cn,this.V.setDirection(ccui.ScrollView.DIR_VERTICAL),this.V.setTouchEnabled(!0),this.V.setBounceEnabled(!0),this.V.setItemsMargin(10);var n=.95*e;this.V.setContentSize(cc.size(n,i)),this.V.x=(e-n)/2,this.V.y=t-i,this.addChild(this.V),this.V.setItemModel(this.yq())},Zj:function(){return this.V.getContentSize().width},yq:function(){var t=bkFontSizeUtil(30);isFBInstantGame()&&FBInstant.Rz().toLowerCase().zA("web")&&(t=25),(t=new BkLabel("aaaaaaaaaaaaaaaaaaaaaaaa","aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",t)).setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),t.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT),t.setScale(GAME_SCALE),t.setTextColor(cc.color.WHITE);var e=this.Zj();return t.boundingWidth=.9*e,t},dt:function(t){var e=this.yq().clone();e.setString(t),this.Zj(),t=this.Zj(),e.boundingWidth=.9*t,e.x=.5*t,this.V.pushBackCustomItem(e),this.V.jumpToBottom()}}),CHAT_MSG_DISPLAY_DOWN=0,CHAT_MSG_DISPLAY_UP=1,CHAT_MSG_ROW_HEIGH=15,CHAT_QUICK_TEXT_ROW_HEIGH=22,CHAT_OPEN_WIDTH=205,CHAT_OPEN_HEIGH=160,CHAT_BG_COLOR=cc.color(11,10,47,100),CHAT_POPUP_BG_COLOR=cc.color(132,97,68,255),CHAT_BG_COLOR_BORDER=cc.color(1,14,78,50),CHAT_PLACE_HOLDER_TEXT=" Nhập nội dung chat ...";var sb=cc.Layer.extend({Jd:null,nb:null,Zc:null,vh:null,Xf:null,Ae:null,aw:null,kg:null,$v:null,Vm:null,Wm:null,$X:null,ml:CHAT_MSG_DISPLAY_DOWN,gq:null,$m:0,Wp:0,ho:!1,yy:"Thua đi bác.;Nước đó rất cao.;Nhanh đi lâu vậy.;Làm ván nữa nhé.;Chơi hay nghỉ đây?;Xin được chỉ giáo.;Mở quân đỏ thế.;Các hạ quá khen.;Kết bạn đi, mai chơi tiếp!".split(";"),ctor:function(t,e){this._super(),t&&(this.ml=t),e&&(this.ho=e),this.$J(this.ho),this.BM(),this.DM(this.ho),this.lV()},$J:function(){var t=this;this.nb=new BkSprite("#chat_bg_mini.png"),this.addChild(this.nb,-1),this.oe=new BkButton("icon_chat_text.png","icon_chat_text.png","icon_chat_text.png","icon_chat_text_hover.png",ccui.Widget.PLIST_TEXTURE),this.oe.x=this.oe.width/2+8,this.oe.y=this.nb.height/2-.5,this.oe.addTouchEventListener((function(e,i){if(i===ccui.Widget.TOUCH_BEGAN)return t.pO(),!0}),this),this.nb.addChild(this.oe,WD_ZORDER_TOP),this.Wf=new BkButton("chat_icon_smile.png","chat_icon_smile.png","chat_icon_smile.png","chat_icon_smile_hover.png",ccui.Widget.PLIST_TEXTURE),this.Wf.x=Math.floor(this.oe.x+this.oe.width+this.Wf.width/2),this.Wf.y=this.oe.y,this.Wf.addTouchEventListener((function(e,i){if(i===ccui.Widget.TOUCH_BEGAN)return t.oO(),!0}),this),this.nb.addChild(this.Wf,WD_ZORDER_TOP),this.Xf=new BkButton("chess_chat_icon_up.png","chess_chat_icon_up.png","chess_chat_icon_up.png","chat_icon_up_hover.png",ccui.Widget.PLIST_TEXTURE),this.Xf.addTouchEventListener((function(e,i){if(i===ccui.Widget.TOUCH_BEGAN)t.qO()}),this),this.addChild(this.Xf,WD_ZORDER_TOP);var e=this.oe.width+this.Wf.width;e=this.nb.getContentSize().width+(this.ho?4:0)-e;this.Zc=createEditBox(cc.size(e,this.nb.height)),this.Zc.setPlaceHolder(CHAT_PLACE_HOLDER_TEXT),this.Zc.setInputFlag(cc.EDITBOX_INPUT_FLAG_SENSITIVE),this.Zc.setMaxLength(250),this.Zc.setPlaceholderFontSize(14),this.Zc.setFontColor(cc.color(255,255,255)),this.Zc.setFontSize(14),this.Zc.attr({fontName:"Roboto-Regular",KX:cc.TEXT_ALIGNMENT_LEFT,x:this.oe.width+this.Wf.width+25,y:this.Zc.height/2,anchorX:0,anchorY:.5}),this.nb.addChild(this.Zc),cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyReleased:function(e,i){e==cc.KEY.enter&&t.MO(i,t.Zc.getString())}},this.Zc),this.Jd=new cc.DrawNode,this.Jd.drawRect(cc.p(this.$m,this.Wp),cc.p(CHAT_OPEN_WIDTH,CHAT_OPEN_HEIGH),CHAT_BG_COLOR,1,CHAT_BG_COLOR_BORDER),this.Jd.setContentSize(CHAT_OPEN_WIDTH,CHAT_OPEN_HEIGH),this.Jd.anchorY=.5,this.Jd.x=-this.nb.width/2,this.Jd.y=this.nb.height-this.Wp,this.addChild(this.Jd,-1),this.vh=new BkWebChatContentLayer(CHAT_OPEN_WIDTH,CHAT_OPEN_HEIGH),this.vh.x=-CHAT_OPEN_WIDTH/2,this.vh.y=-CHAT_OPEN_HEIGH/2+this.nb.height,this.addChild(this.vh,-1),this.vh.setVisible(!0),this.Rk()},lV:function(){this.oe.x=this.nb.width-this.oe.width-24,this.oe.y=this.oe.y,this.Wf.x=this.nb.width-this.Wf.width/2-8,this.Wf.y+=.5,this.Zc.x=0,this.Zc.y+=.5},MO:function(t,e){logMessage("Enter key"),this.ol(e),this.Zc.setString("")},NV:function(t,e){this.$R(t,e)},$R:function(t,e){if(null!=this.vh){var i=pl(e,15)+": "+t;e==BkGlobal.P.userName&&(i="Bạn: "+t),this.vh.dt(i)}},Rk:function(t){null!=t&&(this.ml=t),this.ml==CHAT_MSG_DISPLAY_UP?(this.x=cc.winSize.width-this.Jd.width/2-2,this.y=this.Jd.height/2+2,this.nb.x=this.$m,this.nb.y=this.nb.height/2-CHAT_OPEN_HEIGH/2+this.Wp,this.Xf.loadTextures("chess_chat_icon_down.png","chess_chat_icon_down.png","chess_chat_icon_down.png","chess_chat_icon_down.png",ccui.Widget.PLIST_TEXTURE),this.Xf.x=this.Jd.getContentSize().width/2-this.Xf.getContentSize().width/2,this.Xf.y=-32,this.Jd.setVisible(!0),this.vh.setVisible(!0)):(this.x=cc.winSize.width-this.Jd.width/2-2,this.y=2,this.nb.y=this.nb.height/2+this.Wp,this.nb.x=this.$m,this.Xf.loadTextures("chess_chat_icon_up.png","chess_chat_icon_up.png","chess_chat_icon_up.png","chess_chat_icon_up.png",ccui.Widget.PLIST_TEXTURE),this.Xf.x=this.Jd.getContentSize().width/2-this.Xf.getContentSize().width/2,this.Xf.y=46,this.Jd.setVisible(!1),this.vh.setVisible(!1)),this.nb.setVisible(!0)},pO:function(){this.FD(),this.sJ()},oO:function(){this.FD(),this.It()},qO:function(){this.Lo(),this.Gr();var t=0;this.ml==CHAT_MSG_DISPLAY_UP?(this.Rk(CHAT_MSG_DISPLAY_DOWN),t=0):(this.Rk(CHAT_MSG_DISPLAY_UP),t=1),u("chatSetting",void 0===t?1:t)},ol:function(t){BkLogicManager.oa().cr=J();var e=new BkPacket;e.aq(t),BkConnectionManager.send(e)},BM:function(){this.Ae=new BkSprite,this.addChild(this.Ae,WD_ZORDER_TOP),this.AM()},sJ:function(){if(this.Lo(),this.Wm)this.Wm=!1,this.jm();else{var t=220,e=new cc.DrawNode;e.drawRect(cc.p(0,0),cc.p(CHAT_OPEN_WIDTH,t),CHAT_BG_COLOR,0,CHAT_BG_COLOR_BORDER),e.x=-this.nb.width,e.y=CHAT_QUICK_TEXT_ROW_HEIGH/2,this.Ae.addChild(e,-1);var i=new cc.DrawNode;for(i.drawRect(cc.p(0,0),cc.p(20,this.nb.height),cc.color(0,0,0,0),0,cc.color(0,0,0,0)),i.x=e.x,i.y=-this.nb.height,this.Ae.addChild(i,-1),e=0;e<this.yy.length;e++)(i=new BkWebQuickTextItem(this.yy[e],this)).x=0,i.y=t,t-=CHAT_QUICK_TEXT_ROW_HEIGH,this.Ae.addChild(i);this.Ae.setVisible(!0),this.Ae.setContentSize(cc.size(this.nb.width,t)),this.Ae.x=this.Ae.width+this.$m,this.Ae.y=this.nb.height-1,cc.eventManager.addListener(this.aw,this.Ae),this.Wm=!0,this.Vm=!1}},Lo:function(){this.Gr(),0<this.Ae.getChildren().length&&(this.Ae.setVisible(!1),cc.eventManager.removeListener(this.aw),this.Ae.removeAllChildren(),logMessage("removeQuickChatItem"))},AM:function(){var t=this;this.aw=cc.EventListener.create({event:cc.EventListener.MOUSE,onMouseMove:function(e){var i=e.getLocation();e=e.getCurrentTarget(),cc.rectContainsPoint(e.getBoundingBoxToWorld(),i)||(t.Lo(),t.jm())}})},DM:function(){var t=this.Jd.height;this.kg=new BkQuickEmotionsSprite(this),this.addChild(this.kg,WD_ZORDER_TOP),this.kg.setContentSize(cc.size(this.Jd.width,t)),this.kg.x=this.$m,this.kg.y=this.kg.height/2+32;var e=this;this.$v=cc.EventListener.create({event:cc.EventListener.MOUSE,onMouseMove:function(t){var i=t.getLocation();t=t.getCurrentTarget(),cc.rectContainsPoint(t.getBoundingBoxToWorld(),i)||(e.Gr(),e.jm())}})},It:function(){this.Lo(),this.Vm?(this.Vm=!1,this.jm()):(this.kg.It(),this.kg.setVisible(!0),this.Vm=!0,this.Wm=!1,cc.eventManager.addListener(this.$v,this.kg))},Gr:function(){0<this.kg.getChildren().length&&(this.kg.oD(),cc.eventManager.removeListener(this.$v),logMessage("removeQuickEmoList"))},qY:function(){this.Zc.setString(""),this.Zc.setPlaceHolder("")},FD:function(){this.ml==CHAT_MSG_DISPLAY_UP&&(this.gq=this.ml,this.Rk(CHAT_MSG_DISPLAY_DOWN))},jm:function(){cc._canvas.style.cursor="default",this.Vm=this.Wm=!1,this.gq==CHAT_MSG_DISPLAY_UP&&(this.gq=null,this.Rk(CHAT_MSG_DISPLAY_UP))},onExit:function(){this._super()}});BkWebQuickTextItem=BkSprite.extend({parentNode:null,ctor:function(t,e){this._super(),this.parentNode=e,this.setContentSize(this.parentNode.nb.width,CHAT_QUICK_TEXT_ROW_HEIGH/2);var i=this,n=new cc.DrawNode;n.drawRect(cc.p(0,-10),cc.p(this.parentNode.nb.width,10),cc.color(5,61,118,140),1,cc.color(5,61,118,140)),n.x=-this.parentNode.nb.width/2,this.addChild(n,-1),n.visible=!1;var s=new BkLabel(t,"Tahoma","15");s.setTextColor(cc.color(214,216,221)),this.addChild(s),this.ad((function(){n.setVisible(!0)}),(function(){n.setVisible(!1)})),cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(){return n.isVisible()&&i.rO(t),!1}},n)},rO:function(t){this.parentNode.ol(t),this.parentNode.Lo(),this.parentNode.jm()}}),BkWebChatContentLayer=cc.Layer.extend({Pt:!1,ctor:function(t,e){this._super(),this.Hu(t,e)},Hu:function(t,e){this.V=new Cn,this.V.setDirection(ccui.ScrollView.DIR_VERTICAL),this.V.setBounceEnabled(!0),this.V.setScrollBarEnabled(!0),this.V.setScrollBarAutoHideEnabled(!1),this.V.setContentSize(cc.size(t,e)),this.addChild(this.V),this.V.setItemModel(this.yq())},onEnter:function(){cc.Node.prototype.onEnter.call(this),this.V.forceDoLayout(),this.V.jumpToTop()},Zj:function(){return this.V.getContentSize().width-5},yq:function(){return new Deafault_item_chat_lv(this.Zj())},dt:function(t){this.Pt=!this.Pt;var e=new Deafault_item_chat_lv(this.Zj(),this.Pt);e.setText(t),e.x=this.Zj()/2,this.V.pushBackCustomItem(e),this.V.jumpToBottom()}}),Deafault_item_chat_lv=ccui.Layout.extend({Ld:null,zv:0,ctor:function(t){this.zv=t,this._super(),this.Ld=new cc.LabelTTF("","",14),this.Ld.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),this.Ld.setHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);var e=cc.color(236,240,241);this.Ld.setFontFillColor(e),this.Ld.setContentSize(cc.size(t,0)),this.Ld.setDimensions(cc.size(t,0)),this.Ld.x=t/2,this.setTouchEnabled(!0),this.setContentSize(this.Ld.getContentSize()),this.width=t,this.addChild(this.Ld)},setText:function(t){this.Ld.setString(t),t=this.Ld.getBoundingBox().height,logMessage("textHei: "+t+" - "+this.Ld.getContentSize().height),t=cc.size(this.zv,this.Ld.getContentSize().height),this.setContentSize(t),this.Ld.x=this.zv/2,this.Ld.y=this.Ld.getContentSize().height/2}}),CHAT_SMILE_TEXT_LENGTH=24,CHAT_SMILE_BG_VIEW_SIZE=115,BkQuickEmotionsSprite=BkSprite.extend({parentNode:null,spriteFrameCache:cc.spriteFrameCache,Uj:null,pv:null,nj:null,PB:null,bc:null,ctor:function(t){this._super(),this.parentNode=t,this.bc=new BkChatSettingByGame(12,10,15,4,30,260,20,res.an,res.Qn)},It:function(){this.oD();var t="";this.spriteFrameCache.addSpriteFrames(this.bc.$w,this.bc.yE);var e=new cc.DrawNode;for(e.drawRect(cc.p(0,0),cc.p(CHAT_OPEN_WIDTH,this.bc.Jc),CHAT_BG_COLOR,2,CHAT_BG_COLOR_BORDER),e.x=0,e.y=0,this.addChild(e,-1),(t=new cc.DrawNode).drawRect(cc.p(0,0),cc.p(CHAT_SMILE_BG_VIEW_SIZE,CHAT_SMILE_BG_VIEW_SIZE),cc.color(CHAT_BG_COLOR.r,CHAT_BG_COLOR.g,CHAT_BG_COLOR.b,100),2,cc.color(CHAT_BG_COLOR.r,CHAT_BG_COLOR.g,CHAT_BG_COLOR.b,110)),t.x=e.x,t.y=this.bc.Jc+CHAT_SMILE_BG_VIEW_SIZE,e=1;e<=CHAT_SMILE_TEXT_LENGTH;e++)t="expression"+e+".png",t=new BkEmotionsItem(this.spriteFrameCache.getSpriteFrame(t),e,this),this.addChild(t);(e=new cc.DrawNode).drawRect(cc.p(0,0),cc.p(this.parentNode.nb.width,this.parentNode.nb.height),cc.color(0,0,0,0),0,cc.color(0,0,0,0)),e.y=-this.parentNode.nb.height,this.addChild(e,-1),this.uE(1)},oD:function(){this.setVisible(!1),this.removeAllChildren()},$O:function(t){this.pv||(this.pv=!0,this.qD(),this.Uj=new BkChatEmoSprite(El(t)),this.addChild(this.Uj),this.Uj.x=this.nj.x,this.Uj.y=this.nj.y,this.Uj.OT())},KR:function(){this.pv=!1},uE:function(t){this.qD(),this.PB&&this.PB.removeFromParent(),t=El(t),cc.spriteFrameCache.addSpriteFrames(t.yb,t.zb),this.nj=new BkSprite("#"+t.Mn+"_1.png"),this.addChild(this.nj),this.nj.x=CHAT_SMILE_BG_VIEW_SIZE/2,this.nj.y=this.bc.Jc+CHAT_SMILE_BG_VIEW_SIZE/2},lS:function(){this.parentNode.jm()},GR:function(){this.parentNode.Gr()},qD:function(){null!=this.nj&&this.nj.removeFromParent(),this.Uj&&this.Uj.LR()},onExit:function(){this.spriteFrameCache.removeSpriteFramesFromFile(this.bc.$w),this._super()}}),BkEmotionsItem=BkSprite.extend({parentNode:null,zl:null,Pb:null,Wc:null,Mp:!1,bc:null,ctor:function(t,e,i){function n(){s.parentNode.$O(s.zl),logMessage("self.idEmo:"+s.zl)}this._super(),this.zl=e,this.parentNode=i,this.bc=this.parentNode.bc,this.x=this.bc.Yt;var s=this;this.Pb=new cc.DrawNode,this.Pb.drawRect(cc.p(-this.bc.Rm,-this.bc.Rm),cc.p(this.bc.Rm,this.bc.Rm),cc.color(255,255,255,30),1,cc.color(255,255,255,30)),this.addChild(this.Pb,-1),this.Pb.visible=!1,this.Wc=new BkSprite(t),this.addChild(this.Wc),this.Wc.ad((function(){s.Mp||(s.Mp=!0,s.Pb.setVisible(!0),s.parentNode.uE(s.zl),s.scheduleOnce(n,.8,"viewAniEmo"))}),(function(){s.Pb.setVisible(!1),s.parentNode.KR(),s.unschedule(n),s.Mp=!1})),this.Wc.Ua((function(){s.Gv(e)})),this.Wd(e)},Wd:function(t){var e=Math.floor((t-1)/this.bc.Dv);this.Wc.x=2*this.bc.qz+(t-1)%this.bc.Dv*(this.bc.Xt+this.bc.Yt),this.Wc.y=2*this.bc.Wt+e*(this.bc.Xt+this.bc.Wt),this.Pb.x=this.Wc.x,this.Pb.y=this.Wc.y},Gv:function(t){this.ol(Dl(t-1)),this.parentNode&&(this.parentNode.setVisible(!1),this.parentNode.GR(),this.parentNode.lS())},ol:function(t){BkLogicManager.oa().cr=J();var e=new BkPacket;e.aq(t),BkConnectionManager.send(e)}}),BkChatSettingByGame=cc.Class.extend({Wt:null,qz:null,Yt:null,Dv:null,Xt:null,Jc:null,Rm:null,$w:null,yE:null,ctor:function(t,e,i,n,s,r,o,a,c){this.Wt=t,this.qz=e,this.Yt=i,this.Dv=n,this.Xt=s,this.Jc=r,this.Rm=o,this.$w=a,this.yE=c}}),FRIEND_ITEM_HEIGHT_SPRITE=34,FRIEND_ITEM_SCALE_BUTTON=.8,FRIEND_ITEM_PADDING_Y=FRIEND_ITEM_PADDING_X=20,TEXT_OFFSET_NAME_LEVEL=TEXT_OFFSET_WITH_AVATAR=10,SELECT_OFFSET=50,AVATAR_FRIEND_WINDOW_HEIGHT=AVATAR_FRIEND_WINDOW_WIDTH=34,BkIngameInviteFriendItem=BkSprite.extend({parentNode:null,W:null,Fe:null,Pb:null,Re:null,Rf:null,xt:null,IB:300,ctor:function(t,e,i,n,s){this._super(),this.IB=s,this.W=t,this.parentNode=i,this.rd(e,n),this.Ou()},rd:function(t,e){if(e){var i=new cc.DrawNode;i.drawSegment(cc.p(-15,FRIEND_ITEM_HEIGHT_SPRITE/2),cc.p(this.parentNode.ab().width-65,FRIEND_ITEM_HEIGHT_SPRITE/2),.5,sj),this.addChild(i)}(i=new cc.DrawNode).drawSegment(cc.p(-15,-FRIEND_ITEM_HEIGHT_SPRITE/2),cc.p(this.parentNode.ab().width-65,-FRIEND_ITEM_HEIGHT_SPRITE/2),.5,sj),this.addChild(i),this.Pb=new cc.DrawNode,this.Pb.drawRect(cc.p(-15,-FRIEND_ITEM_HEIGHT_SPRITE/2),cc.p(this.parentNode.ab().width-65,FRIEND_ITEM_HEIGHT_SPRITE/2),rj,0,rj),this.Pb.visible=!1,this.addChild(this.Pb);var n=hn(this.W.Hb);n.setScale(.4),n.x=5,n.y=0,this.addChild(n,WD_ZORDER_TOP),(i=new BkLabel(pl(this.W.userName,16),"Arial",16)).setTextColor(uj),i.x=n.x+20+i.getContentSize().width/2,i.y=0,this.addChild(i),this.Re=new BkCheckBox,this.Re.x=this.IB-40,this.Re.y=i.y;var s=this;this.Re.addEventListener((function(){s.Re.setSelected(!s.Re.isSelected())})),this.addChild(this.Re),(n=new BkLabel(convertStringToMoneyFormat(this.W.pb())+pn(),"Arial",15)).setTextColor(tj),n.x=this.Re.x-50,n.y=i.y,this.addChild(n),this.Wd(t)},Wd:function(t){this.x=0,this.y=t-FRIEND_ITEM_HEIGHT_SPRITE},Ou:function(){var t=this;this.Rf=xb((function(){t.Pb.setVisible(!0)}),(function(){t.Pb.setVisible(!1)}),(function(){t.Pb.isVisible()&&t.vO(t.W.userName)})),cc.eventManager.addListener(this.Rf,this)},mT:function(t){this.xt=t},vO:function(){null!=this.Re&&(this.Re.setSelected(!this.Re.isSelected()),null!=this.xt&&this.xt())},dF:function(t){this.Re.setSelected(t)},isSelected:function(){return this.Re.isSelected()},od:function(){return this.W.userName}}),BkGoldBoxSprite=BkSprite.extend({lm:null,sg:null,xc:0,J0:!1,ctor:function(){function t(){if(0<e.xc)showToastMessage("Còn "+convertSecondToMinSec(e.xc)+" Bạn mới có thể nhận quà!",cc.winSize.width-90,cc.winSize.height-110,3,140);else{var t=new BkPacket;t.zc(gi),BkConnectionManager.send(t)}}this._super(),this.km=new BkSprite("#btn_big_normal.png"),this.km.opacity=0,this.km.x+=this.km.width/4,this.addChild(this.km),this.lm=new BkSprite("#luckybox_close.png"),this.addChild(this.lm),this.sg=new BkLabelTTF("00:00","",14,cc.size(0,0),cc.TEXT_ALIGNMENT_CENTER,cc.VERTICAL_TEXT_ALIGNMENT_TOP),this.sg.y+=.5,this.sg.x=this.lm.x+this.lm.width+1,this.addChild(this.sg),this.ad();var e=this;this.lm.Ua(t),this.km.Ua(t),this.setVisible(!1)},VT:function(t){this.xc=t,1>this.xc?this.kE():this.Xr()},fP:function(){this.sg._strokeEnabled?this.sg.disableStroke():this.sg.enableStroke(cc.color(255,0,0),2)},kE:function(){this.sg.setString(convertSecondToMinSec(0)),this.unschedule(this.wr),this.schedule(this.fP,.5)},Xr:function(){this.sg.setString(convertSecondToMinSec(this.xc)),this.schedule(this.wr,1)},wr:function(){this.xc--,0<this.xc?this.sg.setString(convertSecondToMinSec(this.xc)):this.kE()},removeSelf:function(){this.lm.removeSelf(),this.unscheduleAllCallbacks(),this._super()},zE:function(){this.yc(),this.schedule(this.wr,1)},yc:function(){this.unschedule(this.wr)}}),DAILY_TASK_HEIGHT_SPRITE=90,DAILY_TASK_SCALE_BUTTON=.9,DAILY_TASK_PADDING_X=80,DAILY_TASK_PADDING_Y=20,DAILY_TASK_TEXT_COLOR=cc.color(255,178,102),BkDailyTaskItem=BkSprite.extend({hs:cc.spriteFrameCache,parentNode:null,dh:null,ctor:function(t,e,i,n){this._super(),this.dh=t,this.parentNode=n,this.hs.addSpriteFrames(res.UU,res.y6),this.rd(e,i)},rd:function(t){var e=new BkSprite("#bg_task_item.png");e.x=e.getWidth()/2,e.y=e.getHeight()/2+14,this.addChild(e);var i=this.hs.getSpriteFrame("daily_task_close.png");this.dh.ZA&&(i=this.hs.getSpriteFrame("daily_task_open.png")),(i=new BkSprite(i)).x=i.width/2+10,i.y=i.height+5,this.addChild(i),(i=new BkLabel(this.dh.q6,"Tahoma",16)).setTextColor(cc.color(251,254,0)),i.x=DAILY_TASK_PADDING_X+i.getContentSize().width/2,i.y=DAILY_TASK_HEIGHT_SPRITE-15,this.addChild(i),(i=new BkLabel("Mức thưởng: "+convertStringToMoneyFormat(this.dh.qy)+pn(),"Tahoma",14)).x=DAILY_TASK_PADDING_X+i.getContentSize().width/2,i.y=DAILY_TASK_HEIGHT_SPRITE-35,this.addChild(i),(i=new BkLabel("Đã thực hiện: "+convertStringToMoneyFormat(this.dh.az)+" / "+convertStringToMoneyFormat(this.dh.OE),"Tahoma",14)).x=DAILY_TASK_PADDING_X+i.getContentSize().width/2,i.y=DAILY_TASK_HEIGHT_SPRITE-55,this.addChild(i),(i=new BkLabel("Chưa xong","Tahoma",15)).setTextColor(cc.color(255,255,255)),i.x=e.getWidth()-i.getContentSize().width/2-20,i.y=DAILY_TASK_HEIGHT_SPRITE/2+10,this.addChild(i);var n=createBkButtonPlist("btn_no_text.png","btn_no_text_press.png","btn_no_text.png","btn_no_text_press.png");n.setTitleText("Chưa xong"),n.ef(!1),n.setVisible(!1),this.dh.az==this.dh.OE&&(this.dh.ZA?(i.setString("Đã hoàn thành"),i.x=e.getWidth()-i.getContentSize().width/2-20):(i.setVisible(!1),n.ef(!0),n.setVisible(!0),n.setTitleText("Nhận"),n.addTouchEventListener((function(t,e){e==ccui.Widget.TOUCH_ENDED&&this.wO()}),this))),n.setScale(DAILY_TASK_SCALE_BUTTON),n.x=e.getWidth()-n.width/2-15,n.y=DAILY_TASK_HEIGHT_SPRITE/2+n.height/2-7,this.addChild(n),this.Wd(t)},Wd:function(t){this.x=0,this.y=t-DAILY_TASK_HEIGHT_SPRITE},wO:function(){this.Fb();var t=new BkPacket;t.vj(ri,this.dh.id),BkConnectionManager.send(t)},Fb:function(){BkLogicManager.S().jb(this.parentNode)},onExit:function(){this.hs.removeSpriteFramesFromFile(res.UU),this._super()}}),FRIEND_ITEM_HEIGHT_SPRITE=44,FRIEND_ITEM_PADDING_X=18,FRIEND_ITEM_PADDING_Y=22,FRIEND_ITEM_BTN_P_RIGHT=20,TEXT_OFFSET_WITH_AVATAR=10,TEXT_OFFSET_MONEY_LEVEL=270,AVATAR_FRIEND_WINDOW_HEIGHT=AVATAR_FRIEND_WINDOW_WIDTH=34,FRIEND_ITEM_TEXT_COLOR=cc.color(255,178,102),FRIEND_ITEM_HOVER_COLOR=cc.color(225,178,102,100),BkFriendItem=ccui.Widget.extend({parentNode:null,W:null,Fe:null,eY:null,aY:null,YX:null,jl:null,SM:null,Pc:null,ctor:function(t,e,i){this._super(),logMessage("Player data: "+t.userName),this.setName("BkFriendItem"),this.W=t,this.Fe=e,this.parentNode=i,this.gg(),this.rd(10)},tZ:function(){},gg:function(){var t=this;this.Pc=createBkButtonPlist("infoFrameBanBeOn.png","infoFrameBanBeOn.png","infoFrameBanBeOn.png","infoFrameBanBeOn.png",""),this.Pc.addClickEventListener((function(){logMessage("Friend item clicked: "),t.parentNode.xK(t.W)}));var e=8;isWebPlatform()&&(e=7),this.setContentSize(cc.size(1.08*this.Pc.getContentSize().width,this.parentNode.Q.height/e)),this.setScale(GAME_SCALE),this.setPosition(.5*this.getContentSize().width,.5*this.getContentSize().height),this.Pc.setPosition(.5*this.getContentSize().width,.5*this.getContentSize().height),this.addChild(this.Pc)},rd:function(t){var e=null,i=(e=zb(this.W.Hb,this.W.$c),.5);isWebPlatform()||(i=.6),e.setScale(i),e.x=.02*this.getContentSize().width+e.getBoundingBox().width/2,e.y=this.getContentSize().height/2,this.addChild(e,WD_ZORDER_TOP),isWebPlatform()||(e.y=.6*this.getContentSize().height);i=20;var n=18;isWebPlatform()||(i=30,n=15),(i=new BkLabel(Ab(this.W.userName,n),"Arial",i,!0)).setTextColor(Cj),i.x=e.x+e.getBoundingBox().width/2+i.getContentSize().width/2+12*GAME_SCALE,i.y=e.y+TEXT_OFFSET_WITH_AVATAR*GAME_SCALE,this.addChild(i),n=16,isWebPlatform()||(n=26);n=new BkLabel("","Tahoma",n);var s=null,r=cc.color(178,176,177);this.W.Ie?(this.gk(this.W.ya)?n.setString("Đang chơi "+wl(this.W.ya)):n.setString("Online"),r=cc.color(27,197,2),s=new BkSprite("#icon_online.png")):(n.setString("Offline"),s=new BkSprite("#icon_offline.png")),s.x=e.x+e.getBoundingBox().width/2+10*GAME_SCALE,s.y=i.y-FRIEND_ITEM_PADDING_Y*GAME_SCALE,n.setTextColor(r),n.x=s.x+s.getBoundingBox().width+n.getContentSize().width/2,n.y=s.y-1*GAME_SCALE,this.addChild(s),this.addChild(n),r=null,1==this.Fe&&((r=new BkLabel(rn(this.W.$c),"Arial",20)).x=e.x+TEXT_OFFSET_MONEY_LEVEL*GAME_SCALE+r.getContentSize().width/2,r.y=e.y,this.addChild(r)),s.setVisible(!1),null!=r&&r.setVisible(!1),i.y=.6*this.getContentSize().height,s=null,(s=this.W.Ie?new BkSprite("#online.png"):new BkSprite("#offline.png")).y=.4*this.getContentSize().height,s.x=i.x-.5*i.getContentSize().width+.5*s.getContentSize().width,this.addChild(s,100),n.y=s.y,n.x=s.x+s.getContentSize().width/2+n.getContentSize().width/2,i.setTextColor(R),n.setTextColor(R),this.Eu(e.y,this.W.userName),this.Wd(t)},Eu:function(t){var e=this,i=null,n=null,s=(i=createBkButtonPlist("btnMoiChoi.png","btnMoiChoiPress.png","btnMoiChoi.png","btnMoiChoi.png"),n=createBkButtonPlist("btnVaoXem.png","btnVaoXemPress.png","btnVaoXem.png","btnVaoXem.png"),null),r=null;1==this.Fe?((s=createBkButtonPlist("btnIconXoaBanFriendWD.png","btnIconXoaBanFriendWDPress.png","btnIconXoaBanFriendWD.png","btnIconXoaBanFriendWD.png")).x=this.getContentSize().width-s.getContentSize().width-FRIEND_ITEM_BTN_P_RIGHT,s.y=t,s.addTouchEventListener((function(){e.CO()}),this),this.addChild(s),i.x=this.getContentSize().width-i.width-FRIEND_ITEM_BTN_P_RIGHT,i.y=s.y):2==this.Fe&&((r=createBkButtonPlist("btnIconTheoDoiFriendWD.png","btnIconTheoDoiFriendWDPress.png","btnIconTheoDoiFriendWD.png","btnIconTheoDoiFriendWD.png")).x=this.getContentSize().width-r.width-FRIEND_ITEM_BTN_P_RIGHT,r.y=t,r.addTouchEventListener((function(t,i){switch(i){case ccui.Widget.TOUCH_BEGAN:logMessage("btnAddFriend"),e.sO();break;case ccui.Widget.TOUCH_ENDED:r.removeFromParent()}}),this),this.addChild(r),this.parentNode.$M(this.W.userName)&&(logMessage("isInFriendList: "+this.W.userName),this.W.om(!0),r.Ya(!1)),i.x=this.getContentSize().width-i.width-FRIEND_ITEM_BTN_P_RIGHT,i.y=t),t=0,null!=s&&(s.y=this.getContentSize().height/2,s.x=this.Pc.getContentSize().width+.08*s.getContentSize().width,t=s.x-1*s.getContentSize().width-0),null!=r&&(r.y=this.getContentSize().height/2,r.x=this.Pc.getContentSize().width+.08*r.getContentSize().width,t=r.x-1*r.getContentSize().width-0),i.y=this.getContentSize().height/2,i.x=t-i.getContentSize().width/2,n.x=i.x,n.y=i.y,this.W.Ie&&(i.addClickEventListener((function(){e.gk(e.W.ya)?e.Ao():e.Wg(e.W.userName)})),this.addChild(i),this.addChild(n),n.addClickEventListener((function(){e.Ao()})),e.gk(e.W.ya)?(i.Ya(!1),n.Ya(!0)):(i.Ya(!0),n.Ya(!1)))},Wd:function(t){this.x=40,this.y=t-FRIEND_ITEM_HEIGHT_SPRITE},Ao:function(){var t=new BkPacket;t.Ax(this.W.userName),BkConnectionManager.send(t),BkLogicManager.S().vd.io=!0},Wg:function(t){this.parentNode.Wg(t)},CO:function(){this.parentNode.Fb();var t=new BkPacket;t.Bx(this.W.userName),BkConnectionManager.send(t),this.parentNode.Kw(this.W,!0)},sO:function(){this.parentNode.Fb();var t=new BkPacket;t.wx(this.W.userName),BkConnectionManager.send(t),this.parentNode.Kw(this.W)},c7:function(t){this.parentNode.le&&(this.parentNode.le.visible=t)},gk:function(t){return t==K||t==L}}),TOP_ITEM_HEIGHT_SPRITE=44,TOP_ITEM_PADDING_Y=22,TEXT_OFFSET_WITH_AVATAR=10,TEXT_OFFSET_MONEY_LEVEL=270,BkTopPlayerItem=ccui.Widget.extend({uj:"itemBg",parentNode:null,W:null,jl:null,SM:null,za:null,ctor:function(t,e,i){this._super(),logMessage("BkTopPlayerItem - Player data: "+t.userName),this.setName("BkTopPlayerItem"),this.ls=.6,this.W=t,this.parentNode=e,this.ya=i,this.gg(),this.EM(),this.rd(!0)},xI:function(t){return t.userName==BkGlobal.P.userName},jV:function(t){t&&(this.W=t,this.MV(t),this.removeChild(this.rf),this.kf(t),this.xV(t),this.tV(t),this.RD(t),this.ZD(t),this.qV(t))},MV:function(t){console.log("BkTopPlayerItem - this.updateRanking - filename: top_player_rank_"+t.Ta+".png"),3>=t.Ta&&this.Zw.Of("top_player_rank_"+t.Ta+".png"),this.Nd.setString(t.Ta.toString()),this.WD(t),this.SD(this.Nd,t)},SD:function(t,e){var i=this.za;t.x=1==e.Ta.toString().length?UI.eb(i)-27*GAME_SCALE-UI.Da(t):UI.eb(i)-20*GAME_SCALE-UI.Da(t),t.y=i.y-.2*UI.Ei(t)},EM:function(){var t,e=this.za,i=this.W;(t=3>i.Ta?new BkSprite("#top_player_rank_"+i.Ta+".png"):new BkSprite("#top_player_rank_3.png")).x=UI.eb(e)-25*GAME_SCALE-UI.Da(t),t.y=e.y,t.name="spRank",console.log("BkTopPlayerItem - this.initRanking - spRank = ",t),this.addChild(t),this.Zw=t,(e=new cc.LabelTTF(i.Ta.toString(),"top_rank",38)).setFontFillColor(Gj),this.SD(e,i),e.name="lblRank",this.addChild(e),this.Nd=e,this.WD(i)},WD:function(t){3>=t.Ta?(this.Zw.setOpacity(255),this.Nd.setOpacity(0)):(this.Zw.setOpacity(0),this.Nd.setOpacity(255))},gg:function(){var t=this;this.za=createBkButtonPlist("top_player_item_bg.png","top_player_item_bg.png","infoFrameBanBeOn.png","top_player_item_bg.png",""),this.za.setScaleX(.81),this.za.setScaleY(.8),this.za.name=this.uj,this.za.addClickEventListener((function(){logMessage("BkTopPlayerItem Top player item clicked: "),t.parentNode.ZU(t.W)}));var e=8;isWebPlatform()&&(e=6.4);var i=.8*this.za.getContentSize().width;e=this.parentNode.Q.height/e;console.log("BkTopPlayerItem - this.initBg() - width: "+i+" - height: "+e),this.setContentSize(cc.size(i,e)),this.setScale(GAME_SCALE),this.setPosition(.5*this.getContentSize().width,.5*this.getContentSize().height),this.za.setPosition(.54*this.getContentSize().width,.5*this.getContentSize().height),this.addChild(this.za)},kf:function(t){t=this.fu(t),this.removeChild(this.rf),this.rf=t,this.hq(t)},fu:function(t){return zb(this.W.Hb,t.$c)},hq:function(t){var e=.55;isWebPlatform()||(e=.6),t.setScale(e),t.x=.01*this.getContentSize().width+t.getBoundingBox().width/2,t.y=.62*this.getContentSize().height,t.name="avatar",this.addChild(t,WD_ZORDER_TOP),isWebPlatform()||(t.y=.6*this.getContentSize().height)},OL:function(){var t=this.fu(this.W);this.rf=t,this.hq(t)},xV:function(){this.Aa.setString(Ab(this.W.userName,this.hx)),this.QD()},QD:function(){this.Aa.x=this.rf.x+this.rf.getBoundingBox().width/2+this.Aa.getContentSize().width/2+12*GAME_SCALE,this.Aa.y=this.rf.y+TEXT_OFFSET_WITH_AVATAR*GAME_SCALE,this.Aa.y=this.getContentSize().height*this.ls},qM:function(){this.hx=18,isWebPlatform()||(this.fontSize=30,this.hx=15);var t=new BkLabel(Ab(this.W.userName,this.hx),"Arial",20,!0);this.Aa=t,this.Aa.setTextColor(R),this.QD(),t.name="lbName",this.addChild(t)},KM:function(){var t=null;(t=this.W.Ie?new BkSprite("#icon_online.png"):new BkSprite("#icon_offline.png")).x=this.rf.x+this.rf.getBoundingBox().width/2+10*GAME_SCALE,t.y=this.Aa.y-TOP_ITEM_PADDING_Y*GAME_SCALE,this.addChild(t),t.setVisible(!1)},oM:function(){var t=null;(t=this.W.Ie?new BkSprite("#online.png"):new BkSprite("#offline.png")).y=this.getContentSize().height*(1-this.ls),t.x=this.Aa.x-.5*this.Aa.getContentSize().width+.5*t.getContentSize().width,this.addChild(t,100),this.Nn=t},tV:function(t){t.Ie?this.Nn.Of("online.png"):this.Nn.Of("offline.png")},rM:function(){var t=16;isWebPlatform()||(t=26),this.BN=t=new BkLabel("","Tahoma",t),this.RD(this.W),t.setTextColor(R),this.addChild(t)},RD:function(t){var e=this.BN;cc.color(178,176,177),t.Ie?(this.gk(this.W.ya)?e.setString("Đang chơi "+wl(this.W.ya)):e.setString("Online"),cc.color(27,197,2)):e.setString("Offline"),e.y=this.Nn.y-.2*UI.Ga(e),e.x=this.Nn.x+this.Nn.getContentSize().width+e.getContentSize().width/2},I6:function(){},rd:function(){this.OL(),this.qM(),this.KM(),this.oM(),this.rM(),this.vM(this.rf.y,this.W.userName),this.dM()},qV:function(t){this.BU.wV(t.re)},dM:function(){var t=this.za,e=new PlayerElo(this.ya==L?"elo_CU.png":"elo_CT.png",this.W.re);e.setScale(.8*GAME_SCALE),e.x=UI.fb(t)-20*GAME_SCALE-UI.Da(e),e.y=this.jl.y,this.addChild(e),this.BU=e},vM:function(){var t=this,e=this.za,i=createBkButtonPlist("btnMoiChoi.png","btnMoiChoiPress.png","btnMoiChoi.png","btnMoiChoi.png"),n=createBkButtonPlist("btnVaoXem.png","btnVaoXemPress.png","btnVaoXem.png","btnVaoXem.png");i.x=UI.fb(e)-1.85*UI.qa(i),i.y=e.y,logMessage("BkTopPlayerItem - btnPlayWith.x = "+i.x),n.x=i.x,n.y=i.y,this.mt=n,this.jl=i,i.addClickEventListener((function(){t.gk(t.W.ya)?(console.log("btnPl ayWith - isAllowPlayWithCheck - self.playerData.getGameId() ",t.W.ya),t.Ao()):(console.log("btnPlayWith - not isAllowPlayWithCheck"),t.Wg(t.W.userName))})),n.addClickEventListener((function(){t.Ao()})),this.addChild(i),this.addChild(n),this.ZD(this.W)},ZD:function(t){t.Ie&&!this.xI(t)?this.gk(t.ya)?(this.jl.Ya(!1),this.mt.Ya(!0)):(this.jl.Ya(!0),this.mt.Ya(!1)):(this.jl.Ya(!1),this.mt.Ya(!1))},Ao:function(){var t=new BkPacket;t.Ax(this.W.userName),BkConnectionManager.send(t),BkLogicManager.S().vd.io=!0},Wg:function(t){this.parentNode.Wg(t)},gk:function(t){return t==K||t==L}}),PlayerElo=BkSprite.extend({ctor:function(t,e){this._super("#small_info_frame.png");var i=new BkSprite("#small_info_frame.png");i.x=i.getContentSize().width/2,i.y=i.getContentSize().height/2;var n=new BkSprite("#"+t);n.setScale(.8),n.x=UI.eb(i)+10*GAME_SCALE+UI.Da(n),n.y=i.y,this.addChild(n);var s=new BkLabel(e,"",20);s.x=UI.fb(n)+10*GAME_SCALE+.5*s.getContentSize().width,s.y=i.y,i=cc.color(251,234,180),s.setTextColor(i),this.addChild(s),this.CN=s},wV:function(t){this.CN.setString(t)}}),BkHistoryListWindow=BkTabWindow.extend({Ic:12,yj:8,Lm:.01,Sf:0,al:99,oc:4,Hc:0,ke:50,Hp:null,pf:["Cờ Tướng","Cờ Úp"],Bg:null,tb:null,XM:!0,Lh:0,ctor:function(t){console.log("BkHistoryListWindow - Start ctor - GAME_SCALE: "+GAME_SCALE),console.log("BkHistoryListWindow - Start ctor - kindHistory: "+t);var e=e="",i=.8*cc.winSize.height;this._super(e,isWebPlatform()?cc.size(600*GAME_SCALE,960*GAME_SCALE):cc.size(620,i),this.pf.length,this.pf),console.log("BkHistoryListWindow - ctor - after supper"),this.Lh=t,0==t?this.Ob("title_wd_lich_su.png",0*GAME_SCALE_MIN):this.Ob("title_wd_da_xem.png",0*GAME_SCALE_MIN),this.Lp(this.lj,this,1),logMessage("BkHistoryListWindow - this.ctor() - after addTabChangeEventListener"),this.Yr()},Yr:function(){if(isWebPlatform()){var t=this.Zb,e=this.Pa;t.Ya(!0),t.x=UI.fb(e)-1.3*UI.qa(t),t.y=UI.xf(e)-1.9*UI.Ga(t),console.log("BkTopPlayersWindow - this._btnClose.x: ",this.Zb.x),console.log("BkTopPlayersWindow - this._btnClose.y: ",this.Zb.y)}},sn:function(t){logMessage("BkHistoryListWindow - this.drawUIWithTab() - tabIndex: "+t),this.Te(),1==t?this.KN():2==t&&this.NN()},yX:function(){},zX:function(){},AX:function(){},Ob:function(t,e){e=void 0===e?0:e;var i=new BkSprite("#"+t);i.setScale(GAME_SCALE_MIN),i.x=this.Za.x,i.y=this.Za.y+e*GAME_SCALE_MIN,this.lb.addChild(i,WD_ZORDER_BODY)},Iq:function(){var t,e=this.Q.width,i=GAME_SCALE;isWebPlatform()&&(500>this.Q.width?i=.6:600>this.Q.width&&(i=.9)),t=cc.spriteFrameCache.getSpriteFrame("mini_popupframe.png");var n=cc.rect(75,80,425,379);this.Pa=new cc.Scale9Sprite(t,n),isWebPlatform()||(e=this.Pa.getContentSize().width),this.Pa.setScaleY(1.1*GAME_SCALE),this.Pa.width=e*GAME_SCALE,this.Pa.height=this.Q.height,this.Pa.x=this.Q.width/2,this.Pa.y=this.Q.height/2,this.lb.addChild(this.Pa,WD_ZORDER_BODY),1>(t=i)&&!isWebPlatform()&&(t=1),this.Za=new BkSprite("#header.png"),this.Za.setScaleX(i),this.Za.setScaleY(t),this.Za.x=this.Q.width/2,this.Za.y=UI.xf(this.Pa)-this.Za.getBoundingBox().height/2,logMessage("BkTopPlayersWindow - initBgBody - this.headerChessWD.y = "+this.Za.y),this.lb.addChild(this.Za,WD_ZORDER_BODY)},KN:function(){this.Lh=0,this.Fb();var t=new BkPacket;console.log("loadCoTuongPlayerHistory - this.kindHistory: "+this.Lh),t.Vy(K,this.Lh),BkConnectionManager.send(t),s()},NN:function(){this.Lh=1,this.Fb();var t=new BkPacket;console.log("loadCoUpPlayerHistory - this.kindHistory: "+this.Lh),s(),t.Vy(K,this.Lh),BkConnectionManager.send(t)},Rn:function(){this.va=[],logMessage("BkHistoryListWindow - this.iniTab");var t=new BkButton("da_choi_on.png","da_choi_on.png","da_choi_on.png","da_choi_on.png",ccui.Widget.PLIST_TEXTURE);if(this.Gh(t,1),this.va.push(t),t=new BkButton("da_xem_deselect.png","da_xem_deselect.png","da_xem_deselect.png","da_xem_deselect.png",ccui.Widget.PLIST_TEXTURE),this.Gh(t,2),this.va.push(t),this.xh(),null!=this.of){for(logMessage("BkHistoryListWindow - this.iniTab start checking this._arrBtnText"),t=0;t<this.of.length;t++){var e=this.va[t];0==t?this.gf(e,!0):this.gf(e,!1)}logMessage("BkHistoryListWindow - this.iniTab end checking this._arrBtnText")}else logMessage("Error: Must addTabChangeEventListener to callback handle")},xh:function(){logMessage("BkHistoryListWindow - this.configPosButton()");var t=this.Pa,e=this.va[0],i=this.va[1];console.log("configPosButton - bg.x: "+t.x),console.log("configPosButton - UI.getRealWidth(bg): "+UI.qa(t)),e.x=UI.eb(t)+.7*UI.Da(t),e.y=UI.Bh(t)+.87*UI.Ga(t),i.x=UI.eb(t)+1.3*UI.Da(t),i.y=e.y,logMessage("BkHistoryListWindow - end of this.configPosButton()")},fn:function(t){logMessage("BkHistoryListWindow - this.configButtonWithSelectedTab() - tabIndex: "+t);var e=this.va[0],i=this.va[1];1==t?(e.loadTextures("da_choi_on.png","da_choi_on.png","da_choi_on.png","da_choi_on.png",ccui.Widget.PLIST_TEXTURE),i.loadTextures("da_xem_deselect.png","da_xem_deselect.png","da_xem_deselect.png","da_xem_deselect.png",ccui.Widget.PLIST_TEXTURE)):(e.loadTextures("da_choi_deselect.png","da_choi_deselect.png","da_choi_deselect.png","da_choi_deselect.png",ccui.Widget.PLIST_TEXTURE),i.loadTextures("da_xem_on.png","da_xem_on.png","da_xem_on.png","da_xem_on.png",ccui.Widget.PLIST_TEXTURE))},ud:function(e,i){switch(i){case ng:if(!e.iv){this.removeSelf();break}this.ya=e.ya,this.Bg=e.DD,console.log("onLoadComplete - o ",e),console.log("onLoadComplete - this._sessions: ",this.Bg),this.al=this.Bg.length,t(),this.kK(this.ya),this.onEnter();break;default:this.removeSelf()}},gy:function(t){for(var e=0;e<t.length;e++)t[e].Ta=e+1;return t},Fb:function(){BkLogicManager.S().jb(this)},kK:function(t){console.log("BkHistoryListWindow - drawUIWithSessionsReturn()"),this.Te(),this.hK(this.Bg,this.nc,t)},KG:function(){var t=this.Pa,e=new BkButton("btnDong.png","btnDongPress.png","btnDong.png","btnDong.png",ccui.Widget.PLIST_TEXTURE);e.setScale(GAME_SCALE),e.x=t.x,e.y=UI.Bh(t)+1.3*UI.Ga(e),this.T(e);var i=this;e.addClickEventListener((function(){i.removeSelf()}))},lj:function(t,e){console.log("BkHistoryListWindow - this.selectedTabEvent() - sender: ",t),logMessage("BkHistoryListWindow - this.selectedTabEvent() - tabIndex: "+e),this.sn(e)},hK:function(t,e,i){var n=this.Pa;console.log("BkHistoryListWindow - this.drawSessions - sessions: ",t),console.log("BkHistoryListWindow - this.drawSessions - gameId: ",i);var s=this.kb=new BkSprite,r=UI.qa(n),o=.75*UI.Ga(n);this.kb.setContentSize(r,o),null!=t&&0<t.length?this.TG(i):this.ct(e),this.kb.x=n.x,this.kb.y=UI.Bh(n)+.065*UI.Ga(n)+UI.Ei(s),this.T(this.kb)},TG:function(t){var e=this.kb,i=this.Bg;this.V=new Cn,this.V.name="List Sessions",this.V.setScrollBarEnabled(!1),this.V.setTouchEnabled(!0),this.V.setBounceEnabled(!0),this.V.setContentSize(cc.size(this.kb.getContentSize().width,this.kb.getContentSize().height)),this.V.setPosition(.06*UI.qa(e),0),this.V.setGravity(ccui.ListView.GRAVITY_CENTER_VERTICAL);var n=this.Yy(i[0],this,t);for(console.log("BkHistoryListWindow - this.drawTopPlayers() - defaultItem: ",n),this.V.setItemModel(n),this.Pd=n.getContentSize().height,this.cp=e=this.Pd*i.length+(i.length-1)*this.oc,console.log("addListSessions - totalHeight: ",e),console.log("addListSessions - this._itemTemplateHeight: ",this.Pd),console.log("addListSessions - defaultItem height: ",UI.Ga(n)),this.ke=2*this.Pd+this.oc,console.log("BkHistoryListWindow - this._bufferZone: ",this.ke),this.V.setItemsMargin(this.oc),n=0;n<i.length&&n<this.Ic;++n){var s=this.Yy(i[n],this,t);s.setTag(n),this.V.pushBackCustomItem(s)}for(this.Hc=this.Pd*this.Ic+this.oc*(this.Ic-1),i.length>=this.yj&&this.V.forceDoLayout(),this.V.getInnerContainer().setContentSize(cc.size(this.V.getInnerContainerSize().width,e)),this.V.jumpToTop(),t=this.V.getItems(),console.log("BkHistoryListWindow - this.addListPlayers() - items.y = ",t.map((function(t){return t.getPosition().y}))),this.kb.addChild(this.V),this.scheduleUpdate(),n=0;n<i.length;++n)n<this.Ic&&(s=t[n],console.log("HistoryListWindows - items["+n+"] -  - this.getItemPositionYInView(item): "+this.Fi(s)),console.log("HistoryListWindows - items["+n+"] -  - item.getPosition().y: "+s.getPosition().y))},sj:function(t,e,i){console.log("BkHistoryListWindow - this.updateItem() - itemID: ",t),console.log("BkHistoryListWindow - this.updateItem() - templateID: ",e),(e=this.V.getItems()[e]).setTag(t),console.log("BkHistoryListWindow - this.updateItem() - itemTemplate: ",e),e=e.getChildren()[0],(t=this.Bg[t])&&(i.$g=t.$g,i.Ta=t.Ta),console.log("BkHistoryListWindow - this.updateItem() - sessionData: ",t),t&&e.TE(t)},onEnter:function(){if(cc.Node.prototype.onEnter.call(this),console.log("BkHistoryListWindow - this.onEnter() - this.listView: ",this.V),console.log("BkHistoryListWindow - this.onEnter() - this._sessions: ",this.Bg),null!=this.Bg&&this.Bg.length>this.Ic){var t=this.V.getItems();console.log("BkHistoryListWindow - this.onEnter() - items: ",t);for(var e=0;e<t.length;++e){var i=t[e];console.log("HistoryListWindows - onEnter - items["+e+"] -  - this.getItemPositionYInView(item): "+this.Fi(i)),console.log("HistoryListWindows - onEnter - items["+e+"] -  - item.getPosition().y: "+i.getPosition().y)}for(this.V.forceDoLayout(),this.V.getInnerContainer().setContentSize(cc.size(this.V.getInnerContainerSize().width,this.cp)),this.V.jumpToTop(),e=0;e<t.length;++e)i=t[e],console.log("HistoryListWindows - onEnter after jump- items["+e+"] -  - this.getItemPositionYInView(item): "+this.Fi(i)),console.log("HistoryListWindows - onEnter after jump - items["+e+"] -  - item.getPosition().y: "+i.getPosition().y)}},update:function(t){var e=this.Bg;if(!(e.length<this.Ic||(this.Uf+=t,this.Uf<this.Lm))){this.Uf=0,t=this.V.getContentSize().height;var i=this.V.getItems();this.V.getInnerContainer().getPosition();for(var n=0;n<i.length;n++){if(0==(r=i[n]).getPosition().y&&r.Ta!=e.length)return}var s=this.V.getInnerContainer().getPosition().y<this.Sf;for(n=0;n<this.Ic&&n<e.length;++n){var r=i[n],o=this.Fi(r,n);s?o<-1*this.ke&&r.getPosition().y+this.Hc<this.cp&&(o=r.getTag()-i.length,r.setPositionY(r.getPositionY()+this.Hc),this.sj(o,n,r)):o>this.ke+t&&0<=r.getPositionY()-this.Hc&&(r.setPositionY(r.getPositionY()-this.Hc),o=r.getTag()+i.length,this.sj(o,n,r))}this.Sf=this.V.getInnerContainer().getPosition().y}},ru:function(){return this.V.getItems().map((function(t){return t.getPositionY()}))},Dq:function(){return this.V.getItems().map((function(t){return t.getChildren()[0]})).map((function(t){return t.id}))},Fi:function(t){return t=t.getParent().convertToWorldSpaceAR(t.getPosition()),this.V.convertToNodeSpaceAR(t).y},ct:function(t){console.log("BkHistoryListWindow - empty list");var e=new BkLabel("","Arial",20);1==t?e.setString("Chức năng hiển thị các bàn chơi của bạn trong quá khứ. \nHãy chơi và phân tích lại các nước đi của bạn và đối thủ."):2==t&&e.setString("Khi bạn xem bàn hot, bạn có thể lưu lại nếu thấy thích. \nHãy xem các cao thủ chơi và xem lại để nâng cao trình độ."),e.Yb(GAME_SCALE),e.setTextColor(v),e.textAlign=cc.TEXT_ALIGNMENT_CENTER,t=this.Pa,e.x=t.x,e.y=UI.xf(t)-.6*UI.Ga(t),this.Hp=e,this.T(e)},CD:function(t){null!=t&&this.FN(t)},FN:function(t){var e=new BkPacket;e.lJ(t),console.log("CheckTime - send message at: ",(new Date).getTime()),BkConnectionManager.send(e),s()},Yy:function(t,e,i){return console.log("createPlayedSessionItem - session: ",JSON.stringify(t)),console.log("createPlayedSessionItem - gameId: ",i),console.log("createPlayedSessionItem - this.kindHistory: ",this.Lh),t=0==this.Lh?new BkPlayedSessionItem(t,e,i,this.kb):new BkViewedSessionItem(t,e,i,this.kb),(e=new ccui.Layout).setContentSize(t.getContentSize()),t.setPosition(.5*t.getContentSize().width,.5*t.getContentSize().height),e.addChild(t),e},Te:function(){console.log("BkHistoryListWindow - cleanGUI()"),null!=this.kb&&(console.log("BkHistoryListWindow - cleanGUI() - remove grid"),this.kb.removeSelf(),this.kb=null),null!=this.Hp&&(console.log("BkHistoryListWindow - cleanGUI() - remove grid"),this.removeChild(this.Hp,!0),this.Hp.setString(""))},onExit:function(){this._super(),BkLogicManager.S().jb(null)}}),BkHotTableWindow=BkTabWindow.extend({pf:["Xem cờ tướng","Xem cờ úp"],ki:null,rX:null,Ke:null,oi:null,ctor:function(){this._super("",isWebPlatform()?cc.size(600,620):cc.size(650*GAME_SCALE,1150*GAME_SCALE),this.pf.length,this.pf),isWebPlatform()?(this.Za.setVisible(!1),this.Zb.Ya(!0),this.Zb.x+=15):this.Ob("title_wd_banHot.png"),Jl();var t=p(D.MB),e=1;cc.isNumber(t)&&(e=t),this.nM(e),n.rb(yc)},Rn:function(){this.ii=new cc.DrawNode,this.T(this.ii,0,0),this.va=[];var t=new BkButton("banhot_CT.png","banhot_CT_Press.png","banhot_CT.png","banhot_CT.png",ccui.Widget.PLIST_TEXTURE);if(t.setScale(GAME_SCALE),this.Gh(t,1),this.va.push(t),(t=new BkButton("banhot_CU_deselect.png","banhot_CU_deselect_Press.png","banhot_CU_deselect.png","banhot_CU_deselect.png",ccui.Widget.PLIST_TEXTURE)).setScale(GAME_SCALE),this.Gh(t,2),this.va.push(t),this.xh(),null!=this.of)for(t=0;t<this.of.length;t++){var e=this.va[t];0==t?this.gf(e,!0):this.gf(e,!1)}else console.log("Error: Must addTabChangeEventListener to callback handle")},xh:function(){var t=this.va[0],e=this.va[1];t.x=.3*this.Q.width,t.y=.89*this.Q.height,e.x=.7*this.Q.width,e.y=t.y,isWebPlatform()&&(t.x=.34*this.Q.width,t.y+=30,e.x=.65*this.Q.width,e.y=t.y)},fn:function(t){var e=this.va[0],i=this.va[1];1==t?(e.loadTextures("banhot_CT.png","banhot_CT_Press.png","banhot_CT.png","banhot_CT.png",ccui.Widget.PLIST_TEXTURE),i.loadTextures("banhot_CU_deselect.png","banhot_CU_deselect_Press.png","banhot_CU_deselect.png","banhot_CU_deselect.png",ccui.Widget.PLIST_TEXTURE)):(e.loadTextures("banhot_CT_deselect.png","banhot_CT_deselect_Press.png","banhot_CT_deselect.png","banhot_CT_deselect.png",ccui.Widget.PLIST_TEXTURE),i.loadTextures("banhot_CU.png","banhot_CU_Press.png","banhot_CU.png","banhot_CU.png",ccui.Widget.PLIST_TEXTURE))},nM:function(t){this.Qo(!1),this.Cc(!0),this.Lp(this.lj,this,t)},Fb:function(){BkLogicManager.S().jb(this)},G6:function(t){var e={};e.ya=t.ya,e.Jf=[];var i=4;t.Jf.length<i&&(i=t.Jf.length);for(var n=0;n<i;n++)e.Jf.push(t.Jf[n]);return e},ud:function(e,i){if(logMessage("Hot Table Load completed"),i===Ei)this.ki=e,this.fK();t()},fK:function(){logMessage("Game Id: "+this.ki.ya+"Num of hot table: "+this.ki.Jf.length),null!=this.Ke&&(this.Ke.removeFromParent(),this.Ke=null),this.Ke=new BkSprite;var t=570*GAME_SCALE,e=460*GAME_SCALE,i=8;if(isWebPlatform()||(t=590*GAME_SCALE,e=.7*this.Q.height,i=0),this.Ke.setContentSize(t,e),0==this.ki.Jf.length)(t=new BkLabel("","Arial",30)).Yb(GAME_SCALE),t.setTextColor(v),t.setString("Hiện tại hệ thống không có bàn hot."),t.y=this.Ke.getContentSize().height/2,t.x=this.Ke.getContentSize().width/2,this.Ke.addChild(t,0);else{for(this.V=new Cn,this.V.setDirection(ccui.ScrollView.DIR_VERTICAL),this.V.setTouchEnabled(!0),this.V.setBounceEnabled(!0),this.V.setContentSize(cc.size(t,e)),this.V.setPosition(0,0),this.V.setGravity(ccui.ListView.GRAVITY_CENTER_VERTICAL),this.V.setClippingType(ccui.Layout.CLIPPING_SCISSOR),t=0;t<this.ki.Jf.length;t++)e=this.jJ(this.ki.Jf[t]),this.V.pushBackCustomItem(e);this.Ke.addChild(this.V)}if(this.Ke.x=.505*this.Q.width-i,i=this.va[0],this.Ke.y=i.y-.53*i.getBoundingBox().height-this.Ke.getContentSize().height/2,this.T(this.Ke,0,0),!isWebPlatform()&&null==this.oi){this.oi=new BkButton("btnDong.png","btnDongPress.png","btnDong.png","btnDong.png",ccui.Widget.PLIST_TEXTURE),this.oi.setScale(GAME_SCALE),this.oi.x=this.Q.width/2,this.oi.y=1.1*this.oi.getBoundingBox().height,this.T(this.oi);var n=this;this.oi.addClickEventListener((function(){n.removeSelf()}))}},P1:function(){for(var t=this.ki.Jf.length,e=0;e<t;e++){var i=this.ki.Jf[e];logMessage(e+" : "+i.Di+" - "+i.sq)}},jJ:function(t){null==t?logMessage("Data is null"):logMessage("Data: "+t.Di);var e=new BKHotTableItem(t,this),i=this;e.JG((function(){i.JL(t)}));var n=new ccui.Layout;n.setContentSize(e.getContentSize());var s=.45;return isWebPlatform()&&(s=.5),e.setPosition(this.Q.width*s,.5*e.getContentSize().height),n.addChild(e),n},JL:function(t){logMessage("clicked to table"+t.Di);var e=new BkPacket;e.tJ(t.ya,t.rS,t.RU),BkConnectionManager.send(e)},WB:function(t){logMessage("Load hot game"),this.Fb();var e=new BkPacket;e.Ty(t),BkConnectionManager.send(e),s()},lj:function(t,e){u(D.MB,e),this.GN(e)},GN:function(t){1==t?this.WB(K):this.WB(L)}}),FRIEND_MAX_ROW_NUM=10,STATUS_FRIEND_WAITING=2,STATUS_BEGIN_CREATE_TABLE=4,BkFriendsWindow=BkTabWindow.extend({le:null,Qa:null,pf:["Đang theo dõi","Tìm bạn"],Dd:null,FG:null,$k:null,$x:null,Zx:!1,tb:null,Us:"",wd:null,xd:null,Fg:null,ld:null,av:!0,ctor:function(){this.av=!0,this._super("",isWebPlatform()?cc.size(600,620):cc.size(620*GAME_SCALE,1100*GAME_SCALE),this.pf.length,this.pf),isWebPlatform()?(this.Za.setVisible(!1),this.Zb.Ya(!0),this.Zb.x+=15):this.Ob("title_wd_banbe.png"),this.Ju(),Jl(),this.Lp(this.lj,this,1),n.rb(wc)},Rn:function(){this.va=[];var t=new BkButton("btnBanBe.png","btnBanbeSelectPress.png","btnBanBe.png","btnBanBe.png",ccui.Widget.PLIST_TEXTURE);if(t.setScale(GAME_SCALE),this.Gh(t,1),this.va.push(t),(t=new BkButton("btnTinBanDeselect.png","btnTimBanDeselectPress.png","btnTinBanDeselect.png","btnTinBanDeselect.png",ccui.Widget.PLIST_TEXTURE)).setScale(GAME_SCALE),this.Gh(t,2),this.va.push(t),this.xh(),null!=this.of)for(t=0;t<this.of.length;t++){var e=this.va[t];0==t?this.gf(e,!0):this.gf(e,!1)}else console.log("Error: Must addTabChangeEventListener to callback handle")},xh:function(){var t=this.va[0],e=this.va[1];t.x=.3*this.Q.width,t.y=.9*this.Q.height,e.x=.7*this.Q.width,e.y=t.y,isWebPlatform()&&(t.y+=20,e.y=t.y)},fn:function(t){var e=this.va[0],i=this.va[1];1==t?(e.loadTextures("btnBanBe.png","btnBanbeSelectPress.png","btnBanBe.png","btnBanBe.png",ccui.Widget.PLIST_TEXTURE),i.loadTextures("btnTinBanDeselect.png","btnTimBanDeselectPress.png","btnTinBanDeselect.png","btnTinBanDeselect.png",ccui.Widget.PLIST_TEXTURE)):(e.loadTextures("btnBanBeDeselect.png","btnBanBeDeselectPress.png","btnBanBeDeselect.png","btnBanBeDeselect.png",ccui.Widget.PLIST_TEXTURE),i.loadTextures("btnTimBan.png","btnTimBanSelectPress.png","btnTimBan.png","btnTimBan.png",ccui.Widget.PLIST_TEXTURE))},Ju:function(){this.Cc(!0),this.wd=new BkButton("btnRefresh.png","btnRefreshPress.png","btnRefresh.png","btnRefresh.png",ccui.Widget.PLIST_TEXTURE),this.wd.setScale(GAME_SCALE),this.wd.x=.9*this.Q.width,this.wd.y=.83*this.Q.height;var t=this.va[1],e=new BkSprite("#btnTimBan.png");this.wd.y=t.y-e.getContentSize().height*GAME_SCALE*.5-this.wd.getBoundingBox().height/2,this.wd.addTouchEventListener((function(){2e3>J()-this.wd.Kb?logMessage("click 2 lan trong 1 sec -> don't process action"):(this.wd.Kb=J(),this.Ul())}),this),isWebPlatform()&&(this.wd.x=this.Q.width/2,this.wd.y=.94*this.Q.height),this.T(this.wd,WD_ZORDER_TOP)},Fb:function(){BkLogicManager.S().jb(this)},ud:function(e,i){switch(i){case Pf:if(this.Zx=!0,this.Dd=e,this.av&&(this.av=!1,0==this.Dd.length))return logMessage("friendlist trong -> default show tab 2"),t(),void this.Ct(2);this.Ut();break;case Wf:this.gK(e);break;case jh:showToastMessage("Bạn và "+this.$k.userName+" đã trở thành bạn bè.",cc.director.getWinSize().width/2,cc.director.getWinSize().height/2),this.ix(!0);break;case ih:showToastMessage("Đã xóa "+e+" khỏi danh sách theo dõi.",cc.director.getWinSize().width/2,cc.director.getWinSize().height/2),this.$x?this.PR():this.ix(!1);break;case th:this.ix(!0),showToastMessage("Bạn đã bắt đầu theo dõi: "+e,cc.director.getWinSize().width/2,cc.director.getWinSize().height/2);break;case If:case Jf:this.hp(e);break;case Hf:this.sV(e)}t()},sV:function(){logMessage("updateFacebokLinkPlayerAccHasRantUserFriend"),null!=this.Fg&&this.Fg.Ya(!1),null!=this.ld&&(this.ld.x=.5*this.Q.width),this.Ul()},Ut:function(){this.Te(),this.zt(),1==this.nc&&this.Vj(this.Dd,this.nc)},Ul:function(){logMessage("loadFriendsList"),this.Fb();var t=new BkPacket;t.yF(),BkConnectionManager.send(t),s()},lj:function(t,e){logMessage("selectedTabEvent: "+e),this.sn(e)},sn:function(t){this.Te(),this.zt(),1==t?(isWebPlatform()?(this.wd.Ya(!1),this.Ul()):(this.wd.Ya(!0),this.Zx?this.Vj(this.Dd,this.nc):this.Ul()),this.Lw(!1)):2==t&&(this.wd.Ya(!1),this.LA(!0),this.EA(),this.lM()),this.Ac.getBoundingBox(),this.va[0].getBoundingBox()},pd:null,kM:function(){if(console.log("initGuidleTimBanLayer"),null==this.pd){console.log("initGuidleTimBanLayer"),this.pd=new BkSprite,this.pd.setContentSize(630*GAME_SCALE,740*GAME_SCALE),this.pd.x=this.Q.width/2,this.pd.y=this.pd.getContentSize().height/2+.12*this.Q.height,this.T(this.pd);var t=18;isWebPlatform()||(t=30);var e=.04*this.pd.getContentSize().width,i=new BkLabel("Giới thiệu về chức năng bạn bè: ","",t);i.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),i.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT),i.setTextColor(v),i.boundingWidth=.95*this.Q.width/GAME_SCALE,isWebPlatform()||i.setScale(GAME_SCALE),i.x=0,i.y=0,this.pd.addChild(i);var n=.8*i.getBoundingBox().height,s=.4*i.getBoundingBox().height,r=new BkLabel("1. Tìm bạn và kết bạn theo tên.","",t);r.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),r.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT),r.setTextColor(v),r.boundingWidth=.95*this.Q.width/GAME_SCALE,isWebPlatform()||r.setScale(GAME_SCALE),r.x=e+.5*r.getBoundingBox().width,r.y=i.y-.5*i.getBoundingBox().height-.5*r.getBoundingBox().height-n,this.pd.addChild(r),(i=new BkLabel("2. Mời bạn chơi hoặc vào xem khi bạn bè online.","",t)).setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),i.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT),i.setTextColor(v),i.boundingWidth=.95*this.Q.width/GAME_SCALE,isWebPlatform()||i.setScale(GAME_SCALE),i.x=e+.5*i.getBoundingBox().width,i.y=r.y-.5*r.getBoundingBox().height-.5*i.getBoundingBox().height-s,this.pd.addChild(i),(r=new BkLabel("3. Tự động thêm bạn bè Facebook thành bạn trong game.","",t)).setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),r.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT),r.setTextColor(v),r.boundingWidth=.95*this.Q.width/GAME_SCALE,isWebPlatform()||r.setScale(GAME_SCALE),r.x=e+.5*r.getBoundingBox().width,r.y=i.y-.5*i.getBoundingBox().height-.5*r.getBoundingBox().height-s,this.pd.addChild(r),(t=new BkLabel('Chú ý: để xem hướng dẫn chi tiết vui lòng click button "Hướng dẫn"',"",t,!1,!0)).setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),t.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT),t.setTextColor(v),t.boundingWidth=.95*this.Q.width/GAME_SCALE,isWebPlatform()||t.setScale(GAME_SCALE),t.x=e+.5*t.getBoundingBox().width,t.y=r.y-.5*r.getBoundingBox().height-.5*t.getBoundingBox().height-s,this.pd.addChild(t),(e=new BkButton(x,la,x,x,ccui.Widget.PLIST_TEXTURE)).setTitleText("Hướng dẫn"),e.setTitleFontName(ma()),e.setTitleFontSize(31),e.setTitleColor(cc.color(71,44,27)),e.getTitleRenderer().y+=.1*e.getBoundingBox().height,e.setScale(GAME_SCALE),e.x=.5*this.pd.getContentSize().width,e.y=t.y-t.getBoundingBox().height-.5*e.getBoundingBox().height,this.pd.addChild(e);var o=this;e.addClickEventListener((function(){o.xO()}))}},xO:function(){logMessage("onClickHuongDanChiTiet"),Wa($i+"huong-dan-ban-be","Hướng dẫn chi tiết")},Lw:function(t){null!=this.pd&&this.pd.setVisible(t)},lM:function(){isWebPlatform()||isFBInstantGame()||(this.kM(),this.Lw(!0))},LA:function(){this.zt(),this.le=new BkSprite,this.T(this.le,0,0);var t=new cc.DrawNode,e=cc.color(64,54,37);t.drawRect(cc.p(0,0),cc.p(595,1),e,1,e),t.x=0,t.y=0;t=16;var i=18;e=.6;isWebPlatform()||(i=t=30,e=GAME_SCALE),(t=new BkLabel("Tên người chơi:","Arial",t)).x=t.getContentSize().width/2+80,t.y=t.getContentSize().height/2+12,this.le.addChild(t);var n=res.Vt,s=cc.size(205,30);isWebPlatform()||(s=cc.size(205,46)),this.tb=createEditBox(s,n),this.tb.x=t.x+t.getContentSize().width/2+this.tb.getContentSize().width/2+5,this.tb.y=t.y-.5,this.tb.setFontSize(i),""!=this.Us&&this.tb.setString(this.Us),this.tb.setFontColor(Ej),this.tb.setMaxLength(20),this.le.addChild(this.tb),this.tb.setFocus();var r=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyReleased:function(t){t==cc.KEY.enter&&r.mz(r.tb.getString())}},this.tb),(i=createBkButtonPlist("btnTimKiem.png","btnTimKiemPress.png","btnTimKiem.png","btnTimKiem.png")).setScale(GAME_SCALE),t.setScale(e),this.tb.setScale(GAME_SCALE),t.setTextColor(v),i.x=this.tb.x+this.tb.getContentSize().width/2+i.getContentSize().width/2+15,i.y=this.tb.y,i.addTouchEventListener((function(t,e){e==ccui.Widget.TOUCH_ENDED&&this.mz(this.tb.getString())}),this),this.le.addChild(i),this.le.x=22,this.le.y=this.Q.height/1.2,e=i.getBoundingBox().width+t.getBoundingBox().width+this.tb.getBoundingBox().width,n=5*GAME_SCALE,this.le.x=(this.Q.width-e-2*n)/2,t.x=t.getBoundingBox().width/2,this.tb.x=t.x+t.getBoundingBox().width/2+this.tb.getBoundingBox().width/2+n,i.x=this.tb.x+this.tb.getBoundingBox().width/2+i.getBoundingBox().width/2+n,this.le.y=.81*this.Q.height,isWebPlatform()&&(t.setVisible(!1),this.tb.setPlaceHolder("Nhập tên người"),this.tb.setPlaceholderFontColor(Ej),this.tb.x=t.x+t.getContentSize().width/2+this.tb.getContentSize().width/2-40,i.x=this.tb.x+this.tb.getContentSize().width/2+i.getContentSize().width/2+15)},Vj:function(t,e){this.Qa=new BkSprite;var i=480,n=.9;2==e&&(i=420,n=.8);var s=.62*cc.winSize.width;if(isWebPlatform()||(s=.95*this.Q.width,i=760*GAME_SCALE,1==e&&(i=780*GAME_SCALE,n=.82)),this.Qa.setContentSize(s,i),null!=t&&0<t.length){for(t.sort(this.AU),this.V=new Cn,this.V.setDirection(ccui.ScrollView.DIR_VERTICAL),this.V.setTouchEnabled(!0),this.V.setBounceEnabled(!0),this.V.setContentSize(cc.size(this.Qa.getContentSize().width,this.Qa.getContentSize().height)),this.V.setPosition(0,0),this.V.setGravity(ccui.ListView.GRAVITY_CENTER_VERTICAL),i=0;i<t.length;i++)s=this.Ht(t[i],this),this.V.pushBackCustomItem(s);this.Qa.addChild(this.V)}else i=30,isWebPlatform()&&(i=20),i=new BkLabel("","Arial",i),1==e?i.setString("Bạn hiện tại chưa có bạn bè nào."):2==e&&i.setString("Không có kết quả, xin hãy thử lại."),i.y=this.Qa.getContentSize().height/1.5,i.x=this.Qa.getContentSize().width/2,this.Qa.addChild(i),i.setTextColor(v),i.Yb(GAME_SCALE),i.y=this.Qa.getContentSize().height/2;this.Qa.x=this.Q.width/2,this.Qa.y=this.Q.height*n-this.Qa.getContentSize().height/2,this.EA(),this.T(this.Qa,0,0)},EA:function(){var t=this;if(!isWebPlatform()&&(logMessage("init btn Moiban"),null==this.ld&&(this.ld=createBkButtonPlist("btn_moi_ban_FB.png","btn_moi_ban_FB_press.png","btn_moi_ban_FB.png","btn_moi_ban_FB.png"),this.ld.setScale(GAME_SCALE),this.ld.x=this.Q.width/2,this.ld.y=.06*this.Q.height,this.T(this.ld),this.ld.addClickEventListener((function(){t.rC()}))),this.ld.Ya(!0),!isFBInstantGame()&&!n.wu())){var e=.2*this.Q.width;null==this.Fg&&(this.Fg=createBkButtonPlist("btnFriendFB.png","btnFriendFBPress.png","btnFriendFB.png","btnFriendFB.png"),this.Fg.setScale(GAME_SCALE),this.Fg.x=this.Q.width/2+e,this.Fg.y=.06*this.Q.height,this.T(this.Fg),this.Fg.addClickEventListener((function(){t.Fb(),n.SJ()}))),this.Fg.Ya(!0),this.ld.x=this.Q.width/2-e}},rC:function(){BkLogicManager.S().St()},Q5:function(t,e,i){if(isWebPlatform()){var n=new BkLabel("Hãy mời thêm bạn trên Facebook để chơi cùng!","Arial",20);n.x=e,n.y=i-120,n.setTextColor(v),t.addChild(n),(i=createBkButtonPlist("btn_moi_ban_FB.png","btn_moi_ban_FB_press.png","btn_moi_ban_FB.png","btn_moi_ban_FB.png")).setPosition(e,n.y-40),i.addClickEventListener((function(){E.ly()})),t.addChild(i)}},Ht:function(t,e){var i=new BkFriendItem(t,e.nc,e),n=new ccui.Layout;return n.setContentSize(i.getContentSize()),i.setPosition(.5*this.Q.width,.5*i.getContentSize().height),n.addChild(i),n.$g=t.userName,n},HY:function(t,e){return null==t?null:new BkFriendItem(t,e.nc,e)},xK:function(t){null!=t&&(this.Kw(t),(t=new BkPlayerInfo(t.userName)).Ab(this),t.Oa())},mz:function(t){if(this.Lw(!1),2e3>J()-this.wd.Kb)logMessage("click 2 lan trong 1 sec -> don't process action");else if(this.wd.Kb=J(),t=(t=t.replace(/\s/g,"")).replace(/\n/g,""),isUserNameValidate(t)){this.Us=t,this.Fb();var e=new BkPacket;e.QF(t),BkConnectionManager.send(e),s()}else showToastMessage("Vui lòng nhập ít nhất 4 ký tự và chỉ chứa chữ cái , số hoặc dấu _",null,null,null,300)},Wg:function(t){if(1>BkGlobal.P.pb())showPopupMessageWith(jn+Yl);else{this.Fb(),null!=this.xd&&this.xd.removeSelf(),this.xd=new BkSelectGameForFriend(t),this.xd.Ab(this),this.xd.Oa();var e=this;e.setVisible(!1),this.xd.df((function(){e.setVisible(!0),1==e.nc&&e.Ul()}))}},hp:function(t){this.xd&&this.xd.YE(t)},gK:function(t){this.LA(),this.Te(),this.Vj(t,this.nc)},Te:function(){logMessage("cleanGUI"),null!=this.Qa&&(this.Qa.removeSelf(),this.Qa=null)},zt:function(){logMessage("cleanSearchGUI"),null!=this.le&&(this.le.removeFromParent(),this.le=null)},AU:function(t,e){var i=t.userName.toLowerCase(),n=e.userName.toLowerCase();return t.Ie||e.Ie?0:i.localeCompare(n)},$M:function(t){if(null!=this.Dd)for(var e=0;e<this.Dd.length;e++){var i=this.Dd[e];if(null!=i&&i.userName.toLowerCase()==t.toLowerCase())return!0}return!1},Kw:function(t,e){this.$k=t,this.$x=e},ix:function(t){if(t){t=this.Dd.slice();for(var e=!1,i=0;i<t.length;i++){var n=this.Dd[i];this.$k.userName.toLowerCase()==n.userName.toLowerCase()&&(e=!0)}e||this.Dd.push(this.$k)}},J3:function(){for(var t=this.Dd.slice(),e=0;e<t.length;e++)if(this.$k.userName.toLowerCase()==t[e].userName.toLowerCase()){this.Dd.splice(e,1);break}this.Ut()},PR:function(){for(var t=this.Dd.slice(),e=0;e<t.length;e++)if(this.$k.userName.toLowerCase()==t[e].userName.toLowerCase()){this.Dd.splice(e,1);break}this.Ut()},onExit:function(){this._super(),BkLogicManager.S().jb(null)}}),BkChangePasswordWindow=BkBaseChessWindow.extend({Bb:null,Bt:cc.color(71,44,27),ctor:function(){this.Zg="playerId",this.pj="tempPassword",this.Wj="expiredInMinutes",this.tj="urlInfor";var t=isWebPlatform()?cc.size(610,620):cc.size(620*GAME_SCALE,662*GAME_SCALE);this._super("",t),this.Rd=this.Q.width,this.Jc=this.Q.height,this.Cc(!0),this.Ob("title_wd_thong_tin_tk.png",3,.7*GAME_SCALE),BkLogicManager.S().jb(this),this.pw(),console.log("BkChangePasswordWindow - tempPassword: "+this.pj),console.log("BkChangePasswordWindow - playerId: "+this.Zg)},pw:function(){s();var t=new BkPacket;t.xx(),BkConnectionManager.send(t)},hg:function(){var t=this.Rd/2,e=23,i=25;isWebPlatform()||(e=38,i=42);var n=cc.color(66,33,24),s=[new BkLabelItem("Tên tài khoản của bạn và mật khẩu để đăng",e,n,1,!1),new BkLabelItem("nhập trên thiết bị khác.",e,n,2,!1,!1,.5)],r=.15*this.Rd;(s=new BkLabelSprite(s)).setScale(GAME_SCALE),s.x=r,s.y=.92*this.Jc-UI.Ga(s),this.T(s);var o=new cc.Scale9Sprite("name_frame.png");o.width=.75*this.Rd,o.height=.17*this.Rd,o.x=.5*this.Rd,o.y=.65*this.Jc,this.T(o);s=.25*this.Rd;var a=cc.color(254,232,203),c=cc.color(252,219,86);i=[new BkLabelItem("Tên tài khoản: ",e,a,1,!1),new BkLabelItem(this.Zg,i,c,1,!0),new BkLabelItem("Mật khẩu: ",e,a,2,!1,!1,.5),new BkLabelItem(this.pj,i,c,2,!0)];(i=new BkLabelSprite(i)).setScale(GAME_SCALE),i.x=o.x-.5*UI.qa(i),i.y=o.y,this.T(i),i=cc.color(211,36,2),e=[new BkLabelItem("Mật khẩu sẽ hết hạn sau ",e,n,1,!1),new BkLabelItem(this.Wj+" phút",e,i,1,!0),new BkLabelItem(" và chỉ được ",e,n,1,!1),new BkLabelItem("sử dụng ",e,n,2,!1,!1,.5),new BkLabelItem("1 lần.",e,i,2,!0),new BkLabelItem("Lưu ý: không chia sẻ thông tin này cho bất kỳ ai",21,i,3,!1,!0),new BkLabelItem("khác, kể cả Admin Ziga.",21,i,4,!1,!0,.5),new BkLabelItem("Ziga sẽ không chịu trách nhiệm nếu bạn để mất",21,n,5,!1),new BkLabelItem("tài khoản.",21,n,6,!1,!1,.5)],(e=new BkLabelSprite(e)).setScale(GAME_SCALE),e.x=r,e.y=.47*this.Jc,this.T(e),r=new BkButton(x,la,x,x,ccui.Widget.PLIST_TEXTURE),(r=new BkButton("btnHuongDan.png","btnHuongDanPress.png","btnHuongDan.png","btnHuongDan.png",ccui.Widget.PLIST_TEXTURE)).setScale(GAME_SCALE),r.x=t-s,r.y=1.2*UI.Ga(r),this.T(r,1,0),this.Nl=new Date(0);var h=this;r.addClickEventListener((function(){Wa(h.tj,"Hướng dẫn liên kết tài khoản")})),(e=new BkButton("btnDong.png","btnDongPress.png","btnDong.png","btnDong.png",ccui.Widget.PLIST_TEXTURE)).setScale(GAME_SCALE),e.x=t+s,e.y=r.y,this.T(e,1,0),e.addClickEventListener((function(){h.removeSelf()}))},zB:function(){if(this.Nl){var t=new Date-this.Nl;return console.log("isSpamClick - distance = "+t),1e3>t}return!1},ud:function(e,i){if(console.log("BkChangePasswordWindow - this.onLoadComplete - o: "+e),t(),BkLogicManager.S().jb(null),i===Oh)this.Zg=e.Zg,this.pj=e.pj,this.Wj=e.Wj,this.tj=e.tj,this.hg()}}),BkLoginOtherAccountWindow=BkBaseChessWindow.extend({fa:null,Bt:cc.color(71,44,27),Os:6,Ns:20,Ps:6,ctor:function(t){var e=isWebPlatform()?cc.size(610,620):cc.size(620*GAME_SCALE,600*GAME_SCALE);this._super("",e),this.Cc(!0),this.Ob("title_wd_log_in.png",3,.8*GAME_SCALE),this.Rd=this.Q.width,this.Jc=this.Q.height,this.hg(),t&&(console.log("BkLoginOtherAccountWindow - parentNode.y: "+t.y),this.y=.5*(t.Q.height-this.Jc)+t.y)},hg:function(){var t=.5*this.Q.width,e=cc.color(66,33,24),i=.165*this.Rd;e=[new BkLabelItem("Bạn đã có tài khoản Ziga, nhập tên",26,e,1,!1),new BkLabelItem("tài khoản và mật khẩu.",26,e,2,!1)];(e=new BkLabelSprite(e)).setScale(GAME_SCALE),e.x=i,e.y=.9*this.Jc-UI.Ga(e),this.T(e);e=.73*this.Q.width;var n=.08*this.Q.height;this.fa=createEditBox(cc.size(e,n),"changename.png"),this.fa.setMaxLength(20),this.fa.x=i+.5*UI.qa(this.fa),console.log("BkLoginOtherAccountWindow - this.txtUser.width: "+this.fa.width),console.log("BkLoginOtherAccountWindow - UI.getRealWidth(this.txtUser): "+UI.qa(this.fa)),this.fa.y=.63*this.Jc,this.fa.setPlaceHolder("Tên tài khoản");var s=cc.color(167,142,112),r=28*GAME_SCALE,o=Ej;this.fa.setPlaceholderFontColor(s),this.fa.setFontColor(o),this.fa.setFontSize(r),this.T(this.fa,1,0),this.Mm(this.fa),this.Bb=createEditBox(cc.size(e,n),"changename.png"),this.Bb.setMaxLength(20),this.Bb.x=this.fa.x,this.Bb.y=this.fa.y-1.2*UI.Ga(this.Bb),this.Bb.setPlaceHolder("Mật khẩu"),o=Ej,this.Bb.setPlaceholderFontColor(s),this.Bb.setFontColor(o),this.Bb.setFontSize(r),this.T(this.Bb),this.Mm(this.Bb),e=cc.color(211,36,2),e=[new BkLabelItem("* Xem THÔNG TIN TÀI KHOẢN trên thiết bị cũ.",22,e,1,!1,!0),new BkLabelItem("* Lưu ý: đăng nhập tài khoản cũ sẽ làm mất tài",22,e,2,!1,!0),new BkLabelItem("khoản hiện tại.",22,e,3,!1,!0)],(e=new BkLabelSprite(e)).setScale(GAME_SCALE),e.x=i,e.y=.2*this.Jc+UI.Ga(e),this.T(e);i=.25*this.Q.width;var a=this;(e=new BkButton("btnLogin.png",qa,"btnLogin.png","btnLogin.png",ccui.Widget.PLIST_TEXTURE)).Yb(GAME_SCALE),e.x=t-i,e.y=1.2*UI.Ga(e),this.T(e,1,0),this.Nl=new Date(0),e.addClickEventListener((function(){if(a.zB())console.log("isSpamClick");else{a.Nl=new Date;var t=a.fa.getString(),e=a.Bb.getString();a.yI(t,e)&&a.eS(t,e)}})),(n=createBkButtonPlist("btnDong.png","btnDongPress.png","btnDong.png","btnDong.png")).setScale(GAME_SCALE),n.x=t+i,n.y=e.y,this.T(n,1,0),n.addClickEventListener((function(){a.removeSelf()}))},yI:function(t,e){if(t.length<this.Os)return showToastMessage("Tài khoản tối thiểu "+this.Os+" ký tự."),!1;if(t.length>this.Ns)return showToastMessage("Tài khoản tối đa "+this.Ns+" ký tự."),!1;if(e.length!=this.Ps)return showToastMessage("Mật khẩu có độ dài "+this.Ps+" ký tự."),!1;for(var i=!1,n=0;n<e.length;n++)if(isNaN(parseInt(e[n]))){i=!0;break}return!i||(showToastMessage("Mật khẩu chỉ bao gồm các ký tự số."),!1)},zB:function(){if(this.Nl){var t=new Date-this.Nl;return console.log("isSpamClick - distance = "+t),1e3>t}return!1},eS:function(t,e){logMessage("requestLoginOtherAccount - userName: "+t+" - password: "+e),s(),this.Fb();var i=new BkPacket;i.LF(t,e),BkConnectionManager.send(i)},Fb:function(){BkLogicManager.S().jb(this)},ud:function(e){if(t(),BkLogicManager.S().jb(null),e===Fk)this.removeSelf()}}),BkLienKetTkWindow=BkBaseChessWindow.extend({fa:null,Bt:cc.color(71,44,27),Os:6,Ns:20,Ps:6,ctor:function(t){var e=isWebPlatform()?cc.size(610,620):cc.size(650*GAME_SCALE,900*GAME_SCALE);this._super("",e),this.Cc(!0),this.Ob("title_wd_lien_ket_tk.png",3,.7*GAME_SCALE),this.Rd=this.Q.width,this.Jc=this.Q.height,BkLogicManager.S().jb(this),this.pw(),t&&(this.y=t.Q?.5*(t.Q.height-this.Jc)+t.y:0)},pw:function(){s();var t=new BkPacket;t.xx(),BkConnectionManager.send(t)},hg:function(){var t=new cc.Scale9Sprite("borderThongTinTk.png");t.width=.9*this.Rd,t.height=.3*this.Jc,t.x=.5*this.Rd,t.y=.75*this.Jc,this.T(t);var e=23*GAME_SCALE,i=new BkLabel('Bạn muốn đăng nhập tài khoản này trên thiết\nbị khác, nhấn nút "THÔNG TIN TÀI KHOẢN"',"",e);i.setTextColor(v),i.x=t.x,i.y=t.y+.2*UI.Ga(t),this.T(i),(i=new BkButton("btnThongTinTk.png","btnThongTinTkPress.png","btnThongTinTk.png","btnThongTinTk.png",ccui.Widget.PLIST_TEXTURE)).setScale(.7*GAME_SCALE),i.x=t.x,i.y=UI.Bh(t)+.65*UI.Ga(i);var n=this;i.addClickEventListener((function(){n.sU()})),this.T(i),(t=new cc.Scale9Sprite("borderThongTinTk.png")).width=.9*this.Rd,t.height=.42*this.Jc,t.x=.5*this.Rd,t.y=.37*this.Jc,this.T(t),(i=new BkLabel('Bạn muốn đăng nhập tài khoản cũ trên thiết\nbị này: \n- Bước 1: xem THÔNG TIN TÀI KHOẢN trên \nthiết bị cũ \n- Bước 2: nhấn nút "ĐĂNG NHẬP"',"",e)).setTextColor(v),i.x=t.x,i.y=t.y+.15*UI.Ga(t),this.T(i),(e=new BkButton("btnLoginOtherAccount.png","btnLoginOtherAccountPress.png","btnLoginOtherAccount.png","btnLoginOtherAccount.png",ccui.Widget.PLIST_TEXTURE)).setScale(.6*GAME_SCALE),e.x=t.x,e.y=UI.Bh(t)+.65*UI.Ga(e),n=this,e.addClickEventListener((function(){n.cU()})),this.T(e),(e=new BkButton("btnHuongDan.png","btnHuongDanPress.png","btnHuongDan.png","btnHuongDan.png",ccui.Widget.PLIST_TEXTURE)).Yb(GAME_SCALE),e.x=.25*this.Rd,e.y=1.15*UI.Ga(e),this.T(e),e.addClickEventListener((function(){Wa(n.tj,"Hướng dẫn liên kết tài khoản")})),(t=createBkButtonPlist("btnDong.png","btnDongPress.png","btnDong.png","btnDong.png")).setScale(GAME_SCALE),t.x=.75*this.Rd,t.y=e.y,this.T(t,1,0),t.addClickEventListener((function(){n.removeSelf()}))},sU:function(){var t=new BkChangePasswordWindow(this);t.Ab(this),t.Oa()},cU:function(){console.log("showLoginWindow - BkLoginOtherAccountWindow");var t=new BkLoginOtherAccountWindow(this);t.Ab(this),t.Oa()},Fb:function(){BkLogicManager.S().jb(this)},ud:function(e,i){if(console.log("BkLienKetTkWindow - this.onLoadComplete - o: "+e),t(),BkLogicManager.S().jb(null),i===Oh)this.Zg=e.Zg,this.pj=e.pj,this.Wj=e.Wj,this.tj=e.tj,this.hg()}}),BkTopPlayersWindow=BkTabWindow.extend({Ic:9,Lm:.01,Sf:0,al:99,oc:4,Hc:0,ke:50,kb:null,pf:["Cờ Tướng","Cờ Úp"],Km:null,tb:null,XM:!0,ctor:function(){var t=t="";this._super(t,isWebPlatform()?cc.size(600*GAME_SCALE,620*GAME_SCALE):cc.size(620*GAME_SCALE,1100*GAME_SCALE),this.pf.length,this.pf),this.Ob("title_wd_xephang.png"),this.Lp(this.lj,this,1),logMessage("BkTopPlayersWindow - this.ctor() - after addTabChangeEventListener"),this.Yr([])},Ob:function(t,e){e=void 0===e?0:e;var i=new BkSprite("#"+t);i.setScale(GAME_SCALE),i.x=this.Za.x,i.y=this.Za.y+e*GAME_SCALE,this.lb.addChild(i,WD_ZORDER_BODY)},onEnter:function(){if(cc.Node.prototype.onEnter.call(this),console.log("BkTopPlayersWindow - this.onEnter() - this.listView: ",this.V),this.V){console.log("BkTopPlayersWindow - this.onEnter()"),this.V.forceDoLayout();var t=this.Pd*this.al+(this.al-1)*this.oc;this.V.getInnerContainer().setContentSize(cc.size(this.V.getInnerContainerSize().width,t)),this.V.jumpToTop()}},Iq:function(){var t,e=this.Q.width,i=GAME_SCALE;isWebPlatform()&&(500>this.Q.width?i=.6:600>this.Q.width&&(i=.9)),t=cc.spriteFrameCache.getSpriteFrame("mini_popupframe.png");var n=cc.rect(75,80,425,379);this.Pa=new cc.Scale9Sprite(t,n),isWebPlatform()||(e=this.Pa.getContentSize().width),this.Pa.setScaleY(1.1*GAME_SCALE),this.Pa.width=e*GAME_SCALE,this.Pa.height=this.Q.height,this.Pa.x=this.Q.width/2,this.Pa.y=this.Q.height/2,this.lb.addChild(this.Pa,WD_ZORDER_BODY),1>(t=i)&&!isWebPlatform()&&(t=1),this.Za=new BkSprite("#header.png"),this.Za.setScaleX(i),this.Za.setScaleY(t),this.Za.x=this.Q.width/2,this.Za.y=UI.xf(this.Pa)-this.Za.getBoundingBox().height/2,logMessage("BkTopPlayersWindow - initBgBody - this.headerChessWD.y = "+this.Za.y),this.lb.addChild(this.Za,WD_ZORDER_BODY)},YB:function(){this.Fb();var t=new BkPacket;t.Hs(K),BkConnectionManager.send(t),s()},MN:function(){this.Fb();var t=new BkPacket;t.Hs(L),BkConnectionManager.send(t),s()},Rn:function(){this.va=[],logMessage("BkTopPlayersWindow - this.iniTab");var t=new BkButton("banhot_CT.png","banhot_CT_Press.png","banhot_CT.png","banhot_CT.png",ccui.Widget.PLIST_TEXTURE);if(t.setScale(GAME_SCALE),this.Gh(t,1),this.va.push(t),(t=new BkButton("banhot_CU_deselect.png","banhot_CU_deselect_Press.png","banhot_CU_deselect.png","banhot_CU_deselect.png",ccui.Widget.PLIST_TEXTURE)).setScale(GAME_SCALE),this.Gh(t,2),this.va.push(t),this.xh(),null!=this.of)for(t=0;t<this.of.length;t++){var e=this.va[t];0==t?this.gf(e,!0):this.gf(e,!1)}else logMessage("Error: Must addTabChangeEventListener to callback handle")},xh:function(){logMessage("BkTopPlayersWindow - this.configPosButton()");var t=this.Pa,e=this.va[0],i=this.va[1];e.x=.3*UI.qa(t),e.y=.8*UI.Ga(t),i.x=.7*UI.qa(t),i.y=e.y},fn:function(t){logMessage("BkTopPlayersWindow - this.configButtonWithSelectedTab() - tabIndex: "+t);var e=this.va[0],i=this.va[1];1==t?(e.loadTextures("banhot_CT.png","banhot_CT_Press.png","banhot_CT.png","banhot_CT.png",ccui.Widget.PLIST_TEXTURE),i.loadTextures("banhot_CU_deselect.png","banhot_CU_deselect_Press.png","banhot_CU_deselect.png","banhot_CU_deselect.png",ccui.Widget.PLIST_TEXTURE)):(e.loadTextures("banhot_CT_deselect.png","banhot_CT_deselect_Press.png","banhot_CT_deselect.png","banhot_CT_deselect.png",ccui.Widget.PLIST_TEXTURE),i.loadTextures("banhot_CU.png","banhot_CU_Press.png","banhot_CU.png","banhot_CU.png",ccui.Widget.PLIST_TEXTURE))},ud:function(e,i,n){switch(i){case lg:logMessage("BkTopPlayersWindow - onLoadComplete"),this.Km=this.gy(e),this.al=e.length,t(),this.lK(n),console.log("BkTopPlayersWindow - this.onLoadComplete() before call this.onEnter()"),this.onEnter();break;case If:case Jf:t(),this.hp(e)}},gy:function(t){for(var e=0;e<t.length;e++)t[e].Ta=e+1;return t},Fb:function(){BkLogicManager.S().jb(this)},lK:function(t){this.Te(),this.jK(this.Km,this.nc,t)},Yr:function(){if(isWebPlatform()){var t=this.Zb,e=this.Pa;t.Ya(!0),t.x=UI.fb(e)-1.3*UI.qa(t),t.y=UI.xf(e)-1.9*UI.Ga(t),console.log("BkTopPlayersWindow - this._btnClose.x: ",this.Zb.x),console.log("BkTopPlayersWindow - this._btnClose.y: ",this.Zb.y)}},KG:function(){var t=this.Pa,e=new BkButton("btnDong.png","btnDongPress.png","btnDong.png","btnDong.png",ccui.Widget.PLIST_TEXTURE);e.setScale(GAME_SCALE),e.x=t.x,e.y=e.getContentSize().height/2,this.T(e);var i=this;e.addClickEventListener((function(){i.removeSelf()}))},lj:function(t,e){console.log("BkTopPlayersWindow - this.selectedTabEvent() - sender: ",t),logMessage("BkTopPlayersWindow - this.selectedTabEvent() - tabIndex: "+e),this.sn(e)},sn:function(t){logMessage("BkTopPlayersWindow - this.drawUIWithTab() - tabIndex: "+t),this.Te(),1==t?this.YB():2==t&&this.MN()},jK:function(t,e,i){e=this.Pa,console.log("BkTopPlayersWindow - this.drawTopPlayers - topPlayers: ",t),console.log("BkTopPlayersWindow - this.drawTopPlayers - gameId: ",i),this.kb=new BkSprite,this.kb.setContentSize(.62*cc.winSize.width,.47*cc.winSize.width),null!=t&&0<t.length?this.SG(i):this.ct(),this.kb.x=this.Q.width/2+7*GAME_SCALE,this.kb.y=.73*UI.Ga(e)-this.kb.getContentSize().height/2,console.log("BkTopPlayersWindow - this.drawTopPlayers() - add this._Grid"),this.T(this.kb),this.Yr(t)},SG:function(t){var e=this.Km;this.V=new Cn,this.V.name="List Top Players",this.V.setScrollBarEnabled(!1),this.V.setTouchEnabled(!0),this.V.setBounceEnabled(!0),this.V.setContentSize(cc.size(this.kb.getContentSize().width,this.kb.getContentSize().height)),this.V.setPosition(0,0),this.V.setGravity(ccui.ListView.GRAVITY_CENTER_VERTICAL);var n=this.$y(e[0],this,t);for(console.log("BkTopPlayersWindow - this.drawTopPlayers() - defaultItem: ",n),this.V.setItemModel(n),this.Pd=n.getContentSize().height,n=this.Pd*e.length+(e.length-1)*this.oc,this.ke=2*this.Pd+this.oc,console.log("BkTopPlayersWindow - this._bufferZone: ",this.ke),i=0;i<e.length;++i)if(i<this.Ic){var s=this.$y(e[i],this,t);s.setTag(i),this.V.pushBackCustomItem(s)}this.V.setItemsMargin(this.oc),this.Hc=(this.Pd+this.oc)*this.Ic,this.V.forceDoLayout(),this.V.getInnerContainer().setContentSize(cc.size(this.V.getInnerContainerSize().width,n)),this.V.jumpToTop(),t=this.V.getItems(),console.log("BkTopPlayersWindow - this.addListPlayers() - items.y = ",t.map((function(t){return t.getPosition().y}))),this.kb.addChild(this.V),this.scheduleUpdate()},sj:function(t,e,i){console.log("BkTopPlayersWindow - this.updateItem() - itemID: ",t),console.log("BkTopPlayersWindow - this.updateItem() - templateID: ",e),(e=this.V.getItems()[e]).setTag(t),console.log("BkTopPlayersWindow - this.updateItem() - itemTemplate: ",e),e=e.getChildren()[0],(t=this.Km[t])&&(i.$g=t.$g,i.Ta=t.Ta),console.log("BkTopPlayersWindow - this.updateItem() - playerData: ",t),t&&e.jV(t)},update:function(t){if(this.Uf+=t,!(this.Uf<this.Lm)){this.Uf=0;var e=this.Km,i=this.Pd*e.length+(e.length-1)*this.oc,n=this.V.getContentSize().height,s=this.V.getItems();for(this.V.getInnerContainer().getPosition(),console.log("BkHistoryListWindow - totalHeight: "+i),console.log("BkHistoryListWindow - update("+t+") - items.y: ",s.map((function(t){return UI.xf(t)}))),t=0;t<s.length;t++){if(0==(o=s[t]).getPosition().y&&o.Ta!=e.length)return void console.log("BkTopPlayersWindow - update - note update in the init - items: ",s.map((function(t){return t.getPosition().y})))}var r=this.V.getInnerContainer().getPosition().y<this.Sf;for(t=0;t<this.Ic&&t<e.length;++t){var o=s[t],a=this.Fi(o,t);r?a<-this.ke&&o.getPosition().y+this.Hc<i&&(console.log("BkTopPlayersWindow - update - moving up list - i: ",t),console.log("BkTopPlayersWindow - update - item: ",o),console.log("BkTopPlayersWindow - update - items: ",s.map((function(t){return t.getPosition().y}))),console.log("BkTopPlayersWindow - update - itemPos: ",a),console.log("BkTopPlayersWindow - update - this._bufferZone: ",this.ke),console.log("BkTopPlayersWindow - update - item.getPosition().y: ",o.getPosition().y),console.log("BkTopPlayersWindow - update - this._reuseItemOffset: ",this.Hc),console.log("BkTopPlayersWindow - update - totalHeight: ",i),a=o.getTag()-s.length,o.setPositionY(o.getPositionY()+this.Hc),this.sj(a,t,o)):a>this.ke+n&&0<=o.getPositionY()-this.Hc&&(console.log("BkTopPlayersWindow - update - moving down list - i: ",t),console.log("BkTopPlayersWindow - moving down - before update - items ranks: ",this.Dq()),console.log("BkTopPlayersWindow - moving down - before update - items positions: ",this.ru()),o.setPositionY(o.getPositionY()-this.Hc),a=o.getTag()+s.length,this.sj(a,t,o),console.log("BkTopPlayersWindow - moving down - after update - items ranks: ",this.Dq()),console.log("BkTopPlayersWindow - moving down - after update - items positions: ",this.ru()))}this.Sf=this.V.getInnerContainer().getPosition().y}},ru:function(){return this.V.getItems().map((function(t){return t.getPositionY()}))},Dq:function(){return this.V.getItems().map((function(t){return t.getChildren()[0]})).map((function(t){return t.W.Ta}))},Fi:function(t){return t=t.getParent().convertToWorldSpaceAR(t.getPosition()),this.V.convertToNodeSpaceAR(t).y},ct:function(){console.log("BkTopPlayersWindow - empty list");var t=30;isWebPlatform()&&(t=20),t=new BkLabel("","Arial",t),1==tabIndex?t.setString("Chưa có danh sách cao thủ cờ tướng."):2==tabIndex&&t.setString("Chưa có danh sách cao thủ cờ úp."),t.y=this.kb.getContentSize().height/1.5,t.x=this.kb.getContentSize().width/2,this.kb.addChild(t),t.setTextColor(v),t.Yb(GAME_SCALE),t.y=this.kb.getContentSize().height/2},ZU:function(t){null!=t&&((t=new BkPlayerInfo(t.userName)).Ab(this),t.Oa())},$y:function(t,e,i){return console.log("createTopPlayerItem - player: ",t),console.log("createTopPlayerItem - gameId: ",i),e=new BkTopPlayerItem(t,e,i),(i=new ccui.Layout).setContentSize(e.getContentSize()),e.setPosition(.5*this.Q.width,.5*e.getContentSize().height),i.addChild(e),i.$g=t.userName,i.Ta=t.Ta,i},Wg:function(t){if(1>BkGlobal.P.pb())showPopupMessageWith(jn+Yl);else{this.Fb(),null!=this.xd&&this.xd.removeSelf(),this.xd=new BkSelectGameForFriend(t),this.xd.Ab(this),this.xd.Oa();var e=this;e.setVisible(!1),this.xd.df((function(){e.setVisible(!0),1==e.nc&&e.YB()}))}},hp:function(t){this.xd&&this.xd.YE(t)},Te:function(){logMessage("cleanGUI"),null!=this.kb&&(this.kb.removeSelf(),this.kb=null)},g6:function(t,e){return t.re>e.re?-1:t.re==e.re?t.userName>e.userName?1:-1:1},onExit:function(){this._super(),BkLogicManager.S().jb(null)}}),BkMailItem=BkSprite.extend({um:null,bj:null,Fe:null,Rf:null,tk:null,background:null,Pb:null,ctor:function(t,e,i,n,s){this._super(),this.bj=t,this.Fe=i,this.um=n,this.rd(e,s),this.Ou()},rd:function(t,e){this.background=new cc.DrawNode,this.background.drawRect(cc.p(-20.5,-18),cc.p(this.um.ab().width-65.5,18),qj,0,qj),this.addChild(this.background),this.Pb=new cc.DrawNode,this.Pb.drawRect(cc.p(-20.5,-18),cc.p(this.um.ab().width-65.5,18),rj,0,rj),this.Pb.visible=!1,this.addChild(this.Pb);var i=this.bj.cL();this.tk=this.bL(i),this.tk.setScale(.8),this.tk.x=0==i?.5:0,this.tk.y=0==i?2.5:0,this.addChild(this.tk),i="",i=2===this.Fe?"Tới: ":"Từ: ",(i=new BkLabel(i,"",16)).setTextColor(xj),i.x=20+i.getContentSize().width/2,i.y=this.tk.y+.5,this.addChild(i);var n="",s=(n=2===this.Fe?this.bj.M_():this.bj.U_(),createFixedWidthLabel(n,70));s.setTextColor(tj),s.x=i.x+i.getContentSize().width/2+s.getContentSize().width/2,s.y=i.y,this.addChild(s),(n=createFixedWidthLabel(this.bj.W_(),320)).setTextColor(tj),n.x=i.x+120+n.getContentSize().width/2+.5,n.y=s.y+.5,this.addChild(n),(i=new BkLabel(this.bj.getDate(),"",14)).setTextColor(tj),i.x=570,i.y=n.y,this.addChild(i),e||((i=new cc.DrawNode).drawSegment(cc.p(-21,-19),cc.p(this.um.ab().width-65,-19),.5,vj),this.addChild(i)),this.Wd(t)},bL:function(t){if(1==this.Fe){if(0==t)return getSpriteFromImage("#icon_unread_mail.png");if(1==t)return getSpriteFromImage("#icon_read_mail.png")}return getSpriteFromImage("#icon_unread_mail.png")},Wd:function(t){this.x=0,this.y=t-37.7},Ou:function(){var t=this;this.Rf=xb((function(){t.Pb.setVisible(!0)}),(function(){t.Pb.setVisible(!1)}),(function(){t.Pb.isVisible()&&t.zO(t.bj.w_())})),cc.eventManager.addListener(this.Rf,this)},zO:function(t){0==this.bj.cL()&&(BkGlobal.P.UD(BkGlobal.P.zo-1),this.tk.setSpriteFrame("icon_read_mail.png")),(t=new BkMailDetailsWindow(t,this.Fe,this.um,this)).Ab(this.um),t.Oa()}}),COIN_X=[0,0,0,-15,-15,-15,-2,-1,0],COIN_Y=[4,2,0,8,6,4,20,18,16],TOTAL_COIN_OFFSET_X=0,TOTAL_COIN_OFFSET_Y=19,BkPhingSprite=BkSprite.extend({Ye:null,$i:null,jg:0,qt:null,type:0,vk:null,As:100,xj:3,pF:3,ctor:function(t,e){this._super(),this.jg=t-0==t&&0<(""+t).trim().length?t:0,this.type=0,null!=e&&(this.type=e),this.Gu(),this.JA(e),this.$i=new BkLabel("","",16),this.$i.setTextColor(cc.color(255,255,0)),this.addChild(this.$i,1),this.Mb(t)},Ez:function(t){for(var e=0;t>=this.xj+1;)e++,t/=this.xj+1;return e=Math.min(e,14),new BkSprite(res.rW,cc.rect(28*e,0,28,28))},jw:function(){if(null!=this.Ye)for(;0<this.Ye.length;)this.Ye.pop().removeFromParent();this.Ye=null},wM:function(){this.jw(),this.Ye=[];var t=this.Ez(this.jg/this.As);t.scaleX=.7,t.scaleY=.7,t.y=20,this.Ye.push(t),this.addChild(t,2)},OM:function(){this.jw(),this.Ye=[];var t=this.Ez(this.jg/this.As);t.scaleX=.7,t.scaleY=.7,t.x=-15,t.y=0,this.Ye.push(t),this.addChild(t,2)},pH:function(t,e){for(var i=0,n=e;n>=this.xj+1;)i++,n=Math.floor(n/(this.xj+1));i=Math.min(i,14);for(var s=0;s<this.xj;s++);return Math.pow(this.xj+1,i)*n},xM:function(){this.jw(),this.Ye=[];for(var t=this.jg/this.As,e=0;e<this.pF;e++)t-=this.pH(e*this.xj,t);for(e=this.Ye.length-1;0<=e;e--)this.addChild(this.Ye[e],2)},Gu:function(){switch(this.type){case 0:this.wM();break;case 1:this.xM();break;case 2:this.OM()}},GV:function(t){this.type=t,this.Gu(),this.JA()},JA:function(){null!=this.vk&&(this.vk.removeFromParent(),this.vk=null),0==this.type?this.vk=new BkSprite("#bet_money_bg0.png"):1==this.type&&(this.vk=new BkSprite("#bet_money_bg1.png")),null!=this.vk&&this.addChild(this.vk)},Mb:function(t){this.jg=t,this.Gu(),0==t?this.visible=!1:(this.visible=!0,this.$i.setString(convertStringToMoneyFormat(t)),2==this.type&&(this.$i.x=this.$i.getContentSize().width/2))},getWidth:function(){if(null==this.$i)return 0;var t=this.$i.getContentSize().width;return null!=this.Ye&&(t+=Math.abs(this.Ye[0].x)),t},CX:function(t){this.Mb(this.jg+t)},pb:function(){return this.jg},p4:function(t){this.qt=t},move:function(t,e,i){var n=cc.callFunc(this.ht,this);t=cc.moveTo(t,e,i),n=cc.sequence(t,n),this.runAction(n)},ht:function(){null!=this.qt&&this.qt(this),this.removeSelf()}}),BkDiemSprite=BkSprite.extend({ba:null,dr:null,ctor:function(t){this._super(),this.ba=new BkSprite("#result_normal_bg.png");var e=165;10>t.length&&(e=110),this.ba.setScaleX(e/87),this.ba.setScaleY(35/29),this.ba.x=0,this.addChild(this.ba),this.dr=new cc.LabelBMFont(t,res.jW),this.dr.x=this.ba.x,this.dr.y=this.ba.y+2,this.addChild(this.dr)}}),BkNumberCBSprite=BkSprite.extend({SB:-1,td:null,ig:null,ci:null,Zm:null,ctor:function(t){this._super(res.zp),this.SB=t,this.td=new BkCheckBox;var e=this;this.td.addEventListener((function(){logMessage("onCheckChange"),e.td.isSelected()?e.ig.setColor(cc.color(255,255,0)):e.ig.setColor(cc.color(255,255,255)),null!=e.Zm&&e.Zm(e)}),this),this.td.x=0,this.td.y=0;var i=""+t;10>t&&(i="0"+t),this.ig=new BkLabel(i,"",16),this.ig.x=this.td.x+20,this.ig.y=this.td.y,this.addChild(this.td),this.addChild(this.ig),this.setContentSize(cc.size(this.td.width+this.ig.width/2,this.td.height)),this.ci=new BkSprite("#btn_sanSang.png"),this.ci.opacity=0,t=(this.td.width+this.ig.width)/this.ci.getContentSize().width,i=this.td.height/this.ci.getContentSize().height,this.ci.setScale(t,i),this.ci.x=(this.td.width+this.ig.width-20)/2,this.addChild(this.ci,1),this.ci.ad(),this.ci.Ua((function(){logMessage("OnlickListenner "+e.SB),e.td.isSelected()?e.ig.setColor(cc.color(255,255,255)):e.ig.setColor(cc.color(255,255,0)),e.td.setSelected(!e.td.isSelected()),null!=e.Zm&&e.Zm(e)}))},isSelected:function(){return this.td.isSelected()},s4:function(t){this.Zm=t}}),DAILY_TASK_BEGIN_ITEM_Y=1.14,BkDailyTaskWindow=BkWindow.extend({nd:null,ex:null,ctor:function(t){this._super("Nhiệm vụ hằng ngày",cc.size(550,360),t),this.Qo(!0),this.Cc(!0),this.hg()},hg:function(){this.Cw(),this.xq()},Fb:function(){BkLogicManager.S().jb(this)},ud:function(e,i){switch(BkLogicManager.S().jb(null),i){case Na:this.ex=e,this.bK(e);break;case si:null!=this.ex&&this.aK(this.ex,e)}t()},xq:function(){s(),this.Fb(),BkLogicManager.S().xq()},bK:function(t){if(null!=this.nd&&(this.nd.removeSelf(),this.nd=null),this.nd=new BkSprite,this.T(this.nd),0<t.length){this.nd.x=20,this.nd.y=0;for(var e=this.ab().height/DAILY_TASK_BEGIN_ITEM_Y,i=0;i<t.length;i++){var n=new BkDailyTaskItem(t[i],e,i==t.length-1,this);n.x=10,e=n.y,this.nd.addChild(n)}}else(t=new BkLabel("Bạn không còn nhiệm vụ nào cần làm.","Tahoma",18)).x=this.ab().width/2,t.y=this.ab().height/2,this.nd.addChild(t)},aK:function(t,e){null!=this.nd&&(this.nd.removeSelf(),this.nd=null),this.nd=new BkSprite,this.T(this.nd),this.nd.x=20,this.nd.y=0;for(var i=this.ab().height/DAILY_TASK_BEGIN_ITEM_Y,n=0;n<t.length;n++){var s=t[n],r=n==t.length-1;s.id==e.id&&(showPopupMessageWith("Chúc mừng bạn đã hoàn thành nhiệm vụ.\nBạn vừa được thưởng "+s.qy+pn(),"Thưởng hằng ngày",null,null,this),BkGlobal.P.Mb(BkGlobal.P.pb()+s.qy),BkLogicManager.S().hj(),(s=e).CY(),t[n]=s),(s=new BkDailyTaskItem(s,i,r,this)).x=10,i=s.y,s.x=10,this.nd.addChild(s)}},removeSelf:function(){this._super(),BkLogicManager.S().xq(),BkLogicManager.S().jb(getCurrentScene().Se)}}),FB_SETUP_BEGIN_ITEM_Y=1.15,FB_SETUP_PADDING=50,FB_SETUP_PADDING_INPUT=290,FB_SETUP_LINK_USER=0,FB_SETUP_RENAME=1,BkFbUserSetupWindow=BkWindow.extend({Mc:null,qm:null,fa:null,Bb:null,userName:null,vn:null,Bj:null,ctor:function(t){this.qm=t,t="Đổi tên đăng nhập",this.qm==FB_SETUP_LINK_USER&&(t="Liên kết tài khoản"),this._super(t,cc.size(530,301)),this.Qo(!0),this.Cc(!0),this.hg(),this.qm==FB_SETUP_LINK_USER&&null!=this.userName&&null!=this.Bj&&this.df(this.EO)},hg:function(){this.Cw(),null!=this.Mc&&(this.Mc.removeSelf(),this.Mc=null),this.Mc=new BkSprite,this.T(this.Mc,0,0),this.qm==FB_SETUP_RENAME?this.eK():this.qm==FB_SETUP_LINK_USER&&this.cK()},Fb:function(){BkLogicManager.S().jb(this)},EO:function(){this.qm==FB_SETUP_LINK_USER&&null!=this.vn&&null!=this.Bj&&BkFacebookMgr.lz(this.vn,this.Bj)},ud:function(e,i){switch(t(),BkLogicManager.S().jb(null),e){case vk:if(i==rk)this.Dc("Bạn đã liên kết tài khoản thành công!",!0),BkGlobal.fo=!1,logMessage("after link fb success -> update user info"),null!=this.fa&&(postUserTracker(2,BkGlobal.P.userName,bk.cpid,cc.nh,BkFacebookMgr.te,"FB_LINK_PLAYER: "+this.fa.getString()),BkGlobal.P.yd(this.fa.getString())),BkLogicManager.S().jb(this.Tf),BkLogicManager.S().Cx(this.fa.getString());else if(i==sk){BkGlobal.VA=!1;var n=F(D.He,!0);null!=n.username&&(n.username=this.fa.getString(),S(D.He,JSON.stringify(n))),this.Dc("Bạn đã đổi tên đăng nhập thành công!",!0),postUserTracker(2,BkGlobal.P.userName,bk.cpid,cc.nh,BkFacebookMgr.te,"FB_RENAME: "+this.fa.getString())}null!=this.fa&&(BkGlobal.P.yd(this.fa.getString()),getCurrentScene().kf(BkGlobal.P));break;case wk:this.Dc("Tài khoản facebook của bạn không hợp lệ. Vui lòng thử lại.");break;case xk:this.Dc("Facebook của bạn đã liên kết với tên đăng nhập khác rồi.\n Bạn không thể liên kết nữa");break;case yk:this.Dc("Tài khoản đã được liên kết tới một tài khoản Facebook khác!");break;case zk:n=qn("Tên đăng nhập &*& được đăng ký qua Facebook.\n Bạn không thể liên kết được với tên đăng nhập này",[this.fa.getString()]),this.Dc(n);break;case Ak:this.Dc("Tên đăng nhập hoặc mật khẩu tài khoản liên kết không đúng.\n Vui lòng nhập lại!");break;case Bk:this.Dc("Bạn chưa nhập tên đăng nhập");break;case Ck:this.Dc("Bạn không thể đổi tên được nữa vì đã đổi tên rồi!");break;case Dk:this.Dc("Tên bạn chọn đã có người đăng ký. Hãy chọn một tên khác.");break;case Fk:this.removeSelf()}},cK:function(){var t=new BkLabel("Hãy nhập tài khoản bạn muốn liên kết","",15);t.x=this.ab().width/2,t.y=this.ab().height-t.height/2-FB_SETUP_PADDING,this.Mc.addChild(t);var e=new BkLabel("Tên đăng nhập: ","Tahoma",14);e.x=e.width/2+FB_SETUP_PADDING,e.y=t.y-t.getContentSize().height/2-e.getContentSize().height/2-20,this.Mc.addChild(e),this.fa=createEditBox(WD_PASS_INPUT_SIZE,"edit_text.png"),this.fa.setMaxLength(20),this.fa.x=FB_SETUP_PADDING_INPUT,this.fa.y=e.y,this.fa.setPlaceholderFontColor(Aj),this.fa.setFontColor(zj),null!=this.userName&&null!=this.userName&&this.fa.setString(this.userName),this.Mc.addChild(this.fa),(t=new BkLabel("Mật khẩu: ","Tahoma",14)).x=t.width/2+FB_SETUP_PADDING,t.y=this.fa.y-this.fa.height/2-t.getContentSize().height/2-15,this.Mc.addChild(t),this.Bb=createEditBox(WD_PASS_INPUT_SIZE,"edit_text.png"),this.Bb.setMaxLength(20),this.Bb.setInputFlag(cc.EDITBOX_INPUT_FLAG_PASSWORD),this.Bb.x=FB_SETUP_PADDING_INPUT,this.Bb.y=t.y,this.Bb.setPlaceholderFontColor(Aj),this.Bb.setFontColor(zj),this.Mc.addChild(this.Bb),(t=createBkButtonPlist("btn_no_text.png","btn_no_text_press.png","btn_no_text.png","btn_no_text_press.png")).setTitleText("Cập nhật"),t.x=8*WD_BODY_MARGIN_LR+t.width/2,t.y=this.Bb.y-this.Bb.height/2-t.height/2-15,this.Mc.addChild(t);var i=this;t.addTouchEventListener((function(t,e){e==ccui.Widget.TOUCH_ENDED&&this.cW(this.fa.getString(),this.Bb.getString())&&this.dS(this.fa.getString(),this.Bb.getString(),this.vn,this.Bj)}),this),(e=createBkButtonPlist("btn_no_text.png","btn_no_text_press.png","btn_no_text.png","btn_no_text_press.png")).setTitleText("Thôi"),e.x=t.x+t.width+e.width/2,e.y=t.y,this.Mc.addChild(e),e.addTouchEventListener((function(t,e){e==ccui.Widget.TOUCH_ENDED&&(null!=this.vn&&null!=this.Bj&&BkFacebookMgr.lz(this.vn,this.Bj),i.removeSelf())}),this),(e=new BkLabel("Chú ý: Tài khoản hiện thời sẽ bị xóa sau khi liên kết.","",15)).setTextColor(yj),e.x=e.getContentSize().width/2+FB_SETUP_PADDING,e.y=t.y-t.height/2-e.getContentSize().height/2-10,this.Mc.addChild(e)},eK:function(){var t=new BkLabel("Tên đăng nhập hiện thời của bạn là: "+BkGlobal.P.userName,"",15);t.x=this.ab().width/2,t.y=this.ab().height-t.getContentSize().height/2-FB_SETUP_PADDING,this.Mc.addChild(t);var e=new BkLabel("Tên đăng nhập: ","Tahoma",14);e.x=e.width/2+FB_SETUP_PADDING,e.y=t.y-t.getContentSize().height/2-e.getContentSize().height/2-FB_SETUP_PADDING,this.Mc.addChild(e),this.fa=createEditBox(WD_PASS_INPUT_SIZE,"edit_text.png"),this.fa.setMaxLength(20),this.fa.x=275,this.fa.y=e.y-.5,this.fa.setPlaceHolder("Nhập tên đăng nhập mới"),this.fa.setPlaceholderFontColor(Aj),this.fa.setFontColor(zj),this.Mc.addChild(this.fa),this.Mm(this.fa),(t=createBkButtonPlist("btn_no_text.png","btn_no_text_press.png","btn_no_text.png","btn_no_text_press.png")).setTitleText("Cập nhật"),t.x=7*WD_BODY_MARGIN_LR+t.width/2,t.y=this.fa.y-this.fa.height/2-t.height/2-15,this.Mc.addChild(t);var i=this;t.addTouchEventListener((function(t,e){var n=(s=this.uu()).x+this.Q.width/2,s=s.y+this.Q.height-65;if(e==ccui.Widget.TOUCH_ENDED){var r=this.fa.getString();if(""==r)return showToastMessage("Bạn phải nhập tên tài khoản",n,s,2,370),!1;var o=isValidUsername(r);if(""!=o)return showToastMessage(o,n,s,2,370),!1;i.qw(r)}}),this),(e=createBkButtonPlist("btn_no_text.png","btn_no_text_press.png","btn_no_text.png","btn_no_text_press.png")).setTitleText("Thôi"),e.x=t.x+t.width+e.width/2,e.y=t.y,this.Mc.addChild(e),e.addTouchEventListener((function(t,e){e==ccui.Widget.TOUCH_ENDED&&i.removeSelf()}),this),(e=new BkLabel("Chú ý: Bạn chỉ được đổi tên duy nhất một lần.","",15)).setTextColor(yj),e.x=this.ab().width/2,e.y=t.y-t.height/2-e.getContentSize().height/2-WD_BODY_MARGIN_TB,this.Mc.addChild(e)},Dc:function(t,e){function i(){e?n.removeSelf():(n.fa.visible=!0,n.Bb&&(n.Bb.visible=!0))}this.fa.visible=!1,this.Bb&&(this.Bb.visible=!1);var n=this;showPopupMessageWith(t,"",i,i,this)},dS:function(t,e,i,n){s(),logMessage("User: "+t+" pass: "+e+" fbId: "+i+" accessToken: "+n),this.Fb();var r=new BkPacket;null!=i&&null!=n?r.AW(t,e,i,n):r.BW(t,e),BkConnectionManager.send(r)},qw:function(t){s(),this.Fb();var e=new BkPacket;e.zx(t),BkConnectionManager.send(e),BkGlobal.ap=t,logMessage("requestRenameUser "+t)},cW:function(t,e,i){var n=(s=this.uu()).x+this.Q.width/2,s=s.y+this.Q.height-65;if(""==t||""==e)return showToastMessage("Bạn phải nhập tên tài khoản và mật khẩu đăng nhập",n,s,2,370),!1;if(2>t.length||20<t.length)return showToastMessage(Ml+Pl,this.x,this.y,2,200),!1;var r=isValidUsername(t);return""!=r?(showToastMessage(r,n,s,2,370),!1):isEasyPassword(e)?(showPopupConfirmWith("Vì mật khẩu của bạn quá đơn giản nên không thể liên kết tài khoản, hãy vào di động và đổi mật khẩu sau đó quay lại đây để đăng nhập. Bạn có muốn xem hướng dẫn không?",null,(function(){i&&i(),cc.sys.openURL(cc.game.config.app.H3)}),i,i,this),sendGA(BKGA.mW,"ErrorSimplePass-Link",t),!1):""==(r=isValidPassword(e))||(showToastMessage(r,n,s,2,370),!1)}}),BkListViewerWindow=BkBaseChessWindow.extend({ctor:function(){var t=cc.size(610,620);isWebPlatform()||(t=cc.size(620*GAME_SCALE,1e3*GAME_SCALE)),this._super("",t,null),this.Ob("title_wd_viewer.png"),this.Cc(!0),(t=new BkButton("btnDong.png","btnDongPress.png","btnDong.png","btnDong.png",ccui.Widget.PLIST_TEXTURE)).setScale(GAME_SCALE),t.x=this.ab().width/2,t.y=t.getContentSize().height*GAME_SCALE,this.T(t);var e=this;t.addClickEventListener((function(){e.removeSelf()})),this.bU()},YK:function(){var t=[],e=BkLogicManager.oa();if(!e)return t;var i=e.ga;for(console.log("getListPlayer - before update listPlayer: ",i),this.hV(i),console.log("getListPlayer - after update listPlayer: ",i),i.sort(this.zU),e=0;e<i.length;e++)t.push(i[e]);return t},hV:function(t){for(var e=tb(),i=0;i<t.length;i++){var n=t[i];n.ae=!1;var s=n.getName();ub(s,e)&&(n.ae=!0,console.log("set blocked chat for user: ",s))}},bU:function(){this.Te();var t=this.YK();this.Qa=new BkSprite;var e=450,i=.9,n=.58*cc.winSize.width;if(isWebPlatform()||(e=780*GAME_SCALE,i=.9),this.Qa.setContentSize(n,e),null!=t&&0<t.length){for(this.V=new Cn,this.V.setDirection(ccui.ScrollView.DIR_VERTICAL),this.V.setTouchEnabled(!0),this.V.setBounceEnabled(!0),this.V.setContentSize(cc.size(this.Qa.getContentSize().width,this.Qa.getContentSize().height)),this.V.setPosition(0,0),this.V.setGravity(ccui.ListView.GRAVITY_CENTER_VERTICAL),e=0;e<t.length;e++)n=this.Ht(t[e],this),this.V.pushBackCustomItem(n);this.Qa.addChild(this.V)}this.Qa.x=this.Q.width/2,this.Qa.y=this.Ac.y-TAB_WD_BUTTON_MARGIN_TOP-this.Qa.getContentSize().height/2,this.Qa.y=this.Q.height*i-this.Qa.getContentSize().height/2,this.T(this.Qa,0,0)},zU:function(t,e){return!t.Ka||t.OB>e.OB||t.getUserInfo().$c>e.getUserInfo().$c?-1:1},Ht:function(t,e){var i=new Vn(t,e),n=new ccui.Layout;return n.setContentSize(i.getContentSize()),i.setPosition(.5*this.Q.width,.5*i.getContentSize().height),n.addChild(i),n.$g=t.getUserInfo().userName,n},wN:function(t){null!=t&&((t=new BkPlayerInfo(t.userName)).Ab(this),t.Oa())},Te:function(){logMessage("cleanGUI"),null!=this.Qa&&(this.Qa.removeSelf(),this.Qa=null)}});var Vn=ccui.Widget.extend({parentNode:null,W:null,Fe:null,Um:null,ae:!1,ta:-1,Ka:null,Pg:!1,Pc:null,ctor:function(t,e){this._super(),this.setName("BkViewerItem"),this.W=t.getUserInfo(),this.W.Sr(!0),this.Fe=1,this.parentNode=e,this.ae=t.ae,this.ta=t.ta,this.Ka=t.Ka,this.Pg=BkLogicManager.oa().An()==this.ta,this.gg(),this.rd(10)},gg:function(){var t=this;this.Pc=createBkButtonPlist("infoFrameBanBeOn.png","infoFrameBanBeOn.png","infoFrameBanBeOn.png","infoFrameBanBeOn.png",""),this.Pc.addClickEventListener((function(){logMessage(" item clicked: "+JSON.stringify(t.W)),t.parentNode.wN(t.W)})),this.setContentSize(cc.size(1.08*this.Pc.getContentSize().width,this.parentNode.Q.height/8)),this.setScale(GAME_SCALE),this.setPosition(.5*this.getContentSize().width,.5*this.getContentSize().height),this.Pc.setPosition(.5*this.getContentSize().width,.5*this.getContentSize().height),this.addChild(this.Pc)},rd:function(t){var e=zb(this.W.Hb,this.W.$c),i=.4;isWebPlatform()||(i=.6),e.setScale(i),e.x=e.getBoundingBox().width/2+10*GAME_SCALE,e.y=.6*this.getContentSize().height,this.addChild(e,WD_ZORDER_TOP),i=18,isWebPlatform()||(i=28,e.y=.55*this.getContentSize().height),(i=new BkLabel(Ab(this.W.userName,18),"Arial",i,!0)).setTextColor(Cj),i.x=e.x+e.getBoundingBox().width/2+i.getContentSize().width/2+10*GAME_SCALE,i.y=e.y+.3*i.getContentSize().height,this.addChild(i);var n=16;isWebPlatform()||(n=26);n=new BkLabel("","Tahoma",n);var s=null,r=cc.color(178,176,177);this.Ka?(n.setString("Người xem"),r=cc.color(27,197,2)):n.setString("Người chơi"),(s=new BkSprite("#icon_online.png")).x=e.x+e.getBoundingBox().width/2+10*GAME_SCALE,s.y=i.y-FRIEND_ITEM_PADDING_Y*GAME_SCALE,n.setTextColor(r),n.x=s.x+s.getBoundingBox().width+n.getContentSize().width/2,n.y=s.y-1*GAME_SCALE,this.addChild(s),this.addChild(n),r=null,1==this.Fe&&((r=new BkLabel(rn(this.W.$c),"Arial",20)).x=e.x+TEXT_OFFSET_MONEY_LEVEL*GAME_SCALE+r.getContentSize().width/2,r.y=e.y,this.addChild(r)),s.setVisible(!1),null!=r&&r.setVisible(!1),isWebPlatform()||(i.y=.6*this.getContentSize().height),s=null,(s=this.W.Ie?new BkSprite("#online.png"):new BkSprite("#offline.png")).y=.4*e.getBoundingBox().height,s.x=i.x-.5*i.getContentSize().width+.5*s.getContentSize().width,this.addChild(s,100),n.y=s.y,n.x=s.x+s.getContentSize().width/2+n.getContentSize().width/2,i.setTextColor(R),n.setTextColor(R),this.Pg||this.Eu(),this.Wd(t)},X0:function(){return this.ae},Eu:function(){var t=this,e=this.ae,i=0,n=createBkButtonPlist("btnOffChat.png","btnOffChatPress.png","btnOffChat.png","btnOffChatPress.png");e&&(n=createBkButtonPlist("btnOnChat.png","btnOnChatPress.png","btnOnChat.png","btnOnChatPress.png"),i=1),n.setTag(i),n.setTitleFontName(ma()),n.setTitleFontSize(31),n.setTitleColor(cc.color(71,44,27)),n.x=this.getContentSize().width-n.getContentSize().width,n.y=this.getContentSize().height/2,this.addChild(n),n.addClickEventListener((function(){t.kO()})),this.Um=n},kO:function(){var t=this.W.userName;logMessage("onClickActionChat click: "+t+" pos: "+this.ta),console.log("this.onClickActionChat - this.playerData: ",this.W);var e=1-this.Um.getTag();this.Um.setTag(e),1==e?(this.Um.loadTextures("btnOnChat.png","btnOnChatPress.png","btnOnChat.png","btnOnChatPress.png",ccui.Widget.PLIST_TEXTURE),BkUserClientSettings.$G(t),logMessage("isBlockChat khoa chat user: "+t+" pos: "+this.ta),this.DS(this.ta,t),this.mR(t)):(this.Um.loadTextures("btnOffChat.png","btnOffChatPress.png","btnOffChat.png","btnOffChatPress.png",ccui.Widget.PLIST_TEXTURE),BkUserClientSettings.YR(t),logMessage("isBlockChat mo chat user: "+t+" pos: "+this.ta),this.TS(this.ta,t),this.lR(t)),BkUserClientSettings.PN()},mR:function(t){var e=tb();console.log("pushBlockedPlayerToLocalStorage - playersList: ",e),ub(t,e)||e.push(t),Fl(e)},lR:function(t){var e=tb();-1!==(t=e.indexOf(t))&&e.splice(t,1),console.log("pullBlockedPlayerToLocalStorage - playersList: ",e),Fl(e)},Wd:function(t){this.x=40,this.y=t-FRIEND_ITEM_HEIGHT_SPRITE},k1:function(){return!1},DS:function(t,e){var i=new BkPacket;i.IG(t,e),BkConnectionManager.send(i)},TS:function(t,e){var i=new BkPacket;i.cV(t,e),BkConnectionManager.send(i)}});function Jn(t){return(t=Pn(t))?t.Nk:""}function Kn(t){return(t=Pn(t))?t.Ah:""}function yn(t){return Jn((t=Wn(t)).id)}function zn(t){return Kn((t=Wn(t)).id)}function Wn(t){return Pn((t=new BkChessPiece(t)).Ja)}function Pn(t){switch(t){case BkChessType.Qf.id:return BkChessType.Qf;case BkChessType.vp.id:return BkChessType.vp;case BkChessType.yp.id:return BkChessType.yp;case BkChessType.Im.id:return BkChessType.Im;case BkChessType.Hm.id:return BkChessType.Hm;case BkChessType.Ls.id:return BkChessType.Ls;case BkChessType.Qs.id:return BkChessType.Qs;default:return null}}function In(t,e){for(var i=0;i<e.length;i++)if(t==i)return e[i].Ck}function Mn(t,e){return t<BkChessSize.yg?BkChessSize.Em-e:e+1}function Nn(t,e,i){if(t<BkChessSize.yg){if(i>e)return BkChessMoveType.Fm;if(i<e)return BkChessMoveType.Dm}else{if(i<e)return BkChessMoveType.Fm;if(i>e)return BkChessMoveType.Dm}return BkChessMoveType.wp}function Ln(t,e){var i=Xn(t,e);if(0==i.length)return logMessage("WTF"),BkChessPositionOrder.op;if(1==i.length)i=BkChessPositionOrder.op;else{var n=Yn(i),s=Zn(i);(t<BkChessSize.yg?t==n.Fa:t==s.Fa)?i=BkChessPositionOrder.xp:(n=Yn(i),i=Zn(i),i=(t<BkChessSize.yg?t==i.Fa:t==n.Fa)?BkChessPositionOrder.tp:BkChessPositionOrder.np)}return i}function On(t,e){switch(Ln(t,e)){case BkChessPositionOrder.xp:return BkChessPositionOrderDescription.xp;case BkChessPositionOrder.tp:return BkChessPositionOrderDescription.tp;case BkChessPositionOrder.np:return BkChessPositionOrderDescription.np;default:return BkChessPositionOrderDescription.op}}function Yn(t){return t.reduce((function(t,e){return t.rowIndex>e.rowIndex?t:e}))}function Zn(t){return t.reduce((function(t,e){return t.rowIndex<e.rowIndex?t:e}))}function Xn(t,e){var i=[],n=$n(t,e),s=e.filter((function(t){return 0==t.sa}));if(null!=n)for(var r=0;r<s.length;r++){var o=s[r];n.ea==o.ea&&n.Ja==o.Ja&&(n.Fa<BkChessSize.yg&&o.Fa<BkChessSize.yg||n.Fa>=BkChessSize.yg&&o.Fa>=BkChessSize.yg)&&(i.push(o))}return i}function $n(t,e){for(var i=0;i<e.length;i++){var n=e[i];if(t==n.Fa)return n}return null}BkPlayer=BkSprite.extend({Qh:0,W:null,Aa:null,Nc:null,vb:null,ra:null,xe:null,status:2,wn:null,yi:null,ba:null,mi:null,qd:null,Ad:null,Fh:null,ue:null,Zd:null,$h:null,mc:null,spriteFrameCache:cc.spriteFrameCache,$d:null,Cl:null,Dl:null,Bl:null,Al:null,ro:null,ag:null,ac:null,W1:null,ctor:function(t,e,i){null!=t&&(this.W=t,this.status=e),null!=i&&null!=i?this._super(i):this._super(),this.Xx(),this.Iu()},Xx:function(){this.ba=new BkSprite("#bgPlayer.png"),this.addChild(this.ba),this.ba.x=this.getContentSize().width/2,this.ba.y=this.getContentSize().height/2,this.ra=new BkSprite("#bginvitedFR.png"),this.addChild(this.ra),this.ra.x=this.getContentSize().width/2,this.ra.y=this.getContentSize().height/2,this.Nc=new BkSprite("#xito_cd_bg.png"),this.Nc.x=this.getContentSize().width/2,this.Nc.y=this.getContentSize().height/2,this.Nc.setVisible(!1),this.addChild(this.Nc),this.Aa=new BkLabel("","",bkFontSizeUtil(16)),this.Aa.setTextColor(pj),this.Aa.x=this.Nc.x,this.Aa.y=this.Nc.getContentSize().height/2+this.Aa.getContentSize().height/2-23,this.addChild(this.Aa,100),this.xe=new BkSprite,this.xe.x=-32,this.xe.y=10*GAME_SCALE,this.addChild(this.xe),this.ji()},c6:function(t){this.Qk=new BkSprite("#xito_win_bg_border.png"),this.Qk.x=1==t||2==t||3==t?(this.ba.getWidth()-this.Qk.getWidth())/2:-1*(this.ba.getWidth()-this.Qk.getWidth())/2,this.addChild(this.Qk)},MI:function(){null!=this.Qk&&(this.Qk.removeSelf(),this.Qk=null),null!=this.ro&&(this.ro.removeFromParent(),this.ro=null)},v5:function(t,e){null==this.ac&&(this.ac=new BkPhingSprite,this.ac.GV(2),this.addChild(this.ac)),this.ac.Mb(t),this.ac.x=1==e||2==e||3==e?-71-this.ac.getWidth()/2:80,this.ac.y=-40},HI:function(){null!=this.ac&&(this.ac.removeFromParent(),this.ac=null)},Iu:function(){this.ba.ad((function(){}));var t=this;this.ba.Ua((function(){1e3>J()-t.ba.Kb||(t.ba.Kb=J(),null!=t.W&&null!=t.wn&&t.wn.fD(t.od()))}))},G4:function(t){this.isVisible=t},Ur:function(t){this.status=t,this.ji()},Po:function(t){this.wn=t},mm:function(t){this.yi=t},Tr:function(t,e){this.W=t,null!=e?this.ji(e):this.ji()},od:function(){return null==this.W?null:this.W.userName},reset:function(){this.Nj(),this.ji()},ji:function(t){null!=this.W?(this.Aa.setString(Ab(this.W.userName,12)),this.ra.setVisible(!0),this.Aa.setVisible(!0),null==this.mi&&this.ba.setVisible(!0),this.xe.setVisible(!0),null!=t&&1==t||(this.status!=PLAYER_STATE_READY&&this.status!=PLAYER_STATE_TABLE_OWNER?this.sE():this.Hy()),this.lT(this.W.$c)):(null!=this.Nc&&this.Nc.setVisible(!1),this.Aa.setVisible(!1),this.ba.setVisible(!1),this.xe.setVisible(!1),null!=this.mi&&(this.mi.setVisible(!1),this.mi=null),this.Zr(),this.Nj(),this.xi(),this.HI())},Nj:function(){this.Ly(),this.vx(),this.JI(),this.FI(),this.II(),this.Cy(),this.GI(),this.Ey(),this.Oj(),this.dn(),this.EI(),this.NI(),this.nl(),this.MI()},D5:function(){},Sn:function(){var t=this,e=getCurrentScene(),i=cc.p(this.getContentSize().width/2,this.getContentSize().height/2);null!=this.Nc&&(i=e.convertToWorldSpace(this.Nc.getPosition())),this.vb=new BkCountDownTime("#greenFrame.png"),this.vb.x=i.x,this.vb.y=i.y,this.vb.setCallback((function(){logMessage("finish cb"),t.yc()})),e.addChild(this.vb)},Pw:function(t){null==t&&(t=15),null!=this.vb&&(this.vb.removeFromParent(),this.vb=null),this.Sn(),this.vb.Xr(t),null!=this.Nc&&this.Nc.setVisible(!0)},t2:function(){},yc:function(){null!=this.vb&&(this.vb.Er(),this.vb=null),null!=this.Nc&&this.Nc.setVisible(!1)},i4:function(t){null==this.Mi&&(this.Mi=new BkSprite("#imgBoluot.png"),this.Mi.x=0,this.Mi.y=-5,this.addChild(this.Mi,this.ra.getLocalZOrder()+1)),this.Mi.visible=t},BV:function(t){null!=this.W&&0<=t&&this.W.Mb(t)},Ly:function(){null!=this.$d&&(this.$d.removeFromParent(),this.$d=null)},b6:function(t){this.Ly(),this.$d=t?new BkSprite("#Thang.png"):new BkSprite("#Thua.png"),this.$d.visible=!0,this.addChild(this.$d,this.ra.getLocalZOrder()+1)},rE:function(){null==this.Yc&&(this.Yc=new BkSprite("#Thua.png"),this.Yc.x=0,this.Yc.y=0,this.addChild(this.Yc,this.ra.getLocalZOrder()+1))},nl:function(){null!=this.Yc&&(this.Yc.removeFromParent(),this.Yc=null)},vE:function(){null==this.ue&&(this.ue=new BkSprite("#Thang.png"),this.ue.x=0,this.ue.y=0,this.addChild(this.ue,this.ra.getLocalZOrder()+1))},Oj:function(){null!=this.ue&&(this.ue.removeFromParent(),this.ue=null)},J5:function(){this.dn(),this.Cl=new BkSprite("#round_bet_fold.png"),this.Cl.y=-20.5,this.addChild(this.Cl,this.ra.getLocalZOrder()+1)},S5:function(){this.dn(),this.Dl=new BkSprite("#round_bet_raise.png"),this.Dl.y=-20.5,this.addChild(this.Dl,this.ra.getLocalZOrder()+1)},F5:function(){this.dn(),this.Bl=new BkSprite("#round_bet_check.png"),this.Bl.y=-20.5,this.addChild(this.Bl,this.ra.getLocalZOrder()+1)},oY:function(){null!=this.ag&&(this.ag.removeFromParent(),this.ag=null)},z5:function(t,e){null==this.ag&&(null!=this.mi&&this.mi.removeFromParent(),this.mi=0==t||4==t||5==t?new BkSprite("#xito_bg_r.png"):new BkSprite("#xito_bg_l.png"),this.addChild(this.mi,this.ba.getLocalZOrder()-1),this.ba.setOpacity(0),this.ba.setVisible(!1),this.ag=new BkSprite9,this.ag.init(new BkSprite(res.VX),new BkSprite(res.WX),new BkSprite(res.UX)),0==t||4==t||5==t?(this.ag.x=1,this.ag.a4(246,e)):(this.ag.x=-1,this.ag.Z3(246,e)),this.addChild(this.ag,-3))},w5:function(){this.dn(),this.Al=new BkSprite("#round_bet_all_in.png"),this.Al.y=-20.5,this.addChild(this.Al,this.ra.getLocalZOrder()+1)},nY:function(){this.Fy(),this.Jy()},dn:function(){this.CI(),this.Fy(),this.KI(),this.Jy()},Fy:function(){null!=this.Bl&&(this.Bl.removeFromParent(),this.Bl=null)},Jy:function(){null!=this.Dl&&(this.Dl.removeFromParent(),this.Dl=null)},KI:function(){null!=this.Cl&&(this.Cl.removeFromParent(),this.Cl=null)},CI:function(){null!=this.Al&&(this.Al.removeFromParent(),this.Al=null)},T5:function(t,e){if(this.vx(),2==e)switch(t){case 0:this.qd=new BkSprite("#Nhat.png");break;case 1:this.qd=new BkSprite("#Bet.png")}else if(3==e)switch(t){case 0:this.qd=new BkSprite("#Nhat.png");break;case 1:this.qd=new BkSprite("#Nhi.png");break;case 2:this.qd=new BkSprite("#Bet.png")}else switch(t){case 0:this.qd=new BkSprite("#Nhat.png");break;case 1:this.qd=new BkSprite("#Nhi.png");break;case 2:this.qd=new BkSprite("#Ba.png");break;case 3:this.qd=new BkSprite("#Bet.png")}null!=this.qd&&(this.qd.x=0,this.qd.y=0,this.qd.visible=!0,this.addChild(this.qd,this.ra.getLocalZOrder()+1))},vx:function(){null!=this.qd&&(this.qd.removeFromParent(),this.qd=null)},II:function(){null!=this.Mi&&(this.Mi.removeFromParent(),this.Mi=null)},JI:function(){null!=this.Fh&&(this.Fh.removeFromParent(),this.Fh=null)},xi:function(){null!=this.Ad&&(this.Ad.removeFromParent(),this.Ad=null)},Zr:function(){null==this.Ad&&(this.Ad=new BkSprite("#Ready.png"),this.Ad.x=0,this.Ad.y=0,this.addChild(this.Ad,this.ra.getLocalZOrder()+1))},Hy:function(){this.ba.opacity=255,this.ra.opacity=255},sE:function(){this.ba.opacity=100,this.ra.opacity=100},G5:function(){null==this.Fh&&(this.Fh=new BkSprite("#cong.png"),this.Fh.x=0,this.Fh.y=0,this.addChild(this.Fh,this.ra.getLocalZOrder()+1)),this.Fh.visible=!0},y5:function(){null==this.Zd&&(this.Zd=new BkSprite("#AutoWin.png"),this.Zd.x=0,this.Zd.y=0,this.addChild(this.Zd,this.ra.getLocalZOrder()+1)),this.Zd.visible=!0},M5:function(){null==this.Zd&&(this.Zd=new BkSprite("#maubinh.png"),this.Zd.x=0,this.Zd.y=0,this.addChild(this.Zd,this.ra.getLocalZOrder()+1)),this.Zd.visible=!0},X5:function(){null==this.Yc&&(this.Yc=new BkSprite("#text_sap3chi.png"),this.Yc.x=0,this.Yc.y=0,this.addChild(this.Yc,this.ra.getLocalZOrder()+1))},FI:function(){null!=this.Zd&&(this.Zd.removeFromParent(),this.Zd=null)},PX:function(t){null==this.Li&&(this.Li=t?new BkSprite("#BaoSam.jpg"):new BkSprite("#KoBaoSam.jpg"),this.Li.x=0,this.Li.y=0,this.addChild(this.Li,this.ra.getLocalZOrder()+1)),this.Li.visible=!0},GI:function(){null!=this.Li&&(this.Li.removeFromParent(),this.Li=null)},IX:function(t){t?(null==this.Ji&&(this.Ji=new BkSprite("#Alert1Card.jpg"),this.addChild(this.Ji,this.ra.getLocalZOrder()+1),this.Ji.x=0,this.Ji.y=20),this.Ji.visible=!0):this.Cy()},Cy:function(){null!=this.Ji&&(this.Ji.removeFromParent(),this.Ji=null)},LX:function(t){this.Ey(),null==this.Ki&&(this.Ki=t?new BkSprite("#AnSam.jpg"):new BkSprite("#DenSam.jpg"),this.addChild(this.Ki,this.ra.getLocalZOrder()+1),this.Ki.x=0,this.Ki.y=0),this.Ki.visible=!0},N5:function(){null==this.Ni&&(this.Ni=new BkSprite("#Chay.png"),this.addChild(this.Ni,this.ra.getLocalZOrder()+1),this.Ni.x=0,this.Ni.y=0),this.Ni.visible=!0},Y5:function(){null==this.Pi&&(this.Pi=new BkSprite("#U.png"),this.addChild(this.Pi,this.ra.getLocalZOrder()+1),this.Pi.x=0,this.Pi.y=0),this.Pi.visible=!0},a6:function(){null==this.Oi&&(this.Oi=new BkSprite("#Uden.png"),this.addChild(this.Oi,this.ra.getLocalZOrder()+1),this.Oi.x=0,this.Oi.y=0),this.Oi.visible=!0},EI:function(){null!=this.Oi&&(this.Oi.removeFromParent(),this.Oi=null),null!=this.Pi&&(this.Pi.removeFromParent(),this.Pi=null),null!=this.Ni&&(this.Ni.removeFromParent(),this.Ni=null)},Ey:function(){null!=this.Ki&&(this.Ki.removeFromParent(),this.Ki=null)},NI:function(){null!=this.ei&&(this.ei.removeFromParent(),this.ei=null)},JX:function(t){null==this.ei&&(this.ei=new BkLabel("","",17),this.addChild(this.ei,this.ra.getLocalZOrder()+1),this.ei.x=0,this.ei.y=65),t?this.ei.setString("Xong"):this.ei.setString("Đang xếp")},pY:function(){cc.eventManager.removeListener(this.Cd),cc.eventManager.removeListener(this.ba.Cd),cc.eventManager.removeListener(this.ba.Je)},lT:function(t){this.LI(),this.xe.addChild(sn(t)),null!=this.W&&(this.status!=PLAYER_STATE_READY&&this.status!=PLAYER_STATE_TABLE_OWNER?this.xe.setOpacity(100):this.xe.setOpacity(255))},LI:function(){null!=this.xe&&this.xe.removeAllChildren()},Yp:function(){null!=this.$h&&(this.$h.removeFromParent(),this.$h=null)},PT:function(t){BkGlobal.jk?(this.Yp(),this.$h=new BkChatEmoSprite(El(t+1)),this.$h.setScale(1.4),this.addChild(this.$h,1e3),this.$h.x=this.ra.x,this.$h.y=this.ra.y,this.$h.jE()):logMessage("chat emo not loaded -> reject command!")},gE:function(t,e,i){null!=this.mc&&this.mc.bu(),this.mc=new BkToolTip("toast_background.png"),this.mc.$D(0),this.mc.Wh(t),150<+this.mc.Ea.getContentSize().width&&(this.mc.$D(150),this.mc.Wh(t)),this.mc.setTextColor(cc.color(255,255,255));var n=this;this.mc.Ro((function(){n.mc=null})),this.mc.No(3),this.mc.show(e,i)}}),BkChessPlayer=BkPlayer.extend({et:null,Ej:null,ua:null,ub:null,Wb:null,vc:null,wa:null,gb:null,Xa:null,lc:null,marginLeft:0,eq:.65,ctor:function(t,e){this._super(t,e,"#khu_vuc_avatar.png"),this.setScale(GAME_SCALE)},removeFromParent:function(t){this._super(t)},Xx:function(){this.getContentSize(),this.getContentSize(),this.ba=new BkSprite("#avt_frame_bg.png"),this.addChild(this.ba),this.Ej=new BkSprite("#avt_frame.png"),this.addChild(this.Ej),this.lc=new BkChessRankSprite(-1),isWebPlatform()&&this.lc.setScale(.8),this.lc.x=this.lc.getContentSize().width/2,this.lc.y=this.lc.getContentSize().height/2,this.addChild(this.lc,1e3),this.ba.x=this.lc.getContentSize().width/2,this.ba.y=this.getContentSize().height-this.ba.getContentSize().height/2,this.Ej.x=this.ba.x,this.Ej.y=this.ba.y,this.ra=new BkSprite("#avt_frame_bg.png"),this.addChild(this.ra),this.ra.x=this.ba.x,this.ra.y=this.ba.y,this.eq=.65,this.ua=new BkSprite("#name_frame.png"),this.ua.x=this.getContentSize().width-this.ua.getContentSize().width/2,this.ua.y=this.getContentSize().height*this.eq+this.Yj(),isWebPlatform()&&(this.ua.setScale(Xa),this.ua.x=this.lc.x,this.ua.y=this.lc.y-.5*this.lc.getBoundingBox().height-this.ua.getBoundingBox().height),this.addChild(this.ua),this.marginLeft=.01*this.getContentSize().width;var t=cc.color(251,234,180),e=Oi,i=0;isWebPlatform()&&(e=Pi,i=0),this.Aa=new BkLabel("You","",e),this.Aa.x=isWebPlatform()?this.ua.x:this.ua.x-.5*this.ua.getBoundingBox().width+this.Aa.getContentSize().width/2+this.marginLeft,this.Aa.y=this.ua.y+i,this.Aa.setTextColor(t),this.addChild(this.Aa,100),this.ub=new BkSprite("#small_info_frame.png"),isWebPlatform()||this.ub.setScaleX(1.1),this.ub.x=this.ua.x-this.ua.getBoundingBox().width/2+this.ub.getContentSize().width/2,this.ub.y=this.getContentSize().height*(1-this.eq)+this.Yj(),isWebPlatform()&&(this.ub.setScale(Xa),this.ub.x=this.ua.x,this.ub.y=this.ua.y-this.ua.getContentSize().height/2-this.ua.getBoundingBox().height/2),this.addChild(this.ub),i="elo_CU.png",i=this.Oz(),this.vc=new BkSprite("#"+i),isWebPlatform()&&this.vc.setScale(Xa),this.vc.x=this.ub.x-.5*this.ub.getBoundingBox().width+this.vc.getBoundingBox().width/2,this.vc.y=this.ub.y,this.addChild(this.vc),this.Wb=new BkLabel("1000","",e),this.Wb.setTextColor(t),this.addChild(this.Wb),this.Wb.setVisible(!1),this.xe=new BkSprite,this.xe.x=this.ra.x,this.xe.y=this.ba.y-this.ba.getHeight()/2+10*GAME_SCALE,this.ji()},Yj:function(){return(new BkChessAvatar).Yj()},Oz:function(){var t="elo_CU.png";return BkGlobal.ja==K&&(t="elo_icon.png",this.Hh&&(t="elo_icon1.png")),t},Vw:function(t){null!=this.ua&&(this.ua.setVisible(t),this.Aa.setVisible(t))},iE:function(t){this.ub.setVisible(t),this.vc.setVisible(t),this.Wb.setVisible(t)},as:function(t){null!=this.wa&&(this.wa.setVisible(t),this.gb.setVisible(t),t||this.unschedule(this.Eo),isFBInstantGame()&&this.Hh?this.Xa.y=t?Math.abs(this.Xa.y):-1*Math.abs(this.Xa.y):this.Xa.setVisible(t))},IT:function(t){this.ba.setVisible(t),this.Ej.setVisible(t)},mU:function(t){this.lc.setVisible(t)},dE:function(t){this.Vw(t),this.iE(t),this.IT(t),this.mU(t)},Sn:function(){var t=this;this.vb=new BkCountDownTime("#cdtime.png");var e=this.ba.getContentSize().height;isWebPlatform()&&(e=.7*this.getContentSize().height),this.vb.setScale(e/this.vb.getContentSize().height),this.vb.x=this.ba.x,this.vb.y=this.ba.y,this.vb.setCallback((function(){t.yc()})),this.addChild(this.vb),this.SI()},SI:function(){var t=getCurrentScene();if(null!=t&&t instanceof nb&&t.Wa&&(t=t.Wa.S().Ba())&&!t.Ka&&t.P.userName==this.W.userName){var e=this;this.vb.VS((function(){if(isWebPlatform()){var t=e.getParent();if(t&&t.Kf){var i=new cc.FadeTo(.75,255),s=new cc.FadeTo(.75,0);t.Kf.setVisible(!0),t.Kf.runAction(cc.sequence(i,s)).repeatForever()}}else e.as(!1),e.Vw(!1),e.bM(),n.dW()}))}},QK:function(){var t=getCurrentScene();return null!=t&&t instanceof nb&&t.Wa?t.Wa.S():null},yc:function(){this._super();var t=!0,e=this.QK();null!=e&&(t=e.Ub()),this.as(t),this.Vw(!0),this.kw()},bg:null,gn:0,kw:function(){null!=this.bg&&(this.bg.removeFromParent(),this.bg=null,this.unschedule(this.LC))},LC:function(){this.gn--,0>=this.gn?this.kw():this.bg.setString(this.gn)},bM:function(){this.kw(),this.gn=14,this.bg=new cc.LabelBMFont(this.gn,res.rx);var t=this.ba.x-.8*this.ba.getContentSize().width-this.bg.getContentSize().width/2,e=.2*this.getContentSize().height;isWebPlatform()&&(this.bg.setScale(.4),t=this.ba.x,e=this.ba.y-.8*this.ba.getContentSize().height-this.bg.getBoundingBox().height/2),this.bg.x=t,this.bg.y=e,this.addChild(this.bg),this.schedule(this.LC,1)},ji:function(t){if(this._super(t),this.getContentSize(),this.getContentSize(),null!=this.W){this.dE(!0);var e=0;isWebPlatform()&&(e=0),this.Aa.setString(Ab(this.W.userName,10)),isWebPlatform()||(this.Aa.x=this.ua.x-.5*this.ua.getBoundingBox().width+this.Aa.getContentSize().width/2+this.marginLeft),this.Aa.y=this.ua.y+e,null!=this.ra&&this.ra.removeFromParent(),this.ra=new BkSprite;var i=new BkSpriteLoader(this.W.Hb,"#default_avatar.jpg"),n=.85*this.ba.getContentSize().height;i.setScale(n/i.getContentSize().height),i=ab(i,n),this.ra.addChild(i),this.addChild(this.ra),this.ra.x=this.ba.x,this.ra.y=this.ba.y,this.Wb.setString(this.W.$c),this.Wb.x=this.vc.x+this.vc.getBoundingBox().width/2+this.Wb.getContentSize().width/2+2,this.Wb.y=this.ub.y+e,this.Wb.setVisible(!0),null!=(e=this.lc)&&e.TV(this.W.$c),this.aF(),void 0!==t&&!0===t||(this.status==PLAYER_STATE_READY?this.Zr():this.xi())}else this.dE(!1),null!=this.ra&&this.ra.removeFromParent(),this.ra=new BkSprite("#wait_player.png"),this.ra.x=this.ba.x,this.ra.y=this.ba.y,this.addChild(this.ra)},Zr:function(){null==this.Ad&&(this.Ad=new BkSprite("#sansang.png"),this.Ad.x=0,this.Ad.y=0,this.addChild(this.Ad,this.lc.getLocalZOrder()+1)),this.Nj(),this.bF()},bF:function(){null!=this.Ad&&(this.Ad.x=this.ba.x,this.Ad.y=this.ba.y)},sE:function(){this._super(),this.opacity=100,this.xi()},Oj:function(){this._super(),this.unschedule(this.Oj)},vE:function(){null==this.ue&&(this.ue=new BkSprite("#Thang.png"),this.ue.XD(1.2*this.getContentSize().height),this.ue.x=this.ba.x,this.ue.y=this.ba.y,this.addChild(this.ue,this.lc.getLocalZOrder()+1)),this.scheduleOnce(this.Oj,5)},rE:function(){null==this.Yc&&(this.Yc=new BkSprite("#Thua.png"),this.Yc.XD(1.2*this.getContentSize().height),this.Yc.x=this.ba.x,this.Yc.y=this.ba.y,this.addChild(this.Yc,this.lc.getLocalZOrder()+1)),this.scheduleOnce(this.nl,5)},nl:function(){this._super(),this.unschedule(this.nl)},Hy:function(){this._super(),this.opacity=255,this.Zr()},Iu:function(){isWebPlatform()&&this.ba.ad((function(){}));var t=this;this.ba.Ua((function(){var e=J()-t.ba.Kb;logMessage("deltaTime "+e),1e3>e||(t.ba.Kb=J(),null!=t.W&&null!=t.wn&&t.wn.fD(t.od()))}))},ks:!1,pa:0,xc:0,po:!1,PL:function(){if(null==this.wa){this.wa=new BkSprite("#small_info_frame.png"),this.addChild(this.wa);var t="#hourglass.png";isWebPlatform()&&(t="#tuong_den.png",0==this.pa&&(t="#tuong_do.png")),this.gb=new BkSprite(t),t=this.gb.getContentSize(),this.po&&(this.gb=new BkHourGlass,t=this.gb.ku()),isWebPlatform()?(this.wa.setScale(.6),this.wa.x=this.ua.x,this.wa.y=this.ua.y-this.ua.getContentSize().height/2-this.wa.getBoundingBox().height/2,this.gb.setScale(1),this.gb.x=this.wa.x-.5*this.wa.getBoundingBox().width-t.width/2):(this.wa.x=this.getContentSize().width-this.wa.getContentSize().width/2,this.wa.y=this.getContentSize().height*(1-this.eq)+this.Yj(),this.wa.setScaleX(1.1),this.gb.x=this.wa.x-.5*this.wa.getBoundingBox().width+t.width/2+.2*t.width),this.gb.y=this.wa.y,this.addChild(this.gb)}},Kq:function(t){var e=Oi;isWebPlatform()&&(e=Pi);var i=0;this.pa=t,this.PL(),this.Hr(),isWebPlatform()?(this.Xa=new BkLabel("00:00","",e),this.Xa.setTextColor(cc.color(250,192,34)),t=0,i=2):isFBInstantGame()?(this.Xa=new BkLabel("00:00","",e),this.Xa.setTextColor(cc.color(250,192,34)),t=.02*-this.getContentSize().height):(this.Xa=new cc.LabelBMFont("00:00",res.qx),t=.03*-this.getContentSize().height),this.Xa.x=this.gb.x+this.gb.getContentSize().width/2+this.Xa.getContentSize().width/2+i,this.Xa.y=this.wa.y+t,this.To(!1),this.addChild(this.Xa),this.ie(this.xc),this.cF()},Hr:function(){null!=this.Xa&&(this.Xa.removeFromParent(),this.Xa=null)},To:function(t){null!=this.Xa&&this.fE(t)},ie:function(t){this.xc=t,null!=this.Xa&&this.Xa.getParent()&&(this.To(!0),this.Xa.setString(convertSecondToMinSec(this.xc)))},Xw:function(){this.xc&&(this.ks=!1,this.Xa.setString(convertSecondToMinSec(this.xc)),this.schedule(this.Eo,1),this.po&&this.gb.ET())},Eo:function(){0<this.xc&&!this.ks?(this.xc--,this.Xa&&this.Xa.setString(convertSecondToMinSec(this.xc))):this.unschedule(this.Eo)},cx:function(){this.ks=!0,this.unschedule(this.Eo),this.po&&this.gb.FU()},mm:function(t){this._super(t),t.WS(this),logMessage("this.clientState.tablePosition: "+this.yi.Va),this.ji()},Hh:!1,C0:function(){return this.Hh},aF:function(){this.IV(),this.cF(),this.bF()},cF:function(){this.Hh?this.OV():this.PV()},IV:function(){this.Hh?this.JV():this.KV()},KV:function(){this.lc.x=this.lc.getContentSize().width/2,this.ba.x=this.lc.x,this.Ej.x=this.ba.x,isWebPlatform()||(this.ua.x=this.getContentSize().width-this.ua.getBoundingBox().width/2,this.Aa.x=this.ua.x-.5*this.ua.getBoundingBox().width+this.Aa.getContentSize().width/2+this.marginLeft,this.ub.x=this.ua.x-this.ua.getBoundingBox().width/2+this.ub.getBoundingBox().width/2,this.vc.x=this.ub.x-.5*this.ub.getBoundingBox().width+this.vc.getBoundingBox().width/2+.015*this.getContentSize().width,this.Wb.x=this.vc.x+this.vc.getBoundingBox().width/2+this.Wb.getContentSize().width/2,this.ra.x=this.ba.x),this.XE()},JV:function(){logMessage("la avatar ben duoi-> update position"),this.lc.x=this.getContentSize().width-this.lc.getContentSize().width/2,this.ba.x=this.lc.x,this.Ej.x=this.ba.x,isWebPlatform()||(this.ua.x=this.ua.getBoundingBox().width/2,this.Aa.x=this.ua.x-(.5*-this.ua.getBoundingBox().width+this.Aa.getContentSize().width/2+this.marginLeft),this.ub.x=this.ua.x+this.ua.getBoundingBox().width/2-this.ub.getBoundingBox().width/2,this.vc.x=this.ub.x-(.5*-this.ub.getBoundingBox().width+this.vc.getBoundingBox().width/2+.015*this.getContentSize().width),this.Wb.x=this.vc.x-(+this.vc.getBoundingBox().width/2+this.Wb.getContentSize().width/2),this.ra.x=this.ba.x),this.XE()},XE:function(){var t=cc.spriteFrameCache.getSpriteFrame(this.Oz());this.vc.setSpriteFrame(t)},PV:function(){if(null!=this.wa){var t=this.ua.x-this.ua.getBoundingBox().width/2+this.ub.getBoundingBox().width/2,e=this.gb.getContentSize(),i=-4;this.po&&(e=this.gb.ku(),i=-.05*this.getContentSize().width),isWebPlatform()?(this.wa.x=this.ua.x,this.gb.x=this.wa.x-.5*this.wa.getBoundingBox().width,this.Xa.x=this.gb.x+.5*e.width+this.Xa.getContentSize().width/2+5):(this.wa.x=t,this.gb.x=this.wa.x-.5*this.wa.getBoundingBox().width+e.width/2+i+.2*e.width,this.Xa.x=this.gb.x+.5*e.width+this.Xa.getContentSize().width/2)}},OV:function(){if(null!=this.wa){var t=this.ua.x+this.ua.getBoundingBox().width/2-this.ub.getBoundingBox().width/2;this.wa.getBoundingBox();var e=this.gb.getContentSize(),i=-4;this.po&&(e=this.gb.ku(),i=-.05*this.getContentSize().width),this.wa.x=t,this.gb.x=this.wa.x-(.5*-this.wa.getBoundingBox().width+e.width/2+i+.2*e.width),this.Xa.x=this.gb.x-(.5*+e.width+this.Xa.getContentSize().width/2)}},setPosition:function(t,e){var i,n;void 0===e?(i=t.x,n=t.y):(i=t,n=e),this._super(i,n),n<cc.winSize.height/2?0<n&&(this.Hh=!0):this.Hh=!1,this.aF(),this.vb&&(this.vb.x=this.ba.x,this.vb.y=this.ba.y)},fE:function(t){this.as(t),this.iE(!t)},CL:function(){return null==this.ua?this.getBoundingBox().width:this.ua.getBoundingBox().width},wi:null,gE:function(t,e,i){null!=this.wi&&this.wi.removeSelf(),this.wi=new BkToast("Chess_toast.png"),this.wi.GD(t);var n=this;this.wi.Ro((function(){n.wi=null})),this.wi.No(3),e=this.x,t=-this.ba.getContentSize().height*GAME_SCALE,this.Hh&&(t=this.ba.getContentSize().height*GAME_SCALE),i=this.y+t,this.wi.show(e,i)}}),BkChessPlayerInHistory=BkChessPlayer.extend({ctor:function(t,e,i,n,s){this._super(t,e),this.AN=i,this.dB=n,this.result=s,this.nK(),console.log("BkChessPlayerInHistory - result: ",s),this.Kq(t.pa),this.ie(Sd),this.pK(),this.oK(),this.VG()},VG:function(){var t,e=.17;switch(this.result){case hl:t="hoa.png";break;case il:t="Thang.png",e=.35;break;case jl:t="Thua.png",e=.35;break;default:t="hoa.png"}console.log(console.log("BkChessPlayerInHistory - this.result: ",this.result)),console.log(console.log("BkChessPlayerInHistory - strResult: ",t)),(t=new BkSprite("#"+t)).setScale(e),t.x=this.ba.x,t.y=UI.xf(this.ba),this.addChild(t)},oK:function(){this.wa.y=UI.Bh(this.ua)-8-UI.Ei(this.wa),this.gb.y=this.wa.y,this.Xa.y=this.wa.y},pK:function(){var t=this.Xa.getScale();console.log("this.remainTimeText scale: ",t),this.Xa.setScale(t/.8);t=this.wa.getScaleX();var e=this.wa.getScaleY();this.wa.setScaleX(t/.75),this.wa.setScaleY(e/.7),t=this.gb.getScale(),this.gb.setScale(t/.72),this.gb.x=UI.eb(this.wa),this.gb.y=this.wa.y,t=this.ua.getScaleX(),e=this.ua.getScaleY(),this.ua.setScaleX(t/.75),this.ua.setScaleY(e/.7),t=this.Aa.getScale(),this.Aa.setScale(t/.75)},fE:function(t){this.as(t)},wZ:function(){this.dB&&(this.wa.x=UI.eb(this.ra)-1.1*UI.qa(this.wa)),this.gb.x=UI.eb(this.wa)+1.5*UI.Da(this.gb),this.Xa.x=UI.fb(this.wa)-.1*UI.qa(this.wa)-UI.Da(this.Xa)},W4:function(t){this.wa.setScaleX(t*this.wa.getScaleX()),this.wa.setScaleY(t*this.wa.getScaleY()),this.gb.setScale(t*this.gb.getScale()),(isWebPlatform()||isFBInstantGame())&&this.Xa.setFontSize(t*this.Xa.getFontSize())},vZ:function(){this.ua.setOpacity(0),this.Aa.setFontSize(33),this.Aa.x=this.ra.x,this.Aa.y=-.9*UI.Ei(this.Aa)},nK:function(){this.ub.setOpacity(0),this.vc.setOpacity(0),this.Wb.setOpacity(0),this.dB||(this.ub.x=UI.eb(this.ra)-1.1*UI.qa(this.ub),this.vc.x=UI.eb(this.ub)+1.2*UI.Da(this.vc),this.Wb.x=UI.fb(this.ub)-.1*UI.qa(this.ub)-UI.Da(this.Wb))},Iu:function(){isWebPlatform()&&this.ba.ad((function(){}));var t=this;this.ba.Ua((function(){var e=J()-t.ba.Kb;logMessage("deltaTime "+e),1e3>e||(t.ba.Kb=J(),t.AN.iH(t.W))}))},Pw:function(t){null==t&&(t=15),null!=this.vb&&(this.vb.removeFromParent(),this.vb=null),this.Sn(),this.vb.Xr(t),null!=this.Nc&&this.Nc.setVisible(!0),this.Xa.setString(convertSecondToMinSec(this.xc)),this.schedule(this.Eo,1)}}),TYPE_VALUE=[0,1,1,2,2,3,3,4,4,5,5,6,6,6,6,6],COL_VALUE=[4,3,5,2,6,0,8,1,7,1,7,0,2,4,6,8],ROW_VALUE=[0,0,0,0,0,0,0,2,2,0,0,3,3,3,3,3],LO_MAT_VUA=0,LOI_HET_CO=1,CHIEU=2,CHIEU_HET=3,LAP_3_LAN=4,HET_GIO=5,DAU_HANG=6,LOI_CHIEU_TUONG_10_LAN=7,DUOI_QUAN_MAI=8,TAG_AN_QUAN=0,CHESS_TYPES=7,RED_COLOR=0,BLACK_COLOR=1,BkChessType={Qf:{id:0,Ah:"Tướng",Nk:"Tg",Gk:"history_chess_piece_01.png",Fj:"history_chess_piece_08.png"},vp:{id:1,Ah:"Sĩ",Nk:"S",Gk:"history_chess_piece_02.png",Fj:"history_chess_piece_09.png"},yp:{id:2,Ah:"Tượng",Nk:"T",Gk:"history_chess_piece_03.png",Fj:"history_chess_piece_10.png"},Im:{id:3,Ah:"Xe",Nk:"X",Gk:"history_chess_piece_04.png",Fj:"history_chess_piece_11.png"},Hm:{id:4,Ah:"Pháo",Nk:"P",Gk:"history_chess_piece_05.png",Fj:"history_chess_piece_12.png"},Ls:{id:5,Ah:"Mã",Nk:"M",Gk:"history_chess_piece_06.png",Fj:"history_chess_piece_13.png"},Qs:{id:6,Ah:"Tốt",Nk:"B",Gk:"history_chess_piece_07.png",Fj:"history_chess_piece_14.png"}},BkChessMoveType={Fm:".",Dm:"/",wp:"-"},BkChessMoveTypeDescription={Fm:"tiến",Dm:"thoái",wp:"bình"},BkChessSize={sp:10,Em:9,yg:16},BkChessPositionOrder={xp:"t",tp:"s",np:"g",op:""},BkChessPositionOrderDescription={xp:"trước ",tp:"sau ",np:"giữa ",op:""};var X=90,Fn=103,Dn=60,En=60,ao=[4,3,2,0,6,1,5],Hn=1,Y=0;function Gn(t){switch(t){case LO_MAT_VUA:return"Lỗi lộ mặt tướng";case LOI_HET_CO:return"Lỗi mất tướng";case CHIEU:return"Chiếu tướng";case LAP_3_LAN:return"Lỗi đi lặp 3 lần";case HET_GIO:return" hết thời gian";case DAU_HANG:return" đầu hàng";case CHIEU_HET:return"Chiếu hết";case LOI_CHIEU_TUONG_10_LAN:return" Không được chiếu tướng 10 lần liên tục";case DUOI_QUAN_MAI:return" Lỗi đuổi mãi một quân";default:return"Lỗi nước đi không hợp lệ"}}BkChessPiece=cc.Class.extend({Fa:null,rowIndex:null,ea:null,pa:0,Ja:0,sa:null,Ck:null,ctor:function(t){this.Ja=TYPE_VALUE[t%16],this.color=t/16,this.Bw(t),this.sa=!1,this.Ck=this.getPosition(),this.Fa=t,this.pa=Math.floor(t/16)},Bw:function(t){16>t?(this.ea=COL_VALUE[t%16],this.rowIndex=ROW_VALUE[t%16]):(this.ea=8-COL_VALUE[t%16],this.rowIndex=9-ROW_VALUE[t%16])},getPosition:function(){return 9*this.rowIndex+this.ea},mx:function(t){this.rowIndex=this.Bq(t),this.ea=this.wq(t),this.Ck=this.getPosition()},Bq:function(t){return Math.floor(t/9)},wq:function(t){return t%9},mP:function(t){return 0>t||89<t},bN:function(t,e,i){for(var n=[0,0,0,1,1,1,2,2,2,9,9,9,8,8,8,7,7,7],s=[3,4,5,3,4,5,3,4,5,3,4,5,3,4,5,3,4,5],r=0;9>r;r++)if(t==s[r+9*i]&&e==n[r+9*i])return!0;return!1},cN:function(t,e){return 0==e?4>=t:5<=t},OA:function(t,e){return this.Ja==BkChessType.Qf.id||this.Ja==BkChessType.vp.id?this.bN(t,e,this.pa):this.Ja!=BkChessType.yp.id||this.cN(e,this.pa)},vN:function(t,e,i,n){return t==i?1==Math.abs(e-n):e==n&&1==Math.abs(t-i)},sN:function(t,e,i,n){return 1==Math.abs((t-i)*(e-n))},uN:function(t,e,i,n,s){return 2==Math.abs(e-n)&&2==Math.abs(t-i)&&0>s[(t+i)/2][(e+n)/2]},GB:function(t,e,i,n,s){var r=0,o=0;r=0;if(t==i){for(r=Math.min(e,n)+1,o=Math.max(e,n)-1;r<=o;r++)if(0<=s[t][r])return!1;return!0}if(e==n){for(r=Math.min(t,i)+1,o=Math.max(t,i)-1;r<=o;r++)if(0<=s[r][e])return!1;return!0}return!1},oN:function(t,e,i,n,s){if(0>s[i][n])return this.GB(t,e,i,n,s);var r=0,o=r=0,a=0;if(t==i){for(r=Math.min(e,n)+1,o=Math.max(e,n)-1;r<=o;r++)0<=s[t][r]&&a++;return 1==a}if(e==n){for(r=Math.min(t,i)+1,o=Math.max(t,i)-1,a=0;r<=o;r++)0<=s[r][e]&&a++;return 1==a}return!1},hN:function(t,e,i,n,s){for(var r=[-1,1,2,2,1,-1,-2,-2],o=[2,2,1,-1,-2,-2,-1,1],a=[0,0,1,1,0,0,-1,-1],c=[1,1,0,0,-1,-1,0,0],h=0;h<r.length;h++)if(i-t==r[h]&&n-e==o[h]){if(0>s[t+a[h]][e+c[h]])return!0;break}return!1},tN:function(t,e,i,n,s){if(0==s){if(t==i&&e+1==n||5<=e&&e==n&&1==Math.abs(t-i))return!0}else if(t==i&&e-1==n||4>=e&&e==n&&1==Math.abs(t-i))return!0;return!1},tt:function(t,e){if(this.mP(t))return!1;var i=this.wq(t),n=this.Bq(t);if(i==this.ea&&n==this.rowIndex||!this.OA(i,n))return!1;var s=!1;if(0<=e[i][n]&&(s=Math.floor(e[i][n]/16)==this.pa),s)return!1;switch(this.Ja){case BkChessType.Qf.id:return this.vN(this.ea,this.rowIndex,i,n);case BkChessType.vp.id:return this.sN(this.ea,this.rowIndex,i,n);case BkChessType.yp.id:return this.uN(this.ea,this.rowIndex,i,n,e);case BkChessType.Im.id:return this.GB(this.ea,this.rowIndex,i,n,e);case BkChessType.Hm.id:return this.oN(this.ea,this.rowIndex,i,n,e);case BkChessType.Ls.id:return this.hN(this.ea,this.rowIndex,i,n,e);case BkChessType.Qs.id:return this.tN(this.ea,this.rowIndex,i,n,this.pa)}return!1}}),BkCoUpPiece=BkChessPiece.extend({$u:null,he:null,ctor:function(t){this._super(t),this.$u=this.Ja==BkChessType.Qf.id},OA:function(t,e){return!(!this.$u||this.Ja==BkChessType.Qf.id)||this._super(t,e)}}),BkChessPieceSprite=BkSprite.extend({index:null,Ja:null,pa:null,rowIndex:null,ea:null,sa:null,sc:Hn,hc:Hn,qB:!1,aZ:null,$Y:null,md:null,isSelected:!1,ve:!1,hB:!1,Lg:null,qc:null,Lx:.8,ctor:function(t){this._super(res.gt),this.index=t,this.Fu(t),this.fM(),0==t||16==t?(this.md=new BkSprite("#trangthai_quananduoc.png"),this.md.x=this.width/2-1,this.md.y=this.height/2+3):(this.md=new BkSprite("#trangthai_quananduoc.png"),this.md.x=this.width/2,this.md.y=this.height/2),this.md.setScale(.5),this.md.setVisible(!1),t=getSpriteFromImage("#nuocdi.png");var e=this.md.getContentSize().height;t.setScale(e/t.getContentSize().height),t.x=.5*this.md.getContentSize().width,t.y=.5*this.md.getContentSize().height,this.md.SU=t,this.md.addChild(t),this.addChild(this.md,33);var i=30;isWebPlatform()?(t=Dn,e=En,i=26):(t=X,e=Fn),this.qc=new BkSprite("#sl_quanan.png"),this.qc.x=.7*t,this.qc.y=.25*e,this.qc.setScale(28/65*t/this.qc.getContentSize().width),this.qc.setVisible(!1),this.addChild(this.qc),this.Uc=new BkLabel("0","",i,!0),this.Uc.x=this.qc.x,this.Uc.y=this.qc.y,this.Uc.setVisible(!1),this.addChild(this.Uc,34),this.Lg=new BkSprite(res.gt),isWebPlatform()?this.Lg.setTextureRect(cc.rect(8*Dn,En,Dn,En-1)):this.Lg.setTextureRect(cc.rect(8*X+0,Fn+0,X,Fn)),this.Lg.setVisible(!1),this.Lg.x=this.width/2,this.Lg.y=this.height/2,this.addChild(this.Lg)},Fu:function(t){this.Bw(t),this.mg()},Bw:function(t){this.Ja=TYPE_VALUE[t%16],this.pa=Math.floor(t/16),this.cg=1,16>t?(this.ea=COL_VALUE[t%16],this.rowIndex=ROW_VALUE[t%16]):(this.ea=8-COL_VALUE[t%16],this.rowIndex=9-ROW_VALUE[t%16]),this.sa=!1},fM:function(){this.Vs=xb(),cc.eventManager.addListener(this.Vs,this)},Mk:function(t){t?this.Vs.setEnabled(!0):this.Vs.setEnabled(!1)},Tz:function(t){var e,i;isWebPlatform()?(e=Dn,i=En):(e=X,i=Fn);var n=this.pa;return this.qB&&(n=0==this.pa?1:0),isWebPlatform()?cc.rect(t*e+0*(t+1),n*i,e,i):cc.rect(t*e+0*(t+1),n*i+0*(n+1),e,i)},mg:function(){this.hc==Y&&this.Ja!=BkChessType.Qf.id?this.setTextureRect(this.Tz(7)):this.setTextureRect(this.Tz(ao[this.Ja])),null!=this.Lg&&null!=this.Lg&&this.Lg.setVisible(this.sc==Y&&this.sa&&this.hc==Hn),null!=this.Uc&&null!=this.Uc&&(1<this.cg?(this.qc.setVisible(!0),this.Uc.setVisible(!0),this.Uc.setString(this.cg)):(this.qc.setVisible(!1),this.Uc.setVisible(!1)))},mj:function(t){if(this.md.setVisible(t),t){t=new cc.FadeTo(.5,0);var e=new cc.FadeTo(.5,255);t=cc.sequence(t,e).repeatForever(),this.md.runAction(t),this.md.SU.runAction(t.clone())}},ka:function(){return BkGlobal.ek?BkGlobal.ek.ka():BkHistoryGameLayer},Ik:function(){var t=this.ka();this.sa?this.setPosition(-100,-100):this.setPosition(t.Sb(this.ea),t.Tb(this.rowIndex))},aS:function(t,e){this.sa?this.setPosition(-100,-100):this.setPosition(t,e)},bS:function(){var t=this.ka();this.sa||(this.setVisible(!0),this.wD(),this.setScale(this.Lx),this.setPosition(t.Sb(this.ea),t.Tb(this.rowIndex)))},N3:function(){},pT:function(t,e){if(!this.sa){this.setVisible(!0),this.wD(),this.setScale(this.Lx),this.ea=t,this.rowIndex=e;var i=this.ka();this.setPosition(i.Sb(this.ea),i.Tb(this.rowIndex))}},moveTo:function(t,e){this.ea=t,this.rowIndex=e;var i=this.ka();this.move(.2,i.Sb(t),i.Tb(e))},move:function(t,e,i){if(this.ve&&0==this.hB)return this.schedule((function n(){this.move(t,e,i),this.hB=!0,this.unschedule(n)}),.1),!0;var n=cc.callFunc(this.zI,this),s=cc.moveTo(t,cc.p(e,i),0);n=cc.sequence(s,n);this.y==i&&this.x==e||(this.runAction(n),this.ve=!0)},zI:function(){this.ve=!1,this.setLocalZOrder(this.index)},uK:function(){this.sc=this.hc=Hn,this.mg()},nT:function(t){this.sc=t,this.mg()},VD:function(t){this.hc=t,this.mg()},Cu:function(){this.cg++,this.mg()},wD:function(){this.cg=0,this.mg()}}),BkAnimation=cc.Layer.extend({ctor:function(){this._super(),this.setVisible(!0),this.cO=new BkSprite("#btn_NhiemVu_haveNewTask.png"),this.addChild(this.cO)},scaleTo:function(t,e,i,n,s){i=cc.scaleTo(e,i,n),e=cc.scaleTo(e,1,1),s=cc.delayTime(s),s=cc.sequence(i,s,e).repeatForever(),t.runAction(s)},moveBy:function(t,e,i,n,s){var r=cc.moveBy(e,i,n);e=cc.moveBy(e,-i,n),s=cc.delayTime(s),s=cc.sequence(r,s,e).repeatForever(),t.runAction(s)},blink:function(t){var e=cc.blink(5,10);e=cc.sequence(e).repeatForever();t.runAction(e)},k0:function(t){var e=cc.scaleTo(.13,1.2,1.2),i=cc.scaleTo(.13,1,1);cc.moveBy(.13,10,0),cc.moveBy(.13,-10,0),cc.moveBy(.13,-10,0),cc.moveBy(.13,10,0);var n=cc.blink(1,2),s=cc.delayTime(2.5);e=cc.sequence(e,i,e,i,s,n,s).repeatForever();t.runAction(e)},EZ:function(t){var e=cc.scaleTo(.13,.8,.8),i=cc.scaleTo(.13,1,1),n=cc.delayTime(5);e=cc.sequence(e,i,e,i,n).repeatForever();t.runAction(e)}}),BkStarAnimation=cc.Layer.extend({Z5:function(){var t=cc.delayTime(.8);this.runAction(cc.sequence(cc.callFunc(this.js,this,1),t,cc.callFunc(this.js,this,2),t,cc.callFunc(this.js,this,3),t,cc.callFunc(this.js,this,4)))},zZ:function(t){var e=new cc.fadeOut(2),i=new cc.fadeIn(0);e=cc.sequence(e,i);t.runAction(e)},Yz:function(t){return 1==t?(null==this.is&&(this.is=new BkSprite("#starlight.png"),this.is.setScale(.7,.7),this.addChild(this.is)),this.is):2==t?(null==this.rm&&(this.rm=new BkSprite("#starlight.png"),this.rm.setScale(.8,.8),this.rm.x+=10,this.addChild(this.rm)),this.rm):3==t?(null==this.sm&&(this.sm=new BkSprite("#starlight.png"),this.sm.setScale(.5,.5),this.sm.x+=20,this.addChild(this.sm)),this.sm):4==t?(null==this.Xo&&(this.Xo=new BkSprite("#starlight.png"),this.Xo.x+=30,this.addChild(this.Xo)),this.Xo):void 0},js:function(t,e){var i=new cc.moveBy(2,0,50),n=cc.fadeOut(2),s=cc.fadeIn(0);n=cc.sequence(n,s),i=cc.spawn(i,n);this.Yz(e).runAction(cc.sequence(i,cc.callFunc(this.kP,this.Yz(e)))).repeatForever()},kP:function(t){t.y-=50}}),Ma=1,tl=2,BkDialogWindowWithDynamicButtons=BkBaseChessWindow.extend({type:Ma,la:null,We:null,Tc:null,Ne:null,Sp:null,Tp:null,Jx:10,Qq:!1,ctor:function(t,e,i,n,s){console.log("BkDialogWindowWithDynamicButtons - txtButton1: "+n),console.log("BkDialogWindowWithDynamicButtons - txtButton2: "+s);var r=isWebPlatform()?cc.size(506,280):cc.size(700,460),o=50,a=bkScaleSizeUtil(r);logMessage("Windows size after scale: "+a.width+" - "+a.height),null!=i&&(a=i),this._super(t,a),this.Cc(!1),this.type=e,this.Ob("title_wd_thongbao.png"),this.We=bkScaleSizeUtil(r),isWebPlatform()?(this.la=new cc.LabelTTF("","Tahoma",44,cc.size(2*this.We.width-180,0),cc.TEXT_ALIGNMENT_CENTER,cc.VERTICAL_TEXT_ALIGNMENT_TOP),this.la.setScale(.5),this.la.setFontFillColor(v),this.la.setDimensions(cc.size(1.4*r.width,0)),this.la.y=this.Q.height/2+this.la.getBoundingBox().height/4):(this.la=new cc.LabelTTF("Thông báo","Tahoma",30,cc.size(this.We.width-2*o,0),cc.TEXT_ALIGNMENT_CENTER,cc.VERTICAL_TEXT_ALIGNMENT_TOP),t=.035*cc.winSize.height/this.la.getContentSize().height,o=(this.We.width-2*o)/t,this.la.setContentSize(cc.size(o,0)),this.la.setDimensions(cc.size(o,0)),this.la.setScale(t),this.la.setFontFillColor(v),this.la.y=this.Q.height/2+this.la.getContentSize().height/2),this.la.x=this.Q.width/2,this.lb.addChild(this.la),this.Tc=new BkButton(x,x,x,x,ccui.Widget.PLIST_TEXTURE),this.Tc.setTitleText(n),this.Tc.setTitleFontName(ma()),this.Tc.setTitleFontSize(17),this.Tc.setTitleColor(cc.color(71,44,27)),this.Tc.wL().y+=.1*this.Tc.getBoundingBox().height,n=this.Tc.getContentSize().width/2*GAME_SCALE+20,this.Tc.setScale(GAME_SCALE),this.Tc.x=this.la.x-n,this.Tc.y=this.Tc.getContentSize().height*GAME_SCALE*1.1,this.lb.addChild(this.Tc);var c=this;this.Tc.addClickEventListener((function(){null!=c.Sp&&c.df(null),null!=c.Sp&&(c.Sp(),c.am=null)})),this.Ne=new BkButton(x,x,x,x,ccui.Widget.PLIST_TEXTURE),this.Ne.setTitleText(s),this.Ne.setTitleFontName(ma()),this.Ne.setTitleFontSize(17),this.Ne.setTitleColor(cc.color(71,44,27)),this.Ne.getTitleRenderer().y+=.1*this.Ne.getBoundingBox().height,this.Ne.setScale(GAME_SCALE),this.Ne.x=this.la.x+n,this.Ne.y=this.Tc.y,this.lb.addChild(this.Ne),this.Ne.addClickEventListener((function(){null!=c.Tp&&c.df(null),null!=c.Tp&&(c.Tp(),c.ll=null)})),this.Dt()},Dt:function(){this.type==Ma?(this.Tc.setVisible(!0),this.Tc.x=this.la.x):this.type==tl&&(this.Tc.setVisible(!0),this.Ne.setVisible(!0))},So:function(t){this.la.setString(t),console.log("this.contentMess.getContentSize().height "+this.la.getContentSize().height)},show:function(){this.Oa()},ZS:function(t){this.Sp=t},$S:function(t){this.Tp=t},setTextColor:function(t){this.la.setFontFillColor(t)}}),BkConfirmPopup=BkDialogWindow.extend({ctor:function(t,e,i){this._super(t,e,i)},removeSelf:function(){logMessage("removeSelf BkConfirmPopup"),U.cc=null,this._super()}}),BkConfirmPopupWithDynamicButtons=BkDialogWindowWithDynamicButtons.extend({ctor:function(t,e,i,n,s,r){this._super(t,e,i,n,s,r)},removeSelf:function(){logMessage("removeSelf BkConfirmPopupWithDynamicButtons"),this._super()}}),BkNotifyContentWindow=BkBaseChessWindow.extend({Az:-1,Bz:-1,HE:"",IE:"",la:null,ctor:function(t,e,i,n,s,r){this.Az=i,this.Bz=s,this.HE=n,this.IE=r;var o=isWebPlatform()?cc.size(586,360):cc.size(700,460);r=50,n=31;var a=bkScaleSizeUtil(o);this._super("",a),this.Ob("title_wd_thongbao.png"),this.We=bkScaleSizeUtil(o),isWebPlatform()?(n=18,this.la=new cc.LabelTTF(t,"Tahoma",44,cc.size(2*this.We.width-40,0),cc.TEXT_ALIGNMENT_CENTER,cc.VERTICAL_TEXT_ALIGNMENT_TOP),this.la.setDimensions(cc.size(1.4*o.width,0)),this.la.setScale(.5),this.la.setFontFillColor(v),this.la.y=this.Q.height/2+this.la.getBoundingBox().height/4):(this.la=new BkLabelTTF("thong bao","Tahoma",30,cc.size(this.We.width-2*r,0),cc.TEXT_ALIGNMENT_CENTER,cc.VERTICAL_TEXT_ALIGNMENT_TOP),o=.035*cc.winSize.height/this.la.getContentSize().height,r=(this.We.width-2*r)/o,this.la.setContentSize(cc.size(r,0)),this.la.setDimensions(cc.size(r,0)),this.la.setScale(o),this.la.setFontFillColor(v),this.la.y=this.Q.height/2+this.la.getContentSize().height/2),this.la.x=this.Q.width/2,this.lb.addChild(this.la),this.la.setString(t);var c=this;(t=new BkButton(x,la,x,x,ccui.Widget.PLIST_TEXTURE)).setTitleText(this.gA(i)),t.setTitleFontName(ma()),t.setTitleFontSize(n),t.setTitleColor(cc.color(71,44,27)),isWebPlatform()||(t.getTitleRenderer().y+=.1*t.getBoundingBox().height),t.setScale(GAME_SCALE),t.x=this.Q.width/2,t.y=t.getBoundingBox().height,this.T(t),t.addClickEventListener((function(){c.mO()})),2==e&&(e=t.getContentSize().width/2*GAME_SCALE+20,t.x-=e,(i=new BkButton(x,la,x,x,ccui.Widget.PLIST_TEXTURE)).setTitleText(this.gA(s)),i.setTitleFontName(ma()),i.setTitleFontSize(n),i.setTitleColor(cc.color(71,44,27)),isWebPlatform()||(i.getTitleRenderer().y+=.1*t.getBoundingBox().height),i.setScale(GAME_SCALE),i.x=this.Q.width/2+e,i.y=t.y,this.T(i),i.addClickEventListener((function(){c.nO()})))},gA:function(t){return 0===t?"Đóng":1===t?"Đồng ý":2==t?"Xem chi tiết":3===t?"Cập nhật":4==t?"Bạn bè":5===t?"Nhận tim":6===t?"Mời bạn FB":"Đồng ý"},nO:function(){this.$C(this.Bz,this.IE)},mO:function(){this.$C(this.Az,this.HE)},$C:function(t,e){if(this.removeSelf(),logMessage("processClickButton: "+t+" webURL: "+e),1!==t)if(2===t)Wa(e,"Thông báo");else if(3===t)isWebPlatform()?cc.sys.openURL(e):n.openURL(e);else{var i=getCurrentScene(),s=null;i&&(s=i instanceof hb?i.Se:i.ka()),4===t?((i=new BkFriendsWindow).Ab(s),i.Oa()):5===t?((i=new BkAddHeartWindow).Ab(this),i.Ab(s),i.Oa()):6===t&&BkLogicManager.S().St()}}}),BkToast=BkSprite.extend({background:null,XN:"",Ea:null,Lj:null,RM:!1,ctor:function(t){this._super(),this.XN=t,t=new cc.SpriteBatchNode("Chess_toast.png"),console.log("BkToast - ctor - test_batch: ",t)},CA:function(){var t=new cc.SpriteBatchNode("Chess_toast.png");this.background=new cc.Scale9Sprite,this.background.updateWithBatchNode(t,cc.rect(0,0,37,38),!1,cc.rect(12,12,12,12)),this.addChild(this.background)},bT:function(t,e){var i=bkFontSizeUtil(isFBInstantGame()&&!FBInstant.Rz().toLowerCase().zA("web")?40:18);this.Ea=new BkLabelTTF(t,"",i,cc.size(360,0),cc.TEXT_ALIGNMENT_CENTER,cc.VERTICAL_TEXT_ALIGNMENT_CENTER),e*=2,this.Ea.setContentSize(cc.size(e,0)),this.Ea.setDimensions(cc.size(e,0)),this.Ea.setString(t),this.addChild(this.Ea);i=this.Ea.getContentSize().width+20;var n=this.Ea.getContentSize().height+10;35>n&&(n=35),45>i&&(i=45),this.background.width=i,this.background.height=n},Wh:function(t,e){var i=new cc.SpriteBatchNode("Chess_toast.png");if(console.log("setContentText - test_batch: ",i),this.CA(),e=null==e?180:e,isWebPlatform()||isFBInstantGame())this.bT(t,e);else{this.Ea=new BkLabel(t,"",bkFontSizeUtil(isWebPlatform()?18:40)),this.Ea.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),this.Ea.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);var n=cc.winSize.height*(isWebPlatform()?.025:.035)/this.Ea.getContentSize().height;this.Ea.Yb(n),this.Ea.setTextColor(cc.color.WHITE);var s=.03*cc.winSize.width,r=(i=.004*cc.winSize.height,.8*cc.winSize.width);this.RM&&(r=.5*cc.winSize.width);var o=this.Ea.getBoundingBox().width;o+2*s<r&&(r=o+2*s),this.Ea.boundingWidth=r/n,this.addChild(this.Ea),n=r,i=this.Ea.getBoundingBox().height+2*i,this.background.width=n,this.background.height=i}},show:function(t,e){if(cc.director.getRunningScene()){var i=cc.director.getRunningScene();null!=t&&(this.x=t),null!=e&&(this.y=e),i.addChild(this,Ud)}},removeSelf:function(){this.removeFromParent(),null!=this.Lj&&this.Lj()},Ro:function(t){this.Lj=t},No:function(t){void 0===t&&(t=5),this.scheduleOnce(this.removeSelf,t)},GD:function(t){this.CA(),isFBInstantGame()&&FBInstant.Rz().toLowerCase().zA("web")?this.Ea=new BkLabel(t,"",15):this.Ea=new BkLabel(t,"",35),this.Ea.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),this.Ea.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);var e=GAME_SCALE;isFBInstantGame()&&(e=1),this.Ea.setScale(e),this.Ea.setTextColor(cc.color.WHITE);var i=.03*cc.winSize.width;t=.004*cc.winSize.height;var n=.5*cc.winSize.width,s=this.Ea.getBoundingBox().width;s+2*i<n&&(n=s+2*i),this.Ea.boundingWidth=n/e,this.addChild(this.Ea),e=n,i=this.Ea.getBoundingBox().height+2*t,isFBInstantGame()&&(i=this.Ea.getBoundingBox().height*Math.ceil(s/n)+2*t),this.background.width=e,this.background.height=i}}),BkWebview=BkBaseLayer.extend({background:null,jp:null,fF:"",Kc:null,ctor:function(t,e){this._super();var i=cc.winSize;if(this.background=new BkSprite(res.gF),this.background.scaleX=i.width/this.background.getContentSize().width,this.background.scaleY=i.height/this.background.getContentSize().height,this.background.x=i.width/2,this.background.y=i.height/2,this.addChild(this.background),this.fF=t,this.jp=new ccui.WebView(this.fF),this.jp.setContentSize(.9*cc.winSize.width,.86*cc.winSize.height),this.jp.setPosition(.5*cc.winSize.width,.455*cc.winSize.height),this.jp.setScalesPageToFit(!0),this.addChild(this.jp),null!=e){logMessage("title "+e);var s=new BkLabel(e,"",50);s.setTextColor(cc.color(251,234,180));var r=58*Math.PI/360;s.enableShadow(cc.color(0,0,0,191),cc.size(3,3),r),s.x=i.width/2,s.y=.93*i.height,this.addChild(s)}if(cc.sys.isNative){var o=n.GK();n.Tj()}this.Kc=new BkButton("close_butt.png","close_butt_press.png","close_butt.png","close_butt.png",ccui.Widget.PLIST_TEXTURE),this.Kc.setScale(GAME_SCALE),this.Kc.x=i.width-this.Kc.getBoundingBox().width/2,this.Kc.y=i.height-this.Kc.getBoundingBox().height/2,isFBInstantGame()&&(this.Kc.x=.92*i.width-this.Kc.getBoundingBox().width/2,this.Kc.y=.93*i.height-this.Kc.getBoundingBox().height/2),this.addChild(this.Kc);var a=this;this.Kc.addClickEventListener((function(){cc.sys.isNative&&n.jS(o),a.removeFromParent()}))}});var bo=70;BkTextfieldChangeHeart=BkSprite.extend({delay:null,wb:null,Qm:0,uc:null,ctor:function(t,e){this._super(),this.uc=t,this.Qm=e,this.wb=0<this.Qm?new cc.LabelBMFont("",res.kp):new cc.LabelBMFont("",res.sx),this.wb.textAlign=cc.TEXT_ALIGNMENT_CENTER,this.setVisible(!1),this.addChild(this.wb),this.wb.retain()},Wh:function(t){this.wb.setString(t),this.wb.x=this.wb.getContentSize().width/2},Rt:function(){this.x=this.uc.x-.1*this.uc.getBoundingBox().width,this.y=this.uc.y+this.uc.getBoundingBox().height/2,getCurrentScene().addChild(this),this.delay=0,0<this.uc.Qh&&(this.delay=2*this.uc.Qh);var t=cc.callFunc(this.Kv,this),e=cc.callFunc(this.Rv,this),i=cc.delayTime(.5);isWebPlatform()&&(this.wb.setScale(.6),bo=-35);var n=cc.moveTo(1.5,cc.p(this.wb.x,this.wb.y+bo));cc.fadeTo(1.5,0),n=cc.spawn(n),t=cc.sequence(e,n,i,t),0===this.delay?this.wb.runAction(t):this.wb.runAction(cc.sequence(cc.delayTime(this.delay),t)),this.uc.Qh++},Kv:function(){this.uc.Qh--,this.setVisible(!1),this.removeFromParent(),this.wb.release()},Rv:function(){this.wb.opacity=255,this.setVisible(!0)}}),BkLogoutConfirmPopup=BkDialogWindow.extend({ctor:function(t,e){this.Jx=20,this._super(t,e,bkScaleSizeUtil(DEFAULT_SIZE_DW)),this.Cc(!0);var i=new BkSprite(res.zp);BkLogicManager.S().eo=!1,BkGlobal.isLoginFacebook||this.T(i);var n=new BkLabelTTF("Xóa thông tin đăng nhập","",16);n.setFontFillColor(cc.color(225,227,26)),n.x=n.width/4+20,n.y=n.height/4,i.addChild(n),this.$e=new BkCheckBox,this.$e.x=n.x-n.width/4-this.$e.width/2-45,this.$e.y=n.y,i.addChild(this.$e);var s=this;this.$e.addEventListener((function(){logMessage("check isDeleteLoginState"),BkLogicManager.S().eo=s.$e.isSelected()}),this),i.setContentSize(cc.size(this.$e.width+n.width/2,this.$e.height)),i.x=this.ab().width/2,i.y=this.ab().height/2-10,i.ad(),i.Ua((function(){logMessage("checkBoxClickArea"),s.$e.setSelected(!s.$e.isSelected()),BkLogicManager.S().eo=s.$e.isSelected()})),this.So("Cảm ơn bạn đã tham gia Cờ Tướng - Cờ Úp.\n Bạn có muốn thoát không?")},eo:function(){return null!=this.$e&&this.$e.isSelected()}}),BkChooseAccountWindow=BkBaseChessWindow.extend({xk:"",Ii:1,ctor:function(t){var e=cc.size(610,680);isWebPlatform()||(e=cc.size(600*GAME_SCALE,770*GAME_SCALE)),this._super("",e),this.xk=t.xk,this.Cc(!0),this.Ii=1,(e=t.tn)<t.vl&&(e=t.vl),e<t.kq&&(e=t.kq,this.Ii=2),e<t.lq&&(e=t.lq,this.Ii=2),logMessage("maxElo: "+e+" this.idAccLK: "+this.Ii),this.rd(t),this.Ob("title_wd_dongbo.png")},rd:function(t){var e=this.Q.width/5,i=GAME_SCALE,n=30,s=.75;isWebPlatform()&&(n=16,s=i=.6);var r=this,o=null,a=null,c=null,h=.01*-this.Q.width;(o=new BkSprite("#smallFrame.png")).setScaleX(GAME_SCALE),o.setScaleY(1*GAME_SCALE),o.x=.25*this.Q.width+h,o.y=.17*this.Q.height+o.getBoundingBox().height/2,this.T(o),o.Ua((function(){c.x=o.x,c.y=o.y,r.Ii=1})),(a=new BkSprite("#smallFrame.png")).setScaleX(GAME_SCALE),a.setScaleY(1*GAME_SCALE),a.x=.75*this.Q.width-h,a.y=o.y,this.T(a),a.Ua((function(){c.x=a.x,c.y=a.y,r.Ii=2}));h=cc.spriteFrameCache.getSpriteFrame("select_eff.png");var l=cc.rect(91,99,91,99);(c=new cc.Scale9Sprite(h,l)).setScaleX(GAME_SCALE),c.setScaleY(1*GAME_SCALE),1==this.Ii?(c.x=o.x,c.y=o.y):(c.x=a.x,c.y=a.y),this.T(c);var u=new zb(t.jt,Math.max(t.tn,t.vl));this.T(u),u.setScale(s*GAME_SCALE),u.x=o.x,u.y=o.y+o.getBoundingBox().height/2-.8*u.getBoundingBox().height;var d=16;isWebPlatform()||(u.x=u.getBoundingBox().width/2+e-80,d=13);var _=new BkLabel(Ab(t.xk,d),"",n,!0);_.setTextColor(R),_.x=o.x,_.y=u.y-.87*u.getBoundingBox().height-_.getBoundingBox().height,isWebPlatform()?_.y=u.y-.45*u.getBoundingBox().height-_.getBoundingBox().height:_.setScale(GAME_SCALE),this.T(_,1,0),(l=this.cq(t.tn,"CT_iconInfoWD.png",t.ew)).setScale(GAME_SCALE);var g=l.getContentSize().height*i*.1;l.x=o.x,l.y=_.y-_.getBoundingBox().height/2-l.getContentSize().height*GAME_SCALE/2-g,this.T(l),isWebPlatform()&&(l.x+=35,l.y=_.y-_.getContentSize().height/2-l.getBoundingBox().height/2),(e=this.cq(t.vl,"CU_iconInfoWD.png",t.cw)).setScale(GAME_SCALE),e.x=l.x,e.y=l.y-l.getBoundingBox().height/2-e.getBoundingBox().height,this.T(e);var f=null;h=null;logMessage("eloSpriteCT1.getContentSize().height *GAME_SCALE: "+l.getContentSize().height*GAME_SCALE+" deltaY: "+g),(h=new BkSprite("#line.png")).setScale(i),h.x=o.x,h.y=l.y-l.getContentSize().height*GAME_SCALE/2-2*g,this.T(h),e.x=l.x,e.y=h.y-e.getContentSize().height*GAME_SCALE/2-2*g,g=new zb(BkGlobal.P.Hb,Math.max(BkGlobal.P.Ai,BkGlobal.P.Bi)),this.T(g),g.setScale(s*GAME_SCALE),g.x=a.x,g.y=u.y,s=new BkLabel(Ab(BkGlobal.P.userName,d),"",n,!0),isWebPlatform()||s.setScale(GAME_SCALE),s.setTextColor(R),s.x=a.x,s.y=_.y,this.T(s,1,0),(s=this.cq(BkGlobal.P.Ai,"CT_iconInfoWD.png",t.dw)).setScale(GAME_SCALE),s.x=a.x,s.y=l.y,isWebPlatform()&&(s.x+=35),this.T(s),(t=this.cq(BkGlobal.P.Bi,"CU_iconInfoWD.png",t.bw)).setScale(GAME_SCALE),t.x=s.x,t.y=e.y,this.T(t),(f=new BkSprite("#line.png")).setScale(i),f.x=a.x,f.y=h.y,this.T(f),(t=createBkButtonPlist("btnCapNhat.png","btnCapNhatPress.png","btnCapNhat.png","btnCapNhat.png")).setScale(GAME_SCALE),t.x=this.Q.width/2,t.y=.1*this.Q.height,this.T(t),t.addClickEventListener((function(){var t=r.xk;1!=r.Ii&&(t=BkGlobal.P.userName),logMessage("nameLink"+t),r.OS(t)})),(n=new BkLabel("Hãy chọn tài khoản mà bạn muốn giữ lại để đồng bộ với Facebook. Tài khoản còn lại sẽ được xóa vĩnh viễn khỏi hệ thống.","",n)).setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),n.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),n.setScale(i),n.setTextColor(v),n.boundingWidth=.9*this.Q.width/i,n.x=this.Q.width/2,n.y=o.y+.57*o.getBoundingBox().height+n.getBoundingBox().height/2,this.T(n)},cq:function(t,e,i){var n=new BkSprite;n.setContentSize(cc.size(280,78)),e=new BkSprite("#"+e);var s=195*.554,r=143*.554;logMessage("widIcon: "+s+" scaleIcon: 0.554 heiIcon: "+r),e.setScale(.554),e.x=.45*s,e.y=n.getContentSize().height/2,n.addChild(e);var o=.25*r,a=.05*s,c=28;return isWebPlatform()&&(c=16,a-=12,o=.15*r),t=[new BkLabelItem("Elo: ",c,R,1,!0),new BkLabelItem(t,c,cc.color(174,18,29),1,!0)],(t=new BkLabelSprite(t)).x=e.x+.5*s+a,t.y=e.y+o-.5*t.getContentSize().height,n.addChild(t),2e7>i?(t=[new BkLabelItem("Hạng: ",c,R,1,!0),new BkLabelItem(i,c,cc.color(174,18,29),1,!0)],(i=new BkLabelSprite(t)).x=e.x+.5*s+a,i.y=e.y-o-.5*i.getContentSize().height):((i=new BkLabel("Chưa x.hạng","",c,!0)).x=e.x+.5*s+.5*i.getContentSize().width+a,i.y=e.y-o,i.setTextColor(R)),n.addChild(i),n},OS:function(t){var e=new BkPacket;e.NF(BkGlobal.oq,t),BkConnectionManager.send(e)}}),BkRenameWindow=BkBaseChessWindow.extend({fa:null,ctor:function(){var t=isWebPlatform()?cc.size(506,380):cc.size(620*GAME_SCALE,470*GAME_SCALE);this._super("",t),this.Cc(!0),this.Ob("title_wd_doiten.png",3),this.hg(),isWebPlatform()||(this.y=.3*this.Q.height)},hg:function(){var t=cc.winSize,e=.75*this.Q.height;isWebPlatform()&&(e=.78*this.Q.height);var i=this.Q.width/2;t=.04*t.height;isWebPlatform()||(t=.02*this.Q.height);var n=16,s=20,r=18;isWebPlatform()||(n=30,s=35,r=28),(o=new BkLabel("Tên hiện tại của bạn là: ","",n)).setTextColor(v),o.setScale(GAME_SCALE),o.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),o.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),o.x=i,o.y=e,this.T(o,1,0),e=v,isWebPlatform()||(e=v),(s=new BkLabel(BkGlobal.P.userName,"",s,!0)).setTextColor(e),s.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),s.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.x=i,s.y=o.y-s.getContentSize().height/2-t,isWebPlatform()||(s.setScale(GAME_SCALE),s.y=o.y-o.getBoundingBox().height/2-s.getBoundingBox().height/2-t),this.T(s,1,0);var o=.7*this.Q.width,a=.1*this.Q.height;isWebPlatform()||(a=.15*this.Q.height);var c=res.Vt;this.fa=createEditBox(cc.size(o,a),c),this.fa.setMaxLength(20),this.fa.x=i,this.fa.y=s.y-s.getBoundingBox().height/2-t,isWebPlatform()||(this.fa.y=s.y-s.getContentSize().height/2-this.fa.getContentSize().height/2-t),this.fa.setPlaceHolder("Nhập tên mới"),this.fa.setPlaceholderFontColor(Fj),this.fa.setFontColor(Ej),isFBInstantGame()&&this.fa.setFontSize(n),this.T(this.fa,1,0),this.Mm(this.fa);n=.25*this.Q.width;var h=this;(r=new BkLabel("Chú ý: Bạn chỉ được đổi tên duy nhất một lần","",r,!1,!0)).setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),r.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),r.setTextColor(e),r.x=i,r.y=this.fa.y-this.fa.getBoundingBox().height/2-2.4*t,isWebPlatform()||(r.setScale(GAME_SCALE),r.y=this.fa.y-this.fa.getBoundingBox().height/2-r.getBoundingBox().height/2-2*t),this.T(r,1,0),(e=createBkButtonPlist("btnCapNhat.png","btnCapNhatPress.png","btnCapNhat.png","btnCapNhat.png")).x=i-n,e.y=r.y-r.getBoundingBox().height/2-2.2*t,isWebPlatform()||(e.setScale(GAME_SCALE),e.y=r.y-r.getBoundingBox().height/2-e.getBoundingBox().height/2-3*t),this.T(e,1,0);var l=cc.winSize.width/2,u=cc.winSize.height/2-30;e.addClickEventListener((function(){h.uu();var t=h.fa.getString();if(""==t)return showToastMessage("Bạn phải nhập tên tài khoản",l,u,2,370),!1;var e=isValidUsername(t);if(""!=e)return showToastMessage(e,l,u,2,370),!1;h.qw(t)})),(t=createBkButtonPlist("btnDong.png","btnDongPress.png","btnDong.png","btnDong.png")).x=i+n,t.y=e.y,this.T(t,1,0),t.addClickEventListener((function(){h.removeSelf()})),isWebPlatform()||(t.setScale(GAME_SCALE),t.Ya(!1),e.x=i)},qw:function(t){logMessage("requestRenameUser "+t),s(),this.Fb(),BkGlobal.ap=t;var e=new BkPacket;e.zx(t),BkConnectionManager.send(e)},Fb:function(){BkLogicManager.S().jb(this)},ud:function(e){if(t(),BkLogicManager.S().jb(null),e===Fk)this.removeSelf()}}),BkSelectGameForFriend=BkBaseChessWindow.extend({$g:null,pe:null,Yf:null,qb:null,xb:null,ctor:function(t){this._super("",isWebPlatform()?cc.size(550,400):cc.size(650*GAME_SCALE,450*GAME_SCALE),null),this.$g=t,this.Ku(),this.Ob("title_wd_moichoi.png",3)},Ku:function(){var t=this;isWebPlatform()?(this.pe=createBkButtonPlist("CT_butt.png","CT_butt_press.png","CT_butt.png","CT_butt.png",""),this.pe.x=this.pe.getContentSize().width/2.1,this.pe.y=this.Q.height/2.5,this.pe.setScale(.5)):(this.pe=createBkButtonPlist("banhot_CT.png","banhot_CT_deselect.png","banhot_CT_deselect.png","banhot_CT.png",""),this.pe.x=.3*this.Q.width,this.pe.y=.5*this.Q.height,this.pe.setScale(GAME_SCALE)),this.T(this.pe,1),this.pe.addClickEventListener((function(){t.Wg(K)})),isWebPlatform()?(this.Yf=createBkButtonPlist("CU_butt.png","CU_butt_press.png","CU_butt.png","CU_butt.png",""),this.Yf.x=this.Q.width/1.4,this.Yf.setScale(.5)):(this.Yf=createBkButtonPlist("banhot_CU.png","banhot_CU_deselect.png","banhot_CU_deselect.png","banhot_CU.png",""),this.Yf.x=.7*this.Q.width,this.Yf.setScale(GAME_SCALE)),this.Yf.y=this.pe.y,this.T(this.Yf),this.Yf.addClickEventListener((function(){t.Wg(L)}));var e=22;isWebPlatform()||(e=30),this.qb=new BkLabel("Hãy chọn game để mời "+this.$g+" chơi!","",e),this.qb.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),this.qb.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.qb.setTextColor(v),e=1,isWebPlatform()||(e=GAME_SCALE),this.qb.Yb(e),this.qb.x=this.Q.width/2,this.qb.y=this.Q.height/1.3,this.T(this.qb),isWebPlatform()||(this.qb.y=.75*this.Q.height),this.xb=createBkButtonPlist("btnHuy.png","btnHuyPress.png","btnHuy.png","btnHuy.png"),this.xb.Yb(GAME_SCALE),this.xb.Ya(!1),this.xb.x=this.Q.width/2,this.xb.y=60-this.xb.getContentSize().height/2,isWebPlatform()||(this.xb.y=this.xb.getBoundingBox().height),this.T(this.xb),this.xb.addClickEventListener((function(){t.removeSelf()}))},Wg:function(t){var e=new BkPacket;e.hJ(t,this.$g),BkConnectionManager.send(e),BkLogicManager.S().vd.io=!0},count:0,UN:"",marginLeft:0,de:null,ee:null,fe:null,pM:function(){var t=22,e=cc.color(27,197,2);isWebPlatform()||(t=30,e=v);var i=1;isWebPlatform()||(i=GAME_SCALE),this.qb.x=this.Q.width/2;var n=this.qb.x+this.qb.getContentSize().width/2;isWebPlatform()||(n=this.qb.x+this.qb.getBoundingBox().width/2),this.de=new BkLabel(".","",t),this.de.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),this.de.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.de.setTextColor(e),this.de.Yb(i),this.de.x=n+this.de.getContentSize().width/2,isWebPlatform()||(this.de.x=n+this.de.getBoundingBox().width/2),this.de.y=this.qb.y,this.T(this.de),this.ee=new BkLabel("..","",t),this.ee.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),this.ee.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.ee.setTextColor(e),this.ee.Yb(i),this.ee.x=n+this.ee.getContentSize().width/2,isWebPlatform()||(this.ee.x=n+this.ee.getBoundingBox().width/2),this.ee.y=this.qb.y,this.T(this.ee),this.fe=new BkLabel("...","",t),this.fe.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),this.fe.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.fe.setTextColor(e),this.fe.Yb(i),this.fe.x=n+this.fe.getContentSize().width/2,isWebPlatform()||(this.fe.x=n+this.fe.getBoundingBox().width/2),this.fe.y=this.qb.y,this.T(this.fe)},qE:function(t){this.xu(),1==t&&null!=this.de&&this.de.setVisible(!0),2==t&&null!=this.ee&&this.ee.setVisible(!0),3==t&&null!=this.fe&&this.fe.setVisible(!0)},xu:function(){null!=this.de&&this.de.setVisible(!1),null!=this.ee&&this.ee.setVisible(!1),null!=this.fe&&this.fe.setVisible(!1)},FM:function(t){this.UN=t,this.marginLeft=(this.Q.width-this.qb.getBoundingBox().width)/2,this.count=0,this.schedule(this.gP,.5),this.pM(t),this.qE(0)},gP:function(){this.qE(this.count-4*Math.floor(this.count/4)),this.count++},YE:function(t){this.xb.Ya(!1);var e=this,i=Ql(t);t==Qj||t==Rj?(this.qb.setString(i),this.FM(i),this.xb.Ya(!0),this.pe.ef(!1),this.Yf.ef(!1)):(logMessage("statusMsg: "+i),showPopupMessageWith(i,"",null,(function(){e.removeSelf()})))},removeSelf:function(){this._super(),null!=this.Tf&&(this.Tf.xd=null)}}),BkFriendInviteConfirm=BkBaseChessWindow.extend({Og:null,qb:null,xb:null,ctor:function(t){this._super("",isWebPlatform()?cc.size(520,400):cc.size(600*GAME_SCALE,480*GAME_SCALE),null),this.Og=t,this.Ku(),this.Zb.Ya(!1),this.Cc(!1),this.Ob("title_wd_moichoi.png",3)},Ku:function(){var t=this,e=new zb(this.Og.rf,this.Og.re);this.T(e),e.setScale(GAME_SCALE),e.x=this.Q.width/2,e.y=this.Q.height-1.2*e.getBoundingBox().height,e=20,isWebPlatform()||(e=30);var i=this.Og.Uu+" mời bạn chơi "+wl(this.Og.ya)+".\nBạn có muốn chơi không?";isWebPlatform()||(i=this.Og.Uu+" mời bạn chơi "+wl(this.Og.ya)+". Bạn có muốn chơi không?"),this.qb=new BkLabel(i,"",e),this.qb.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),this.qb.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.qb.Yb(GAME_SCALE),this.qb.x=this.Q.width/2,this.qb.y=this.Q.height/3.2,this.qb.setTextColor(R),isWebPlatform()||(this.qb.setScale(GAME_SCALE),this.qb.boundingWidth=.85*this.Q.width/GAME_SCALE,(e=new BkSprite("#infoFrameBanBeOn.png")).setScale(GAME_SCALE),e.x=this.Q.width/2,e.y=.37*this.Q.height,this.T(e),this.qb.y=e.y),this.T(this.qb),this.sh=createBkButtonPlist("btnChoiNgay.png","btnChoiNgayPress.png","btnChoiNgay.png","btnChoiNgay.png"),this.sh.Yb(GAME_SCALE),this.sh.x=this.Q.width/4,this.sh.y=80-this.sh.getContentSize().height/2,isWebPlatform()||(this.sh.x=.3*this.Q.width,this.sh.y=.15*this.Q.height),this.T(this.sh),this.sh.addClickEventListener((function(){t.OC(1),t.removeSelf()})),this.xb=createBkButtonPlist("btnTuChoi.png","btnTuChoiPress.png","btnTuChoi.png","btnTuChoi.png"),this.xb.Yb(GAME_SCALE),this.xb.x=this.Q.width/1.5,isWebPlatform()||(this.xb.x=.7*this.Q.width),this.xb.y=this.sh.y,this.T(this.xb),this.xb.addClickEventListener((function(){t.OC(0),t.removeSelf()}))},OC:function(t){if(null!=this.Og){var e=new BkPacket;e.gJ(t,this.Og.ya,this.Og.Uu),BkConnectionManager.send(e)}},removeSelf:function(){this._super();var t=BkLogicManager.S();null!=t&&(t.Wn=null)}}),BkBonusHeartWindow=BkBaseChessWindow.extend({oA:-1,ma:null,na:null,gw:-1,ctor:function(t,e,i){this.oA=t,this.ma=e,this.gw=i;var n=cc.size(580,420);isWebPlatform()||(n=cc.size(700*GAME_SCALE,450*GAME_SCALE)),this._super("",n),this.Cc(!0),this.Ob("title_wd_bonus.png"),this.na=new BkSprite,this.na.x=n.width/2,this.na.y=n.height/2,this.T(this.na),this.Zb.y=this.na.y+.22*this.na.getContentSize().height,this.Zb.x=this.na.x+.33*this.na.getContentSize().width,e=30,i=GAME_SCALE,isWebPlatform()&&(e=22,i=.6),(r=new BkSprite("#chucmung.png")).setScale(i),r.x=n.width/2,r.y=.75*n.height,this.T(r),(n=new BkButton("btnDong.png","btnDongPress.png","btnDong.png","btnDong.png",ccui.Widget.PLIST_TEXTURE)).x=this.na.x,isWebPlatform()||n.setScale(GAME_SCALE),n.y=.15*this.Q.height,this.T(n);var s=this;n.addClickEventListener((function(){s.removeSelf()}));var r,o=new BkSprite("#effect_heart.png");(r=cc.p(r.x,r.y-r.getContentSize().height/2-o.getContentSize().height/2)).x=this.na.x,r.y=this.na.y+.1*this.na.getContentSize().height,o.setScale(GAME_SCALE),o.x=r.x,o.y=r.y,this.T(o),(t=t=new cc.LabelBMFont("+"+t,res.kp)).setScale(i),t.x=o.x,t.y=o.y,this.T(t),t=new BkLabel(this.oL(),"",e,!1,!0),isWebPlatform()||t.setScale(GAME_SCALE),t.x=o.x,t.y=n.y+.6*n.getBoundingBox().height+.5*t.getBoundingBox().height,t.setTextColor(v),this.T(t)},oL:function(){var t="";switch(this.gw){case bc:t="xem quảng cáo!";break;case ic:t="";break;case gc:t="hoàn thành nhiệm vụ hàng ngày!";break;case fc:t="đến thời gian nhận miễn phí!";break;case dc:t="mua từ cửa hàng!";break;case hc:t="mời bạn Facebook!";break;case ec:case jc:t="bình chọn 5* cho Cờ Ziga!"}return logMessage("getStringReason: "+this.gw+" - "+t),""!=t&&(t="Do: "+t),t},removeSelf:function(){this._super(),this.ma.Tm=null,this.NJ()},dl:null,el:null,fl:null,NJ:function(){this.dl=new BkSprite("#heart_no_plus.png"),this.dl.x=cc.winSize.width/2,this.dl.y=cc.winSize.height/2,getCurrentScene().addChild(this.dl,Td);var t=cc.moveTo(.3,this.ma.x,this.ma.y),e=cc.scaleTo(.3,.2),i=cc.fadeOut(.3),n=(t=cc.spawn(t,e,i),this);e=cc.callFunc((function(){logMessage("callback"),n.ma.Ak(this.oA),n.dl.removeFromParent()}),this),e=cc.sequence(t,e);this.dl.runAction(e),this.el=new BkSprite("#heart_no_plus.png"),this.el.x=cc.winSize.width/2+.05*cc.winSize.width,this.el.y=cc.winSize.height/2,getCurrentScene().addChild(this.el,Td),e=t.clone(),e=cc.sequence(cc.delayTime(.075),e,cc.callFunc((function(){n.el.removeFromParent()}))),this.el.runAction(e),this.fl=new BkSprite("#heart_no_plus.png"),this.fl.x=cc.winSize.width/2+.05*cc.winSize.width,this.fl.y=cc.winSize.height/2,getCurrentScene().addChild(this.fl,Td),t=t.clone(),t=cc.sequence(cc.delayTime(.15),t,cc.callFunc((function(){n.fl.removeFromParent()}))),this.fl.runAction(t)}}),BkHeartPromotionWd=BkBaseChessWindow.extend({na:null,ctor:function(t){var e=cc.size(580,525);this._super("",e),this.Ob("title_wd_thongbao.png"),this.na=new BkSprite(res.eH),this.na.x=e.width/2,this.na.y=this.na.getContentSize().height/2+80,this.T(this.na);var i="";0==t&&(i="Bạn không đủ "+V.toLowerCase()+" để tiếp tục chơi.\n"),(t=new BkLabel(i+"Xin hãy tải bản Di Động để nhận được nhiều ưu đãi hơn!","",20)).setTextColor(v),t.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),t.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.x=this.na.x,t.y=e.height/1.15-t.getContentSize().height/2,this.T(t);var n=this;(t=new BkButton("btnDong.png","btnDongPress.png","btnDong.png","btnDong.png",ccui.Widget.PLIST_TEXTURE)).setScale(GAME_SCALE),t.x=e.width/2,t.y=1.5*t.getContentSize().height,this.T(t),t.addClickEventListener((function(){n.removeSelf()}))},rC:function(){BkLogicManager.S().St()}});var xn=BkBaseChessWindow.extend({na:null,ctor:function(t,e,i){var n=cc.size(580,525);this._super("",n),this.Ob("title_wd_thongbao.png"),this.na=new BkSpriteLoader(i,res.zp),this.na.x=n.width/2,this.na.y=this.na.getContentSize().height/2+100,this.T(this.na),(t=new BkLabel(t,"",20)).setTextColor(v),t.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),t.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.setTextAreaSize(cc.size(1.5*this.Q.width,0)),t.x=this.na.x,t.y=n.height/1.15-t.getContentSize().height/2,this.T(t);var s=this;(t=new BkButton("btnDong.png","btnDongPress.png","btnDong.png","btnDong.png",ccui.Widget.PLIST_TEXTURE)).setScale(GAME_SCALE),t.x=.3*n.width,t.y=1.5*t.getContentSize().height,this.T(t),t.addClickEventListener((function(){s.removeSelf()})),this.ld=new BkButton("btnDongy.png","btnDongyPress.png","btnDongy.png","btnDongyPress.png",ccui.Widget.PLIST_TEXTURE),this.ld.setScale(GAME_SCALE),this.ld.x=.7*n.width,this.ld.y=t.y,this.T(this.ld),this.ld.addClickEventListener((function(){if(bk.isFbApp){var t=cc.game.config.app.kR;null!=t&&""!=t&&window.open(t,"_blank")}else window.open(e,"_blank")}))}});function binarySearch(t,e){for(var i=0,n=t.length-1;i<=n;){var s=i+n>>1;if(t[s][0]<e)i=s+1;else{if(!(t[s][0]>e))return s;n=s-1}}return-1}BkAddHeartWindow=BkBaseChessWindow.extend({UB:[],ko:0,Nm:0,Om:0,yo:0,xo:-1,sk:null,ctor:function(){var t="";isWebPlatform()&&(t="");var e=cc.size(460,460);isWebPlatform()||(e=cc.size(629*GAME_SCALE,1100*GAME_SCALE)),this._super(t,e,null),n.rb(xc),isWebPlatform()||this.Ob("title_wd_nhantim.png"),this.Cc(!0);var i=this;(t=new BkButton("btnDong.png","btnDongPress.png","btnDong.png","btnDong.png",ccui.Widget.PLIST_TEXTURE)).setScale(GAME_SCALE),t.x=this.Q.width/2,t.y=.08*this.Q.height,this.T(t),t.addClickEventListener((function(){i.removeSelf()})),this.sk=new BkBaseLayer,this.T(this.sk),this.AD()},AD:function(){this.UB=[],BkLogicManager.S().jb(this),s();var t=new BkPacket;t.zc(xh),BkConnectionManager.send(t)},ul:function(){this.sk.removeAllChildren(),this.Jq(),this.bake()},Jq:function(){this.Tn(1),this.Tn(2),this.Tn(3),this.Tn(4),this.Tn(5)},Tn:function(t){var e=this,i=new BkSprite("#info_popUp.png");i.setScale(GAME_SCALE);var n=this.Q.height-1*i.getBoundingBox().height,s=i.getBoundingBox().height;i.x=this.Q.width/2,i.y=n-(t-1)*s,this.sk.addChild(i),(n=new BkSprite("#heart_no_plus.png")).setScale(GAME_SCALE),n.x=i.x-i.getBoundingBox().width/2+n.getBoundingBox().width,n.y=i.y,this.sk.addChild(n),(s=new cc.LabelBMFont(" x"+this.dL(t),res.kp)).setScale(GAME_SCALE),s.x=n.x+n.getBoundingBox().width/2+s.getBoundingBox().width/2,s.y=n.y-.1*n.getBoundingBox().height,this.sk.addChild(s),n=new BkButton(x,la,x,x,ccui.Widget.PLIST_TEXTURE),0!=t&&(n.setTitleText(this.tL(t)),n.setTitleFontName(ma()),n.setTitleFontSize(31),n.setTitleColor(cc.color(71,44,27)),n.getTitleRenderer().y+=.1*n.getBoundingBox().height),this.UB.push(n),n.setScale(GAME_SCALE),n.x=i.x+i.getBoundingBox().width/2-n.getBoundingBox().width/2,n.y=i.y,this.sk.addChild(n),n.addClickEventListener((function(){e.fO(t)}))},fO:function(t){var e=this;logMessage("onActionClick: "+t),1<t?n.iO(t-2):(BkConnectionManager.Pm=function(){e.AD()},BkGlobal.Qg=!1,n.rb(Ec),this.ko?BkConnectionManager.Yh(this.Nm,this.Om):BkConnectionManager.zn(1))},dL:function(t){switch(t){case 1:return this.yo;case 2:return"400";case 3:return"2K2";case 4:return"5K";case 5:return"10K"}},tL:function(t){switch(t){case 1:return"Xem Video";case 2:return"22.000 VNĐ";case 3:return"109.000 VNĐ";case 4:return"219.000 VNĐ";case 5:return"449.000 VNĐ"}},removeSelf:function(t){this._super(t),n.HJ(),BkConnectionManager.Pm=null},ud:function(e,i){if(BkLogicManager.S().jb(null),t(),i===xh)logMessage("isOnads: "+e.ko+" - o.adsPartner: "+e.Nm+" - o.adsType: "+e.Om+" - o.numberHeartBonus: "+e.yo+" - o.nextAdsRewardsTime: "+e.xo),this.ko=e.ko,this.Nm=e.Nm,this.Om=e.Om,this.yo=e.yo,this.xo=e.xo,this.ul(e)}}),BkRateAppWindow=BkBaseChessWindow.extend({Ft:"",Py:"",Qy:"",Ig:0,ctor:function(t,e,i){i=void 0===i?"":i;var n="";isWebPlatform()&&(n="");var s=cc.size(460,460);isWebPlatform()||(s=530,null!=i&&""!=i&&(s=600),s=cc.size(600*GAME_SCALE,s*GAME_SCALE)),this._super(n,s,null),isWebPlatform()||this.Ob("title_wd_thongbao.png"),this.Qy=t,this.Ft=e,this.Py=i,this.ul(),this.Ig=0},ul:function(){(r=new BkSprite("#Icon_app_120.png")).setScale(GAME_SCALE),r.x=this.Q.width/2,r.y=this.Q.height-.9*r.getBoundingBox().height,isWebPlatform()||null==this.Za||(r.y=this.Za.y-.5*this.Za.getBoundingBox().height-.5*r.getBoundingBox().height),this.T(r);var t=.9*this.Q.width,e=new BkLabel(this.Qy,"",33,!0);e.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),e.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),e.setScale(GAME_SCALE),e.setTextColor(v),e.boundingWidth=t/GAME_SCALE,e.x=r.x,e.y=r.y-.7*r.getBoundingBox().height-.5*e.getBoundingBox().height,this.T(e);var i=new BkLabel(this.Ft,"",30);i.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),i.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);var n=(cc.winSize.height,i.getContentSize().height);n=GAME_SCALE;if(i.setScale(n),i.setTextColor(v),i.boundingWidth=t/n,i.x=r.x,i.y=e.y-.7*e.getBoundingBox().height-.5*i.getBoundingBox().height,this.T(i),e=i.y-i.getBoundingBox().height/2,e=this.vJ(e),""!=this.Ft){logMessage(" init mess rewarded"),(i=new BkLabel(this.Py,"",28,!1,!0)).setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),i.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),i.setScale(n);var s=cc.color(102,0,0);i.setTextColor(s),i.boundingWidth=t/n,i.x=r.x,i.y=e.uP-e.EL-.5*i.getBoundingBox().height,this.T(i)}var r,o=this;(r=new BkButton(x,la,x,x,ccui.Widget.PLIST_TEXTURE)).setTitleText("Bình chọn"),r.setTitleFontName("res/fonts/UVNButLong1.TTF"),r.setTitleFontSize(32),r.setTitleColor(cc.color(71,44,27)),r.getTitleRenderer().y+=.1*r.getBoundingBox().height,r.setScale(GAME_SCALE),r.x=.7*this.Q.width,r.y=.14*this.Q.height,this.T(r),r.addClickEventListener((function(){o.YO()})),(t=new BkButton(x,la,x,x,ccui.Widget.PLIST_TEXTURE)).setTitleText("Đóng"),t.setTitleFontName("res/fonts/UVNButLong1.TTF"),t.setTitleFontSize(32),t.setTitleColor(cc.color(71,44,27)),t.getTitleRenderer().y+=.1*t.getBoundingBox().height,t.setScale(GAME_SCALE),t.x=this.Q.width-r.x,t.y=r.y,this.T(t),t.addClickEventListener((function(){o.removeSelf()}))},vJ:function(t){var e=1.5*GAME_SCALE,i=new BkSprite("#star_1.png");i.setScale(e),i.x=this.Q.width/2,i.y=t-i.getBoundingBox().height,this.T(i),(t=new BkSprite("#star_1.png")).setScale(e),t.x=i.x-i.getBoundingBox().width,t.y=i.y,this.T(t);var n=new BkSprite("#star_1.png");return n.setScale(e),n.x=t.x-i.getBoundingBox().width,n.y=i.y,this.T(n),(t=new BkSprite("#star_1.png")).setScale(e),t.x=i.x+i.getBoundingBox().width,t.y=i.y,this.T(t),(n=new BkSprite("#star_1.png")).setScale(e),n.x=t.x+i.getBoundingBox().width,n.y=i.y,this.T(n),(e={}).uP=i.y,e.EL=i.getBoundingBox().height,e},YO:function(){var t="";cc.sys.os==cc.sys.OS_ANDROID?t=Yi:cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_OSX||(t=Zi),logMessage("onRateApp: "+t),om(1),n.VJ(t),this.Ig++,this.removeSelf()},DO:function(){this.Ig++;var t=this;showPopupConfirmWith("Bạn có muốn góp ý để Cờ Ziga hoàn thiện chất lượng sản phẩm tốt hơn không?","",(function(){n.fC(),t.removeSelf()}),null,(function(){}))},removeSelf:function(){if(0<this.Ig){var t=p("isRatedApp",0);logMessage("isR: "+t),t||BkLogicManager.S().kz(Yj),this._super()}else this.DO()}}),BkChatEmoSprite=cc.SpriteBatchNode.extend({sprite:null,qf:null,Bv:0,zk:0,ctor:function(t){var e=t.zb,i=t.Mn,n=t.Eb;for(cc.spriteFrameCache.addSpriteFrames(t.yb,e),this.sprite=new BkSprite("#"+i+"_1.png"),this._super(e),this.addChild(this.sprite),this.qf=[],this.Bv=n,this.zk=Math.floor(10/n),2>this.zk&&10>this.Bv&&(this.zk=2),0==this.zk&&(this.zk=2),e="",t=1;t<n+1;t++)e=i+"_"+t+".png",e=cc.spriteFrameCache.getSpriteFrame(e),this.qf.push(e)},jE:function(){var t=new cc.Animation(this.qf,.2);this.sprite.runAction(cc.animate(t).repeat(this.zk));var e=this;this.scheduleOnce((function(){e.getParent().Yp()}),.2*this.Bv*this.zk)},OT:function(){var t=new cc.Animation(this.qf,.2);this.sprite.runAction(cc.animate(t).repeatForever())},LR:function(){this.removeFromParent()}}),BkHeartSprite=BkSprite.extend({Sg:null,Mh:null,rj:-1,tg:-1,uc:null,cv:!1,Qh:0,Tm:null,dv:!1,ctor:function(t){this.cv=t=void 0!==t&&t,this._super("#khu_vuc_heart.png");var e=Ic;t&&(e=Hc),this.Ua((function(){isFBInstantGame()?isFBInstantGame()&&BKFbAdsManager.RT():(logMessage("BkHeartSprite - click heart plus button"),BkGlobal.Qg=!1,BkGlobal.BE=sc,BkConnectionManager.zn()),n.rb(e)}));var i="heart.png",s=30;!isWebPlatform()&&t?(i="buy_butt.png",s=33):this.ad(),this.uc=new BkSprite("#"+i),this.uc.x=.56*this.getContentSize().width,this.uc.y=this.getContentSize().height-this.uc.getContentSize().height/2,this.addChild(this.uc),this.Sg=new BkLabel(this.eA(),"",s,!0),this.Sg.setTextColor(Ej),this.Sg.x=this.getContentSize().width/2,t&&(this.Sg.setTextColor(R),this.Sg.x=this.uc.x,isWebPlatform()&&(this.Sg.x=this.getContentSize().width/2)),this.Sg.y=this.uc.y,this.addChild(this.Sg),t||((t=new BkSprite("#small_info_frame.png")).x=this.getContentSize().width/2,t.y=.25*this.getContentSize().height,this.Mh=new BkLabel("MAX","",s),this.Mh.setTextColor(cc.color(251,234,180)),this.Mh.setTextColor(cc.color.BLACK),this.Mh.y=this.uc.y-this.uc.getContentSize().height/2-.4*this.Mh.getContentSize().height,this.Mh.x=t.x,this.addChild(this.Mh),this.GA(),this.hH())},bH:function(){var t=this,e=.9*this.getScale(),i=1.1*this.getScale();this.setScale(e);i=cc.scaleTo(.3,i);var n=cc.callFunc((function(){t.setScale(e)}),this);i=cc.sequence(i,n,i.clone(),n.clone(),i.clone(),cc.delayTime(1)).repeatForever();this.runAction(i)},eA:function(){if(1e3<=(t=BkGlobal.P.pb())){var t,e=Math.floor(t/1e3);return 0<(t=Math.floor((t-1e3*e)/100))?e+"K"+t:e+"K"}return t},GA:function(){if(-1==BkGlobal.P.ck)this.rj=-1;else{var t=J()/1e3;this.rj=BkGlobal.P.ck-t}this.tg=this.rj,this.Mh.setString(this.cA()),-1!=BkGlobal.P.ck&&(this.pD(),this.dv=!0,this.cM())},hH:function(){-1!=BkGlobal.P.ck&&J()/1e3>=BkGlobal.P.ck&&BkLogicManager.S().zD()},Tv:function(){logMessage("onTimeCountFinish -> auto send heart request"),this.pD(),BkLogicManager.S().zD()},JC:function(){this.rj--,this.Mh.setString(this.cA()),0>=this.rj&&this.Tv()},pD:function(){this.dv&&(this.unschedule(this.JC),this.dv=!1)},cM:function(){this.schedule(this.JC,1,this.tg)},cA:function(){return-1==BkGlobal.P.ck?"":(0>this.rj&&(this.rj=0),un(this.rj))},SR:function(){null!=this.Tm&&this.Tm.removeSelf()},zm:function(t,e){e=void 0===e?-1:e,logMessage("heartNumber: "+t+" - reason: "+e),0>=t||this.cv?this.Ak(t):(this.SR(),this.Tm=new BkBonusHeartWindow(t,this,e),this.Tm.Oa())},Ak:function(t){this.Sg.setString(this.eA()),this.cv||this.GA(),this.HT(t)},HT:function(t){if(0!=t){var e=new BkTextfieldChangeHeart(this,t);e.setScale(GAME_SCALE);var i="";i=0<t?i+"+"+convertStringToMoneyFormat(t,!0):i+convertStringToMoneyFormat(t,!0);e.Wh(i),e.Rt()}}}),BkDailyTaskSprite=BkSprite.extend({Jg:null,tg:0,ok:null,Rc:null,bB:!1,je:null,ctor:function(){this._super("#task.png");var t=this;this.ul(),this.Ua((function(){t.tO()})),isWebPlatform()&&(this.MM("Thắng "+BkGlobal.P.cd+" ván cờ!"),this.ad((function(){t.je&&t.je.setVisible(!0)}),(function(){t.je&&t.je.setVisible(!1)})))},ul:function(){this.bB&&(this.bB=!1,this.unschedule(this.Sv)),0<this.getChildren().length&&this.removeAllChildren(!0),this.removeAllChildren();var t=Oi;if(isWebPlatform()&&(t=16),0<=BkGlobal.P.gh){0>BkGlobal.P.cd&&(logMessage("qua ngay dung lai last setting TaskDutyGame"),BkGlobal.P.cd=p(an,Xi)),(s=new BkLabel("nhiệm vụ","",t)).setTextColor(cc.color.BLACK),s.y=.63*this.getContentSize().height+s.getContentSize().height/2,s.x=.5*this.getContentSize().width;var e=.7;if(isWebPlatform())e=1;else(i=new BkSprite("#text_nhiemVu.png")).x=s.x,i.y=1*this.getContentSize().height,this.addChild(i);this.Rc=new BkSprite("#task_thanh_tientrinh.png"),this.Rc.y=.5*this.getContentSize().height-.5*this.Rc.getContentSize().height,this.Rc.x=s.x,this.addChild(this.Rc);var i=this.Rc.x-this.Rc.getContentSize().width*e*.36,n=(new BkSprite("#task_tientrinh.png").getContentSize().width*e*5+12-2*(BkGlobal.P.cd+1))/BkGlobal.P.cd,s=this.Rc.y+1,r=BkGlobal.P.gh;r>BkGlobal.P.cd&&(r=BkGlobal.P.cd);for(var o=0;o<r;o++){var a=new BkSprite("#task_tientrinh.png");a.setScaleX(n/a.getContentSize().width),a.setScaleY(e),a.y=s,a.x=i+.5*n+o*(n+2),this.addChild(a)}(t=new BkLabel(BkGlobal.P.gh+"/"+BkGlobal.P.cd,"",t,!0)).setTextColor(cc.color(251,234,180)),t.y=s+this.Rc.getContentSize().height*e*.5+t.getContentSize().height/2,t.x=this.Rc.x,this.addChild(t),isWebPlatform()?t.y=this.Rc.getContentSize().height/2-t.getContentSize().height/2:this.Rc.setScale(e)}else t=28,this.ok=new BkLabel("NV tiếp theo","",t),this.ok.setTextColor(cc.color.BLACK),this.ok.y=.63*this.getContentSize().height+this.ok.getContentSize().height/2,this.ok.x=.5*this.getContentSize().width,isWebPlatform()?(t=16,this.Rc=new BkSprite("#task_thanh_tientrinh.png"),this.Rc.y=.5*this.getContentSize().height-.5*this.Rc.getContentSize().height,this.Rc.x=.5*this.getContentSize().width,this.addChild(this.Rc),this.Rc.getContentSize()):((e=new BkSprite("#text_NVTiepTheo.png")).x=this.ok.x,e.y=1*this.getContentSize().height,this.addChild(e)),this.Jg=new BkLabel("13 giờ 48 phút","",t),this.Jg.setTextColor(cc.color.BLACK),this.Jg.setTextColor(Ej),this.Jg.y=.5*this.getContentSize().height,this.Jg.x=this.ok.x,isWebPlatform()&&(this.Jg.setTextColor(cc.color.WHITE),this.Jg.y=this.Rc.y),this.addChild(this.Jg),this.Sn()},Sv:function(){this.tg--,this.Jg.setString(this.dA()),0>=this.tg&&this.Tv()},Sn:function(){var t=BkGlobal.P.fx-Math.floor(J()/1e3);this.tg=t,this.Jg.setString(this.dA()),this.schedule(this.Sv,1,t)},Tv:function(){logMessage("hight light btn"),this.unschedule(this.Sv)},dA:function(){return un(this.tg)},yf:null,Qc:null,jM:function(){if(!isWebPlatform()&&null==this.yf){this.yf=new BkSprite("#task_khung_noidung.png"),this.yf.x=.5*this.getContentSize().width,this.yf.y=.5*-this.yf.getContentSize().height,this.addChild(this.yf),this.Qc=new BkLabel("Thắng "+BkGlobal.P.cd+" ván cờ!","",Oi),this.Qc.boundingWidth=.9*this.yf.getContentSize().width,this.Qc.setTextColor(cc.color(251,234,180)),this.Qc.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),this.Qc.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.Qc.x=this.yf.x,this.Qc.y=this.yf.y,this.addChild(this.Qc);var t=cc.fadeOut(1),e=cc.callFunc(this.RR,this);e=cc.sequence(cc.delayTime(3),t,e),t=t.clone();this.Qc.runAction(cc.sequence(cc.delayTime(3),t)),this.yf.runAction(e)}},MM:function(t){isWebPlatform()&&null==this.je&&(this.je=new BkSprite("#task_khung_noidung.png"),this.je.x=.5*this.getContentSize().width,this.je.y=.5*-this.je.getContentSize().height-5,this.je.setVisible(!1),this.addChild(this.je),this.Qc=new BkLabel(t,"",16),this.Qc.boundingWidth=this.je.getContentSize().width,this.Qc.setTextColor(cc.color(251,234,180)),this.Qc.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),this.Qc.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.Qc.x=this.je.getContentSize().width/2,this.Qc.y=this.je.getContentSize().height/2-2,this.je.addChild(this.Qc))},RR:function(){this.yf.removeFromParent(),this.Qc.removeFromParent(),this.Qc=this.yf=null},tO:function(){if(logMessage("onClickDailyTaskSprite "+BkGlobal.P.gh+" - "+BkGlobal.P.cd),0<=BkGlobal.P.gh)if(BkGlobal.P.gh>=BkGlobal.P.cd){logMessage("send packet reward");var t=new BkPacket;t.zc(Fi),BkConnectionManager.send(t)}else 0<=BkGlobal.P.gh&&(logMessage(" ban phai hoan thanh nhiem vu de nhan thuong"),this.jM());else logMessage("ban da hoan thanh nhiem vu hom nay roi"),showToastMessage("Bạn đã hoàn thành nhiệm vụ của ngày hôm nay!",cc.winSize.width/2,this.y-this.getBoundingBox().height)},zm:function(){this.ul()}}),BkSettingSprite=BkSprite.extend({Nb:null,qg:null,Eh:null,rk:null,pg:null,Dh:null,qk:null,If:null,Ch:null,pk:null,og:null,ng:null,Zh:null,Zl:null,ctor:function(t){var e=isWebPlatform()?"setting_frame_top.png":"setting_frame.png";isWebPlatform()||BkGlobal.hk||(e="setting_frame_2.png"),this._super("#"+e),this.Zl=t;var i=this,s=.04*this.getContentSize().height;e=.035*this.getContentSize().height;t=cc.color(251,234,180);var r=0;if(isWebPlatform())this.Nb=new BkSprite("#khu_vuc_item_setting.png"),this.Nb.x=this.getContentSize().width/2,this.Nb.y=this.getContentSize().height-this.Nb.getContentSize().height/2-s,o=.15*this.Nb.getContentSize().width,(r=new BkSprite("#setting_fb_butt.png")).x=o,r.y=this.Nb.getContentSize().height/2,this.Nb.addChild(r),(a=new BkLabel("Phóng to","",25)).x=r.x+r.getContentSize().width/2+a.getContentSize().width/2+10,a.y=r.y,a.setTextColor(t),this.Nb.addChild(a),this.addChild(this.Nb),this.Nb.Ua((function(){cc.screen.fullScreen()?exitFullScreen():makeFullScreen((function(){cc.screen.fullScreen()?a.setString("Thu nhỏ"):a.setString("Phóng to")}))})),r=this.Nb.y-e;else{this.Nb=new BkSprite("#khu_vuc_item_setting.png"),this.Nb.x=this.getContentSize().width/2,this.Nb.y=this.getContentSize().height-this.Nb.getContentSize().height/2-s;var o=.15*this.Nb.getContentSize().width;(r=new BkSprite("#setting_fb_butt.png")).x=o,r.y=this.Nb.getContentSize().height/2,this.Nb.addChild(r);var a=new BkLabel("Liên kết Facebook","",25);a.x=r.x+r.getContentSize().width/2+a.getContentSize().width/2+10,a.y=r.y,a.setTextColor(t),this.Nb.addChild(a),this.addChild(this.Nb),this.Nb.Ua((function(){logMessage("lkfb click"),i.pr(),logMessage("BkGlobal.isConnectedFB: "+BkGlobal.hk),BkGlobal.hk?(logMessage("da link fb roi"),showPopupMessageWith("Tài khoản của bạn đã được liên kết Facebook rồi!","",null)):n.Tt(lc)})),(r=new BkSprite("#setting_line.png")).x=this.getContentSize().width/2,r.y=this.Nb.y-this.Nb.getContentSize().height/2-e,this.addChild(r),BkGlobal.hk&&(this.Nb.setVisible(!1),this.Nb.Ua(null),r.setVisible(!1),r.y=this.getContentSize().height-s/2),this.qg=new BkSprite("#khu_vuc_item_setting.png"),this.qg.x=this.getContentSize().width/2,this.qg.y=r.y-2*e-this.qg.getContentSize().height/2,s=nm(),logMessage("isVibrateOn: "+s),this.Eh=new BkSprite(this.Uz(s)),this.Eh.x=o,this.Eh.y=this.qg.getContentSize().height/2,this.qg.addChild(this.Eh),this.rk=new BkLabel(this.kA(s),"",25),this.rk.x=this.Eh.x+this.Eh.getContentSize().width/2+this.rk.getContentSize().width/2+10,this.rk.y=this.Eh.y+.1*this.Eh.getContentSize().height,this.rk.setTextColor(t),this.qg.addChild(this.rk),this.addChild(this.qg),this.qg.Ua((function(){i.hP()})),this.pg=new BkSprite("#khu_vuc_item_setting.png"),this.pg.x=this.getContentSize().width/2,this.pg.y=this.qg.y-this.qg.getContentSize().height/2-this.pg.getContentSize().height/2-1.5*e,s=mm(),logMessage("isSoundOn: "+s),this.Dh=new BkSprite(vl(s)),this.Dh.x=o,this.Dh.y=this.pg.getContentSize().height/2,this.pg.addChild(this.Dh),this.qk=new BkLabel(this.jA(s),"",25),this.qk.x=this.Dh.x+this.Dh.getContentSize().width/2+this.qk.getContentSize().width/2+10,this.qk.y=this.Dh.y+.1*this.Dh.getContentSize().height,this.qk.setTextColor(t),this.pg.addChild(this.qk),this.addChild(this.pg),this.pg.Ua((function(){i.aP()})),this.If=new BkSprite("#khu_vuc_item_setting.png"),this.If.x=this.getContentSize().width/2,this.If.y=this.pg.y-this.pg.getContentSize().height/2-this.If.getContentSize().height/2-1.5*e,s=km(),logMessage("isNhacNenOn: "+s),this.Ch=new BkSprite(ul(s)),this.Ch.x=o,this.Ch.y=this.If.getContentSize().height/2,this.If.addChild(this.Ch),this.pk=new BkLabel(this.iA(s),"",25),this.pk.x=this.Ch.x+this.Ch.getContentSize().width/2+this.pk.getContentSize().width/2+10,this.pk.y=this.Ch.y+.1*this.Ch.getContentSize().height,this.pk.setTextColor(t),this.If.addChild(this.pk),this.addChild(this.If),this.If.Ua((function(){i.SO()})),(s=new BkSprite("#setting_line.png")).x=this.getContentSize().width/2,s.y=this.If.y-this.If.getContentSize().height/2-e,this.addChild(s),r=s.y}this.og=new BkSprite("#khu_vuc_item_setting.png"),this.og.x=this.getContentSize().width/2,this.og.y=r-1.1*e-this.og.getContentSize().height/2,(s=new BkSprite("#mail_butt.png")).x=o,s.y=this.og.getContentSize().height/2,this.og.addChild(s),(o=new BkLabel("Thư góp ý","",25)).x=s.x+s.getContentSize().width/2+o.getContentSize().width/2+10,o.y=s.y,o.setTextColor(t),this.og.addChild(o),this.addChild(this.og),this.og.Ua((function(){i.IO()})),(o=new BkSprite("#setting_line.png")).x=this.getContentSize().width/2,o.y=this.og.y-this.og.getContentSize().height/2-1.1*e,this.addChild(o),this.ng=new BkSprite("#khu_vuc_item_setting.png"),this.ng.x=this.getContentSize().width/2,this.ng.y=o.y-e-this.ng.getContentSize().height/2,(o=new BkLabel("Hướng dẫn và luật chơi","",25)).x=this.ng.getContentSize().width/2,o.y=this.ng.getContentSize().height/2,o.setTextColor(t),this.ng.addChild(o),this.addChild(this.ng),this.ng.Ua((function(){i.KO()})),this.Zh=new BkSprite("#khu_vuc_item_setting.png"),this.Zh.x=this.getContentSize().width/2,this.Zh.y=this.ng.y-.5*e-this.ng.getContentSize().height/2-this.Zh.getContentSize().height/2,(e=new BkLabel("Chính sách","",25)).x=this.Zh.getContentSize().width/2,e.y=this.Zh.getContentSize().height/2,e.setTextColor(t),this.Zh.addChild(e),this.addChild(this.Zh),this.Zh.Ua((function(){i.WO()}))},WO:function(){logMessage("onPolicyClick -> openWebview Policy"),Wa($i+"quy-dinh","Chính sách"),this.pr()},KO:function(){logMessage("onGuildleClick  -> openWebview guildle"),Wa($i+"huong-dan-chung","Hướng dẫn và luật chơi"),this.pr()},IO:function(){logMessage("onEmailClick -> send mail native"),isWebPlatform()||(n.rb(Fc),n.fC(),this.pr())},SO:function(){logMessage("onNhacNenClick");var t=!km(),e=ul(t);e=cc.spriteFrameCache.getSpriteFrame(e.substr(1,e.length-1));this.Ch.setSpriteFrame(e),this.pk.setString(this.iA(t)),im(t)},aP:function(){logMessage("onSoundClick");var t=!mm(),e=vl(t);e=cc.spriteFrameCache.getSpriteFrame(e.substr(1,e.length-1));this.Dh.setSpriteFrame(e),this.qk.setString(this.jA(t)),lm(t)},hP:function(){logMessage("onVibrateClick");var t=!nm(),e=this.Uz(t);e=cc.spriteFrameCache.getSpriteFrame(e.substr(1,e.length-1));this.Eh.setSpriteFrame(e),this.rk.setString(this.kA(t)),t=void 0===t?1:t,logMessage("setVibrateSetting: "+t),u("vibrateSetting",t)},Uz:function(t){return t?"#vibration_butt_on.png":"#vibration_butt_off.png"},iA:function(t){return t?"Bật nhạc nền":"Tắt nhạc nền"},kA:function(t){return t?"Bật rung":"Tắt rung"},jA:function(t){return t?"Bật tiếng":"Tắt tiếng"},pr:function(){this.Zl&&this.Zl.zu()},bt:function(){this.Ua((function(){}))}}),BkSettingLayer=BkBaseLayer.extend({bd:null,Eg:null,Lc:null,Xd:0,hf:null,ctor:function(t){this._super(),this.Eg=new BkSprite(res.uk),this.Eg.scaleX=cc.winSize.width/this.Eg.getContentSize().width,this.Eg.scaleY=cc.winSize.height/this.Eg.getContentSize().height,this.Eg.setOpacity(0),this.Eg.x=cc.winSize.width/2,this.Eg.y=cc.winSize.height/2,this.addChild(this.Eg),this.hf=t},IM:function(){this.tD(),this.bd=new BkSettingSprite(this),this.bd.setScale(GAME_SCALE);var t=this.hf.x,e=this.hf.y+this.hf.getBoundingBox().height/2+this.bd.getBoundingBox().height/2;isWebPlatform()&&(t=cc.winSize.width-this.bd.getContentSize().width/2,e=this.hf.y-this.hf.getBoundingBox().height/2-this.bd.getBoundingBox().height/2),this.bd.x=t,this.bd.y=e,this.addChild(this.bd)},tD:function(){null!=this.bd&&(this.bd.removeFromParent(),this.bd=null)},Cj:function(){var t=this,e=!1;this.Lc=yb((function(i){e=!1,i=i.getLocation();var n=t.bd.x-t.bd.getBoundingBox().width/2,s=t.bd.y-t.bd.getBoundingBox().height/2,r=(n=t.convertToWorldSpace(cc.p(n,s)),s=t.bd.getBoundingBox().width,t.bd.getBoundingBox().height);n=cc.rect(n.x,n.y,s,r);return!cc.rectContainsPoint(n,i)&&(e=!0)}),null,(function(){e&&t.zu()})),cc.eventManager.addListener(this.Lc,this.Eg)},Hk:function(){null!=this.Lc&&cc.eventManager.removeListener(this.Lc)},zu:function(){this.setVisible(!1),this.tD(),this.Hk(),this.Xd=0},oU:function(){this.Xd=1,this.IM(),this.Cj(),this.setVisible(!0),this.bd.bt()},bP:function(){0==this.Xd?this.oU():this.zu()}}),BkHistoryKindSprite=BkSprite.extend({ctor:function(t,e){this.nA=e;var i="setting_frame_history.png";isWebPlatform()||(i="setting_frame_history.png"),this._super("#"+i),this.Zl=t;var n=this;this.On=new BkSprite("#"+y.bZ),this.On.x=.1*UI.qa(this)+UI.Da(this.On),this.On.y=.55*UI.Ga(this),this.addChild(this.On),this.On.Ua((function(){n.TO()})),this.Pn=new BkSprite("#"+y.cZ),this.Pn.x=.9*UI.qa(this)-UI.Da(this.Pn),this.Pn.y=.55*UI.Ga(this),this.addChild(this.Pn),this.Pn.Ua((function(){n.iP()}))},iP:function(){this.yC(),this.nA.Rw(1)},TO:function(){this.yC(),this.nA.Rw(0)},yC:function(){this.Zl&&this.Zl.yu()},bt:function(){this.Ua((function(){}))}}),BkHistoryKindLayer=BkBaseLayer.extend({Oc:null,na:null,Lc:null,Xd:0,hf:null,ctor:function(t,e){this._super(),this.nP=e,this.na=new BkSprite(res.uk),this.na.scaleX=cc.winSize.width/this.na.getContentSize().width,this.na.scaleY=cc.winSize.height/this.na.getContentSize().height,this.na.setOpacity(0),this.na.x=cc.winSize.width/2,this.na.y=cc.winSize.height/2,this.addChild(this.na),this.hf=t,console.log("BkHistoryKindLayer")},mM:function(){this.rD(),this.Oc=new BkHistoryKindSprite(this,this.nP),this.Oc.setScale(GAME_SCALE);var t=this.hf.x+.3*UI.qa(this.Oc),e=this.hf.y+this.hf.getBoundingBox().height/2+this.Oc.getBoundingBox().height/2;isWebPlatform()&&(t=cc.winSize.width-this.Oc.getContentSize().width/2,e=this.hf.y-this.hf.getBoundingBox().height/2-this.Oc.getBoundingBox().height/2),this.Oc.x=t,this.Oc.y=e,this.addChild(this.Oc),console.log("initHistorySprite")},rD:function(){null!=this.Oc&&(this.Oc.removeFromParent(),this.Oc=null)},Cj:function(){var t=this,e=!1;this.Lc=yb((function(i){e=!1,i=i.getLocation();var n=t.Oc.x-t.Oc.getBoundingBox().width/2,s=t.Oc.y-t.Oc.getBoundingBox().height/2,r=(n=t.convertToWorldSpace(cc.p(n,s)),s=t.Oc.getBoundingBox().width,t.Oc.getBoundingBox().height);n=cc.rect(n.x,n.y,s,r);return!cc.rectContainsPoint(n,i)&&(e=!0)}),null,(function(){e&&t.yu()})),cc.eventManager.addListener(this.Lc,this.na)},Hk:function(){null!=this.Lc&&cc.eventManager.removeListener(this.Lc)},yu:function(){this.setVisible(!1),this.rD(),this.Hk(),this.Xd=0},WT:function(){this.Xd=1,this.mM(),this.Cj(),this.setVisible(!0),this.Oc.bt()},K2:function(){0==this.Xd?this.WT():this.yu()}}),BkChessAvatar=BkSprite.extend({Aa:null,Ol:null,Pl:null,qh:null,Dk:null,ctor:function(){this._super("#khu_vuc_avatar.png");var t=new BkSprite("#avt_frame_bg.png");this.addChild(t);var e=new BkSprite("#avt_frame.png");this.addChild(e);var i=new BkSpriteLoader(BkGlobal.P.Hb,"#default_avatar.jpg"),s=.84*t.getContentSize().height;i.setScale(s/i.getContentSize().height),i=ab(i,s),this.addChild(i),(s=BkGlobal.P.Ai)<BkGlobal.P.Bi&&(s=BkGlobal.P.Bi),this.Dk=new BkChessRankSprite(s),this.Dk.x=this.Dk.getContentSize().width/2,this.Dk.y=this.Dk.getContentSize().height/2,this.addChild(this.Dk),t.x=this.Dk.x,t.y=this.getContentSize().height-t.getContentSize().height/2,e.x=t.x,e.y=t.y,i.x=t.x,i.y=t.y;var r=this;isWebPlatform()&&t.ad(),t.Ua((function(){Pa(r.qC)||(1e3>J()-t.Kb?logMessage("click 2 lan trong 1 sec -> don't process action"):(t.Kb=J(),r.qC()))}));var o=this.Yj();(e=new BkSprite("#name_frame.png")).x=this.getContentSize().width-e.getContentSize().width/2,e.y=.65*this.getContentSize().height+o,this.addChild(e);var a=.05*this.getContentSize().width,c=(i=cc.color(251,234,180),Ab(BkGlobal.P.userName,10));s=.01*this.getContentSize().height;this.Aa=new BkLabel(c,"",Oi),this.Aa.x=e.x-.5*e.getContentSize().width+this.Aa.getContentSize().width/2+a,this.Aa.y=e.y+0,this.Aa.setTextColor(i),this.addChild(this.Aa),(a=new BkSprite("#small_info_frame.png")).x=this.getContentSize().width-a.getContentSize().width/2,a.y=.35*this.getContentSize().height+o,this.addChild(a),(o=new BkSprite("#elo_CU.png")).x=a.x-.5*a.getContentSize().width+o.getContentSize().width/2,o.y=a.y-s,this.addChild(o),this.Pl=new BkLabel(BkGlobal.P.Bi,"",Oi),this.Pl.x=o.x+o.getContentSize().width/2+this.Pl.getContentSize().width/2,this.Pl.y=a.y+0,this.Pl.setTextColor(i),this.addChild(this.Pl),(o=new BkSprite("#small_info_frame.png")).x=e.x-e.getContentSize().width/2+o.getContentSize().width/2,o.y=a.y,this.addChild(o),(c=new BkSprite("#elo_CT.png")).x=o.x-.5*o.getContentSize().width+c.getContentSize().width/2,c.y=o.y-s,this.addChild(c),this.Ol=new BkLabel(BkGlobal.P.Ai,"",Oi),this.Ol.x=c.x+c.getContentSize().width/2+this.Ol.getContentSize().width/2,this.Ol.y=a.y+0,this.Ol.setTextColor(i),this.addChild(this.Ol),BkGlobal.no&&(this.qh=createBkButtonPlist("change_name.png","change_name.png","change_name.png","change_name.png"),this.qh.x=e.x+e.getContentSize().width/2-.3*this.qh.getContentSize().width,this.qh.y=e.y,this.addChild(this.qh),this.qh.addClickEventListener((function(){logMessage("btnEditProfile click show setup rename"),Pa(r.tC)||(n.rb(Gc),r.tC())})))},tC:function(){var t=Ya(),e=new BkRenameWindow;e.Ab(t),e.Oa()},qC:function(){var t=Ya(),e=new BkPlayerInfo(BkGlobal.P.userName);e.Ab(t),e.Oa()},kf:function(){logMessage("updateAvatar BkChessAvatar"),null!=this.Aa&&this.Aa.setString(Ab(BkGlobal.P.userName,10)),null!=this.qh&&(BkGlobal.no?this.qh.setVisible(!0):this.qh.setVisible(!1))},Yj:function(){return.1*this.getContentSize().height}}),BkIngameMenu=BkBaseLayer.extend({Ma:null,rc:null,Lc:null,Xd:0,Ug:null,Qe:null,Gj:null,Ij:null,Fd:null,Sd:null,ctor:function(t){this._super(),this.rc=new BkSprite(res.uk),this.rc.scaleX=cc.winSize.width/this.rc.getContentSize().width,this.rc.scaleY=cc.winSize.height/this.rc.getContentSize().height,this.rc.setOpacity(0),this.rc.x=cc.winSize.width/2,this.rc.y=cc.winSize.height/2,this.addChild(this.rc),this.Ug=t},rv:function(){var t=BkLogicManager.oa().Ba();return!(!t||!t.Ka)},Nu:function(){this.Ko();var t=this.rv(),e="menu_frame.png";t&&(e="menu_frame_ig_small.png"),this.Ma=new BkSprite("#"+e),this.Ma.setScale(GAME_SCALE),this.Ma.x=this.Ug.x-this.Ug.getBoundingBox().width/2+this.Ma.getBoundingBox().width/2,this.Ma.y=this.Ug.y+this.Ug.getBoundingBox().height/2+this.Ma.getBoundingBox().height/2,this.addChild(this.Ma);var i=this,n=(e=0,.5*this.Ma.getContentSize().width),s=.55*this.Ma.getContentSize().height,r=0,o=0;isFBInstantGame()&&(o=24),t?r=n-(e=.3*this.Ma.getContentSize().width-o):r=n-2*(e=.18*this.Ma.getContentSize().width),this.Qe=new BkButton("out_butt.png","out_butt_press.png","out_butt.png","out_butt.png",ccui.Widget.PLIST_TEXTURE),this.Qe.x=r,this.Qe.y=s,this.Ma.addChild(this.Qe),this.Qe.addClickEventListener((function(){BkLogicManager.oa().fm()})),t||(this.Gj=new BkButton("cauhoa_butt.png","cauhoa_butt_press.png","cauhoa_butt_disable.png","cauhoa_butt.png",ccui.Widget.PLIST_TEXTURE),this.Gj.x=r+e+o,this.Gj.y=s,this.Ma.addChild(this.Gj),this.Ij=new BkButton("xinthua_butt.png","xinthua_butt_press.png","xinthua_butt_disable.png","xinthua_butt.png",ccui.Widget.PLIST_TEXTURE),this.Ij.x=r+2*e+2*o,this.Ij.y=s,this.Ma.addChild(this.Ij),this.Gj.addClickEventListener((function(){i.Ev()})),this.Ij.addClickEventListener((function(){i.Fv()})),this.dT()),isFBInstantGame()||(n=km(),this.Fd=new BkSprite("#"+this.Bn(n)),this.Fd.x=r+3*e,t&&(this.Fd.x=r+e),this.Fd.y=s,this.Ma.addChild(this.Fd),this.Fd.Ua((function(){i.Hv()}))),n=mm(),this.Sd=new BkSprite("#"+this.Cn(n)),this.Sd.x=r+4*e,t&&(this.Sd.x=r+2*e),this.Sd.y=s,this.Ma.addChild(this.Sd),this.Sd.Ua((function(){i.Iv()}))},Cn:function(t){var e="sound_off_ig_butt.png";return t&&(e="sound_on_ig_butt.png"),e},Iv:function(){logMessage("onClickSoundBut");var t=!mm(),e=cc.spriteFrameCache.getSpriteFrame(this.Cn(t));this.Sd.setSpriteFrame(e),lm(t)},Bn:function(t){var e="music_off_ig_butt.png";return t&&(e="music_on_ig_butt.png"),e},Hv:function(){var t=!km(),e=cc.spriteFrameCache.getSpriteFrame(this.Bn(t));this.Fd.setSpriteFrame(e),im(t)},dT:function(){BkLogicManager.oa().Ub()?(logMessage("trong van choi -> khong disable"),this.KD(!0),this.LD(!0)):(this.KD(!1),this.LD(!1))},KD:function(t){this.Gj.ef(t)},LD:function(t){this.Ij.ef(t)},Fv:function(){this.vr();var t=this.getParent();t&&t instanceof BkChessBaseIngameLayer&&t.Fv()},Ev:function(){this.vr();var t=this.getParent();t&&t instanceof BkChessBaseIngameLayer&&t.Ev()},Cj:function(){var t=this,e=!1;this.Lc=yb((function(i){e=!1,i=i.getLocation();var n=t.Ma.x-t.Ma.getBoundingBox().width/2,s=t.Ma.y-t.Ma.getBoundingBox().height/2,r=(n=t.convertToWorldSpace(cc.p(n,s)),s=t.Ma.getBoundingBox().width,t.Ma.getBoundingBox().height);n=cc.rect(n.x,n.y,s,r);return!cc.rectContainsPoint(n,i)&&(e=!0)}),null,(function(){e&&t.Jn()})),cc.eventManager.addListener(this.Lc,this.rc)},Hk:function(){null!=this.Lc&&cc.eventManager.removeListener(this.Lc)},Ko:function(){null!=this.Ma&&(this.Ma.removeFromParent(),this.Ma=null)},Jn:function(){this.setVisible(!1),this.Ko(),this.Hk(),this.Xd=0},Uw:function(){this.Xd=1,this.Nu(),this.Cj(),this.setVisible(!0)},vr:function(){0==this.Xd?this.Uw():this.Jn()}}),BkInHistoryMenu=BkBaseLayer.extend({Ma:null,rc:null,Lc:null,Xd:0,Ug:null,Qe:null,Gj:null,Ij:null,Fd:null,Sd:null,ctor:function(t){this._super(),this.rc=new BkSprite(res.uk),this.rc.scaleX=cc.winSize.width/this.rc.getContentSize().width,this.rc.scaleY=cc.winSize.height/this.rc.getContentSize().height,this.rc.setOpacity(0),this.rc.x=cc.winSize.width/2,this.rc.y=cc.winSize.height/2,this.addChild(this.rc),this.Ug=t},rv:function(){var t=BkLogicManager.oa().Ba();return!(!t||!t.Ka)},Nu:function(){this.Ko(),this.rv();var t=y.l0;this.Ma=new BkSprite,this.addChild(this.Ma),(t=new BkSprite("#"+t)).setScale(GAME_SCALE),this.Ma.x=this.Ug.x+.75*UI.Da(t),this.Ma.y=this.Ug.y+this.Ug.getBoundingBox().height/2+t.getBoundingBox().height/2,t.setScale(GAME_SCALE),this.Ma.addChild(t);var e=t.y;this.Qe=new BkButton("out_butt.png","out_butt_press.png","out_butt.png","out_butt.png",ccui.Widget.PLIST_TEXTURE),this.Qe.setScale(GAME_SCALE),this.Qe.x=UI.eb(t)+1.5*UI.Da(this.Qe),this.Qe.y=e,this.Ma.addChild(this.Qe),this.Qe.addClickEventListener((function(){switchToSceneWithGameState(P,!0),i.GS()}));var i=this,n=mm();this.Sd=new BkSprite("#"+this.Cn(n)),this.Sd.setScale(GAME_SCALE),this.Sd.x=t.x,this.Sd.y=e,this.Ma.addChild(this.Sd),this.Sd.Ua((function(){i.Iv()})),n=km(),this.Fd=new BkSprite("#"+this.Bn(n)),this.Fd.setScale(GAME_SCALE),this.Fd.x=UI.fb(t)-1.5*UI.Da(this.Fd),this.Fd.y=e,this.Ma.addChild(this.Fd),this.Fd.Ua((function(){i.Hv()}))},GS:function(){var t=new BkPacket;t.Uy(),BkConnectionManager.send(t)},Cn:function(t){var e="sound_off_ig_butt.png";return t&&(e="sound_on_ig_butt.png"),e},Iv:function(){var t=!mm(),e=cc.spriteFrameCache.getSpriteFrame(this.Cn(t));this.Sd.setSpriteFrame(e),logMessage("onClickSoundBut, newSoundSetting: "+t),lm(t),logMessage("onClickSoundBut, Util.getSoundSetting: "+mm())},Bn:function(t){var e="music_off_ig_butt.png";return t&&(e="music_on_ig_butt.png"),e},Hv:function(){var t=!km(),e=cc.spriteFrameCache.getSpriteFrame(this.Bn(t));this.Fd.setSpriteFrame(e),im(t)},Cj:function(){var t=this,e=!1;this.Lc=yb((function(i){e=!1,i=i.getLocation();var n=t.Ma.x-t.Ma.getBoundingBox().width/2,s=t.Ma.y-t.Ma.getBoundingBox().height/2,r=(n=t.convertToWorldSpace(cc.p(n,s)),s=t.Ma.getBoundingBox().width,t.Ma.getBoundingBox().height);n=cc.rect(n.x,n.y,s,r);return!cc.rectContainsPoint(n,i)&&(e=!0)}),null,(function(){e&&t.Jn()})),cc.eventManager.addListener(this.Lc,this.rc)},Hk:function(){null!=this.Lc&&cc.eventManager.removeListener(this.Lc)},Ko:function(){null!=this.Ma&&(this.Ma.removeFromParent(),this.Ma=null)},Jn:function(){this.setVisible(!1),this.Ko(),this.Hk(),this.Xd=0},Uw:function(){this.Xd=1,this.Nu(),this.Cj(),this.setVisible(!0)},vr:function(){0==this.Xd?this.Uw():this.Jn()}}),BkPlayedSessionItem=ccui.Widget.extend({uj:"itemBg",Hn:null,Nd:null,Ms:9,Fs:8,ctor:function(t,e,i,n){this._super(),this.color=cc.color(66,60,72),this.fontSize=isWebPlatform()?15*GAME_SCALE_MIN:27*GAME_SCALE_MIN,this.setName("BkPlayedSessionItem"),this.ls=.6,this.ib=t,console.log("BkPlayedSessionItem - session.data: ",t.data),console.log("BkPlayedSessionItem - BkGlobal.UserInfo: ",BkGlobal.P),this.Hn=e,this.au=n,this.ya=i,this.id=t.id,this.gg(),this.Qu(),this.rd()},Qu:function(){var t=this.za,e=new BkLabel(this.ib.id,"Arial",this.fontSize);this.Nd=e,e.x=t.x+.2*UI.qa(t),e.y=t.y,e.setOpacity(0),this.addChild(e)},Mu:function(){console.log("BkPlayedSessionItem - this.sessionData: ",this.ib);var t=new BkSprite("#"+this.Gn(this.ib));t.x=this.za.x+.6*UI.qa(t),t.y=this.za.y,this.addChild(t),this.Yw=t},Gn:function(t){var e="history_logo_co_tuong.png";return t.ya==L&&(e="history_logo_co_up.png"),e},rd:function(){this.uM(),this.tM(),this.Pu(),this.Ru(),this.Mu()},Ru:function(){var t=this,e=createBkButtonPlist("history_remove_icon.png","history_remove_icon.png","history_remove_icon.png","history_remove_icon.png");e.setScale(.9*GAME_SCALE),e.x=UI.fb(this.za)-15-UI.Da(e),e.y=this.za.y,e.addClickEventListener((function(){t.RS()})),this.addChild(e)},RS:function(){var t=new BkPacket;t.Zy(this.ib,0),BkConnectionManager.send(t),s()},Pu:function(){var t=this.$j(this.ib);(t=new BkLabel(t,"",13)).setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.setColor(this.color),t.x=isWebPlatform()?UI.eb(this.za)+20+UI.qa(t):UI.fb(this.za)-.5*UI.Da(this.j6)-UI.Da(t),t.y=this.za.y,this.wv=t,this.addChild(t)},$j:function(t){var e=new Date(t.Ho);return t=String("00"+e.getDate()).slice(-2)+"/"+String("00"+(e.getMonth()+1)).slice(-2)+"/"+e.getFullYear().toString(),logMessage("strDate: "+t),logMessage("strDate: "+t),t+"\n"+(e=String("00"+e.getHours()).slice(-2)+":"+String("00"+e.getMinutes()).slice(-2))},tM:function(){var t=this.za,e=new BkSprite("#history_my_box.png");e.setScale(.9),this.Uo=e,e.x=this.Nz(),e.y=t.y,this.addChild(e),(e=new BkLabel(this.od(BkGlobal.P.userName),"",this.fontSize)).setColor(this.color),this.vv=e,console.log("lblMyName.getContentSize(): ",e.getContentSize()),console.log("lblMyName.getScaleX(): ",e.getScaleX()),e.x=this.Lz(),e.y=t.y,this.addChild(e),this.fs=e=new BkSprite("#"+this.Zz(this.ib)),e.x=this.Wz(),e.y=t.y,this.addChild(e)},uM:function(){var t=this.za,e=new BkSprite("#history_player_box.png");e.setScale(.9),this.Vo=e,e.x=this.Qz(),e.y=t.y,this.addChild(e),(e=new BkLabel(this.od(this.ib.Vv),"",this.fontSize)).setColor(this.color),this.er=e,console.log("lblOpponent.getContentSize(): ",e.getContentSize()),console.log("lblOpponent.getScaleX(): ",e.getScaleX()),e.x=this.Mz(),e.y=t.y,this.addChild(e),this.gs=e=new BkSprite("#"+this.$z(this.ib)),e.x=this.Xz(),e.y=t.y,this.addChild(e)},Mz:function(){return this.ib.Kl?UI.fb(this.Vo)-7-.5*this.er.getContentSize().width:UI.eb(this.Vo)+7+.5*this.er.getContentSize().width},Lz:function(){return this.ib.Kl?UI.eb(this.Uo)+7+.5*this.vv.getContentSize().width:UI.fb(this.Uo)-7-.5*this.vv.getContentSize().width},Xz:function(){return this.ib.Kl?UI.eb(this.Vo)+7+UI.Da(this.gs):UI.fb(this.Vo)-7-UI.Da(this.gs)},Wz:function(){return this.ib.Kl?UI.fb(this.Uo)-7-UI.Da(this.fs):UI.eb(this.Uo)+7+UI.Da(this.fs)},Qz:function(){var t=this.za;return this.ib.Kl?UI.fb(t)-.24*UI.qa(t):UI.eb(t)+.34*UI.qa(t)},Nz:function(){var t=this.za;return this.ib.Kl?UI.eb(t)+.34*UI.qa(t):UI.fb(t)-.24*UI.qa(t)},od:function(t){return t.length>this.Ms?t.substring(0,this.Fs)+"...":t},Zz:function(t){return(t=t.vg)==hl?"history_draw_icon.png":t==il?"history_win_icon.png":t==jl?"history_lose_icon.png":void 0},$z:function(t){return(t=t.vg)==hl?"history_draw_icon.png":t==il?"history_lose_icon.png":t==jl?"history_win_icon.png":void 0},gg:function(){var t=this;console.log("BkPlayedSessionItem - this.initBg()"),(e=createBkButtonPlist("history_item_bg.png","history_item_bg.png","history_item_bg.png","history_item_bg.png","")).setScaleX(.9),this.za=e,this.za.name=this.uj,isWebPlatform()?this.za.setScaleY(.8*GAME_SCALE_MIN):this.za.setScaleY(GAME_SCALE_MIN),this.za.addClickEventListener((function(){console.log("BkPlayedSessionItem item clicked - self.sessionData = "+JSON.stringify(t.ib)),t.Hn.CD(t.ib)}));var e=UI.qa(e),i=UI.Ga(this.au)/8;console.log("BkPlayedSessionItem - this.initBg() - width: "+e+" - height: "+i),this.setContentSize(cc.size(e,i)),this.za.setPosition(.5*e,.5*i),this.setPosition(.5*this.getContentSize().width,.5*this.getContentSize().height),this.addChild(this.za)},TE:function(t){this.ib=t,this.Nd.setString(t.id),this.wv.setString(this.$j(t)),this.SV(t),this.RV(t),this.lx(t)},SV:function(t){this.er.setString(this.od(t.Vv)),this.gs.Of(this.$z(t)),this.Vo.x=this.Qz(),this.er.x=this.Mz(),this.gs.x=this.Xz()},RV:function(t){this.fs.Of(this.Zz(t)),this.Uo.x=this.Nz(),this.vv.x=this.Lz(),this.fs.x=this.Wz()},lx:function(t){this.Yw.Of(this.Gn(t))}}),BkViewedSessionItem=ccui.Widget.extend({uj:"itemBg",Hn:null,za:null,Nd:null,Ms:9,Fs:8,ctor:function(t,e,i,n){this._super(),this.color=cc.color(66,60,72),this.fontSize=isWebPlatform()?15*GAME_SCALE_MIN:27*GAME_SCALE_MIN,this.setName("BkViewedSessionItem"),this.ls=.6,this.ib=t,this.Hn=e,this.au=n,this.ya=i,this.id=t.id,this.gg(),this.Qu(),this.rd()},Mu:function(){console.log("BkPlayedSessionItem - this.sessionData: ",this.ib);var t=new BkSprite("#"+this.Gn(this.ib));t.setScale(GAME_SCALE),t.x=this.za.x+.6*UI.qa(t),t.y=this.Nd.y,this.addChild(t),this.Yw=t},Gn:function(t){var e="history_logo_co_tuong.png";return t.ya==L&&(e="history_logo_co_up.png"),e},Qu:function(){var t=this.za,e=new BkLabel(this.ib.id,"Arial",this.fontSize);this.Nd=e,e.x=t.x+.2*UI.qa(t),e.y=t.y,e.setOpacity(0),this.addChild(e)},rd:function(){this.hM(),this.GM(),this.Pu(),this.Ru(),this.Mu()},Ru:function(){var t=this,e=createBkButtonPlist("history_remove_icon.png","history_remove_icon.png","history_remove_icon.png","history_remove_icon.png");e.setScale(.9*GAME_SCALE),e.x=UI.fb(this.za)-15-UI.Da(e),e.y=this.za.y,e.addClickEventListener((function(){t.SS()})),this.addChild(e)},SS:function(){var t=new BkPacket;t.Zy(this.ib,1),BkConnectionManager.send(t),s()},Pu:function(){var t=this.$j(this.ib);(t=new BkLabel(t,"",13)).setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.setColor(this.color),t.x=UI.eb(this.za)+20+UI.qa(t),t.y=this.za.y,this.wv=t,this.addChild(t)},$j:function(t){var e=new Date(t.Ho);return t=String("00"+e.getDate()).slice(-2)+"/"+String("00"+(e.getMonth()+1)).slice(-2)+"/"+e.getFullYear().toString(),logMessage("strDate: "+t),logMessage("strDate: "+t),t+"\n"+(e=String("00"+e.getHours()).slice(-2)+":"+String("00"+e.getMinutes()).slice(-2))},hM:function(){var t=this.za,e=new BkSprite("#history_player_box.png");e.setScale(.9),this.wE=e,e.x=UI.eb(t)+.34*UI.qa(t),e.y=t.y,this.addChild(e),this.QB=e=new BkLabel(this.od(this.ib.Di),"",this.fontSize),e.setColor(this.color),t=this.za,e.x=UI.eb(this.wE)+7+.5*this.QB.getContentSize().width,e.y=t.y,this.addChild(e),this.CU=e=new BkSprite("#"+this.aA(this.ib)),e.x=UI.fb(this.wE)-7-UI.Da(e),e.y=t.y,this.addChild(e)},GM:function(){var t=this.za,e=new BkSprite("#history_player_box.png");e.setScale(.9),this.xE=e,e.x=UI.fb(t)-.24*UI.qa(t),e.y=t.y,this.addChild(e),this.RB=e=new BkLabel(this.od(this.ib.xD),"",this.fontSize),e.setColor(this.color),e.x=UI.fb(this.xE)-7-.5*this.RB.getContentSize().width,e.y=t.y,this.addChild(e),this.DU=e=new BkSprite("#"+this.bA(this.ib)),e.x=UI.eb(this.xE)+7+UI.Da(e),e.y=t.y,this.addChild(e)},aA:function(t){return(t=t.vg)==hl?"history_draw_icon.png":t==il?"history_win_icon.png":t==jl?"history_lose_icon.png":void 0},bA:function(t){return(t=t.vg)==hl?"history_draw_icon.png":t==il?"history_lose_icon.png":t==jl?"history_win_icon.png":void 0},od:function(t){return t.length>this.Ms?t.substring(0,this.Fs)+"...":t},gg:function(){var t=this;(e=createBkButtonPlist("history_item_bg.png","history_item_bg.png","history_item_bg.png","history_item_bg.png","")).setScaleX(.9),this.za=e,this.za.name=this.uj,isWebPlatform()?this.za.setScaleY(.8*GAME_SCALE_MIN):this.za.setScaleY(GAME_SCALE_MIN),this.za.addClickEventListener((function(){console.log("BkPlayedSessionItem Top player item clicked - self.sessionData = "+JSON.stringify(t.ib)),t.Hn.CD(t.ib)}));var e=UI.qa(e),i=UI.Ga(this.au)/8;console.log("BkPlayedSessionItem - this.initBg() - width: "+e+" - height: "+i),this.setContentSize(cc.size(e,i)),this.za.setPosition(.5*e,.5*i),this.addChild(this.za)},TE:function(t){this.ib=t,this.Nd.setString(t.id),this.wv.setString(this.$j(t)),this.QB.setString(this.od(t.Di)),this.CU.Of(this.aA(this.ib)),this.RB.setString(this.od(t.xD)),this.DU.Of(this.bA(this.ib)),this.lx(t)},lx:function(t){this.Yw.Of(this.Gn(t))}}),BkHourGlass=cc.SpriteBatchNode.extend({sprite:null,qf:null,Wo:null,ctor:function(){cc.spriteFrameCache.addSpriteFrames(res.KL,res.wA),this.Wo="frame_00.png",this.sprite=new BkSprite("#"+this.Wo),this._super(res.wA),this.addChild(this.sprite),this.qf=[];for(var t="",e=0;33>e;e++)t=10>e?"frame_0"+e+".png":"frame_"+e+".png",t=cc.spriteFrameCache.getSpriteFrame(t),this.qf.push(t)},uq:null,ET:function(){var t=new cc.Animation(this.qf,.04);this.uq=cc.animate(t).repeatForever(),this.sprite.runAction(this.uq)},FU:function(){null!=this.uq&&this.sprite.stopAction(this.uq);var t=cc.spriteFrameCache.getSpriteFrame(this.Wo);this.sprite.setSpriteFrame(t)},K3:function(){this.removeFromParent()},ku:function(){return this.sprite.getContentSize()}}),BkChessRankSprite=BkSprite.extend({re:0,sl:null,tm:null,ctor:function(t){this._super("#khu_vuc_rank.png"),this.re=t;var e=nl(t);this.sl=new BkSprite("#"+ol(t)),this.sl.x=this.getContentSize().width/2,this.sl.y=this.sl.getContentSize().height/2,this.addChild(this.sl),this.tm=new BkSprite("#"+e),this.tm.x=this.getContentSize().width/2,this.tm.y=this.tm.getContentSize().height/2,this.addChild(this.tm)},TV:function(t){var e=ml(this.re),i=ll(this.re),n=ml(t),s=ll(t);this.re=t,e!=n&&(e=cc.spriteFrameCache.getSpriteFrame(ol(t)),this.sl.setSpriteFrame(e)),i!=s&&(t=cc.spriteFrameCache.getSpriteFrame(nl(t)),this.tm.setSpriteFrame(t))}}),cc.Et=null,cc.game.onStart=function(){!cc.sys.isNative&&document.getElementById("bkLoading")&&document.body.removeChild(document.getElementById("bkLoading"));var t,e,i=!1;(cc.sys.os===cc.sys.OS_IOS||isWebPlatform())&&(i=!0),cc.view.enableRetina(i),cc.view.adjustViewPort(!0),isWebPlatform()?(WINDOW_WIDTH=960,WINDOW_HEIGHT=625,t=WINDOW_WIDTH,e=WINDOW_HEIGHT,cc.loader.resPath="res/w",logMessage("Web platform "+t+"-"+e)):(t=cc.view.getFrameSize().width,e=cc.view.getFrameSize().height,logMessage("Mobile platform "+t+"-"+e),cc.loader.resPath="res/m");i=t/WINDOW_WIDTH;var n=e/WINDOW_HEIGHT;GAME_SCALE=1<i||1<n?i>n?n:i:i<n?n:i,GAME_SCALE_MIN=i<n?i:n,logMessage("GAME_SCALE: "+GAME_SCALE+" isWebPlatform: "+isWebPlatform()),isDebugMode()||(console.log=function(){}),isWebPlatform()?(cc.Et=cc.ContainerStrategy.extend({apply:function(i){var n=cc.container.style;this._setupContainer(i,t,e),n.marginLeft="auto",n.marginRight="auto",n.marginTop="0px",n.marginBottom="0px",n.paddingLeft="0px",n.paddingRight="0px"}}),cc.view.setDesignResolutionSize(t,e,new cc.ResolutionPolicy(new cc.Et,cc.ContentStrategy.SHOW_ALL))):(cc.view.setDesignResolutionSize(t,e,cc.ResolutionPolicy.SHOW_ALL),ua.push("sound/Tri-Am-Various-Artists.mp3")),cc.view.resizeWithBrowserSize(!1),cc.view.enableAutoFullScreen(!1),E.init(),cc.LoaderScene.preload(ua,(function(){isWebPlatform()?(onStartingGame(),window.onerror=function(t,e,i,n,s){null!=i&&(logTracker(t,s),showPopupMessageConfirmEx("Khởi tạo lại kết nối do không đồng bộ được dữ liệu với server!",(function(){cc.loader.releaseAll(),eb()})))}):cc.director.runScene(new pa)}),this),logMessage("cc._renderType :"+cc._renderType)},cc.game.run();var MATE_VALUE=1e4,BAN_VALUE=MATE_VALUE-100,WIN_VALUE=MATE_VALUE-200,NULL_SAFE_MARGIN=400,NULL_OKAY_MARGIN=200,DRAW_VALUE=20,ADVANCED_VALUE=3,PIECE_KING=0,PIECE_ADVISOR=1,PIECE_BISHOP=2,PIECE_KNIGHT=3,PIECE_ROOK=4,PIECE_CANNON=5,PIECE_PAWN=6,RANK_TOP=3,RANK_BOTTOM=12,FILE_LEFT=3,FILE_RIGHT=11,ADD_PIECE=!1,DEL_PIECE=!0,IN_BOARD_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],IN_FORT_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],LEGAL_SPAN=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],KNIGHT_PIN_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16,0,-16,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,16,0,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],KING_DELTA=[-16,-1,1,16],ADVISOR_DELTA=[-17,-15,15,17],KNIGHT_DELTA=[[-33,-31],[-18,14],[-14,18],[31,33]],KNIGHT_CHECK_DELTA=[[-33,-18],[-31,-14],[14,31],[18,33]],MVV_VALUE=[50,10,10,30,40,30,20,0],PIECE_VALUE=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,11,13,11,9,9,9,0,0,0,0,0,0,0,19,24,34,42,44,42,34,24,19,0,0,0,0,0,0,0,19,24,32,37,37,37,32,24,19,0,0,0,0,0,0,0,19,23,27,29,30,29,27,23,19,0,0,0,0,0,0,0,14,18,20,27,29,27,20,18,14,0,0,0,0,0,0,0,7,0,13,0,16,0,13,0,7,0,0,0,0,0,0,0,7,0,7,0,15,0,7,0,7,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,11,15,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,0,0,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,20,23,20,0,0,18,0,0,0,0,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,0,0,0,0,0,0,20,20,0,20,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,0,0,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,20,23,20,0,0,18,0,0,0,0,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,0,0,0,0,0,0,20,20,0,20,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,90,90,90,96,90,96,90,90,90,0,0,0,0,0,0,0,90,96,103,97,94,97,103,96,90,0,0,0,0,0,0,0,92,98,99,103,99,103,99,98,92,0,0,0,0,0,0,0,93,108,100,107,100,107,100,108,93,0,0,0,0,0,0,0,90,100,99,103,104,103,99,100,90,0,0,0,0,0,0,0,90,98,101,102,103,102,101,98,90,0,0,0,0,0,0,0,92,94,98,95,98,95,98,94,92,0,0,0,0,0,0,0,93,92,94,95,92,95,94,92,93,0,0,0,0,0,0,0,85,90,92,93,78,93,92,90,85,0,0,0,0,0,0,0,88,85,90,88,90,88,90,85,88,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,206,208,207,213,214,213,207,208,206,0,0,0,0,0,0,0,206,212,209,216,233,216,209,212,206,0,0,0,0,0,0,0,206,208,207,214,216,214,207,208,206,0,0,0,0,0,0,0,206,213,213,216,216,216,213,213,206,0,0,0,0,0,0,0,208,211,211,214,215,214,211,211,208,0,0,0,0,0,0,0,208,212,212,214,215,214,212,212,208,0,0,0,0,0,0,0,204,209,204,212,214,212,204,209,204,0,0,0,0,0,0,0,198,208,204,212,212,212,204,208,198,0,0,0,0,0,0,0,200,208,206,212,200,212,206,208,200,0,0,0,0,0,0,0,194,206,204,212,200,212,204,206,194,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,100,100,96,91,90,91,96,100,100,0,0,0,0,0,0,0,98,98,96,92,89,92,96,98,98,0,0,0,0,0,0,0,97,97,96,91,92,91,96,97,97,0,0,0,0,0,0,0,96,99,99,98,100,98,99,99,96,0,0,0,0,0,0,0,96,96,96,96,100,96,96,96,96,0,0,0,0,0,0,0,95,96,99,96,100,96,99,96,95,0,0,0,0,0,0,0,96,96,96,96,96,96,96,96,96,0,0,0,0,0,0,0,97,96,100,99,101,99,100,96,97,0,0,0,0,0,0,0,96,97,98,98,98,98,98,97,96,0,0,0,0,0,0,0,96,96,97,99,99,99,97,96,96,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,11,13,11,9,9,9,0,0,0,0,0,0,0,19,24,34,42,44,42,34,24,19,0,0,0,0,0,0,0,19,24,32,37,37,37,32,24,19,0,0,0,0,0,0,0,19,23,27,29,30,29,27,23,19,0,0,0,0,0,0,0,14,18,20,27,29,27,20,18,14,0,0,0,0,0,0,0,7,0,13,0,16,0,13,0,7,0,0,0,0,0,0,0,7,0,7,0,15,0,7,0,7,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,11,15,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];function IN_BOARD(t){return 0!=IN_BOARD_[t]}function IN_FORT(t){return 0!=IN_FORT_[t]}function RANK_Y(t){return t>>4}function FILE_X(t){return 15&t}function COORD_XY(t,e){return t+(e<<4)}function SQUARE_FLIP(t){return 254-t}function FILE_FLIP(t){return 14-t}function RANK_FLIP(t){return 15-t}function MIRROR_SQUARE(t){return COORD_XY(FILE_FLIP(FILE_X(t)),RANK_Y(t))}function SQUARE_FORWARD(t,e){return t-16+(e<<5)}function KING_SPAN(t,e){return 1==LEGAL_SPAN[e-t+256]}function ADVISOR_SPAN(t,e){return 2==LEGAL_SPAN[e-t+256]}function BISHOP_SPAN(t,e){return 3==LEGAL_SPAN[e-t+256]}function BISHOP_PIN(t,e){return t+e>>1}function KNIGHT_PIN(t,e){return t+KNIGHT_PIN_[e-t+256]}function HOME_HALF(t,e){return(128&t)!=e<<7}function AWAY_HALF(t,e){return(128&t)==e<<7}function SAME_HALF(t,e){return 0==(128&(t^e))}function SAME_RANK(t,e){return 0==(240&(t^e))}function SAME_FILE(t,e){return 0==(15&(t^e))}function SIDE_TAG(t){return 8+(t<<3)}function OPP_SIDE_TAG(t){return 16-(t<<3)}function SRC(t){return 255&t}function DST(t){return t>>8}function MOVE(t,e){return t+(e<<8)}function MIRROR_MOVE(t){return MOVE(MIRROR_SQUARE(SRC(t)),MIRROR_SQUARE(DST(t)))}function MVV_LVA(t,e){return MVV_VALUE[7&t]-e}function CHR(t){return String.fromCharCode(t)}function ASC(t){return t.charCodeAt(0)}var FEN_PIECE="        KABNRCP kabnrcp ",PreGen_zobristKeyPlayer,PreGen_zobristLockPlayer;function CHAR_TO_PIECE(t){switch(t){case"K":return PIECE_KING;case"A":return PIECE_ADVISOR;case"B":case"E":return PIECE_BISHOP;case"H":case"N":return PIECE_KNIGHT;case"R":return PIECE_ROOK;case"C":return PIECE_CANNON;case"P":return PIECE_PAWN;default:return-1}}function RC4(t){this.x=this.y=0,this.state=[];for(var e=0;e<256;e++)this.state.push(e);var i=0;for(e=0;e<256;e++)i=i+this.state[e]+t[e%t.length]&255,this.swap(e,i)}RC4.prototype.swap=function(t,e){var i=this.state[t];this.state[t]=this.state[e],this.state[e]=i},RC4.prototype.nextByte=function(){this.x=this.x+1&255,this.y=this.y+this.state[this.x]&255,this.swap(this.x,this.y);var t=this.state[this.x]+this.state[this.y]&255;return this.state[t]},RC4.prototype.nextLong=function(){return this.nextByte()+(this.nextByte()<<8)+(this.nextByte()<<16)+(this.nextByte()<<24&4294967295)};var PreGen_zobristKeyTable=[],PreGen_zobristLockTable=[],rc4=new RC4([0]);PreGen_zobristKeyPlayer=rc4.nextLong(),rc4.nextLong(),PreGen_zobristLockPlayer=rc4.nextLong();for(var i=0;i<14;i++){for(var keys=[],locks=[],j=0;j<256;j++)keys.push(rc4.nextLong()),rc4.nextLong(),locks.push(rc4.nextLong());PreGen_zobristKeyTable.push(keys),PreGen_zobristLockTable.push(locks)}function Position(){}Position.prototype.clearBoard=function(){this.sdPlayer=0,this.squares=[];for(var t=0;t<256;t++)this.squares.push(0);this.zobristKey=this.zobristLock=0,this.vlWhite=this.vlBlack=0},Position.prototype.setIrrev=function(){this.mvList=[0],this.pcList=[0],this.keyList=[0],this.chkList=[this.checked()],this.distance=0},Position.prototype.addPiece=function(t,e,i){var n;this.squares[t]=i?0:e,e<16?(n=e-8,this.vlWhite+=i?-PIECE_VALUE[n][t]:PIECE_VALUE[n][t]):(n=e-16,this.vlBlack+=i?-PIECE_VALUE[n][SQUARE_FLIP(t)]:PIECE_VALUE[n][SQUARE_FLIP(t)],n+=7),this.zobristKey^=PreGen_zobristKeyTable[n][t],this.zobristLock^=PreGen_zobristLockTable[n][t]},Position.prototype.movePiece=function(t){var e=SRC(t),i=DST(t),n=this.squares[i];this.pcList.push(n),n>0&&this.addPiece(i,n,DEL_PIECE),n=this.squares[e],this.addPiece(e,n,DEL_PIECE),this.addPiece(i,n,ADD_PIECE),this.mvList.push(t)},Position.prototype.undoMovePiece=function(){var t=this.mvList.pop(),e=SRC(t),i=DST(t),n=this.squares[i];this.addPiece(i,n,DEL_PIECE),this.addPiece(e,n,ADD_PIECE),(n=this.pcList.pop())>0&&this.addPiece(i,n,ADD_PIECE)},Position.prototype.changeSide=function(){this.sdPlayer=1-this.sdPlayer,this.zobristKey^=PreGen_zobristKeyPlayer,this.zobristLock^=PreGen_zobristLockPlayer},Position.prototype.makeMove=function(t){var e=this.zobristKey;return this.movePiece(t),this.checked()?(this.undoMovePiece(t),!1):(this.keyList.push(e),this.changeSide(),this.chkList.push(this.checked()),this.distance++,!0)},Position.prototype.undoMakeMove=function(){this.distance--,this.chkList.pop(),this.changeSide(),this.keyList.pop(),this.undoMovePiece()},Position.prototype.nullMove=function(){this.mvList.push(0),this.pcList.push(0),this.keyList.push(this.zobristKey),this.changeSide(),this.chkList.push(!1),this.distance++},Position.prototype.undoNullMove=function(){this.distance--,this.chkList.pop(),this.changeSide(),this.keyList.pop(),this.pcList.pop(),this.mvList.pop()},Position.prototype.fromFen=function(t){this.clearBoard();var e=RANK_TOP,i=FILE_LEFT,n=0;if(n!=t.length){for(var s=t.charAt(n);" "!=s;){if("/"==s){if(i=FILE_LEFT,++e>RANK_BOTTOM)break}else if(s>="1"&&s<="9")i+=ASC(s)-ASC("0");else if(s>="A"&&s<="Z"){if(i<=FILE_RIGHT)(r=CHAR_TO_PIECE(s))>=0&&this.addPiece(COORD_XY(i,e),r+8),i++}else if(s>="a"&&s<="z"){var r;if(i<=FILE_RIGHT)(r=CHAR_TO_PIECE(CHR(ASC(s)+ASC("A")-ASC("a"))))>=0&&this.addPiece(COORD_XY(i,e),r+16),i++}if(++n==t.length)return void this.setIrrev();s=t.charAt(n)}++n!=t.length?(this.sdPlayer==("b"==t.charAt(n)?0:1)&&this.changeSide(),this.setIrrev()):this.setIrrev()}else this.setIrrev()},Position.prototype.toFen=function(){for(var t="",e=RANK_TOP;e<=RANK_BOTTOM;e++){for(var i=0,n=FILE_LEFT;n<=FILE_RIGHT;n++){var s=this.squares[COORD_XY(n,e)];s>0?(i>0&&(t+=CHR(ASC("0")+i),i=0),t+=FEN_PIECE.charAt(s)):i++}i>0&&(t+=CHR(ASC("0")+i)),t+="/"}return t.substring(0,t.length-1)+(0==this.sdPlayer?" w":" b")},Position.prototype.generateMoves=function(t){for(var e=[],i=SIDE_TAG(this.sdPlayer),n=OPP_SIDE_TAG(this.sdPlayer),s=0;s<256;s++){var r=this.squares[s];if(0!=(r&i))switch(r-i){case PIECE_KING:for(var o=0;o<4;o++){if(IN_FORT(c=s+KING_DELTA[o])){var a=this.squares[c];null==t?0==(a&i)&&e.push(MOVE(s,c)):0!=(a&n)&&(e.push(MOVE(s,c)),t.push(MVV_LVA(a,5)))}}break;case PIECE_ADVISOR:for(o=0;o<4;o++){if(IN_FORT(c=s+ADVISOR_DELTA[o])){a=this.squares[c];null==t?0==(a&i)&&e.push(MOVE(s,c)):0!=(a&n)&&(e.push(MOVE(s,c)),t.push(MVV_LVA(a,1)))}}break;case PIECE_BISHOP:for(o=0;o<4;o++){if(IN_BOARD(c=s+ADVISOR_DELTA[o])&&HOME_HALF(c,this.sdPlayer)&&0==this.squares[c]){c+=ADVISOR_DELTA[o];a=this.squares[c];null==t?0==(a&i)&&e.push(MOVE(s,c)):0!=(a&n)&&(e.push(MOVE(s,c)),t.push(MVV_LVA(a,1)))}}break;case PIECE_KNIGHT:for(o=0;o<4;o++){var c=s+KING_DELTA[o];if(!(this.squares[c]>0))for(var h=0;h<2;h++)if(IN_BOARD(c=s+KNIGHT_DELTA[o][h])){a=this.squares[c];null==t?0==(a&i)&&e.push(MOVE(s,c)):0!=(a&n)&&(e.push(MOVE(s,c)),t.push(MVV_LVA(a,1)))}}break;case PIECE_ROOK:for(o=0;o<4;o++)for(c=s+(l=KING_DELTA[o]);IN_BOARD(c);){if(0!=(a=this.squares[c])){0!=(a&n)&&(e.push(MOVE(s,c)),null!=t&&t.push(MVV_LVA(a,4)));break}null==t&&e.push(MOVE(s,c)),c+=l}break;case PIECE_CANNON:for(o=0;o<4;o++){for(c=s+(l=KING_DELTA[o]);IN_BOARD(c);){if(0!=(a=this.squares[c]))break;null==t&&e.push(MOVE(s,c)),c+=l}for(c+=l;IN_BOARD(c);){if((a=this.squares[c])>0){0!=(a&n)&&(e.push(MOVE(s,c)),null!=t&&t.push(MVV_LVA(a,4)));break}c+=l}}break;case PIECE_PAWN:if(IN_BOARD(c=SQUARE_FORWARD(s,this.sdPlayer))){a=this.squares[c];null==t?0==(a&i)&&e.push(MOVE(s,c)):0!=(a&n)&&(e.push(MOVE(s,c)),t.push(MVV_LVA(a,2)))}if(AWAY_HALF(s,this.sdPlayer))for(var l=-1;l<=1;l+=2)if(IN_BOARD(c=s+l)){a=this.squares[c];null==t?0==(a&i)&&e.push(MOVE(s,c)):0!=(a&n)&&(e.push(MOVE(s,c)),t.push(MVV_LVA(a,2)))}}}return e},Position.prototype.legalMove=function(t){var e=SRC(t),i=this.squares[e],n=SIDE_TAG(this.sdPlayer);if(0==(i&n))return!1;var s=DST(t),r=this.squares[s];if(0!=(r&n))return!1;switch(i-n){case PIECE_KING:return IN_FORT(s)&&KING_SPAN(e,s);case PIECE_ADVISOR:return IN_FORT(s)&&ADVISOR_SPAN(e,s);case PIECE_BISHOP:return SAME_HALF(e,s)&&BISHOP_SPAN(e,s)&&0==this.squares[BISHOP_PIN(e,s)];case PIECE_KNIGHT:return(a=KNIGHT_PIN(e,s))!=e&&0==this.squares[a];case PIECE_ROOK:case PIECE_CANNON:var o;if(SAME_RANK(e,s))o=s<e?-1:1;else{if(!SAME_FILE(e,s))return!1;o=s<e?-16:16}for(var a=e+o;a!=s&&0==this.squares[a];)a+=o;if(a==s)return 0==r||i-n==PIECE_ROOK;if(0==r||i-n!=PIECE_CANNON)return!1;for(a+=o;a!=s&&0==this.squares[a];)a+=o;return a==s;case PIECE_PAWN:return!(!AWAY_HALF(s,this.sdPlayer)||s!=e-1&&s!=e+1)||s==SQUARE_FORWARD(e,this.sdPlayer);default:return!1}},Position.prototype.checked=function(){for(var t=SIDE_TAG(this.sdPlayer),e=OPP_SIDE_TAG(this.sdPlayer),i=0;i<256;i++)if(this.squares[i]==t+PIECE_KING){if(this.squares[SQUARE_FORWARD(i,this.sdPlayer)]==e+PIECE_PAWN)return!0;for(var n=-1;n<=1;n+=2)if(this.squares[i+n]==e+PIECE_PAWN)return!0;for(var s=0;s<4;s++)if(0==this.squares[i+ADVISOR_DELTA[s]])for(var r=0;r<2;r++){if((a=this.squares[i+KNIGHT_CHECK_DELTA[s][r]])==e+PIECE_KNIGHT)return!0}for(s=0;s<4;s++){for(var o=i+(n=KING_DELTA[s]);IN_BOARD(o);){if((a=this.squares[o])>0){if(a==e+PIECE_ROOK||a==e+PIECE_KING)return!0;break}o+=n}for(o+=n;IN_BOARD(o);){var a;if((a=this.squares[o])>0){if(a==e+PIECE_CANNON)return!0;break}o+=n}}return!1}return!1},Position.prototype.isMate=function(){for(var t=this.generateMoves(null),e=0;e<t.length;e++)if(this.makeMove(t[e]))return this.undoMakeMove(),!1;return!0},Position.prototype.mateValue=function(){return this.distance-MATE_VALUE},Position.prototype.banValue=function(){return this.distance-BAN_VALUE},Position.prototype.drawValue=function(){return 0==(1&this.distance)?-DRAW_VALUE:DRAW_VALUE},Position.prototype.evaluate=function(){var t=(0==this.sdPlayer?this.vlWhite-this.vlBlack:this.vlBlack-this.vlWhite)+ADVANCED_VALUE;return t==this.drawValue()?t-1:t},Position.prototype.nullOkay=function(){return(0==this.sdPlayer?this.vlWhite:this.vlBlack)>NULL_OKAY_MARGIN},Position.prototype.nullSafe=function(){return(0==this.sdPlayer?this.vlWhite:this.vlBlack)>NULL_SAFE_MARGIN},Position.prototype.inCheck=function(){return this.chkList[this.chkList.length-1]},Position.prototype.captured=function(){return this.pcList[this.pcList.length-1]>0},Position.prototype.repValue=function(t){var e=(0==(2&t)?0:this.banValue())+(0==(4&t)?0:-this.banValue());return 0==e?this.drawValue():e},Position.prototype.repStatus=function(t){for(var e=t,i=!1,n=!0,s=!0,r=this.mvList.length-1;this.mvList[r]>0&&0==this.pcList[r];){if(i){if(n=n&&this.chkList[r],this.keyList[r]==this.zobristKey&&0==--e)return 1+(n?2:0)+(s?4:0)}else s=s&&this.chkList[r];i=!i,r--}return 0},Position.prototype.mirror=function(){var t=new Position;t.clearBoard();for(var e=0;e<256;e++){var i=this.squares[e];i>0&&t.addPiece(MIRROR_SQUARE(e),i)}return 1==this.sdPlayer&&t.changeSide(),t},Position.prototype.bookMove=function(){if("object"!=typeof BOOK_DAT||0==BOOK_DAT.length)return 0;var t=!1,e=this.zobristLock>>>1,i=binarySearch(BOOK_DAT,e);if(i<0&&(t=!0,e=this.mirror().zobristLock>>>1,i=binarySearch(BOOK_DAT,e)),i<0)return 0;for(i--;i>=0&&BOOK_DAT[i][0]==e;)i--;var n=[],s=[],r=0;for(i++;i<BOOK_DAT.length&&BOOK_DAT[i][0]==e;){var o=BOOK_DAT[i][1];if(o=t?MIRROR_MOVE(o):o,this.legalMove(o)){n.push(o);var a=BOOK_DAT[i][2];s.push(a),r+=a}i++}if(0==r)return 0;for(r=Math.floor(Math.random()*r),i=0;i<n.length&&!((r-=s[i])<0);i++);return n[i]},Position.prototype.historyIndex=function(t){return(this.squares[SRC(t)]-8<<8)+DST(t)};var SHELL_STEP=[0,1,4,13,40,121,364,1093];function shellSort(t,e){for(var i=1;SHELL_STEP[i]<t.length;)i++;for(i--;i>0;){for(var n=SHELL_STEP[i],s=n;s<t.length;s++){for(var r=t[s],o=e[s],a=s-n;a>=0&&o>e[a];)t[a+n]=t[a],e[a+n]=e[a],a-=n;t[a+n]=r,e[a+n]=o}i--}}var PHASE_HASH=0,PHASE_KILLER_1=1,PHASE_KILLER_2=2,PHASE_GEN_MOVES=3,PHASE_REST=4;function MoveSort(t,e,i,n){if(this.mvs=[],this.vls=[],this.mvHash=this.mvKiller1=this.mvKiller2=0,this.pos=e,this.historyTable=n,this.phase=PHASE_HASH,this.index=0,this.singleReply=!1,e.inCheck()){this.phase=PHASE_REST;for(var s=e.generateMoves(null),r=0;r<s.length;r++){var o=s[r];e.makeMove(o)&&(e.undoMakeMove(),this.mvs.push(o),this.vls.push(o==t?2147483647:n[e.historyIndex(o)]))}shellSort(this.mvs,this.vls),this.singleReply=1==this.mvs.length}else this.mvHash=t,this.mvKiller1=i[e.distance][0],this.mvKiller2=i[e.distance][1]}MoveSort.prototype.next=function(){switch(this.phase){case PHASE_HASH:if(this.phase=PHASE_KILLER_1,this.mvHash>0)return this.mvHash;case PHASE_KILLER_1:if(this.phase=PHASE_KILLER_2,this.mvKiller1!=this.mvHash&&this.mvKiller1>0&&this.pos.legalMove(this.mvKiller1))return this.mvKiller1;case PHASE_KILLER_2:if(this.phase=PHASE_GEN_MOVES,this.mvKiller2!=this.mvHash&&this.mvKiller2>0&&this.pos.legalMove(this.mvKiller2))return this.mvKiller2;case PHASE_GEN_MOVES:this.phase=PHASE_REST,this.mvs=this.pos.generateMoves(null),this.vls=[];for(var t=0;t<this.mvs.length;t++)this.vls.push(this.historyTable[this.pos.historyIndex(this.mvs[t])]);shellSort(this.mvs,this.vls),this.index=0;default:for(;this.index<this.mvs.length;){var e=this.mvs[this.index];if(this.index++,e!=this.mvHash&&e!=this.mvKiller1&&e!=this.mvKiller2)return e}}return 0};var LIMIT_DEPTH=64,NULL_DEPTH=2,RANDOMNESS=8,HASH_ALPHA=1,HASH_BETA=2,HASH_PV=3;function Search(t,e){this.hashMask=(1<<e)-1,this.pos=t}function CHR(t){return String.fromCharCode(t)}function ASC(t){return t.charCodeAt(0)}function move2Iccs(t){var e=SRC(t),i=DST(t);return CHR(ASC("A")+FILE_X(e)-FILE_LEFT)+CHR(ASC("9")-RANK_Y(e)+RANK_TOP)+"-"+CHR(ASC("A")+FILE_X(i)-FILE_LEFT)+CHR(ASC("9")-RANK_Y(i)+RANK_TOP)}Search.prototype.getHashItem=function(){return this.hashTable[this.pos.zobristKey&this.hashMask]},Search.prototype.probeHash=function(t,e,i,n){var s=this.getHashItem();if(s.zobristLock!=this.pos.zobristLock)return n[0]=0,-MATE_VALUE;n[0]=s.mv;var r=!1;if(s.vl>WIN_VALUE){if(s.vl<=BAN_VALUE)return-MATE_VALUE;s.vl-=this.pos.distance,r=!0}else if(s.vl<-WIN_VALUE){if(s.vl>=-BAN_VALUE)return-MATE_VALUE;s.vl+=this.pos.distance,r=!0}else if(s.vl==this.pos.drawValue())return-MATE_VALUE;return s.depth<i&&!r?-MATE_VALUE:s.flag==HASH_BETA?s.vl>=e?s.vl:-MATE_VALUE:s.flag==HASH_ALPHA?s.vl<=t?s.vl:-MATE_VALUE:s.vl},Search.prototype.recordHash=function(t,e,i,n){var s=this.getHashItem();if(!(s.depth>i)){if(s.flag=t,s.depth=i,e>WIN_VALUE){if(0==n&&e<=BAN_VALUE)return;s.vl=e+this.pos.distance}else if(e<-WIN_VALUE){if(0==n&&e>=-BAN_VALUE)return;s.vl=e-this.pos.distance}else{if(e==this.pos.drawValue()&&0==n)return;s.vl=e}s.mv=n,s.zobristLock=this.pos.zobristLock}},Search.prototype.setBestMove=function(t,e){this.historyTable[this.pos.historyIndex(t)]+=e*e;var i=this.killerTable[this.pos.distance];i[0]!=t&&(i[1]=i[0],i[0]=t)},Search.prototype.searchQuiesc=function(t,e){var i=t;this.allNodes++;var n=this.pos.mateValue();if(n>=e)return n;var s=this.pos.repStatus(1);if(s>0)return this.pos.repValue(s);if(this.pos.distance==LIMIT_DEPTH)return this.pos.evaluate();var r=-MATE_VALUE,o=[],a=[];if(this.pos.inCheck()){o=this.pos.generateMoves(null);for(var c=0;c<o.length;c++)a.push(this.historyTable[this.pos.historyIndex(o[c])]);shellSort(o,a)}else{if((n=this.pos.evaluate())>r){if(n>=e)return n;r=n,i=Math.max(n,i)}shellSort(o=this.pos.generateMoves(a),a);for(c=0;c<o.length;c++)if(a[c]<10||a[c]<20&&HOME_HALF(DST(o[c]),this.pos.sdPlayer)){o.length=c;break}}for(c=0;c<o.length;c++)if(this.pos.makeMove(o[c])&&(n=-this.searchQuiesc(-e,-i),this.pos.undoMakeMove(),n>r)){if(n>=e)return n;r=n,i=Math.max(n,i)}return r==-MATE_VALUE?this.pos.mateValue():r},Search.prototype.searchFull=function(t,e,i,n){var s=t;if(i<=0)return this.searchQuiesc(s,e);this.allNodes++;var r=this.pos.mateValue();if(r>=e)return r;var o=this.pos.repStatus(1);if(o>0)return this.pos.repValue(o);var a=[0];if((r=this.probeHash(s,e,i,a))>-MATE_VALUE)return r;if(this.pos.distance==LIMIT_DEPTH)return this.pos.evaluate();if(!n&&!this.pos.inCheck()&&this.pos.nullOkay()&&(this.pos.nullMove(),r=-this.searchFull(-e,1-e,i-NULL_DEPTH-1,!0),this.pos.undoNullMove(),r>=e&&(this.pos.nullSafe()||this.searchFull(s,e,i-NULL_DEPTH,!0)>=e)))return r;for(var c,h=HASH_ALPHA,l=-MATE_VALUE,u=0,d=new MoveSort(a[0],this.pos,this.killerTable,this.historyTable);(c=d.next())>0;)if(this.pos.makeMove(c)){var _=this.pos.inCheck()||d.singleReply?i:i-1;if((l==-MATE_VALUE||(r=-this.searchFull(-s-1,-s,_,!1))>s&&r<e)&&(r=-this.searchFull(-e,-s,_,!1)),this.pos.undoMakeMove(),r>l){if(l=r,r>=e){h=HASH_BETA,u=c;break}r>s&&(s=r,h=HASH_PV,u=c)}}return l==-MATE_VALUE?this.pos.mateValue():(this.recordHash(h,l,i,u),u>0&&this.setBestMove(u,i),l)},Search.prototype.searchRoot=function(t){for(var e,i=-MATE_VALUE,n=new MoveSort(this.mvResult,this.pos,this.killerTable,this.historyTable);(e=n.next())>0;)if(this.pos.makeMove(e)){var s,r=this.pos.inCheck()?t:t-1;i==-MATE_VALUE?s=-this.searchFull(-MATE_VALUE,MATE_VALUE,r,!0):(s=-this.searchFull(-i-1,-i,r,!1))>i&&(s=-this.searchFull(-MATE_VALUE,-i,r,!0)),this.pos.undoMakeMove(),s>i&&(i=s,this.mvResult=e,i>-WIN_VALUE&&i<WIN_VALUE&&(i=(i+=Math.floor(Math.random()*RANDOMNESS)-Math.floor(Math.random()*RANDOMNESS))==this.pos.drawValue()?i-1:i))}return this.setBestMove(this.mvResult,t),i},Search.prototype.searchUnique=function(t,e){var i,n=new MoveSort(this.mvResult,this.pos,this.killerTable,this.historyTable);for(n.next();(i=n.next())>0;)if(this.pos.makeMove(i)){var s=-this.searchFull(-t,1-t,this.pos.inCheck()?e:e-1,!1);if(this.pos.undoMakeMove(),s>=t)return!1}return!0},Search.prototype.searchMain=function(t,e){if(this.mvResult=this.pos.bookMove(),this.mvResult>0){if(this.pos.makeMove(this.mvResult),0==this.pos.repStatus(3))return this.pos.undoMakeMove(),this.mvResult;this.pos.undoMakeMove()}this.hashTable=[];for(var i=0;i<=this.hashMask;i++)this.hashTable.push({depth:0,flag:0,vl:0,mv:0,zobristLock:0});this.killerTable=[];for(i=0;i<LIMIT_DEPTH;i++)this.killerTable.push([0,0]);this.historyTable=[];for(i=0;i<4096;i++)this.historyTable.push(0);this.mvResult=0,this.allNodes=0,this.pos.distance=0;var n=(new Date).getTime();for(i=1;i<=t;i++){var s=this.searchRoot(i);if(this.allMillis=(new Date).getTime()-n,this.allMillis>e)break;if(s>WIN_VALUE||s<-WIN_VALUE)break;if(this.searchUnique(1-WIN_VALUE,i))break}return this.mvResult},Search.prototype.getKNPS=function(){return this.allNodes/this.allMillis};
//=============================

//=============================

JACOB_FEN_MAP = [
  "K",
  "A",
  "A",
  "B",
  "B",
  "R",
  "R",
  "C",
  "C",
  "N",
  "N",
  "P",
  "P",
  "P",
  "P",
  "P",
  "k",
  "a",
  "a",
  "b",
  "b",
  "r",
  "r",
  "c",
  "c",
  "n",
  "n",
  "p",
  "p",
  "p",
  "p",
  "p",
];

function jacob_boardToFen() {
  if (!JACOB_BOARD) {
    return "";
  }

  let map = JACOB_FEN_MAP
  let fen = "";

  for (let i = 9; i >= 0; i--) {
    let line = "";
    let space = 0;
    for (let j = 0; j < 9; j++) {
      let index = JACOB_BOARD[j][i];
      if (index < 0 || index > 31) {
        space++;
      } else {
        if (space > 0) {
          line += space.toString();
        }
        line += map[index];
        space = 0;
      }
    }
    if (space > 0) {
      line += space.toString();
    }
    fen += line + "/";
  }

  if (fen.endsWith("/")) {
    fen = fen.substring(0, fen.length - 1);
  }

  return fen;
}

$(document).ready(function () {
  let jacob_control = $(".container-fluid:first");
  let jacob_newHtml = `
  <div style="height:100px">
    <div style="float:left">      
      <span id="jacob_hint" style="cursor:pointer;font-weight: bold; font-size: 24px">Hint</span> 
      <span id="jacob_next_move"></span>
    </div>
    <div id="jacob_fen" style="float:right;min-width=100px"></div>
  </div>
  
  `;

  jacob_control.html(jacob_newHtml);

  $("#jacob_hint").on("click", function () {
    jacob_calculate();
    $("#jacob_fen").html(JACOB_FEN + " w");
  });

  $("#jacob_fen").on("click", function () {        
    navigator.clipboard.writeText(fen + " w");
  });
});

function jacob_calculate() {
  if (!JACOB_BOARD) {
    return;
  }

  let currentFen = jacob_boardToFen();
  if (JACOB_FEN == currentFen) {
    return;
  }

  JACOB_FEN = currentFen;
  $("#jacob_next_move").text("thinking");
  jacobPos.fromFen(JACOB_FEN + " w");

  let move = jacobSearch.searchMain(64, 2000);
  let moveText = move2Iccs(move);

  $("#jacob_next_move").text(moveText);
}

window.JACOB_BOARD = null;
window.JACOB_FEN = null;
let jacobPos = new Position();
let jacobSearch = new Search(jacobPos, 16);
